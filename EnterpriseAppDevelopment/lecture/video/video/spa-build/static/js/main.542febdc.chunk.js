(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"++Rr":function(e,t,n){},"+3pQ":function(e,t,n){},"+Ft7":function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return d}));var o={month:"numeric",day:"numeric",year:"numeric"},i={month:"short",day:"numeric",year:"numeric"},c={month:"short",day:"numeric",year:"numeric"},s={hour:"numeric",minute:"numeric",second:"numeric"},u={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},l={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},d={SHORT:r({},{month:"numeric",day:"numeric",year:"numeric"},{hour:"numeric",minute:"numeric"}),MEDIUM:r({},o,s),LONG:r({},i,u),FULL:r({},c,l)}},"+Ml8":function(e,t,n){},"+hrH":function(e,t,n){},"+nBP":function(e,t,n){},"+nQR":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("oFFJ"),i=n("/MKj"),c=n("+psP");function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p="application/xml",m=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,d=new Array(u),p=0;p<u;p++)d[p]=arguments[p];return r=this,n=!(a=(e=l(t)).call.apply(e,[this].concat(d)))||"object"!==s(a)&&"function"!==typeof a?f(r):a,o=f(f(n)),c={cursorSrc:void 0,zoomsSrc:void 0,chatSrc:void 0,shapesSrc:void 0,videoSrc:void 0,captionSrc:void 0,slaveVideoSrc:void 0,eventsSrc:void 0,showPlayer:!1},(i="state")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setup()}},{key:"setup",value:function(){var e=document.querySelector('[data-path="video"]'),t=document.querySelector('[data-path="slave-video"]'),n=e.innerHTML,r=document.querySelector('[data-path="caption.vtt"]'),a=null,o=null;t&&(a=t.innerHTML),r&&(o=this.getLink(r,"text/vtt"));var i=document.querySelector('[data-path="cursor.xml"]'),c=document.querySelector('[data-path="panzooms.xml"]'),s=document.querySelector('[data-path="slides_new.xml"]'),u=document.querySelector('[data-path="shapes.svg"]'),l=document.querySelector('[data-path="events.xml"]'),d=this.getLink(i,p),f=this.getLink(c,p),m=this.getLink(s,p),b=this.getLink(l,p),y=this.getLink(u,"image/svg+xml");this.setState({cursorSrc:d,zoomsSrc:f,chatSrc:m,shapesSrc:y,videoSrc:n,slaveVideoSrc:a,captionSrc:o,eventsSrc:b,showPlayer:!0})}},{key:"getLink",value:function(e,t){var n=new Blob([e.innerHTML],{type:t});return URL.createObjectURL(n)}},{key:"render",value:function(){var e=this.state,t=e.cursorSrc,n=e.zoomsSrc,r=e.chatSrc,o=e.shapesSrc,i=e.videoSrc,s=e.slaveVideoSrc,u=e.showPlayer,l=e.captionSrc,d=e.eventsSrc;if(!u)return a.a.createElement("span",null);var f=null;return l&&(f={src:l,label:"En",kind:"captions"}),a.a.createElement("div",null,a.a.createElement(c.a,{svgUrl:o,cursorUrl:t,zoomsUrl:n,caption:f,chatMessagesUrl:r,eventsUrl:d,playerId:"Downloaded bbb player",mainStreamUrl:i,slaveStreamUrl:s}))}}])&&u(n.prototype,r),o&&u(n,o),t}(r.Component),b=n("TJpk"),y=n("SsKX"),v=n("9C/b"),h=n("838P"),g=(n("IgdK"),n("TSYQ")),E=n.n(g),w=n("LvDl"),S=n.n(w),O=n("MOhp"),C=n("Dl6w"),_=n("hvs/"),T=n("0Kzw"),I=n("NlSD"),P=n("lTCR"),R=n.n(P),A=n("8bCP"),j=n("wNa6"),k=n("7cfX"),N=n.n(k),D={},L={ACTIVE:"active",FILTERS:"filters"},M=n("HNnK"),x=n("UyA7"),F=n("h4t+"),V=n("tslA"),G=n.n(V);function U(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n{\n  configuration {\n    aptrinsicApiKey\n  }\n}\n"]);return U=function(){return e},e}function q(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,c,"next",e)}function c(e){q(o,r,a,i,c,"throw",e)}i(void 0)}))}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=Object(A.c)("env-conf"),Y=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,"initialize",(function(){if(!t.isInitialized){Q.debug("Initializing EnvironmentConfigService..."),t.fetchFeatureConfig();var e=N()((function(){return Object(M.h)(j.a.getState())})),n=N()((function(){return Object(x.h)(j.a.getState())})),r=N()((function(){return Object(x.k)(j.a.getState())}));j.a.subscribe(e(t.reprocessFeatureConfig)),j.a.subscribe(n(t.reprocessFeatureConfig)),j.a.subscribe(r(t.reprocessFeatureConfig)),t.fetchEnvironmentConfig(),Q.debug("... initialized."),t.isInitialized=!0}})),B(this,"fetchEnvironmentConfig",W(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.debug(">>> Fetching environment config"),I.a.query({query:H}).then((function(e){var t=e.data.configuration;Q.debug("<<< Fetched environment config:",t),j.a.dispatch(O.q(t))})).catch((function(e){A.b.error("EnvironmentConfigService:: Failed to fetch configuration data",e)}));case 2:case"end":return e.stop()}}),e,this)})))),B(this,"fetchFeatureConfig",W(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q.debug(">>> Fetching feature config"),e.prev=1,e.next=4,fetch(G.a,{method:"GET",cache:"no-cache"});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,Q.debug("<<< Fetched feature config:",r),t.processFeatureConfig(r),t.featureConfig=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Q.warn("EnvironmentConfigService:: Failed to fetch and process feature config",e.t0);case 16:t.fetchFeatureConfigTimeout=setTimeout(t.fetchFeatureConfig,3e5);case 17:case"end":return e.stop()}}),e,this,[[1,13]])})))),B(this,"reprocessFeatureConfig",(function(){t.debouncedProcessFeatureConfig||(t.debouncedProcessFeatureConfig=S.a.debounce(t.processFeatureConfig)),t.debouncedProcessFeatureConfig(t.featureConfig)})),B(this,"processFeatureConfig",(function(e){if(e){Q.debug(">>> Processing feature config");var n=t.getSessionData();Q.debug("Matching filters against Session Data:",n);var r={};S.a.forEach(D,(function(a){var o="is".concat(a,"Active");r[o]=t.isFeatureActive(e[a],n)})),j.a.dispatch(O.r(r)),Q.debug("<<< Finished processing feature config:",r)}})),B(this,"isFeatureActive",(function(e,t){if(!e)return!1;var n=e[L.ACTIVE];if(!n||!S.a.isBoolean(n))return!1;var r=e[L.FILTERS];if(r&&S.a.isArray(r)&&!S.a.isEmpty(r)){for(var a=0;a<r.length;a++){var o=r[a];if(!S.a.isEmpty(o)&&S.a.isMatch(t,o))return!0}return!1}return!0})),B(this,"getSessionData",(function(){var e=j.a.getState();return{region:{name:Object(F.d)()},institution:Object(x.h)(e),termClass:Object(x.k)(e),user:Object(M.h)(e)}}))};B(Y,"isInitialized",!1),B(Y,"fetchFeatureConfigTimeout",null),B(Y,"featureConfig",{}),B(Y,"debouncedProcessFeatureConfig",null);var H=R()(U()),z=new Y,K=n("fbOa"),X=n("PWzU"),$=n("G4qV"),Z=n("upk1"),J=Object($.a)(Z.a,(function(e){return e.modal})),ee=Object($.a)(J,(function(e){return e.currentModal})),te=n("Y7ox"),ne=n("ChKr"),re=n("9mqd"),ae=n("G19t"),oe=n("2Gxn"),ie=n("o41Y"),ce=n("6SRB"),se=n("BulX"),ue=n("vRGJ"),le=n.n(ue);function de(e){var t=!1;return se.b.forEach((function(n){le()(n).test(e)&&(t=!0)})),t}var fe=n("hIiU");n("tPwa");function pe(e){return(pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==pe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=be(this,ye(t).call(this,e)),oe.b()&&document.body.classList.add("bongo-ios"),ae.a.applyTheme(C.b),K.a.initialize(),de(n.props.location.pathname)||(z.initialize(),re.a.initialize()),ce.a.monitorWindowChanges(),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"componentDidCatch",value:function(e,t){A.b.warn(e,t)}},{key:"UNSAFE_componentWillMount",value:function(){this.isAnonymous=de(this.props.location.pathname),this.isAnonymous||T.a.getUserData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.institution,r=t.dispatch,a=e.trialExpirationDate;if(fe.a.isTrialExpired(a)){var o=e.location,i=e.history;fe.a.isTrialPath(o.pathname)||fe.a.rerouteToTrialsPage(o.pathname,i)}var c=e.institution;c&&n!==c&&(Object(ie.i)(c)||Object(ie.h)(c))&&(r(O.z(C.c)),ae.a.applyTheme(C.c))}},{key:"componentDidMount",value:function(){this.props.history.listen((function(){te.a.closeModal(),ne.a.removeAllOfType(ne.a.TYPES.ERROR)}))}},{key:"render",value:function(){var e=this.props,t=e.transferConfig,n=e.authIsLoading,r=e.currentModal,o=e.trialExpirationDate,i=e.institution,c=e.integrationMode,s=e.location;if(n&&!this.isAnonymous)return null;if(fe.a.isTrialExpired(o)){var u=this.props.location;if(!fe.a.isTrialPath(u.pathname))return null}if(Object(ie.i)(i)&&!c){var l=Object(y.a)(s.pathname,{path:se.c,exact:!1});if(l){var d=l.params.classId;if(d=d?+d:null,S.a.isNumber(d))return X.a.getClassData(+d),a.a.createElement(_.b,{loading:!0})}}return a.a.createElement("main",{className:E()("bongo-app")},a.a.createElement(b.Helmet,null,t&&a.a.createElement("script",{type:"text/javascript",src:"https://www.dropbox.com/static/api/2/dropins.js",id:"dropboxjs","data-app-key":t.dropbox.appKey})),this.props.children,r,a.a.createElement(h.ToastContainer,{bodyClassName:"notification-item-body",className:"notification-container",toastClassName:"notification-item",autoClose:!1,closeButton:!1,draggable:!1,position:h.toast.POSITION.TOP_RIGHT,hideProgressBar:!0}))}}])&&me(n.prototype,r),o&&me(n,o),t}(r.Component);he.defaultProps={authIsLoading:!0};var ge=Object(v.a)(Object(i.b)((function(e){return{authIsLoading:M.d(e),transferConfig:x.m(e),currentModal:ee(e),featureConfig:x.c(e),institution:x.h(e),integrationMode:x.i(e),trialExpirationDate:x.q(e)}}))(he)),Ee=n("5Lwc"),we=n("ZD0w"),Se=n("Wme0");function Oe(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    mutation editUserLocale($input: EditUserLocaleInput!) {\n        editUserLocale(input: $input) {\n            user {\n                dbId\n            }\n        }\n    }\n"]);return Oe=function(){return e},e}var Ce=function(e){return new Promise((function(){I.a.mutate({mutation:_e,variables:{input:{locale:e}}})})).catch((function(e){return A.b.debug(e)}))},_e=R()(Oe()),Te=n("45tj"),Ie=n("8OJ3"),Pe=n("wd/R"),Re=n.n(Pe);function Ae(e){return(Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}function ke(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){function t(){var e,r,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return a=this,o=(e=De(t)).call.apply(e,[this].concat(c)),r=!o||"object"!==Ae(o)&&"function"!==typeof o?Me(a):o,xe(Me(Me(r)),"state",{catalogs:{}}),xe(Me(Me(r)),"loadMessages",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.loadMomentMessages(t),r.loadVideoJsMessages(t),a=Object(Te.a)(t),A.b.debug("Attempting to load locale message bundle for '".concat(a,"' (","locale/".concat(a,"/messages"),")...")),e.next=6,n("pX12")("./".concat(a,"/messages"));case 6:o=e.sent,A.b.debug("Message bundle loaded (".concat("locale/".concat(a,"/messages"),")")),i=r.state.catalogs,r.setState({catalogs:je({},i,xe({},t,o))});case 10:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ke(o,r,a,i,c,"next",e)}function c(e){ke(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),xe(Me(Me(r)),"loadVideoJsMessages",(function(e){window.videojs=Ie.a;var t=Object(Te.g)(e);t&&(A.b.debug("Attempting to load videojs locale message bundle for '".concat(t,"' (","video.js/dist/lang/".concat(t),")...")),n("mqCC")("./".concat(t)).then((function(){A.b.debug("videojs message bundle loaded (".concat("video.js/dist/lang/".concat(t),")"))})).catch((function(e){A.b.debug("Unable to load videojs locale message bundle for '".concat(t,"'"),e)})))})),xe(Me(Me(r)),"loadMomentMessages",(function(e){var t=Object(Te.c)(e);t&&(A.b.debug("Attempting to load moment locale message bundle for '".concat(t,"' (","locale/".concat(t,"/messages"),")...")),n("mLCR")("./".concat(t)).then((function(){A.b.debug("Moment message bundle loaded (".concat("moment/locale/".concat(t),")")),Re.a.locale(t)})).catch((function(e){A.b.debug("Unable to load moment locale message bundle for '".concat(t,"'"),e)})))})),xe(Me(Me(r)),"getLanguage",(function(e){var t=e?e.frontend:"en-US";return Object(Te.f)(t)})),r}var r,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){var e=this.props.locale,t=this.getLanguage(e);this.loadMessages(t),Object(Te.i)(e)&&Ce(Object(Te.b)(t))}},{key:"shouldComponentUpdate",value:function(e,t){var n=e.locale,r=t.catalogs,a=this.getLanguage(n);return!!r[a]||(Object(Te.i)(n)&&Ce(Object(Te.b)(a)),A.b.debug("Locale has changed to '".concat(a,"'")),this.loadMessages(a),!1)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.locale,r=this.state.catalogs,o=this.getLanguage(n);return a.a.createElement(we.I18nProvider,{catalogs:r,language:o},t)}}])&&Ne(r.prototype,o),i&&Ne(r,i),t}(a.a.Component),Ve=Object(i.b)((function(e){return{locale:Se.a(e)}}))(Fe),Ge=(n("9XMF"),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Ue(e){if("serviceWorker"in navigator){if(new URL("/spa-build",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/spa-build","/service-worker.js");Ge?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):qe(e,t)})).catch((function(){A.b.debug("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){A.b.debug("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):qe(t,e)}))}}function qe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(A.b.debug("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(A.b.debug("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){A.b.warn("Error during service worker registration:",e)}))}var We=n("VmXB"),Be=n("PwM7");function Qe(e){return(Qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return!t||"object"!==Qe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),He(this,ze(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){Ee.b(),Ue()}},{key:"render",value:function(){var e=this.props.basename,t=a.a.createElement(o.a,{basename:e},a.a.createElement(ge,null,We.c));return Object(Be.b)()&&(t=a.a.createElement(m,null)),a.a.createElement(i.a,{store:j.a},a.a.createElement(Ve,null,t))}}])&&Ye(n.prototype,r),c&&Ye(n,c),t}(r.Component);t.default=Xe},"+psP":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("AsxP"),u=n.n(s),l=n("C721"),d=n("LvDl"),f=n.n(d),p=n("8bCP"),m=n("LMP5");function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g="[eventname='RecordStatusEvent']",E=new RegExp(/^(image\d+-)?text\d+/),w=new RegExp(/^image\d+-poll\d+/),S=function(){function e(t){var n=this,r=t.svgUrl,a=t.cursorUrl,o=t.zoomsUrl,i=t.chatMessagesUrl,c=t.eventsUrl;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"parseRecordingIntervals",(function(){var e=[],t=[];n.eventsDocument(g).each((function(n,r){var a=+r.attribs.timestamp;r.children.forEach((function(n){"status"===n.name&&"true"===n.children[0].data&&e.push(a),"status"===n.name&&"false"===n.children[0].data&&t.push(a)}))})),t.sort((function(e,t){return e-t})),e.sort((function(e,t){return e-t}));var r=[];return e.forEach((function(e,n){var a=0,o=r[n-1];o&&(a=o.gap+(e-o.end));var i=t[n]||1/0;r.push({start:e,end:i,gap:a})})),r})),h(this,"calculateNormalizedTimestamp",(function(e){var t,r;return n.recordingIntervals.forEach((function(a,o){if(e>=a.start&&e<=a.end)t=a;else{var i=n.recordingIntervals[o-1];e<a.start&&(!i||i.end<e)&&(r=a)}})),t||r?t?(e-n.recordingIntervals[0].start-t.gap)/1e3:(r.start-n.recordingIntervals[0].start-r.gap)/1e3:1/0})),this.svgUrl=r,this.cursorUrl=a,this.zoomsUrl=o,this.chatMessagesUrl=i,this.eventsUrl=c,this.parsedData={}}var t,n,r;return t=e,(n=[{key:"parse",value:function(){var e=this;return Promise.all([this.parseSvg(),this.parseCursor(),this.parseZooms(),this.parseMessages(),this.parseDeskshareAppearance()]).then((function(){return e.parsedData}))}},{key:"parseDeskshareAppearance",value:function(){var e=this;return l.a.get(this.eventsUrl).then((function(t){e.eventsDocument=u.a.load(t.data,{xmlMode:!0,normalizeWhitespace:!0}),e.recordingIntervals=e.parseRecordingIntervals(),e.parsedData.deskshareShowTimes=e.parseDeskshareShowTimes(),p.b.debug(e.parsedData.deskshareShowTimes,e.parsedData.whiteboardShowTimes)}))}},{key:"parseDeskshareShowTimes",value:function(){var e=this;try{var t=[];this.eventsDocument("[eventname='StartDeskshareEvent']").toArray().concat(this.eventsDocument("[eventname='ShowDeskshareEvent']").toArray()).forEach((function(e){return t.push({timestamp:+e.attribs.timestamp,type:"[eventname='StartDeskshareEvent']"})})),this.eventsDocument("[eventname='StopDeskshareEvent']").toArray().concat(this.eventsDocument("[eventname='HideDeskshareEvent']").toArray()).forEach((function(e){return t.push({timestamp:+e.attribs.timestamp,type:"[eventname='StopDeskshareEvent']"})})),t.sort((function(e,t){return e.timestamp-t.timestamp})),t=t.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},t,{timestamp:e.calculateNormalizedTimestamp(t.timestamp)})}));var n=[],r=!1,a=0;return t.forEach((function(e){"[eventname='StartDeskshareEvent']"!==e.type||r?"[eventname='StopDeskshareEvent']"===e.type&&r&&(r=!1,n.push({in:a,out:e.timestamp})):(r=!0,a=e.timestamp)})),r&&n.push({in:a,out:1/0}),n}catch(o){p.b.warn("Presentation parser::parseDeskshareShowTimes",o)}}},{key:"parseSvg",value:function(){var e=this;return l.a.get(this.svgUrl).then((function(t){e.svgDocument=u.a.load(t.data,{xmlMode:!0,normalizeWhitespace:!0}),e.parsedData.slides=e.getSlidesData(),e.parsedData.shapes=e.getShapes()}))}},{key:"parseCursor",value:function(){var e=this;return l.a.get(this.cursorUrl).then((function(t){e.cursorEventsDocument=u.a.load(t.data,{xmlMode:!0,normalizeWhitespace:!0}),e.parsedData.cursor=e.getCursorData()}))}},{key:"parseZooms",value:function(){var e=this;return l.a.get(this.zoomsUrl).then((function(t){e.zoomEventsDocument=u.a.load(t.data,{xmlMode:!0,normalizeWhitespace:!0}),e.parsedData.zooms=e.getZoomData()}))}},{key:"parseMessages",value:function(){var e=this;return l.a.get(this.chatMessagesUrl).then((function(t){e.chatMessagesDocument=u.a.load(t.data,{xmlMode:!0,normalizeWhitespace:!0});var n=e.getMessagesData(),r=n.messages,a=n.files;e.parsedData.messages=r,e.parsedData.files=a,e.parsedData.chatLogFile=e.createChatLogFile()}))}},{key:"getMessagesData",value:function(){var e=[],t=[];return this.chatMessagesDocument("chattimeline").map((function(n,r){try{if("chat"!==r.attribs.target)return null;var a={timestamp:+r.attribs.in,senderName:r.attribs.name,messageText:r.attribs.message.trim()},o=a.messageText.match(/<\s*a\s+[^\s]*\s?href\s*=\s*["']([^'"]*)['"]\s*>([^>]+)<\s*\/a\s*>/);if(o){var i=y(o,3),c=i[0],s=i[1],u=i[2];if(c&&s&&u)return a.fileSrc=s,a.fileName=u,t.push(a)}e.push(a)}catch(l){p.b.warn("Presentation parser::getMessagesData",l)}return null})),{messages:e,files:t}}},{key:"createChatLogFile",value:function(){var e=this,t=[].concat(b(this.parsedData.messages),b(this.parsedData.files));if(0!==t.length){t=f.a.sortBy(t,["timestamp"]);var n="";return t.forEach((function(t){var r=m.c(t.timestamp),a=r.hours,o=r.minutes,i=r.seconds,c="";c+=(a=m.a(a))+":"+(o=m.a(o))+":"+(i=m.a(i)),c+=" ",c+=t.senderName+": \n",c+=e.repeatString(" ",6),t.fileName?c+=t.fileName:c+=f.a.unescape(t.messageText),c+="\n",c+=e.repeatString(" ",4),n+=c+="\n"})),new Blob([n],{type:"data:application/octet-stream"})}}},{key:"repeatString",value:function(e,t){return new Array(t+1).join(e)}},{key:"getZoomData",value:function(){var e=this,t=[];return this.zoomEventsDocument("event").map((function(n,r){try{var a=+r.attribs.timestamp;if(a<5)return null;var o=e.zoomEventsDocument(r).find("viewBox")[0].children[0].data;t.push({viewBox:o,timestamp:a})}catch(i){p.b.warn("Presentation parser::getZoomData",i)}return null})),t}},{key:"getCursorData",value:function(){var e=this,t=[];return this.cursorEventsDocument("event").map((function(n,r){try{var a=+r.attribs.timestamp,o=e.cursorEventsDocument(r).find("cursor")[0].children[0].data.split(" ");t.push({timestamp:a,x:+o[0]/800*100,y:+o[1]/600*100})}catch(i){p.b.warn("Presentation parser::getCursorData",i)}return null})),t}},{key:"getSlidesData",value:function(){var e=this.svgDocument("image.slide").map((function(e,t){try{var n,r=t.attribs["xlink:href"];return r?(n=t.attribs.out.split(" ").map((function(e){return+e})),{src:r,showTimes:t.attribs.in.split(" ").map((function(e,t){return{showAt:+e,hideAt:n[t]}})),height:t.attribs.height,width:t.attribs.width,id:t.attribs.id}):null}catch(a){p.b.warn("Presentation parser::getSlidesData",a)}return null}));return f.a.compact(e)}},{key:"getShapes",value:function(){var e=this,t=this.svgDocument(".shape");return t=t.map((function(t,n){try{var r=e.svgDocument(n).find("path")[0],a=e.svgDocument(n).find("polyline")[0],o=e.svgDocument(n).find("polygon")[0],i=e.svgDocument(n).find("line")[0],c=e.svgDocument(n).find("foreignObject")[0],s=null,u=e.svgDocument(n).is("g[shape*='poll_result']"),l=n.attribs.shape;u||(u=w.test(l));var d=n.parent.attribs.image,m=E.test(l);if(m&&((s=e.svgDocument(c).find("p")[0])||(s=e.svgDocument(n).find("div")[0])),!r&&!a&&!o&&!i&&!m&&!u)return null;var b={style:n.attribs.style.replace(/visibility:hidden;?/,""),showTimes:[{showAt:+n.attribs.timestamp,hideAt:e.getShapeHideTime(n)}],slideId:d};if(u){var y=e.svgDocument(n).find("rect")[0],v=e.svgDocument(n).find("image")[0];b.rect={width:+y.attribs.width,height:+y.attribs.height,x:+y.attribs.x,y:+y.attribs.y},b.image={href:v.attribs["xlink:href"],width:+v.attribs.width,height:+v.attribs.height,x:+v.attribs.x,y:+v.attribs.y,transform:v.attribs.transform},b.isPath=!1,b.isPolyline=!1,b.isPolygon=!1,b.isLine=!1,b.isText=!1,b.isPolling=!0}if(r&&(b.points=r.attribs.d,b.isPath=!0,b.isPolyline=!1,b.isPolygon=!1,b.isLine=!1,b.isText=!1),a&&(b.points=a.attribs.points,b.isPath=!1,b.isPolyline=!0,b.isPolygon=!1,b.isLine=!1,b.isText=!1),o&&(b.points=o.attribs.points,b.isPath=!1,b.isPolyline=!1,b.isPolygon=!0,b.isLine=!1,b.isText=!1),i&&(b.points=[i.attribs.x1,i.attribs.y1,i.attribs.x2,i.attribs.y2],b.isPath=!1,b.isPolyline=!1,b.isPolygon=!1,b.isLine=!0,b.isText=!1),m&&s){var h=[];s.children&&(h=f.a.map(s.children,(function(e){return"text"===e.type?e.data:null})),h=f.a.compact(h)),b.textParams={color:c.attribs.color,width:c.attribs.width,height:c.attribs.height,x:c.attribs.x,y:c.attribs.y,text:h.join("\n")},b.isPath=!1,b.isPolyline=!1,b.isPolygon=!1,b.isLine=!1,b.isText=!0}return b}catch(g){p.b.warn("Presentation parser::getShapes",g)}return null})),f.a.compact(t)}},{key:"getShapeHideTime",value:function(e){for(var t=-1===+e.attribs.undo?1/0:+e.attribs.undo,n=e.attribs.shape,r=e.next;r;)try{if(r.attribs&&r.attribs.shape===n){t=+r.attribs.timestamp;break}if(r.attribs&&r.attribs.shape&&r.attribs.shape!==n)break;r=r.next}catch(a){p.b.warn("Presentation parser::getShapeHideTime",a)}return t}},{key:"inlineStyleToObject",value:function(e){var t={};return e.split("; ").forEach((function(e){if(e){var n=e.split(":");t[n[0].trim()]=n[1].trim()}})),delete t.visibility,t}}])&&v(t.prototype,n),r&&v(t,r),e}(),O=(n("yScL"),n("/MKj")),C=n("RMfM"),_=n("TSYQ"),T=n.n(_),I=(n("C8y4"),n("q8N1"));function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,j(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"renderThumbnails",value:function(){var e=this,t=this.props.slides,n=[];return t.forEach((function(e){e.showTimes.forEach((function(t){n.push({id:e.id,src:e.src,showAt:t.showAt,hideAt:t.hideAt})}))})),n.sort((function(e,t){return e.showAt-t.showAt})),n.map((function(t,n){return e.renderThumbnail(t,n)}))}},{key:"renderThumbnail",value:function(e,t){var n=this.props,r=n.currentPlaybackTime,o=n.currentSlide,i=n.i18n,c=n.seekPlayer,s=o&&o.id===e.id;(r<e.showAt||r>=e.hideAt)&&(s=!1);var u,l,d,f=m.c(e.showAt),p=f.hours,b=f.minutes,y=f.seconds;return a.a.createElement("div",{key:e.id+t,role:"button",tabIndex:0,"aria-label":i._("Slide started at {hours} hours, {minutes} minutes, {seconds} seconds of presentation",{hours:p,minutes:b,seconds:y}),className:T()("c-bbb-player__thumbnail",(u={},l="c-bbb-player__thumbnail--active",d=s,l in u?Object.defineProperty(u,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[l]=d,u)),onKeyDown:Object(I.b)((function(){c(e.showAt)})),onClick:function(){c(e.showAt)}},a.a.createElement("img",{src:e.src,alt:i._("Thumbnail"),onDragStart:function(e){return e.preventDefault()},className:"c-bbb-player__thumbnail-image"}),a.a.createElement("p",{className:"c-bbb-player__thumbnail-time"},this.formatTime(e.showAt)))}},{key:"formatTime",value:function(e){var t=m.c(e),n=t.seconds,r=t.minutes,a=t.hours;return n=m.a(n),r=m.a(r),a=m.a(a),"".concat(a,":").concat(r,":").concat(n)}},{key:"render",value:function(){return a.a.createElement("div",{className:"c-bbb-player__thumbnails_holder"},a.a.createElement("div",{className:"c-bbb-player__thumbnails"},this.renderThumbnails()))}}])&&R(n.prototype,r),o&&R(n,o),t}(r.Component);N.propTypes={slides:i.a.array,currentPlaybackTime:i.a.number,currentSlide:i.a.object,seekPlayer:i.a.func};var D=Object(c.withI18n)()(N);n("oUO/");function L(e){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,F(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"getViewBox",value:function(){var e=this.props.currentSlide,t=this.getCurrentZoom(),n=[0,0,0,0].join(" ");return e&&(n=[0,0,e.width,e.height].join(" ")),t&&(n=t.viewBox),n}},{key:"getCurrentZoom",value:function(){for(var e=this.props,t=e.currentPlaybackTime,n=e.zooms,r=null,a=0;a<n.length;a++){var o=n[a],i=n[a+1];if(t>=o.timestamp&&(!i||t<i.timestamp)){r=o;break}}return r}},{key:"renderCurrentSlide",value:function(){var e=this.props.currentSlide;if(!e)return null;var t=e.src,n=e.height,r=e.width;return a.a.createElement("image",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",key:t,xlinkHref:t,height:n,width:r,x:"0"})}},{key:"renderShapes",value:function(){var e=this,t=this.props,n=t.shapes,r=t.currentSlide,o=n.map((function(t,n){var o=t.style,i=t.showTimes,c=t.points,s=t.isPath,u=t.isPolyline,l=t.isPolygon,d=t.isLine,f=t.isText,p=t.textParams,m=t.isPolling;return e.props.canShowNow(i)&&r&&t.slideId===r.id?a.a.createElement("g",{key:n,ref:function(e){return e&&e.setAttribute("style",o)}},s&&a.a.createElement("path",{d:c}),u&&a.a.createElement("polyline",{points:c}),l&&a.a.createElement("polygon",{points:c}),d&&a.a.createElement("line",{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}),f&&a.a.createElement("switch",{xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("foreignObject",{color:p.color,width:p.width,height:p.height,x:p.x,y:p.y},a.a.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{whiteSpace:"pre-wrap"}},p.text))),m&&a.a.createElement("g",null,a.a.createElement("rect",{x:t.rect.x,y:t.rect.y,width:t.rect.width,height:t.rect.height,fill:"white",stroke:"black",strokeWidth:"4"}),a.a.createElement("image",{xlinkHref:t.image.href,height:t.image.height,width:t.image.width,x:t.image.x,y:t.image.y,transform:t.image.transform}))):null}));return a.a.createElement("g",null,o)}},{key:"renderCursor",value:function(){var e=this.getCurrentCursor();return e||(e={x:0,y:0}),a.a.createElement("div",{className:"c-bbb-player__cursor",style:{left:e.x+"%",top:e.y+"%"}})}},{key:"getCurrentCursor",value:function(){for(var e=this.props,t=e.currentPlaybackTime,n=e.cursor,r=null,a=0;a<n.length;a++){var o=n[a],i=n[a+1];if(t>=o.timestamp&&(!i||t<i.timestamp)){r=o;break}}return r}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"c-bbb-player__presentation"},a.a.createElement("div",{className:"c-bbb-player__slides"},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:function(t){return e.svg=t},xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",viewBox:this.getViewBox()},this.renderCurrentSlide(),this.renderShapes()),this.renderCursor()))}}])&&M(n.prototype,r),o&&M(n,o),t}(r.Component);G.propTypes={currentSlide:i.a.object,currentPlaybackTime:i.a.number,zooms:i.a.array,shapes:i.a.array,cursor:i.a.array,canShowNow:i.a.func};n("lDEH");var U=n("8For"),q=n("LFYD"),W=n("jpbM"),B=n.n(W),Q=n("Iab2"),Y=n.n(Q),H=n("Onr9");function z(e){return(z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=X(t).call(this,e),n=!o||"object"!==z(o)&&"function"!==typeof o?Z(r):o,J(Z(Z(n)),"handleScrollChange",(function(e){var t=e.target,r=Math.ceil(t.scrollTop+t.offsetHeight)>=t.scrollHeight;n.setState({isTailing:r})})),J(Z(Z(n)),"downloadChatLog",(function(){Y.a.saveAs(n.props.chatLogFile,"chatlog.txt")})),n.state={showMessages:!0,showFiles:!1,isTailing:!0},n.chatId=B()(5)+"chatTab",n.filesId=B()(5)+"filesTab",n.messageListElement=a.a.createRef(),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.messageListElement.current.addEventListener("scroll",f.a.throttle(this.handleScrollChange,250))}},{key:"componentDidUpdate",value:function(){if(this.state.isTailing&&this.messageListElement.current){var e=this.messageListElement.current;e.scrollTop=e.scrollHeight-e.clientHeight}}},{key:"showMessages",value:function(){this.setState({showMessages:!0,showFiles:!1})}},{key:"showFiles",value:function(){this.setState({showFiles:!0,showMessages:!1})}},{key:"getCurrentMessages",value:function(){var e=this.props,t=e.currentPlaybackTime;return e.messages.filter((function(e){return e.timestamp<=t}))}},{key:"renderMessages",value:function(){return this.getCurrentMessages().map((function(e,t){return a.a.createElement("div",{className:"c-bbb-player__chat-message",key:"message-list-item[".concat(t,"]")},a.a.createElement("span",{className:"c-bbb-player__chat-message-name"},e.senderName),a.a.createElement("p",{className:"c-bbb-player__chat-message-text",dangerouslySetInnerHTML:{__html:e.messageText}}))}))}},{key:"renderFiles",value:function(){return this.props.files.map((function(e){var t=e.fileName,n=e.fileSrc;return a.a.createElement("div",{className:"c-bbb-player__chat-message",key:e.messageText+e.timestamp},a.a.createElement("a",{className:"c-bbb-player__chat-message-link",href:n,target:"_blank"},t))}))}},{key:"render",value:function(){var e=this.state,t=e.showMessages,n=e.showFiles,r=this.props,o=r.i18n,i=r.chatLogFile,s=this.renderMessages(),u=this.renderFiles();return a.a.createElement("div",{className:"c-bbb-player__chat"},a.a.createElement("div",{className:"c-bbb-player__chat-wrapper"},a.a.createElement("div",{className:"c-bbb-player__chat-actions",role:"tablist"},a.a.createElement("div",{className:T()("c-bbb-player__chat-action",J({},"c-bbb-player__chat-action--active",t)),role:"tab","aria-label":o._("Chat Messages"),tabIndex:0,"aria-controls":this.chatId,"aria-selected":t,onKeyDown:Object(I.b)(this.showMessages.bind(this)),onClick:this.showMessages.bind(this),title:o._("Chat Messages")},a.a.createElement(U.a,{ariaLabel:o._("Chat Messages, icon"),className:"c-bbb-player__chat-action-icon"},q.a.CHAT_ORIGINAL)),a.a.createElement("div",{className:T()("c-bbb-player__chat-action",J({},"c-bbb-player__chat-action--active",n)),onClick:this.showFiles.bind(this),onKeyDown:Object(I.b)(this.showFiles.bind(this)),role:"tab","aria-label":o._("Uploaded Files"),tabIndex:0,"aria-selected":n,"aria-controls":this.filesId,title:o._("Uploaded Files")},a.a.createElement(U.a,{ariaLabel:o._("Uploaded Files, icon"),className:"c-bbb-player__chat-action-icon"},q.a.ATTACH_FILE))),t&&a.a.createElement("div",{className:"c-bbb-player__chat-list",role:"tabpanel",id:this.chatId},a.a.createElement("div",{ref:this.messageListElement,className:"c-bbb-player__chat-messages-holder"},s,0===s.length&&a.a.createElement("div",{className:"c-bbb-player__chat-no-data"},a.a.createElement(c.Trans,{id:"No chat messages"})),i&&a.a.createElement(H.a,{id:"button-download-chat-log",onClick:this.downloadChatLog,className:"c-bbb-player__download-chat-log",title:o._("Download chat log"),ariaLabel:o._("Download chat log")},q.a.DOWNLOAD))),n&&a.a.createElement("div",{className:"c-bbb-player__chat-list",role:"tabpanel",id:this.filesId},a.a.createElement("div",{className:"c-bbb-player__chat-messages-holder"},u,0===u.length&&a.a.createElement("div",{className:"c-bbb-player__chat-no-data"},a.a.createElement(c.Trans,{id:"No files"}))))))}}])&&K(n.prototype,r),o&&K(n,o),t}(r.Component);ee.defaultProps={messages:[],files:[]},ee.propTypes={currentPlaybackTime:i.a.number,messages:i.a.array,files:i.a.array,chatLogFile:i.a.object};var te=Object(c.withI18n)()(ee),ne=n("kbsL"),re=n("6ZeI"),ae=n("rOOD"),oe=n("h15y"),ie=function(e,t){var n=ae.e(e,t);return n||t},ce=function(e,t){var n=ie(e,t);return oe.c(n,e)},se=n("A2tp"),ue=n("k7+O"),le=n.n(ue),de=n("EISf"),fe=n("K2Ti");function pe(e){return(pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=be(t).call(this,e),n=!a||"object"!==pe(a)&&"function"!==typeof a?ve(r):a,he(ve(ve(n)),"setFullScreen",(function(e){n.setState({inFullScreen:e})})),he(ve(ve(n)),"toggleFullScreen",(function(){n.presentationWrapper&&le.a&&le.a.enabled&&le.a.toggle(n.presentationWrapper)})),he(ve(ve(n)),"loadAndParseData",(function(){n.setState({hasError:!1}),new S({svgUrl:n.props.svgUrl,cursorUrl:n.props.cursorUrl,zoomsUrl:n.props.zoomsUrl,chatMessagesUrl:n.props.chatMessagesUrl,eventsUrl:n.props.eventsUrl}).parse().then((function(e){n.setState({presentationData:e})})).catch((function(e){p.b.warn("BBB Assets parse error",e),n.setState({hasError:!0})}))})),he(ve(ve(n)),"seekPlayer",(function(e){var t=n.props,r=t.dispatch,a=t.actualPlayerId;r(C.B(a,e))})),n.state={presentationData:null,hasError:!1,showDeskshare:!1,inFullScreen:!1},n.emitter=new fe.a,n.throttledCheckPlayerSync=f.a.throttle(n.checkPlayerSync,500,{leading:!0,trailing:!0}),n.mainMediaDbId=e.media&&e.media.dbId?n.props.media.dbId:B()(5),n.slaveMediaDbId=e.media&&e.media.slaveMedia&&e.media.slaveMedia.dbId?e.media.slaveMedia.dbId:B()(5),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),n=t,o=[{key:"getDesksharePlayerId",value:function(e){return e+"___deskshare"}}],(r=[{key:"componentDidMount",value:function(){le.a&&le.a.enabled&&le.a.on("change",function(){if(this.presentationWrapper){var e=le.a.isFullscreen;e||this.setFullScreen(!1),e&&this.presentationWrapper===le.a.element&&this.setFullScreen(!0)}}.bind(this)),this.props.logMediaWatching&&this.initEmitterListeners()}},{key:"UNSAFE_componentWillMount",value:function(){this.loadAndParseData()}},{key:"componentDidUpdate",value:function(e){var t=!!this.props.slaveStreamUrl,n=this.props.currentPlaybackTime;if(this.props.currentPlaybackTime!==e.currentPlaybackTime&&t){var r=!1;this.state.presentationData.deskshareShowTimes.forEach((function(e){n>=e.in&&n<e.out&&(r=!0)})),this.state.showDeskshare!==r&&this.setState({showDeskshare:r})}}},{key:"initEmitterListeners",value:function(){var e=this,n=this.props.actualPlayerId,r=t.getDesksharePlayerId(this.props.playerId),a=function(t){return function(n){e.state.showDeskshare&&t(n)}};this.unsubscribers=[this.emitter.onPlay(n,a((function(t){e.emitter.play({playerId:r,startTime:t.startTime})}))),this.emitter.onPause(n,a((function(t){e.emitter.pause({playerId:r,startTime:t.startTime})}))),this.emitter.onSeek(n,a((function(t){e.emitter.seek({playerId:r,startTime:t.startTime,endTime:t.endTime})})))]}},{key:"componentWillUnmount",value:function(){this.unsubscribers&&this.unsubscribers.length&&this.unsubscribers.forEach((function(e){return e()}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var n=this.props,r=n.playerId,a=n.mainPlayerState,o=n.desksharePlayerState,i=n.dispatch,c=t.getDesksharePlayerId(this.props.playerId),s=e.desksharePlayerState,u=e.mainPlayerState;u&&s&&o&&a&&(u.state.isPlaying&&!a.state.isPlaying&&i(C.s(c)),u.state.isPaused&&!a.state.isPaused&&i(C.r(c)),u.state.isWaiting&&!a.state.isWaiting&&i(C.r(r)),s.state.isWaiting&&!o.state.isWaiting&&i(C.r(r)),!u.state.isWaiting&&a.state.isWaiting&&i(C.s(r)),!s.state.isWaiting&&o.state.isWaiting&&i(C.s(r)),this.throttledCheckPlayerSync())}},{key:"checkPlayerSync",value:function(){var e=this.props.mainPlayerState.state.time,t=this.props.desksharePlayerState.state.time;Math.abs(e-t)>=.5&&this.syncPlayers()}},{key:"syncPlayers",value:function(){var e=this.props,n=e.dispatch,r=e.playerId,a=e.mainPlayerState,o=e.desksharePlayerState,i=t.getDesksharePlayerId(r),c=a.state.time;n(C.B(i,c));var s=a.state.isPlaying;s!==o.state.isPlaying&&(s?(n(C.s(i)),this.emitter.play({playerId:i,startTime:c})):(n(C.r(i)),this.emitter.pause({playerId:i,startTime:c})))}},{key:"getCurrentSlide",value:function(){for(var e=this.state.presentationData.slides,t=null,n=0;n<e.length;n++)if(this.canShowNow(e[n].showTimes)){t=e[n];break}return t}},{key:"canShowNow",value:function(e){var t=this.props.currentPlaybackTime,n=!1;return e.forEach((function(e){var r=e.showAt,a=e.hideAt;t>=r&&t<=a&&(n=!0)})),n}},{key:"getTimelineMarks",value:function(){var e=this.state.presentationData,t=e.messages,n=e.files,r=[];return t.forEach((function(e){r.push({timestamp:e.timestamp})})),n.forEach((function(e){r.push({timestamp:e.timestamp})})),r.sort((function(e,t){return e.timestamp-t.timestamp}))}},{key:"render",value:function(){var e=this,n=this.props,r=n.playerId,o=n.currentPlaybackTime,i=n.i18n,s=n.mainPlayerState,u=n.dispatch,l=n.actualPlayerId,d=n.onPlay,f=this.state,p=f.presentationData,m=f.hasError,b=f.inFullScreen;if(s=s?s.state:{},m)return a.a.createElement("div",{className:"c-bbb-player__error-block"},a.a.createElement("span",{className:"u-mr-5px"},a.a.createElement(c.Trans,{id:"Failed to load meeting data"})),a.a.createElement(ne.f,{id:"button-bbb-player-error-reload",onClick:this.loadAndParseData},a.a.createElement(c.Trans,{id:"Try again"})));if(!p)return a.a.createElement("p",null,a.a.createElement(c.Trans,{id:"Loading..."}));var y,v={dbId:this.mainMediaDbId,srcUrl:this.props.mainStreamUrl};this.props.caption&&(v.caption=this.props.caption),this.props.slaveStreamUrl&&(y={autoplay:!1,controls:!1,sources:[{src:this.props.slaveStreamUrl,type:"video/mp4"}]}),this.state.presentationData.deskshareShowTimes&&0!==this.state.presentationData.deskshareShowTimes.length||!this.props.slaveStreamUrl||(v.slaveMedia={dbId:this.slaveMediaDbId,srcUrl:this.props.slaveStreamUrl},y=null);var h=y&&this.state.showDeskshare;return a.a.createElement("div",{className:"c-bbb-player"},a.a.createElement("div",{className:"c-bbb-player__top"},a.a.createElement("div",{className:T()("c-bbb-player__presentation-wrapper",he({},"c-bbb-player__presentation-wrapper--fullscreen",b)),ref:function(t){t&&(e.presentationWrapper=t)}},y&&a.a.createElement("div",{className:T()("c-bbb-player__deskshare-player",he({},"c-bbb-player__deskshare-player--fullscreen",b)),style:{display:h?"block":"none"}},a.a.createElement(se.a,{id:"bbb-player-deskshare-player",options:y,playerId:t.getDesksharePlayerId(r),termClassId:this.props.termClassId,activityId:this.props.activityId,usageContext:this.props.usageContext,logMediaWatching:this.props.logMediaWatching&&this.props.logDeskshareMediaWatching,mediaId:this.slaveMediaDbId,inFullScreenView:b})),a.a.createElement(G,{currentSlide:this.getCurrentSlide(),currentPlaybackTime:o,zooms:p.zooms,shapes:p.shapes,cursor:p.cursor,canShowNow:this.canShowNow.bind(this)}),b&&a.a.createElement("div",{className:"c-bbb-player__deskshare-player-controls"},a.a.createElement(de.a,{isPlaying:s.isPlaying,time:o,seek:function(t){e.emitter.seek({playerId:l,startTime:o,endTime:t}),e.seekPlayer(t)},duration:s.duration,volume:s.volume,toggleFullScreen:this.toggleFullScreen,changeVolume:function(e){u(C.A(l,e))},play:function(){e.emitter.play({playerId:l,startTime:o}),u(C.s(l))},pause:function(){e.emitter.pause({playerId:l,startTime:o}),u(C.r(l))},marks:this.getTimelineMarks(),isFullScreen:b})),!b&&le.a&&le.a.enabled&&a.a.createElement(H.a,{id:"button-full-screen",className:"c-bbb-player__fullscreen-button",tabIndex:0,title:i._("Full screen"),onClick:this.toggleFullScreen,ariaLabel:i._("Full screen, icon")},q.a.FULLSCREEN)),a.a.createElement("div",{className:"c-bbb-player__player"},a.a.createElement(re.a,{id:"bbb-player-media",onPlay:d,playerId:r,termClassId:this.props.termClassId,activityId:this.props.activityId,usageContext:this.props.usageContext,mediaId:this.props.mediaId,logMediaWatching:this.props.logMediaWatching,media:v,marks:this.getTimelineMarks()}))),a.a.createElement("div",{className:"c-bbb-player__bottom"},a.a.createElement(D,{slides:this.state.presentationData?this.state.presentationData.slides:[],currentPlaybackTime:o,currentSlide:this.getCurrentSlide(),seekPlayer:function(t){e.emitter.seek({playerId:l,startTime:o,endTime:t}),e.seekPlayer(t)}}),a.a.createElement(te,{currentPlaybackTime:o,messages:p.messages,files:p.files,chatLogFile:p.chatLogFile})))}}])&&me(n.prototype,r),o&&me(n,o),t}(r.Component);ge.propTypes={onPlay:i.a.func,logMediaWatching:i.a.bool,logDeskshareMediaWatching:i.a.bool},ge.defaultProps={onPlay:function(){},logMediaWatching:!0,logDeskshareMediaWatching:!1};t.a=Object(O.b)((function(e,t){var n=t.playerId,r=ie(e,n);return{currentPlaybackTime:ce(e,n),actualPlayerId:r,mainPlayerState:oe.a(r,e),desksharePlayerState:oe.a(ge.getDesksharePlayerId(n),e)}}))(Object(c.withI18n)()(ge))},"+y5T":function(e,t,n){"use strict";t.a={CAMERA_ONLY:"CAMERA_ONLY",CAMERA_WITH_DESKTOP:"CAMERA_WITH_DESKTOP",DESKTOP_ONLY:"DESKTOP_ONLY"}},"/0q4":function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("8For"),u=n("LFYD"),l=n("TSYQ"),d=n.n(l),f=n("LvDl"),p=n.n(f);n("8+7o");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y="correct",v="incorrect",h=[y,v,"unknown"];function g(e){return p.a.pick(e,Object.keys(E.componentProps))}var E=function(e){var t=e.i18n,n=e.type,r=u.a.HELP,o="correct-icon--undefined",i=t._("Unknown");switch(n){case y:i=t._("Correct"),o="correct-icon--correct",r=u.a.CHECK_CIRCLE;break;case v:i=t._("Incorrect"),o="correct-icon--incorrect",r=u.a.CANCEL}var c=e.tooltip||{};c.label||(c.label=i);var l=d()("correct-icon",e.className,o);return a.a.createElement(s.a,b({},g(e),{className:l,tooltip:c}),p.a.has(e,"children")?e.children:r)};E.componentProps={className:i.a.string,iconClassName:i.a.string,primary:i.a.bool,secondary:i.a.bool,title:i.a.string,enabled:i.a.bool,ariaLabel:i.a.string,role:i.a.string},E.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},E.componentProps,{type:i.a.oneOf(h),tooltip:i.a.any}),E.defaultProps={type:"unknown"},t.c=Object(c.withI18n)()(E)},"/DTu":function(e,t,n){},"/I3q":function(e,t,n){},"/KNH":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("lTCR"),a=n.n(r),o=n("O+79"),i=n("09Br"),c=n("jlV6");function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    fragment ReviewedResult on ReviewedResult {\n        __typename\n        result {\n          submitter {\n            dbId\n            firstName\n            lastName\n          }\n        }\n        viewedEvaluation {\n          value\n        }\n        comments {\n          ...Comment\n          ...AnonymousComment\n        }\n        rubricEvaluation {\n          ...StudentReviewRubric\n        }\n        fivestarEvaluation {\n          ...FiveStarRating\n        }\n        isReviewCompleted\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return s=function(){return e},e}var u=a()(s(),o.b,o.a,i.e,c.c)},"/V82":function(e,t,n){},"/W66":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l);n("CG28");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e){return a.a.createElement(c.o,p({},function(e){return d.a.pick(e,Object.keys(m.componentProps))}(e),{className:u()("divider",e.className)}),e.children)};m.componentProps={className:i.a.string,inset:i.a.bool,style:i.a.any,vertical:i.a.bool},m.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},m.componentProps),m.defaultProps={inset:!1,vertical:!1};var b=m;n.d(t,"a",(function(){return b}))},"/iAH":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("TSYQ"),u=n.n(s),l=n("giI2"),d=n("LFYD"),f={ERROR:"error",WARNING:"warning",INFO:"info"};n("Cztr");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.className,r=e.message,o=e.title,i=e.type,c=d.a.STATUS_UNKNOWN,s="bongo-note--unknown",p="";switch(i){case f.INFO:c=d.a.STATUS_INFO,s="bongo-note--info",p=t._("Info Message");break;case f.WARNING:c=d.a.STATUS_WARNING,s="bongo-note--warning",p=t._("Warning Message");break;case f.ERROR:c=d.a.STATUS_ERROR,s="bongo-note--error",p=t._("Error Message")}return a.a.createElement("div",{className:u()("bongo-note-container",s,n)},a.a.createElement("div",{className:"bongo-note-content"},a.a.createElement("div",{className:"bongo-note-title-icon"},a.a.createElement(l.a,{ariaLabel:p},c)),a.a.createElement("div",{className:"bongo-note-text-container"},a.a.createElement("div",{className:"bongo-note-text-title"},o),a.a.createElement("div",{className:"bongo-note-text-message"},r))))}}])&&m(n.prototype,r),o&&m(n,o),t}(a.a.PureComponent);h.defaultProps={type:f.INFO},h.propTypes={i18n:i.a.object.isRequired,className:i.a.string,message:i.a.node,title:i.a.string,type:i.a.oneOf(Object.values(f))},h.NOTE_TYPES=f;var g=Object(c.withI18n)()(h);t.a=g},"03gT":function(e,t,n){},"09Br":function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h}));var r=n("lTCR"),a=n.n(r),o=n("mxsA");function i(){var e=f(["\n    fragment RubricEvaluation on RubricEvaluation{\n        date\n        user {\n            ...GeneralUser\n        }\n        rubric {\n           ...Rubric\n        }\n        cells {\n            ...RubricCell\n        }\n        points\n    }\n    ","\n    ","\n    ","\n"]);return i=function(){return e},e}function c(){var e=f(["\n    fragment GroupReviewRubricAnonymous on ActivityStudentGroupReviewRubricEvaluationAnonymous {\n        date\n        rubric {\n            ...Rubric\n        }\n        cells {\n            ...RubricCell\n        }\n        points\n        comment\n    }\n    ","\n    ","\n"]);return c=function(){return e},e}function s(){var e=f(["\n    fragment GroupReviewRubricWithUser on ActivityStudentGroupReviewRubricEvaluationWithUser {\n        date\n        user {\n            dbId\n            firstName\n            lastName\n            roles\n        }\n        rubric {\n            ...Rubric\n        }\n        cells {\n            ...RubricCell\n        }\n        points\n        comment\n    }\n    ","\n    ","\n"]);return s=function(){return e},e}function u(){var e=f(["\n    fragment StudentReviewRubric on ActivityResultStudentReviewRubricEvaluation {\n        date\n        user {\n            dbId\n            firstName\n            lastName\n        }\n        rubric {\n           ...Rubric\n        }\n        cells {\n            ...RubricCell\n        }\n        points\n    }\n    ","\n    ","\n"]);return u=function(){return e},e}function l(){var e=f(["\n    fragment Rubric on Rubric {\n        dbId\n        name\n        rows {\n            dbId\n            cells {\n                ...RubricCell\n            }\n        }\n        maxValue\n    }\n    ","\n"]);return l=function(){return e},e}function d(){var e=f(["\n    fragment RubricCell on RubricCell {\n        dbId\n        description\n        points\n    }\n"]);return d=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p=a()(d()),m=a()(l(),p),b=a()(u(),m,p),y=a()(s(),m,p),v=a()(c(),m,p),h=a()(i(),m,p,o.d)},"0Kzw":function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("lBBP"),c=n("MOhp"),s=n("7Yj1"),u=n("45tj"),l=n("wNa6"),d=n("N90w"),f=n("LvDl"),p=n.n(f),m=n("8bCP"),b=n("f0Wu"),y=n.n(b);function v(){var e=O(["\nmutation setUserTimezone($input: SetUserTimezoneInput!) {\n  setUserTimezone(input: $input) {\n    user {\n      timezone\n    }\n  }\n}\n"]);return v=function(){return e},e}function h(){var e=O(["\n    mutation editCommentPreset($input: EditCommentPresetInput!) {\n        editCommentPreset(input: $input) {\n            errors {\n                path\n                message\n            }\n            comment {\n                dbId\n                commentText\n            }\n        }\n    }\n"]);return h=function(){return e},e}function g(){var e=O(["\n    mutation deleteCommentPreset($input: DeleteCommentPresetInput!) {\n        deleteCommentPreset(input: $input) {\n            removedId\n        }\n    }\n"]);return g=function(){return e},e}function E(){var e=O(["\n    mutation createCommentPreset($input: CreateCommentPresetInput!) {\n        createCommentPreset(input: $input){\n            errors {\n                path\n                message\n            }\n            comment {\n                dbId\n                commentText\n            }\n        }\n    }\n"]);return E=function(){return e},e}function w(){var e=O(["\n{\n\tviewer {\n        commentPresets {\n            dbId\n            commentText\n        }\n    }\n}\n"]);return w=function(){return e},e}function S(){var e=O(["\n{\n\tviewer {\n        dbId\n        externalTrackingUuid\n        firstName\n        lastName\n        locale\n        ltiLocale\n        is508on\n        institution {\n            externalTrackingUuid\n            name\n            integrationType\n            locale\n            featureToggles {\n                ","\n            }\n            trialExpireAt\n        }\n        roles\n        isMarketingCommunicationAccepted\n        isGdprSubject\n        cengageSettings {\n            ssoToken\n        }\n        timezone\n    }\n}\n"]);return S=function(){return e},e}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"fetchUserData",value:function(){return r.a.query({query:T}).then((function(e){return Promise.resolve(e.data.viewer)}))}},{key:"getUserData",value:function(){var e=this;l.a.dispatch(i.r(!0)),l.a.dispatch(i.p(!1)),this.fetchUserData().then((function(t){e.updateUserTimezone(t.timezone),l.a.dispatch(i.u(t)),t.institution&&l.a.dispatch(c.w(t.institution)),l.a.dispatch(s.b(Object(u.h)(t))),l.a.dispatch(i.r(!1))})).catch((function(e){m.b.error("AuthService:: Failed to fetch user data",e),l.a.dispatch(i.r(!1)),l.a.dispatch(i.p(!0))}))}},{key:"updateUserTimezone",value:function(e){var t=y.a.tz.guess();e!==t&&r.a.mutate({mutation:j,variables:{input:{timezoneName:t}}}).then((function(e){var t=e.data.setUserTimezone.user.timezone;l.a.dispatch(i.t(t))})).catch((function(e){m.b.error("Failed to set user timezone. Error: ".concat(JSON.stringify(e)))}))}},{key:"getUserPresetComments",value:function(){return r.a.query({query:I}).then((function(e){var t=e.data.viewer.commentPresets;l.a.dispatch(i.v(t))})).catch((function(e){m.b.error("AuthService:: Failed to fetch user data",e)}))}},{key:"addPresetComment",value:function(e){return new Promise((function(t,n){l.a.dispatch(i.o(!0)),r.a.mutate({mutation:P,variables:{input:{comment:{commentText:e}}}}).then((function(e){e&&e.data&&0===e.data.createCommentPreset.errors.length?(l.a.dispatch(i.l(e.data.createCommentPreset.comment)),t(e.data.createCommentPreset)):n(e),l.a.dispatch(i.o(!1))})).catch((function(e){n(e),l.a.dispatch(i.o(!1))}))}))}},{key:"deletePresetComment",value:function(e){return new Promise((function(t,n){l.a.dispatch(i.o(!0)),r.a.mutate({mutation:R,variables:{input:{dbId:e}}}).then((function(e){e&&e.data?(l.a.dispatch(i.m(e.data.deleteCommentPreset.removedId)),t(e.data.deleteCommentPreset.removedId)):n(e),l.a.dispatch(i.o(!1))})).catch((function(e){n(e),l.a.dispatch(i.o(!1))}))}))}},{key:"editPresetComment",value:function(e){return new Promise((function(t,n){l.a.dispatch(i.o(!0)),r.a.mutate({mutation:A,variables:{input:{dbId:e.dbId,comment:{commentText:e.commentText}}}}).then((function(e){e&&e.data?(l.a.dispatch(i.n(e.data.editCommentPreset.comment)),t(e.data.editCommentPreset.comment)):n(e),l.a.dispatch(i.o(!1))})).catch((function(e){n(e),l.a.dispatch(i.o(!1))}))}))}}])&&C(t.prototype,n),a&&C(t,a),e}(),T=o()(S(),p.a.values(d.b).join("\r\n")),I=o()(w()),P=o()(E()),R=o()(g()),A=o()(h()),j=o()(v());t.a=new _},"0TIy":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return te}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/MKj"),s=n("uy2z"),u=n("ZD0w"),l=n("puQj"),d=n.n(l),f=n("LvDl"),p=n.n(f),m=n("Pqrc"),b=n.n(m),y=n("szwm"),v=n("1xro"),h=n("TDYo"),g=n("8ewv"),E=n("vCeT"),w=n("8bCP"),S=n("GkKD"),O=n("0zen"),C=n("Vy55"),_=n("RaGr"),T=n("V+cX"),I=n("cK1Q"),P=n("HmrS"),R=n("Ftzw"),A=n("na1x"),j=n("+y5T"),k=n("VmXB"),N=n("IF/7"),D=n("fcFR"),L=n("f2lN"),M=n("aU7/"),x=n("wR0W"),F=n("HNnK"),V=n("VhdU"),G=n("a7RV"),U=n("2Gxn"),q=n("UyA7");function W(e){return(W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,c,"next",e)}function c(e){Y(o,r,a,i,c,"throw",e)}i(void 0)}))}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee="commands",te=function(t){function n(t){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),a=this,o=z(n).call(this,t),r=!o||"object"!==W(o)&&"function"!==typeof o?Z(a):o,J(Z(Z(r)),"cleanupLocalStreams",(function(){Object.values(r.localStreams).forEach((function(e){return e.destroy()}))})),J(Z(Z(r)),"checkForDevicesAvailability",(function(){v.a.getMediaDevices().then((function(e){var t=0!==e.audio.length,a=0!==e.video.length;r.executeAction(h.B,!t),r.executeAction(h.C,!a),t&&a||(n.doWeNeedWindowedRecorder()&&r.props.onRecordingIsNotSupported(),r.executeAction(h.w,!0))})).catch((function(e){w.b.error(e),r.executeAction(h.C,!0),r.executeAction(h.C,!0)}))})),J(Z(Z(r)),"getSettings",(function(){var t={mediaType:r.props.mediaType,activityDbId:r.props.activityId,questionDbId:r.props.questionId};if(r.props.isStandaloneMode)return e(r.initUploader);g.a.getSettings(t).then((function(e){r.executeAction(h.M,e),r.executeAction(h.y,!1),r.initUploader()})).catch((function(){r.executeAction(h.y,!0)}))})),J(Z(Z(r)),"initUploader",(function(){r.uploader&&r.uploader.destroy();var e=r.getUploadStrategy();r.uploader=new e({settings:r.props.settingsFromStore||r.props.settings,recorderType:r.props.recorderType,i18n:r.props.i18n}),r.uploader.init().catch(),r.uploader.on(E.a.INITIALIZED,(function(){r.initStreams().catch()})),r.uploader.on(E.a.STREAM_ADDED,(function(e){switch(e.getName()){case S.a.CAMERA:r.executeAction(h.r,e);break;case S.a.DESKTOP:r.executeAction(h.u,e);break;case S.a.MICROPHONE:r.executeAction(h.A,e)}})),r.uploader.on(E.a.NOTIFICATION,(function(){r.updateNotifications()})),r.uploader.on(E.a.RESET_STREAMS,(function(){r.executeAction(h.r,void 0),r.executeAction(h.A,void 0),r.executeAction(h.u,void 0)})),r.uploader.on(E.a.REQUEST_NEW_STREAMS,(function(){r.executeAction(h.r,void 0),r.executeAction(h.A,void 0),r.executeAction(h.u,void 0),r.initStreams().catch()})),r.uploader.on(E.a.RECORDING_PAUSED,(function(){r.timer.pause(),r.executeAction(h.K,!0)})),r.uploader.on(E.a.RECORDING_RESUMED,(function(){r.timer.resume(),r.executeAction(h.K,!1)})),r.uploader.on(E.a.RECORDING_STARTED,(function(){r.executeAction(h.R,T.a.RECORDING),r.timer=new R.a,r.timer.onTick((function(e){r.unmounted||(r.executeAction(h.L,e),e/1e3>=r.props.maxRecordLengthSeconds&&r.stopRecord())})),r.timer.start()})),r.uploader.on(E.a.PREVIEW_IS_READY,(function(e){var t=e[S.a.CAMERA],n=e[S.a.DESKTOP],a=e[S.a.MICROPHONE];t&&r.executeAction(h.G,t),n&&r.executeAction(h.H,n),a&&r.executeAction(h.I,a),r.executeAction(h.R,T.a.PREVIEW)})),r.uploader.on(E.a.RECORDING_STOPPED,(function(){r.props.autoSubmit&&r.submit()})),r.uploader.on(E.a.UPLOAD_FINISHED,(function(){r.props.submitting&&r.finalize()})),r.uploader.on(E.a.UPLOADING_PROGRESS,(function(e){r.executeAction(h.P,e)})),r.updateNotifications()})),J(Z(Z(r)),"notifyRecordingHasEnded",(function(){!r.recordingFinishedAudio||!document.isHidden&&document.hasFocus()||r.recordingFinishedAudio.play()})),J(Z(Z(r)),"getDesktopStream",H(regeneratorRuntime.mark((function e(){var t,a,o,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],a=r.props.i18n,e.prev=2,t){e.next=7;break}if(!((o=r.localStreams[S.a.DESKTOP])&&o.stream&&o.stream.active)){e.next=7;break}return e.abrupt("return",r.uploader.addStream(o));case 7:return r.props.desktopStream&&r.props.desktopStream.destroy(),r.localStreams[S.a.DESKTOP]&&(r.localStreams[S.a.DESKTOP].destroy(),delete r.localStreams[S.a.DESKTOP]),r.executeAction(h.u,void 0),e.next=12,v.a.getDesktopStream();case 12:i=e.sent,r.executeAction(h.x,!1),i=new I.a({stream:i,streamName:S.a.DESKTOP}),r.uploader.addStream(i),r.localStreams[S.a.DESKTOP]=i,i.onVideoEnd(r.handleEndOfDesktopStream),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(2),w.b.error(e.t0),n.doWeNeedWindowedRecorder()&&(r.props.isStandaloneModeAllowed&&r.openWindowedRecorder().catch(),r.props.onRecordingIsNotSupported()),r.executeAction(h.x,!0),e.t0===A.a.NOT_INSTALLED&&(c=a._("Browser extension is required for screen share. Do you want to install it? (You will need to reload the page after installation)"),window.confirm(c)&&window.open("https://chrome.google.com/webstore/detail/screen-capturing/".concat(A.b),"_blank"));case 26:case"end":return e.stop()}}),e,this,[[2,20]])})))),J(Z(Z(r)),"handleEndOfDesktopStream",(function(){switch(delete r.localStreams[S.a.DESKTOP],r.executeAction(h.u,void 0),r.props.viewState){case T.a.INITIAL:return r.getDesktopStream().catch();case T.a.RECORDING:return r.stopRecord()}})),J(Z(Z(r)),"closeStandaloneRecorder",(function(){r.props.isStandaloneMode&&(window.close(),requestAnimationFrame((function(){r.closeStandaloneRecorder()})))})),J(Z(Z(r)),"openWindowedRecorder",H(regeneratorRuntime.mark((function e(){var t,n,a,o,i,c,s,u,l,d,f,p,m,b,y,v,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.recorderWindow||r.recorderWindow.closed){e.next=2;break}return e.abrupt("return");case 2:t=r.props,n=t.i18n,a=t.autoSubmit,o=t.showControls,i=t.canShareDesktop,c=t.showRecordButton,s=t.onlyDesktopMode,u=t.recorderId,l=t.mediaType,d=t.activityId,f=t.questionId,p=t.currentUser,m=t.showSubmitButton,b=t.recorderType,y=t.settingsFromStore,v=t.termClass,h={autoSubmit:a,showControls:o,showRecordButton:c,recorderId:u,mediaType:l,activityId:d,questionId:f,recorderType:b,settings:y,showSubmitButton:m,termClassId:v.dbId},g=k.e.STUDENT_STANDALONE_RECORDER,Object(N.b)(p)&&(g=k.e.EDUCATOR_STANDALONE_RECORDER),r.setState({isListenWindowMode:!0,listenWindowModeState:M.a.INITIALIZATION},H(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.cleanupLocalStreams(),t="width=640,height=540",i&&(t="width=1165,height=510"),s&&(t="width=1165,height=730"),r.recorderWindow=window.open(Object(D.b)(g),1e20*Math.random(),t),r.recorderWindow&&!r.recorderWindow.closed){e.next=8;break}return r.setState({listenWindowModeState:M.a.WINDOW_IS_BLOCKED}),e.abrupt("return");case 8:return r.addRecorderWindowListeners(),e.next=11,Object(L.a)(r.recorderWindow,x.a.WINDOWED_RECORDER_LOADED);case 11:Object(L.b)(r.recorderWindow,x.a.SET_PARAMS,{options:h}),r.setState({listenWindowModeState:M.a.INITED}),r.recorderWindow.onbeforeunload=function(){r.setState({listenWindowModeState:M.a.WINDOW_CLOSED},(function(){r.recorderWindow=null,r.reset()}))},r.recorderWindow.document.title=r.props.recorderWindowTitle||n._("Standalone Recorder");case 15:case"end":return e.stop()}}),e,this)}))));case 7:case"end":return e.stop()}}),e,this)})))),J(Z(Z(r)),"onChooseScreenContent",(function(){r.getDesktopStream(!0)})),Object(s.enableCalls)(Z(Z(r)),t.recorderId,ee),r.localStreams={},r.state={uploaderNotifications:[],isListenWindowMode:!1,listenWindowModeState:null},r.recordingFinishedAudio=new Audio(b.a),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(n,t),X(n,null,[{key:"isRecorderSupported",value:function(){return n.isAudioAnalyzeSupported()&&(n.isStreamRecordingSupported()||n.isWebRtcSupported())}},{key:"isAudioAnalyzeSupported",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"isStreamRecordingSupported",value:function(){return!!window.MediaRecorder}},{key:"isWebRtcSupported",value:function(){return n.isWebRtcCapableIosSafari()}},{key:"isGetDisplayMediaSupported",value:function(){return Boolean(navigator.getDisplayMedia||navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}},{key:"isScreenCapturingSupported",value:function(){return!!n.isStreamRecordingSupported()&&(!U.f()&&n.isGetDisplayMediaSupported())}},{key:"isWebRtcCapableIosSafari",value:function(){return d.a&&d.a.safari&&+d.a.version>=11&&U.b()}}]),X(n,[{key:"componentDidMount",value:function(){var e=this;this.initializeRecorderState(),this.checkForDevicesAvailability(),this.getSettings(),this.props.isStandaloneMode&&(Object(L.a)(window,x.a.START_RECORD,(function(){e.startRecord()})),Object(L.a)(window,x.a.STOP_RECORD,(function(){e.stopRecord()})),Object(L.a)(window,x.a.RESET,(function(){e.reset()})),Object(L.a)(window,x.a.SUBMIT,(function(){e.submit()})),Object(L.a)(window,x.a.CLOSE_STANDALONE_WINDOW,(function(){e.closeStandaloneRecorder()})))}},{key:"componentWillUnmount",value:function(){this.unmounted=!0,this.executeAction(h.k),this.cleanupLocalStreams(),this.props.cameraStream&&this.props.cameraStream.destroy(),this.props.desktopStream&&this.props.desktopStream.destroy(),this.props.microphoneStream&&this.props.microphoneStream.destroy(),this.audioAnalyzer&&this.audioAnalyzer.destroy(),this.timer&&this.timer.stop(),this.uploader&&this.uploader.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.viewState!==this.props.viewState&&this.sendCommandToOpener(x.a.SET_VIEW_STATE,e.viewState),e.showRecordButtonFromStore!==this.props.showRecordButtonFromStore&&this.sendCommandToWindowedRecorder(x.a.SET_SHOW_RECORD_BUTTON,e.showRecordButtonFromStore),e.showRecordButton!==this.props.showRecordButton&&this.sendCommandToWindowedRecorder(x.a.SET_SHOW_RECORD_BUTTON,e.showRecordButton),e.autoSubmitFromStore!==this.props.autoSubmitFromStore&&this.sendCommandToWindowedRecorder(x.a.SET_AUTO_SUBMIT,e.showRecordButtonFromStore),e.autoSubmit!==this.props.autoSubmit&&this.sendCommandToWindowedRecorder(x.a.SET_AUTO_SUBMIT,e.autoSubmit)}},{key:"initializeRecorderState",value:function(){this.executeAction(h.l),this.executeAction(h.N,this.props.showRecordButton),this.props.isStandaloneMode&&this.executeAction(h.M,this.props.settings)}},{key:"getUploadStrategy",value:function(){var e;if(n.isStreamRecordingSupported())e=G.a;else{if(!n.isWebRtcSupported())throw this.executeAction(h.J,!0),new Error("Recorder is not supported in current browser");e=V.a}return e}},{key:"downloadRecords",value:function(){var e=this.props,t=e.recordedMicrophoneStream,n=e.recordedDesktopStream,r=e.recordedCameraStream;t&&t.download(),n&&n.download(),r&&r.download()}},{key:"updateNotifications",value:function(){this.setState({uploaderNotifications:this.uploader.getNotifications()})}},{key:"initStreams",value:function(){var e=H(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getDevicesList();case 3:r=e.sent,t=r.cameraId,n=r.microphoneId,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w.b.error("Recorder::initStreams Failed to prefetch devices list",e.t0);case 11:e.prev=11,e.t1=this.props.recorderType,e.next=e.t1===j.a.CAMERA_ONLY?15:e.t1===j.a.CAMERA_WITH_DESKTOP?18:e.t1===j.a.DESKTOP_ONLY?23:28;break;case 15:return e.next=17,this.getCameraStream({cameraId:t,microphoneId:n});case 17:return e.abrupt("break",28);case 18:return e.next=20,this.getCameraStream({cameraId:t,microphoneId:n});case 20:return e.next=22,this.getDesktopStream();case 22:return e.abrupt("break",28);case 23:return e.next=25,this.getMicrophoneStream({microphoneId:n});case 25:return e.next=27,this.getDesktopStream();case 27:return e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(11),w.b.error("Error during streams initialization",e.t2);case 33:case"end":return e.stop()}}),e,this,[[0,8],[11,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCameraStream",value:function(){var e=H(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=t.cameraId,a=void 0===r?this.props.currentCameraId:r,o=t.microphoneId,i=void 0===o?this.props.currentMicrophoneId:o,e.prev=1,!this.unmounted){e.next=4;break}return e.abrupt("return");case 4:if(!((c=this.localStreams[S.a.CAMERA])&&c.stream&&c.stream.active&&c.cameraDeviceId===a&&c.microphoneDeviceId===i)){e.next=7;break}return e.abrupt("return",this.uploader.addStream(c));case 7:return this.props.cameraStream&&this.props.cameraStream.destroy(),this.localStreams[S.a.CAMERA]&&this.localStreams[S.a.CAMERA].destroy(),e.next=11,v.a.getCameraStream({cameraId:a,microphoneId:i});case 11:if(s=e.sent,!this.unmounted){e.next=14;break}return e.abrupt("return");case 14:this.executeAction(h.w,!1),s=new I.a({stream:s,streamName:S.a.CAMERA}),this.uploader.addStream(s),this.localStreams[S.a.CAMERA]=s,this.getDevicesList().catch(),this.initAudioAnalyzer(),e.next=28;break;case 22:throw e.prev=22,e.t0=e.catch(1),w.b.error(e.t0),n.doWeNeedWindowedRecorder()&&(this.props.isStandaloneModeAllowed&&this.openWindowedRecorder().catch(),this.props.onRecordingIsNotSupported()),this.executeAction(h.w,!0),new Error("Failed to get camera stream");case 28:case"end":return e.stop()}}),e,this,[[1,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getMicrophoneStream",value:function(){var e=H(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=t.microphoneId,a=void 0===r?this.props.currentMicrophoneId:r,e.prev=1,!((o=this.localStreams[S.a.MICROPHONE])&&o.stream&&o.stream.active&&o.microphoneDeviceId===a)){e.next=5;break}return e.abrupt("return",this.uploader.addStream(o));case 5:return this.props.microphoneStream&&this.props.microphoneStream.destroy(),this.localStreams[S.a.MICROPHONE]&&this.localStreams[S.a.MICROPHONE].destroy(),e.next=9,v.a.getAudioStream({microphoneId:a});case 9:i=e.sent,this.executeAction(h.v,!1),i=new I.a({stream:i,streamName:S.a.MICROPHONE}),this.uploader.addStream(i),this.localStreams[S.a.MICROPHONE]=i,this.getDevicesList().catch(),this.initAudioAnalyzer(),e.next=24;break;case 18:throw e.prev=18,e.t0=e.catch(1),w.b.error(e.t0),n.doWeNeedWindowedRecorder()&&(this.props.isStandaloneModeAllowed&&this.openWindowedRecorder().catch(),this.props.onRecordingIsNotSupported()),this.executeAction(h.v,!0),new Error("Failed to get microphone stream");case 24:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"initAudioAnalyzer",value:function(){var e,t=this;this.audioAnalyzer&&this.audioAnalyzer.destroy(),this.localStreams[S.a.MICROPHONE]&&(e=this.localStreams[S.a.MICROPHONE]),this.localStreams[S.a.CAMERA]&&(e=this.localStreams[S.a.CAMERA]),e&&(this.audioAnalyzer=new P.b(e.stream),this.audioAnalyzer.onAudioLevelInfo((function(e){if(!t.unmounted&&(t.props.cameraStream||t.props.microphoneStream)){var n=e>=t.props.audioActivityThreshold;t.executeAction(h.p,e),!t.props.audioIsNormal&&n&&(t.executeAction(h.o,n),t.sendCommandToOpener(x.a.SET_AUDIO_IS_NORMAL))}})),this.audioAnalyzer.onStateChange((function(e){t.executeAction(h.m,e)})))}},{key:"onCameraChange",value:function(e){this.executeAction(h.o,!1),this.executeAction(h.r,void 0),this.getCameraStream({cameraId:e}).catch()}},{key:"onMicrophoneChange",value:function(e){this.executeAction(h.o,!1),this.props.recorderType!==j.a.CAMERA_ONLY&&this.props.recorderType!==j.a.CAMERA_WITH_DESKTOP||(this.executeAction(h.r,void 0),this.getCameraStream({microphoneId:e}).catch()),this.props.recorderType===j.a.DESKTOP_ONLY&&(this.executeAction(h.A,void 0),this.getMicrophoneStream({microphoneId:e}).catch())}},{key:"getDevicesList",value:function(){var e=H(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.getMediaDevices();case 3:return t=e.sent,n=this.localStreams[S.a.CAMERA],r=this.localStreams[S.a.MICROPHONE],n&&(a=n.getMicrophoneId(t.audio),o=n.getCameraId(t.video)),r&&(a=r.getMicrophoneId(t.audio)),this.executeAction(h.n,t.audio),this.executeAction(h.Q,t.video),this.executeAction(h.s,o),this.executeAction(h.t,a),e.abrupt("return",{cameraId:o,microphoneId:a});case 15:e.prev=15,e.t0=e.catch(0),w.b.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"startRecord",value:function(){this.sendCommandToOpener(x.a.RECORDING_RECORD),this.sendCommandToWindowedRecorder(x.a.START_RECORD),this.state.isListenWindowMode||this.uploader.startRecording(),this.props.onRecord()}},{key:"stopRecord",value:function(){this.timer&&this.timer.stop(),this.uploader.stopRecording(),this.sendCommandToOpener(x.a.RECORDING_STOPPED),this.sendCommandToWindowedRecorder(x.a.STOP_RECORD),this.props.onStop(),this.notifyRecordingHasEnded()}},{key:"reset",value:function(){this.sendCommandToOpener(x.a.RECORDING_RESET),this.sendCommandToWindowedRecorder(x.a.RESET),this.state.isListenWindowMode||(this.executeAction(h.R,T.a.INITIAL),this.executeAction(h.E,!1),this.executeAction(h.r,void 0),this.executeAction(h.A,void 0),this.executeAction(h.u,void 0),this.executeAction(h.G,void 0),this.executeAction(h.H,void 0),this.executeAction(h.I,void 0),this.executeAction(h.F,0),this.executeAction(h.O,!1),this.initUploader()),this.props.onReset()}},{key:"submit",value:function(){this.sendCommandToWindowedRecorder(x.a.SUBMIT),this.state.isListenWindowMode||(this.executeAction(h.O,!0),this.uploader.isUploadFinished()&&this.finalize())}},{key:"finalize",value:function(){var e=this,t=this.props,n=t.termClass,r=t.termClassId,a=(this.timer.getTime()/1e3).toFixed(2),o={finalizeUrl:this.props.settingsFromStore.finalizeUrl,audioOnly:!1,token:this.props.settingsFromStore.token,notificationParams:this.props.settingsFromStore.notificationParams,classId:n&&n.dbId?n.dbId:r,filesize:1,filename:this.props.webcamFileName,duration:a};this.props.recorderType!==j.a.DESKTOP_ONLY&&this.props.recorderType!==j.a.CAMERA_WITH_DESKTOP||(o.slaveFilesize=1,o.slaveFilename=this.props.deskShareFileName,o.slaveDuration=a);var i=this.uploader.getFinalizeOptions();o=p.a.merge(o,i),this.executeAction(h.z,!1),g.a.finalizeRecording(o).then((function(t){e.props.onFinish(t.data,t.status),e.sendCommandToOpener(x.a.RECORDING_FINISHED,[t.data,t.status])})).catch((function(t){e.executeAction(h.z,!0),e.props.onError(t)}))}},{key:"executeAction",value:function(e){for(var t=this.props,n=t.recorderId,r=t.dispatch,a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var c=e.apply(void 0,[n].concat(o));r(c)}},{key:"sendCommandToOpener",value:function(e,t){this.props.isStandaloneMode&&Object(L.b)(window,e,t)}},{key:"sendCommandToWindowedRecorder",value:function(e,t){this.state.isListenWindowMode&&this.recorderWindow&&Object(L.b)(this.recorderWindow,e,t)}},{key:"addRecorderWindowListeners",value:function(){var e=this;Object(L.a)(this.recorderWindow,x.a.RECORDING_FINISHED,(function(t){var n=Q(t,2),r=n[0],a=n[1];e.sendCommandToWindowedRecorder(x.a.CLOSE_STANDALONE_WINDOW),e.props.onFinish(r,a)})),Object(L.a)(this.recorderWindow,x.a.RECORDING_STOPPED,(function(){e.props.onStop()})),Object(L.a)(this.recorderWindow,x.a.RECORDING_RECORD,(function(){e.props.onRecord()})),Object(L.a)(this.recorderWindow,x.a.RECORDING_RESET,(function(){e.props.onReset()})),Object(L.a)(this.recorderWindow,x.a.SET_AUDIO_IS_NORMAL,(function(){e.executeAction(h.o,!0)})),Object(L.a)(this.recorderWindow,x.a.SET_VIEW_STATE,(function(t){e.executeAction(h.R,t)}))}},{key:"getNotifications",value:function(){var e=this,t=this.props,n=t.i18n,r=t.noAudioDevicesError,a=t.noVideoDevicesError,o=t.failedToGetSettingsError,i=t.failedToGetCameraStreamError,c=t.failedToGetDesktopStreamError,s=t.failedToGetAudioStreamError,u=t.recorderIsNotSupportedError,l=t.audioAnalyzerState,d=t.finalizeFailedError,f=Date.now(),p=B(this.state.uploaderNotifications.filter((function(e){return!(e.showTime&&e.showTime>f)}))),m=this.props.recorderType===j.a.CAMERA_ONLY||this.props.recorderType===j.a.CAMERA_WITH_DESKTOP,b=this.props.recorderType===j.a.CAMERA_WITH_DESKTOP||this.props.recorderType===j.a.DESKTOP_ONLY;return u&&p.push(new C.a({id:"RECORDER IS NOT SUPPORTED",message:n._("Recorder is not supported in your browser."),i18n:n})),r&&!a&&p.push(new C.a({id:"NO AUDIO DEVICES",message:n._("No audio devices detected."),clickHandler:this.checkForDevicesAvailability,i18n:n})),a&&!r&&p.push(new C.a({id:"NO VIDEO DEVICES",message:n._("No video devices detected."),clickHandler:this.checkForDevicesAvailability,i18n:n})),a&&r&&p.push(new C.a({id:"NO MEDIA DEVICES",message:n._("No media devices detected."),clickHandler:this.checkForDevicesAvailability,i18n:n})),o&&p.push(new C.a({id:"SETTINGS FAILED",message:n._("Failed to fetch recorder configuration."),clickHandler:this.getSettings,i18n:n})),s?p.push(new C.a({id:"MICROPHONE FAILED",message:n._("Unable to access your microphone."),clickHandler:this.getMicrophoneStream.bind(this),i18n:n})):this.props.audioIsNormal||!this.props.cameraStream&&!this.props.microphoneStream||p.push(new C.a({id:"PLEASE MAKE SOUND",type:C.a.TYPES.WARN,message:n._("Accessing your microphone, please make a normal sound..."),i18n:n})),i?p.push(new C.a({id:"CAMERA FAILED",message:n._("Unable to access your camera."),clickHandler:function(){var t=H(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDevicesList();case 3:a=t.sent,n=a.cameraId,r=a.microphoneId,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),w.b.error(t.t0);case 11:e.getCameraStream({cameraId:n,microphoneId:r}).catch();case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),i18n:n})):this.props.viewState===T.a.INITIAL&&m&&!this.props.cameraStream&&p.push(new C.a({id:"WAITING FOR WEBCAM",type:C.a.TYPES.WARN,message:n._("Accessing your camera..."),i18n:n})),c?p.push(new C.a({id:"DESKTOP FAILED",message:n._("Unable to access your screen or application."),clickHandler:this.getDesktopStream.bind(this),i18n:n})):this.props.viewState===T.a.INITIAL&&b&&!this.props.desktopStream&&p.push(new C.a({id:"WAITING FOR DESKTOP",type:C.a.TYPES.WARN,message:n._("Accessing your screen or application..."),i18n:n})),!l||l===P.a.RUNNING||this.props.viewState!==T.a.INITIAL&&this.props.viewState!==T.a.RECORDING||p.push(new C.a({id:"CANT ANALYZE STREAM",type:C.a.TYPES.ERROR,message:n._("Unable to analyze microphone audio."),clickHandler:function(){e.audioAnalyzer.resume()},i18n:n})),d&&p.push(new C.a({id:"FINALIZE FAIL",type:C.a.TYPES.ERROR,message:n._("Failed to finalize recording."),clickHandler:function(){e.finalize()},i18n:n})),p.sort((function(e,t){var n,r=(J(n={},C.a.TYPES.ERROR,3),J(n,C.a.TYPES.WARN,2),J(n,C.a.TYPES.INFO,1),n);return r[t.type]-r[e.type]})),p}},{key:"render",value:function(){return a.a.createElement(_.a,{isListenWindowMode:this.state.isListenWindowMode,listenWindowModeState:this.state.listenWindowModeState,recorderId:this.props.recorderId,viewState:this.props.viewState,recorderType:this.props.recorderType,showRecordButton:this.props.showRecordButtonFromStore,showSubmitButton:this.props.showSubmitButton,autoSubmit:this.props.autoSubmit,submitting:this.props.submitting,notifications:this.getNotifications(),overlay:this.props.overlay,openWindowedRecorder:this.openWindowedRecorder,isStandaloneModeAllowed:this.props.isStandaloneModeAllowed,isStandaloneMode:this.props.isStandaloneMode,onChooseScreenContent:this.props.isChooseScreenContentAllowed?this.onChooseScreenContent:null,isMaxRecordingLengthVisible:this.props.isMaxRecordingLengthVisible})}}],[{key:"doWeNeedWindowedRecorder",value:function(){var e=!1;try{e=window.self!==window.top}catch(t){e=!0}return(d.a&&d.a.chrome&&+d.a.version>=64||n.isWebRtcCapableIosSafari())&&e}}]),n}(a.a.Component);te.defaultProps={recorderType:j.a.CAMERA_ONLY,showRecordButton:!0,showSubmitButton:!0,isStandaloneModeAllowed:!0,isStandaloneMode:!1,audioActivityThreshold:.04,overlay:null,isChooseScreenContentAllowed:!0,onRecordingIsNotSupported:function(){},onFinish:function(){},onStop:function(){},onError:function(){},onRecord:function(){},onReset:function(){}},te.propTypes={recorderType:i.a.oneOf(Object.values(j.a)).isRequired,recorderId:i.a.oneOfType([i.a.string,i.a.number]).isRequired,mediaType:i.a.oneOf(Object.values(y.a)).isRequired,onRecordingIsNotSupported:i.a.func,activityId:i.a.number,questionId:i.a.number,onFinish:i.a.func,onStop:i.a.func,onRecord:i.a.func,onError:i.a.func,onReset:i.a.func,showRecordButton:i.a.bool,showSubmitButton:i.a.bool,autoSubmit:i.a.bool,isStandaloneModeAllowed:i.a.bool,recorderWindowTitle:i.a.string,overlay:i.a.node,isChooseScreenContentAllowed:i.a.bool,isMaxRecordingLengthVisible:i.a.bool,dispatch:i.a.func.isRequired,audioActivityThreshold:i.a.number,maxRecordLengthSeconds:i.a.number,playbackDuration:i.a.number,isStandaloneMode:i.a.bool,audioIsNormal:i.a.bool,noAudioDevicesError:i.a.bool,autoSubmitFromStore:i.a.bool,noVideoDevicesError:i.a.bool,showRecordButtonFromStore:i.a.bool,failedToGetSettingsError:i.a.bool,failedToGetCameraStreamError:i.a.bool,failedToGetDesktopStreamError:i.a.bool,failedToGetAudioStreamError:i.a.bool,recorderIsNotSupportedError:i.a.bool,finalizeFailedError:i.a.bool,submitting:i.a.bool,settingsFromStore:i.a.object,settings:i.a.object,match:i.a.object,commands:i.a.object,termClass:i.a.object,i18n:i.a.object,currentUser:i.a.object,viewState:i.a.oneOf(Object.values(T.a)),cameraStream:i.a.instanceOf(I.a),desktopStream:i.a.instanceOf(I.a),microphoneStream:i.a.instanceOf(I.a),recordedMicrophoneStream:i.a.instanceOf(I.a),recordedDesktopStream:i.a.instanceOf(I.a),recordedCameraStream:i.a.instanceOf(I.a),currentCameraId:i.a.string,currentMicrophoneId:i.a.string,webcamFileName:i.a.string,deskShareFileName:i.a.string,audioAnalyzerState:i.a.string,termClassId:i.a.number};t.b=Object(u.withI18n)()(Object(c.b)((function(e,t){return{settingsFromStore:O.F(e,t.recorderId),cameraStream:O.f(e,t.recorderId),desktopStream:O.j(e,t.recorderId),microphoneStream:O.q(e,t.recorderId),commands:e.common.commands,viewState:O.J(e,t.recorderId),currentCameraId:O.g(e,t.recorderId),currentMicrophoneId:O.h(e,t.recorderId),audioIsNormal:O.c(e,t.recorderId),noAudioDevicesError:O.s(e,t.recorderId),noVideoDevicesError:O.t(e,t.recorderId),failedToGetSettingsError:O.n(e,t.recorderId),failedToGetCameraStreamError:O.l(e,t.recorderId),failedToGetDesktopStreamError:O.m(e,t.recorderId),failedToGetAudioStreamError:O.k(e,t.recorderId),recorderIsNotSupportedError:O.A(e,t.recorderId),finalizeFailedError:O.o(e,t.recorderId),currentUser:F.h(e,t.recorderId),showRecordButtonFromStore:O.E(e,t.recorderId),recordedMicrophoneStream:O.z(e,t.recorderId),recordedDesktopStream:O.y(e,t.recorderId),recordedCameraStream:O.x(e,t.recorderId),maxRecordLengthSeconds:O.p(e,t.recorderId),submitting:O.G(e,t.recorderId),audioAnalyzerState:O.a(e,t.recorderId),autoSubmitFromStore:O.e(e,t.recorderId),webcamFileName:O.K(e,t.recorderId),deskShareFileName:O.i(e,t.recorderId),termClass:q.k(e)}}))(te))}).call(this,n("URgk").setImmediate)},"0b8y":function(e,t,n){},"0l2v":function(e,t,n){},"0zen":function(e,t,n){"use strict";n.d(t,"B",(function(){return s})),n.d(t,"F",(function(){return l})),n.d(t,"s",(function(){return d})),n.d(t,"t",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return y})),n.d(t,"A",(function(){return v})),n.d(t,"o",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"j",(function(){return E})),n.d(t,"J",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"I",(function(){return O})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return _})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return I})),n.d(t,"x",(function(){return P})),n.d(t,"y",(function(){return R})),n.d(t,"D",(function(){return A})),n.d(t,"r",(function(){return j})),n.d(t,"p",(function(){return k})),n.d(t,"u",(function(){return N})),n.d(t,"w",(function(){return D})),n.d(t,"v",(function(){return L})),n.d(t,"q",(function(){return M})),n.d(t,"z",(function(){return x})),n.d(t,"E",(function(){return F})),n.d(t,"G",(function(){return V})),n.d(t,"H",(function(){return G})),n.d(t,"a",(function(){return U})),n.d(t,"e",(function(){return q})),n.d(t,"K",(function(){return W})),n.d(t,"i",(function(){return B})),n.d(t,"C",(function(){return Q}));var r=n("G4qV"),a=n("upk1"),o=n("LvDl"),i=n.n(o),c=Object(r.a)(a.a,(function(e){return e.recorder})),s=function(e,t){return c(e)[t]};function u(e,t,n){var r=s(e,t);if(r)return i.a.get(r,n)}var l=function(e,t){return u(e,t,"settings")},d=function(e,t){return u(e,t,"errors.noAudioDevices")},f=function(e,t){return u(e,t,"errors.noVideoDevices")},p=function(e,t){return u(e,t,"errors.failedToGetSettings")},m=function(e,t){return u(e,t,"errors.failedToGetCameraStream")},b=function(e,t){return u(e,t,"errors.failedToGetDesktopStream")},y=function(e,t){return u(e,t,"errors.failedToGetAudioStream")},v=function(e,t){return u(e,t,"errors.recorderIsNotSupported")},h=function(e,t){return u(e,t,"errors.finalizeFailed")},g=function(e,t){return u(e,t,"cameraStream")},E=function(e,t){return u(e,t,"desktopStream")},w=function(e,t){return u(e,t,"viewState")},S=function(e,t){return u(e,t,"audioDevices")},O=function(e,t){return u(e,t,"videoDevices")},C=function(e,t){return u(e,t,"currentCameraId")},_=function(e,t){return u(e,t,"currentMicrophoneId")},T=function(e,t){return u(e,t,"audioLevel")},I=function(e,t){return u(e,t,"audioIsNormal")},P=function(e,t){return u(e,t,"recordedCameraStream")},R=function(e,t){return u(e,t,"recordedDesktopStream")},A=function(e,t){return u(e,t,"recordingTime")},j=function(e,t){return u(e,t,"settings.minRecordLengthSeconds")},k=function(e,t){return u(e,t,"settings.maxRecordLengthSeconds")},N=function(e,t){return u(e,t,"playbackDuration")},D=function(e,t){return u(e,t,"playbackTime")},L=function(e,t){return u(e,t,"playbackPlaying")},M=function(e,t){return u(e,t,"microphoneStream")},x=function(e,t){return u(e,t,"recordedMicrophoneStream")},F=function(e,t){return u(e,t,"showRecordButton")},V=function(e,t){return u(e,t,"submitting")},G=function(e,t){return u(e,t,"uploadingProgressPercent")},U=function(e,t){return u(e,t,"audioAnalyzerState")},q=function(e,t){return u(e,t,"autoSubmit")},W=function(e,t){return u(e,t,"settings.webCamFileName")},B=function(e,t){return u(e,t,"settings.deskShareFileName")},Q=function(e,t){return u(e,t,"recordingPaused")}},1:function(e,t){},"1CkY":function(e,t,n){},"1IXb":function(e,t,n){},"1OwP":function(e,t,n){},"1h2I":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("TfV7"),c=n("Wtf/"),s=n("HCbP");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.dueDate;return t&&s.a.isDueDateVisible()&&n?a.a.createElement("div",{className:"dashboard-container"},a.a.createElement(i.a,null)):null}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component),b=Object(o.b)((function(e){return{activityId:c.getActivityId(e),dueDate:c.getDueDate(e)}}))(m),y=n("CvxL"),v=n("d98y"),h=n("xHcp"),g=n("zyHd");function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=S(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==E(a)&&"function"!==typeof a?C(r):a,_(C(C(n)),"getInProgressCount",(function(){var e=n.props.resultPartials;return g.a.getInProgressPartials(e).length})),_(C(C(n)),"getSubmittedCount",(function(){var e=n.props.resultPartials;return g.a.getReadyToSubmitPartials(e).length})),_(C(C(n)),"onRemoveSubmission",(function(){var e=n.props.activityId;e=+e,h.a.deleteSubmission(e)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.result,r=e.removeSubmissionIsLoading;return t?a.a.createElement("div",{className:"dashboard-container"},a.a.createElement(y.a,null),a.a.createElement(v.b,{result:n,removeSubmissionIsLoading:r,onRemoveSubmission:this.onRemoveSubmission})):null}}])&&w(n.prototype,r),o&&w(n,o),t}(r.Component),I=Object(o.b)((function(e){return{activityId:c.getActivityId(e),result:c.getActivityResult(e)}}))(T);n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return I}))},"1mi+":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("qj80"),s=n.n(c),u=n("kbsL"),l=n("7fh3"),d=n("kKdm"),f=n("7GeL"),p=n("TSYQ"),m=n.n(p),b=n("LvDl"),y=n.n(b);n("t6et");function v(e){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=g(t).call(this,e),n=!a||"object"!==v(a)&&"function"!==typeof a?w(r):a,S(w(w(n)),"onRatingSummaryClick",(function(){n.setState({summaryDialogVisible:!0})})),S(w(w(n)),"onSummaryClose",(function(){n.setState({summaryDialogVisible:!1})})),n.state={summaryDialogVisible:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state.summaryDialogVisible,t=y.a.clone(this.props),n=0;return t.viewType&&t.viewType===d.a.SUMMARY&&(t.enabled=!1,t.value=Object(l.a)(t.ratingSummaryItems),t.ratingSummaryItems&&(n=t.ratingSummaryItems.length)),a.a.createElement("div",{"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,className:m()("input-rating",t.className),style:{fontSize:24}},a.a.createElement(s.a,{name:t.name,starCount:5,value:t.value,editing:t.enabled,onStarClick:t.onChange}),t.viewType&&t.viewType===d.a.SUMMARY?a.a.createElement(u.a,{id:"button-ratings-summary",primary:!0,className:"rating-summary-button",enabled:n>0,onClick:this.onRatingSummaryClick},"(",n,")"):null,t.viewType&&t.viewType===d.a.SUMMARY?a.a.createElement(f.a,{onClose:this.onSummaryClose,isAnonymous:this.props.isAnonymous,visible:e,ratingItems:t.ratingSummaryItems}):null)}}])&&h(n.prototype,r),o&&h(n,o),t}(r.Component);O.componentProps={className:i.a.string,name:i.a.string.isRequired,onChange:i.a.func,style:i.a.object,value:i.a.number},O.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}({},O.componentProps,{ariaLabel:i.a.string,ariaLabelledby:i.a.string,enabled:i.a.bool,isAnonymous:i.a.bool,ratingSummaryItems:i.a.array,viewType:i.a.string}),O.defaultProps={value:0,enabled:!0},t.a=O},"1pdk":function(e,t,n){},"1xro":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n("mmiR");var r=n("LvDl"),a=n.n(r),o=n("2Gxn"),i=n("na1x");function c(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,s,"next",e)}function s(e){c(o,r,a,i,s,"throw",e)}i(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l,d,f,p="audioinput",m="videoinput",b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMediaDevices",value:function(){try{return navigator.mediaDevices.enumerateDevices().then((function(e){var t={audio:[],video:[]};return e.forEach((function(e){e.kind===p&&t.audio.push(e),e.kind===m&&t.video.push(e)})),Promise.resolve(t)}))}catch(e){return Promise.reject(e)}}},{key:"getCameraStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cameraId,n=e.microphoneId,r={video:{height:{max:720},frameRate:{max:60}},audio:!0};return t&&(r.video.deviceId={exact:t}),n&&(r.audio=a.a.merge({},r.audio,{deviceId:{exact:n}})),o.b()&&(r.audio=a.a.merge({},r.audio,{sampleRate:32e3})),navigator.mediaDevices.getUserMedia(r)}},{key:"getAudioStream",value:function(e){var t=e.microphoneId,n={video:!1,audio:!0};return t&&(n.audio=a.a.merge({},n.audio,{deviceId:{exact:t}})),o.b()&&(n.audio=a.a.merge({},n.audio,{sampleRate:{min:8e3,max:32e3}})),navigator.mediaDevices.getUserMedia(n)}}],(n=null)&&u(t.prototype,n),r&&u(t,r),e}();l=b,d="getDesktopStream",f=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getDisplayMedia){e.next=6;break}return e.next=3,navigator.mediaDevices.getDisplayMedia({video:!0});case 3:return e.abrupt("return",e.sent);case 6:if(!navigator.getDisplayMedia){e.next=12;break}return e.next=9,navigator.getDisplayMedia({video:!0});case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,Object(i.c)(function(){var e=s(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}throw t;case 2:return e.next=4,navigator.mediaDevices.getUserMedia(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}());case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)}))),d in l?Object.defineProperty(l,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[d]=f},"1zCZ":function(e,t,n){"use strict";t.a={COMPLETION:"TYPE__COMPLETION",FIVESTAR:"TYPE__FIVESTAR",GRADE:"TYPE__GRADE",PASS_FAIL:"TYPE__PASS_FAIL",RUBRIC:"TYPE__RUBRIC",AUTO_ANALYSIS:"PSEUDO_TYPE__AUTO_ANALYSIS"}},2:function(e,t){},"212x":function(e,t,n){},"25rm":function(e,t,n){},"269D":function(e,t,n){},"28FC":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={ENABLED:"TYPE__ENABLED",DISABLED:"TYPE__DISABLED",NOT_APPLICABLE:"TYPE__NOT_APPLICABLE"}},"2Gxn":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return f}));var r=n("xsZ3"),a=n.n(r),o=n("LvDl"),i=n.n(o),c=function(){return s()},s=function(){var e=new a.a(window.navigator.userAgent);return e.is("iPhone")||e.is("iPad")},u=function(){return new a.a(window.navigator.userAgent).is("AndroidOS")},l=function(){return new a.a(window.navigator.userAgent).is("Chrome")},d=function(){return s()||u()},f=function(){return i.a.get(navigator,"platform","").toLowerCase().indexOf("mac")>=0}},"2HZR":function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return v}));var r="[Export user data requests] ",a=r+"Set is loading",o=r+"Set create is loading",i=r+"Set has error",c=r+"Set create has error",s=r+"Set list",u=r+"Add request",l=r+"Cancel request",d=function(e){return{type:a,payload:e}},f=function(e){return{type:o,payload:e}},p=function(e){return{type:i,payload:e}},m=function(e){return{type:c,payload:e}},b=function(e){return{type:s,payload:e}},y=function(e){return{type:u,payload:e}},v=function(e){return{type:l,payload:e}}},"2bAp":function(e,t,n){"use strict";t.a={CALENDAR:"icon bongo-calendar",CLOSE:"icon bongo-close",DOT_6:"icon bongo-dot-6",DOT_8:"icon bongo-dot-8",DOT_9:"icon bongo-dot-9",DOT_10:"icon bongo-dot-10",FILE:"icon bongo-file",GRADE:"icon bongo-grade",INTERACTIVE_VIDEO:"icon bongo-interactive-video",PLUS:"icon bongo-plus",QUESTION:"icon bongo-question",STAR_FULL:"icon bongo-star-full"}},3:function(e,t){},"3/zm":function(e,t,n){},"34Bc":function(e,t,n){},"3Hpt":function(e,t,n){},"3JS6":function(e,t,n){},"3Tiu":function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"q",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return v})),n.d(t,"o",(function(){return h})),n.d(t,"n",(function(){return g}));var r="[Activity-QA] Set question is loading",a="[Activity-QA] Set active question",o="[Activity-QA] Set question being withdrawn",i="[Activity-QA] Set answer is deleting",c="[Activity-QA] Set practice data",s="[Activity-QA] Set submitting",u="[Activity-QA] Set background refresh is loading",l="[Activity-QA] Set refreshed data",d="[Activity-QA] Set activity page state",f="[Activity-QA] Set active question media src",p=function(e){return{type:r,payload:e}},m=function(e){return{type:o,payload:e}},b=function(e){return{type:a,payload:e}},y=function(e){return{type:f,payload:e}},v=function(e){return{type:i,payload:e}},h=function(e){return{type:c,payload:e}},g=function(e){return{type:d,payload:e}}},"3UYF":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c);n("e+aV");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.link;return a.a.createElement("div",{className:s()("c-preview-url",t)},a.a.createElement("iframe",{title:n,src:n,className:"c-preview-url__iframe",frameBorder:"0"}))}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component);m.propTypes={className:i.a.string,link:i.a.string},t.a=m},"3dGR":function(e,t,n){},"3fhg":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return v}));var r,a,o,i=n("vRGJ"),c=n.n(i),s=n("LvDl"),u=n.n(s),l=n("4F3V"),d=n("BulX");function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={SS_LAUNCHPOINT_SETTINGS:"bongo-launchpoint-settings",VIEW_TYPE:"view",CONTEXT_USER_TYPE:"userType",CONTEXT_CLASS_ID:"classId",CONTEXT_ACTIVITY_ID:"activityId",CONTEXT_MEETING_ID:"meetingId",PARAMS_ACTIVITY_TYPE:"activity.type",PARAMS_ACTIVITY_NAME:"activity.name",PARAMS_ACTIVITY_DEEP_LINK_ID:"activity.deepLinkId"},b={individual:"individual",group:"group","q-and-a":"q-and-a","interactive-video":"interactive-video"},y={ACTIVITIES:"activities",ACTIVITY:"activity",ACTIVITY_SETTINGS:"activity-settings",MEETINGS:"meetings",RUBRICS:"rubrics"},v=(p(o={},"activities",{requiredContext:["userType","classId"],path:(r={},p(r,"educator",d.h.EDUCATOR_ACTIVITY_LIST),p(r,"student",d.h.STUDENT_ACTIVITY_LIST),r)}),p(o,"activity",{requiredContext:["userType","classId"],path:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.a.get(e,"activityId"),r=u.a.get(t,"activity.type"),a=b[r],o=null;switch(u.a.get(e,"userType")){case"educator":n?(l.a(),o=d.h.EDUCATOR_GRADEBOOK):o=d.h.EDUCATOR_ACTIVITY_CREATE;break;case"student":o=n?d.h.STUDENT_ACTIVITY:d.h.STUDENT_RESOURCE_ERROR}if(!o)return null;var i=c.a.compile(o),s=i(f({},e,{activityType:a}));return s},validator:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.error)return t.errorMessage;var n=u.a.get(e,"activityId");if(!n){var r=u.a.get(t,"activity.type"),a=u.a.keys(b);if(!u.a.includes(a,r))return"Unsupported value of '".concat(r,"' for ").concat("activity.type"," (supported values: ").concat(JSON.stringify(a),")")}return null}}),p(o,"activity-settings",{requiredContext:["userType","classId","activityId"],path:p({},"educator",d.h.EDUCATOR_ACTIVITY_SETTINGS)}),p(o,"library",{requiredContext:["userType","classId"],path:p({},"educator",d.h.EDUCATOR_LIBRARY)}),p(o,"meetings",{requiredContext:["userType","classId"],path:(a={},p(a,"educator",d.h.EDUCATOR_MEETINGS),p(a,"student",d.h.STUDENT_MEETINGS_LIST),a)}),p(o,"rubrics",{requiredContext:["userType","classId"],path:p({},"educator",d.h.EDUCATOR_RUBRICS_LIST)}),o)},4:function(e,t){},"4/mv":function(e,t,n){},"45tj":function(e,t,n){"use strict";function r(){return window.Intl&&"function"===typeof window.Intl.DateTimeFormat?window.Intl.DateTimeFormat().resolvedOptions().locale:null}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"i",(function(){return g}));var o=["ar","de","en","es","fr","fr-CA","nl","pt-BR"],i=["ar","de","en","es","fr","nl","pt-BR"],c=/([a-zA-Z]{2,3})(?:-[a-zA-Z]{3})?(?:-[a-zA-Z]{4})?(?:[-_]([a-zA-Z]{2}|[0-9]{3}))?/;function s(e){return u(e).map((function(e){return e.startsWith("ar")?e.concat("-u-nu-latn"):e}))}function u(e){var t=[];return e&&e.frontend&&t.push(e.frontend),t.push("en-US"),t}function l(e){if(!e)return[];var t=c.exec(e);if(t&&t[1]){var n=t[1].toLowerCase();return t[2]?[n,t[2].toUpperCase()]:[n]}return[]}function d(e){if("en"===e||"en-US"===e)return null;var t=a(l(e),2),n=t[0],r=t[1];if(n&&r){var o=r.toLowerCase();return n===o?n:"".concat(n,"-").concat(o)}return n||null}function f(e){return m(e,void 0,i)}function p(e){return m(e).replace("-","_")}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=void 0===t?"en":t,i=a(l(e),2),c=i[0],s=i[1];if(!c)return r;if(s){var u="".concat(c,"-").concat(s);if(n.includes(u))return u}return n.includes(c)?c:r}function b(e){return null!==m(e,null)}function y(e){var t=e.find(b);return t&&(t=t.replace("_","-")),t}function v(e){if(!e)return{frontend:y([r(),"en-US"])};var t=[e.ltiLocale,r()];return e.institution&&t.push(e.institution.locale),t.push("en-US"),{backend:e.locale,frontend:y(t)}}function h(e){return m(e).replace("-","_")}function g(e){return!!(e&&e.frontend&&e.backend)&&h(e.frontend)!==e.backend}},"491w":function(e,t,n){},"4F3V":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n("LvDl"),a=n.n(r),o=n("3fhg"),i=n("fbOa");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t=function(){var e=window.localStorage.getItem("ltiData");try{return JSON.parse(e)}catch(t){return null}}();return t&&a.a.isObject(t)?t[e]:null},u=function(e){var t=i.a.getLaunchpointSettings();return a.a.get(t,"parameters.".concat(e))},l=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},i.a.getLaunchpointSettings());e=a.a.omit(e,"parameters.activity"),i.a.writeLaunchpointSettings(e)},d=function(){return u(o.a.PARAMS_ACTIVITY_NAME)||s("activityLtiName")},f=function(){return u(o.a.PARAMS_ACTIVITY_DEEP_LINK_ID)||s("activityLtiIdentifier")},p=function(){l(),window.localStorage.removeItem("ltiData")}},"4WYY":function(e,t,n){},"4XMt":function(e,t,n){"use strict";var r=n("wRmV"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("691o");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),b(this,y(n).apply(this,arguments))}var a,i,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,t),a=n,(i=[{key:"render",value:function(){var t=this.props,n=t.forwardedRef,a=p(t,["forwardedRef"]);return o.a.createElement(r.b,a.tooltip,o.a.createElement(e,f({ref:n},a)))}}])&&m(a.prototype,i),c&&m(a,c),n}(a.Component);return t.displayName="WithTooltip(".concat(Object(s.a)(e),")"),t.propTypes=l({},e.propTypes,{tooltip:c.a.shape(l({},r.b.propTypes))}),o.a.forwardRef((function(e,n){return o.a.createElement(t,f({},e,{forwardedRef:n}))}))}n.d(t,"b",(function(){return r.b})),n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return h}))},"4pH6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n("G4qV"),a=n("upk1"),o=Object(r.a)(a.a,(function(e){return e.navigation})),i=Object(r.a)(o,(function(e){return e.navigation})),c=Object(r.a)(o,(function(e){return e.isLoading}))},"5F5Z":function(e,t,n){},"5LeV":function(e,t,n){},"5Lwc":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("8bCP"),a="rootHost";function o(){try{if(!c())return void localStorage.removeItem(a);var e=function(){var e=function(e){var t=document.createElement("a");return t.href=e,t}(document.referrer);if(!c()||window.location.host===e.host)return;return e}();if(!e)return;var t=i(),n=e.origin;t&&t===n||(o=n,localStorage.setItem(a,o))}catch(s){r.b.error(s)}var o}function i(){return localStorage.getItem(a)}function c(){return window.self!==window.top}},"5THG":function(e,t,n){},"5U9+":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("GhmD"),s=n.n(c),u=n("TSYQ"),l=n.n(u),d=n("q8N1");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,b(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.title,i=r.onClick,c=r.logo,s=r.disabled,u=r.onRef;return a.a.createElement("div",{className:l()("c-cloud-transfer__button",(e={},t="c-cloud-transfer__button--disabled",n=s,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),tabIndex:0,role:"button","aria-label":o,"aria-atomic":!0,ref:u,onKeyDown:Object(d.b)(i),onClick:i},a.a.createElement("img",{className:"c-cloud-transfer__image",src:c,alt:o}),a.a.createElement("a",{className:"c-cloud-transfer__name"},o),this.props.children)}}])&&p(n.prototype,r),o&&p(n,o),t}(r.Component);v.propTypes={logo:i.a.string,title:i.a.string,onClick:i.a.func,disabled:i.a.bool};var h=n("fcFR"),g=n("VmXB"),E=n("J1aS");function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=O(t).call(this,e))||"object"!==w(a)&&"function"!==typeof a?_(r):a).state={isLoading:!0},n.onIframeMountHandler=n.onIframeMountHandler.bind(_(_(n))),n.onIframeSuccessHandler=n.onIframeSuccessHandler.bind(_(_(n))),n.onIframeErrorHandler=n.onIframeErrorHandler.bind(_(_(n))),n.onIframeCloseHandler=n.onIframeCloseHandler.bind(_(_(n))),n.onIframeLoadedHandler=n.onIframeLoadedHandler.bind(_(_(n))),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener(E.a.MOUNTED,this.onIframeMountHandler),document.addEventListener(E.a.SUCCESS,this.onIframeSuccessHandler),document.addEventListener(E.a.ERROR,this.onIframeErrorHandler),document.addEventListener(E.a.CLOSE,this.onIframeCloseHandler),document.addEventListener(E.a.LOADED,this.onIframeLoadedHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener(E.a.MOUNTED,this.onIframeMountHandler),document.removeEventListener(E.a.SUCCESS,this.onIframeSuccessHandler),document.removeEventListener(E.a.ERROR,this.onIframeErrorHandler),document.removeEventListener(E.a.CLOSE,this.onIframeCloseHandler),document.removeEventListener(E.a.LOADED,this.onIframeLoadedHandler)}},{key:"onIframeMountHandler",value:function(){var e=new CustomEvent(E.a.SET_CONFIG,{detail:{mediaType:this.props.mediaType,multiselect:this.props.multiselect,config:this.props.config}});this.iframeElem.contentDocument.dispatchEvent(e)}},{key:"onIframeSuccessHandler",value:function(e){var t=e.detail;this.onSuccess(t)}},{key:"onIframeErrorHandler",value:function(e){var t=e.detail;this.onError(t)}},{key:"onIframeCloseHandler",value:function(){this.onCancel()}},{key:"onIframeLoadedHandler",value:function(){this.setState({isLoading:!1})}},{key:"onSuccess",value:function(e){var t={cloudService:"microsoft_one_drive",files:e.values.map((function(e){return{fileId:e.link,fileName:e.fileName,sizeBytes:e.size}}))};this.props.onSuccess(t)}},{key:"onError",value:function(e){this.props.onError(e)}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"openDialog",value:function(){var e=new CustomEvent(E.a.OPEN_DIALOG);this.iframeElem.contentDocument.dispatchEvent(e)}},{key:"render",value:function(){var e=this;return a.a.createElement(v,{onClick:this.openDialog.bind(this),disabled:this.state.isLoading,title:"OneDrive",logo:s.a},a.a.createElement("iframe",{src:Object(h.b)(g.e.ONEDRIVE_PROXY),title:"OneDrive",style:{display:"none"},ref:function(t){return e.iframeElem=t},className:"c-cloud-transfer__onedrive-iframe"}))}}])&&S(n.prototype,r),o&&S(n,o),t}(r.Component);T.propTypes={onSuccess:i.a.func,onError:i.a.func,onCancel:i.a.func,mediaType:i.a.string};var I=n("gRfE"),P=n.n(I),R=n("MuZe"),A=n.n(R),j=n("C721"),k=n("Qyje"),N=n.n(k),D=n("NlSD"),L=n("lTCR"),M=n.n(L),x=n("wNa6"),F=n("MOhp"),V=n("8bCP");function G(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getFileTransferSettings ($mediaType: MediaType!, $activityDbId: Int, $questionDbId: Int) {\n        fileTransferSettings(mediaType: $mediaType, activityDbId: $activityDbId, questionDbId: $questionDbId) {\n            googleDrive {\n                clientId\n                apiKey\n                tokenExists\n                authUrl\n                authCallbackUrl\n            }\n            dropbox {\n                appKey\n            }\n            oneDrive {\n                appKey\n            }\n            saveUrl\n            multiSelection\n            allowedFileExtensions\n            maxAllowedFileSizeMegabytes\n            requestParams\n        }\n    }\n"]);return G=function(){return e},e}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"upload",value:function(e,t,n){var r=U({},e,{fileUploaderRequestParameters:U({},t)});return j.a.post(n,N.a.stringify(r))}},{key:"clearSettings",value:function(){x.a.dispatch(F.n(null))}},{key:"getSettings",value:function(e,t,n){var r={mediaType:e};t&&(r.activityDbId=t),n&&(r.questionDbId=n),x.a.dispatch(F.t(!0)),x.a.dispatch(F.s(!1)),D.a.query({query:Q,variables:r,fetchPolicy:"network-only"}).then((function(e){var t=e.data.fileTransferSettings;x.a.dispatch(F.n(t)),x.a.dispatch(F.t(!1)),x.a.dispatch(F.s(!1))})).catch((function(e){V.b.error("CloudTransferService --\x3e getSettings. Error: ",e),x.a.dispatch(F.t(!1)),x.a.dispatch(F.s(!0))}))}},{key:"sendGoogleAuthCallbackUrl",value:function(e,t){var n={url:t};return j.a.post(e,N.a.stringify(n)).then((function(e){return"error"===e.data.status?Promise.reject(e.data):Promise.resolve(e.data)}))}}])&&W(t.prototype,n),r&&W(t,r),e}()),Q=M()(G()),Y=n("5Lwc");function H(e){return(H="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Z=["https://www.googleapis.com/auth/drive.readonly"],J=[],ee=!1,te=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=K(t).call(this,e))||"object"!==H(a)&&"function"!==typeof a?$(r):a).onApiLoad=n.onApiLoad.bind($($(n))),n.authToken=null,n.tokenExists=e.config.tokenExists,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.isGoogleReady()?this.onApiLoad():ee||(ee=!0,A()("https://apis.google.com/js/api.js",this.onApiLoad))}},{key:"isGoogleReady",value:function(){return!!window.gapi}},{key:"isGoogleAuthReady",value:function(){return!!window.gapi.auth}},{key:"isGooglePickerReady",value:function(){return!!window.google.picker}},{key:"onApiLoad",value:function(){window.gapi.load("auth"),window.gapi.load("picker")}},{key:"doAuth",value:function(e){var t=this.props.config;window.gapi.auth.authorize({client_id:t.clientId,scope:Z,immediate:!1},e)}},{key:"handleClick",value:function(){var e=this,t=this.props.config,n=t.authUrl,r=t.authCallbackUrl;if(this.tokenExists)return this.openDialog();var a=window.open(n,"popup","width=700, height=500, menubar=no, location=no, directories=no, toolbar=no, resizable=no, scrollbars=no, status=no, copyhistory=no");document.addEventListener("googleOauthCallback",(function(t){var n=t.customValue;a.close(),B.sendGoogleAuthCallbackUrl(r,n).then((function(){e.tokenExists=!0,e.simulateTransferButtonClick()}))}))}},{key:"openDialog",value:function(){var e=this;if(!this.isGoogleReady()||!this.isGoogleAuthReady()||!this.isGooglePickerReady()||this.props.disabled)return null;this.authToken?this.createPicker(this.authToken):this.doAuth((function(t){var n=t.access_token;e.authToken=n,e.simulateTransferButtonClick()}))}},{key:"simulateTransferButtonClick",value:function(){this.buttonElement.click()}},{key:"createPicker",value:function(e){var t=this.props.config;if(this.props.createPicker)return this.props.createPicker(window.google,e);var n=window.google.picker.ViewId.DOCS,r=new window.google.picker.View(n);if(this.props.mimeTypes&&r.setMimeTypes(J),!r)throw new Error("Can't find view by viewId");var a=(new window.google.picker.PickerBuilder).addView(r).setOAuthToken(e).setDeveloperKey(t.apiKey).setCallback(this.onChange.bind(this)),o=Y.a();a.setOrigin(o||window.location.origin),a.enableFeature(window.google.picker.Feature.NAV_HIDDEN),this.props.multiselect&&a.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED),a.build().setVisible(!0)}},{key:"onChange",value:function(e){switch(e.action){case window.google.picker.Action.PICKED:var t={cloudService:"google_drive",files:e.docs.map((function(e){return{fileId:e.id,fileName:e.name,sizeBytes:e.sizeBytes}}))};this.props.onSuccess(t);break;case window.google.picker.Action.CANCEL:this.props.onCancel();break;default:V.b.debug("Unhandled google picker action",e)}}},{key:"render",value:function(){var e=this;return a.a.createElement(v,{onClick:this.handleClick.bind(this),onRef:function(t){t&&(e.buttonElement=t)},title:"Google Drive",logo:P.a})}}])&&z(n.prototype,r),o&&z(n,o),t}(r.Component);te.propTypes={onSuccess:i.a.func,onError:i.a.func,onCancel:i.a.func};var ne=n("WLvO"),re=n.n(ne);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ue=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=ie(t).call(this,e))||"object"!==ae(a)&&"function"!==typeof a?se(r):a).options={success:n.onSuccess.bind(se(se(n))),cancel:n.onCancel.bind(se(se(n))),linkType:"direct",multiselect:n.props.multiselect,extensions:["video","audio"]},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,(r=[{key:"onSuccess",value:function(e){var t={cloudService:"dropbox",files:e.map((function(e){return{fileId:e.link,fileName:e.name,sizeBytes:e.bytes}}))};this.props.onSuccess(t)}},{key:"onError",value:function(e){this.props.onError(e)}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"openDialog",value:function(){window.Dropbox.choose(this.options)}},{key:"render",value:function(){return a.a.createElement(v,{onClick:this.openDialog.bind(this),title:"Dropbox",logo:re.a})}}])&&oe(n.prototype,r),o&&oe(n,o),t}(r.Component);ue.propTypes={onSuccess:i.a.func,onError:i.a.func,onCancel:i.a.func};n("PhW7");var le=n("/MKj"),de=n("UyA7"),fe=n("hvs/"),pe=n("kbsL"),me=n("ZD0w"),be=n("Gxhl");function ye(e){return(ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ge(this,Ee(t).call(this,e))).state={isLoading:!1,hasError:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.reloadConfig()}},{key:"componentWillUnmount",value:function(){B.clearSettings()}},{key:"onSuccess",value:function(e){var t=this,n=this.props.i18n,r=e.files;if(0!==(r=r.filter((function(e){var r=e.fileName,a=e.sizeBytes,o=!0,i="";return t.isFileExtensionAllowed(r)||(i=n._("{fileName} has a file extension that is not supported, and won't be transferred. Supported extensions: {0}",{0:t.props.config.allowedFileExtensions.join(", "),fileName:r}),o=!1),t.isFileSizeAllowed(a)||(i=n._("{fileName} exceeds maximum size and won't be transferred. Maximum file size is: {0} MB.",{0:t.props.config.maxAllowedFileSizeMegabytes,fileName:r}),o=!1),o||t.setState({dialogMessage:i}),o}))).length){e.files=r;var a=this.props,o=a.submit,i=a.onSubmitSuccess,c=a.onSubmitError,s=a.postData,u=a.config;o||(o=B.upload),this.setState({isLoading:!0,hasError:!1}),o(e,s,u.saveUrl).then((function(e){t.setState({isLoading:!1}),i&&i(e)})).catch((function(e){t.setState({isLoading:!1,hasError:!0}),c&&c(e)}))}}},{key:"isFileExtensionAllowed",value:function(e){var t=e.split(".").pop().toLowerCase();return this.props.config.allowedFileExtensions.includes(t)}},{key:"isFileSizeAllowed",value:function(e){return e/1048576<=this.props.config.maxAllowedFileSizeMegabytes}},{key:"onError",value:function(e){V.b.debug("Transfer files error:",e),this.setState({isLoading:!1,hasError:!0})}},{key:"onCancel",value:function(){V.b.debug("Transfer files modal closed")}},{key:"reloadConfig",value:function(){B.getSettings(this.props.mediaType,this.props.activityId,this.props.questionId)}},{key:"render",value:function(){var e=this.props,t=e.configIsLoading,n=e.configLoadingError,r=e.config,o=e.i18n,i={onSuccess:this.onSuccess.bind(this),onError:this.onError.bind(this),onCancel:this.onCancel.bind(this),multiselect:!!this.props.config&&!!this.props.config.multiselect,mediaType:this.props.mediaType};if(n)return a.a.createElement("div",{className:"u-text-center"},a.a.createElement(me.Trans,{id:"Error during transfer initialization"}),a.a.createElement(pe.f,{id:"button-cloud-transfer-try-again",ariaLabel:o._("Try again"),onClick:this.reloadConfig.bind(this)},a.a.createElement(me.Trans,{id:"Try again"})));var c=t||this.state.isLoading;return a.a.createElement(fe.b,{loading:c},r&&a.a.createElement("div",{className:"c-cloud-transfer"},this.state.hasError&&a.a.createElement("p",null,a.a.createElement(me.Trans,{id:"Failed to upload. Please try again"})),a.a.createElement(te,ve({config:r.googleDrive},i)),a.a.createElement(ue,i),a.a.createElement(T,ve({config:r.oneDrive},i)),a.a.createElement(be.a,{id:"cloud-transfer-message-dialog",message:this.state.dialogMessage})),!r&&a.a.createElement("div",{className:"u-minh-100px"}))}}])&&he(n.prototype,r),o&&he(n,o),t}(r.Component);Se.defaultProps={multiselect:!1,postData:{}},Se.propTypes={postData:i.a.object,submit:i.a.func,onSubmitSuccess:i.a.func,onSubmitError:i.a.func,mediaType:i.a.string.isRequired,activityId:i.a.number,questionId:i.a.number};t.a=Object(me.withI18n)()(Object(le.b)((function(e){return{config:de.m(e),configIsLoading:de.o(e),configLoadingError:de.n(e),postData:de.p(e)}}))(Se))},"5id7":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("qSfp"),s=n("QMWu"),u=n("LvDl"),l=n.n(u);n("rZyJ");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){return l.a.pick(e,Object.keys(m.componentProps))}var m=function(e){return a.a.createElement(c.b,f({},p(e),{className:e.className,flat:!0}),e.isLoading?a.a.createElement(s.a,{id:"button-flat-progress",className:"button-flat-progress"}):e.children)};m.componentProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},c.b.propTypes),m.propTypes={className:i.a.string,children:i.a.node,iconChildren:i.a.node,isLoading:i.a.bool},m.defaultProps={isLoading:!1},t.a=m},"5jRi":function(e,t,n){},"5sx6":function(e,t,n){},"5ux5":function(e,t,n){"use strict";t.a={LINK:"ActivityResultPartialLink",DOCUMENT:"ActivityResultPartialDocument",MEDIA:"ActivityResultPartialMedia",MEETING:"ActivityResultPartialMeeting",REFLECTION_ANSWERS:"ActivityResultPartialReflectionAnswers"}},"691o":function(e,t,n){"use strict";function r(e){return e.displayName||e.name||"Component"}n.d(t,"a",(function(){return r}))},"6Byh":function(e,t,n){},"6SRB":function(e,t,n){"use strict";var r=n("LvDl"),a=n.n(r),o=n("wNa6"),i=n("r9GM"),c=n("hApM"),s=n("e33A"),u=n("8bCP");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"detectViewportDimensions",(function(){try{return{width:window.innerWidth,height:window.innerHeight}}catch(e){u.b.debug("Unable to detect viewport dimensions",e)}return{width:null,height:null}})),d(this,"detectViewportSize",(function(){var e="N/A";try{var n=t.detectViewportDimensions();a.a.forEach(c.a,(function(t){if(n.width<=t.max)return e=t.name,!1}))}catch(r){u.b.debug("Unable to detect viewport size",r)}return e})),d(this,"onWindowResize",(function(){var e=t.detectViewportSize();e!==Object(s.c)(o.a.getState())&&o.a.dispatch(i.f(e));var n=t.detectViewportDimensions();o.a.dispatch(i.d(n)),t.onWindowOrientationChange()})),d(this,"detectViewportOrientation",(function(){try{return window.matchMedia("(orientation: portrait)").matches?c.b.PORTRAIT:c.b.LANDSCAPE}catch(e){u.b.debug("Unable to detect window orientation",e)}return c.b.NA})),d(this,"onWindowOrientationChange",(function(){var e=t.detectViewportOrientation();e!==Object(s.b)(o.a.getState())&&o.a.dispatch(i.e(e))}))}var t,n,r;return t=e,(n=[{key:"monitorWindowChanges",value:function(){window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowOrientationChange),this.onWindowResize()}},{key:"isPageInsideIframe",value:function(){return window.self!==window.top}}])&&l(t.prototype,n),r&&l(t,r),e}();t.a=new f},"6Swy":function(e,t,n){},"6ZeI":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("J4sO"),s=n("A2tp"),u=n("T1zh"),l=n("+psP"),d=n("v6po"),f=n("LvDl"),p=n.n(f);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.autoplay,n=e.media,r=e.marks,o=e.onPlay,i=e.termClassId,c=e.activityId,d=e.usageContext,f=e.id,m=p.a.get(n,"transcript.src"),b={autoplay:t,sources:[{src:n.srcUrl,type:"video/mp4"}],transcriptUrl:m};n.caption&&(b.tracks=[n.caption]);var y=n.slaveMedia;if(n.meetingAssets){var v=null;return n.slaveMedia&&(v=n.slaveMedia.srcUrl),a.a.createElement(l.a,{playerId:this.props.playerId,onPlay:o,mainStreamUrl:n.srcUrl,slaveStreamUrl:v,caption:n.caption,termClassId:i,activityId:c,usageContext:d,media:n,mediaId:n.dbId,logMediaWatching:this.props.logMediaWatching,svgUrl:n.meetingAssets.svgUrl,cursorUrl:n.meetingAssets.cursorUrl,zoomsUrl:n.meetingAssets.zoomsUrl,eventsUrl:n.meetingAssets.eventsUrl,chatMessagesUrl:n.meetingAssets.chatMessagesUrl})}return y?a.a.createElement(u.a,{autoplay:t,caption:n.caption,transcriptUrl:m,deskshareSrc:n.slaveMedia.srcUrl,marks:r,onPlay:o,playerId:this.props.playerId,webcamSrc:n.srcUrl,termClassId:i,activityId:c,usageContext:d,mainMediaId:n.dbId,logMediaWatching:this.props.logMediaWatching,slaveMediaId:n.slaveMedia.dbId}):a.a.createElement(s.a,{id:"".concat(f,"--media-container-video-player"),marks:r,onPlay:o,options:b,termClassId:i,activityId:c,usageContext:d,mediaId:n.dbId,logMediaWatching:this.props.logMediaWatching,playerId:this.props.playerId})}}])&&b(n.prototype,r),o&&b(n,o),t}(r.Component);g.defaultProps={autoplay:!1,logMediaWatching:!0,marks:[],onPlay:function(){}},g.propTypes={autoplay:i.a.bool,logMediaWatching:i.a.bool,onPlay:i.a.func,id:i.a.string.isRequired,playerId:i.a.string,media:i.a.shape({allowExternalPlay:i.a.bool,processingStatus:i.a.oneOf([c.a.READY,c.a.PROGRESS,c.a.ERROR]),downloadUrl:i.a.string,externalPlayUrl:i.a.string}),marks:i.a.arrayOf(i.a.shape({timestamp:i.a.number})),termClassId:i.a.number,activityId:i.a.number,usageContext:i.a.oneOf([d.a.ACTIVITY_COMMENTARY,d.a.ACTIVITY_OVERVIEW,d.a.COMMENT,d.a.DIRECT_LIBRARY,d.a.FEEDBACK,d.a.INTERACTIVE_VIDEO,d.a.PROFILE,d.a.QA_QUESTION,d.a.STUDENT_RESULT,d.a.STUDENT_RESULT_PARTIAL]).isRequired}},"6puI":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b}));var r=n("q1tI"),a=n.n(r),o=n("giI2"),i=n("2bAp"),c=n("LFYD"),s=n("5ux5"),u=n("zyHd"),l=n("7n1V"),d=n("oDFA"),f=n.n(d);function p(e,t){if(e&&e.__typename){if(u.a.isMediaInProcessingProgress(e))return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("Video Processing, icon"),tooltip:{label:t._("Video processing")}},c.a.HOURGLASS_EMPTY);if(u.a.isMediaInProcessingError(e))return a.a.createElement(o.a,{className:"wip-type-icon error-status-icon",ariaLabel:t._("Video processing error, icon"),tooltip:{label:t._("Video processing error")}},c.a.ERROR);switch(e.__typename){case s.a.LINK:return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("Link, icon")},c.a.LINK);case s.a.MEDIA:return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("Video, icon")},c.a.VIDEOCAM);case s.a.MEETING:return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("Meeting, icon"),iconClassName:i.a.CALENDAR});case s.a.REFLECTION_ANSWERS:return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("Reflection Answers, icon")},c.a.LIST_NUMBERED);default:return a.a.createElement(o.a,{className:"wip-type-icon",ariaLabel:t._("File, icon"),iconClassName:i.a.FILE})}}}var m=function(e){return[l.b.CONVERSATION,l.b.TEXT_DISCUSSION,l.b.ROLE_PLAY,l.b.IN_CLASSROOM].includes(e.type)},b=function(e){if(!e)return null;var t=/^\[\[([^\]]+)\]\]$/;e=e.replace("www.","");var n=null;if(t.test(e)){var r=t.exec(e)[1];f()({strict:!0}).test(r)&&(n=r)}return n}},"6ru4":function(e,t,n){},"6vFL":function(e,t,n){},"7D+u":function(e,t,n){"use strict";var r=n("zL4/"),a=n("RWpT"),o=n("q1tI"),i=n.n(o),c=n("ZD0w"),s=n("17x9"),u=n.n(s),l=n("TSYQ"),d=n.n(l),f=n("xrVw"),p=n("giI2"),m=n("LFYD"),b=(n("i5n6"),"column-menu-button"),y="icon-container-label";function v(e){var t=e.i18n;return i.a.createElement(f.r,{key:e.key,menuItems:e.menuItems,className:d()(b,e.className),anchor:{x:f.r.HorizontalAnchors.CENTER,y:f.r.VerticalAnchors.OVERLAP},position:f.r.Positions.TOP_LEFT,animationPosition:"below"},i.a.createElement(f.a,{disabled:!e.enabled,component:f.w,iconBefore:!0,label:i.a.createElement(f.w,{className:"icon-container",labelClassName:d()(y,e.labelClassName),label:e.label},i.a.createElement(p.a,{ariaLabel:t._("Drop Down Arrow"),className:"drop-down-arrow-icon"},m.a.ARROW_DOWN))},e.selectedItem))}v.propTypes={enabled:u.a.bool,label:u.a.string,labelClassName:u.a.string},v.defaultProps={enabled:!0};var h=Object(c.withI18n)()(v),g=n("Md0H"),E=n("LvDl"),w=n.n(E);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=function(e){return i.a.createElement(f.G,O({icon:!0},function(e){return w.a.pick(e,Object.keys(C.componentProps))}(e),{className:d()("column-select-field",e.className)}),e.children)};C.componentProps={className:u.a.string,menuItems:u.a.array},C.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}({},C.passThroughProps);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return g.a}))},"7FdR":function(e,t,n){},"7GeL":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZtzG"),s=n("hHKf"),u=n("kbsL"),l=n("s/Ur"),d=n.n(l),f=n("yG+V"),p=n("TEiA"),m=n("ZD0w"),b=n("LvDl"),y=n.n(b),v=n("uaEo");function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return r=this,o=(e=E(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==h(o)&&"function"!==typeof o?S(r):o,O(S(S(n)),"getUserInfo",(function(e,t){var r=n.props,o=r.i18n,i=r.isAnonymous,s=y.a.merge({},e);s.user||(s.user={dbId:t});var u=Object(v.c)(o,s.user,i);return a.a.createElement("div",{className:"member-avatar-container"},a.a.createElement(c.a,{className:"member-avatar",value:u}),a.a.createElement("span",{className:"member-name-label"},u))})),O(S(S(n)),"getRatingComponent",(function(e){return a.a.createElement("div",{className:"rating-column-renderer"},a.a.createElement(f.a,{name:"group-member-rating",value:e.value,enabled:!1}))})),O(S(S(n)),"createColumns",(function(){var e=n.props.i18n;return[{accessor:"user",className:"member-name",label:e._("User"),renderer:function(e,t){var r=Number(t.split("_")[0])+1;return n.getUserInfo(e,r)}},{accessor:"",className:"rating-column",label:e._("Rating"),renderer:function(e){return n.getRatingComponent(e)}},{accessor:"comment",grow:!0,className:"rating-comment-column",label:e._("Comment")}]})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.ratingItems,i=t.i18n,c=[a.a.createElement(u.a,{id:"button-ratings-summary-dialog-close",secondary:!0,ariaLabel:i._("Close"),onClick:r},a.a.createElement(m.Trans,{id:"Close"}))];return a.a.createElement(s.a,{actions:c,contentStyle:{width:"100%"},dialogClassName:"rating-summary-dialog",id:"rating-summary-dialog",modal:!0,title:i._("Ratings"),visible:n},a.a.createElement(d.a,{query:"(min-width: 701px)"},a.a.createElement(p.a,{columns:this.createColumns(),hasMobileListView:!1,className:"rating-summary-table",data:o||[],listAccessor:"title"})),a.a.createElement(d.a,{query:"(max-width: 700px)"},a.a.createElement("div",{className:"rating-results-container"},o.map((function(t,n){return a.a.createElement("div",{key:"rating_ele_"+n},a.a.createElement("div",{className:"rating-user-info"},e.getUserInfo(t)),a.a.createElement("div",{className:"rating-rating-component"},e.getRatingComponent(t)),a.a.createElement("div",{className:"rating-comments-container"},t.comment))})))))}}])&&g(n.prototype,r),o&&g(n,o),t}(r.Component);C.propTypes={onClose:i.a.func,visible:i.a.bool,ratingItems:i.a.array,isAnonymous:i.a.bool,i18n:i.a.object},t.a=Object(m.withI18n)()(C)},"7H7w":function(e,t,n){},"7Yj1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="[Locale] Set locale",a=function(e){return{type:r,payload:e}}},"7dPE":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("/MKj"),u=n("ZD0w"),l=n("TSYQ"),d=n.n(l),f=n("LvDl"),p=n.n(f),m=n("kbsL"),b=n("hu4m"),y=n("J/33"),v=n("hApM"),h=n("LFYD"),g=n("e33A");n("MRtt");function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=27,P="closeable-dialog",R="".concat(P,"--full"),A="".concat(P,"-overlay"),j="".concat(P,"-header"),k="".concat(j,"-title"),N="".concat(j,"-actions"),D="".concat(P,"-content"),L="".concat(P,"-footer"),M="".concat(P,"-children-container"),x="".concat(P,"-close"),F="".concat(P,"-toolbar");function V(e){return p.a.pick(e,Object.keys(G.componentProps))}var G=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=O(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==E(o)&&"function"!==typeof o?_(r):o,T(_(_(n)),"state",{containFocusOverride:!0}),T(_(_(n)),"recalculateFocusables",(function(){var e=n.state.containFocusOverride;n.setState({containFocusOverride:!1},(function(){n.setState({containFocusOverride:e})}))})),T(_(_(n)),"onKeyDown",(function(e){var t=n.props.onHide;(e.which||e.keyCode)===I&&t(e)})),T(_(_(n)),"getCloseButton",(function(){var e=n.props,t=e.i18n,r=e.onHide;return a.a.createElement(m.c,{id:x,className:x,onClick:r,ariaLabel:t._("Close")},h.a.CLOSE)})),T(_(_(n)),"getFullPageContent",(function(){var e=n.props,t=e.title,r=e.children,o=e.headerActions,i=e.footerActions,c=n.props,s=c.childrenContainerClassName,u=c.fullPageToolbarClassName,l=c.footerClassName,f=p.a.compact(o);return f.push(n.getCloseButton()),a.a.createElement("div",{className:d()(D)},a.a.createElement(y.a,{className:d()(F,u),title:a.a.createElement("h2",{id:k},t),actions:f}),a.a.createElement("div",{className:d()(M,s),tabIndex:0},r),!p.a.isEmpty(i)&&a.a.createElement(b.a,{zDepth:1,className:d()(L,l)},i))})),T(_(_(n)),"getContent",(function(){var e=n.props,t=e.title,r=e.children,o=e.footerActions,i=n.props,c=i.headerClassName,s=i.childrenContainerClassName,u=i.footerClassName;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:d()(j,c)},a.a.createElement("h2",{id:k,className:k},t),a.a.createElement("div",{className:N},n.getCloseButton())),a.a.createElement("div",{className:d()(M,s)},r),!p.a.isEmpty(o)&&a.a.createElement("div",{className:d()(L,u)},o))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.closeOnEsc&&window.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){this.props.closeOnEsc&&window.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.containFocus,n=e.fullPage,r=e.visible,o=this.props,i=o.className,s=o.contentClassName,u=o.dialogClassName,l=o.footerClassName,f=this.state.containFocusOverride,p=w({},V(this.props),{className:d()(A,i,{"md-overlay--active":r}),contentClassName:d()(D,s),dialogClassName:d()(P,T({},R,n),u),footerClassName:d()(L,l),"aria-labelledby":k,containFocus:f&&t});return a.a.createElement(c.n,p,n?this.getFullPageContent():this.getContent())}}])&&S(n.prototype,r),o&&S(n,o),t}(a.a.PureComponent);G.componentProps={autosizeContent:i.a.bool,autopadContent:i.a.bool,className:i.a.string,closeOnEsc:i.a.bool,containFocus:i.a.bool,contentClassName:i.a.string,contentStyle:i.a.any,dialogClassName:i.a.string,dialogStyle:i.a.any,disableScrollLocking:i.a.bool,footerClassName:i.a.string,fullPage:i.a.bool,height:i.a.oneOfType([i.a.string,i.a.number]),id:i.a.string.isRequired,initialFocus:i.a.string,lastChild:i.a.bool,modal:i.a.bool,onHide:i.a.func,portal:i.a.bool,renderNode:i.a.object,style:i.a.any,visible:i.a.bool.isRequired,width:i.a.oneOfType([i.a.string,i.a.number])},G.propTypes=w({},G.componentProps,{childrenContainerClassName:i.a.string,headerActions:i.a.array,headerClassName:i.a.string,footerActions:i.a.oneOfType([i.a.node,i.a.array]),fullPageMaxWidth:i.a.number,fullPageToolbarClassName:i.a.string,title:i.a.any}),G.defaultProps={autopadContent:!1,autosizeContent:!1,closeOnEsc:!0,containFocus:!0,fullPageMaxWidth:v.a.XSMALL.max,initialFocus:x,onHide:function(){},modal:!0,visible:!0};t.a=Object(u.withI18n)({withRef:!0})(Object(s.b)((function(e,t){var n=t.fullPage;if(!p.a.isBoolean(n)){var r=t.fullPageMaxWidth||G.defaultProps.fullPageMaxWidth;n=g.d(e)<=r}return{fullPage:n}}),null,null,{forwardRef:!0})(G))},"7fh3":function(e,t,n){"use strict";function r(e){var t=0;if(e){for(var n=0,r=0;r<e.length;r++)n+=e[r].value;n>0&&(t=n/e.length)}return Math.floor(t)}function a(e){var t=0;if(e){for(var n=0,r=0;r<e.length;r++)n+=e[r].points;n>0&&(t=n/e.length)}return Math.ceil(t)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},"7n1V":function(e,t,n){"use strict";var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=(a(r={},"TYPE__INDIVIDUAL_PROJECT","INDIVIDUAL"),a(r,"TYPE__QA_ENHANCED","QA"),a(r,"TYPE__GROUP_PRESENTATION","GROUP"),a(r,"TYPE__INTERACTIVE_VIDEO","INTERACTIVE_VIDEO"),r),i={CONVERSATION:"TYPE__CONVERSATION",GROUP_PRESENTATION:"TYPE__GROUP_PRESENTATION",HELPER_STUDIO:"TYPE__HELPER_STUDIO",IN_CLASSROOM:"TYPE__IN_CLASSROOM",INTERACTIVE_VIDEO:"TYPE__INTERACTIVE_VIDEO",INDIVIDUAL_PROJECT:"TYPE__INDIVIDUAL_PROJECT",ROLE_PLAY:"TYPE__ROLE_PLAY",TEXT_DISCUSSION:"TYPE__TEXT_DISCUSSION",QA_ENHANCED:"TYPE__QA_ENHANCED"};t.b=i},"7rMt":function(e,t,n){},"8+7o":function(e,t,n){},"8DtX":function(e,t,n){"use strict";var r=n("lTCR"),a=n.n(r),o=n("09Br"),i=n("jlV6");function c(){var e=u(["\n    fragment EducatorActivityGroupMember on ActivityStudentGroupMember {\n        dbId\n        firstName\n        lastName\n        fiveStarRatings {\n            ...FiveStarRatingWithUser\n            ...FiveStarRatingAnonymous\n        }\n        rubricEvaluations {\n            ...GroupReviewRubricWithUser\n            ...GroupReviewRubricAnonymous\n        }\n        isLocked\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return c=function(){return e},e}function s(){var e=u(["\n    fragment StudentActivityGroupMember on ActivityStudentGroupMember {\n        dbId\n        firstName\n        lastName\n        fiveStarRatings {\n            ...FiveStarRatingWithUser\n            ...FiveStarRatingAnonymous\n        }\n        myFiveStarRating {\n            ...FiveStarRatingWithUser\n            ...FiveStarRatingAnonymous\n        }\n        rubricEvaluations {\n            ...GroupReviewRubricWithUser\n            ...GroupReviewRubricAnonymous\n        }\n        myRubricEvaluation {\n            ...GroupReviewRubricWithUser\n            ...GroupReviewRubricAnonymous\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return s=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=a()(s(),o.b,o.a,i.b,i.a),d=a()(c(),o.b,o.a,i.b,i.a),f=n("eDl9"),p=n("92Bf"),m=n("O+79"),b=n("svEP"),y=n("mxsA"),v=n("/KNH");function h(){var e=_(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            groupReviewType\n            type\n            termClass {\n                dbId\n            }\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubricPeerAllowed\n            rubricSelfAllowed\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            groupReviewRubric {\n                ...Rubric\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorGroupActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n"]);return h=function(){return e},e}function g(){var e=_(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubricPeerAllowed\n            rubricSelfAllowed\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            groupReviewType\n            groupReviewRubric {\n                ...Rubric\n            }\n            dataForAllStudents {\n                student {\n                    dbId\n                    firstName\n                    lastName\n                }\n                studentGroup {\n                    dbId\n                    name\n                }\n                activity {\n                    dbId\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...ActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n"]);return g=function(){return e},e}function E(){var e=_(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            allowGroupsForming\n            deletable\n            type\n            termClass {\n                dbId\n            }\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            commentaryText\n            commentaryMedia {\n                ...MediaFull\n            }\n            gradeType\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            rubricPeerAllowed\n            rubricSelfAllowed\n            ltiDeepLinking\n            ltiGradeIdentifier\n            ltiGradeSyncEnabled\n            groupReviewType\n            groupReviewRubric {\n                ...Rubric\n            }\n            studentGroups {\n                dbId\n            }\n            groupsFormationFinalizeAt\n            minStudentsAmountInGroup\n            maxStudentsAmountInGroup\n            executorsType\n            cengageSettings {\n                countTowardsFinalGrade\n                score\n                locked\n                inPath\n            }\n            dataForAllStudents {\n                student {\n                    dbId\n                }\n                result {\n                    submitter {\n                        roles\n                    }\n                }\n                rubricEvaluations {\n                    user {\n                        ...GeneralUser\n                    }\n                    rubric {\n                        ...Rubric\n                    }\n                    points\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n                studentGroup {\n                    members {\n                        ...on ActivityStudentGroupMember {\n                            rubricEvaluations {\n                                ...on ActivityStudentGroupReviewRubricEvaluationAnonymous {\n                                    points\n                                }\n                                ...on ActivityStudentGroupReviewRubricEvaluationWithUser {\n                                    points\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return E=function(){return e},e}function w(){var e=_(["\n    fragment EducatorGroupActivityStudentData on ActivityStudentData {\n        student {\n            ...EducatorUser\n        }\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        reviewedResults {\n            ...ReviewedResult\n        }\n        studentGroup {\n            ...EducatorStudentGroupWithProgress\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return w=function(){return e},e}function S(){var e=_(["\n    fragment ActivityStudentData on ActivityStudentData {\n        student {\n            ...EducatorUser\n        }\n        resultPartialsCreatedCount\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        educatorGrade {\n            ...EducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        studentGroup {\n            ...EducatorStudentGroupWithProgress\n        }\n        reviewedResults {\n            ...ReviewedResult\n        }\n        result {\n            ...EducatorGroupProjectResult\n        }\n        isGradeDraftAllowed\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return S=function(){return e},e}function O(){var e=_(["\n    fragment EducatorGroupProjectResult on ActivityResultGroupProject {\n        activityStudentGroup {\n            dbId\n            name\n        }\n        submitter {\n            ...EducatorUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        documents {\n            ...Document\n        }\n        links {\n            ...Link\n        }\n        deletable\n        comments {\n          ...Comment\n          ...AnonymousComment\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    "]);return O=function(){return e},e}function C(){var e=_(["\n    fragment EducatorStudentGroupWithProgress on ActivityStudentGroupWithProgress {\n        dbId\n        name\n        members {\n            ...EducatorActivityGroupMember\n        }\n        milestones {\n            dbId\n            description\n            assignedTo {\n                dbId\n                firstName\n                lastName\n            }\n            status\n            dueDate\n        }\n        comments {\n            dbId\n            text\n            isSystem\n            user {\n                dbId\n                firstName\n                lastName\n            }\n            createdAt\n        }\n        reviewReleasedAt\n        isReviewAnonymous\n    }\n    ","\n"]);return C=function(){return e},e}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=a()(C(),d),I=a()(O(),f.b,m.b,m.a,f.a,p.b,p.d,y.b),P=a()(S(),I,p.b,p.d,f.b,f.a,f.c,f.d,b.a,o.d,T,y.b,o.c,v.a),R=a()(w(),f.b,f.a,f.c,f.d,y.b,T,v.a),A=a()(E(),b.a,y.d,p.d,o.d),j=a()(g(),o.d,b.a,P),k=a()(h(),o.d,p.d,R),N=n("x1nL");function D(){var e=W(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            lmsLocked\n            className\n            submitDueAt\n            type\n            groupReviewType\n            termClass {\n                dbId\n            }\n            executorsType\n            availableResults {\n                ...StudentGroupProjectResult        \n            }\n            reviewedResults {\n                ...StudentGroupProjectResult\n            }\n            commentaryText\n            commentaryMedia {\n                ...MediaFull\n            }\n            gradeType\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            rubricPeerAllowed\n            rubricSelfAllowed\n            myData {\n                ...StudentRefreshGroupActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return D=function(){return e},e}function L(){var e=W(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...GroupActivity\n            availableResults {\n                ...StudentGroupProjectResult        \n            }\n            reviewedResults {\n                ...StudentGroupProjectResult\n            }\n        }\n    }\n    ","\n    ","\n"]);return L=function(){return e},e}function M(){var e=W(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            type\n            executorsType\n            termClass {\n                dbId\n                students {\n                    ...GeneralUser\n                }\n            }\n            groupsFormationFinalizeAt\n            groupsFormedAt\n            allowGroupsForming\n            minStudentsAmountInGroup\n            maxStudentsAmountInGroup\n            studentGroupsToJoin {\n                dbId\n                name\n                members {\n                    ...GeneralUser\n                }\n            }\n        }\n    }\n    ","\n"]);return M=function(){return e},e}function x(){var e=W(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            type\n            executorsType\n            groupsFormationFinalizeAt\n            groupsFormedAt\n            allowGroupsForming\n            termClass {\n                dbId\n            }\n            myData {\n                studentGroup {\n                    dbId\n                }\n            }\n        }\n    }\n"]);return x=function(){return e},e}function F(){var e=W(["\n    fragment GroupActivity on Activity {\n        dbId\n        name\n        lmsLocked\n        className\n        submitDueAt\n        type\n        allowViewOthersResultsWithoutOwn\n        allowGroupsForming\n        groupReviewType\n        termClass {\n            ...TermClassBasic\n        }\n        groupsFormedAt\n        executorsType\n        commentaryText\n        commentaryMedia {\n            ...MediaFull\n        }\n        gradeType\n        instructionsText\n        instructionsMedia {\n            ...MediaFull\n        }\n        isVideoToolEnabled\n        isDocumentToolEnabled\n        isMeetingToolEnabled\n        isCommentingAnonymous\n        peerReviewSubmitterAnonymous\n        peerReviewType\n        peerReviewAmount\n        peerReviewGradeEnabled\n        peerReviewGradeWeight\n        peerReviewDueAt\n        studentFivestarValuationEnabled\n        rubric {\n            ...Rubric\n        }\n        groupReviewRubric {\n            ...Rubric\n        }\n        rubricPeerAllowed\n        rubricSelfAllowed\n        submittable\n        myData {\n            ...StudentGroupActivityStudentData\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return F=function(){return e},e}function V(){var e=W(["\n    fragment StudentRefreshGroupActivityStudentData on ActivityStudentData {\n        student {\n            ...StudentUser\n        }\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        educatorGrade {\n            ...StudentEducatorGrade\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        studentGroup {\n            ...StudentGroupWithProgress\n        }\n        result {\n            ...StudentGroupProjectResult\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return V=function(){return e},e}function G(){var e=W(["\n    fragment StudentGroupActivityStudentData on ActivityStudentData {\n        student {\n            ...StudentUser\n        }\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        educatorGrade {\n            ...StudentEducatorGrade\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        studentGroup {\n            ...StudentGroupWithProgress\n        }\n        result {\n            ...StudentGroupProjectResult\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return G=function(){return e},e}function U(){var e=W(["\n    fragment StudentGroupProjectResult on ActivityResultGroupProject {\n        activityStudentGroup {\n            dbId\n            name\n        }\n        submitter {\n            ...StudentUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        documents {\n            ...Document\n        }\n        links {\n            ...Link\n        }\n        deletable\n        isViewed {\n            value\n        }\n        comments {\n           ...Comment\n           ...AnonymousComment\n        }\n        myFiveStarRating {\n            value\n        }\n        myRubricEvaluation {\n            ...StudentReviewRubric\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return U=function(){return e},e}function q(){var e=W(["\n    fragment StudentGroupWithProgress on ActivityStudentGroupWithProgress {\n        dbId\n        name\n        members {\n            ...StudentActivityGroupMember\n        }\n        milestones {\n            dbId\n            description\n            assignedTo {\n                dbId\n                firstName\n                lastName\n            }\n            status\n            dueDate\n        }\n        comments {\n            dbId\n            text\n            isSystem\n            user {\n                dbId\n                firstName\n                lastName\n            }\n            createdAt\n        }\n        reviewReleasedAt\n        isReviewAnonymous\n    }\n    ","\n"]);return q=function(){return e},e}function W(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var B=a()(q(),l),Q=a()(U(),f.b,m.b,m.a,o.e,f.a,p.d,p.b,y.c),Y=a()(G(),Q,p.d,p.b,f.b,f.a,f.c,f.d,b.b,o.d,y.c,B,o.c),H=a()(V(),Q,f.b,f.a,f.c,f.d,y.c,B,b.b,o.c),z=a()(F(),p.d,o.d,Y,N.b),K=a()(x()),X=a()(M(),y.d),$=a()(L(),z,Q),Z=$,J=a()(D(),p.d,Q,o.d,H);n.d(t,"c",(function(){return A})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"i",(function(){return Q})),n.d(t,"g",(function(){return K})),n.d(t,"f",(function(){return X})),n.d(t,"d",(function(){return $})),n.d(t,"h",(function(){return Z})),n.d(t,"e",(function(){return J}))},"8For":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("4XMt"),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("8+7o");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){return f.a.pick(e,Object.keys(y.componentProps))}var y=function(e){var t=["font-icon"];e.tooltip&&t.push("font-icon-wrapped"),t.push(e.className);var n=e.ariaHidden;return e.ariaLabel||f.a.isBoolean(n)||(n=!0),a.a.createElement(s.v,m({},b(e),{className:l()(t),disabled:!e.enabled,"aria-hidden":n,"aria-label":e.ariaLabel,role:e.role}),e.children)};y.componentProps={className:i.a.string,iconClassName:i.a.string,primary:i.a.bool,secondary:i.a.bool,title:i.a.string},y.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},y.componentProps,{enabled:i.a.bool,ariaHidden:i.a.bool,ariaLabel:i.a.string,role:i.a.string,tooltip:i.a.any}),y.defaultProps={enabled:!0},t.a=Object(c.c)(y)},"8L3I":function(e,t,n){},"8Qij":function(e,t,n){e.exports=n.p+"static/media/rubrictemplate.54d4931f.csv"},"8bCP":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p}));var r=n("XH0y"),a=n.n(r),o=n("LvDl"),i=n.n(o),c=a.a.noConflict(),s="stickyLogLevels",u=i.a.keys(c.levels).map((function(e){return{label:e,value:c.levels[e]}}));function l(){return c.getLoggers()}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.levels.WARN,n=c.getLogger(e),r=t,a=f();return i.a.has(a,e)&&(r=a[e]),n.setLevel(r),n}function f(){var e=window.localStorage;if(e)try{return JSON.parse(e.getItem(s))||{}}catch(t){m.debug('Could not read "'+s+'" from localStorage.',t)}return{}}function p(e){window.localStorage.setItem(s,JSON.stringify(e))}u=i.a.sortBy(u,["value"]);var m=d("bongo-ui");t.b=m},"8eDJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={CAMERA_ONLY:"CAMERA_ONLY",CAMERA_AND_SCREENSHARE:"CAMERA_AND_SCREENSHARE"}},"8ewv":function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("C721");function c(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getRecorderSettings($mediaType: MediaType!, $activityDbId: Int, $qaQuestionDbId: Int, $questionDbId: Int) {\n        mediaRecorderSettings(mediaType: $mediaType, activityDbId: $activityDbId, qaQuestionDbId: $qaQuestionDbId, questionDbId: $questionDbId) {\n            token\n            webCamFileName\n            deskShareFileName\n            uploadUrl\n            finalizeUrl\n            minRecordLengthSeconds\n            maxRecordLengthSeconds\n            notificationParams\n            canShareDesktop\n        }\n    }\n"]);return c=function(){return e},e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getSettings",value:function(e){var t=e.mediaType,n=e.activityDbId,a=e.questionDbId;return r.a.query({query:l,variables:{mediaType:t,activityDbId:n,questionDbId:a},fetchPolicy:"network-only"}).then((function(e){var t=e.data.mediaRecorderSettings;return Promise.resolve(t)}))}},{key:"finalizeRecording",value:function(e){var t=e.finalizeUrl,n=e.filesize,r=e.filename,a=e.duration,o=e.token,c=e.notificationParams,s=e.slaveFilename,u=e.slaveFilesize,l=e.slaveDuration,d=e.webcamResult,f=new FormData;return f.append("filename",r),f.append("filesize",n),f.append("duration",a),f.append("encodedToMp4",0),f.append("audioOnly",0),f.append("webrtc",1),f.append("token",o),s&&u&&l&&(f.append("slaveFilename",s),f.append("slaveFilesize",u),f.append("slaveDuration",l)),d&&f.append("webcamResult",d),(c=JSON.parse(JSON.parse(c.replace(/'/g,'"')))).params.forEach((function(e){for(var t in e)e.hasOwnProperty(t)&&f.append(t,e[t])})),Object(i.a)({url:t,method:"POST",data:f})}}],(n=null)&&s(t.prototype,n),a&&s(t,a),e}();t.a=u;var l=o()(c())},"8uzE":function(e,t,n){e.exports=n.p+"static/media/rubricinstructions.8ab16844.pdf"},"92Bf":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n("lTCR"),a=n.n(r);function o(){var e=u(["\n    fragment LibraryMedia on Media {\n        ...MediaFull\n        title\n        createdAt\n        deletable\n        meetingDownloadUrl \n    }\n    ","\n"]);return o=function(){return e},e}function i(){var e=u(["\n    fragment MediaFull on Media {\n        dbId\n        allowExternalPlay\n        processingStatus\n        downloadUrl\n        externalPlayUrl\n        srcUrl\n        title\n        recordingAvailability\n        caption {\n            ...MediaCaption\n        }\n        transcript {\n            src\n            fileSizeBytes\n        }\n        slaveMedia {\n            dbId\n            allowExternalPlay\n            processingStatus\n            srcUrl\n            downloadUrl\n        }\n        meetingAssets {\n            svgUrl\n            cursorUrl\n            zoomsUrl\n            chatMessagesUrl\n            eventsUrl\n        }\n    }\n    ","\n"]);return i=function(){return e},e}function c(){var e=u(["\n    fragment MediaBasic on Media {\n        dbId\n        allowExternalPlay\n        externalPlayUrl\n        processingStatus\n        downloadUrl\n        srcUrl\n        title\n        caption {\n            ...MediaCaption\n        }\n        transcript {\n            src\n            fileSizeBytes\n        }\n    }\n    ","\n"]);return c=function(){return e},e}function s(){var e=u(["\n  fragment MediaCaption on Caption {\n    src\n    kind\n    label\n  }\n"]);return s=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=a()(s()),d=a()(c(),l),f=a()(i(),l),p=a()(o(),f)},"9N6j":function(e,t,n){},"9WWN":function(e,t,n){},"9XMF":function(e,t,n){},"9mqd":function(e,t,n){"use strict";var r=n("wNa6"),a=n("7cfX"),o=n.n(a),i=n("LvDl"),c=n.n(i),s=n("7n1V"),u=n("N90w"),l=n("BA0I"),d=n("UyA7"),f=n("HNnK"),p=n("6SRB"),m=n("h4t+"),b=n("IF/7"),y=n("8bCP"),v=n("hIiU");function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Object(y.c)("tracking"),w=["externalTrackingUuid","locale"],S=["externalTrackingUuid","name","name","integrationType"],O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){var e=this;if(!this.isTrackingServiceInitialized){E.debug("Initializing TrackingService...");var t=o()((function(){return Object(f.h)(r.a.getState())}));r.a.subscribe(t((function(){e.identifyUser()})));var n=o()((function(){return Object(d.b)(r.a.getState())}));r.a.subscribe(n((function(){e.aptrinsicApiKey=Object(d.a)(r.a.getState()),e.isAptrinsicEnabled=Boolean(e.aptrinsicApiKey),E.debug("EnvironmentConfig changed, Aptrinsic API key: "+e.aptrinsicApiKey),e.isAptrinsicEnabled&&(E.debug("Aptrinsic is enabled"),e.identifyUser())}))),this.isTrackingServiceInitialized=!0,E.debug("... initialized.")}}},{key:"initializeAptrinsic",value:function(){var e;this.isAptrinsicInitialized||(E.debug("Initializing Aptrinsic..."),e=this.aptrinsicApiKey,function(e,t,n,r,a){var o="aptrinsic";e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].p=r,e[o].c={iframeModeEnabled:!1};var i=t.createElement("script");i.async=!0,i.src="https://web-sdk.aptrinsic.com/api/aptrinsic.js?a="+r;var c=t.getElementsByTagName("script")[0];c.parentNode.insertBefore(i,c)}(window,document,0,e),this.isAptrinsicInitialized=!0,E.debug("... initialized."))}},{key:"sendMessage",value:function(){if(!this.isAptrinsicEnabled)return!1;try{var e;this.initializeAptrinsic();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E.debug.apply(E,["Sending aptrinsic message:"].concat(n)),(e=window).aptrinsic.apply(e,n),!0}catch(a){this.isAptrinsicEnabled=!1,E.warn("Error sending message to Aptrinsic...",a)}return!1}},{key:"createUserAttributes",value:function(e){var t=p.a.detectViewportDimensions();return{id:e.externalTrackingUuid,firstName:e.firstName,lastName:e.lastName,locale:e.locale,viewportSize:p.a.detectViewportSize(),viewportWidth:t.width,viewportHeight:t.height,viewportOrientation:p.a.detectViewportOrientation(),iframe:p.a.isPageInsideIframe(),userType:"EDUCATOR"}}},{key:"createInstitutionAttributes",value:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}({id:e.externalTrackingUuid,name:e.name,integrationType:this.getIntegrationTypes(e),allowedActivityTypes:this.getAllowedActivityTypes(e),allowedFeatures:this.getAllowedFeatures(e)},this.getTrialInfo(e),this.getEnvironmentInfo())}},{key:"getIntegrationTypes",value:function(e){var t=c.a.get(e,"integrationType",[]),n=[];return c.a.forEach(t,(function(e){var t=l.a[e];t&&n.push(t)})),c.a.join(n,",")}},{key:"getAllowedActivityTypes",value:function(e){var t=c.a.get(e,"featureToggles.allowedActivitiesTypes",[]),n=[];return c.a.forEach(t,(function(e){var t=s.a[e];t&&n.push(t)})),c.a.join(n,",")}},{key:"getAllowedFeatures",value:function(e){var t=c.a.get(e,"featureToggles",{}),n=[];return c.a.forEach(c.a.keys(u.a),(function(e){c.a.get(t,e,!1)&&n.push(u.a[e])})),c.a.join(n,",")}},{key:"getTrialInfo",value:function(e){try{return{isTrial:v.a.isTrial(e),trialExpirationDate:v.a.getTrialExpirationDate(e)}}catch(t){E.debug("Unable to getTrialInfo:",e,t)}return{}}},{key:"getEnvironmentInfo",value:function(){try{return{region:m.d()}}catch(e){E.debug("Unable to getEnvironmentInfo:",e)}return{}}},{key:"hasAttributes",value:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(!c.a.has(e,r))return!1;var a=c.a.get(e,r);if(null===a||void 0===a)return!1}return!0}},{key:"identifyUser",value:function(){try{if(this.isUserIdentified)return;var e=Object(f.h)(r.a.getState());if(!this.hasAttributes(e,w))return;var t=e.institution;if(!this.hasAttributes(t,S))return;if(b.b(e)||b.g(e)){var n=this.createUserAttributes(e),a=this.createInstitutionAttributes(t),o=this.sendMessage("identify",n,a);o&&(this.isUserIdentified=o)}}catch(i){E.debug("Unable to identify user",i)}}},{key:"pageView",value:function(e){try{if(!this.isUserIdentified)return;var t=Object(f.h)(r.a.getState());if(b.b(t)||b.g(t)){var n={path:e};this.sendMessage("pageView",n)}}catch(a){E.debug("Unable to manually trigger pageView",a)}}}])&&h(t.prototype,n),a&&h(t,a),e}();g(O,"isTrackingServiceInitialized",!1),g(O,"isAptrinsicInitialized",!1),g(O,"isAptrinsicEnabled",!1),g(O,"isUserIdentified",!1),g(O,"aptrinsicApiKey",null);t.a=new O},A2rd:function(e,t,n){},A2tp:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("UX+v"),c=n("h15y"),s=n("RMfM"),u=n("AEU+"),l=n("LvDl"),d=n.n(l),f=n("17x9"),p=n.n(f),m=n("v6po"),b=n("apGr"),y=n("K2Ti"),v=n("Wme0"),h=n("45tj");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=S(t).call(this,e),n=!a||"object"!==g(a)&&"function"!==typeof a?C(r):a,_(C(C(n)),"initEmitterListeners",(function(){var e=n.props.playerId;n.emitter=new y.a,n.unsubscribers=[n.emitter.onPlay(e,(function(e){var t=e.startTime;(e.startTime.toFixed(2)===n.tracker.mediaDuration.toFixed(2)||n.props.playerData.state.isEnded)&&(t=0),n.tracker.setPreviousTime(t),n.tracker.playStatement(t)})),n.emitter.onPause(e,(function(e){n.tracker.pauseStatement(e.startTime),n.tracker.watchStatement(e.startTime)})),n.emitter.onSeek(e,(function(e){var t=e.endTime;t.toFixed(1)===n.props.playerData.state.duration.toFixed(1)&&(t=n.props.playerData.state.duration),d.a.has(n.props,"playerData.state.isPlaying")&&n.props.playerData.state.isPlaying&&n.tracker.watchStatement(e.startTime),n.tracker.setPreviousTime(t),n.tracker.skipStatement(e.startTime,t)})),n.emitter.onComplete(e,(function(e){n.tracker.watchStatement(e.endTime),n.tracker.completeStatement(e.endTime)})),n.emitter.onDurationAvailable(e,(function(e){n.tracker.setMediaDuration(e.duration)}))]})),_(C(C(n)),"getCaptionsList",(function(){return n.playerComponent?n.playerComponent.getCaptionsList():[]})),_(C(C(n)),"onSeek",(function(e,t){})),e.logMediaWatching&&(n.tracker=new b.a({mediaId:e.mediaId,mediaSrc:e.options.sources[0].src,usageContext:e.usageContext,termClassId:e.termClassId,activityId:e.activityId}),n.initEmitterListeners()),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.unsubscribers&&this.unsubscribers.length&&this.unsubscribers.forEach((function(e){return e()}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.dispatch,n=e.playerId,r=e.options;t(s.o(n)),t(s.q(n,r))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId,a=e.playerId,o=e.options;r!==a&&(n(s.o(r)),n(s.q(a,o)))}},{key:"onPlay",value:function(){var e=this.props,t=e.dispatch,n=e.playerId,r=e.onPlay;r&&r(),t(s.s(n))}},{key:"onPause",value:function(){var e=this.props,t=e.dispatch,n=e.playerId;t(s.r(n))}},{key:"onTimeUpdate",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId,a=t.onTimeUpdate;n(s.B(r,e)),a&&a(e)}},{key:"onReady",value:function(){var e=this.props,t=e.dispatch,n=e.playerId;t(s.t(n)),this.props.options&&this.props.options.autoplay&&this.props.logMediaWatching&&this.emitter.play({playerId:this.props.playerId,startTime:0}),this.props.onReady()}},{key:"setDuration",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.w(r,e))}},{key:"setBufferedPercent",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.u(r,e))}},{key:"onEnded",value:function(){var e=this.props,t=e.dispatch,n=e.playerId,r=e.onEnded;t(s.p(n)),r&&r()}},{key:"setVolume",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.A(r,e))}},{key:"setFullScreen",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.x(r,e))}},{key:"setIsSeeking",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.y(r,e))}},{key:"setIsWaiting",value:function(e){var t=this.props,n=t.dispatch,r=t.playerId;n(s.z(r,e))}},{key:"render",value:function(){var e=this;if(d.a.isEmpty(this.props.playerData)||d.a.isEmpty(this.props.playerData.options.sources))return null;var t=this.props,n=t.playerData,r=t.forceControlsOnLayout,o=t.inFullScreenView,c=t.language;return a.a.createElement(i.b,E({id:this.props.id,language:c,options:n.options,marks:this.props.marks,showControlsBar:this.props.showControlsBar},n.state,{playerId:this.props.playerId,ref:function(t){t&&(e.playerComponent=t,e.props.onPlayerRef(t))},inFullScreenView:o,forceControlsOnLayout:r,onPlay:this.onPlay.bind(this),onPause:this.onPause.bind(this),setDuration:this.setDuration.bind(this),onTimeUpdate:this.onTimeUpdate.bind(this),onEnded:this.onEnded.bind(this),setVolume:this.setVolume.bind(this),setIsSeeking:this.setIsSeeking.bind(this),setFullScreen:this.setFullScreen.bind(this),setIsWaiting:this.setIsWaiting.bind(this),setBufferedPercent:this.setBufferedPercent.bind(this),onSeek:this.onSeek,onReady:this.onReady.bind(this)}))}}])&&w(n.prototype,r),o&&w(n,o),t}(r.Component);t.a=Object(o.b)((function(e,t){return{playerData:c.a(t.playerId,e),currentTime:c.c(t.playerId,e),language:h.d(v.a(e))[0]}}))(T),T.defaultProps={options:Object.assign({},u.a.options),onEnded:function(){},onPlay:function(){},onReady:function(){},playerData:Object.assign({},u.a),marks:[],forceControlsOnLayout:!1,inFullScreenView:!1,logMediaWatching:!0,showControlsBar:!0,onPlayerRef:function(){}},T.propTypes={options:i.c,onEnded:p.a.func,logMediaWatching:p.a.bool,onPlay:p.a.func,onTimeUpdate:p.a.func,onReady:p.a.func,playerData:p.a.shape({options:i.c,state:p.a.shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},i.d))}),id:p.a.string.isRequired,playerId:p.a.string.isRequired,marks:p.a.arrayOf(p.a.shape({timestamp:p.a.number})),termClassId:p.a.number,activityId:p.a.number,mediaId:p.a.number.isRequired,usageContext:p.a.oneOf([m.a.ACTIVITY_COMMENTARY,m.a.ACTIVITY_OVERVIEW,m.a.COMMENT,m.a.DIRECT_LIBRARY,m.a.FEEDBACK,m.a.INTERACTIVE_VIDEO,m.a.PROFILE,m.a.QA_QUESTION,m.a.STUDENT_RESULT,m.a.STUDENT_RESULT_PARTIAL]).isRequired,forceControlsOnLayout:p.a.bool,inFullScreenView:p.a.bool,showControlsBar:p.a.bool}},ADn3:function(e,t,n){e.exports={"palette--primary":"#2679c7","palette--primary-contrast":"#fff","palette--secondary":"#c92861","palette--secondary-contrast":"#fff","colors--page-loader-background":"palette[primary-contrast]","colors--page-loader-contrast":"palette[primary]","colors--page-overlay-background":"rgba(0,0,0,0.4)","colors--page-toolbar-background":"palette[primary]","colors--page-toolbar-contrast":"palette[primary-contrast]","colors--page-toolbar-button-background":"rgba(0,0,0,0)","colors--page-toolbar-button-contrast":"palette[primary-contrast]","colors--page-toolbar-button-disabled-background":"rgba(0,0,0,0)","colors--page-toolbar-button-disabled-contrast":"#9e9e9e","colors--page-background":"#f2f3f5","colors--page-contrast":"#485054","colors--page-h1":"#485054","colors--surface-background":"#fff","colors--surface-contrast":"#757575","colors--surface-h2":"#000","colors--surface-h3":"#000","colors--button-raised-base-background":"#fff","colors--button-raised-base-contrast":"#212121","colors--button-raised-primary-background":"palette[primary]","colors--button-raised-primary-contrast":"palette[primary-contrast]","colors--button-raised-secondary-background":"palette[secondary]","colors--button-raised-secondary-contrast":"palette[secondary-contrast]","colors--button-raised-disabled-background":"#e0e0e0","colors--button-raised-disabled-contrast":"#757575","colors--button-flat-base-background":"rgba(0,0,0,0)","colors--button-flat-base-contrast":"#595959","colors--button-flat-primary-background":"rgba(0,0,0,0)","colors--button-flat-primary-contrast":"palette[primary]","colors--button-flat-secondary-background":"rgba(0,0,0,0)","colors--button-flat-secondary-contrast":"palette[secondary]","colors--button-flat-disabled-background":"rgba(0,0,0,0)","colors--button-flat-disabled-contrast":"#9e9e9e","colors--selection-control-selected":"palette[secondary]","colors--selection-control-unselected":"#757575","colors--selection-control-disabled":"#9e9e9e","colors--status-error":"#d5122c","colors--status-info":"#2679c7","colors--status-success":"#6eac52","colors--status-unknown":"#485054","colors--status-warning":"#e87511","colors--status-restricted":"#485054","colors--status-completed":"#1d2515","colors--status-open":"#005e8a","colors--tooltip-background":"#333","colors--tooltip-contrast":"#fff","colors--tooltip-button-background":"rgba(0,0,0,0)","colors--tooltip-button-contrast":"#fff","colors--tooltip-button-disabled-background":"rgba(0,0,0,0)","colors--tooltip-button-disabled-contrast":"#9e9e9e","typography--page-font-family":"Roboto, sans-serif","typography--page-h1-font-size":"34px","typography--page-h1-font-weight":"normal","typography--page-h1-line-height":"40px","typography--surface-h2-font-size":"24px","typography--surface-h2-font-weight":"normal","typography--surface-h2-line-height":"32px","typography--surface-h3-font-size":"20px","typography--surface-h3-font-weight":"normal","typography--surface-h3-line-height":"28px"}},"AEU+":function(e,t,n){"use strict";var r=n("RMfM"),a=n("LvDl"),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={state:{isPlaying:!1,isPaused:!1,isIdle:!0,isEnded:!1,isReady:!1,isFullScreen:!1,isSeeking:!1,isWaiting:!1,time:0,duration:0,buffered:0,volume:1},options:{sources:[],tracks:[],transcriptUrl:null,autoplay:!1,controls:!0,aspectRatio:"4:3",preload:"auto"}};t.a=function(){var e,t,n,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;switch(u.type){case r.c:if(s[e=u.payload.playerId])return s;var l=o.a.merge({},c.options,u.payload.options);return t=o.a.merge({},c,{options:l}),o.a.merge({},s,i({},e,t));case r.a:return s[e=u.payload.playerId]?o.a.omit(s,e):s;case r.e:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isPlaying:!0,isPaused:!1,isIdle:!1,isEnded:!1}}),o.a.merge({},s,i({},e,t))):s;case r.d:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isPlaying:!1,isPaused:!0,isIdle:!1,isEnded:!1}}),o.a.merge({},s,i({},e,t))):s;case r.n:return(a=s[e=u.payload.playerId])?((n=a.state.isEnded)&&u.payload.time!==a.state.duration&&(n=!1),t=o.a.merge({},s[e],{state:{time:u.payload.time,isEnded:n}}),o.a.merge({},s,i({},e,t))):s;case r.f:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isReady:!0}}),o.a.merge({},s,i({},e,t))):s;case r.i:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{duration:u.payload.duration}}),o.a.merge({},s,i({},e,t))):s;case r.g:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{buffered:u.payload.buffered}}),o.a.merge({},s,i({},e,t))):s;case r.b:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isEnded:!0}}),o.a.merge({},s,i({},e,t))):s;case r.m:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{volume:u.payload.volume}}),o.a.merge({},s,i({},e,t))):s;case r.j:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isFullScreen:u.payload.isFullScreen}}),o.a.merge({},s,i({},e,t))):s;case r.k:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isSeeking:u.payload.isSeeking}}),o.a.merge({},s,i({},e,t))):s;case r.l:return s[e=u.payload.playerId]?(t=o.a.merge({},s[e],{state:{isWaiting:u.payload.isWaiting}}),o.a.merge({},s,i({},e,t))):s;case r.h:if(!s[e=u.payload.playerId])return;return t=o.a.merge({},s[e],{options:{controls:u.payload.controls}}),o.a.merge({},s,i({},e,t));default:return s}}},AVXr:function(e,t,n){},ArDN:function(e,t,n){"use strict";t.a={EDUCATOR_FORMED:"TYPE__EDUCATOR_FORMED",STUDENT_FORMED:"TYPE__STUDENT_FORMED",SYSTEM_FORMED:"TYPE__SYSTEM_FORMED",WHOLE_CLASS:"TYPE__WHOLE_CLASS"}},AuRu:function(e,t,n){"use strict";var r=n("lTCR"),a=n.n(r),o=n("O+79"),i=n("92Bf"),c=n("mxsA"),s=n("svEP"),u=n("09Br"),l=n("io3D"),d=n("/KNH");function f(){var e=v(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            termClass {\n                dbId\n            }\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            submitDueAt\n            type\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            qaSettings {\n                delay\n                isStartedImmediately\n                answerMinLength\n                answerMaxLength\n                isStudentRetakeAllowed\n                isRandomQuestionsModeEnabled\n                amountOfRandomQuestionsPerStudent\n                recordingMode\n            }\n            qaQuestionsAmount\n            rubricPeerAllowed\n            rubricSelfAllowed\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorQAActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return f=function(){return e},e}function p(){var e=v(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            commentaryText\n            commentaryMedia {\n                ...MediaFull\n            }\n            gradeType\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            rubricPeerAllowed\n            rubricSelfAllowed\n            ltiDeepLinking\n            ltiGradeIdentifier\n            ltiGradeSyncEnabled\n            cengageSettings {\n                countTowardsFinalGrade\n                score\n                locked\n                inPath\n            }\n            qaSettings {\n                delay\n                isStartedImmediately\n                answerMinLength\n                answerMaxLength\n                isStudentRetakeAllowed\n                isRandomQuestionsModeEnabled\n                amountOfRandomQuestionsPerStudent\n                recordingMode\n            }\n            qaQuestions{\n                dbId\n                media {\n                    ...MediaBasic\n                }\n                questionText\n                isUsed\n                orderNumber\n            }\n            isQaQuestionsLocked\n            dataForAllStudents {\n                student {\n                    dbId\n                }\n                result {\n                    submitter {\n                        roles\n                    }\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n                rubricEvaluations {\n                    user {\n                        ...GeneralUser\n                    }\n                    rubric {\n                        ...Rubric\n                    }\n                    points\n                }\n                reflectAnswers {\n                    ...ReflectionAnswersMinimal\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return p=function(){return e},e}function m(){var e=v(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            termClass {\n                dbId\n            }\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            submitDueAt\n            type\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            rubricPeerAllowed\n            rubricSelfAllowed\n            dataForAllStudents {\n                student {\n                    dbId\n                    firstName\n                    lastName\n                }\n                activity {\n                    dbId\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n                reflectAnswers {\n                    ...ReflectionAnswersMinimal\n                }\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorQAActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return m=function(){return e},e}function b(){var e=v(["\n    fragment EducatorQAActivityStudentData on ActivityStudentData {\n        student {\n            ...EducatorUser\n        }\n        educatorGrade {\n            ...EducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        qaSubmitRequestedAt\n        qaAnswers {\n            dbId\n            qaQuestion {\n                dbId\n            }\n            isWithdrawn\n            withdrawComment\n            isCrashed\n            startedAt\n            submitter {\n                ...EducatorUser\n            }\n            media {\n                ...MediaFull\n            }\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n        reviewedResults {\n            ...ReviewedResult\n        }\n        result {\n            ...EducatorQAProjectResult\n        }\n        isGradeDraftAllowed\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return b=function(){return e},e}function y(){var e=v(["\n    fragment EducatorQAProjectResult on ActivityResultQa {\n        submitter {\n            ...EducatorUser\n        }\n        submittedAt\n        requiredMedia: media {\n            ...MediaFull\n        }\n        deletable\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return y=function(){return e},e}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=a()(y(),i.d,o.b,o.a,c.b),g=a()(b(),s.a,i.d,h,c.b,u.c,l.b,d.a),E=a()(m(),u.d,l.c,s.a,l.a,g),w=a()(p(),c.d,i.d,s.a,i.b,u.d,l.a,l.c),S=a()(f(),i.d,u.d,l.c,g),O=n("x1nL");function C(){var e=R(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...QAActivity\n            qaQuestion {\n                dbId\n            }\n            availableResults {\n                ...StudentQAProjectResult\n            }\n            reviewedResults {\n                ...StudentQAProjectResult\n            }\n            myData {\n                ...StudentQAActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n"]);return C=function(){return e},e}function _(){var e=R(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...QAActivity\n            availableResults {\n                ...StudentQAProjectResult\n            }\n            reviewedResults {\n                ...StudentQAProjectResult\n            }\n            myData {\n                ...StudentQAActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n"]);return _=function(){return e},e}function T(){var e=R(["\n    fragment QAActivity on Activity {\n        dbId\n        name\n        lmsLocked\n        className\n        submitDueAt\n        type\n        allowViewOthersResultsWithoutOwn\n        termClass {\n            ...TermClassBasic\n        }\n        commentaryText\n        commentaryMedia {\n            ...MediaFull\n        }\n        availableResults {\n            ...StudentQAProjectResult\n        }\n        reviewedResults {\n            ...StudentQAProjectResult\n        }\n        gradeType\n        instructionsText\n        instructionsMedia {\n            ...MediaFull\n        }\n        peerReviewType\n        peerReviewAmount\n        peerReviewGradeEnabled\n        peerReviewGradeWeight\n        peerReviewDueAt\n        isCommentingAnonymous\n        peerReviewSubmitterAnonymous\n        studentFivestarValuationEnabled\n        rubricPeerAllowed\n        rubricSelfAllowed\n        rubric {\n            ...Rubric\n        }\n        reflectStageSettings {\n            ...ReflectionSettings\n        }\n        qaSettings {\n            delay\n            isStartedImmediately\n            answerMinLength\n            answerMaxLength\n            isStudentRetakeAllowed\n            isRandomQuestionsModeEnabled\n            amountOfRandomQuestionsPerStudent\n            recordingMode\n        }\n        qaQuestionsAmount\n        submittable\n        myData {\n            ...StudentQAActivityStudentData\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return T=function(){return e},e}function I(){var e=R(["\n    fragment StudentQAActivityStudentData on ActivityStudentData {\n        student {\n            ...StudentUser\n        }\n        educatorGrade {\n            ...StudentEducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        qaSubmitRequestedAt\n        qaAnswers {\n            dbId\n            qaQuestion {\n                dbId\n            }\n            isWithdrawn\n            withdrawComment\n            isCrashed\n            startedAt\n            media {\n                ...MediaFull\n            }\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n        result {\n            ...StudentQAProjectResult\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return I=function(){return e},e}function P(){var e=R(["\n    fragment StudentQAProjectResult on ActivityResultQa {\n        submitter {\n            ...StudentUser\n        }\n        submittedAt\n        requiredMedia: media {\n            ...MediaFull\n        }\n        isViewed {\n            value\n        }\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n        myFiveStarRating {\n            value\n        }\n        myRubricEvaluation {\n            ...StudentReviewRubric\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n        deletable\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return P=function(){return e},e}function R(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A=a()(P(),i.d,o.a,o.b,u.e,c.c),j=a()(I(),u.c,A,l.b,c.c,s.b),k=a()(T(),i.d,A,j,l.c,O.b),N=a()(_(),k,j),D=a()(C(),k,j);n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"f",(function(){return A})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return D}))},BA0I:function(e,t,n){"use strict";var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=(a(r={},"TYPE__STANDARD","STANDARD"),a(r,"TYPE__CENGAGE","CENGAGE"),a(r,"TYPE__D2L_PREMIUM","D2L_PREMIUM"),a(r,"TYPE__D2L_FREEMIUM","D2L_FREEMIUM"),a(r,"TYPE__TOPHAT","TOP_HAT"),a(r,"TYPE__KAPLAN","KAPLAN"),r),i={STANDARD:"TYPE__STANDARD",CENGAGE:"TYPE__CENGAGE",D2L_PREMIUM:"TYPE__D2L_PREMIUM",D2L_FREEMIUM:"TYPE__D2L_FREEMIUM",TOP_HAT:"TYPE__TOPHAT",KAPLAN:"TYPE__KAPLAN"};t.b=i},BJep:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("xrVw"),i=n("17x9"),c=n.n(i),s=n("LvDl"),u=n.n(s),l=n("TSYQ"),d=n.n(l);n("y54d");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return u.a.pick(e,Object.keys(b.componentProps))}var b=function(e){return a.a.createElement(o.y,p({},m(e),{className:d()("list",e.className)}),e.children)};b.componentProps={className:c.a.string,inline:c.a.bool,ordered:c.a.bool,onClick:c.a.func},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},b.passThroughProps),t.a=b},BKYJ:function(e,t,n){},BNXS:function(e,t,n){},BPUB:function(e,t,n){},BkCb:function(e,t,n){"use strict";var r=n("LvDl"),a=n.n(r),o=n("C721"),i=n("NlSD"),c=n("lTCR"),s=n.n(c),u=n("MOhp"),l=n("wNa6"),d=n("DozO");function f(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getFileUploaderSettings($mediaType: MediaType!, $activityDbId: Int, $questionDbId: Int){\n        fileUploaderSettings(mediaType: $mediaType, activityDbId: $activityDbId, questionDbId: $questionDbId) {\n            handleUploadUrl\n            processUploadUrl\n            token\n            uid\n            multiSelection\n            maxBatchedFiles\n            minFileSizeBytes\n            maxFileSizeMegabytes\n            allowedExtensions\n            requestParams\n        }\n    }\n"]);return f=function(){return e},e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"processFile",value:function(e){var t=e.processUploadUrl,n=e.fileName,r=e.uid,i=e.requestParams,c=e.fileId,s=new URLSearchParams;return s.append("filename",n),s.append("uid",r),a.a.keys(i).forEach((function(e){s.append("fileUploaderRequestParameters[".concat(e,"]"),i[e])})),l.a.dispatch(d.o(c,!1)),l.a.dispatch(d.n(c,!1)),o.a.post(t,s).then((function(e){if("success"!==e.data.status)return Promise.reject(e);var t=e.data.uploadedFileId;return l.a.dispatch(d.m(c,t)),l.a.dispatch(d.o(c,!0)),Promise.resolve(e)})).catch((function(e){return l.a.dispatch(d.n(c,!0)),Promise.reject(e)}))}},{key:"getCredentials",value:function(e,t,n){var r={mediaType:e};return t&&(r.activityDbId=t),n&&(r.questionDbId=n),l.a.dispatch(u.u(!1)),l.a.dispatch(u.v(!0)),i.a.query({query:b,variables:r}).then((function(e){var t=e.data.fileUploaderSettings;return l.a.dispatch(u.v(!1)),l.a.dispatch(u.o(t)),Promise.resolve(t)})).catch((function(e){return l.a.dispatch(u.u(!0)),l.a.dispatch(u.v(!1)),Promise.reject(e)}))}},{key:"reset",value:function(){l.a.dispatch(u.p()),l.a.dispatch(d.l())}}])&&p(t.prototype,n),r&&p(t,r),e}();t.a=new m;var b=s()(f())},BulX:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"b",(function(){return p}));var a=":activityId",o={STUDENT_ACTIVITY:"/student/activity/".concat(a),STUDENT_ACTIVITY_LIST:"/student/class/".concat(":classId","/activity-list"),STUDENT_MEETINGS_LIST:"/student/class/".concat(":classId","/meetings"),ONEDRIVE_PROXY:"/onedrive-proxy",EDUCATOR_CREATE_GROUP_ACTIVITY:"/educator/class/".concat(":classId","/activity/create/group"),EDUCATOR_CREATE_INDIVIDUAL_ACTIVITY:"/educator/class/".concat(":classId","/activity/create/individual"),EDUCATOR_CREATE_QA_ACTIVITY:"/educator/class/".concat(":classId","/activity/create/q-and-a"),EDUCATOR_LIBRARY:"/educator/class/".concat(":classId","/library"),EDUCATOR_ACTIVITY_GRADING:"/educator/activity/".concat(a,"/student/").concat(":studentId","/grade"),EDUCATOR_ACTIVITY_STUDENT_PROGRESS:"/educator/activity/".concat(a,"/student/").concat(":studentId","/progress"),EDUCATOR_ACTIVITY_SETTINGS:"/educator/activity/".concat(a,"/settings"),EDUCATOR_ACTIVITY_GROUP_FORMATION:"/educator/activity/".concat(a,"/groups"),EDUCATOR_GRADEBOOK:"/educator/activity/".concat(a,"/gradebook"),EDUCATOR_ACTIVITY_LIST:"/educator/class/".concat(":classId","/activity-list"),EDUCATOR_RUBRICS_LIST:"/educator/class/".concat(":classId","/rubrics"),EDUCATOR_RUBRIC_CREATE:"/educator/class/".concat(":classId","/rubric/create"),EDUCATOR_RUBRIC_EDIT:"/educator/class/".concat(":classId","/rubric/").concat(":rubricId","/edit"),EDUCATOR_RUBRIC_COPY:"/educator/class/".concat(":classId","/rubric/").concat(":rubricId","/copy"),EDUCATOR_RUBRIC_IMPORT:"/educator/class/".concat(":classId","/rubric/import"),EDUCATOR_MEETINGS:"/educator/class/".concat(":classId","/meetings"),STANDALONE_DOUBLE_PLAYER:"/standalone-double-player",STUDENT_STANDALONE_RECORDER:"/student/standalone-recorder",EDUCATOR_STANDALONE_RECORDER:"/educator/standalone-recorder",GROUP_FORMATION_NOT_IN_GROUP:"/student/activity/".concat(a,"/not-in-group")},i="/(educator|student)/class/".concat(":classId"),c="/educator/class/".concat(":classId"),s="/student/class/".concat(":classId"),u={STUDENT_RESOURCE_ERROR:"/student/class/".concat(":classId","/resource-error"),STUDENT_ACTIVITY:"/student/class/".concat(":classId","/assignments/").concat(a),STANDALONE_QA_RECORDER:"/student/class/".concat(":classId","/assignments/").concat(a,"/standalone-recorder"),STUDENT_ACTIVITY_LIST:"/student/class/".concat(":classId","/assignments"),GROUP_FORMATION_NOT_IN_GROUP:"/student/class/".concat(":classId","/assignments/").concat(a,"/not-in-group"),GROUP_FORMATION_SYSTEM:"/student/class/".concat(":classId","/assignment/").concat(a,"/system-form-groups"),STUDENT_MEETINGS_LIST:"/student/class/".concat(":classId","/meetings"),STUDENT_NOTIFICATIONS:"/student/class/".concat(":classId","/notifications"),STUDENT_HELP:"/student/class/".concat(":classId","/help"),STUDENT_SETTINGS:"/student/class/".concat(":classId","/settings"),STUDENT_MEETING_PREVIEW:"/student/class/".concat(":classId","/meeting-preview/").concat(":meetingId","/"),STUDENT_TRIAL:"/student/class/".concat(":classId","/trial")},l={EDUCATOR_STUDENT_ACTIVITY:"/educator/class/".concat(":classId","/assignments/").concat(a),EDUCATOR_ACTIVITY_CREATE:"/educator/class/".concat(":classId","/assignments/create/").concat(":activityType"),EDUCATOR_CREATE_GROUP_ACTIVITY:"/educator/class/".concat(":classId","/assignments/create/group"),EDUCATOR_CREATE_INDIVIDUAL_ACTIVITY:"/educator/class/".concat(":classId","/assignments/create/individual"),EDUCATOR_CREATE_QA_ACTIVITY:"/educator/class/".concat(":classId","/assignments/create/q-and-a"),EDUCATOR_CREATE_INTERACTIVE_VIDEO_ACTIVITY:"/educator/class/".concat(":classId","/assignments/create/interactive-video"),EDUCATOR_LIBRARY:"/educator/class/".concat(":classId","/library"),EDUCATOR_ACTIVITY_GRADING:"/educator/class/".concat(":classId","/assignments/").concat(a,"/grade/student/").concat(":studentId"),EDUCATOR_ACTIVITY_STUDENT_PROGRESS:"/educator/class/".concat(":classId","/assignments/").concat(a,"/progress/student/").concat(":studentId"),EDUCATOR_ACTIVITY_SETTINGS:"/educator/class/".concat(":classId","/assignments/").concat(a,"/settings"),EDUCATOR_ACTIVITY_GROUP_FORMATION:"/educator/class/".concat(":classId","/assignments/").concat(a,"/groups"),EDUCATOR_GRADEBOOK:"/educator/class/".concat(":classId","/assignments/").concat(a,"/grade/book"),EDUCATOR_ACTIVITY_LIST:"/educator/class/".concat(":classId","/assignments"),EDUCATOR_RUBRICS_LIST:"/educator/class/".concat(":classId","/rubrics"),EDUCATOR_RUBRIC_CREATE:"/educator/class/".concat(":classId","/rubrics/create"),EDUCATOR_RUBRIC_EDIT:"/educator/class/".concat(":classId","/rubrics/").concat(":rubricId","/edit"),EDUCATOR_RUBRIC_COPY:"/educator/class/".concat(":classId","/rubrics/").concat(":rubricId","/copy"),EDUCATOR_RUBRIC_IMPORT:"/educator/class/".concat(":classId","/rubrics/import"),EDUCATOR_MEETINGS:"/educator/class/".concat(":classId","/meetings"),EDUCATOR_NOTIFICATIONS:"/educator/class/".concat(":classId","/notifications"),EDUCATOR_HELP:"/educator/class/".concat(":classId","/help"),EDUCATOR_MEETING_PREVIEW:"/educator/class/".concat(":classId","/meeting-preview/").concat(":meetingId","/"),EDUCATOR_SETTINGS:"/educator/class/".concat(":classId","/settings"),EDUCATOR_TEMPLATE_SETTINGS:"/educator/class/".concat(":classId","/template-settings"),EDUCATOR_TRIAL:"/educator/class/".concat(":classId","/trial")},d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){r(e,t,n[t])}))}return e}({LAUNCH:"/launch",EDUCATOR_LAUNCH:"/educator/launch",STUDENT_LAUNCH:"/student/launch"},l,u,{ONEDRIVE_PROXY:"/onedrive-proxy",EXTERNAL_PLAYER:"/external-player/".concat(":mediaId","/").concat(":signature"),STANDALONE_DOUBLE_PLAYER:"/standalone-double-player",STUDENT_STANDALONE_RECORDER:"/student/standalone-recorder",EDUCATOR_STANDALONE_RECORDER:"/educator/standalone-recorder"}),f={EDUCATOR_ACTIVITY_EDIT:"/educator/activity/".concat(a,"/edit"),STUDENT_INCLASS_ACTIVITY:"/student/activity/".concat(a,"/inclassroom"),GRADEBOOK:" /educator/activity/".concat(a,"/gradebook")},p=[d.ONEDRIVE_PROXY,d.EXTERNAL_PLAYER,d.EXTERNAL_PLAYER+"/styled"]},C721:function(e,t,n){"use strict";var r=n("vDqi"),a=n.n(r);a.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.a=a.a},C8y4:function(e,t,n){},CG28:function(e,t,n){},CNUB:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("Y7ox"),c=n("kbsL"),s=(n("GIPs"),n("IF/7")),u=n("LvDl"),l=n.n(u),d=n("17x9"),f=n.n(d),p=n("wpyS"),m=n("MzIV"),b=n("Wqtl"),y=n("fpsG"),v=n("uaEo");function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return r=this,o=(e=E(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==h(o)&&"function"!==typeof o?S(r):o,O(S(S(n)),"getTableData",(function(){var e=n.props.rubricEvaluations;(e=l.a.merge([],e)).sort((function(e,t){var n=0,r=0;return s.b(e.user)&&(n=1),s.b(t.user)&&(r=1),r-n}));var t=e[0].rubric,r={rows:[]};e.forEach((function(e){e.user||(e.user={dbId:e.date,firstName:"Anonymous",lastName:"",roles:[y.a.STUDENT]});var n=s.f(e.user),a=s.b(e.user),o={completedBy:e.user,isEducator:a,isStudent:n,cells:e.cells,rubric:e.rubric,timestamp:e.date,totalPoints:e.points,totalPercent:(100*e.points/e.rubric.maxValue).toFixed(1)},i=[];t.rows.forEach((function(n,r){if(0!==r){var a={dbId:n.cells[0].dbId,description:n.cells[0].description,points:0};e.cells.map((function(e){var r=l.a.findIndex(n.cells,{dbId:e.dbId});if(-1!==r){var o=e.points;e.points||(o=t.rows[0].cells[r].points),a.points=o}return null})),i.push(a)}})),o.rubricDetails=i,r.rows.push(o)}));var a=r.rows.filter((function(e){return e.isEducator})),o=r.rows.filter((function(e){return e.isStudent}));return r.educatorsAverage=n.getAverageResults(a),r.peersAverage=n.getAverageResults(o),r})),O(S(S(n)),"showRubric",(function(e,t,n){i.a.showNextModal(a.a.createElement(p.a,{rubric:e,grade:t.map((function(e){return e.dbId})),mode:b.a.VIEW,rubricPoints:n,onCancel:i.a.showPreviousModal}))})),n}var n,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(r=[{key:"getAverageResults",value:function(e){e=l.a.merge([],e);var t=0,n=0,r=void 0;return e.forEach((function(e){t+=+e.totalPoints,n+=+e.totalPercent,r?e.rubricDetails.forEach((function(e,t){r[t].points+=e.points})):r=e.rubricDetails})),t=(t/e.length).toFixed(1),n=(n/e.length).toFixed(1),r&&(r=r.map((function(t){return t.points=(t.points/e.length).toFixed(1),t}))),{totalPoints:t,totalPercent:n,rubricDetails:r}}},{key:"render",value:function(){var e=this,t=this.getTableData(),n=t.rows[0].rubricDetails,r=this.props,i=r.i18n,c=r.isAnonymous;return a.a.createElement("div",{className:"c-rubric-evaluation-dialog"},a.a.createElement("table",{className:"c-rubric-evaluations-table",summary:i._("Summary Report")},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,a.a.createElement(o.Trans,{id:"Completed By"})),a.a.createElement("th",null,a.a.createElement(o.Trans,{id:"Role"})),a.a.createElement("th",null,a.a.createElement(o.Trans,{id:"Date"})),n.map((function(e){return a.a.createElement("th",{key:e.dbId},e.description)})),a.a.createElement("th",null,a.a.createElement(o.Trans,{id:"Total Points"})),a.a.createElement("th",null,a.a.createElement(o.Trans,{id:"Percentage"})))),a.a.createElement("tbody",null,t.rows.map((function(t){var n="-";return t.isStudent&&(n="student"),t.isEducator&&(n="educator"),a.a.createElement("tr",{key:t.completedBy.dbId,title:i._("Show Rubric"),className:"c-rubric-evaluations-table__evaluation-row",onClick:e.showRubric.bind(null,t.rubric,t.cells,t.totalPoints)},a.a.createElement("td",null,l.a.isBoolean(c)?Object(v.e)(t,c,i):Object(v.d)(t,i)),a.a.createElement("td",null,n),a.a.createElement("td",null,a.a.createElement(m.a,{unixTime:t.timestamp})),t.rubricDetails.map((function(e){return a.a.createElement("td",{key:e.dbId},e.points)})),a.a.createElement("td",null,t.totalPoints),a.a.createElement("td",null,t.totalPercent+"%"))})),t.educatorsAverage.rubricDetails&&a.a.createElement("tr",{className:"c-rubric-evaluations-table__average-row"},a.a.createElement("td",{colSpan:3,className:"c-rubric-evaluations-table__average-cell"},a.a.createElement("b",null,a.a.createElement(o.Trans,{id:"Educator Average"}))),t.educatorsAverage.rubricDetails.map((function(e){return a.a.createElement("td",{key:e.dbId},a.a.createElement("b",null,e.points))})),a.a.createElement("td",null,a.a.createElement("b",null,t.educatorsAverage.totalPoints)),a.a.createElement("td",null,a.a.createElement("b",null,t.educatorsAverage.totalPercent+"%"))),t.peersAverage.rubricDetails&&a.a.createElement("tr",{className:"c-rubric-evaluations-table__average-row"},a.a.createElement("td",{colSpan:3,className:"c-rubric-evaluations-table__average-cell"},a.a.createElement("b",null,a.a.createElement(o.Trans,{id:"Peer Average"}))),t.peersAverage.rubricDetails&&t.peersAverage.rubricDetails.map((function(e){return a.a.createElement("td",{key:e.dbId},a.a.createElement("b",null,e.points))})),a.a.createElement("td",null,a.a.createElement("b",null,t.peersAverage.totalPoints)),a.a.createElement("td",null,a.a.createElement("b",null,t.peersAverage.totalPercent+"%"))))))}}])&&g(n.prototype,r),c&&g(n,c),t}(r.Component);C.propTypes={rubricEvaluations:f.a.arrayOf(f.a.object),isAnonymous:f.a.any};var _=Object(o.withI18n)()(C),T=n("YSsg");function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,A(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n,t=[];return t.push(a.a.createElement(c.a,{id:"button-rurbic-evaluations-dialog-close",secondary:!0,ariaLabel:e._("Close"),onClick:i.a.closeModal},a.a.createElement(o.Trans,{id:"Close"}))),a.a.createElement(T.a,{actions:t,dialogClassName:"c-rubric-evaluation-dialog",id:"rubric-evaluation-dialog",title:this.props.title||e._("My Rubric Evaluations"),modal:!0,visible:!0},a.a.createElement(_,{rubricEvaluations:this.props.rubricEvaluations,isAnonymous:this.props.isAnonymous}))}}])&&P(n.prototype,r),s&&P(n,s),t}(r.Component);k.propTypes={title:f.a.string,rubricEvaluations:f.a.arrayOf(f.a.object),isAnonymous:f.a.any};t.a=Object(o.withI18n)()(k)},CPhW:function(e,t,n){},ChKr:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("wNa6"),i=n("LvDl"),c=n.n(i),s=n("838P"),u=n("Yo20"),l=n("17x9"),d=n.n(l),f=n("TSYQ"),p=n.n(f),m=n("giI2"),b=n("LFYD"),y=(n("N+US"),{ERROR:s.toast.TYPE.ERROR,SUCCESS:s.toast.TYPE.SUCCESS,ANNOUNCEMENT:"NOTIFICATION_TYPE_ANNOUNCEMENT"}),v=function(e){var t=b.a.INFO_OUTLINE,n=["notification-item-indicator"];switch(e.type){case y.ERROR:t=b.a.CANCEL,n.push("notification-item-indicator--error");break;case y.SUCCESS:t=b.a.CHECK_CIRCLE,n.push("notification-item-indicator--success");break;case y.ANNOUNCEMENT:t=b.a.ANNOUNCEMENT,n.push("notification-item-indicator--announcement")}return a.a.createElement("div",{className:"notification-item-container"},a.a.createElement("div",{className:p()(n)},a.a.createElement(m.a,{className:"notification-item-icon"},t)),a.a.createElement("div",{className:"notification-item-content"},e.children))};v.componentProps={type:d.a.oneOf(Object.keys(y.ERROR,y.SUCCESS))};var h=v,g=n("ZD0w"),E={CREATE_ACTIVITY_SUCCESS:Object(g.i18nMark)("Assignment was successfully created:"),EDIT_ACTIVITY_SUCCESS:Object(g.i18nMark)("Assignment was successfully saved:"),DELETE_ACTIVITY_SUCCESS:Object(g.i18nMark)("Assignment was successfully deleted:"),DELETE_ACTIVITY_FAILED:Object(g.i18nMark)("Unable to delete assignment:")},w=function(e){var t=e.i18n,n=e.className,r=e.messageType,o=e.children;return a.a.createElement("div",{className:p()("notification-content",n)},r?a.a.createElement("div",null,t._(r)):null,o)};w.defaultProps={},w.componentProps={className:d.a.string,messageType:d.a.oneOf(Object.keys(E))};var S=Object(g.withI18n)()(w),O=n("G4qV"),C=n("upk1"),_=Object(O.a)(C.a,(function(e){return e.notification})),T=Object(O.a)(_,(function(e){return e.items})),I=n("8bCP");function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getCreatedAssignmentNotificationContent",value:function(e){return this.getAssignmentNotificationContent(E.CREATE_ACTIVITY_SUCCESS,e)}},{key:"getEditedAssignmentNotificationContent",value:function(e){return this.getAssignmentNotificationContent(E.EDIT_ACTIVITY_SUCCESS,e)}},{key:"getDeletedAssignmentNotificationContent",value:function(e){return this.getAssignmentNotificationContent(E.DELETE_ACTIVITY_SUCCESS,e)}},{key:"getDeletedAssignmentFailedNotificationContent",value:function(e){return this.getAssignmentNotificationContent(E.DELETE_ACTIVITY_FAILED,e)}},{key:"getAssignmentNotificationContent",value:function(e,t){return a.a.createElement(S,{messageType:e},a.a.createElement("div",{style:{fontWeight:"bold"}},t))}},{key:"removeInactive",value:function(){var e=P({},T(o.a.getState())),t=[];return c.a.forOwn(e,(function(e,n){n&&!s.toast.isActive(n)&&t.push(n)})),o.a.dispatch(u.f(t))}},{key:"add",value:function(e,t,n,r){var i=this,c=arguments,l=a.a.createElement(h,{type:e},t),d=Object(s.toast)(l,P({},n,{autoClose:!1,onClose:function(){i.removeInactive(),n.onClose&&n.onClose(c)}}));if(e===this.TYPES.SUCCESS){var f=5e3;n&&n.hasOwnProperty("autoClose")&&(f=n.autoClose),f&&setTimeout(this.remove,f,d)}if(r)try{r(d)}catch(p){I.b.debug(p)}return o.a.dispatch(u.e(d,e))}},{key:"addError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.add(this.TYPES.ERROR,e,t,n)}},{key:"addSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.add(this.TYPES.SUCCESS,e,t,n)}},{key:"addAnnouncement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.add(this.TYPES.ANNOUNCEMENT,e,P({position:s.toast.POSITION.TOP_CENTER},t),n)}},{key:"update",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(s.toast.isActive(e)){var i={render:a.a.createElement(h,{type:t},n)};Object.assign(i,r);var c=s.toast.update(e,i);return o.a.dispatch(u.h(c,t))}}},{key:"remove",value:function(e){if(s.toast.isActive(e))return s.toast.dismiss(e),o.a.dispatch(u.f([e]))}},{key:"removeAllOfType",value:function(e){var t=P({},T(o.a.getState())),n=[];return c.a.forOwn(t,(function(t,r){t&&t.type===e&&(s.toast.dismiss(r),n.push(r))})),o.a.dispatch(u.f(n))}},{key:"removeAll",value:function(){return s.toast.dismiss(),o.a.dispatch(u.g())}}],(n=null)&&R(t.prototype,n),r&&R(t,r),e}();A(j,"TYPES",y);t.a=j},CmP4:function(e,t,n){},CvxL:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("9C/b"),i=n("/MKj"),c=n("d98y"),s=n("yG+V"),u=n("PJr8"),l=n("Wtf/"),d=n("xyD6"),f=n("2bAp"),p=n("1zCZ"),m=n("7n1V"),b=n("ppB1"),y=n("ZD0w"),v=(n("zAaz"),n("IF/7")),h=n("CNUB"),g=n("Y7ox"),E=n("TSYQ"),w=n.n(E),S=n("KTZk"),O=n("LvDl"),C=n.n(O);function _(e){return(_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=I(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==_(o)&&"function"!==typeof o?R(r):o,A(R(R(n)),"isEducatorGradeEmpty",(function(){var e=n.props,t=e.educatorGrade,r=e.gradeType,a=e.rubricEvaluations;if(!t)return!0;if(r===p.a.RUBRIC&&!(a&&a.length>0))return!0;for(var o=C.a.pick(t,["completion","fiveStarValue","gradeValue","passFail","rubricGrade"]),i=C.a.values(o),c=0;c<i.length;c++){if(null!==i[c])return!1}return!0})),A(R(R(n)),"getGradeResult",(function(e,t,r,o){var i=n.props,c=i.i18n,l=i.activityType,d=i.interactiveVideoQuestions,f=i.isPeerReviewGradingEnabled,h=i.peerReviewGradePart,g=i.peerReviewGradeWeight,E=n.getNoGradeLabel();if(n.isEducatorGradeEmpty())return E;if(l===m.b.INTERACTIVE_VIDEO){for(var S=!1,O=!1,C=0;d&&C<d.length;C++){var _=d[C];_&&_.__typename&&(_.__typename===b.o?O=!0:_.__typename===b.n&&(S=!0))}if(S&&O){if(null===e.overallValue)return E;var T=e.overallValue;return c._("{percentage}%",{percentage:T})}}var I=null;switch(t){case p.a.COMPLETION:I=e.completion?a.a.createElement(y.Trans,{id:"Pass"}):a.a.createElement(y.Trans,{id:"Fail"});break;case p.a.FIVESTAR:I=a.a.createElement(s.a,{name:"fivestar-rating",value:+e.fiveStarValue,enabled:!1});break;case p.a.GRADE:I=e.gradeValue+"%";break;case p.a.PASS_FAIL:I=e.passFail?a.a.createElement(y.Trans,{id:"Pass"}):a.a.createElement(y.Trans,{id:"Fail"});break;case p.a.RUBRIC:o=o.filter((function(e){return v.b(e.user)})),I=a.a.createElement("a",{onClick:function(){return n.showRubricReport(o)}},a.a.createElement(u.c,{points:e.rubricGrade,max:r.maxValue}));break;default:I=n.getGradeTypeErrorLabel()+t}if(f){var P=100-g,R=h.partValue,A=e.overallValue,j="grade-composite";return a.a.createElement("div",{className:j+"-container"},a.a.createElement("div",{className:j+"-row"},a.a.createElement("div",{className:j+"-label"},a.a.createElement("h4",null,n.getSubmissionGradeLabel())),a.a.createElement("div",{className:j+"-value"},I,a.a.createElement("div",{className:j+"-value-footer"},c._("(Weight: {mainGradeWeight}%)",{mainGradeWeight:P})))),a.a.createElement("div",{className:j+"-row"},a.a.createElement("div",{className:j+"-label"},a.a.createElement("h4",null,n.getPeerReviewGradeLabel())),a.a.createElement("div",{className:j+"-value"},c._("{peerReviewGradeValue}%",{peerReviewGradeValue:R}),a.a.createElement("div",{className:j+"-value-footer"},c._("(Weight: {peerReviewGradeWeight}%)",{peerReviewGradeWeight:g})))),a.a.createElement("div",{className:w()(j+"-row",j+"-row-separator")}),a.a.createElement("div",{className:w()(j+"-row",j+"-row-overall")},a.a.createElement("div",{className:j+"-label"},a.a.createElement("h3",null,n.getOverallGradeLabel())),a.a.createElement("div",{className:j+"-value"},c._("{overallGradeValue}%",{overallGradeValue:A}))))}return I})),A(R(R(n)),"showRubricReport",(function(e){var t=n.props.i18n;g.a.showModal(a.a.createElement(h.a,{title:t._("Grades"),rubricEvaluations:e}))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"getSubmissionGradeLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("Submission Score:"):e._("Submission Grade:")}},{key:"getPeerReviewGradeLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("Peer Review Score:"):e._("Peer Review Grade:")}},{key:"getOverallGradeLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("Overall Score:"):e._("Overall Grade:")}},{key:"getNoGradeLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("No Score"):e._("No Grade")}},{key:"getGradeTypeErrorLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("ERROR: score type"):e._("ERROR: grade type")}},{key:"getGradeLabel",value:function(){var e=this.props.i18n;return Object(S.a)()?e._("Score"):e._("Grade")}},{key:"render",value:function(){var e=this.props,t=e.educatorGrade,n=e.gradeType,r=e.rubric,o=e.rubricEvaluations,i=this.getGradeResult(t,n,r,o);return a.a.createElement(c.a,{title:this.getGradeLabel(),iconClassName:f.a.GRADE,className:"dashboard-card-grade",contentsClassName:"dashboard-card-grade-contents"},a.a.createElement("div",{className:"dashboard-contents"},i))}}])&&T(n.prototype,r),o&&T(n,o),t}(r.Component),k=Object(y.withI18n)()(Object(o.a)(Object(i.b)((function(e){return{activityType:l.getActivityType(e),educatorGrade:l.getEducatorGrade(e),gradeType:l.getGradeType(e),interactiveVideoQuestions:d.a(e),isPeerReviewGradingEnabled:l.isPeerReviewGradingEnabled(e),peerReviewGradePart:l.getPeerReviewGradePart(e),peerReviewGradeWeight:l.getGradedPeerReviewWeight(e),rubric:l.getRubric(e),rubricEvaluations:l.getOthersRubricEvaluations(e)}}))(j)));n.d(t,"a",(function(){return k}))},Cztr:function(e,t,n){},"DQM/":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a="video/webm",o="recording",i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaStream=t,this._allChunks=[],this._chunksQueue=[],this._currentChunkNumber=-1,this._init()}var t,n,i;return t=e,(n=[{key:"_init",value:function(){var e=this;if(!window.MediaRecorder)throw new Error("MediaRecorder is not supported in this browser");this.chunkRecorder=new MediaRecorder(this.mediaStream,{mimeType:a}),this.chunkRecorder.ondataavailable=function(t){0!==t.data.size&&e._onChunkAvailable(t.data)},this.chunkRecorder.onstop=function(){e._onChunkAvailable(null,!0),"function"===typeof e.onStopHandler&&e.onStopHandler(),"function"===typeof e.__lastChunkCallback&&e.__lastChunkCallback()}}},{key:"_onChunkAvailable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this._chunksQueue.push(e),this._getQueueSize()>5242880||t){var n=this._buildChunkFromQueue();this._allChunks.push(n),this._currentChunkNumber++,"function"===typeof this.onChunkHandler&&this.onChunkHandler({blob:n,index:this._currentChunkNumber})}}},{key:"_getQueueSize",value:function(){var e=0;return this._chunksQueue.map((function(t){e+=t.size})),e}},{key:"_buildChunkFromQueue",value:function(){var e=new Blob(this._chunksQueue,{type:a});return this._chunksQueue=[],e}},{key:"startCapturing",value:function(){this.chunkRecorder.state!==o&&(this.__startTimeMilliseconds=(new Date).getTime(),this.chunkRecorder.start(1e3))}},{key:"stopCapturing",value:function(){var e=this;return this.capturingIsStopped?Promise.resolve():new Promise((function(t){e.chunkRecorder.state===o&&(e.__endTimeMilliseconds=(new Date).getTime(),e.__lastChunkCallback=t,e.capturingIsStopped=!0,e.chunkRecorder.requestData&&e.chunkRecorder.requestData(),e.chunkRecorder.stop())}))}},{key:"getRecordingLengthMilliseconds",value:function(){return this.__endTimeMilliseconds-this.__startTimeMilliseconds}},{key:"getAllChunks",value:function(){return this._allChunks}},{key:"onChunk",value:function(e){this.onChunkHandler=e}},{key:"onStop",value:function(e){this.onStopHandler=e}}])&&r(t.prototype,n),i&&r(t,i),e}()},DbOS:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("wNa6"),a=n("UyA7"),o=function(){return e="d2l-activity-add",window.location.search.includes("lti-scope="+e);var e},i=function(e){if(!e)return e;var t=a.j(r.a.getState()),n=document.createElement("a");n.href=e;var o=n.search&&n.search.includes("lti-scope=");return!t||o?e:"".concat(e,"?lti-scope=").concat(t)}},Dl6w:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var r={label:"Default (Bongo)",value:"theme-bongo"},a={label:"White",value:"theme-white"},o=[r,a]},DozO:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"o",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return h})),n.d(t,"q",(function(){return g})),n.d(t,"s",(function(){return w})),n.d(t,"u",(function(){return S})),n.d(t,"v",(function(){return O})),n.d(t,"t",(function(){return C})),n.d(t,"z",(function(){return _})),n.d(t,"A",(function(){return T})),n.d(t,"y",(function(){return I})),n.d(t,"x",(function(){return P})),n.d(t,"w",(function(){return R})),n.d(t,"r",(function(){return A}));var r="[File uploader] Add file",a="[File uploader] Reset",o="[File uploader] Remove file",i="[File uploader] Set file status",c="[File uploader] Set file uploading percent",s="[File uploader] Set file is processed",u="[File uploader] Set file has error",l="[File uploader] Set file db id",d="[File uploader] Set prop",f=function(e){return{type:r,payload:e}},p=function(){return{type:a}},m=function(e){return{type:o,payload:e}},b=function(e,t){return{type:i,payload:{fileId:e,status:t}}},y=function(e,t){return{type:s,payload:{fileId:e,isProcessed:t}}},v=function(e,t){return{type:u,payload:{fileId:e,hasError:t}}},h=function(e,t){return{type:l,payload:{fileId:e,dbId:t}}},g=function(e,t){return{type:c,payload:{fileId:e,uploadingPercent:t}}},E=function(e,t){return{type:d,payload:{prop:e,value:t}}},w=function(e){return E("isInitialState",e)},S=function(e){return E("isUploadReadyState",e)},O=function(e){return E("isUploadingState",e)},C=function(e){return E("isPausedState",e)},_=function(e){return E("uploadedFilesCount",e)},T=function(e){return E("uploadedPercent",e)},I=function(e){return E("uploadSpeedBps",e)},P=function(e){return E("secondsLeft",e)},R=function(e){return E("minutesLeft",e)},A=function(e){return E("hoursLeft",e)}},EISf:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=(n("+3pQ"),n("TbpH"),n("LFYD")),s=n("8For"),u=n("q8N1"),l=n("ZD0w");function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isPlaying,r=e.play,o=e.pause,i=t._("Play Video"),l=r,d=c.a.PLAY_ARROW;return n&&(i=t._("Pause Video"),l=o,d=c.a.PAUSE),a.a.createElement("div",{className:"c-player__play-button",onClick:l,onKeyDown:Object(u.b)(l),role:"button","aria-label":i,tabIndex:0},a.a.createElement("span",null,a.a.createElement(s.a,{className:"c-player__play-button-icon"},d)))}}])&&f(n.prototype,r),o&&f(n,o),t}(r.Component),v=Object(l.withI18n)()(y),h=n("LMP5"),g=(n("oRYB"),n("TSYQ")),E=n.n(g);function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n,r,o=this.props,i=o.vertical,c=o.onThumbRef,s=o.onStripRef,u=o.progressPercent,l=o.min,d=o.max,f=o.value,p=o.onStripMouseMove,m=o.onStripMouseLeave,b=o.mainTooltipValue,y=o.onStripClick,v=o.hoverPercent,h=o.seekTooltipValue,g=o.withTooltips,w=o.markers,O=o.showSeekTooltip,C=o.onThumbKeyDown;return i?(e={height:u+"%"},t={bottom:u+"%"},n={bottom:u+"%"},r={bottom:v+"%"}):(e={width:u+"%"},t={left:u+"%"},n={left:u+"%"},r={left:v+"%"}),a.a.createElement("div",{className:E()("c-slider",S({},"c-slider--vertical",i)),onMouseMove:p,onMouseLeave:m,onClick:y},a.a.createElement("div",{className:E()("c-slider__strip","c-slider__strip--background"),ref:s}),a.a.createElement("div",{className:E()("c-slider__strip","c-slider__strip--progress"),style:e}),a.a.createElement("div",{className:"c-slider__markers"},w.map((function(e){var t,n=e.label,r=e.className,o=e.value,c=e.percent;return t=i?{bottom:c+"%"}:{left:c+"%"},a.a.createElement("div",{key:n+r+o,className:E()("c-slider__marker",r),style:t},n)}))),a.a.createElement("div",{className:"c-slider__thumb",onDragStart:function(e){return e.preventDefault()},ref:c,onKeyDown:C,style:t,role:"slider",tabIndex:0,"aria-valuemin":l,"aria-valuemax":d,"aria-valuenow":f,"aria-disabled":"false"}),g&&a.a.createElement("div",{className:"c-slider__tooltip",style:n},b),g&&O&&a.a.createElement("div",{className:"c-slider__tooltip",style:r},h))}}])&&O(n.prototype,r),o&&O(n,o),t}(r.Component),P=n("LvDl"),R=n.n(P);function A(e){return(A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=100,x=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=k(t).call(this,e),n=!a||"object"!==A(a)&&"function"!==typeof a?D(r):a,L(D(D(n)),"state",{tempProgressPercent:0,tempProgressEnabled:!1,hoverPercent:0,showTooltips:!1}),L(D(D(n)),"onThumbRef",(function(e){e&&(n.thumbElement=e,e.addEventListener("mousedown",(function(){var e=function(e){var t=n.getCursorPercent(e);n.setState({tempProgressEnabled:!0,tempProgressPercent:t})};document.addEventListener("mouseup",(function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e);var r=n.state.hoverPercent||n.state.tempProgressPercent;n.onChangeHandler(r*n.props.max/100),n.setState({tempProgressEnabled:!1,tempProgressPercent:0})})),document.addEventListener("mousemove",e)})))})),L(D(D(n)),"onStripRef",(function(e){e&&(n.stripElement=e)})),L(D(D(n)),"onStripMouseMove",(function(e){var t=n.getCursorPercent(e);n.setState({hoverPercent:t,showTooltips:n.props.withTooltips})})),L(D(D(n)),"onStripMouseLeave",(function(){n.setState({hoverPercent:0,showTooltips:!1})})),L(D(D(n)),"onStripClick",(function(){n.onChangeHandler(n.state.hoverPercent*n.props.max/100)})),L(D(D(n)),"getMainTooltipValue",(function(){var e=n.state,t=e.tempProgressPercent,r=e.tempProgressEnabled,a=n.props,o=a.max,i=a.value;return r?n.props.tipFormatter(t/100*o):n.props.tipFormatter(i)})),L(D(D(n)),"getSeekTooltipValue",(function(){var e=n.state.hoverPercent,t=n.props.max;return n.props.tipFormatter(e/100*t)})),L(D(D(n)),"onThumbKeyDown",(function(e){var t=n.props,r=t.value,a=t.step,o=t.min,i=t.max,c=e.keyCode;[u.a.ARROW_LEFT,u.a.ARROW_RIGHT,u.a.ARROW_UP,u.a.ARROW_DOWN,u.a.PLUS,u.a.MINUS].includes(c)&&(e.preventDefault(),[u.a.ARROW_LEFT,u.a.ARROW_DOWN,u.a.MINUS].includes(c)&&(r-=a),[u.a.ARROW_RIGHT,u.a.ARROW_UP,u.a.PLUS].includes(c)&&(r+=a),r<o&&(r=o),r>i&&(r=i),n.onChangeHandler(r))})),n.onChangeHandler=R.a.throttle((function(e){n.props.onChange(e)}),M,{trailing:!1}),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"getPercentsPerStep",value:function(){var e=this.props,t=e.min,n=e.max;return(n-t)/n*100/((n-t)/e.step)}},{key:"getProgressPercent",value:function(){var e=this.state,t=e.tempProgressPercent,n=e.tempProgressEnabled,r=this.props,a=r.value,o=r.max;if(n)return t;var i=this.getPercentsPerStep(),c=a/o*100;return c>100&&(c=100),c<0&&(c=0),0!==c&&100!==c&&(c=Math.floor(c/i)*i),c}},{key:"getCursorPercent",value:function(e){var t,n,r=this.props.vertical,a=this.stripElement.getBoundingClientRect(),o=this.getPercentsPerStep();return(t=r?a.top+a.height-e.clientY:e.clientX-a.left)<0&&(t=0),(n=0===t?0:r?100*t/a.height:100*t/a.width)>100&&(n=100),100!==n&&n%o!==0&&(n=Math.floor(n/o)*o),n}},{key:"getMarkers",value:function(){var e=this.props,t=e.markers,n=e.max;return(t=t.filter((function(e){return R.a.isNumber(e.value)}))).map((function(e){var t={};t.value=e.value;var r=100*e.value/n;return r<0&&(r=0),r>100&&(r=100),t.percent=r,t.label=R.a.isUndefined(e.label)?"":e.label,t.className=e.className,t}))}},{key:"render",value:function(){var e=this.props,t=e.vertical,n=e.min,r=e.max,o=e.value,i=e.withTooltips;return a.a.createElement(I,{vertical:t,onThumbRef:this.onThumbRef,onStripRef:this.onStripRef,onThumbKeyDown:this.onThumbKeyDown,progressPercent:this.getProgressPercent(),hoverPercent:this.state.hoverPercent,showSeekTooltip:!this.state.tempProgressEnabled,onStripMouseMove:this.onStripMouseMove,onStripMouseLeave:this.onStripMouseLeave,mainTooltipValue:this.getMainTooltipValue(),seekTooltipValue:this.getSeekTooltipValue(),onStripClick:this.onStripClick,withTooltips:i,markers:this.getMarkers(),min:n,max:r,value:o})}}])&&j(n.prototype,r),o&&j(n,o),t}(r.Component);x.defaultProps={onChange:function(){},tipFormatter:function(e){return e},markers:[]},x.propTypes={vertical:i.a.bool,min:i.a.number,max:i.a.number,value:i.a.number,step:i.a.number,onChange:i.a.func,tipFormatter:i.a.func,withTooltips:i.a.bool,markers:i.a.arrayOf(i.a.shape({value:i.a.number.isRequired,label:i.a.oneOfType([i.a.string,i.a.number]),className:i.a.string}))};n("jI2F");function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=G(this,U(t).call(this,e))).state={pixelDuration:1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.calculatePixelDuration(),this.pixelDurationInterval=setInterval(this.calculatePixelDuration.bind(this),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.pixelDurationInterval)}},{key:"calculatePixelDuration",value:function(){var e=this.props.duration;if(e&&this.containerElem){var t=e/(this.containerElem.clientWidth-20);this.setState({pixelDuration:t})}}},{key:"formatTipContent",value:function(e){var t=h.c(e),n=t.seconds,r=t.minutes,a=t.hours;return n=h.a(n),r=h.a(r),a=h.a(a),"".concat(a,":").concat(r,":").concat(n)}},{key:"getMarks",value:function(){var e=this,t=this.props.marks,n=[],r=[];return t.forEach((function(t){for(var n=!0,a=0;a<r.length;a++){var o=r[a],i=Math.abs(t.timestamp-o.value);if(i>=0&&i<=16*e.state.pixelDuration){o.label++,n=!1;break}}n&&r.push({value:t.timestamp,label:1})})),r.forEach((function(e){n.push({value:e.value,className:e.label>1?"c-player__many-comments-mark":"",label:e.label>1?e.label:null})})),n}},{key:"render",value:function(){var e=this,t=this.props,n=t.duration,r=t.time,o=t.seek;return n||(n=1),n=+n.toFixed(1),r&&(r=+r.toFixed(1)),a.a.createElement("div",{className:"c-player__timeline",ref:function(t){t&&(e.containerElem=t)}},a.a.createElement(x,{min:0,max:n,value:r,step:.1,onChange:o,markers:this.getMarks(),withTooltips:!0,tipFormatter:this.formatTipContent}))}}])&&V(n.prototype,r),o&&V(n,o),t}(r.Component);n("sJ7f");function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,H(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"c-player__volume-slider-holder",tabIndex:-1},a.a.createElement(x,{vertical:!0,step:.05,min:0,max:1,value:this.props.volume,onChange:this.props.onChange}))}}])&&Q(n.prototype,r),o&&Q(n,o),t}(r.Component);function X(e){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=.1,re=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Z(t).call(this,e),n=!a||"object"!==X(a)&&"function"!==typeof a?ee(r):a,te(ee(ee(n)),"hideVolume",(function(){n.setState({showSlider:!1})})),te(ee(ee(n)),"showVolume",(function(){n.setState({showSlider:!0})})),te(ee(ee(n)),"toggleVolume",(function(){if(n.showSlider)return n.hideVolume();n.showVolume()})),te(ee(ee(n)),"toggleMute",(function(){(n.muted||0!==n.props.volume)&&(n.muted?(n.muted=!1,n.props.changeVolume(n.previousVolume)):(n.previousVolume=n.props.volume,n.muted=!0,n.props.changeVolume(0)))})),te(ee(ee(n)),"onChange",(function(e){n.props.changeVolume(e)})),n.state={showSlider:!1},n.muted=!1,n.onArrowUp=Object(u.c)([u.a.ARROW_RIGHT,u.a.ARROW_UP],(function(){n.props.changeVolume(n.props.volume+ne)})),n.onArrowDown=Object(u.c)([u.a.ARROW_LEFT,u.a.ARROW_DOWN],(function(){n.props.changeVolume(n.props.volume-ne)})),n.onKeyDown=function(e){n.onArrowUp(e),n.onArrowDown(e)},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state.showSlider,t=this.props,n=t.volume,r=t.i18n,o=c.a.VOLUME_DOWN;return n<=.2&&(o=c.a.VOLUME_MUTE),0===n&&(o=c.a.VOLUME_OFF),1===n&&(o=c.a.VOLUME_UP),a.a.createElement("div",{className:"c-player__volume-changer",role:"slider","aria-label":r._("Volume"),"aria-valuemin":"0","aria-valuenow":100*n,"aria-valuemax":"100",tabIndex:"0",onKeyDown:this.onKeyDown,onMouseEnter:this.showVolume,onClick:this.toggleVolume,onMouseLeave:this.hideVolume},a.a.createElement("span",{onClick:this.toggleMute},a.a.createElement(s.a,{className:E()("c-player__volume-icon",te({},"c-player__volume-icon--active",e)),icon:!0},o)),e&&a.a.createElement(K,{volume:n,onChange:this.onChange}))}}])&&$(n.prototype,r),o&&$(n,o),t}(r.Component),ae=Object(l.withI18n)()(re);n("A2rd");function oe(e){return(oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==oe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,se(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=c.a.FULLSCREEN,t=this.props.i18n;return this.props.isFullScreen&&(e=c.a.FULLSCREEN_EXIT),a.a.createElement("div",{className:"c-player__full-screen-button",role:"button","aria-label":t._("Enable/Disable Fullscreen"),onClick:this.props.toggleFullScreen,onKeyDown:Object(u.b)(this.props.toggleFullScreen),tabIndex:0},a.a.createElement("span",null,a.a.createElement(s.a,{className:"c-player__full-screen-icon",ariaLabel:t._("Enable/Disable Fullscreen, icon")},e)))}}])&&ie(n.prototype,r),o&&ie(n,o),t}(r.Component),de=Object(l.withI18n)()(le),fe=n("jpbM"),pe=n.n(fe),me=n("2bAp"),be=n("4XMt"),ye=n("fcFR");n("T5Sw");function ve(e){return(ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Se=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ge(t).call(this,e),n=!a||"object"!==ve(a)&&"function"!==typeof a?we(r):a,o=we(we(n)),c=function(){var e=n.props.transcriptUrl;Object(ye.a)(e)},(i="onClick")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={},n.id=pe()(5),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.transcriptUrl,n=e.i18n;return t?a.a.createElement("div",{className:"c-player__transcript-button",role:"button",tabIndex:0,"aria-label":n._("Download Transcript"),"aria-controls":this.id,onKeyDown:Object(u.b)(this.onClick),onClick:this.onClick},a.a.createElement(s.a,{ariaLabel:n._("Download Transcript, icon"),className:"c-player__transcript-icon",iconClassName:me.a.FILE,tooltip:{label:n._("Download Transcript"),position:be.a.BOTTOM,arrow:!1}})):null}}])&&he(n.prototype,r),o&&he(n,o),t}(r.Component),Oe=Object(l.withI18n)()(Se),Ce=(n("Y+Fw"),n("UX+v"));function _e(e){return(_e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ie(t).call(this,e),n=!a||"object"!==_e(a)&&"function"!==typeof a?Re(r):a,Ae(Re(Re(n)),"show",(function(){n.setState({isOpen:!0},(function(){n.menu&&n.menu.focus()}))})),Ae(Re(Re(n)),"hide",(function(){n.setState({isOpen:!1})})),Ae(Re(Re(n)),"toggle",(function(){if(n.state.isOpen)return n.hide();n.show()})),Ae(Re(Re(n)),"setCaptionAndHide",(function(e){n.props.setCurrentCaption(e),n.hide(),n.anchorEl.focus()})),n.state={isOpen:!1},n.id=pe()(5),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,e),n=t,(r=[{key:"isNoCaptionShowing",value:function(){var e=this.props.captions;if(!e||0===e.length)return!0;var t=!0;return e.forEach((function(e){e.mode===Ce.a.SHOWING&&(t=!1)})),t}},{key:"render",value:function(){var e=this,t=this.state.isOpen,n=this.props,r=n.captions,o=n.setCurrentCaption,i=n.i18n;return r&&0!==r.length?a.a.createElement("div",{className:"c-player__captions-button",ref:function(t){return e.anchorEl=t},role:"button",tabIndex:0,"aria-label":i._("Show Captions"),"aria-haspopup":"true","aria-controls":this.id,onKeyDown:Object(u.b)(this.toggle),onClick:this.toggle,onMouseEnter:this.show,onMouseLeave:this.hide},a.a.createElement("span",null,a.a.createElement(s.a,{ariaLabel:i._("Show Captions, icon"),className:E()("c-player__captions-icon",Ae({},"c-player__captions-icon--active",t))},c.a.CLOSED_CAPTION)),t&&a.a.createElement("div",{className:"c-player__captions-list",ref:function(t){t&&(e.menu=t)},id:this.id,role:"menu"},r.map((function(t){var n=t.mode===Ce.a.SHOWING;return a.a.createElement("div",{className:E()("c-player__captions-list-item",Ae({},"c-player__captions-list-item--active",n)),key:t.label,role:"menuitem",onKeyDown:Object(u.b)(e.setCaptionAndHide.bind(null,t)),tabIndex:0,onClick:o.bind(null,t)},i._("On"))})),a.a.createElement("div",{className:E()("c-player__captions-list-item",Ae({},"c-player__captions-list-item--active",this.isNoCaptionShowing())),role:"menuitem",tabIndex:0,onKeyDown:Object(u.b)(this.setCaptionAndHide.bind(null,null)),onClick:o.bind(null,null)},a.a.createElement(l.Trans,{id:"Off"})))):null}}])&&Te(n.prototype,r),o&&Te(n,o),t}(r.Component),ke=Object(l.withI18n)()(je);n("xp71");function Ne(e){return(Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ne(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Me(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),n=t,(r=[{key:"getPreviousComment",value:function(){var e=this.props,t=e.marks,n=e.time;t=R.a.sortBy(t,["timestamp"]);for(var r=null,a=0;a<t.length;a++){var o=t[a],i=t[a+1],c=!i||n<=i.timestamp;o.timestamp<n&&c&&(r=o)}return r}},{key:"handleClick",value:function(){var e=this.props.seek,t=this.getPreviousComment();t&&e(t.timestamp-.5)}},{key:"render",value:function(){var e=this.props,t=e.marks,n=e.i18n;if(0===t.length)return null;var r,o,i,l=!this.getPreviousComment();return a.a.createElement("div",{className:"c-player__prev-button",onClick:l?null:this.handleClick.bind(this),onKeyDown:l?null:Object(u.b)(this.handleClick.bind(this)),role:"button","aria-label":n._("Rewind"),"aria-disabled":l,tabIndex:0},a.a.createElement("span",null,a.a.createElement(s.a,{ariaLabel:n._("Rewind, icon"),className:E()("c-player__prev-button-icon",(r={},o="c-player__prev-button-icon--disabled",i=l,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r))},c.a.FAST_REWIND)))}}])&&De(n.prototype,r),o&&De(n,o),t}(r.Component),Ve=Object(l.withI18n)()(Fe);n("03gT");function Ge(e){return(Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,We(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,(r=[{key:"getNextComment",value:function(){var e=this.props,t=e.marks,n=e.time,r=null;t=R.a.sortBy(t,["timestamp"]);for(var a=0;a<t.length;a++){var o=t[a],i=t[a+1],c=!!i&&n<i.timestamp;if((!o||n>=o.timestamp)&&c){r=i;break}if(o.timestamp>n){r=o;break}}return r}},{key:"handleClick",value:function(){var e=this.props.seek,t=this.getNextComment();t&&e(t.timestamp)}},{key:"render",value:function(){var e=this.props,t=e.marks,n=e.i18n;if(0===t.length)return null;var r,o,i,l=!this.getNextComment();return a.a.createElement("div",{className:"c-player__next-button",onClick:l?null:this.handleClick.bind(this),onKeyDown:l?null:Object(u.b)(this.handleClick.bind(this)),role:"button","aria-label":n._("Fast Forward"),"aria-disabled":l,tabIndex:0},a.a.createElement("span",null,a.a.createElement(s.a,{ariaLabel:n._("Fast Forward, icon"),className:E()("c-player__next-button-icon",(r={},o="c-player__next-button-icon--disabled",i=l,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r))},c.a.FAST_FORWARD)))}}])&&Ue(n.prototype,r),o&&Ue(n,o),t}(r.Component),Ye=Object(l.withI18n)()(Qe);n("NEnp");function He(e){return(He="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return!t||"object"!==He(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(this,Xe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.time,n=e.duration;return a.a.createElement("div",{className:"c-player__current-time"},a.a.createElement("span",{className:"c-player__current-time-value"},h.f(t)),a.a.createElement("span",{className:"c-player__time-delimiter"},"/"),a.a.createElement("span",{className:"c-player__duration"},h.f(n)))}}])&&ze(n.prototype,r),o&&ze(n,o),t}(r.Component),Je=n("k7+O"),et=n.n(Je);function tt(e){return(tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return!t||"object"!==tt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return it}));var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rt(this,at(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.isPlaying,n=e.play,r=e.pause,o=e.duration,i=e.time,c=e.seek,s=e.volume,u=e.changeVolume,l=e.isFullScreen,d=e.toggleFullScreen,f=e.captions,p=e.setCurrentCaption,m=e.marks,b=e.customActions,y=e.transcriptUrl;return a.a.createElement("div",{className:"c-player__controls"},a.a.createElement(Ve,{marks:m,seek:c,time:i}),a.a.createElement(v,{play:n,pause:r,isPlaying:t}),a.a.createElement(Ye,{marks:m,seek:c,time:i}),a.a.createElement(Ze,{time:i,duration:o}),a.a.createElement(W,{duration:o,time:i,seek:c,marks:m}),a.a.createElement(ae,{volume:s,changeVolume:u}),b.map((function(e){return a.a.createElement("div",{className:"c-player__custom-action",key:e.id},e.component)})),a.a.createElement(ke,{captions:f,setCurrentCaption:p}),a.a.createElement(Oe,{transcriptUrl:y}),et.a&&et.a.enabled&&a.a.createElement(de,{isFullScreen:l,toggleFullScreen:d}))}}])&&nt(n.prototype,r),o&&nt(n,o),t}(r.Component);it.propTypes={customActions:i.a.arrayOf(i.a.shape({id:i.a.string.isRequired,component:i.a.object}))},it.defaultProps={marks:[],customActions:[]}},ERI2:function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("wNa6"),c=n("3Tiu"),s=n("pElA"),u=n("AuRu"),l=n("92Bf");function d(){var e=g(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            qaQuestion {\n                dbId\n            }\n            myData {\n                qaAnswers {\n                    dbId\n                    qaQuestion {\n                        dbId\n                    }\n                    isWithdrawn\n                    withdrawComment\n                    isCrashed\n                    startedAt\n                    media {\n                        ...MediaBasic\n                    }\n                }\n                result {\n                    ... on ActivityResultQa {\n                        submitter {\n                            dbId\n                            firstName\n                            lastName\n                        }\n                        submittedAt\n                        media {\n                            ...MediaBasic\n                        }\n                        deletable\n                    }\n                }\n            }\n        }\n    }\n    ","\n"]);return d=function(){return e},e}function f(){var e=g(["\n    mutation withdrawQaAnswer($input: WithdrawQaAnswerInput!){\n        withdrawQaAnswer(input: $input) {\n            answer {\n                dbId        \n                isCrashed\n                isWithdrawn\n                withdrawComment\n                startedAt        \n                qaQuestion {\n                    media {\n                       ...MediaBasic\n                    }\n                    questionText\n                }\n            }\n        }\n    }\n    ","\n"]);return f=function(){return e},e}function p(){var e=g(["\n    mutation deleteQaAnswer($input: QaAnswerInput!){\n        deleteQaAnswer(input: $input) {\n            removedId\n        }\n    }\n"]);return p=function(){return e},e}function m(){var e=g(["\n   {\n        practiceQaRecorderSettings {\n            qaSettings {\n                delay\n                isStartedImmediately\n                answerMinLength\n                answerMaxLength\n                isStudentRetakeAllowed\n                isRandomQuestionsModeEnabled\n                amountOfRandomQuestionsPerStudent\n                recordingMode\n            }\n            qaQuestion {\n                media {\n                    allowExternalPlay\n                    externalPlayUrl\n                    processingStatus\n                    downloadUrl\n                    srcUrl\n                    caption {\n                        ...MediaCaption\n                    }\n                }\n                questionText\n            }\n            webCamFileName\n            minRecordLengthSeconds\n            maxRecordLengthSeconds\n        }\n    }\n    ","\n"]);return m=function(){return e},e}function b(){var e=g(["\n    mutation updateQaAnswerRecordIsStarted($input: QaAnswerInput!){\n        updateQaAnswerRecordIsStarted(input: $input) {\n            answer {\n                dbId                \n                qaQuestion {\n                    media {\n                        ...MediaBasic\n                    }\n                    questionText\n                }\n                startedAt\n            }\n        }\n    }\n    ","\n"]);return b=function(){return e},e}function y(){var e=g(["\n    mutation updateQaAnswerQuestionMediaIsIdling($input: QaAnswerInput!){\n        updateQaAnswerQuestionMediaIsIdling(input: $input) {\n            answer {\n                dbId                \n                qaQuestion {\n                    media {\n                       ...MediaBasic\n                    }\n                    questionText\n                }\n                startedAt\n            }\n        }\n    }\n    ","\n"]);return y=function(){return e},e}function v(){var e=g(["\n    mutation finishQaAnswer($input: QaAnswerInput!){\n        finishQaAnswer(input: $input) {\n            answer {\n                dbId                \n                qaQuestion {\n                    media {\n                        ...MediaBasic\n                    }\n                    questionText\n                }\n                startedAt\n            }\n        }\n    }\n     ","\n"]);return v=function(){return e},e}function h(){var e=g(["\n    mutation startQaAnswer($input: StartQaAnswerInput!){\n        startQaAnswer(input: $input) {\n            answer {\n                dbId                \n                qaQuestion {\n                    media {\n                        ...MediaBasic\n                    }\n                    questionText\n                }\n                startedAt\n            }\n        }\n    }\n    ","\n"]);return h=function(){return e},e}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getSubmittedActivityData",value:function(e){return new Promise((function(t,n){i.a.dispatch(s.dc(!0)),r.a.query({query:u.d,variables:{activityId:e}}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(s.Tb(r)),t(r)}else n(e);i.a.dispatch(s.dc(!1))})).catch((function(e){n(e),i.a.dispatch(s.dc(!1))}))}))}},{key:"startQuestion",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.q(!0)),r.a.mutate({mutation:S,variables:{input:{questionDbId:e,streamName:t}}}).then((function(e){if(e&&e.data){var t=e.data.startQaAnswer.answer;i.a.dispatch(c.k(t)),n(t)}else a(e);i.a.dispatch(c.q(!1))})).catch((function(e){a(e),i.a.dispatch(c.q(!1))}))}))}},{key:"refreshProgressData",value:function(e){return new Promise((function(t,n){i.a.dispatch(s.Vb(!0)),r.a.query({query:u.e,variables:{activityId:e},errorPolicy:"ignore"}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(s.Qb(r)),t(r)}else n(e);i.a.dispatch(s.Vb(!1))})).catch((function(e){n(e),i.a.dispatch(s.dc(!1))}))}))}},{key:"refreshSubmittedData",value:function(e){return new Promise((function(t,n){i.a.dispatch(s.Vb(!0)),r.a.query({query:u.d,variables:{activityId:e},errorPolicy:"ignore"}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(s.Rb(r)),t(r)}else n(e);i.a.dispatch(s.Vb(!1))})).catch((function(e){n(e),i.a.dispatch(s.dc(!1))}))}))}},{key:"getUpdatedState",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.q(!0)),r.a.query({query:R,variables:{activityId:e}}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(s.pc(r)),t(r)}else n(e);i.a.dispatch(c.q(!1))})).catch((function(e){n(e),i.a.dispatch(c.q(!1))}))}))}},{key:"setQuestionIsIdling",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:C,variables:{input:{questionDbId:e}}}).then((function(e){e&&e.data?t(e):n(e)})).catch((function(e){n(e)}))}))}},{key:"setAnswerIsRecording",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:_,variables:{input:{questionDbId:e}}}).then((function(e){e&&e.data?t(e):n(e)})).catch((function(e){n(e)}))}))}},{key:"finishQuestion",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:O,variables:{input:{questionDbId:e}}}).then((function(e){e&&e.data?(i.a.dispatch(c.k(null)),t(e)):n(e)})).catch((function(e){n(e)}))}))}},{key:"loadPracticeRecorderSettings",value:function(){return new Promise((function(e,t){i.a.dispatch(c.q(!0)),r.a.query({query:T}).then((function(n){n&&n.data?(i.a.dispatch(c.o(n.data.practiceQaRecorderSettings)),e(n)):t(n),i.a.dispatch(c.q(!1))})).catch((function(e){t(e),i.a.dispatch(c.q(!1))}))}))}},{key:"withdrawAnswer",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.p(!0)),r.a.mutate({mutation:P,variables:{input:{questionDbId:e,comment:{withdrawComment:t}}}}).then((function(e){e&&e.data?n(e):a(e),i.a.dispatch(c.p(!1))})).catch((function(e){a(e),i.a.dispatch(c.p(!1))}))}))}},{key:"deleteAnswer",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.m(!0)),r.a.mutate({mutation:I,variables:{input:{questionDbId:e}}}).then((function(e){e&&e.data?t(e):n(e),i.a.dispatch(c.m(!1))})).catch((function(e){n(e),i.a.dispatch(c.m(!1))}))}))}}])&&E(t.prototype,n),a&&E(t,a),e}();t.a=new w;var S=o()(h(),l.b),O=o()(v(),l.b),C=o()(y(),l.b),_=o()(b(),l.b),T=o()(m(),l.c),I=o()(p()),P=o()(f(),l.b),R=o()(d(),l.b)},EZsn:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("4XMt"),u=n("J3bt"),l=n("TSYQ"),d=n.n(l),f=n("LvDl"),p=n.n(f);n("1CkY");function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={value:"UNSET",label:"\u2014"},v={value:0,label:Object(c.i18nMark)("Fail")},h={value:1,label:Object(c.i18nMark)("Pass")},g="passfail-input-select";function E(e){var t,n=e.menuItems;n||(t=e.i18n,v.label=t._(v.label),h.label=t._(h.label),n=[h,v,y]);var r=!1;return e.value!==y.value?p.a.remove(n,{value:y.value}):r=!0,m({},e,{className:d()(g,e.className),menuItems:n,stripActiveItem:r})}var w=function(e){return a.a.createElement(u.b,E(e),e.children)};w.componentProps={anchor:i.a.object,className:i.a.string,error:i.a.bool,errorText:i.a.string,fullWidth:i.a.bool,id:i.a.string,itemLabel:i.a.string,itemValue:i.a.string,label:i.a.string,menuItems:i.a.array,onChange:i.a.func,placeholder:i.a.string,position:i.a.string,sameWidth:i.a.bool,simplifiedMenu:i.a.bool,stripActiveItem:i.a.bool,style:i.a.object,type:i.a.string,value:i.a.any,enabled:i.a.bool,ariaLabel:i.a.string,ariaLabelledby:i.a.string,tooltip:i.a.any},w.propTypes=m({},w.componentProps),w.defaultProps={className:g,menuItems:null},t.b=Object(s.c)(Object(c.withI18n)()(w))},EiwA:function(e,t,n){},Ezck:function(e,t,n){},"F+kV":function(e,t,n){},FC0G:function(e,t,n){},FeSs:function(e,t,n){},Fpq1:function(e,t,n){},Ftzw:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"start",value:function(){this.startTime=Date.now(),this.__startTimer()}},{key:"stop",value:function(){clearInterval(this.interval),this.lastTickTime=void 0,this.startTime=void 0}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"resume",value:function(){var e=Date.now();this.startTime+=e-this.lastTickTime,this.__startTimer()}},{key:"onTick",value:function(e){this.tickHandler=e}},{key:"getTime",value:function(){return this.currentTimeDiff}},{key:"__startTimer",value:function(){var e=this;this.interval=setInterval((function(){e.lastTickTime=Date.now(),e.currentTimeDiff=e.lastTickTime-e.startTime,"function"===typeof e.tickHandler&&e.tickHandler(e.currentTimeDiff)}),300)}}])&&r(t.prototype,n),a&&r(t,a),e}()},FxcE:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n("lTCR"),a=n.n(r);function o(){var e=c(["\n  query filteredActivities($termClass: Int!, $filter: [ActivityFilterConditionInput!]) {\n    activities(termClassDbId: $termClass, filter: $filter) {\n      dbId\n      name\n      studentGroups {\n        dbId\n      }\n    }\n  }\n"]);return o=function(){return e},e}function i(){var e=c(["\n  query getActivities($dbId: Int!) {\n    termClass(dbId: $dbId) {\n      name\n      activities {\n        dbId\n        name\n        submitDueAt\n        type\n        allowGroupsForming\n        deletable\n        groupsFormedAt\n        groupsFormationFinalizeAt\n        executorsType\n        studentGroups {\n          dbId\n        }\n        cengageSettings {\n          locked\n          inPath\n          score\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=a()(i()),u=a()(o())},"G/cw":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("17x9"),c=n.n(i),s=n("Wme0"),u=n("45tj"),l=n("LMP5"),d=n("+Ft7");function f(e){var t=e.dateTimeFormat,n=e.unixTime,r=e.locale;if(!n)return null;var o=new Date(1e3*n);return a.a.createElement("span",null,Object(l.e)(o,t,Object(u.d)(r)))}f.propTypes={dateTimeFormat:c.a.oneOf([d.a.SHORT,d.a.MEDIUM,d.a.LONG,d.a.FULL]),unixTime:c.a.number},f.defaultProps={dateTimeFormat:d.a.SHORT},t.a=Object(o.b)((function(e){return{locale:s.a(e)}}))(f)},G19t:function(e,t,n){"use strict";var r=n("LvDl"),a=n.n(r),o=n("Dl6w"),i=n("ADn3"),c=n.n(i),s=n("Hlv8"),u=n.n(s),l=n("8bCP");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=Object(l.c)("customizations"),m=/^rgb(?:a)?\(\s*([\d]{1,3})\s*,\s*([\d]{1,3})\s*,\s*([\d]{1,3})(?:\s*,\s*([\d.]+))?\s*\)$/,b=/^(palette|colors|typography|assets)--(.*)$/,y=/^palette\[(.*)\]$/,v=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_currentDefaultTheme",null),f(this,"_currentCustomTheme",null),f(this,"_bongoTheme",{palette:{},colors:{},typography:{},assets:{}}),f(this,"_whiteTheme",{palette:{},colors:{},typography:{},assets:{}}),f(this,"_supportedKeys",{palette:{},colors:{},typography:{},assets:{}}),a.a.forIn(c.a,(function(e,n){var r=n.match(b);if(r&&r.length>=3){var a=r[1],o=r[2];t._bongoTheme[a][o]=e,t._supportedKeys[a][o]=!0}})),a.a.forIn(u.a,(function(e,n){var r=n.match(b);if(r&&r.length>=3){var a=r[1],o=r[2];t._whiteTheme[a][o]=e}}))}var t,n,r;return t=e,(n=[{key:"applyTheme",value:function(e){var t=null;switch(e){case o.c:var n=a.a.merge({},this._bongoTheme,this._whiteTheme);this._currentDefaultTheme=n,t=this.processTheme(n);break;case o.b:default:this._currentDefaultTheme=this._bongoTheme,t=this.processTheme(this._bongoTheme)}t&&this.injectCssVariables(t,"default"),this._currentCustomTheme&&(t=this.processTheme(this._currentCustomTheme),this.injectCssVariables(t))}},{key:"processLaunchpointSettings",value:function(e){return e||{}}},{key:"processCustomizationCapabilities",value:function(e){return e||{}}},{key:"getNormalizedColor",value:function(e,t){var n={rgb:null,opacity:null};e.style.backgroundColor=t;var r=window.getComputedStyle(e).backgroundColor;if(r){var o=r.match(m);o&&(n.rgb=a.a.join([o[1],o[2],o[3]],", "),o[4]&&(n.opacity=o[4]))}return n}},{key:"updateThemeColor",value:function(e,t,n){var r=n.rgb,a=n.opacity;if(r){var o="".concat(t,"-color");e.colors[o]=r,a&&(e.colors["".concat(o,"--opacity")]=a)}}},{key:"processTheme",value:function(e){var t=this,n=(new Date).getTime(),r=this._currentDefaultTheme,o={colors:{},typography:{},assets:{}};if(!e||a.a.isEmpty(e))return o;if(e.error)p.warn("There was an issue parsing the theme provided: ".concat(e.errorMessage));else{p.debug("Attempting to process theme definition:",JSON.stringify(e));var i=document.createElement("div");document.body.appendChild(i);var c=a.a.keys(e.palette),s=a.a.pickBy(r.colors,(function(e){var t=e.match(new RegExp("^palette\\[(".concat(c.join("|"),")\\]$")));return t&&t.length>0})),u=a.a.merge({},s,e.colors);a.a.forEach(u,(function(n,c){if(t._supportedKeys.colors[c]){if(n){var s=n,u=s.match(y);if(u&&u.length>=2){var l=u[1];null===(s=a.a.get(e.palette,l,null))?(p.debug("Palette color referenced by ".concat(c," (palette[").concat(l,"]) is not defined in supplied theme, falling back to default theme palette color...")),null===(s=a.a.get(r.palette,l,null))&&(p.debug("Palette color referenced by ".concat(c," (palette[").concat(l,"]) is not defined in default theme... using fallback value (").concat("#000000",").")),s="#000000")):p.debug("Using palette color for ".concat(c," :: palette[").concat(l,"]:").concat(s))}var d=t.getNormalizedColor(i,s);t.updateThemeColor(o,c,d)}}else p.warn('Ignoring unsupported theme key: colors["'.concat(c,'"]'))})),document.body.removeChild(i),a.a.forEach(e.typography,(function(e,n){t._supportedKeys.typography[n]?e&&(o.typography[n]=e):p.warn('Ignoring unsupported theme key: typography["'.concat(n,'"]'))})),a.a.forEach(e.assets,(function(e,t){e&&(o.assets[t]=e)}));var l=(new Date).getTime()-n;p.debug("Processed theme definition (".concat(l,"ms):"),o)}return o}},{key:"processCustomizationPreferences",value:function(e){var t=(new Date).getTime();if(e){var n=a.a.merge({},e),r=n.theme;if(r){this._currentCustomTheme=r;var o=this.processTheme(r);this.injectCssVariables(o),n.theme=o;var i=(new Date).getTime()-t;p.debug("Processed preferences (".concat(i,"ms):"),n)}return n}return{}}},{key:"processCustomizationSettings",value:function(e){if(this._currentCustomTheme=null,e){var t=e.capabilities,n=e.preferences;return{capabilities:this.processCustomizationCapabilities(t),preferences:this.processCustomizationPreferences(n)}}return{}}},{key:"injectCssVariables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom",n="theme-variables--".concat(t),r=document.getElementById(n);if(r&&r.parentElement&&r.parentElement.removeChild(r),e){var o=e.assets,i=e.colors,c=e.typography,s=document.createElement("style");s.id=n,s.type="text/css",s.innerHTML="",o&&a.a.forEach(o,(function(e){s.innerHTML+="@import url(".concat(e,");\n")})),s.innerHTML+=":root {\n",i&&a.a.forEach(i,(function(e,n){s.innerHTML+="  --bongo-".concat(n,"__").concat(t,": ").concat(e,";\n")})),c&&a.a.forEach(c,(function(e,n){s.innerHTML+="  --bongo-".concat(n,"__").concat(t,": ").concat(e,";\n")})),s.innerHTML+="}\n",document.head.appendChild(s)}}}])&&d(t.prototype,n),r&&d(t,r),e}();t.a=new v},G57k:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/MKj"),s=n("9C/b"),u=n("mf+E"),l=n("vRGJ"),d=n.n(l),f=n("PWzU"),p=n("UyA7"),m=n("9mqd"),b=n("VmXB");function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=h(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==y(o)&&"function"!==typeof o?E(r):o,w(E(E(n)),"getRedirect",(function(){var e=n.props,t=e.match,r=e.classId,o=e.termClass,i=null;for(var c in b.d)if(b.d.hasOwnProperty(c)&&t.path===b.d[c]){i=c;break}if(i){var s=d.a.compile(b.e[c]),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}({},t.params);if(r?l.classId=r.toString():o&&(l.classId=o.dbId.toString()),!l.classId)return null;var f=s(l)+n.props.location.search;return m.a.pageView(f),a.a.createElement(u.a,{from:b.d[c],to:f})}return null})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.termClass,n=e.classId,r=e.match.params.activityId;t||!r||n||f.a.getClassDataFromActivityId(+r)}},{key:"render",value:function(){var e=this.props,t=e.termClass,n=e.classId;return t||n?a.a.createElement("span",null,this.getRedirect()):null}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component);S.propTypes={classId:i.a.number};t.a=Object(s.a)(Object(c.b)((function(e){return{termClass:p.k(e)}}))(S))},GIPs:function(e,t,n){},Ga2B:function(e,t,n){e.exports=n.p+"static/media/Firefox_icon.edf69d10.svg"},GhmD:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAAWRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBJbWFnZVJlYWR5PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpqMDBXAAAJSElEQVR4Ae1Za2wU1xU+987s7syubSDlFQGpICRSIxVUSGhBfVBK7bDGGEgANW1pUtKg0Idof/QlFVD6o1GiVlGr/iBtkqaiSYRLANusCYSCokRpA41aohYpgVQqj6ak4eXHPmbnnn5nbCe2s+tdL8Z2lLnSeD33ce453z2ve4YobCECIQIhAiECIQIhAiECIQIhAiECH0YE1KgK3dASTygz2+T4RrbsGmKjlDGXteZ/xbjzzQttX7lyrfkbFQASdS1zjUXribgezyzSkQgp3S0rGyLjeUTqNBP9ydLqmc7Wvx4m2oaB4W8jCkB1Q8vEPNNPiOle0tE4mTzk9yEVRO3XwJYAom2AkWe8HTLs/zSTanyh37RheBkxACJ1u+ZFItEnWEXnkMlC5oFCF5MGLFoRAGEyivyHuuKZB6hpraA2LG1EAHDq9nxG2XYTKWsKmVxljCuwqqOk8t6TXWRtpLYkULz61mN4V0+oGIVY8tmblWU9BZWuXHghLhrjZ4nt6NdclfsFeobl8ConsiwVc7WZD0YWMvuzNZPLmtoVWf9UrF7uTCX/TmuatNsRfZ5sZ7EwPzxNNMFGwMh9PZNa+cTV0hw6APOPReKTz97NWm+C75oL+wQNISM23fNrvByc20tKqZNM1je6HV0xVmW5rOtpgW8o4R+UhcnmnLKc27qaa8/1Lq3kVyiV3Zza5pn2+I6nIPRmLJoKwVQgHPd4895fuC2Etpmw+fkkfQObeHhxbBrbsw+Hxu14LuLJYKqFdTZZ0Z5VhcBAn+VUk5/x82888/xA8kN57wP94Muc+tZZmk0LW7FbsPHgk4uNBqFNPHruv9DhQ0z6oLbUcZ23TjsRL5PXxsp4keuwzy0QcQkUqoFUZHY3yAMcv2gB+2ftWGJu++6l7xTbslR/WQBMWrOzqqPDOUB2dGHFtgwPjgTnPJN6xM57j3UcWH0+YG5ZqiZm+VMsj6q1rXLM6n+dqfq3grHa5xJuNHMPsf4h7H4a+QMiiBYw8+vSqRU7SwlabLwsAJzk3q2wt20VnzzUmX3vAJzlpmzbqlOxZbtvVKTvUspaCtd+E056PLFy5UjhEJD+6lNMvJ919vfZ1jvfcBqaZyqffguzWPLeAYB12yHlpR/vamvcUEzAUv0lAXBr98ygiH4VjE2E2pai9/5xsWXf25FOZDbQmxc5PmXqFtbWt6DaEFrMXx6xc3nAjjhEMRUlWaB3icn8MiPJz9vkOgn3j8qK1QVr/ByUKXKF2DsCDViFBUJgyA27lGg23YkEZOJ7yJeY33cYas9+ri2TyG6ozrg13hTnD/AhtUEyZAr5EcggYARAw3kqPV7p2BankxbEEvquy0Z/1aXsdoy/qCx9RPl8rtPS0JjKhBdWS2pAPLn3IOvo0iFncIGT4jPE1sI00duO8vbAjG6vyIwsBzJnD0ETGpAGgxxRTd3+6/yIN8P4pkqJ78h7/0m33XFGxobSBgVg/MrD47O5K68hLE0P1G4olCVt9TMbu9pWPQoQt7HlbK1I+N49rRhYyD6mSf8Zx7aOmedgaBIeyBCYzwX8+5oh/XSW1dNIlcu6Sg8KQKxu72yE6r/BLhPlX16EJRtK6Z3oSuTmx9LudCjoMWwk9/1ecSr7Fa0S/xDILLmHCB4Ijy7s0DvO3nFmszmzr/FwqY0GvQtohyV/HRSkghsANYSz34m6asP3Kx29euFlI3GYBqUCuVAFYIrw0vAr7zIWpNzWHKUizW793tXd48X/FhZu6c5x8YizCLl9LST5NpYD+jJbcEKcM2x9PJu3z7p29h84tY8O2YTK3K7oNNEGoou+7y/O7W88Xmxefw1AicpNtnzPjbnH2LJSSGcl5S1PeNkQdopmANqL2dTRk46VvRXC3zDiwgsXoi3anqA1PUjbcJRF2rsDEu9dQ/uQbPwcWj87qNYMzLwKEZETD/J2Pokb2gOK8gvSiWytlLCUNrcBxMJaVojWcPeBf6X0F+OvNM8rRjoAYMKag+PIVk2I94sDTy3oldMkFSW6BLv7Uboz/YnMvhXIGPUZN+2ucJbt2YLsbn1gl+XQuiZz4Bt0xIZ3uL0Y+SARynalv4+08pOUL5ScFFkK4RWbE3A+67tSK4/F63fP5/rW75q8SeKWN0HZQe7frYpFSIxMNxJGIgmZBZsdr9t1PWLqfe+7aBSc3tMpxUo2p3zLX5Ftbjzp1jf/ADe7LbA5FDrFS+MhecZAQ6gEANXFONFkR3BikSHk+SDH7Gn27xfhneTubTCdB9EZD0LQ1cb6YpxW2g9+YAg3ISSuqap9dvJAMspN7j0KT31rd1wdOFzgPbjc5HamU43r3Po9i3AlOwLhI2WvL0DymncFlysJZnwazv1X6elvPUKPbgxUVJxg+cILp8ZnJDePy7+4p38Haj+2hQ/47EmSmGegkvSQe2bqk7RwJ67f8JHdqaX8W0YTJNk/b3HuKC3bUYOXT4+uly+D575TJLpJNct2v+ROcLbIkMYHh9NBHt13YrH/u7Or01eeW3uhSsenYdpH4A+KzR67/VJeV/RNp37XLBypeTgoPpTFLmqgxJdkqvHtKsRBxLoPYINjxF2hWrO9XmsVbUJV5Z3gJlVSFgkpKhBaK9MJGAcU6UoSGDsTEKqhu5u0FCDZ8K+DMnVJ9oKYOpHu2x5RtoWipmov23xK0h7pCRBf6UkSBShTNe5hZIEv9VxminMCJ2IU3+D8e/K09pblKEXz6+VpTnGSozrCJh8AQE2f72DKfxnFy6NSaS1aApCsSsVg++qzmCPub98HFgDJZolb+93UpM6Ws3M/g53fjexOKpqYgxj6bk0EIksilE+/kO6q+YIbvXw9LlGvAgRkkmVeoEb1yPtsriy2lLekHwC9w+7y3QvwGXYtXP0inPYEAALJ+zVm7d+Tbl31ipNsuVdp+zfBJ7Cxlgb3Y7nPS5DNZv+S5ujnCgLQZyoRiiTkpPsDcDmjyZqY7/1GL1dffM7bCvVAXiEZZv/p/eiN9gtusUx+BwSvTbc2vFwagDIZji9vSaIO+GNkCJ/CBwsUBaVoKeYzRlpwHxC7N68bP7cZX6jahLNhAyAQc/Fh263qmMc+12vFjUiaPoZkE05j9DUCn+pPsFLb7bS3o/3QakSwsIUIhAiECIQIhAiECIQIhAiECIQIhAh8iBH4P16ShTKacXylAAAAAElFTkSuQmCC"},GkKD:function(e,t,n){"use strict";t.a={CAMERA:"CAMERA",MICROPHONE:"MICROPHONE",DESKTOP:"DESKTOP"}},Goub:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("xrVw"),i=n("17x9"),c=n.n(i),s=n("LvDl"),u=n.n(s),l=n("TSYQ"),d=n.n(l);n("y54d");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return u.a.pick(e,Object.keys(b.componentProps))}var b=function(e){return a.a.createElement(o.J,p({},m(e),{className:d()("list-subheader",e.className)}),e.children)};b.componentProps={className:c.a.string,primary:c.a.bool,primaryText:c.a.node},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},b.passThroughProps),b.defaultProps={primaryText:"",primary:!1},t.a=b},Gxhl:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("ZD0w"),u=n("kbsL"),l=n("TSYQ"),d=n.n(l),f=n("LvDl"),p=n.n(f);n("gnXi");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={hasMessage:!1},O=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=h(t).call(this,e),n=!a||"object"!==m(a)&&"function"!==typeof a?E(r):a,w(E(E(n)),"getComponentProps",(function(e){return p.a.pick(e,Object.keys(t.componentProps))})),w(E(E(n)),"onClose",(function(){n.setState({hasMessage:!1}),n.props.onClose&&n.props.onClose()})),n.state=y({},S,{hasMessage:Boolean(e.message)}),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.message?e.message!==this.props.message&&this.setState({hasMessage:!0}):this.setState({hasMessage:!1})}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.contentClassName,r=e.className,o=e.dialogClassName,i=e.message,s=e.ariaLabel;if(this.state.hasMessage){var l=s;l||(l=t._("Message Dialog"));var f=[a.a.createElement(u.a,{id:"button-dialog-simple-message-ok","aria-label":t._("OK"),onClick:this.onClose},t._("OK"))];return a.a.createElement(c.n,b({},this.getComponentProps(this.props),{className:d()("dialog-overlay",r),dialogClassName:d()("dialog",o),contentClassName:d()("dialog-content",n),actions:f,portal:!0,lastChild:!0,disableScrollLocking:!0,renderNode:document.body,"aria-label":l}),a.a.createElement("div",{className:"simple-dialog-message-container"},i))}return null}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component);O.componentProps={actions:i.a.array,ariaLabel:i.a.string,autosizeContent:i.a.bool,className:i.a.string,containFocus:i.a.bool,contentClassName:i.a.string,contentStyle:i.a.any,dialogClassName:i.a.string,dialogStyle:i.a.any,fullPage:i.a.bool,height:i.a.oneOfType([i.a.string,i.a.number]),id:i.a.string.isRequired,modal:i.a.bool,style:i.a.any,visible:i.a.bool.isRequired,width:i.a.oneOfType([i.a.string,i.a.number]),paddedContent:i.a.bool},O.propTypes=y({},O.componentProps,{onClose:i.a.func,message:i.a.any,isConfirmation:i.a.bool}),O.defaultProps={modal:!0,visible:!0,message:""},t.a=Object(s.withI18n)()(O)},"H+UZ":function(e,t,n){},H3v6:function(e,t,n){},H9kt:function(e,t,n){"use strict";var r=n("ZD0w");t.a={AUTO_ANALYSIS_RESTRICTED:Object(r.i18nMark)("Auto Analysis\u2122 report only available in Premium version"),AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE:Object(r.i18nMark)("Option cannot be changed when using the Auto Analysis\u2122 grade type"),FREEMIUM_CONFIG_OPTION:Object(r.i18nMark)("Option only available in Premium version"),FREEMIUM_CONFIG_NOT_EDITABLE_OPTION:Object(r.i18nMark)("Option can only be changed in Premium version"),COMMENT_DELETED:Object(r.i18nMark)("(Comment Deleted)"),RECORDING_NOT_SUPPORTED:Object(r.i18nMark)("Recording video is not supported by your browser.")}},HCbP:function(e,t,n){"use strict";var r=n("wNa6"),a=n("UyA7"),o=n("o41Y"),i=n("7n1V"),c=n("cMfo"),s=n("bjo3"),u=n("csv8"),l=n("BulX"),d=n("L2DV"),f=n("N90w"),p=n("HNnK"),m=n("hIiU"),b=n("IF/7"),y=n("H9kt");function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"isHelpVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isEducatorGlobalNavVisible",value:function(){var e=g(r.a),t=e.institution,n=e.ltiScope;if(t)if(o.b(t)){if(n===c.a.D2L_MEETING_LIST||n===c.a.D2L_ACTIVITY_ADD_SCOPE)return!1}else if(o.i(t))return!1;return!0}},{key:"isStudentGlobalNavVisible",value:function(){var e=g(r.a).institution;return!e||!o.b(e)&&!o.i(e)}},{key:"isDeleteAssignmentActionVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isLMSSyncOptionVisible",value:function(){var e=g(r.a).institution;return!e||!(o.b(e)||o.i(e)||o.a(e))}},{key:"isStudentAssignmentNavigationVisible",value:function(){var e=g(r.a),t=e.institution;return!e.isDeepLinkingEnabled&&(!t||!o.i(t))}},{key:"isStudentMeetingNavigationVisible",value:function(){return!0}},{key:"isEducatorAssignmentNavigationVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isEducatorMeetingNavigationVisible",value:function(){var e=g(r.a),t=e.institution,n=e.ltiScope;if(t)if(o.b(t)){if(n===c.a.ASSIGNMENT||n===c.a.D2L_ASSIGNMENT_LIST)return!1}else if(o.i(t))return!1;return!0}},{key:"isEducatorRubricNavigationVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isSettingsNavigationVisible",value:function(){var e=g(r.a).institution;return!(!e||!o.a(e))}},{key:"isTemplateSettingsNavigationVisible",value:function(){var e=g(r.a),t=e.termClass,n=e.currentUser,a=!1;return t&&t.students&&t.students.length&&t.students.forEach((function(e){b.h(e)||(a=!0)})),!(!b.a(n)||a)}},{key:"isSupportNavigationVisible",value:function(){var e=g(r.a).institution;return!e||!(o.b(e)||o.i(e)||o.a(e))}},{key:"isNotificationsNavigationVisible",value:function(){var e=g(r.a).institution;return!(!e||!o.a(e))}},{key:"isDueDateVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)&&!o.a(e)}},{key:"isAssignmentNameVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isPageTitleVisible",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isPremiumUpgradeMessageVisible",value:function(){return g(r.a).isTopHatFreemium}},{key:"showPoweredByBongoLogo",value:function(){var e=g(r.a).institution;return!(!e||!(o.b(e)||o.i(e)||o.a(e)))}},{key:"showPoweredByBongoTextLogo",value:function(){var e=g(r.a).institution;return!(!e||!o.h(e))}},{key:"isEducatorLibraryAvailable",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"shouldNavToGradebookAfterConfigChange",value:function(){var e=g(r.a).institution;return!(!e||!o.i(e))}},{key:"getNavigationPathAfterConfiguration",value:function(){return this.shouldNavToGradebookAfterConfigChange()?l.f.EDUCATOR_GRADEBOOK:l.f.EDUCATOR_ACTIVITY_LIST}},{key:"isInclassEnabled",value:function(){var e=g(r.a).institution;return!!(e&&e.featureToggles&&e.featureToggles.allowedActivitiesTypes)&&-1!==e.featureToggles.allowedActivitiesTypes.indexOf(i.b.IN_CLASSROOM)}},{key:"isGroupAssignmentEnabled",value:function(){return!this._isFreemium()}},{key:"isQuestionAndAnswerAssignmentEnabled",value:function(){return!this._isFreemium()}},{key:"isInteractiveVideoAssignmentEnabled",value:function(){return!this._isFreemium()}},{key:"isWebcamRecordingSelectionEnabled",value:function(){return!this._isFreemium()}},{key:"isDesktopRecordingSelectionEnabled",value:function(){return!this._isFreemium()}},{key:"isRubricEnabled",value:function(){return!this._isFreemium()}},{key:"isPeerReviewEnabled",value:function(){return!g(r.a).isTopHatFreemium}},{key:"isPeerReviewDueDateEnabled",value:function(){var e=g(r.a).institution;return!e||!o.i(e)}},{key:"isDocumentUploadEnabled",value:function(){return!g(r.a).isTopHatFreemium}},{key:"isMeetingEnabled",value:function(){return!g(r.a).isTopHatFreemium}},{key:"isDeepLinkingEnabled",value:function(){var e=g(r.a).termClass;return e&&e.isDeepLinkingEnabled}},{key:"isReflectionQuestionsAllowed",value:function(){var e=g(r.a).institution;return!(!e.featureToggles||!Boolean(e.featureToggles[s.b]))}},{key:"canCreateOldActivities",value:function(){var e=g(r.a),t=e.institution,n=e.currentUser;return!!(t&&n&&o.a(t)&&b.g(n))}},{key:"isViewInstructionsLinkAllowed",value:function(){var e=g(r.a).institution;return!(!e||!o.a(e))}},{key:"isHamburgerMenuAllowed",value:function(){var e=g(r.a),t=e.institution,n=e.trialExpirationDate,a=e.currentUser,i=e.ltiScope;return!m.a.isTrialExpired(n)&&(!o.a(t)||(!b.b(a)||i===c.a.CENGAGE_EDUCATOR_DOCK)&&(!b.f(a)||i===c.a.CENGAGE_STUDENT_DOCK))}},{key:"isCopyAssignmentFromTermClasAllowed",value:function(){var e=g(r.a),t=e.institution,n=e.currentUser;return!!(t&&n&&b.g(n)&&o.a(t))}},{key:"getDefaultPeerReviewType",value:function(){var e=g(r.a),t=e.institution,n=e.isD2LFreemium;return t&&o.b(t)&&n?d.a.STUDENT:d.a.SYSTEM}},{key:"isDraftGradingAllowed",value:function(){var e=g(r.a).institution;return!(!e.featureToggles||!Boolean(e.featureToggles.gradeDraftsFeatureAllowed))}},{key:"isGradedPeerReviewAllowed",value:function(){var e=g(r.a).institution;return!!this.isDraftGradingAllowed()&&!(!e.featureToggles||!Boolean(e.featureToggles[u.a]))}},{key:"_isFreemium",value:function(){var e=g(r.a),t=e.isD2LFreemium,n=e.isTopHatFreemium;return t||n}},{key:"isAutoGradingAllowed",value:function(){var e=g(r.a).institution;return!(!e.featureToggles||!Boolean(e.featureToggles[f.b.AUTO_GRADING]))}},{key:"isAutoGradingVisible",value:function(){var e=g(r.a).currentUser;return!!this.isAutoGradingAllowed()&&(!this._isFreemium()||!b.f(e))}},{key:"isAutoGradingRestricted",value:function(){return!(this.isAutoGradingVisible()&&!this._isFreemium())}},{key:"getAutoGradingRestrictedMessage",value:function(){return this.isAutoAnalysisRestricted()&&this._isFreemium()?y.a.AUTO_ANALYSIS_RESTRICTED:""}},{key:"isAutoAnalysisVisible",value:function(){var e=g(r.a).currentUser;return!this._isFreemium()||!b.f(e)}},{key:"isAutoAnalysisRestricted",value:function(){return!(this.isAutoAnalysisVisible()&&!this._isFreemium())}},{key:"getAutoAnalysisRestrictedMessage",value:function(){return this.isAutoAnalysisRestricted()&&this._isFreemium()?y.a.AUTO_ANALYSIS_RESTRICTED:""}},{key:"getAutoAnalysisPermission",value:function(){return{isVisible:this.isAutoAnalysisVisible(),isRestricted:this.isAutoAnalysisRestricted(),restrictedMessage:this.getAutoAnalysisRestrictedMessage()}}},{key:"isMeetingDownloadAllowed",value:function(){var e=g(r.a).institution;return!o.d(e)}},{key:"isMeetingCohortingAllowed",value:function(){var e=g(r.a).institution;return o.d(e)}},{key:"isResetSubmissionVisible",value:function(){return!0}},{key:"canShowBrowserUnsupportedMessage",value:function(){return!0}},{key:"isMeetingAttendanceAllowed",value:function(){return!this._isFreemium()}}])&&v(t.prototype,n),a&&v(t,a),e}(),g=function(e){var t=e.getState();return{ltiScope:a.j(t),featureConfig:a.c(t),institution:a.h(t),isD2LFreemium:a.s(t),isTopHatFreemium:a.x(t),trialExpirationDate:a.q(t),termClass:a.k(t),isDeepLinkingEnabled:a.v(t),currentUser:p.h(t)}};t.a=new h},HNnK:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return h}));var r=n("G4qV"),a=n("upk1"),o=n("LvDl"),i=n.n(o),c=Object(r.a)(a.a,(function(e){return e.auth})),s=Object(r.a)(c,(function(e){return e.userData})),u=(Object(r.a)(c,(function(e){return e.hasError})),Object(r.a)(c,(function(e){return e.isLoading}))),l=Object(r.a)(s,(function(e){return e?e.dbId:void 0})),d=(Object(r.a)(s,(function(e){return e?e.externalTrackingUuid:void 0})),Object(r.a)(s,(function(e){return e?e.isMarketingCommunicationAccepted:void 0}))),f=Object(r.a)(s,(function(e){return e?e.isGdprSubject:void 0})),p=Object(r.a)(s,(function(e){return e?e.is508on:void 0})),m=Object(r.a)(s,(function(e){return e.cengageSettings||{}})),b=Object(r.a)(m,(function(e){return e.ssoToken||null})),y=Object(r.a)(c,(function(e){return e.commentPresets})),v=Object(r.a)(c,(function(e){return e.commentPresetIsLoading})),h=Object(r.a)(s,(function(e){return i.a.get(e,"timezone")}))},Hlv8:function(e,t,n){e.exports={"palette--primary":"#2679c7","palette--primary-contrast":"#fff","palette--secondary":"#2679c7","palette--secondary-contrast":"#fff","colors--page-loader-background":"palette[primary-contrast]","colors--page-loader-contrast":"palette[primary]","colors--page-overlay-background":"rgba(0,0,0,0.4)","colors--page-toolbar-background":"#fff","colors--page-toolbar-contrast":"#38556a","colors--page-toolbar-button-background":"rgba(0,0,0,0)","colors--page-toolbar-button-contrast":"#38556a","colors--page-toolbar-button-disabled-background":"rgba(0,0,0,0)","colors--page-toolbar-button-disabled-contrast":"#9e9e9e","colors--page-background":"#fff","colors--page-contrast":"#485054","colors--page-h1":"#485054","colors--surface-background":"#fff","colors--surface-contrast":"#757575","colors--surface-h2":"#38556a","colors--surface-h3":"#000","colors--button-raised-base-background":"#fff","colors--button-raised-base-contrast":"#212121","colors--button-raised-primary-background":"palette[primary]","colors--button-raised-primary-contrast":"palette[primary-contrast]","colors--button-raised-secondary-background":"palette[secondary]","colors--button-raised-secondary-contrast":"palette[secondary-contrast]","colors--button-raised-disabled-background":"#e0e0e0","colors--button-raised-disabled-contrast":"#757575","colors--button-flat-base-background":"rgba(0,0,0,0)","colors--button-flat-base-contrast":"#595959","colors--button-flat-primary-background":"rgba(0,0,0,0)","colors--button-flat-primary-contrast":"palette[primary]","colors--button-flat-secondary-background":"rgba(0,0,0,0)","colors--button-flat-secondary-contrast":"palette[secondary]","colors--button-flat-disabled-background":"rgba(0,0,0,0)","colors--button-flat-disabled-contrast":"#9e9e9e","colors--selection-control-selected":"palette[secondary]","colors--selection-control-unselected":"#757575","colors--selection-control-disabled":"#9e9e9e","colors--status-error":"#d5122c","colors--status-info":"#2679c7","colors--status-success":"#6eac52","colors--status-unknown":"#485054","colors--status-warning":"#e87511","colors--status-restricted":"#485054","colors--status-completed":"#1d2515","colors--status-open":"#005e8a","colors--tooltip-background":"#333","colors--tooltip-contrast":"#fff","colors--tooltip-button-background":"rgba(0,0,0,0)","colors--tooltip-button-contrast":"#fff","colors--tooltip-button-disabled-background":"rgba(0,0,0,0)","colors--tooltip-button-disabled-contrast":"#9e9e9e","typography--page-font-family":'"Source Sans Pro", sans-serif',"typography--page-h1-font-size":"24px","typography--page-h1-font-weight":"normal","typography--page-h1-line-height":"40px","typography--surface-h2-font-size":"15px","typography--surface-h2-font-weight":"bold","typography--surface-h2-line-height":"18px","typography--surface-h3-font-size":"20px","typography--surface-h3-font-weight":"normal","typography--surface-h3-line-height":"28px"}},HmrS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("LvDl"),a=n.n(r);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i={RUNNING:"running",CLOSED:"closed",SUSPENDED:"suspended"},c=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){if(!i.destroyed){var t=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(t);for(var n=0,r=t.length,o=0;o<r;o++)n+=t[o];var c=n/r;c/=200,a.a.isFunction(i.audioInfoHandler)&&i.audioInfoHandler(c,t),requestAnimationFrame((function(){i.checkForAudioInput(e)}))}},(r="checkForAudioInput")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.mediaStream=t,this._init()}var t,n,r;return t=e,(n=[{key:"_init",value:function(){var e=window.AudioContext||window.webkitAudioContext;if(!e)throw new Error("AudioContext is not supported in this browser");this.audioContext=new e;var t=this.audioContext.createMediaStreamSource(this.mediaStream),n=this.audioContext.createAnalyser(),r=this.audioContext.createGain();t.connect(n),n.fftSize=512,n.minDecibels=-75,n.smoothingTimeConstant=.5,n.connect(r),r.gain.value=0,r.connect(this.audioContext.destination),this.checkForAudioInput(n)}},{key:"destroy",value:function(){this.audioContext.onstatechange=null,this.audioContext.audioInfoHandler=null,this.audioContext.close(),this.destroyed=!0}},{key:"onAudioLevelInfo",value:function(e){this.audioInfoHandler=e}},{key:"resume",value:function(){this.audioContext.resume()}},{key:"onStateChange",value:function(e){e(this.audioContext.state),this.audioContext.onstatechange=function(t){e(t.target.state)}}}])&&o(t.prototype,n),r&&o(t,r),e}();t.b=c},HqXl:function(e,t,n){},"IF/7":function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return m}));var r=n("fpsG"),a=n("LvDl"),o=n.n(a),i=function(e){return e&&e.roles&&e.roles.includes(r.a.STUDENT)},c=function(e){return e&&e.roles&&e.roles.includes(r.a.EDUCATOR)},s=function(e){return e&&e.roles&&e.roles.includes(r.a.SUPER_EDUCATOR)},u=function(e){return e&&e.roles&&e.roles.includes(r.a.TEST_STUDENT)},l=function(e){return e&&e.roles&&e.roles.includes(r.a.CONTENT_DEVELOPER)},d=function(e){return o.a.sortBy(e,["firstName","lastName","dbId"])},f=function(e,t){return e&&t&&e.dbId===t.dbId},p=function(e,t){return i(t)&&!f(e,t)},m=function(e,t,n){return i(t)&&!f(e,t)&&o.a.find(n,{dbId:t.dbId})}},IwvU:function(e,t,n){"use strict";t.a={CONFIGURATION:"configuration",GRADEBOOK:"gradebook",GRADING:"grading"}},"J/33":function(e,t,n){"use strict";var r=n("etP2");n.d(t,"a",(function(){return r.a}));var a=n("sjRd");n.d(t,"b",(function(){return a.a}))},J1aS:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("q1tI");n("PhW7"),n("H3v6");function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={SUCCESS:"[OneDrive iframe] File picker success",ERROR:"[OneDrive iframe] File picker error",CLOSE:"[OneDrive iframe] File picker closed",LOADED:"[OneDrive iframe] File",MOUNTED:"[OneDrive iframe] Mounted",SET_CONFIG:"[OneDrive iframe] Set config",OPEN_DIALOG:"[OneDrive iframe] Open dialog"},d=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=i(t).call(this,e),n=!o||"object"!==a(o)&&"function"!==typeof o?s(r):o,u(s(s(n)),"oneDriveLoaded",(function(){n.broadcastEvent(l.LOADED)})),u(s(s(n)),"initOneDrive",(function(){var e=document.createElement("script");e.type="text/javascript";var t=n.oneDriveLoaded;e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()},e.src="https://js.live.net/v6.0/OneDrive.js",e.setAttribute("client-id",n.state.config.appKey),e.setAttribute("id","onedrive-js"),document.getElementsByTagName("head")[0].appendChild(e)})),n.state={isLoading:!1,hasError:!1,config:null},n}var n,r,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;document.addEventListener(l.SET_CONFIG,(function(t){var n=t.detail,r=n.mediaType,a=n.config;e.mediaType=r,e.setConfig(a)})),document.addEventListener(l.OPEN_DIALOG,(function(){e.openDialog()})),setTimeout((function(){e.broadcastEvent(l.MOUNTED)}),0),this.restoreConfig()}},{key:"setConfig",value:function(e){this.config=e,sessionStorage.setItem("MediaType",JSON.stringify(e)),this.setState({config:e},this.initOneDrive)}},{key:"restoreConfig",value:function(){var e=sessionStorage.getItem("MediaType");e&&this.setConfig(JSON.parse(e))}},{key:"openDialog",value:function(){window.OneDrive.open({clientId:this.config.appKey,linkType:"downloadLink",multiSelect:this.multiselect,success:this.onSuccess.bind(this),cancel:this.onCancel.bind(this),error:this.onError.bind(this)})}},{key:"broadcastEvent",value:function(e,t){var n=new CustomEvent(e,{detail:t});window.parent.document.dispatchEvent(n)}},{key:"onSuccess",value:function(e){this.broadcastEvent(l.SUCCESS,e)}},{key:"onError",value:function(e){this.broadcastEvent(l.ERROR,e)}},{key:"onCancel",value:function(){this.broadcastEvent(l.CLOSE)}},{key:"render",value:function(){return null}}])&&o(n.prototype,r),d&&o(n,d),t}(r.Component);t.b=d},J3bt:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("4XMt"),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("1CkY");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return f.a.pick(e,Object.keys(w.componentProps))}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,h(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(s.F,b({},E(this.props),{className:l()("input-select",this.props.className),disabled:!this.props.enabled,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledby}),this.props.children)}}])&&y(n.prototype,r),o&&y(n,o),t}(r.Component),S={TOP_LEFT:s.F.Positions.TOP_LEFT,TOP_RIGHT:s.F.Positions.TOP_RIGHT,BOTTOM_LEFT:s.F.Positions.BOTTOM_LEFT,BOTTOM_RIGHT:s.F.Positions.BOTTOM_RIGHT,BELOW:s.F.Positions.BELOW};w.componentProps={anchor:i.a.object,className:i.a.string,error:i.a.bool,errorText:i.a.string,fullWidth:i.a.bool,id:i.a.string,itemLabel:i.a.string,itemValue:i.a.string,label:i.a.string,menuItems:i.a.array,onChange:i.a.func,placeholder:i.a.string,position:i.a.string,sameWidth:i.a.bool,simplifiedMenu:i.a.bool,stripActiveItem:i.a.bool,style:i.a.object,type:i.a.string,value:i.a.any},w.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},w.componentProps,{enabled:i.a.bool,ariaLabel:i.a.string,ariaLabelledby:i.a.string,tooltip:i.a.any}),w.defaultProps={enabled:!0,fullWidth:!0,position:S.TOP_RIGHT,sameWidth:!0,simplifiedMenu:!1,stripActiveItem:!1},t.b=Object(c.c)(w)},J4l3:function(e,t,n){e.exports=n.p+"static/media/bongo.60fa7ade.svg"},J4sO:function(e,t,n){"use strict";t.a={READY:"PROCESSING_STATUS__READY",PROGRESS:"PROCESSING_STATUS__IN_PROGRESS",ERROR:"PROCESSING_STATUS__ERROR",UNREACHABLE:"PROCESSING_STATUS__UNREACHABLE"}},Jwcr:function(e,t,n){},Jxis:function(e,t,n){e.exports=n.p+"static/media/examplerubric.fe7b4107.csv"},K2Ti:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("uhBA"),a=n.n(r),o=n("8bCP"),i=n("LvDl"),c=n.n(i);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function d(e,t,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=Object(o.c)("video-tracking"),y={PLAY:"PLAY",PAUSE:"PAUSE",SEEK:"SEEK",COMPLETE:"COMPLETE",DURATION_AVAILABLE:"DURATION_AVAILABLE"},v=null,h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=l(this,f(t).call(this)),v?l(e,v):(v=m(m(e)),e)}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"emit",value:function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];b.debug("Emitting Event [".concat(e,"] for [").concat(n.playerId,"]: ").concat(JSON.stringify(c.a.omit(n,"playerId"))),a),d(f(t.prototype),"emit",this).call(this,e,n)}},{key:"play",value:function(e){this.emit(y.PLAY,e)}},{key:"pause",value:function(e){this.emit(y.PAUSE,e)}},{key:"seek",value:function(e){this.emit(y.SEEK,e)}},{key:"complete",value:function(e){this.emit(y.COMPLETE,e)}},{key:"durationAvailable",value:function(e){this.emit(y.DURATION_AVAILABLE,e)}},{key:"__listenToPlayerEvent",value:function(e,t,n){var r=this,a=function(r){if(r&&r.playerId===e)try{n(r)}catch(a){b.error('GlobalPlayerEventEmitter:: Handler for player(id="'.concat(e,'") event "').concat(t,'" failed with error'),a)}};return this.on(t,a),function(){r.off(t,a)}}},{key:"onPlay",value:function(e,t){return this.__listenToPlayerEvent(e,y.PLAY,t)}},{key:"onPause",value:function(e,t){return this.__listenToPlayerEvent(e,y.PAUSE,t)}},{key:"onSeek",value:function(e,t){return this.__listenToPlayerEvent(e,y.SEEK,t)}},{key:"onComplete",value:function(e,t){return this.__listenToPlayerEvent(e,y.COMPLETE,t)}},{key:"onDurationAvailable",value:function(e,t){return this.__listenToPlayerEvent(e,y.DURATION_AVAILABLE,t)}}])&&u(n.prototype,r),a&&u(n,a),t}(a.a);h.EVENTS=y},KTZk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("wNa6"),a=n("o41Y"),o=n("8bCP"),i=function(){try{var e=r.a.getState().common.config.institution;return Object(a.h)(e)}catch(t){return o.b.error("Unable to determine institution due to error:",t),!1}}},KeFY:function(e,t,n){},KhDq:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l),f=n("8For"),p=n("LFYD");n("8+7o");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y={ERROR:"error",INFO:"info",SUCCESS:"success",UNKNOWN:"unknown",WARNING:"warning",RESTRICTED:"restricted"};function v(e){return d.a.pick(e,Object.keys(h.componentProps))}var h=function(e){var t=e.i18n,n=e.ariaLabel,r=e.enableTooltip,o=e.tooltip,i=null,c=null,s=null,l=null;switch(e.type){case"error":s=t._("Error"),l=t._("Error, icon"),c="status-icon--error",i=p.a.STATUS_ERROR;break;case"info":s=t._("Info"),l=t._("Info, icon"),c="status-icon--info",i=p.a.STATUS_INFO;break;case"success":s=t._("Success"),l=t._("Success, icon"),c="status-icon--success",i=p.a.STATUS_SUCCESS;break;case"warning":s=t._("Warning"),l=t._("Warning, icon"),c="status-icon--warning",i=p.a.STATUS_WARNING;break;case"restricted":s=t._("Restricted"),l=t._("Restricted, icon"),c="status-icon--restricted",i=p.a.STATUS_RESTRICTED;break;default:s=t._("Unknown"),l=t._("Unknown, icon"),c="status-icon--unknown",i=p.a.STATUS_UNKNOWN}var m={};r&&(o&&(m=o),m.label||(m.label=s),m.style={display:"flex"},m.className=u()("status-icon-tooltip",m.className)),n&&(l=n);var y=u()("status-icon",e.className,c);return a.a.createElement(f.a,b({},v(e),{className:y,ariaLabel:l,tooltip:m}),d.a.has(e,"children")?e.children:i)};h.componentProps={className:i.a.string,iconClassName:i.a.string,primary:i.a.bool,secondary:i.a.bool,title:i.a.string,enabled:i.a.bool,ariaLabel:i.a.string,role:i.a.string},h.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},h.componentProps,{enableTooltip:i.a.bool,type:i.a.oneOf(Object.values(y)),tooltip:i.a.any}),h.defaultProps={enableTooltip:!0,type:"unknown"},t.b=Object(c.withI18n)()(h)},L2DV:function(e,t,n){"use strict";t.a={SYSTEM:"TYPE__SYSTEM",STUDENT:"TYPE__STUDENT"}},L9xK:function(e,t,n){},LFYD:function(e,t,n){"use strict";t.a={ACCESS_TIME:"access_time",ACCOUNT:"account_balance",ACTIVITY:"show_chart",ANNOUNCEMENT:"announcement",ASSESSMENT:"assessment",ASSIGNMENTS:"view_list",ADD:"add",ADD_CIRCLE:"add_circle",ADD_PERSON:"person_add",ADD_GROUP:"group_add",ADJUST:"adjust",ALARM_OFF:"alarm_off",APP_WINDOW:"web",ARROW_DOWN:"arrow_drop_down",ARROW_UP:"arrow_drop_up",ATTACH_FILE:"attach_file",BACK:"arrow_back",CANCEL:"cancel",CHAT:"mode_comment",CHECK:"check",CHECK_BOX_CHECKED:"check_box",CHECK_BOX_UNCHECKED:"check_box_outline_blank",CHECK_CIRCLE:"check_circle",CHAT_ORIGINAL:"chat",CLOSE:"close",CLOSED_CAPTION:"closed_caption",COMMENT:"comment",CONFIGURE:"build",CONTENT_COPY:"content_copy",DELETE:"delete",DESCRIPTION:"description",DESKTOP:"desktop_mac",DESKTOP_WINDOWS:"desktop_windows",DONE:"done",DONE_ALL:"done_all",DOWNLOAD:"get_app",DRAG_HANDLE:"drag_handle",EDIT:"mode_edit",ERROR:"error",EVENT:"event",EXIT:"exit_to_app",EXPAND:"expand_more",FAST_FORWARD:"fast_forward",FAST_REWIND:"fast_rewind",FEEDBACK:"feedback",FORWARD:"arrow_forward",FILE:"insert_drive_file",FILE_DOWNLOAD:"file_download",FILE_UPLOAD:"file_upload",FILTER:"filter_list",FULLSCREEN:"fullscreen",FULLSCREEN_EXIT:"fullscreen_exit",GOAT:"goat",GRADE:"assignment_turned_in",GRADEBOOK:"assignment",GROUP:"group",HELP:"help",HELP_OUTLINE:"help_outline",HOURGLASS_EMPTY:"hourglass_empty",INFO_OUTLINE:"info_outline",LEFT:"keyboard_arrow_left",LIBRARY:"local_library",LIBRARY_BOOKS:"library_books",LINK:"link",LIST_ADD:"playlist_add",LIST_NUMBERED:"format_list_numbered",LOCKED:"lock_outline",MENU:"menu",MERGE:"merge_type",MENU_VERT:"more_vert",MIC:"mic",MILESTONE:"room",MILESTONE_ADD:"add_location",MILESTONE_PAST_DUE:"schedule",MILESTONE_COMPLETED:"check",MILESTONE_OPEN:"radio_button_unchecked",NAVIGATE_BEFORE:"navigate_before",OPEN_IN_BROWSER:"open_in_browser",OPEN_IN_NEW:"open_in_new",PAUSE:"pause",PEER_REVIEW:"assignment_turned_in",PEOPLE:"people",PERSON:"person",PHOTO:"photo",PICTURE_IN_PICTURE:"picture_in_picture",PLAY:"play_arrow",PLAY_ARROW:"play_arrow",PLAY_CIRCLE_OUTLINE:"play_circle_outline",PREVIEW:"visibility",QUESTION_ANSWER:"question_answer",RECORDING_DOT:"fiber_manual_record",REMOVE:"remove",REORDER:"reorder",REPLAY:"replay",RIGHT:"keyboard_arrow_right",RUBRIC:"grid_on",RUBRIC_INCOMPLETE_WARNING:"warning",SAVE:"save",SEARCH:"search",SETTINGS:"settings",SCHEDULE:"schedule",SEND:"send",SHORT_TEXT:"short_text",SPEAKER_NOTES:"speaker_notes",STAR:"star",STAR_EMPTY:"star_border",STAR_HALF:"star_half",STATUS_COMPLETE:"check_circle",STATUS_ERROR:"error",STATUS_INCOMPLETE:"remove_circle",STATUS_INFO:"info",STATUS_RESTRICTED:"lock",STATUS_SUCCESS:"check_circle",STATUS_UNKNOWN:"help",STATUS_WARNING:"warning",SUPPORT:"person_pin",SWAP:"swap_horiz",SWAP_VERT:"swap_vert",TASK_INCOMPLETE:"radio_button_unchecked",TASK_COMPLETE:"check",THUMB_UP:"thumb_up",TIMELAPSE:"timelapse",TIMER:"timer",UNLOCKED:"lock_open",UPDATE:"update",VIDEOCAM:"videocam",VIDEO_ADD:"video_call",VIDEO_PROCESSING:"hourglass_empty",VIDEO_READY:"check",VIDEO_WARNING:"warning",VIDEO_WITHDRAW:"remove_circle",VIEW_COLUMN:"view_column",VIEW_LIST:"view_list",VIEW_MODULE:"view_module",VOLUME_DOWN:"volume_down",VOLUME_MUTE:"volume_mute",VOLUME_OFF:"volume_off",VOLUME_UP:"volume_up",WIFI:"wifi",ZOOM_IN:"zoom_in",DATE_RANGE:"date_range",LIST:"list",COLLECTIONS_BOOKMARK:"collections_bookmark",EMAIL:"email"}},LKel:function(e,t,n){},LMP5:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return g}));var r=n("+Ft7");function a(e,t){return t.setFullYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(e.getDate()),t}function o(e){return Math.floor(e.getTime()/1e3)}function i(e){var t=new Date(e.getTime());return t.setHours(0,0,0,0),t}function c(e){var t=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600);return isFinite(t)||(t=0),isFinite(n)||(n=0),isFinite(r)||(r=0),{seconds:t,minutes:n,hours:r}}function s(e){return e<10?"0"+e:""+e}function u(e,t){return e?new Intl.DateTimeFormat(t,r.a.SHORT).format(new Date(1e3*e)):null}function l(e,t,n){return e?new Intl.DateTimeFormat(n,t).format(e):null}function d(e){if(!e)return null;var t=new Date(1e3*e),n=new Date;if(t<n)return{isPastDue:!0,isToday:!1,days:null,hours:null,minutes:null,totalTimeMillis:t.getTime()-n.getTime()};var r={isPastDue:!1,isToday:i(t)===i(n),days:null,hours:null,minutes:null,totalTimeMillis:null},a=t.getTime()-n.getTime();return r.totalTimeMillis=a,a/=6e4,r.minutes=Math.floor(a%60),a/=60,r.hours=Math.floor(a%24),a/=24,r.days=Math.floor(a),r}function f(e,t,n){if(1===t)switch(e){case"d":return n._("{value} day",{value:t});case"h":return n._("{value} hour",{value:t});case"m":return n._("{value} minute",{value:t});default:return""}else switch(e){case"d":return n._("{value} days",{value:t});case"h":return n._("{value} hours",{value:t});case"m":return n._("{value} minutes",{value:t});default:return""}}function p(e,t,n){var r=f("h",e,n),a=f("m",t,n);return e>0?t>0?n._("{hoursLabel}, {minutesLabel}",{hoursLabel:r,minutesLabel:a}):n._("{hoursLabel}",{hoursLabel:r}):t>0?n._("{minutesLabel}",{minutesLabel:a}):n._("Now")}function m(e,t){if(!e)return null;if(e.isPastDue)return t._("Past due");var n=e.minutes,r=e.hours,a=e.days;return e.isToday?p(r,n,t):a>=1?function(e,t,n){var r=f("d",e,n),a=f("h",t,n);return e>0?e<7&&t>0?n._("{daysLabel}, {hoursLabel}",{daysLabel:r,hoursLabel:a}):n._("{daysLabel}",{daysLabel:r}):n._("{hoursLabel}",{hoursLabel:a})}(a,r,t):p(r,n,t)}function b(e){e<0&&(e=0);var t=c(e),n=t.hours,r=t.minutes,a=t.seconds;return r=60*n+r,a=s(a),r=s(r),"".concat(r,":").concat(a)}function y(e){e<0&&(e=0);var t=c(e),n=t.hours,r=t.minutes,a=t.seconds;return r=60*n+r,a=s(a),r=s(r),"".concat(r,":").concat(a)}var v=function(e){return new Date(1e3*e)},h=function(e){return Math.floor(e.getTime()/1e3)},g=function(e){var t=c(e),n=t.seconds,r=t.minutes,a=t.hours;return n=s(n),r=s(r+60*a),"".concat(r,":").concat(n)}},LcIb:function(e,t,n){},LlgI:function(e,t,n){},LsJI:function(e,t,n){},Luur:function(e,t,n){},"M+Ya":function(e,t,n){},MKu0:function(e,t,n){},MOhp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"n",(function(){return y})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"u",(function(){return E})),n.d(t,"v",(function(){return w})),n.d(t,"p",(function(){return S})),n.d(t,"w",(function(){return O})),n.d(t,"x",(function(){return C})),n.d(t,"y",(function(){return _})),n.d(t,"z",(function(){return T})),n.d(t,"q",(function(){return I})),n.d(t,"r",(function(){return P}));var r="[Config] Add file transfer config",a="[Config] Set file transfer config has error",o="[Config] Set file transfer config is loading",i="[Config] Add file upload config",c="[Config] Set file upload config has error",s="[Config] Set file upload config is loading",u="[Config] Reset file upload config",l="[Config] Set institution",d="[Config] Set LTI scope",f="[Config] Set term class info",p="[Config] Set theme",m="[Config] Set environment configuration",b="[Config] Set feature configuration",y=function(e){return{type:r,payload:e}},v=function(e){return{type:a,payload:e}},h=function(e){return{type:o,payload:e}},g=function(e){return{type:i,payload:e}},E=function(e){return{type:c,payload:e}},w=function(e){return{type:s,payload:e}},S=function(){return{type:u}},O=function(e){return{type:l,payload:e}},C=function(e){return{type:d,payload:e}},_=function(e){return{type:f,payload:e}},T=function(e){return{type:p,payload:e}},I=function(e){return{type:m,payload:e}},P=function(e){return{type:b,payload:e}}},MRtt:function(e,t,n){},Md0H:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("ZD0w"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d),p=n("qSfp"),m=n("LFYD"),b=n("2Gxn"),y=n("kbsL"),v=n("YSsg"),h=n("iGlQ");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={isDialogVisible:!1},T=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=w(t).call(this,e),n=!a||"object"!==g(a)&&"function"!==typeof a?O(r):a,C(O(O(n)),"hideDialog",(function(){n.setState({isDialogVisible:!1})})),C(O(O(n)),"showDialog",(function(){n.setState({isDialogVisible:!0})})),n.state=_,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.className,r=e.menuItems,o=this.state.isDialogVisible;return a.a.createElement(c.M,{className:n},a.a.createElement(y.c,{id:"button-table-menu-options",className:"menu-vert",ariaLabel:t._("Additional Options"),onClick:this.showDialog},m.a.MENU_VERT),o&&a.a.createElement(v.a,{id:"column-menu-dialog",contentClassName:"column-menu-dialog-content",title:t._("Select an Action"),hasCloseButton:!0,onHide:this.hideDialog,onClose:this.hideDialog,visible:o,modal:!1,portal:!0},a.a.createElement(h.b,{className:"column-menu-dialog-list",onClick:this.hideDialog},r)))}}])&&E(n.prototype,r),o&&E(n,o),t}(r.Component);T.componentProps={className:i.a.string,menuItems:i.a.array},T.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},T.passThroughProps);var I=Object(s.withI18n)()(T);n("i5n6");function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R="column-menu-button",A="button-menu";function j(e){var t=e.i18n,n=e.inkContainerClassName,r=b.b(),o=e.ariaLabel;return null===o&&(o=t._("Additional Options")),r?a.a.createElement(I,e):a.a.createElement(c.B,P({},function(e){return f.a.pick(e,Object.keys(j.componentProps))}(e),{className:l()(R,e.className),inkContainerClassName:l()(p.a.INK_OVERLAY,n),menuClassName:Object(p.c)(e,A),disabled:!e.enabled,"aria-label":o}),m.a.MENU_VERT)}j.componentProps={className:i.a.string,icon:i.a.bool,inkContainerClassName:i.a.string,menuItems:i.a.array},j.propTypes={ariaLabel:i.a.string,enabled:i.a.bool},j.defaultProps={ariaLabel:null,enabled:!0,icon:!0};t.a=Object(s.withI18n)()(j)},MgaS:function(e,t,n){},MvlZ:function(e,t,n){},MzIV:function(e,t,n){"use strict";var r=n("G/cw"),a=n("q1tI"),o=n.n(a),i=n("/MKj"),c=n("17x9"),s=n.n(c),u=n("Wme0"),l=n("45tj"),d=n("LMP5");function f(e){var t=e.unixTime,n=e.locale;return t?o.a.createElement("span",null,Object(d.h)(t,Object(l.d)(n))):null}f.propTypes={unixTime:s.a.number};var p=Object(i.b)((function(e){return{locale:u.a(e)}}))(f);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return p}))},"N+US":function(e,t,n){},N90w:function(e,t,n){"use strict";var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}));var o=n("csv8").a,i=(a(r={},"gradeDraftsFeatureAllowed","DRAFT_GRADING"),a(r,"reflectQuestionsAllowed","REFLECTION_QUESTIONS"),a(r,o,"PEER_REVIEW_GRADING"),a(r,"showTermsAndConditions","TERMS_AND_CONDITIONS"),a(r,"userNotificationsAllowed","USER_NOTIFICATIONS"),a(r,"isAutoGradingAllowed","AUTO_GRADING"),r),c={DRAFT_GRADING:"gradeDraftsFeatureAllowed",REFLECTION_QUESTIONS:"reflectQuestionsAllowed",PEER_REVIEW_GRADING:o,TERMS_AND_CONDITIONS:"showTermsAndConditions",USER_NOTIFICATIONS:"userNotificationsAllowed",ACTIVITY_TYPES:"allowedActivitiesTypes",LEGACY_FREEMIUM:"isLegacyFreemium",AUTO_GRADING:"isAutoGradingAllowed"};t.b=c},NEnp:function(e,t,n){},NQgo:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("4XMt"),s=n("xrVw"),u=n("LvDl"),l=n.n(u);var d=function(e){return a.a.createElement(s.b,function(e){return l.a.pick(e,Object.keys(d.componentProps))}(e),e.children)};d.componentProps={className:i.a.string,style:i.a.any};var f=Object(c.c)(d),p=n("e/6q"),m=n("wNa6");n("n0/K");function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=[{backgroundColor:"#1A3264",color:"#FFF"},{backgroundColor:"#D5122C",color:"#FFF"},{backgroundColor:"#c9500a",color:"#FFF"},{backgroundColor:"#040503",color:"#FFF"},{backgroundColor:"#D1335B",color:"#FFF"},{backgroundColor:"#4d8234",color:"#FFF"},{backgroundColor:"#008198",color:"#FFF"},{backgroundColor:"#ad57a0",color:"#FFF"},{backgroundColor:"#00856f",color:"#FFF"}],v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getAvatarStyleForName",value:function(e){var t=m.a.getState().common.avatar,n=t.currentUsers,r=t.currentInitials,a=t.currentColorIndex,o=this.getAvatarInitialsForName(e);if(n[e])return n[e];if(a>y.length-1)return m.a.dispatch(p.d()),this.getAvatarStyleForName(e);if(r[o]){var i=r[o];if(i.indexOf(a)>0){for(var c=0;c<y.length;c++)if(i.indexOf(c)<0)return m.a.dispatch(p.c(e,o,y[c],--a)),y[c];return m.a.dispatch(p.c(e,o,y[0],--a)),y[0]}return m.a.dispatch(p.c(e,o,y[a],a)),y[a]}return m.a.dispatch(p.c(e,o,y[a],a)),y[a]}},{key:"getAvatarInitialsForName",value:function(e){if(!e)return"?";var t=e.split(" ");return 1===t.length?t[0].substring(0,1):t.length>1?t[0].substring(0,1)+t[1].substring(0,1):"?"}}])&&b(t.prototype,n),r&&b(t,r),e}()),h=n("TSYQ"),g=n.n(h),E=function(e){var t=l.a.clone(e),n=t.tooltip||{};return n.label=t.value,n.distance=n.distance||10,a.a.createElement(f,{tooltip:n,className:g()("avatar",t.className),style:v.getAvatarStyleForName(t.value)},t.value?v.getAvatarInitialsForName(t.value):null)};E.propTypes={className:i.a.string,value:i.a.string};t.a=E},NVgV:function(e,t,n){},NWOK:function(e,t,n){},NXr4:function(e,t,n){},Nj73:function(e,t,n){},NlSD:function(e,t,n){"use strict";var r=n("RBRe"),a=n("h4t+"),o=a.a(),i=a.b();t.a=Object(r.a)(o,i)},"O+79":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n("lTCR"),a=n.n(r),o=n("92Bf"),i=n("mxsA");function c(){var e=u(["\n    fragment AnonymousComment on ActivityResultCommentAnonymous {\n        dbId\n        commenter {\n            ...AnonymousUser\n        }\n        submitter {\n            dbId\n            firstName\n            lastName\n        }\n        createdAt\n        updatedAt\n        commentText\n        commentMedia {\n            ...MediaBasic\n        }\n        syncTime\n        isDeleted\n    }\n    ","\n    ","\n"]);return c=function(){return e},e}function s(){var e=u(["\n    fragment Comment on ActivityResultCommentWithCommenter {\n        dbId\n        commenter {\n            dbId\n            firstName\n            lastName\n            roles\n        }\n        submitter {\n            dbId\n            firstName\n            lastName\n        }\n        createdAt\n        updatedAt\n        commentText\n        commentMedia {\n            ...MediaBasic\n        }\n        syncTime\n        isDeleted\n    }\n    ","\n"]);return s=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=a()(s(),o.b),d=a()(c(),i.a,o.b)},O7QZ:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/W66"),s=n("9C/b"),u=n("/MKj"),l=n("ZD0w"),d=n("hHKf"),f=n("kbsL"),p=n("giI2"),m=n("oe1p"),b=n("J/33"),y=n("xHcp"),v=n("Wtf/"),h=n("LFYD"),g=n("HCbP"),E=n("vRGJ"),w=n.n(E),S=n("VmXB"),O=n("iFdk");function C(e){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={resetDialogVisible:!1},N=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=P(t).call(this,e),n=!o||"object"!==C(o)&&"function"!==typeof o?A(r):o,j(A(A(n)),"resetSubmission",(function(){n.props.onResetSubmission?n.props.onResetSubmission():n.setState({resetDialogVisible:!0})})),j(A(A(n)),"onResetDialogSubmit",(function(){var e=n.props,t=e.activityId,r=e.onResetComplete;y.a.deleteSubmission(+t).then((function(){r&&r()}))})),j(A(A(n)),"onResetDialogCancel",(function(){n.setState({resetDialogVisible:!1})})),j(A(A(n)),"defaultRemoveSubmissionCheck",(function(){var e=n.props.result;return e&&e.deletable})),j(A(A(n)),"canRemoveSubmission",(function(){var e=n.props.canRemoveSubmission;return e?e():n.defaultRemoveSubmissionCheck()})),j(A(A(n)),"getMenuItems",(function(){var e=n.props,t=e.menuActions,r=e.hideResetSubmission,o=e.i18n,i=n.canRemoveSubmission(),s=[];return t&&(s=T(t)),!i||r||n.props.lmsLocked||(s.length>0&&s.push(a.a.createElement(c.a,{key:"menu_item_divider[reset]"})),s.push({key:"_reset",onClick:n.resetSubmission,leftIcon:a.a.createElement(p.a,{ariaLabel:o._("Reset Submission, icon")},h.a.REPLAY),primaryText:a.a.createElement(l.Trans,{id:"Reset Submission"})})),s})),j(A(A(n)),"getCompiledPath",(function(e,t){return w.a.compile(e)(t)})),j(A(A(n)),"getQuickNav",(function(){var e=n.props,t=e.activityName,r=e.assignmentName,o=e.match,i=e.i18n,c=[];return g.a.isStudentAssignmentNavigationVisible()&&(o.params.classId&&c.push(a.a.createElement(m.e,{key:"assignment-nav-item",text:i._(O.a.ASSIGNMENTS.label),to:n.getCompiledPath(S.e.STUDENT_ACTIVITY_LIST,_({},o.params))})),(t||r)&&c.push(a.a.createElement(m.e,{key:"activity-name-nav-item",text:t||r}))),a.a.createElement(m.d,{navItems:c})})),n.state=k,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.removeSubmissionIsLoading,n=e.toolbarActions,r=e.termClass,o=e.i18n,i=this.state.resetDialogVisible,c=this.canRemoveSubmission(),s=[];return n&&(s=T(n)),a.a.createElement("div",null,a.a.createElement(b.b,{classId:r.dbId,actions:s,menuOptions:this.getMenuItems(),title:this.getQuickNav(),navigationDrawerType:m.b.STUDENT}),c&&a.a.createElement(d.a,{id:"remove-submission-dialog",title:o._("Reset Submission"),visible:i,actions:[a.a.createElement(f.a,{id:"button-reset-submission-dialog-cancel",secondary:!0,enabled:!t,onClick:this.onResetDialogCancel,ariaLabel:o._("Cancel")},a.a.createElement(l.Trans,{id:"Cancel"})),a.a.createElement(f.a,{id:"button-reset-submission-dialog-reset",primary:!0,isLoading:t,enabled:!t,onClick:this.onResetDialogSubmit,ariaLabel:o._("Reset")},a.a.createElement(l.Trans,{id:"Reset"}))]},a.a.createElement("p",null,a.a.createElement(l.Trans,{id:"Are you sure you want to reset this submission?"}))))}}])&&I(n.prototype,r),o&&I(n,o),t}(r.Component);N.propTypes={menuActions:i.a.array,toolbarActions:i.a.array,onResetSubmission:i.a.func,onResetComplete:i.a.func,canRemoveSubmission:i.a.func},N.defaultProps={menuActions:[],toolbarActions:[],hideResetSubmission:!1};t.a=Object(l.withI18n)()(Object(s.a)(Object(u.b)((function(e){return{activityId:v.getActivityId(e),lmsLocked:v.getLmsLocked(e),activityName:v.getActivityName(e),result:v.getActivityResult(e),termClass:v.getTermClass(e),removeSubmissionIsLoading:v.getRemoveSubmissionIsLoading(e)}}))(N)))},OPgC:function(e,t,n){},OWj0:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l}));var r="[Modal] Show modal",a="[Modal] Close modal",o="[Modal] Sow next modal",i="[Modal] Sow previous modal",c=function(e){return{type:r,payload:e}},s=function(){return{type:a}},u=function(e){return{type:o,payload:e}},l=function(e){return{type:i,payload:e}}},OZTn:function(e,t,n){},Ondw:function(e,t,n){"use strict";n.d(t,"s",(function(){return r})),n.d(t,"t",(function(){return a})),n.d(t,"C",(function(){return o})),n.d(t,"F",(function(){return i})),n.d(t,"x",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"y",(function(){return u})),n.d(t,"B",(function(){return l})),n.d(t,"r",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"n",(function(){return y})),n.d(t,"v",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"u",(function(){return g})),n.d(t,"m",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"A",(function(){return S})),n.d(t,"G",(function(){return O})),n.d(t,"d",(function(){return C})),n.d(t,"k",(function(){return _})),n.d(t,"c",(function(){return T})),n.d(t,"p",(function(){return I})),n.d(t,"j",(function(){return P})),n.d(t,"i",(function(){return R})),n.d(t,"w",(function(){return A})),n.d(t,"o",(function(){return j})),n.d(t,"E",(function(){return k})),n.d(t,"D",(function(){return N})),n.d(t,"q",(function(){return D})),n.d(t,"z",(function(){return L})),n.d(t,"Z",(function(){return M})),n.d(t,"ab",(function(){return x})),n.d(t,"gb",(function(){return F})),n.d(t,"kb",(function(){return V})),n.d(t,"ob",(function(){return G})),n.d(t,"fb",(function(){return U})),n.d(t,"eb",(function(){return q})),n.d(t,"K",(function(){return W})),n.d(t,"jb",(function(){return B})),n.d(t,"Y",(function(){return Q})),n.d(t,"H",(function(){return Y})),n.d(t,"M",(function(){return H})),n.d(t,"S",(function(){return z})),n.d(t,"N",(function(){return K})),n.d(t,"ib",(function(){return X})),n.d(t,"U",(function(){return $})),n.d(t,"bb",(function(){return Z})),n.d(t,"I",(function(){return J})),n.d(t,"cb",(function(){return ee})),n.d(t,"T",(function(){return te})),n.d(t,"P",(function(){return ne})),n.d(t,"hb",(function(){return re})),n.d(t,"L",(function(){return ae})),n.d(t,"R",(function(){return oe})),n.d(t,"J",(function(){return ie})),n.d(t,"W",(function(){return ce})),n.d(t,"db",(function(){return se})),n.d(t,"Q",(function(){return ue})),n.d(t,"O",(function(){return le})),n.d(t,"V",(function(){return de})),n.d(t,"mb",(function(){return fe})),n.d(t,"X",(function(){return me})),n.d(t,"nb",(function(){return be})),n.d(t,"lb",(function(){return ye}));var r="[Educator - Activity] Set activity data",a="[Educator - Activity] Set activity data with context",o="[Activity] Set is loading",i="[Activity-Grading] Set is showing group members",c="[Activity-Grading] Set educator grade for group",s="[Activity-Grading] Convert draft to final group grade",u="[Activity-Grading] Set educator grade for student",l="[Activity-Grading] Set is grade draft allowed",d="[Activity] Set activity comment loading",f="[Activity] Add activity comment",p="[Activity] Delete activity comment",m="[Activity] Edit activity comment",b="[Activity] Delete activity result",y="[Activity] Edit group name",v="[Activity] Set comment preset loading",h="[Activity-Grading] Add comment preset",g="[Activity-Grading] Set comment presets",E="[Activity-Grading] Edit comment preset",w="[Activity-Grading] Delete comment preset",S="[Activity] Set group creation loading",O="[Activity] Set student groups",C="[Activity] Add student groups",_="[Activity] Delete student group",T="[Activity] Add students to group",I="[Activity] Remove students from group",P="[Activity] Delete QA answer loading",R="[Activity] Delete QA answer",A="[Activity] Set delete result loading",j="[Activity-Grading] Refresh feedback comments",k="[Activity-Grading] Refresh is loading",N="[Activity] Set property",D="[Activity] Reset all data",L="[Activity-Grading] Set gradebook student data",M=function(e){return{type:r,payload:e}},x=function(e,t){return{type:a,payload:e,context:t}},F=function(e,t){return{type:L,payload:e,context:t}},V=function(e){return{type:o,payload:e}},G=function(e){return{type:i,payload:e}},U=function(e,t,n){return{type:u,payload:{activityId:e,studentId:t,grade:n}}},q=function(e,t){return{type:c,payload:{groupId:e,grade:t}}},W=function(e){return{type:s,payload:{groupId:e}}},B=function(e){return{type:l,payload:e}},Q=function(e){return{type:d,payload:e}},Y=function(e){return{type:f,payload:e}},H=function(e){return{type:p,payload:e}},z=function(e){return{type:m,payload:e}},K=function(e){return{type:b,payload:e}},X=function(e){return{type:"[Activity] Editing group name",payload:e}},$=function(e){return{type:y,payload:e}},Z=function(e){return{type:v,payload:e}},J=function(e){return{type:h,payload:e}},ee=function(e){return{type:g,payload:e}},te=function(e){return{type:E,payload:e}},ne=function(e){return{type:w,payload:e}},re=function(e){return{type:S,payload:e}},ae=function(e){return{type:C,payload:e}},oe=function(e){return{type:_,payload:e}},ie=function(e){return{type:T,payload:e}},ce=function(e){return{type:I,payload:e}},se=function(e){return{type:P,payload:e}},ue=function(e){return{type:R,payload:e}},le=function(e){return{type:A,payload:e}},de=function(e){return{type:j,payload:e}},fe=function(e){return{type:k,payload:e}},pe=function(e,t){return{type:N,payload:{propPath:e,value:t}}},me=function(){return{type:D}},be=function(e){return pe("activityData.dataForOneStudent.studentGroup.reviewReleasedAt",e)},ye=function(e){return pe("activityData.dataForOneStudent.studentGroup.isReviewAnonymous",e)}},Onr9:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("qSfp"),s=n("QMWu"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("mFy2");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){return f.a.pick(e,Object.keys(y.componentProps))}var y=function(e){return a.a.createElement(c.b,m({},b(e),{className:l()(e.className),icon:!0}),e.isLoading?a.a.createElement(s.a,{id:"button-icon-progress",className:"button-icon-progress"}):e.children)};y.componentProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},c.b.propTypes),y.propTypes={className:i.a.string,children:i.a.node,enabled:i.a.bool,isLoading:i.a.bool},y.defaultProps={isLoading:!1,enabled:!0},t.a=y},"P/HN":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("yzbm"),u=n("kbsL"),l=n("giI2"),d=n("4XMt"),f=n("TSYQ"),p=n.n(f);n("jEQv");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,v(t).call(this,e))).state={fileName:null},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e,t){var n=this.props.multiple,r=e.concat(t);if(0!==r.length){if(n)return this.props.onFile(e,t);if(this.setState({fileName:r[0].name}),this.props.input){var a=this.props.input.onChange;a(e[0])}else this.props.onFile&&this.props.onFile([e[0]],[t[0]])}}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.text,r=e.multiple,o=e.onFileDialog,i=e.disabled,c=e.input,d=e.showFileName,f=e.accept,m=e.inputProps,b=e.icon,y=(c&&c.value?c.value.name:null)||this.state.fileName;n||(n=t._("Add File"));var v=null;return b&&(v=a.a.createElement(l.a,null,b)),a.a.createElement(s.a,{className:p()("c-file-button",this.props.className),activeClassName:"file-button-drop-area--active",multiple:r,onClick:o,disabled:i,accept:f,inputProps:m,onDrop:this.onChange.bind(this)},a.a.createElement(u.f,{id:"button-file-upload",className:"button-file-upload",ariaLabel:n,enabled:!i},a.a.createElement(a.a.Fragment,null,v,n)),d?a.a.createElement("span",{className:"c-file-button__file-name",title:y},y||t._("No file selected")):null)}}])&&b(n.prototype,r),o&&b(n,o),t}(r.Component);g.defaultProps={multiple:!1,disabled:!1,showFileName:!0,text:null,icon:null,inputProps:{}},g.propTypes={buttonType:i.a.string,icon:i.a.any,inputProps:i.a.object,text:i.a.string,onFile:i.a.func,multiple:i.a.bool,onFileDialog:i.a.func,disabled:i.a.bool,showFileName:i.a.bool,accept:i.a.array,tooltip:i.a.any},t.a=Object(d.c)(Object(c.withI18n)()(g))},"P04+":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("17x9"),c=n.n(i),s=n("nbG6"),u=n("kbsL"),l=n("giI2"),d=n("s/Ur"),f=n.n(d),p=n("6ZeI"),m=n("PJr8"),b=n("Y7ox"),y=n("TSYQ"),v=n.n(y),h=n("LFYD"),g=n("Wqtl"),E=n("ZD0w"),w=(n("zUuM"),n("HCbP")),S=n("6puI"),O=n("3UYF"),C=n("v6po"),_=n("9C/b"),T=n("HNnK");function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function t(e){var n,r,o,i,c,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=R(t).call(this,e),n=!o||"object"!==I(o)&&"function"!==typeof o?j(r):o,i=j(j(n)),s=function(){var e=n.props.rubric;e&&b.a.showModal(a.a.createElement(m.b,{rubric:e,mode:g.a.VIEW,onCancel:b.a.closeModal,submitting:!1,showCurrentScore:!1}))},(c="showGradingRubric")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n.state={open:!1,instructionsVisible:!0},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,n=e.title,r=e.media,o=e.rubric,i=e.text,c=e.i18n,d=e.match.params,m=d.activityId,b=d.classId,y=e.ssoToken;if(!r&&!i)return null;var g=n;g===t.defaultProps.title&&(g=c._(n));var E=[],_=a.a.createElement("p",null,i);if(w.a.isViewInstructionsLinkAllowed()){var T=S.a(i);if(T){var I=new URL(T);y&&I.searchParams.append("token",y),I=I.toString(),_=a.a.createElement(O.a,{link:I,className:"url-instructions"}),E.push(a.a.createElement(u.c,{id:"instructions-card-open-in-tab-button",key:"instructions-card-open-in-tab-button",className:"instructions-card-open-in-tab-button",onClick:function(){return window.open(I)},tooltip:{label:c._("Open instructions in new window")}},h.a.OPEN_IN_NEW))}}return o&&E.push(a.a.createElement(u.a,{id:"button-instructions-show-rubric",key:"instructions-card-show-rubric-button",className:"instructions-card-show-rubric-button",onClick:this.showGradingRubric,ariaLabel:c._("Show Grading Rubric"),tooltip:{label:c._("Show Grading Rubric"),position:"left"},iconBefore:!1,iconEl:a.a.createElement(l.a,null,h.a.RUBRIC),primary:!0},c._("Rubric"))),a.a.createElement("div",null,a.a.createElement(s.a,{className:v()("instructions-card",r?"has-media":null)},a.a.createElement(f.a,{query:"(min-width: 701px)"},a.a.createElement(s.c,{className:"instructions-description"},a.a.createElement("div",{className:"instructions-video"},a.a.createElement("div",{className:"video-wrap-01"},r&&a.a.createElement(p.a,{id:"instructions-media",playerId:"Instructions_player_"+r.dbId,activityId:+m,termClassId:+b,usageContext:C.a.ACTIVITY_OVERVIEW,media:r}))),a.a.createElement("div",{className:"card-contents"},a.a.createElement(s.d,{title:g,className:"instructions-title",actions:E}),a.a.createElement("div",{className:"instructions-detail-container"},_)))),a.a.createElement(f.a,{query:"(max-width: 700px)"},a.a.createElement(s.c,{className:"instructions-description"},a.a.createElement("div",{className:"instructions-video"},a.a.createElement("div",{className:"video-wrap-01"},r&&a.a.createElement(p.a,{id:"instructions-media",playerId:"Instructions_player_"+r.dbId,activityId:+m,termClassId:+b,usageContext:C.a.ACTIVITY_OVERVIEW,media:r}))),a.a.createElement("div",{className:"card-contents"},a.a.createElement(s.d,{title:g,className:"instructions-title",actions:E}),a.a.createElement("div",{className:"instructions-detail-container"},_))))))}}])&&P(n.prototype,r),o&&P(n,o),t}(r.Component);k.propTypes={title:c.a.string,media:c.a.any,text:c.a.any,rubric:c.a.object},k.defaultProps={title:Object(E.i18nMark)("Instructions")};t.a=Object(o.b)((function(e){return{ssoToken:T.f(e)}}))(Object(_.a)(Object(E.withI18n)()(k)))},PJr8:function(e,t,n){"use strict";var r=n("yBPd"),a=n("wpyS"),o=n("q1tI"),i=n.n(o),c=n("17x9"),s=n.n(c),u=n("ZD0w"),l=n("LvDl"),d=n.n(l);function f(e){var t=e.points,n=e.max,r=i.a.createElement("span",null,"\u2014");d.a.isNaN(parseFloat(t))||(r=i.a.createElement(u.NumberFormat,{value:t,format:{maximumFractionDigits:2}}));var a=i.a.createElement(u.NumberFormat,{value:n,format:{maximumFractionDigits:2}});return i.a.createElement("span",null,r," / ",a)}f.defaultProps={points:null},f.propTypes={points:s.a.number,max:s.a.number.isRequired};var p=f;n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return p}))},PO6j:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r);t.a=function(e){var t=e.children;return a.a.createElement("span",{role:"alert",className:"u-508-only"},t)}},PWzU:function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("MOhp"),c=n("wNa6"),s=n("8bCP");function u(){var e=d(["\n    query getTermClass($classId: Int!) {\n        termClass(dbId: $classId) {\n            dbId\n            name\n            isDeepLinkingEnabled\n            integrationMode\n            students {\n                roles\n            }\n        }\n    }\n"]);return u=function(){return e},e}function l(){var e=d(["\n    query getTermClass($activityId: Int!) {\n        activity(dbId: $activityId) {\n            termClass {\n                dbId\n                name\n                isDeepLinkingEnabled\n                integrationMode\n            }\n        }\n    }\n"]);return l=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getClassData",value:function(e){return r.a.query({query:b,variables:{classId:e},errorPolicy:"ignore"}).then((function(e){var t=e.data.termClass;c.a.dispatch(i.y(t))})).catch((function(e){s.b.error("ClassService:: Failed to fetch class information",e)}))}},{key:"getClassDataFromActivityId",value:function(e){return r.a.query({query:m,variables:{activityId:e},errorPolicy:"ignore"}).then((function(e){var t=e.data.activity.termClass;c.a.dispatch(i.y(t))})).catch((function(e){s.b.error("ClassService:: Failed to fetch class information",e)}))}}])&&f(t.prototype,n),a&&f(t,a),e}(),m=o()(l()),b=o()(u());t.a=new p},PXE2:function(e,t,n){"use strict";(function(e){var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("wJfn"),c=n("BkCb"),s=n("kbsL"),u=n("17x9"),l=n.n(u),d=n("UyA7"),f=n("Zv/t"),p=n("DozO"),m=(n("OPgC"),n("lLLA")),b=n.n(m),y=n("/MKj"),v=n("cq5E"),h=n("Gxhl"),g=n("8bCP"),E=n("5U9+");function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=b.a.FineUploaderBasic,I={dialogMessage:""},P=function(t){function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(a=O(n).call(this,e))||"object"!==w(a)&&"function"!==typeof a?_(r):a).state=I,t.uploadInfoAnalyzer=new v.a,t.uploadInfoAnalyzer.on(v.a.EVENTS.NEW_INFO,t.onUploadInfo.bind(_(_(t)))),t}var r,u,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,t),r=n,(u=[{key:"onUploadInfo",value:function(e){var t=e.time,n=t.seconds,r=t.minutes,a=t.hours,o=e.uploadSpeedBps,i=e.uploadedPercent,c=this.props.dispatch;c(p.A(i)),c(p.y(o)),c(p.x(n)),c(p.w(r)),c(p.r(a))}},{key:"componentDidMount",value:function(){this.getCredentials()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.config&&e.config&&this.initUploader(e.config)}},{key:"componentWillUnmount",value:function(){c.a.reset(),this.uploadInfoAnalyzer.pause()}},{key:"getCredentials",value:function(){c.a.getCredentials(this.props.type,this.props.activityId,this.props.questionId)}},{key:"switchToInitialState",value:function(){var e=this.props.dispatch;e(p.s(!0)),e(p.u(!1)),e(p.v(!1)),e(p.t(!1))}},{key:"switchToUploadReadyState",value:function(){var e=this.props.dispatch;e(p.s(!1)),e(p.u(!0)),e(p.v(!1)),e(p.t(!1))}},{key:"switchToUploadingState",value:function(){var e=this.props.dispatch;e(p.s(!1)),e(p.u(!1)),e(p.v(!0)),e(p.t(!1))}},{key:"switchToPausedState",value:function(){var e=this.props.dispatch;e(p.s(!1)),e(p.u(!1)),e(p.v(!1)),e(p.t(!0))}},{key:"addFiles",value:function(e){var t=this;e=e.filter((function(e){try{return t.validateFile(e)}catch(n){return g.b.warn(n),!1}})),this.uploader.addFiles(e)}},{key:"removeFile",value:function(e){this.uploader.cancel(e.id),this.props.dispatch(p.k(e)),this.checkFiles()}},{key:"startUpload",value:function(){this.uploader.uploadStoredFiles(),this.switchToUploadingState(),this.uploadInfoAnalyzer.start()}},{key:"pauseUpload",value:function(){var t=this,n=this.props.files;this.switchToPausedState(),this.uploadInfoAnalyzer.pause(),n.forEach((function(n){n.status===b.a.status.UPLOADING&&e((function(){t.uploader.pauseUpload(n.id)}))}))}},{key:"resumeUpload",value:function(){var t=this,n=this.props.files;this.switchToUploadingState(),this.uploadInfoAnalyzer.start(),n.forEach((function(n){n.status===b.a.status.PAUSED&&e((function(){t.uploader.continueUpload(n.id)}))}))}},{key:"calculateUploadedFilesCount",value:function(){var e=this.props.dispatch,t=0;this.props.files.forEach((function(e){(e.isProcessed||e.hasError)&&t++})),e(p.z(t))}},{key:"onComplete",value:function(){this.props.onComplete&&this.props.onComplete(this.props.files)}},{key:"initUploader",value:function(e){var t=e.handleUploadUrl,n=e.token,r=e.uid;this.uploader=new T({autoUpload:!1,multiple:this.props.multiSelection,callbacks:{onSubmitted:this.onAddFile.bind(this),onProgress:this.onFileProgress.bind(this),onStatusChange:this.onFileStatusChange.bind(this),onValidate:this.filePostValidate.bind(this),onTotalProgress:this.onTotalProgress.bind(this),onComplete:this.onFileUploadComplete.bind(this),onError:this.onUploaderError.bind(this)},request:{endpoint:t,filenameParam:"name",inputName:"file",params:{token:n,uid:r}},chunking:{enabled:!0,partSize:1048576,concurrent:{enabled:!0},paramNames:{partIndex:"chunk",totalParts:"chunks"}},retry:{enableAuto:!0,maxAutoAttempts:9999999},maxConnections:1})}},{key:"onAddFile",value:function(e,t){var n=this.uploader.getSize(e);this.props.dispatch(p.j({id:e,name:t,size:n,uploadingPercent:0,isProcessed:!1,hasError:!1})),this.checkFiles()}},{key:"checkUploadReady",value:function(){var e=this.props.files;if(0===e.length)return this.switchToInitialState();var t=!0;if(e.forEach((function(e){e.isProcessed||e.hasError||(t=!1)})),t)return this.onComplete();0===e.length&&(this.props.isPausedState||this.props.isUploadingState)&&this.switchToInitialState(),this.props.isUploadingState||this.switchToUploadReadyState()}},{key:"onFileProgress",value:function(e,t,n,r){var a=this.props.dispatch,o=Math.round(n/r*100);a(p.q(e,o))}},{key:"onFileStatusChange",value:function(t,n,r){var a=this;if(this.props.dispatch(p.p(t,r)),(this.props.isPausedState||this.props.isErrorState)&&r===b.a.status.UPLOADING)return e((function(){a.uploader.pauseUpload(t)}));n===b.a.status.UPLOAD_RETRYING&&this.uploadInfoAnalyzer.reset()}},{key:"validateFile",value:function(e){var t=this,n=this.props.i18n,r=this.props.config,a=r.allowedExtensions,o=r.maxFileSizeMegabytes,i=r.minFileSizeBytes,c=r.maxBatchedFiles,s=e.blob.name,u=e.blob.size,l=new RegExp(".("+a.join("|")+")$","i"),d=1048576*o,f=this.props.files,p=f?f.length:0,m=!1;if(f&&f.forEach((function(e){s===e.name&&(m=!0)})),m)return!1;var b="",y=!0;return l.test(s)?u>=d?(b=n._('File "{fileName}" is too large (Maximum file size is {maxFileSizeMegabytes} MB)',{fileName:s,maxFileSizeMegabytes:o}),y=!1):p>=c?(b=n._("You've selected too many files (Maximum number of files: {maxBatchedFiles})",{maxBatchedFiles:c}),y=!1):u<i&&(b=n._('File "{fileName}" is very small (You may want to review this file before uploading)',{fileName:s})):(b=n._("Wrong file format (Allowed file formats: {0})",{0:a.join(", ")}),y=!1),b&&this.setState({dialogMessage:null},(function(){t.setState({dialogMessage:b})})),y}},{key:"filePostValidate",value:function(){var e=this.props.i18n,t=this.props.config.maxBatchedFiles,n=this.props.files;if((n?n.length:0)>=t){var r=e._("You've selected too many files (Maximum number of files: {maxBatchedFiles})",{maxBatchedFiles:t});return this.setState({dialogMessage:r}),!1}}},{key:"onTotalProgress",value:function(e,t){this.uploadInfoAnalyzer.progress(e,t)}},{key:"onFileUploadComplete",value:function(e,t){this.checkFiles(),this.processFile({fileName:t,fileId:e})}},{key:"onUploaderError",value:function(e,t,n){var r=this.props.i18n;switch(n){case"File is no longer available":var a=r._("File {fileName} will not be uploaded because it was renamed or deleted from your device.",{fileName:t});this.removeFile({id:e}),this.setState({dialogMessage:a});break;default:var o=r._("File {fileName} could not be uploaded.",{fileName:t});this.removeFile({id:e}),this.setState({dialogMessage:o})}}},{key:"processFile",value:function(e){var t=this,n=e.fileName,r=e.fileId,a=this.props.requestParams,o=this.props.config,i=o.processUploadUrl,s=o.uid;return c.a.processFile({processUploadUrl:i,fileName:n,fileId:r,uid:s,requestParams:a}).then((function(){t.checkFiles()})).catch((function(){t.checkFiles()}))}},{key:"checkFiles",value:function(){var t=this;e((function(){t.calculateUploadedFilesCount(),t.checkUploadReady()}))}},{key:"render",value:function(){var e=this.props.i18n;if(this.props.hasError)return a.a.createElement("div",{className:"u-text-center"},a.a.createElement("span",{className:"u-mr-5px"},a.a.createElement(o.Trans,{id:"Error during file uploader initialization"})),a.a.createElement(s.f,{id:"button-file-upload-error-try-again",ariaLabel:e._("Try again"),onClick:this.getCredentials.bind(this)},a.a.createElement(o.Trans,{id:"Try again"})));if(this.props.isLoading||!this.props.config)return a.a.createElement("p",{className:"u-text-center u-mt-10px"},a.a.createElement(o.Trans,{id:"Loading..."}));var t=this.props,n=t.isInitialState,r=t.isUploadReadyState,c=t.isUploadingState,u=t.isPausedState,l=t.isCompleteState,d=t.isErrorState,f=t.uploadedFilesCount,p=t.uploadedPercent,m=t.uploadSpeedBps,b=t.secondsLeft,y=t.minutesLeft,v=t.hoursLeft,g=t.config,w=0,S=[];g&&(w=g.maxBatchedFiles||0,g.allowedExtensions&&(S=g.allowedExtensions.map((function(e){return"."+e}))));var O=this.props,C=O.activityId,_=O.questionId,T=O.type,I=O.onCloudTransferComplete,P=O.showImportFromCloud,R=O.files,A=P&&(n||r)&&!(R&&R.length);return a.a.createElement("div",null,a.a.createElement(i.a,{addFiles:this.addFiles.bind(this),allowedExtensions:S,allowedNumFiles:w,files:R,isInitialState:n,isUploadReadyState:r,isUploadingState:c,isPausedState:u,isCompleteState:l,isErrorState:d,uploadedFilesCount:f,uploadedPercent:p,uploadSpeedBps:m,secondsLeft:b,minutesLeft:y,hoursLeft:v,multiSelection:this.props.config.multiSelection,startUpload:this.startUpload.bind(this),pauseUpload:this.pauseUpload.bind(this),resumeUpload:this.resumeUpload.bind(this),removeFile:this.removeFile.bind(this)}),A&&a.a.createElement("div",{className:"external-tool-transfer-container u-pt-20px"},a.a.createElement("p",{className:"external-tool-transfer-message"},"\u2014 ",e._("Transfer from an external source")," \u2014"),a.a.createElement(E.a,{activityId:C,questionId:_,onSubmitSuccess:I,mediaType:T})),a.a.createElement(h.a,{id:"file-upload-message-dialog",message:this.state.dialogMessage}))}}])&&S(r.prototype,u),l&&S(r,l),n}(r.Component);t.a=Object(o.withI18n)()(Object(y.b)((function(e){return{config:d.d(e),isLoading:d.f(e),hasError:d.e(e),files:f.a(e),isInitialState:f.c(e),isUploadReadyState:f.e(e),isUploadingState:f.f(e),isPausedState:f.d(e),uploadedFilesCount:f.j(e),uploadedPercent:f.k(e),uploadSpeedBps:f.i(e),secondsLeft:f.h(e),minutesLeft:f.g(e),hoursLeft:f.b(e),requestParams:d.g(e)}}))(P)),P.defaultProps={requestParams:{}},P.propTypes={requestParams:l.a.object,showImportFromCloud:l.a.bool,type:l.a.string,onCloudTransferComplete:l.a.func,onComplete:l.a.func,activityId:l.a.number,questionId:l.a.number}}).call(this,n("URgk").setImmediate)},PcDh:function(e,t,n){},PhW7:function(e,t,n){},PjZZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("TSYQ"),a=n.n(r),o={CONTROL:"selection-control",INK_OVERLAY:"selection-control-ink-overlay",SKIN_DISABLED:"selection-control--disabled",SKIN_SELECTED:"selection-control--selected",SKIN_UNSELECTED:"selection-control--unselected"};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[o.CONTROL,n];return e&&r.push(o.SKIN_DISABLED),t.checked?r.push(o.SKIN_SELECTED):r.push(o.SKIN_UNSELECTED),r.push(t.className),a()(r)}},Pnbs:function(e,t,n){},Pqrc:function(e,t,n){e.exports=n.p+"static/media/recording-ended.58a63c84.mp3"},PrLO:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("kbsL"),s=n("4XMt"),u=n("giI2"),l=n("2bAp"),d=n("TSYQ"),f=n.n(d);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.show;return a.a.createElement("div",{className:"spinner-container"},a.a.createElement("div",{className:f()("spinner-icon-container","spinner-icon-container--closed",e?"spinner-icon-container--hidden":"spinner-icon-container--visible")},a.a.createElement(u.a,{iconClassName:l.a.PLUS})),a.a.createElement("div",{className:f()("spinner-icon-container","spinner-icon-container--open",e?"spinner-icon-container--visible":"spinner-icon-container--hidden")},a.a.createElement(u.a,{iconClassName:l.a.CLOSE})))}}])&&m(n.prototype,r),o&&m(n,o),t}(r.Component);n("psRa");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return r=this,o=(e=w(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==g(o)&&"function"!==typeof o?O(r):o,C(O(O(n)),"state",{isOpen:!1}),C(O(O(n)),"componentWillUnmount",(function(){window.removeEventListener("click",n.handleOutsideClick)})),C(O(O(n)),"onClick",(function(){n.setState({isOpen:!n.state.isOpen})})),C(O(O(n)),"handleCloseRequest",(function(){n.onClick()})),C(O(O(n)),"handleOutsideClick",(function(e){n.buttonContainer.contains(e.target)||n.setState({isOpen:!1})})),C(O(O(n)),"render",(function(){var e=n.props,t=e.id,r=e.open,o=e.enabled,i=r;void 0===r&&(i=n.state.isOpen);var u="fade-staggered";n.props.effect&&(u=n.props.effect);var l=n.props.ariaLabel,d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},n.props.tooltip);d.position=d.position||s.a.LEFT,d.className=f()(d.className,"speed-dial-tooltip");var p=a.a.Children.map(n.props.children,(function(e,t){return a.a.cloneElement(e,{effect:u,index:t,visible:i,onCloseRequest:n.handleCloseRequest})})),m=n.onClick;if(p&&1===p.length){var b=p[0].props;b&&(b.onClick&&(m=b.onClick),b.tooltip&&b.tooltip.label&&(d.label=b.tooltip.label),b.ariaLabel&&(l=b.ariaLabel))}return a.a.createElement("div",{ref:function(e){return n.buttonContainer=e},className:"speed-dial-button"},a.a.createElement(c.b,{id:t,secondary:!0,onClick:m,enabled:o,tooltip:d,ariaLabel:l,className:"show-buttons"},a.a.createElement(h,{show:i})),p)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){var n=this.state.isOpen;n!==t.isOpen&&window["".concat(n?"add":"remove","EventListener")]("click",this.handleOutsideClick)}}])&&E(n.prototype,r),o&&E(n,o),t}(r.Component);_.propTypes={enabled:i.a.bool,id:i.a.string.isRequired,tooltip:i.a.any},_.defaultProps={enabled:!0,tooltip:{}};t.a=_},PwM7:function(e,t,n){"use strict";var r=n("2Gxn"),a={EASE_IN_QUAD:function(e){return Math.pow(e,2)},EASE_OUT_QUAD:function(e){return-(Math.pow(e-1,2)-1)},EASE_IN_OUT_QUAD:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},EASE_IN_CUBIC:function(e){return Math.pow(e,3)},EASE_OUT_CUBIC:function(e){return Math.pow(e-1,3)+1},EASE_IN_OUT_CUBIC:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},EASE_IN_QUART:function(e){return Math.pow(e,4)},EASE_OUT_QUART:function(e){return-(Math.pow(e-1,4)-1)},EASE_IN_OUT_QUART:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},EASE_IN_QUINT:function(e){return Math.pow(e,5)},EASE_OUT_QUINT:function(e){return Math.pow(e-1,5)+1},EASE_IN_OUT_QUINT:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},EASE_IN_SINE:function(e){return 1-Math.cos(e*(Math.PI/2))},EASE_OUT_SINE:function(e){return 1-Math.cos(e*(Math.PI/2))},EASE_IN_OUT_SINE:function(e){return-.5*(Math.cos(Math.PI*e)-1)},EASE_IN_EXPO:function(e){return 0===e?0:Math.pow(2,10*(e-1))},EASE_OUT_EXPO:function(e){return 1===e?1:1-Math.pow(2,-10*e)},EASE_IN_OUT_EXPO:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},EASE_IN_CIRC:function(e){return-(Math.sqrt(1-e*e)-1)},EASE_OUT_CIRC:function(e){return Math.sqrt(1-Math.pow(e-1,2))},EASE_IN_OUT_CIRC:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},EASE_OUT_BOUNCE:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},EASE_IN_BACK:function(e){var t=1.70158;return e*e*((t+1)*e-t)},EASE_OUT_BACK:function(e){var t=1.70158;return e*e*((t+1)*e-t)},EASE_IN_OUT_BACK:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},EASE_ELASTIC:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},EASE_SWING_FROM_TO:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},EASE_SWING_FROM:function(e){var t=1.70158;return e*e*((t+1)*e-t)},EASE_SWING_TO:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},EASE_BOUNCE:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},EASE_BOUNCE_PAST:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},EASE_FROM_TO:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},EASE_FROM:function(e){return Math.pow(e,4)},EASE_TO:function(e){return Math.pow(e,.25)}};function o(e){var t=r.c(),n=document.createElement("textarea");if(n.innerText=e,n.value=e,document.body.appendChild(n),t){var a=document.createRange();a.selectNodeContents(n);var o=window.getSelection();o.removeAllRanges(),o.addRange(a),n.setSelectionRange(0,999999)}else n.select();document.execCommand("copy"),document.body.removeChild(n)}function i(e,t,n){var r=window.scrollY||document.documentElement.scrollTop,o=e||0,i=t||500,c=n||a.EASE_OUT_SINE,s=0,u=Math.max(.1,Math.min(Math.abs(r-o)/i,1.5));!function e(){var t=(s+=1/60)/u,n=c(t);t<1?(window.requestAnimFrame(e),window.scrollTo(0,r+(o-r)*n)):window.scrollTo(0,o)}()}function c(){return!!document.querySelector("[data-path='video']")}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},Q0J0:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return y}));var r="[Delete user requests] ",a=r+"Set is loading",o=r+"Set create is loading",i=r+"Set has error",c=r+"Set create has error",s=r+"Set list",u=r+"Add request",l=r+"Cancel request",d=function(e){return{type:a,payload:e}},f=function(e){return{type:o,payload:e}},p=function(e){return{type:i,payload:e}},m=function(e){return{type:c,payload:e}},b=function(e){return{type:s,payload:e}},y=function(e){return{type:u,payload:e}}},QMWu:function(e,t,n){"use strict";var r=n("T0hT"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("kwFD");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){return o.a.createElement(s.x,m({},function(e){return f.a.pick(e,Object.keys(b.componentProps))}(e),{className:l()("progress-linear",e.className),disabled:!e.enabled}),e.children)};b.componentProps={className:c.a.string,centered:c.a.bool,id:c.a.any.isRequired,progressClassName:c.a.oneOfType([c.a.func,c.a.string]),progressStyle:c.a.oneOfType([c.a.func,c.a.string]),query:c.a.bool,value:c.a.number},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},b.componentProps,{enabled:c.a.bool}),b.defaultProps={centered:!0,enabled:!0,determinate:!1,query:!1};var y=b;n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return y}))},QccL:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fcFR"),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.title,n=e.downloadUrl,a=e.slaveMedia;n&&(Object(r.a)(n,t),a&&a.downloadUrl?Object(r.a)(a.downloadUrl,t):a&&a.srcUrl&&Object(r.a)(a.srcUrl,t+"__secondary"))}},QvYj:function(e,t,n){},RBRe:function(e,t,n){"use strict";var r=n("J7Bk"),a=n("cfNM"),o=n("nBc4"),i=n("r538"),c=n("I/p7"),s=n("eoRp"),u=n("8bCP"),l=Object(u.c)("graphql"),d=function(e){return Object(s.createUploadLink)({uri:e,credentials:"same-origin"})},f=new a.a({addTypename:!0,cacheRedirects:{},dataIdFromObject:function(e){return e.uuid&&e.__typename?e.__typename+e.uuid:null},fragmentMatcher:new o.b({introspectionQueryResultData:{__schema:{types:[{kind:"UNION",name:"StudentLibrarySearchResult",possibleTypes:[{name:"LibraryMedia"},{name:"ActivityMedia"},{name:"ProfileMedia"}]}]}}})}),p=function(e){return new i.ApolloLink((function(t,n){return t.setContext({start:new Date,headers:{authorization:e?"Bearer ".concat(e):null}}),n(t)}))},m=new i.ApolloLink((function(e,t){return t(e).map((function(t){try{var n=new Date-e.getContext().start,r=e.query.definitions[0].operation||"<unknown>",a=e.operationName||"<unaliased query>",o=e.query.loc.source.body||"<unknown body>",i=e.variables||{};l.debug("[GQL ".concat(a," (").concat(r,")]: Took ").concat(n,"ms to complete")),l.trace("[GQL ".concat(a," (").concat(r,")]: ").concat(JSON.stringify(i),"\n").concat(o))}catch(c){l.debug(c)}return t}))})),b=Object(c.a)((function(e){var t=e.networkError,n=e.graphQLErrors;n&&n.map((function(e){var t=e.message,n=e.locations,r=e.path;return l.error("[GQL Error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r))})),t&&l.error("[GQL Network Error]: ".concat(t))}));t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=d(e),o=p(t),c=i.ApolloLink.from([o,m,b,a]);return new r.a({link:c,cache:f,connectToDevTools:n&&Boolean(!1),queryDeduplication:!0,defaultOptions:{query:{errorPolicy:"all",fetchPolicy:"network-only"},mutate:{errorPolicy:"all"}}})}},RKRe:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=n("ZD0w"),l=n("J4l3"),d=n.n(l),f=n("rgrG"),p=n.n(f),m=n("te1l"),b=n.n(m),y=n("HCbP"),v=(n("0l2v"),"powered-by-logo"),h=function(e){var t=e.i18n;return a.a.createElement("div",{className:s()("powered-by",e.className)},a.a.createElement("img",{className:v,alt:t._("Powered by Bongo"),src:y.a.showPoweredByBongoLogo()?p.a:y.a.showPoweredByBongoTextLogo()?(v+=" powered-by-logo-small",b.a):d.a}))};h.propTypes={className:i.a.string,i18n:i.a.object},t.a=Object(u.withI18n)()(h)},RMfM:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"h",(function(){return b})),n.d(t,"l",(function(){return y})),n.d(t,"q",(function(){return v})),n.d(t,"o",(function(){return h})),n.d(t,"s",(function(){return g})),n.d(t,"r",(function(){return E})),n.d(t,"B",(function(){return w})),n.d(t,"t",(function(){return S})),n.d(t,"w",(function(){return O})),n.d(t,"u",(function(){return C})),n.d(t,"p",(function(){return _})),n.d(t,"A",(function(){return T})),n.d(t,"x",(function(){return I})),n.d(t,"y",(function(){return P})),n.d(t,"z",(function(){return R})),n.d(t,"v",(function(){return A}));var r="[Player] Init",a="[Player] Destroy",o="[Player] Play",i="[Player] Pause",c="[Player] Update time",s="[Player] Ready",u="[Player] Set duration",l="[Player] Set buffered percent",d="[Player] Ended",f="[Player] Set volume",p="[Player] Set full screen",m="[Player] Set is seeking",b="[Player] Set controls is showing",y="[Player] Set is waiting",v=function(e,t){return{type:r,payload:{playerId:e,options:t}}},h=function(e){return{type:a,payload:{playerId:e}}},g=function(e){return{type:o,payload:{playerId:e}}},E=function(e){return{type:i,payload:{playerId:e}}},w=function(e,t){return{type:c,payload:{playerId:e,time:t}}},S=function(e){return{type:s,payload:{playerId:e}}},O=function(e,t){return{type:u,payload:{playerId:e,duration:t}}},C=function(e,t){return{type:l,payload:{playerId:e,buffered:t}}},_=function(e){return{type:d,payload:{playerId:e}}},T=function(e,t){return{type:f,payload:{playerId:e,volume:t}}},I=function(e,t){return{type:p,payload:{playerId:e,isFullScreen:t}}},P=function(e,t){return{type:m,payload:{playerId:e,isSeeking:t}}},R=function(e,t){return{type:y,payload:{playerId:e,isWaiting:t}}},A=function(e,t){return{type:b,payload:{playerId:e,controls:t}}}},RP9J:function(e,t,n){},RWpT:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=n("MzIV"),l=(n("i5n6"),"column-date");function d(e){return a.a.createElement("span",{className:s()(l,e.className)},a.a.createElement(u.a,{unixTime:e.value}))}d.propTypes={className:i.a.string},t.a=d},RaGr:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("TSYQ"),c=n.n(i),s=(n("BKYJ"),n("wGj+"),n("PO6j")),u=n("Vy55"),l=n("17x9"),d=n.n(l);function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,b(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"c-recorder__notifications"},this.props.list.map((function(e){var t="";switch(e.type){case u.a.TYPES.ERROR:t="c-recorder__notification--error";break;case u.a.TYPES.INFO:t="c-recorder__notification--info";break;case u.a.TYPES.WARN:t="c-recorder__notification--warn"}return a.a.createElement("div",{className:c()("c-recorder__notification",t),key:e.id},a.a.createElement("p",null,e.message,e.clickHandler&&a.a.createElement("button",{onClick:e.clickHandler,className:"c-recorder__fix-button",tabIndex:0},e.fixText)),a.a.createElement(s.a,null,e.message))})))}}])&&p(n.prototype,r),o&&p(n,o),t}(r.Component);v.propTypes={list:d.a.arrayOf(d.a.instanceOf(u.a))};var h=n("V+cX"),g=n("LvDl"),E=n.n(g),w=n("LFYD"),S=n("kbsL"),O=n("giI2"),C=n("hvs/"),_=n("+y5T"),T=n("cK1Q");n("jq4a");function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,A(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.className,r=e.onClick;return a.a.createElement(S.f,{id:"recorder-start-button",primary:!0,className:c()("recorder-start-button",n),ariaLabel:t._("Start Recording"),onClick:r},a.a.createElement(O.a,{className:"recorder-start-button-icon"},w.a.ADJUST),a.a.createElement("span",null,t._("Record")))}}])&&P(n.prototype,r),o&&P(n,o),t}(a.a.PureComponent);k.propTypes={className:d.a.string,i18n:d.a.object,onClick:d.a.func};var N=Object(o.withI18n)()(k);n("sFEX");function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G="recorder-screen-chooser",U="recorder-standalone-launcher",q="recorder-activating-banner",W="recorder-activating-message",B=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=M(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==D(o)&&"function"!==typeof o?F(r):o,V(F(F(n)),"isInitialState",(function(){return n.props.viewState===h.a.INITIAL})),V(F(F(n)),"areAllStreamsReady",(function(){var e=n.props,t=e.cameraStream,r=e.desktopStream,a=e.microphoneStream,o=e.audioIsNormal,i=e.recorderType;if(!o)return!1;switch(i){case _.a.CAMERA_ONLY:return Boolean(t);case _.a.DESKTOP_ONLY:return Boolean(r&&a);case _.a.CAMERA_WITH_DESKTOP:return Boolean(r&&t)}return!1})),V(F(F(n)),"areAnyVideoStreamsReady",(function(){var e=n.props,t=e.cameraStream,r=e.desktopStream;return Boolean(t||r)})),V(F(F(n)),"onStandaloneModeClick",(function(){var e=n.props.onStandaloneModeClick;e&&e()})),V(F(F(n)),"renderStandaloneMessage",(function(){var e=n.props,t=e.i18n,r=e.onStandaloneModeClick,o=e.isStandaloneMode,i=e.isStandaloneModeAllowed;if(!o&&i&&r)return a.a.createElement(S.a,{id:"recorder-standalone-launcher",className:U,onClick:n.onStandaloneModeClick},a.a.createElement("div",{className:"".concat(U,"-content")},a.a.createElement("span",null,a.a.createElement(O.a,null,w.a.OPEN_IN_BROWSER),t._("Open Standalone Recorder")),a.a.createElement("span",{className:"".concat(U,"-text")},t._("Try using the Standalone Recorder if you're having trouble activating the recorder."))))})),V(F(F(n)),"renderStartButton",(function(){var e=n.props,t=e.startRecord;return e.showRecordButton?a.a.createElement(N,{key:"recorder-overlay-component[start-button]",onClick:t}):null})),V(F(F(n)),"renderActivatingMessage",(function(){var e=n.props.i18n;return a.a.createElement("div",{className:W},a.a.createElement(C.a,{className:"".concat(W,"-loader"),isLoading:!0}),a.a.createElement("span",{className:"".concat(W,"-text")},e._("Activating Recorder")))})),V(F(F(n)),"renderActivatingBanner",(function(){return a.a.createElement("div",{key:"recorder-overlay-component[activating-banner]",className:q},n.renderActivatingMessage(),n.renderStandaloneMessage())})),V(F(F(n)),"renderScreenContentChooserButton",(function(){var e=n.props,t=e.i18n,r=e.desktopStream,o=e.onChooseScreenContent;return r&&o?a.a.createElement(S.b,{key:"recorder-overlay-component[screen-chooser]",primary:!0,className:G,tooltip:{label:t._("Change screen or application..."),className:"".concat(G,"-wrapper")},onClick:o},w.a.APP_WINDOW):null})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.className;if(!this.isInitialState())return null;var t=[];return t=this.areAllStreamsReady()?[this.renderStartButton(),this.renderScreenContentChooserButton()]:[this.renderActivatingBanner()],t=E.a.compact(t),a.a.createElement("div",{className:c()("recorder-overlay-container",e)},t)}}])&&L(n.prototype,r),o&&L(n,o),t}(a.a.PureComponent);B.defaultProps={},B.propTypes={className:d.a.string,audioIsNormal:d.a.bool,cameraStream:d.a.instanceOf(T.a),desktopStream:d.a.instanceOf(T.a),isStandaloneMode:d.a.bool,isStandaloneModeAllowed:d.a.bool,microphoneStream:d.a.instanceOf(T.a),onChooseScreenContent:d.a.func,onStandaloneModeClick:d.a.func,recorderType:d.a.oneOf(Object.values(_.a)).isRequired,showRecordButton:d.a.bool,startRecord:d.a.func,viewState:d.a.oneOf(Object.values(h.a)).isRequired,i18n:d.a.object.isRequired};var Q=Object(o.withI18n)()(B),Y=n("/MKj"),H=n("0zen"),z=n("TDYo");function K(e){return(K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ee=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=$(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==K(a)&&"function"!==typeof a?J(r):a,o=J(J(n)),c=function(){var e=n.props,t=e.dispatch,r=e.recorderId;t(z.h(r))},(i="startRecord")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.audioIsNormal,n=e.cameraStream,r=e.desktopStream,o=e.microphoneStream,i=this.props,c=i.isStandaloneModeAllowed,s=i.isStandaloneMode,u=i.onStandaloneModeClick,l=this.props,d=l.onChooseScreenContent,f=l.recorderType,p=l.showRecordButton,m=l.viewState;return m?a.a.createElement(Q,{audioIsNormal:t,cameraStream:n,desktopStream:r,microphoneStream:o,isStandaloneModeAllowed:c,isStandaloneMode:s,onStandaloneModeClick:u,onChooseScreenContent:d,recorderType:f,showRecordButton:p,viewState:m,startRecord:this.startRecord}):null}}])&&X(n.prototype,r),o&&X(n,o),t}(a.a.PureComponent);ee.propTypes={className:d.a.string,isStandaloneMode:d.a.bool,isStandaloneModeAllowed:d.a.bool,onChooseScreenContent:d.a.func,onStandaloneModeClick:d.a.func,recorderId:d.a.oneOfType([d.a.number,d.a.string]).isRequired,recorderType:d.a.oneOf(Object.values(_.a)).isRequired,showRecordButton:d.a.bool,dispatch:d.a.func,audioIsNormal:d.a.bool,cameraStream:d.a.instanceOf(T.a),desktopStream:d.a.instanceOf(T.a),microphoneStream:d.a.instanceOf(T.a),viewState:d.a.oneOf(Object.values(h.a))};var te=Object(Y.b)((function(e,t){var n=t.recorderId;return{audioIsNormal:H.c(e,n),cameraStream:H.f(e,n),desktopStream:H.j(e,n),microphoneStream:H.q(e,n),viewState:H.J(e,n)}}))(ee);n("zNkm");function ne(e){return(ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ce=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=ae(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==ne(a)&&"function"!==typeof a?ie(r):a,o=ie(ie(n)),c=function(){var e=n.props,t=e.cameraStream,r=e.desktopStream;return Boolean(t||r)},(i="areAnyVideoStreamsReady")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.cameraStream,n=e.desktopStream,r=!this.areAnyVideoStreamsReady();return a.a.createElement("div",{className:"c-recorder__stream-holder"},t&&a.a.createElement("div",{className:c()("c-recorder__stream")},a.a.createElement("video",{className:"c-recorder__stream-video",autoPlay:!0,playsInline:!0,ref:function(e){t.attachVideoToElement(e)}})),n&&a.a.createElement("div",{className:c()("c-recorder__stream")},a.a.createElement("video",{className:c()("c-recorder__stream-video","c-recorder__stream-video--deskshare"),autoPlay:!0,playsInline:!0,ref:function(e){n.attachVideoToElement(e)}})),r&&a.a.createElement("div",{className:"c-recorder__video-placeholder"}))}}])&&re(n.prototype,r),o&&re(n,o),t}(r.Component);ce.propTypes={cameraStream:d.a.instanceOf(T.a),desktopStream:d.a.instanceOf(T.a)};var se=Object(o.withI18n)()(ce);function ue(e){return(ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,fe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.cameraStream,n=e.desktopStream;return a.a.createElement(se,{cameraStream:t,desktopStream:n})}}])&&le(n.prototype,r),o&&le(n,o),t}(r.Component);me.propTypes={recorderId:d.a.oneOfType([d.a.number,d.a.string]).isRequired,cameraStream:d.a.instanceOf(T.a),desktopStream:d.a.instanceOf(T.a)};var be=Object(Y.b)((function(e,t){var n=t.recorderId;return{cameraStream:H.f(e,n),desktopStream:H.j(e,n)}}))(me);n("NXr4");function ye(e){return(ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ge(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=100*this.props.level*3;return e=e>100?100:e,a.a.createElement("div",{className:"c-audio-level"},a.a.createElement("div",{className:"c-audio-level__strip",style:{width:e+"%"}}),a.a.createElement("p",{className:"c-audio-level__label"},a.a.createElement(o.Trans,{id:"Audio level"})))}}])&&ve(n.prototype,r),i&&ve(n,i),t}(r.Component);we.propTypes={level:d.a.number};var Se=we;n("V08G");function Oe(e){return(Oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return!t||"object"!==Oe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,Te(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.options,r=e.value,o=e.placeholder,i=e.onChange,s=e.icon;return a.a.createElement("div",{className:c()("c-recorder__select")},a.a.createElement("span",{className:"c-recorder__select-icon-holder"},s),a.a.createElement("div",{className:"c-recorder__select-input-container"},a.a.createElement("select",{disabled:t,className:"c-recorder__select-input",value:r||"",tabIndex:0,"aria-label":this.props["aria-label"],onChange:function(e){return i(e.target.value)}},a.a.createElement("option",{value:"",disabled:!0},o),n.map((function(e){return a.a.createElement("option",{value:e.value,key:e.id},e.label)})))))}}])&&Ce(n.prototype,r),o&&Ce(n,o),t}(r.Component);Pe.propTypes={disabled:d.a.bool,options:d.a.array,value:d.a.string,"aria-label":d.a.string,placeholder:d.a.string,onChange:d.a.func,icon:d.a.node};var Re=Pe,Ae=n("4XMt"),je=n("xrVw");n("4/mv");function ke(e){return(ke="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==ke(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,Le(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.onClick,i=r.disabled,s=r.i18n;return a.a.createElement(je.a,{id:"recorder-stop-button",className:c()("c-recorder__stop-button",(e={},t="c-recorder__stop-button--disabled",n=i,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),onClick:o,"aria-label":s._("Stop recording"),disabled:i},s._("Stop"))}}])&&Ne(n.prototype,r),o&&Ne(n,o),t}(r.Component);xe.propTypes={tooltip:d.a.any,onClick:d.a.func,disabled:d.a.bool,i18n:d.a.object};var Fe=Object(Ae.c)(Object(o.withI18n)()(xe)),Ve=n("q8N1");n("+Ml8");function Ge(e){return(Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,We(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.onClick;return a.a.createElement("div",{className:"c-recorder__iconed-button-holder","aria-label":this.props["aria-label"],onClick:e,onKeyDown:Object(Ve.b)(e),role:"button",tabIndex:0},a.a.createElement("button",{className:"c-recorder__iconed-button",tabIndex:-1},this.props.children))}}])&&Ue(n.prototype,r),o&&Ue(n,o),t}(r.Component);Qe.propTypes={onClick:d.a.func,children:d.a.node,"aria-label":d.a.any};var Ye=Qe,He=n("8For");function ze(e){return(ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return!t||"object"!==ze(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xe(this,$e(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,e),n=t,(r=[{key:"clickHandler",value:function(){var e=this.props,t=e.play,n=e.pause;e.isPlaying?n():t()}},{key:"render",value:function(){var e=this.props,t=e.isPlaying,n=e.i18n,r=n._("Play Video"),o=a.a.createElement(He.a,{className:"c-recorder__controls-bar-icon",ariaLabel:n._("Play Video, icon")},w.a.PLAY_ARROW);return t&&(o=a.a.createElement(He.a,{className:"c-recorder__controls-bar-icon",ariaLabel:n._("Pause Video, icon")},w.a.PAUSE),r=n._("Pause Video")),a.a.createElement(Ye,{onClick:this.clickHandler.bind(this),"aria-label":r},o)}}])&&Ke(n.prototype,r),o&&Ke(n,o),t}(r.Component);Je.propTypes={i18n:d.a.object,play:d.a.func,pause:d.a.func,isPlaying:d.a.bool};var et=Object(o.withI18n)()(Je);n("m3+W");function tt(e){return(tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return!t||"object"!==tt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rt(this,at(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(r=[{key:"handleSliderChange",value:function(e){this.props.onPlaybackTimeChange(e)}},{key:"render",value:function(){var e=this.props,t=e.playbackTime,n=e.playbackDuration;return a.a.createElement("div",{className:"c-recorder__timeline-holder"},a.a.createElement("div",{className:"c-recorder__timeline"},a.a.createElement(je.I,{min:0,max:+n.toFixed(1),step:.1,value:+t.toFixed(1),style:{margin:0},trackStyle:{margin:0},onChange:this.handleSliderChange.bind(this)})))}}])&&nt(n.prototype,r),o&&nt(n,o),t}(r.Component);it.propTypes={onPlaybackTimeChange:d.a.func,playbackTime:d.a.number,playbackDuration:d.a.number};var ct=it;n("rklM");function st(e){return(st="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return!t||"object"!==st(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,dt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return a.a.createElement("div",{onClick:this.props.reset,onKeyDown:Object(Ve.b)(this.props.reset),className:"c-recorder__redo c-recorder__action-btn","aria-label":e._("Reset"),tabIndex:0,title:e._("Reset"),role:"button"},a.a.createElement(He.a,{className:"c-recorder__controls-bar-icon",ariaLabel:e._("Reset, icon")},w.a.DELETE))}}])&&ut(n.prototype,r),o&&ut(n,o),t}(r.Component);pt.propTypes={i18n:d.a.object,reset:d.a.func};var mt=Object(o.withI18n)()(pt);n("u90/");function bt(e){return(bt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return!t||"object"!==bt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Et=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vt(this,ht(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return a.a.createElement("div",{onClick:this.props.downloadRecords,"aria-label":e._("Download"),title:e._("Download"),tabIndex:0,onKeyDown:Object(Ve.b)(this.props.downloadRecords),className:"c-recorder__download c-recorder__action-btn",role:"button"},a.a.createElement(He.a,{className:"c-recorder__controls-bar-icon",ariaLabel:e._("Download, icon")},w.a.DOWNLOAD))}}])&&yt(n.prototype,r),o&&yt(n,o),t}(r.Component);Et.propTypes={i18n:d.a.object,downloadRecords:d.a.func};var wt=Object(o.withI18n)()(Et);n("FeSs");function St(e){return(St="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t){return!t||"object"!==St(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ct(this,_t(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return a.a.createElement("div",{className:"c-recorder__submit-button-holder c-recorder__action-btn",title:e._("Save"),"aria-label":e._("Save"),onClick:this.props.submit,onKeyDown:Object(Ve.b)(this.props.submit),tabIndex:0,role:"button"},a.a.createElement(He.a,{ariaLabel:e._("Save, icon")},w.a.SAVE))}}])&&Ot(n.prototype,r),o&&Ot(n,o),t}(r.Component);It.propTypes={i18n:d.a.object,submit:d.a.func};var Pt=Object(o.withI18n)()(It);n("evQ8");function Rt(e){return(Rt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return!t||"object"!==Rt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jt(this,kt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,e),n=t,o=[{key:"deviceListToSelectOptions",value:function(e){return e.map((function(e){return{id:e.deviceId,value:e.deviceId,label:e.label}}))}}],(r=[{key:"renderInitialState",value:function(){var e=this.props,n=e.audioDevices,r=e.videoDevices,o=e.audioLevel,i=e.onCameraChange,c=e.onMicrophoneChange,s=e.currentCameraId,u=e.currentMicrophoneId,l=e.i18n,d=t.deviceListToSelectOptions(n),f=t.deviceListToSelectOptions(r),p=this.props.viewState===h.a.INITIAL,m=this.props.recorderType===_.a.DESKTOP_ONLY;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"c-recorder__actions-container"},!m&&a.a.createElement(Re,{options:f,icon:a.a.createElement(He.a,{className:"c-recorder__select-icon"},w.a.VIDEOCAM),placeholder:l._("No Active Camera"),value:s,disabled:!p,key:"webcamSelect","aria-label":l._("Select Camera"),onChange:i}),a.a.createElement(Re,{options:d,icon:a.a.createElement(He.a,{className:"c-recorder__select-icon"},w.a.MIC),placeholder:l._("No Active Microphone"),value:u,"aria-label":l._("Select Microphone"),disabled:!p,key:"micSelect",onChange:c})),a.a.createElement(Se,{level:o,key:"audioLevel"}))}},{key:"renderRecordState",value:function(){var e=this.props,t=e.audioLevel,n=e.stopRecord,r=e.recordingTime,o=e.minRecordLengthSeconds,i=e.i18n,c=e.recordingPaused,s=r/1e3<o||c,u=s?i._("Recording can only be stopped after the minimum recording length of {minRecordLengthSeconds} seconds",{minRecordLengthSeconds:o}):"";return c&&(u=""),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"c-recorder__actions-container"},a.a.createElement("div",{key:"stopButton",className:"c-recorder__stop-button-holder"},a.a.createElement(Fe,{disabled:s,onClick:s?null:n,tooltip:{label:u,className:"c-recorder__stop-button-tooltip"}}))),a.a.createElement(Se,{key:"audioLevel",level:t}))}},{key:"renderPlaybackState",value:function(){var e=this.props,t=e.playRecordedVideo,n=e.pauseRecordedVideo,r=e.playbackTime,o=e.playbackPlaying,i=e.onPlaybackTimeChange,c=e.playbackDuration;return E.a.compact([a.a.createElement(et,{key:"playButton",play:t,pause:n,isPlaying:o}),a.a.createElement(ct,{key:"timeLine",playbackTime:r,onPlaybackTimeChange:i,playbackDuration:c})])}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"c-recorder__controls-bar"},this.props.viewState===h.a.INITIAL&&this.renderInitialState(),this.props.viewState===h.a.RECORDING&&this.renderRecordState(),this.props.viewState===h.a.PREVIEW&&this.renderPlaybackState()),this.props.viewState===h.a.PREVIEW&&a.a.createElement("div",{className:"c-recorder__playback-actions"},a.a.createElement(mt,{key:"redoButton",reset:this.props.reset}),a.a.createElement(wt,{key:"downloadButton",downloadRecords:this.props.downloadRecords}),this.props.showSubmitButton&&a.a.createElement(Pt,{key:"submitButton",submit:this.props.submit})))}}])&&At(n.prototype,r),o&&At(n,o),t}(r.Component);Dt.propTypes={reset:d.a.func,downloadRecords:d.a.func,onCameraChange:d.a.func,onMicrophoneChange:d.a.func,submit:d.a.func,playRecordedVideo:d.a.func,pauseRecordedVideo:d.a.func,onPlaybackTimeChange:d.a.func,stopRecord:d.a.func,showSubmitButton:d.a.bool,playbackPlaying:d.a.bool,recordingPaused:d.a.bool,viewState:d.a.oneOf(Object.values(h.a)),dispatch:d.a.func,audioDevices:d.a.array,videoDevices:d.a.array,currentCameraId:d.a.string,currentMicrophoneId:d.a.string,playbackDuration:d.a.number,minRecordLengthSeconds:d.a.number,recordingTime:d.a.number,playbackTime:d.a.number,audioLevel:d.a.number,i18n:d.a.object,recorderId:d.a.oneOfType([d.a.number,d.a.string]),recorderType:d.a.oneOf(Object.values(_.a))};var Lt=Object(o.withI18n)()(Dt);function Mt(e){return(Mt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return!t||"object"!==Mt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ft(this,Vt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,e),n=t,(r=[{key:"onCameraChange",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.e(r,e))}},{key:"onMicrophoneChange",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.f(r,e))}},{key:"stopRecord",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.i(n))}},{key:"playRecordedVideo",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.E(n,!0))}},{key:"pauseRecordedVideo",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.E(n,!1))}},{key:"seekRecordedVideo",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.F(r,e))}},{key:"onPlaybackTimeChange",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.F(r,e))}},{key:"reset",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.g(n))}},{key:"downloadRecords",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.d(n))}},{key:"submit",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.j(n))}},{key:"getPlaybackDuration",value:function(){return 0!==this.props.playbackDuration&&isFinite(this.props.playbackDuration)?this.props.playbackDuration:Math.floor(this.props.recordingTime/1e3)}},{key:"render",value:function(){return a.a.createElement(Lt,{onPlaybackTimeChange:this.onPlaybackTimeChange.bind(this),reset:this.reset.bind(this),playbackDuration:this.getPlaybackDuration(),submit:this.submit.bind(this),downloadRecords:this.downloadRecords.bind(this),playRecordedVideo:this.playRecordedVideo.bind(this),pauseRecordedVideo:this.pauseRecordedVideo.bind(this),seekRecordedVideo:this.seekRecordedVideo.bind(this),onCameraChange:this.onCameraChange.bind(this),stopRecord:this.stopRecord.bind(this),onMicrophoneChange:this.onMicrophoneChange.bind(this),viewState:this.props.viewState,recorderType:this.props.recorderType,recordingTime:this.props.recordingTime,audioDevices:this.props.audioDevices,videoDevices:this.props.videoDevices,currentCameraId:this.props.currentCameraId,currentMicrophoneId:this.props.currentMicrophoneId,audioLevel:this.props.audioLevel,minRecordLengthSeconds:this.props.minRecordLengthSeconds,playbackTime:this.props.playbackTime,playbackPlaying:this.props.playbackPlaying,recordingPaused:this.props.recordingPaused,showSubmitButton:this.props.showSubmitButton})}}])&&xt(n.prototype,r),o&&xt(n,o),t}(r.Component);Ut.propTypes={showSubmitButton:d.a.bool,playbackPlaying:d.a.bool,recordingPaused:d.a.bool,viewState:d.a.oneOf(Object.values(h.a)),dispatch:d.a.func,audioDevices:d.a.array,videoDevices:d.a.array,currentCameraId:d.a.string,currentMicrophoneId:d.a.string,playbackDuration:d.a.number,minRecordLengthSeconds:d.a.number,recordingTime:d.a.number,playbackTime:d.a.number,audioLevel:d.a.number,recorderId:d.a.oneOfType([d.a.number,d.a.string]),recorderType:d.a.oneOf(Object.values(_.a))};var qt=Object(Y.b)((function(e,t){var n=t.recorderId;return{viewState:H.J(e,n),audioDevices:H.b(e,n),videoDevices:H.I(e,n),currentCameraId:H.g(e,n),currentMicrophoneId:H.h(e,n),audioLevel:H.d(e,n),playbackDuration:H.u(e,n),recordingTime:H.D(e,n),playbackTime:H.w(e,n),playbackPlaying:H.v(e,n),minRecordLengthSeconds:H.r(e,n),recordingPaused:H.C(e,n)}}))(Ut);n("zqO2");function Wt(e){return(Wt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt="recorder-video-wrapper",Xt="recorder-video-wrapper--hidden",$t="recorder-video",Zt="primary",Jt="secondary",en=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return r=this,o=(e=Qt(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==Wt(o)&&"function"!==typeof o?Ht(r):o,zt(Ht(Ht(n)),"durationChangeHandler",(function(){n.primaryVideo&&n.props.setPlaybackDuration(n.primaryVideo.duration)})),zt(Ht(Ht(n)),"playingHandler",(function(){n.secondaryVideo&&(n.secondaryVideo.play().catch(),n.syncVideos())})),zt(Ht(Ht(n)),"timeUpdateHandler",(function(){if(n.primaryVideo){var e=n.props.onPlaybackTimeChange;n.lastPlaybackTime=n.primaryVideo.currentTime,e(n.lastPlaybackTime)}})),zt(Ht(Ht(n)),"pauseHandler",(function(){n.secondaryVideo&&n.secondaryVideo.pause()})),zt(Ht(Ht(n)),"seekedHandler",(function(){n.secondaryVideo&&n.primaryVideo&&n.syncVideos()})),zt(Ht(Ht(n)),"syncVideos",(function(){if(n.secondaryVideo&&n.primaryVideo){var e=n.primaryVideo.currentTime;e!==n.secondaryVideo.currentTime&&(n.secondaryVideo.currentTime=e)}})),zt(Ht(Ht(n)),"videoRefHandler",(function(e,t,r){t&&r&&(e===Zt?(n.primaryVideo=r,t.attachToElement(r)):e===Jt&&(n.secondaryVideo=r,t.attachToElement(r)))})),zt(Ht(Ht(n)),"renderVideo",(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a.a.createElement("div",{key:"recorder-video-player[".concat(e,"]"),className:c()(Kt,zt({},Xt,!r))},a.a.createElement("video",{className:$t,ref:function(r){return n.videoRefHandler(e,t,r)},playsInline:!0}))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.primaryVideo&&(this.primaryVideo.addEventListener("durationchange",this.durationChangeHandler),this.primaryVideo.addEventListener("playing",this.playingHandler),this.primaryVideo.addEventListener("timeupdate",this.timeUpdateHandler),this.primaryVideo.addEventListener("pause",this.pauseHandler),this.primaryVideo.addEventListener("seeked",this.seekedHandler))}},{key:"componentWillUnmount",value:function(){this.primaryVideo&&(this.primaryVideo.removeEventListener("durationchange",this.durationChangeHandler),this.primaryVideo.removeEventListener("playing",this.playingHandler),this.primaryVideo.removeEventListener("timeupdate",this.timeUpdateHandler),this.primaryVideo.removeEventListener("pause",this.pauseHandler),this.primaryVideo.removeEventListener("seeked",this.seekedHandler))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.playbackPlaying&&!this.props.playbackPlaying){if(!this.primaryVideo)return;this.primaryVideo.play().catch()}if(!e.playbackPlaying&&this.props.playbackPlaying){if(!this.primaryVideo)return;this.primaryVideo.pause()}if(e.playbackTime!==this.lastPlaybackTime){if(!this.primaryVideo)return;this.primaryVideo.currentTime=e.playbackTime}}},{key:"render",value:function(){var e=this.props,t=e.recordedCameraStream,n=e.recordedDesktopStream,r=e.recordedMicrophoneStream,o=[];switch(e.recorderType){case _.a.CAMERA_WITH_DESKTOP:o.push(this.renderVideo(Zt,t)),o.push(this.renderVideo(Jt,n));break;case _.a.CAMERA_ONLY:o.push(this.renderVideo(Zt,t));break;case _.a.DESKTOP_ONLY:o.push(this.renderVideo(Zt,n)),o.push(this.renderVideo(Jt,r,!1))}return a.a.createElement("div",{className:"recorder-videos"},o)}}])&&Bt(n.prototype,r),o&&Bt(n,o),t}(r.Component);en.propTypes={onPlaybackTimeChange:d.a.func.isRequired,playbackPlaying:d.a.bool,playbackTime:d.a.number,recordedCameraStream:d.a.instanceOf(T.a),recordedDesktopStream:d.a.instanceOf(T.a),recordedMicrophoneStream:d.a.instanceOf(T.a),recorderType:d.a.oneOf(Object.values(_.a)).isRequired,setPlaybackDuration:d.a.func.isRequired};var tn=en;function nn(e){return(nn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return!t||"object"!==nn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),an(this,on(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,e),n=t,(r=[{key:"onPlaybackTimeChange",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.F(r,e))}},{key:"setPlaybackDuration",value:function(e){var t=this.props,n=t.dispatch,r=t.recorderId;n(z.D(r,e))}},{key:"render",value:function(){return a.a.createElement(tn,{recordedCameraStream:this.props.recordedCameraStream,recordedDesktopStream:this.props.recordedDesktopStream,recordedMicrophoneStream:this.props.recordedMicrophoneStream,playbackTime:this.props.playbackTime,playbackPlaying:this.props.playbackPlaying,recorderType:this.props.recorderType,onPlaybackTimeChange:this.onPlaybackTimeChange.bind(this),setPlaybackDuration:this.setPlaybackDuration.bind(this)})}}])&&rn(n.prototype,r),o&&rn(n,o),t}(r.Component);sn.propTypes={recordedCameraStream:d.a.instanceOf(T.a),recordedDesktopStream:d.a.instanceOf(T.a),recordedMicrophoneStream:d.a.instanceOf(T.a),playbackTime:d.a.number,recorderId:d.a.string,playbackPlaying:d.a.bool,dispatch:d.a.func,recorderType:d.a.oneOf(Object.values(_.a)).isRequired};var un=Object(Y.b)((function(e,t){var n=t.recorderId;return{recordedCameraStream:H.x(e,n),recordedDesktopStream:H.y(e,n),recordedMicrophoneStream:H.z(e,n),playbackTime:H.w(e,n),playbackPlaying:H.v(e,n),viewState:H.J(e,n)}}))(sn);n("MvlZ");function ln(e){return(ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==ln(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fn(this,pn(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.isActive;return a.a.createElement(O.a,{className:c()("recording-dot",t,{"recording-dot--active":n})},w.a.RECORDING_DOT)}}])&&dn(n.prototype,r),o&&dn(n,o),t}(a.a.PureComponent);bn.defaultProps={isActive:!0},bn.propTypes={className:d.a.string,isActive:d.a.bool};var yn=bn;function vn(e){return(vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On="recording-timer-icon",Cn="recording-timer-elapsed",_n="recording-timer-max",Tn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=gn(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==vn(o)&&"function"!==typeof o?wn(r):o,Sn(wn(wn(n)),"secondsToTimeString",(function(e){var t=n.props.i18n,r=Math.floor(e/60);r=n.addLeadingZero(r);var a=e%60;return a=n.addLeadingZero(a),t._("{minutes}:{seconds}",{minutes:r,seconds:a})})),Sn(wn(wn(n)),"addLeadingZero",(function(e){return e<10?"0"+e:""+e})),Sn(wn(wn(n)),"renderIcon",(function(){return a.a.createElement("div",{className:On},a.a.createElement(yn,null))})),Sn(wn(wn(n)),"getElapsedTime",(function(){})),Sn(wn(wn(n)),"renderElapsedTime",(function(){var e=n.props.recordingTime,t=Math.floor(e/1e3),r=n.secondsToTimeString(t);return a.a.createElement("div",{className:Cn},r)})),Sn(wn(wn(n)),"renderMaxTime",(function(){var e=n.props,t=e.isMaxLengthVisible,r=e.maxRecordLengthSeconds;if(t)return a.a.createElement("div",{className:_n},"(Max: ".concat(n.secondsToTimeString(r),")"))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.className;return a.a.createElement("div",{className:c()("recording-timer-wrapper",e)},a.a.createElement("div",{className:"recording-timer",role:"timer"},this.renderIcon(),this.renderElapsedTime(),this.renderMaxTime()))}}])&&hn(n.prototype,r),o&&hn(n,o),t}(a.a.PureComponent);Tn.defaultProps={isMaxLengthVisible:!0},Tn.propTypes={i18n:d.a.object,className:d.a.string,recordingTime:d.a.number,maxRecordLengthSeconds:d.a.number,isMaxLengthVisible:d.a.bool};var In=Object(o.withI18n)()(Tn);function Pn(e){return(Pn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return!t||"object"!==Pn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),An(this,jn(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(In,{recordingTime:this.props.recordingTime,isMaxLengthVisible:this.props.isMaxLengthVisible,maxRecordLengthSeconds:this.props.maxRecordLengthSeconds})}}])&&Rn(n.prototype,r),o&&Rn(n,o),t}(r.Component);Nn.propTypes={recordingTime:d.a.number,maxRecordLengthSeconds:d.a.number,isMaxLengthVisible:d.a.bool};var Dn=Object(Y.b)((function(e,t){var n=t.recorderId,r=t.isMaxLengthVisible;return{recordingTime:H.D(e,n),maxRecordLengthSeconds:H.p(e,n),isMaxLengthVisible:r}}))(Nn),Ln=n("aU7/"),Mn=n("ST1l");n("5THG");function xn(e){return(xn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return!t||"object"!==xn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vn(this,Gn(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.uploadingProgressPercent;return a.a.createElement("div",{className:"c-recorder__uploading-layout"},a.a.createElement("p",{className:"c-recorder__uploading-layout-text"},a.a.createElement(o.Trans,{id:"Uploading Result..."}),a.a.createElement("br",null),a.a.createElement(o.Trans,{id:"Do not close your browser"})),a.a.createElement("div",{className:"c-recorder__uploading-layout-progress",style:{width:e+"%"}}))}}])&&Fn(n.prototype,r),i&&Fn(n,i),t}(r.Component);qn.propTypes={downloadRecords:d.a.func,uploadingProgressPercent:d.a.number,i18n:d.a.object};var Wn=Object(o.withI18n)()(qn);function Bn(e){return(Bn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e,t){return!t||"object"!==Bn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yn(this,Hn(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(t,e),n=t,(r=[{key:"downloadRecords",value:function(){var e=this.props,t=e.dispatch,n=e.recorderId;t(z.d(n))}},{key:"render",value:function(){var e=this.props.uploadingProgressPercent;return a.a.createElement(Wn,{uploadingProgressPercent:e,downloadRecords:this.downloadRecords.bind(this)})}}])&&Qn(n.prototype,r),o&&Qn(n,o),t}(r.Component);Kn.propTypes={dispatch:d.a.func,recorderId:d.a.string,uploadingProgressPercent:d.a.number};var Xn=Object(Y.b)((function(e,t){var n=t.recorderId;return{uploadingProgressPercent:H.H(e,n)}}))(Kn);function $n(e){return($n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t){return!t||"object"!==$n(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jn(this,er(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.i18n,i=r.notifications,s=r.viewState,u=r.recorderId,l=r.showRecordButton,d=r.isListenWindowMode,f=r.listenWindowModeState,p=r.isStandaloneMode,m=r.isStandaloneModeAllowed,b=r.openWindowedRecorder,y=r.showSubmitButton,g=r.submitting,E=r.overlay,S=r.onChooseScreenContent,C=r.isMaxRecordingLengthVisible,_=r.recorderType,T=s===h.a.INITIAL,I=s===h.a.PREVIEW,P=s===h.a.RECORDING,R=a.a.createElement(Mn.a,{onClick:b,primary:!0,iconEl:a.a.createElement(O.a,null,w.a.OPEN_IN_BROWSER)},o._("Open Standalone Recorder"));return d?a.a.createElement("div",{className:"c-recorder",tabIndex:0},a.a.createElement("div",{className:"c-recorder__placeholder"},f===Ln.a.INITIALIZATION&&a.a.createElement("div",{className:"c-recorder__placeholder-text"},o._("Opening Standalone Recorder...")),f===Ln.a.INITED&&a.a.createElement("div",{className:"c-recorder__placeholder-text"},o._("Standalone Recorder opened")),f===Ln.a.WINDOW_IS_BLOCKED&&a.a.createElement("div",{className:"c-recorder__placeholder-text"},a.a.createElement("div",null,o._("Standalone Recorder window is being blocked by the browser")),R),f===Ln.a.WINDOW_CLOSED&&a.a.createElement("div",{className:"c-recorder__placeholder-text"},a.a.createElement("div",null,o._("Standalone Recorder was closed")),R))):a.a.createElement("div",{className:c()("c-recorder",(e={},t="c-recorder--standalone",n=p,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),tabIndex:0},a.a.createElement("div",{className:"recorder-main-container"},a.a.createElement(v,{list:i}),(T||P)&&a.a.createElement(be,{recorderId:u,recorderType:_}),a.a.createElement(te,{recorderId:u,showRecordButton:l,recorderType:_,isStandaloneMode:p,isStandaloneModeAllowed:m,onStandaloneModeClick:d?null:b,onChooseScreenContent:S}),I&&a.a.createElement(un,{recorderId:u,recorderType:this.props.recorderType}),P&&a.a.createElement(Dn,{recorderId:u,isMaxLengthVisible:C}),g&&a.a.createElement(Xn,{recorderId:u}),E&&a.a.createElement("div",{className:"c-recorder__overlay-container"},E)),a.a.createElement(qt,{showSubmitButton:y,recorderType:this.props.recorderType,recorderId:u}))}}])&&Zn(n.prototype,r),o&&Zn(n,o),t}(r.Component);nr.propTypes={notifications:d.a.arrayOf(d.a.instanceOf(u.a)),viewState:d.a.oneOf(Object.values(h.a)),listenWindowModeState:d.a.oneOf(Object.values(Ln.a)),recorderId:d.a.oneOfType([d.a.string,d.a.number]),showRecordButton:d.a.bool,showSubmitButton:d.a.bool,isListenWindowMode:d.a.bool,submitting:d.a.bool,openWindowedRecorder:d.a.func,onStandaloneModeClick:d.a.func,isStandaloneMode:d.a.bool,isStandaloneModeAllowed:d.a.bool,i18n:d.a.object,recorderType:d.a.oneOf(Object.values(_.a)).isRequired,overlay:d.a.node,onChooseScreenContent:d.a.func,isMaxRecordingLengthVisible:d.a.bool};t.a=Object(o.withI18n)()(nr)},Rso3:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("LFYD"),i=n("8For"),c=n("ZD0w"),s=(n("kJHI"),n("LvDl")),u=n.n(s),l=n("UyA7"),d=n("HNnK"),f=n("/MKj"),p=n("IF/7"),m=n("o41Y"),b=n("cMfo"),y=n("BulX"),v=n("Wtf/"),h=n("vRGJ"),g=n.n(h),E=n("9C/b"),w=n("DbOS"),S=n("fcFR");function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=_(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==O(a)&&"function"!==typeof a?I(r):a,P(I(I(n)),"clickHandler",(function(){var e=n.props.ltiScope,t=n.getTermClassId();if(e===b.a.CENGAGE_EDUCATOR_DOCK){var r=g.a.compile(y.f.EDUCATOR_ACTIVITY_LIST)({classId:t});window.location.href=Object(w.a)(Object(S.b)(r))}e===b.a.CENGAGE_CREATE&&(window.location.href="/educator/cengage/add-activity-to-path?lti-scope=cengage-create")})),P(I(I(n)),"getTermClassId",(function(){var e=n.props,t=e.match.params.classId,r=e.termClass;return r&&r.dbId?r.dbId:t})),n}var n,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.institution,r=e.currentUser,c=e.ltiScope;if(!(p.h(r)&&m.a(n)&&[b.a.CENGAGE_EDUCATOR_DOCK,b.a.CENGAGE_CREATE].includes(c)&&this.getTermClassId()))return null;var s={clickHandler:this.clickHandler,icon:o.a.BACK,text:t._("Back to educator view"),iconAriaLabel:t._("Back to educator view, icon")};return this.props.children&&u.a.isFunction(this.props.children)?this.props.children(s):a.a.createElement("button",{className:"back-to-educator-button",onClick:s.clickHandler,tabIndex:"1","aria-label":s.text},a.a.createElement(i.a,{ariaLabel:s.iconAriaLabel},s.icon),s.text)}}])&&C(n.prototype,r),c&&C(n,c),t}(r.Component);t.a=Object(E.a)(Object(f.b)((function(e){return{ltiScope:l.j(e),currentUser:d.h(e),institution:l.h(e),termClass:v.getTermClass(e)}}))(Object(c.withI18n)()(R)))},RtWw:function(e,t,n){},ST1l:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("qSfp"),i=n("LvDl"),c=n.n(i);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){return c.a.pick(e,Object.keys(d.componentProps))}var d=function(e){return a.a.createElement(o.b,u({},l(e),{className:e.className,ariaLabel:e.ariaLabel,raised:!0}),e.children)};d.componentProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},o.b.propTypes),d.propTypes={},d.defaultProps={},t.a=d},SXUj:function(e,t,n){},SZKS:function(e,t,n){},SfRD:function(e,t,n){},SuLN:function(e,t,n){},T0hT:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l);n("kwFD");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return d.a.pick(e,Object.keys(b.componentProps))}var b=function(e){return a.a.createElement(c.i,p({},m(e),{className:u()("progress-circular",e.className),disabled:!e.enabled}),e.children)};b.componentProps={className:i.a.string,centered:i.a.bool,scale:i.a.number,id:i.a.any.isRequired},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},b.componentProps),b.defaultProps={centered:!0},t.a=b},T1zh:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/MKj"),s=n("RMfM"),u=n("h15y"),l=n("zoNz"),d=n("rOOD"),f=n("TSYQ"),p=n.n(f),m=n("A2tp"),b=n("q8N1");function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,g(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props,t=e.isMain,n=e.style,r=e.toggleMainVideo,o=e.startDrag,i=e.playerOptions,c=e.playerId,s=e.resizeHandler,u=e.termClassId,l=e.activityId,d=e.usageContext,f=e.mediaId,y=e.onPlayerRef;return a.a.createElement("div",{className:p()("c-double-player__stream-holder",t?"c-double-player__stream-holder--main":"c-double-player__stream-holder--active"),tabIndex:0,role:"button",style:t?{}:n,onDoubleClick:function(){t||r()},onMouseDown:function(e){t||o(e)},onTouchStart:function(e){t||o(e)},onKeyDown:function(e){if(!t)return Object(b.b)(r)(e)},onDragStart:this.preventDefault.bind(this)},a.a.createElement(m.a,{id:"dual-media-container-video-player",logMediaWatching:this.props.logMediaWatching,onReady:this.props.onReady,options:i,termClassId:u,activityId:l,usageContext:d,mediaId:f,onPlayerRef:y,forceControlsOnLayout:t,playerId:c}),!t&&a.a.createElement("div",{className:"c-double-player__resizer",onMouseDown:s,onTouchStart:s}))}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component);w.defaultProps={onReady:function(){}};var S=n("EISf"),O=n("8For"),C=n("LFYD"),_=n("ZD0w"),T=n("K2Ti"),I=n("sRqO");function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=A(t).call(this,e),n=!a||"object"!==P(a)&&"function"!==typeof a?k(r):a,N(k(k(n)),"onPlayClick",(function(){var e=n.getMainPlayerId(),t=n.getPlayerState();n.emitter.play({playerId:e,startTime:t.time}),n.props.play()})),N(k(k(n)),"getPlayerState",(function(){var e=n.props.activePlayerState,t={};return e&&(t=e.state),t})),N(k(k(n)),"getMainPlayerId",(function(){var e=n.props,t=e.deskshareIsActive,r=e.getDesksharePlayerId,a=e.getWebcamPlayerId;return t?r():a()})),n.emitter=new T.a,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.getSecondVideoStyles,r=t.toggleMainVideo,o=t.deskshareIsActive,i=t.startDrag,c=t.getDesksharePlayerOptions,s=t.getDesksharePlayerId,u=t.resizeHandler,l=t.getWebcamPlayerOptions,d=t.getWebcamPlayerId,f=t.inFullScreen,m=t.toggleSplitView,b=t.isSplitView,y=t.i18n,v=t.marks,h=t.termClassId,g=t.activityId,E=t.usageContext,_=t.onDesksharePlayerRef,T=t.onWebcamPlayerRef,P=t.captionsList,R=t.transcriptUrl,A=t.setCurrentCaption,j=t.mainMediaId,k=t.slaveMediaId,D=o,L=!o,M=this.getMainPlayerId(),x=this.getPlayerState(),F=x.isIdle&&x.isReady,V=[{id:"view type toggler",component:a.a.createElement("span",{onClick:m,title:b?y._("Switch to window mode"):y._("Switch to column mode")},a.a.createElement(O.a,{className:"c-double-player__toggle-view-icon",ariaLabel:b?y._("Switch to window mode, icon"):y._("Switch to column mode, icon")},b?C.a.PICTURE_IN_PICTURE:C.a.VIEW_COLUMN))}];return a.a.createElement("div",{className:"c-double-player"},a.a.createElement("div",{className:p()("c-double-player__streams-holder",N({},"c-double-player__streams-holder--column",b))},a.a.createElement(w,{isMain:D,logMediaWatching:!1,style:n(),onPlayerRef:_,toggleMainVideo:r,startDrag:i,playerOptions:c(),playerId:s(),termClassId:h,activityId:g,usageContext:E,mediaId:k,resizeHandler:u}),a.a.createElement(w,{isMain:L,logMediaWatching:!1,onReady:function(){e.props.autoplay&&e.props.logMediaWatching&&e.emitter.play({playerId:d(),startTime:0})},onPlayerRef:T,style:n(),toggleMainVideo:r,startDrag:i,termClassId:h,activityId:g,usageContext:E,mediaId:j,playerOptions:l(),playerId:d(),resizeHandler:u}),F&&a.a.createElement(I.a,{className:"video-player-play-button--dual-stream",play:this.onPlayClick}),a.a.createElement(S.a,{duration:x.duration,isPlaying:x.isPlaying,volume:x.volume,isFullScreen:f,toggleFullScreen:this.props.toggleFullScreen,time:x.time,captions:P,transcriptUrl:R,setCurrentCaption:A,changeVolume:this.props.changeVolume,customActions:V,play:this.onPlayClick,seek:function(t){e.emitter.seek({playerId:M,startTime:x.time,endTime:t}),e.props.seek(t)},pause:function(){e.emitter.pause({playerId:M,startTime:x.time}),e.props.pause()},marks:v})))}}])&&R(n.prototype,r),o&&R(n,o),t}(r.Component),L=Object(_.withI18n)()(D),M=n("k7+O"),x=n.n(M),F=n("UX+v"),V=n("LvDl"),G=n.n(V),U=(n("MgaS"),n("apGr"));function q(e){return(q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=B(t).call(this,e),n=!a||"object"!==q(a)&&"function"!==typeof a?Y(r):a,H(Y(Y(n)),"toggleSplitView",(function(){var e=!n.props.isSplitView;n.executeAction(l.h,e)})),H(Y(Y(n)),"play",(function(){var e=n.props,t=e.dispatch,r=e.onPlay,a=n.getMainPlayerId();r&&r(),t(s.s(a))})),H(Y(Y(n)),"pause",(function(){var e=n.props.dispatch,t=n.getMainPlayerId();e(s.r(t))})),H(Y(Y(n)),"seek",(function(e){var t=n.props.dispatch,r=n.getMainPlayerId(),a=n.getMainPlayerState();e.toFixed(1)===a.state.duration.toFixed(1)&&(e=a.state.duration),t(s.B(r,e))})),H(Y(Y(n)),"changeVolume",(function(e){var t=n.props.dispatch,r=n.getMainPlayerId();t(s.A(r,e))})),H(Y(Y(n)),"toggleFullScreen",(function(){n.playerElem&&x.a&&x.a.enabled&&x.a.toggle(n.playerElem)})),H(Y(Y(n)),"onDesksharePlayerRef",(function(e){n.desksharePlayer=e})),H(Y(Y(n)),"onWebcamPlayerRef",(function(e){n.webcamPlayer=e})),H(Y(Y(n)),"getCaptionsList",(function(){var e;return(e=n.props.deskshareIsActive?n.desksharePlayer:n.webcamPlayer)?e.getCaptionsList():[]})),H(Y(Y(n)),"setCurrentCaption",(function(e){n.getCaptionsList().map((function(e){return e.mode=F.a.DISABLED,null})),e?(n.captionEnabled=!0,e.mode=F.a.SHOWING):n.captionEnabled=!1})),H(Y(Y(n)),"migrateCaptionState",(function(){var e;n.desksharePlayer.getCaptionsList().forEach((function(e){e.mode=F.a.DISABLED})),n.webcamPlayer.getCaptionsList().forEach((function(e){e.mode=F.a.DISABLED})),e=n.props.deskshareIsActive?n.desksharePlayer.getCaptionsList():n.webcamPlayer.getCaptionsList(),n.captionEnabled&&(e[0].mode=F.a.SHOWING)})),n.state={isSplitView:!1},n.captionEnabled=!1,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.executeAction(l.e,{webcamPlayerId:this.getWebcamPlayerId(),desksharePlayerId:this.getDesksharePlayerId()})}},{key:"componentDidMount",value:function(){x.a&&x.a.enabled&&x.a.on("change",function(){if(this.playerElem){var e=x.a.isFullscreen;this.executeAction(l.g,e)}}.bind(this)),this.props.logMediaWatching&&this.initEmitterListeners()}},{key:"initEmitterListeners",value:function(){var e=this,t=new T.a,n=this.props.onPlay,r=this.getWebcamPlayerId(),a=this.getDesksharePlayerId(),o=new U.a({mediaId:this.props.mainMediaId,mediaSrc:this.props.webcamSrc,usageContext:this.props.usageContext,termClassId:this.props.termClassId,activityId:this.props.activityId}),i=function(t){return function(n){n.playerId!==e.getMainPlayerId()&&n.playerId!==e.getSecondPlayerId()||t(n)}},c=i((function(t){var r=e.getMainPlayerState(),a=t.startTime,i=r.state.duration;(t.startTime.toFixed(2)===i.toFixed(2)||r.state.isEnded)&&(a=0),o.setPreviousTime(a),o.playStatement(a),n&&n(),t.playerId===e.getSecondPlayerId()&&e.play()})),s=i((function(t){o.pauseStatement(t.startTime),o.watchStatement(t.startTime),t.playerId===e.getSecondPlayerId()&&e.pause()})),u=i((function(t){var n=e.getMainPlayerState(),r=t.endTime;r.toFixed(1)===n.state.duration.toFixed(1)&&(r=n.state.duration),n.state.isPlaying&&o.watchStatement(t.startTime),o.setPreviousTime(r),o.skipStatement(t.startTime,r)})),l=i((function(e){o.setMediaDuration(e.duration)})),d=i((function(e){o.watchStatement(e.endTime),o.completeStatement(e.endTime)}));this.emitterUnsubscribers=[t.onPlay(r,c),t.onPlay(a,c),t.onPause(r,s),t.onPause(a,s),t.onSeek(r,u),t.onSeek(a,u),t.onDurationAvailable(r,l),t.onDurationAvailable(a,l),t.onComplete(r,d),t.onComplete(a,d)]}},{key:"componentWillUnmount",value:function(){this.executeAction(l.d),this.emitterUnsubscribers&&this.emitterUnsubscribers.forEach((function(e){return e()}))}},{key:"executeAction",value:function(e){for(var t=this.props,n=t.dispatch,r=t.playerId,a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];n(e.apply(void 0,[r].concat(o)))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.dispatch,n=this.getMainPlayerId(),r=this.getSecondPlayerId(),a=this.getMainPlayerState(),o=this.getSecondPlayerState(),i=e.webcamPlayerState,c=e.desksharePlayerState;i&&c&&o&&a&&(i.state.isPlaying&&!a.state.isPlaying&&this.playSecondVideo(),i.state.isPaused&&!a.state.isPaused&&(this.checkPlayerSync({mainPlayerState:i,secondPlayerId:r,secondPlayerState:c}),t(s.r(r))),i.state.isWaiting&&!a.state.isWaiting&&t(s.r(n)),c.state.isWaiting&&!o.state.isWaiting&&t(s.r(n)),!i.state.isWaiting&&a.state.isWaiting&&(this.checkPlayerSync({mainPlayerState:i,secondPlayerId:r,secondPlayerState:c}),t(s.s(n))),!c.state.isWaiting&&o.state.isWaiting&&(this.checkPlayerSync({mainPlayerState:i,secondPlayerId:r,secondPlayerState:c}),t(s.s(n))),i.state.isSeeking&&!a.state.isSeeking&&(t(s.r(n)),t(s.r(r))),c.state.isSeeking&&!o.state.isSeeking&&(t(s.r(n)),t(s.r(r))),!i.state.isSeeking&&a.state.isSeeking&&(t(s.r(n)),t(s.r(r)),this.syncPlayers({mainPlayerState:i,secondPlayerId:r})),i.state.volume!==a.state.volume&&t(s.A(r,i.state.volume)))}},{key:"playSecondVideo",value:function(){var e=this.props.dispatch,t=this.getSecondPlayerId(),n=this.getMainPlayerState(),r=this.getSecondPlayerState();n.state.time>=r.state.duration||e(s.s(t))}},{key:"getMainPlayerState",value:function(){return this.props.webcamPlayerState}},{key:"getSecondPlayerState",value:function(){return this.props.desksharePlayerState}},{key:"getMainPlayerId",value:function(){return this.getWebcamPlayerId()}},{key:"getSecondPlayerId",value:function(){return this.getDesksharePlayerId()}},{key:"syncPlayers",value:function(e){var t=e.mainPlayerState,n=e.secondPlayerId,r=this.props.dispatch,a=t.state.time;r(s.B(n,a))}},{key:"checkPlayerSync",value:function(e){var t=e.mainPlayerState,n=e.secondPlayerId,r=e.secondPlayerState,a=t.state.time,o=r.state.time;Math.abs(a-o)>=.5&&this.syncPlayers({mainPlayerState:t,secondPlayerId:n})}},{key:"startDrag",value:function(e){var t=this.props.secondaryVideoX,n=this.props.secondaryVideoY,r=e.clientX,a=e.clientY;r&&a||(r=e.touches[0].clientX,a=e.touches[0].clientY);var o=this;function i(e){var i=e.clientX,c=e.clientY;i&&c||(i=e.touches[0].clientX,c=e.touches[0].clientY);var s=t+(i-r),u=n+(c-a);o.executeAction(l.j,s),o.executeAction(l.k,u)}function c(){document.removeEventListener("mousemove",i),document.removeEventListener("touchmove",i),document.removeEventListener("mouseup",c),document.removeEventListener("touchend",c)}document.addEventListener("mousemove",i),document.addEventListener("touchmove",i),document.addEventListener("mouseup",c),document.addEventListener("touchend",c)}},{key:"toggleMainVideo",value:function(){var e=this.props.dispatch,t=!this.props.deskshareIsActive;this.executeAction(l.f,t),t?(e(s.v(this.getDesksharePlayerId(),!0)),e(s.v(this.getWebcamPlayerId(),!1))):(e(s.v(this.getDesksharePlayerId(),!1)),e(s.v(this.getWebcamPlayerId(),!0))),setTimeout(this.migrateCaptionState,0)}},{key:"resizeHandler",value:function(e){e.stopPropagation();var t=this.props.secondaryVideoWidth,n=e.clientX;n||(n=e.touches[0].clientX);var r=this;function a(e){var a=e.clientX;a||(a=e.touches[0].clientX);var o=t+(a-n);o=G.a.isNumber(o)?o:t,r.executeAction(l.i,o)}function o(){document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",o),document.removeEventListener("mouseup",o)}document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),document.addEventListener("mouseup",o),document.addEventListener("touchend",o)}},{key:"getSecondVideoStyles",value:function(){return{top:this.props.secondaryVideoY,left:this.props.secondaryVideoX,width:this.props.secondaryVideoWidth}}},{key:"getWebcamPlayerOptions",value:function(){var e={autoplay:this.props.autoplay,sources:[{src:this.props.webcamSrc,type:"video/mp4"}],controls:!1};return this.props.caption&&(e.tracks=[this.props.caption]),e}},{key:"getDesksharePlayerOptions",value:function(){var e={autoplay:this.props.autoplay,sources:[{src:this.props.deskshareSrc,type:"video/mp4"}],controls:!1};return this.props.caption&&(e.tracks=[this.props.caption]),e}},{key:"getWebcamPlayerId",value:function(){return this.props.playerId}},{key:"getDesksharePlayerId",value:function(){return"Deskshare"+this.props.playerId}},{key:"isMediaLoading",value:function(){var e=this.props,t=e.webcamPlayerState,n=e.desksharePlayerState;return!t||!n||t.state.isWaiting||n.state.isWaiting||!t.state.isReady||!n.state.isReady||t.state.isSeeking||n.state.isSeeking}},{key:"render",value:function(){var e=this,t=this.props,n=t.deskshareIsActive,r=t.inited,o=t.activePlayerState,i=t.inFullScreen,c=t.marks,s=t.transcriptUrl,u=t.termClassId,l=t.activityId,d=t.usageContext,f=t.mainMediaId,p=t.slaveMediaId;return r?a.a.createElement("div",{ref:function(t){return e.playerElem=t},className:"c-double-player-container"},a.a.createElement(L,{deskshareIsActive:n,autoplay:this.props.autoplay,activePlayerState:o,inFullScreen:i,isSplitView:this.props.isSplitView,logMediaWatching:this.props.logMediaWatching,termClassId:u,activityId:l,usageContext:d,mainMediaId:f,slaveMediaId:p,toggleSplitView:this.toggleSplitView,toggleFullScreen:this.toggleFullScreen,play:this.play,seek:this.seek,pause:this.pause,setCurrentCaption:this.setCurrentCaption,changeVolume:this.changeVolume,loading:this.isMediaLoading(),captionsList:this.getCaptionsList(),transcriptUrl:s,getSecondVideoStyles:this.getSecondVideoStyles.bind(this),toggleMainVideo:this.toggleMainVideo.bind(this),getDesksharePlayerOptions:this.getDesksharePlayerOptions.bind(this),getWebcamPlayerOptions:this.getWebcamPlayerOptions.bind(this),getDesksharePlayerId:this.getDesksharePlayerId.bind(this),getWebcamPlayerId:this.getWebcamPlayerId.bind(this),resizeHandler:this.resizeHandler.bind(this),startDrag:this.startDrag.bind(this),onDesksharePlayerRef:this.onDesksharePlayerRef,onWebcamPlayerRef:this.onWebcamPlayerRef,marks:c})):null}}])&&W(n.prototype,r),o&&W(n,o),t}(r.Component);z.propTypes={autoplay:i.a.bool,logMediaWatching:i.a.bool,onPlay:i.a.func},z.defaultProps={autoplay:!1,logMediaWatching:!0,onPlay:function(){}};t.a=Object(c.b)((function(e,t){var n=t.playerId,r=n,a="Deskshare"+n,o=d.a(e,n)?a:r;return{webcamPlayerState:u.a(r,e),desksharePlayerState:u.a(a,e),activePlayerState:u.a(o,e),inited:d.c(e,n),deskshareIsActive:d.a(e,n),secondaryVideoX:d.g(e,n),secondaryVideoY:d.h(e,n),secondaryVideoWidth:d.f(e,n),inFullScreen:d.b(e,n),isSplitView:d.d(e,n)}}))(z)},T5Sw:function(e,t,n){},TDYo:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"l",(function(){return c})),n.d(t,"k",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"B",(function(){return v})),n.d(t,"C",(function(){return h})),n.d(t,"y",(function(){return g})),n.d(t,"w",(function(){return E})),n.d(t,"x",(function(){return w})),n.d(t,"v",(function(){return S})),n.d(t,"J",(function(){return O})),n.d(t,"z",(function(){return C})),n.d(t,"M",(function(){return _})),n.d(t,"r",(function(){return T})),n.d(t,"u",(function(){return I})),n.d(t,"A",(function(){return P})),n.d(t,"n",(function(){return R})),n.d(t,"Q",(function(){return A})),n.d(t,"s",(function(){return j})),n.d(t,"t",(function(){return k})),n.d(t,"p",(function(){return N})),n.d(t,"o",(function(){return D})),n.d(t,"R",(function(){return L})),n.d(t,"G",(function(){return M})),n.d(t,"H",(function(){return x})),n.d(t,"I",(function(){return F})),n.d(t,"L",(function(){return V})),n.d(t,"D",(function(){return G})),n.d(t,"F",(function(){return U})),n.d(t,"E",(function(){return q})),n.d(t,"N",(function(){return W})),n.d(t,"O",(function(){return B})),n.d(t,"P",(function(){return Q})),n.d(t,"m",(function(){return Y})),n.d(t,"q",(function(){return H})),n.d(t,"K",(function(){return z}));var r=n("uy2z"),a="[Recorder] Init",o="[Recorder] Destroy",i="[Recorder] Set prop",c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:a,payload:{recorderId:e,options:t}}},s=function(e){return{type:o,payload:e}},u=function(e,t,n){return{type:i,payload:{recorderId:e,prop:t,value:n}}},l=function(e){return Object(r.call)(e,{method:"startRecord"})},d=function(e,t){return Object(r.call)(e,{method:"onCameraChange",args:[t]})},f=function(e,t){return Object(r.call)(e,{method:"onMicrophoneChange",args:[t]})},p=function(e){return Object(r.call)(e,{method:"stopRecord"})},m=function(e){return Object(r.call)(e,{method:"reset"})},b=function(e){return Object(r.call)(e,{method:"downloadRecords"})},y=function(e){return Object(r.call)(e,{method:"submit"})},v=function(e,t){return u(e,"errors.noAudioDevices",t)},h=function(e,t){return u(e,"errors.noVideoDevices",t)},g=function(e,t){return u(e,"errors.failedToGetSettings",t)},E=function(e,t){return u(e,"errors.failedToGetCameraStream",t)},w=function(e,t){return u(e,"errors.failedToGetDesktopStream",t)},S=function(e,t){return u(e,"errors.failedToGetAudioStream",t)},O=function(e,t){return u(e,"errors.recorderIsNotSupported",t)},C=function(e,t){return u(e,"errors.finalizeFailed",t)},_=function(e,t){return u(e,"settings",t)},T=function(e,t){return u(e,"cameraStream",t)},I=function(e,t){return u(e,"desktopStream",t)},P=function(e,t){return u(e,"microphoneStream",t)},R=function(e,t){return u(e,"audioDevices",t)},A=function(e,t){return u(e,"videoDevices",t)},j=function(e,t){return u(e,"currentCameraId",t)},k=function(e,t){return u(e,"currentMicrophoneId",t)},N=function(e,t){return u(e,"audioLevel",t)},D=function(e,t){return u(e,"audioIsNormal",t)},L=function(e,t){return u(e,"viewState",t)},M=function(e,t){return u(e,"recordedCameraStream",t)},x=function(e,t){return u(e,"recordedDesktopStream",t)},F=function(e,t){return u(e,"recordedMicrophoneStream",t)},V=function(e,t){return u(e,"recordingTime",t)},G=function(e,t){return u(e,"playbackDuration",t)},U=function(e,t){return u(e,"playbackTime",t)},q=function(e,t){return u(e,"playbackPlaying",t)},W=function(e,t){return u(e,"showRecordButton",t)},B=function(e,t){return u(e,"submitting",t)},Q=function(e,t){return u(e,"uploadingProgressPercent",t)},Y=function(e,t){return u(e,"audioAnalyzerState",t)},H=function(e,t){return u(e,"autoSubmit",t)},z=function(e,t){return u(e,"recordingPaused",t)}},TEiA:function(e,t,n){"use strict";var r=n("t4gB"),a=n("q1tI"),o=n.n(a),i=n("xrVw"),c=n("ZD0w"),s=n("691o");n("5jRi");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=n("TSYQ"),h=n.n(v),g=n("LvDl"),E=n.n(g),w=n("q2J1");function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j="sortable-header";function k(e){var t=function(t){function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,a=I(n).call(this,e),t=!a||"object"!==S(a)&&"function"!==typeof a?R(r):a,A(R(R(t)),"processProps",(function(e){var n={sortAccessor:e.defaultSort.accessor,sortDirection:t.convertDirection(e.defaultSort.direction),progressiveSortAccessorIndex:0};return n=_({},n,t.processData(e,n))})),A(R(R(t)),"processData",(function(e,n){var r=n.sortAccessor,a=n.sortDirection;return{sortedData:t.getSortedData(e.data,r,a,e.fallbackSort,e.onSortChange)}})),A(R(R(t)),"toggleSort",(function(e){if(e.accessor){var n=!t.state.sortDirection,r=t.state.progressiveSortAccessorIndex;if(t.state.sortAccessor===e.accessor){if(e.allowProgressiveSort){var a=t.state.sortAccessor.length;n===t.convertDirection(t.props.defaultSort.direction)&&(r=(r+1)%a)}t.setState({sortDirection:n,progressiveSortAccessorIndex:r},t.sortData)}else t.setState({sortDirection:t.convertDirection(t.props.defaultSort.direction),sortAccessor:e.accessor,progressiveSortAccessorIndex:0},t.sortData)}})),A(R(R(t)),"sortData",(function(){var e=t.getSortedData(t.props.data,t.state.sortAccessor,t.state.sortDirection,t.props.fallbackSort,t.props.onSortChange,t.state.progressiveSortAccessorIndex);t.setState({sortedData:e})})),A(R(R(t)),"getColumns",(function(){return t.props.columns.map((function(e){var n=void 0;e.accessor&&e.accessor===t.state.sortAccessor&&(n=t.state.sortDirection);var r=_({},e,{sorted:n,headerClassName:h()(e.sortable?j:null,e.headerClassName)});return e.sortable&&(r.onClick=function(){return t.toggleSort(e)}),r}))})),t.state=t.processProps(e),t}var r,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(n,t),r=n,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.processData(e,this.state))}},{key:"convertDirection",value:function(e){return"asc"===e}},{key:"getSortedData",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=t;if(o>0){var c=(i=C(t)).splice(0,o);i=E.a.concat(i,c)}for(var s=E.a.concat(i,r.accessor),u=[],l=0;l<s.length-1;l++)u.push(n?"asc":"desc");var d=this.convertDirection(r.direction),f=[].concat(u);d?f.push(n?"asc":"desc"):f.push(n?"desc":"asc");var p=Object(w.a)(s),m=Object(w.b)(e,p,f);return E.a.isFunction(a)&&a(m,i,u),m}},{key:"render",value:function(){return o.a.createElement(e,O({},E.a.omit(this.props,["data","columns","defaultSort","fallbackSort","onSortChange"]),{data:this.state.sortedData,columns:this.getColumns()}))}}])&&T(r.prototype,a),i&&T(r,i),n}(o.a.Component);return t.displayName="WithSort(".concat(Object(s.a)(e),")"),t}n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return D})),n.d(t,"a",(function(){return r.a}));var N=k(r.a),D=k(function(e){var t=10,n=function(n){function r(e){var n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,o=p(r).call(this,e),n=!o||"object"!==u(o)&&"function"!==typeof o?b(a):o,y(b(b(n)),"getStoredPerPageValue",(function(){var e=window.localStorage.getItem(n.getPerPageValueStorageKey());return e||(e=t),+e})),y(b(b(n)),"storePerPageValue",(function(e){window.localStorage.setItem(n.getPerPageValueStorageKey(),e)})),y(b(b(n)),"getPerPageValueStorageKey",(function(){return"#(".concat(n.props.id,")tableRowsPerPageValue")})),y(b(b(n)),"handlePagination",(function(e,t,r){n.storePerPageValue(t),n.state.rowsPerPage!==t&&(e=0,r=1),n.setState({start:e,rowsPerPage:t,pageNumber:r})})),y(b(b(n)),"getSlicedData",(function(){var e=n.props.data,t=n.state,r=t.start,a=t.rowsPerPage;return e.slice(r,r+a)}));var i=t;return e.preservePerPageValue&&e.id&&(i=n.getStoredPerPageValue()),n.state={start:0,rowsPerPage:i,pageNumber:1},n}var a,c,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,n),a=r,(c=[{key:"render",value:function(){var n=this.props,r=n.data,a=n.i18n,c=d(n,["data","i18n"]),s=r.length>t?o.a.createElement(i.O,{className:"data-table-pagination",rows:r.length,rowsPerPage:this.state.rowsPerPage,onPagination:this.handlePagination,page:this.state.pageNumber,rowsPerPageLabel:a._("Rows per page:")}):null;return o.a.createElement(e,l({},c,{data:this.getSlicedData(),footer:s}))}}])&&f(a.prototype,c),s&&f(a,s),r}(o.a.Component);return n.defaultProps={preservePerPageValue:!0},n.displayName="WithPagination(".concat(Object(s.a)(e),")"),Object(c.withI18n)()(n)}(r.a))},TGml:function(e,t,n){},TMv0:function(e,t,n){},TVp9:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return h}));var r=n("G4qV"),a=n("hf66"),o=Object(r.a)(a.a,(function(e){return e.activity})),i=Object(r.a)(a.a,(function(e){return e.qaActivity})),c=Object(r.a)(o,(function(e){return e.activityData})),s=Object(r.a)(c,(function(e){return e.qaSettings})),u=Object(r.a)(c,(function(e){return e.qaQuestion})),l=Object(r.a)(c,(function(e){return e&&e.myData?e.myData.qaAnswers:void 0})),d=Object(r.a)(c,(function(e){return e?e.qaQuestionsAmount:void 0})),f=Object(r.a)(i,(function(e){return e.isQuestionLoading})),p=Object(r.a)(i,(function(e){return e.isQuestionBeingWithdrawn})),m=Object(r.a)(i,(function(e){return e.activeQuestion})),b=Object(r.a)(i,(function(e){return e.isAnswerBeingDeleted})),y=Object(r.a)(i,(function(e){return e.practiceData})),v=(Object(r.a)(i,(function(e){return e.isSubmitting})),Object(r.a)(c,(function(e){return e.myData.qaSubmitRequestedAt}))),h=Object(r.a)(i,(function(e){return e.currentActivityState}))},TbpH:function(e,t,n){},TfV7:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("ZD0w"),c=n("d98y"),s=n("Wtf/"),u=n("MzIV"),l=n("LMP5"),d=n("2bAp");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=15e3,g=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=m(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==f(a)&&"function"!==typeof a?y(r):a,v(y(y(n)),"_timeoutId",null),v(y(y(n)),"doUpdate",(function(){n.forceUpdate()})),v(y(y(n)),"forceUpdateLater",(function(){n._timeoutId=setTimeout(n.doUpdate,h)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){try{clearTimeout(this._timeoutId)}catch(e){}}},{key:"render",value:function(){var e=this.props,t=e.dueDate,n=e.i18n;if(!t)return null;var r=Object(l.j)(t);return r.isPastDue||this.forceUpdateLater(),a.a.createElement(c.a,{className:"item-a",title:n._("Time until due"),iconClassName:d.a.CALENDAR},a.a.createElement("div",{className:"dashboard-contents"},a.a.createElement("div",{className:"dashboard-days-container"},a.a.createElement("span",{className:"dashboard-days-remaining","aria-label":n._("Time until due")},Object(l.i)(r,n)),a.a.createElement("span",{className:"dashboard-date-due","aria-label":n._("Due Date")},a.a.createElement(u.b,{unixTime:t})))))}}])&&p(n.prototype,r),o&&p(n,o),t}(r.Component);t.a=Object(i.withI18n)()(Object(o.b)((function(e){return{dueDate:s.getDueDate(e)}}))(g))},TkQy:function(e,t,n){},TsH0:function(e,t,n){},TtRr:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("uhBA"),a=n.n(r),o=n("LvDl"),i=n.n(o),c=n("vCeT");function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){throw new Error("init is not implemented")}},{key:"setNotifications",value:function(e){this.notifications=e}},{key:"setActiveNotifications",value:function(e){var t=this;this.activeNotifications=new Proxy(e,{set:function(e,n,r){if(i.a.isBoolean(e[n])&&e[n]!==r){var a=t.notifications&&t.notifications[n]?t.notifications[n].showDelay:null;a&&(t.notifications[n].showTime=Date.now()+a,setTimeout((function(){t.emit(c.a.NOTIFICATION)}),a)),e[n]=r,t.emit(c.a.NOTIFICATION)}return!0}})}},{key:"getNotifications",value:function(){var e=this,t=Object.keys(this.activeNotifications).map((function(t){if(e.activeNotifications[t])return e.notifications[t]}));return i.a.compact(t)}},{key:"getFinalizeOptions",value:function(){throw new Error("getFinalizeOptions is not implemented")}},{key:"isUploadFinished",value:function(){throw new Error("isUploadFinished is not implemented")}},{key:"destroy",value:function(){throw new Error("destroy is not implemented")}},{key:"addStream",value:function(){throw new Error("addStream is not implemented")}},{key:"startRecording",value:function(){throw new Error("startRecording is not implemented")}},{key:"stopRecording",value:function(){throw new Error("stopRecording is not implemented")}}])&&u(n.prototype,r),a&&u(n,a),t}(a.a)},Tvoo:function(e,t,n){},UDne:function(e,t,n){},UESQ:function(e,t,n){},UPJx:function(e,t,n){},"UX+v":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("LvDl"),i=n.n(o),c=n("17x9"),s=n.n(c),u=n("8OJ3"),l=(n("S8w2"),n("qJsM"),n("sRqO")),d=n("EISf"),f=n("k7+O"),p=n.n(f),m=n("q8N1"),b=n("TSYQ"),y=n.n(b),v=n("8bCP"),h=n("K2Ti"),g=n("ZD0w"),E=n("kbsL"),w=n("LFYD");n("BNXS");function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I="player-floating-captions-button",P=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=C(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==S(a)&&"function"!==typeof a?T(r):a,o=T(T(n)),c=function(){var e=n.props,t=e.isToggled;(0,e.onToggle)(!t)},(i="onClick")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.isToggled,r=e.i18n,o=n?r._("Hide Captions"):r._("Show Captions");return a.a.createElement(E.b,{primary:n,onClick:this.onClick,tooltip:{label:o},className:y()(I,"".concat(I,"--").concat(n?"on":"off"),t)},w.a.CLOSED_CAPTION)}}])&&O(n.prototype,r),o&&O(n,o),t}(r.PureComponent);P.defaultProps={isToggled:!1},P.propTypes={className:s.a.string,onToggle:s.a.func.isRequired,isToggled:s.a.bool};var R=Object(g.withI18n)()(P);function A(e){return(A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return G})),n.d(t,"d",(function(){return U}));var M={DISABLED:"disabled",SHOWING:"showing"},x=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=k(t).call(this,e),n=!a||"object"!==A(a)&&"function"!==typeof a?D(r):a,L(D(D(n)),"play",(function(){var e=n.props.options,t=e.showPseudoPlayButton,r=e.onPseudoPlayClick;n.player&&(t&&r?r():n.player.play())})),L(D(D(n)),"pause",(function(){n.player&&n.player.pause()})),L(D(D(n)),"seek",(function(e){n.player&&n.player.currentTime(e)})),L(D(D(n)),"changeVolume",(function(e){n.player&&n.player.volume(e)})),L(D(D(n)),"toggleFullScreen",(function(){if(n.playerElem&&p.a&&p.a.enabled)p.a.toggle(n.playerElem);else try{n.player.requestFullscreen()}catch(e){v.b.warn(e)}})),L(D(D(n)),"setCurrentCaption",(function(e){var t=n.getCaptionsList();i.a.forEach(t,(function(e){e.mode=M.DISABLED})),e&&(e.mode=M.SHOWING)})),L(D(D(n)),"updateCaptionTrackModes",(function(e){var t=n.getCaptionsList();i.a.forEach(t,(function(t){t.mode=e?M.SHOWING:M.DISABLED})),n.forceUpdate()})),L(D(D(n)),"isCaptionTrackVisible",(function(e){return i.a.some(e,{mode:M.SHOWING})})),L(D(D(n)),"keyDownHandler",(function(e){var t=n.props,r=t.isPaused,a=t.isIdle,o=t.duration,i=t.playerId;Object(m.c)([m.a.SPACE,m.a.ENTER],(function(){var e=n.player.currentTime();r||a?(n.emitter.play({playerId:i,startTime:e}),n.play()):(n.emitter.pause({playerId:i,startTime:e}),n.pause())}))(e),Object(m.c)(m.a.ARROW_LEFT,(function(){var e=n.player.currentTime(),t=e;(t-=1)<0&&(t=0),n.emitter.seek({playerId:i,startTime:e,endTime:t}),n.seek(t)}))(e),Object(m.c)(m.a.ARROW_RIGHT,(function(){var e=n.player.currentTime(),t=e;(t+=1)>o&&(t=o),n.emitter.seek({playerId:i,startTime:e,endTime:t}),n.seek(t)}))(e)})),L(D(D(n)),"seekHandler",(function(e){var t=n.props,r=t.time,a=t.playerId;n.emitter.seek({playerId:a,startTime:r,endTime:e}),n.seek(e)})),L(D(D(n)),"playHandler",(function(){var e=n.props,t=e.duration,r=e.playerId;if(!e.options.showPseudoPlayButton){var a=n.player.currentTime();a===t&&(a=0,n.seekHandler(a)),n.emitter.play({playerId:r,startTime:a})}n.play()})),L(D(D(n)),"pauseHandler",(function(){var e=n.props.playerId;n.emitter.pause({playerId:e,startTime:n.player.currentTime()}),n.pause()})),n.isPlaying=!1,n.isPaused=!1,n.isIdle=!0,n.isFullScreen=!1,n.time=0,n.previousTime=0,n.buffered=0,n.volume=1,n.emitter=new h.a,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.initPlayer()}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props;i.a.isEqual(e.sources,t.sources)||(this.destroyPlayer(),this.initPlayer()),e.isPlaying&&!this.isPlaying&&(this.isPlaying=!0,this.isPaused=!1,this.isIdle=!1,this.player.play()),e.isPaused&&!this.isPaused&&(this.isPlaying=!1,this.isPaused=!0,this.isIdle=!1,this.player.pause()),e.time!==this.time&&(this.time=e.time,this.player.currentTime(e.time)),e.volume!==this.volume&&(this.volume=e.volume,this.player.volume(e.volume)),e.isFullScreen!==this.isFullScreen&&(this.isFullScreen=e.isFullScreen,this.isFullScreen?this.player.requestFullscreen():this.player.exitFullscreen())}},{key:"destroyPlayer",value:function(){this.player&&this.player.dispose(),this.durationCheckInterval&&clearInterval(this.durationCheckInterval)}},{key:"initDurationCheckInterval",value:function(){var e=this;this.durationCheckInterval=setInterval((function(){if(e.player){var t=e.player.duration();t&&(e.props.setDuration(t),e.emitter.durationAvailable({playerId:e.props.playerId,duration:t}),clearInterval(e.durationCheckInterval))}}),500)}},{key:"initPlayer",value:function(){var e=this,t=i.a.merge({},this.props.options);t.controls=!1,t.language=this.props.language,this.player=Object(u.a)(this.videoNode,t,(function(){e.initPlayerHandlers(),e.props.onReady()}))}},{key:"initPlayerHandlers",value:function(){var e=this;this.isPlaying=!1,this.isPaused=!1,this.isIdle=!0,this.isFullScreen=!1,this.player.on(F.PLAY,(function(){e.isPlaying=!0,e.isPaused=!1,e.isIdle=!1,e.props.onPlay()})),this.player.on(F.PAUSE,(function(){e.isPlaying=!1,e.isPaused=!0,e.isIdle=!1,e.props.onPause()})),this.player.on(F.TIME_UPDATE,(function(){e.previousTime=e.time,e.time=e.player.currentTime(),e.props.onTimeUpdate(e.time)})),this.player.on(F.ENDED,(function(){e.emitter.complete({playerId:e.props.playerId,endTime:e.player.currentTime()}),e.props.onEnded()})),this.player.on(F.WAITING,(function(){e.props.setIsWaiting(!0)})),this.player.on(F.CAN_PLAY_THROUGH,(function(){e.props.setIsWaiting(!1)})),this.player.on(F.CAN_PLAY,(function(){e.props.setIsWaiting(!1)})),this.player.on(F.SEEKING,(function(){var t=e.player.currentTime(),n=e.time;n===t&&(n=e.previousTime),e.props.onSeek(n,t),e.props.setIsSeeking(!0)})),this.player.on(F.SEEKED,(function(){e.props.setIsSeeking(!1)})),this.player.on(F.PROGRESS,(function(){e.buffered=e.player.bufferedPercent(),e.props.setBufferedPercent(e.buffered)})),p.a&&p.a.enabled&&p.a.on("change",function(){if(this.playerElem){var e=p.a.isFullscreen;!e&&this.isFullScreen&&this.props.setFullScreen(!1),e&&this.playerElem===p.a.element&&this.props.setFullScreen(!0)}}.bind(this));var t=function(){e.volume=e.player.volume(),e.props.setVolume(e.volume)};t(),this.player.on(F.VOLUME_CHANGE,t);var n=function(){var t=e.player.duration();t?(e.props.setDuration(t),e.emitter.durationAvailable({playerId:e.props.playerId,duration:t})):e.initDurationCheckInterval()};this.player.readyState()===V.HAVE_NOTHING?this.player.one(F.LOADED_METADATA,n):n()}},{key:"getCaptionsList",value:function(){return(this.player?this.player.textTracks():{tracks_:[]}).tracks_}},{key:"render",value:function(){var e=this,t=this.props,n=t.isPlaying,r=t.isPaused,o=t.isIdle,i=t.isReady,c=t.isSeeking,s=t.duration,u=t.time,f=t.volume,p=t.isFullScreen,m=t.marks,b=t.id,v=t.options,h=t.forceControlsOnLayout,g=t.inFullScreenView,E=o&&i&&(v.controls||v.showPseudoPlayButton),w=r||o?this.playHandler:this.pauseHandler,S=v.controls||h,O=v.transcriptUrl,C=this.getCaptionsList(),_=!(v.controls&&this.props.showControlsBar||v.showPseudoPlayButton),T=Boolean(C&&C.length>0);return a.a.createElement("div",{className:y()("c-player",L({},"c-player--full-screen-view",g)),ref:function(t){return e.playerElem=t},onContextMenu:function(e){return e.preventDefault()}},a.a.createElement("div",{className:"c-player__video-wrapper",tabIndex:0,onKeyDown:S?this.keyDownHandler:null,onClick:S?w:null},a.a.createElement("div",{"data-vjs-player":!0},a.a.createElement("video",{ref:function(t){return e.videoNode=t},className:"video-js",playsInline:!0}),E&&a.a.createElement(l.a,{id:"".concat(b,"--play-button"),play:this.playHandler}))),v.controls&&this.props.showControlsBar&&a.a.createElement(d.a,{isPlaying:n,isPaused:r,isIdle:o,isReady:i,isSeeking:c,duration:s,time:u,volume:f,isFullScreen:p,marks:m,captions:C,transcriptUrl:O,setCurrentCaption:this.setCurrentCaption,toggleFullScreen:this.toggleFullScreen,changeVolume:this.changeVolume,seek:this.seekHandler,play:this.playHandler,pause:this.pauseHandler}),_&&a.a.createElement("div",{className:"player-floating-actions-container"},T&&a.a.createElement(R,{onToggle:this.updateCaptionTrackModes,isToggled:this.isCaptionTrackVisible(C)})))}}])&&j(n.prototype,r),o&&j(n,o),t}(r.Component),F={PLAY:"play",PAUSE:"pause",ENDED:"ended",BEFORE_PLAYLIST_ITEM:"beforeplaylistitem",SEEKING:"seeking",SEEKED:"seeked",PROGRESS:"progress",READY:"ready",TIME_UPDATE:"timeupdate",LOADED_METADATA:"loadedmetadata",VOLUME_CHANGE:"volumechange",FULL_SCREEN_CHANGE:"fullscreenchange",WAITING:"waiting",CAN_PLAY_THROUGH:"canplaythrough",CAN_PLAY:"canplay"},V={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},G=s.a.shape({sources:s.a.arrayOf(s.a.shape({src:s.a.string.isRequired,type:s.a.string.isRequired})),tracks:s.a.arrayOf(s.a.shape({src:s.a.string,kind:s.a.string,label:s.a.string})),transcriptUrl:s.a.string,autoplay:s.a.bool,controls:s.a.bool,aspectRatio:s.a.string,preload:s.a.oneOf(["auto","none","metadata"]),width:s.a.number,height:s.a.number,showPseudoPlayButton:s.a.bool,onPseudoPlayClick:s.a.func}),U={isPlaying:s.a.bool,isPaused:s.a.bool,isIdle:s.a.bool,isEnded:s.a.bool,isReady:s.a.bool,isFullScreen:s.a.bool,isSeeking:s.a.bool,time:s.a.number,duration:s.a.number,buffered:s.a.number,volume:s.a.number};x.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}({language:s.a.string.isRequired,options:G.isRequired},U)},UYZU:function(e,t,n){},UyA7:function(e,t,n){"use strict";n.d(t,"m",(function(){return l})),n.d(t,"o",(function(){return d})),n.d(t,"n",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"s",(function(){return v})),n.d(t,"u",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"w",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"y",(function(){return S})),n.d(t,"q",(function(){return O})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return _})),n.d(t,"v",(function(){return T})),n.d(t,"j",(function(){return I})),n.d(t,"g",(function(){return P})),n.d(t,"p",(function(){return R})),n.d(t,"i",(function(){return A})),n.d(t,"x",(function(){return k})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return D})),n.d(t,"c",(function(){return L}));var r=n("G4qV"),a=n("upk1"),o=n("BA0I"),i=n("hIiU"),c=n("LvDl"),s=n.n(c),u=Object(r.a)(a.a,(function(e){return e.config})),l=Object(r.a)(u,(function(e){return e.fileTransferConfig})),d=Object(r.a)(u,(function(e){return e.fileTransferConfigIsLoading})),f=Object(r.a)(u,(function(e){return e.fileTransferConfigHasError})),p=Object(r.a)(u,(function(e){return e.fileUploadConfig})),m=Object(r.a)(u,(function(e){return e.fileUploadConfigIsLoading})),b=Object(r.a)(u,(function(e){return e.fileUploadConfigHasError})),y=Object(r.a)(u,(function(e){return e.isD2L})),v=Object(r.a)(u,(function(e){return e.isD2LFreemium})),h=Object(r.a)(u,(function(e){return e.isD2LPremium})),g=Object(r.a)(u,(function(e){return e.isD2LLegacyFreemium})),E=Object(r.a)(u,(function(e){return e.isPlainLti})),w=Object(r.a)(u,(function(e){return e.institution})),S=Object(r.a)(w,(function(e){return i.a.isTrial(e)})),O=Object(r.a)(w,(function(e){return i.a.getTrialExpirationDate(e)})),C=Object(r.a)(u,(function(e){return e.termClass})),_=Object(r.a)(u,(function(e){return e.theme})),T=Object(r.a)(C,(function(e){return!!e&&e.isDeepLinkingEnabled})),I=(Object(r.a)(C,(function(e){return e.cohortableD2lCourses?e.cohortableD2lCourses:[]})),Object(r.a)(C,(function(e){return Boolean(e.isCohortManagementAllowed)})),Object(r.a)(u,(function(e){return e.ltiScope}))),P=Object(r.a)(p,(function(e){if(e){var t=e.requestParams;return t?JSON.parse(t):t}})),R=Object(r.a)(l,(function(e){if(e){var t=e.requestParams;return t?JSON.parse(t):t}})),A=Object(r.a)(C,(function(e){return e?e.integrationMode:null})),j=Object(r.a)(w,(function(e){return e&&s.a.includes(e.integrationType,o.b.TOP_HAT)})),k=Object(r.a)(j,A,(function(e,t){return e&&"TYPE__TOP_HAT_PREMIUM"!==t})),N=Object(r.a)(u,(function(e){return e.environmentConfig||{}})),D=Object(r.a)(N,(function(e){return e.aptrinsicApiKey})),L=Object(r.a)(u,(function(e){return e.featureConfig||{}}))},"V+cX":function(e,t,n){"use strict";t.a={INITIAL:"INITIAL",RECORDING:"RECORDING",PREVIEW:"PREVIEW",SUBMITTING:"SUBMITTING"}},V08G:function(e,t,n){},VJ5r:function(e,t,n){},VQIj:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("LvDl"),u=n.n(s),l=n("4XMt"),d=n("PjZZ");n("1CkY");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return u.a.pick(e,Object.keys(b.componentProps))}var b=function(e){var t=!e.enabled;return u.a.has(e,"disabled")&&(t=e.disabled),a.a.createElement(c.g,p({},m(e),{className:d.a(t,e,"selection-control-checkbox"),disabled:t,"aria-label":e.ariaLabel}))};b.componentProps={checked:i.a.bool,className:i.a.string,defaultChecked:i.a.bool,disabled:i.a.bool,id:i.a.string.isRequired,label:i.a.node,labelBefore:i.a.string,name:i.a.string.isRequired,onChange:i.a.func,style:i.a.object,value:i.a.string},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},b.componentProps,{enabled:i.a.bool,ariaLabel:i.a.string,tooltip:i.a.any}),b.defaultProps={enabled:!0},t.a=Object(l.c)(b)},VQZn:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l);n("Luur");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return d.a.pick(e,Object.keys(b.componentProps))}var b=function(e){var t="md-paper--"+e.zDepth;return a.a.createElement(c.d,p({},m(e),{className:u()("content-card",e.className,t)}),e.children)};b.componentProps={className:i.a.string,defaultExpanded:i.a.bool},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},b.componentProps,{zDepth:i.a.number}),b.defaultProps={defaultExpanded:!1,zDepth:2},t.a=b},VaGi:function(e,t,n){},VhdU:function(e,t,n){"use strict";var r=n("TtRr"),a=n("vCeT"),o=n("NlSD"),i=n("lTCR"),c=n.n(i);function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation {\n  createWebRtcRecordingSession {\n    connectionUrl\n    iceServers {\n      url\n      username\n      credential\n    }\n  }\n}\n"]);return s=function(){return e},e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getWebRtcSession",value:function(){return o.a.mutate({mutation:d}).then((function(e){return Promise.resolve(e.data.createWebRtcRecordingSession)}))}}],(n=null)&&u(t.prototype,n),r&&u(t,r),e}(),d=c()(s()),f=n("ZD0w"),p=n("Vy55"),m=n("gFX4"),b=n.n(m),y={OUTGOING_EVENTS:{JOIN:"join",START_BROADCAST:"startBroadcast",ICE_FOR_OUTGOING:"iceForOutgoing",START_RECORDING:"startRecording",STOP_RECORDING:"stopRecording",START_UPLOADING:"startUploading"},INCOMING_EVENTS:{ICE_FOR_OUTGOING:"iceForOutgoing",OUTGOING_ANSWER:"outgoingAnswer",RECORDING_STARTED:"recordingStarted",RECORDING_STOPPED:"recordingStopped",RECORDINGS_PREVIEW:"recordingsPreview",UPLOADING_FINISHED:"uploadingFinished",UPLOADING_ERROR:"uploadingError",UPLOADING_PROGRESS:"uploadingProgress"}},v="connected",h="failed",g=n("1Rmf"),E=n.n(g),w=n("8bCP"),S=n("uhBA");function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var n,r,a,o=e.stream,i=e.socket,c=e.iceServers,s=e.streamId,u=void 0===s?Date.now():s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=I(t).call(this),n=!a||"object"!==O(a)&&"function"!==typeof a?R(r):a,A(R(R(n)),"sendSocketMessage",(function(e){n.socket.emit("message",e)})),A(R(R(n)),"socketMessageHandler",(function(e){if(!n.closed&&e.streamId===n.streamId){var t=R(R(n));switch(e.id){case y.INCOMING_EVENTS.ICE_FOR_OUTGOING:t.outgoingPeer.addIceCandidate(e.candidate);break;case y.INCOMING_EVENTS.OUTGOING_ANSWER:t.outgoingPeer.processAnswer(e.sdpAnswer)}}})),A(R(R(n)),"addSocketHandlers",(function(){n.socket.on("message",n.socketMessageHandler)})),n.stream=o,n.socket=i,n.iceServers=c,n.streamId=u,n.closed=!1,n.addSocketHandlers(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"destroy",value:function(){this.closed||(this.outgoingPeer&&(this.outgoingPeer.dispose(),this.outgoingPeer=null),this.stream&&this.stream.destroy(),this.removeAllListeners(),this.socket.off("message",this.socketMessageHandler),this.closed=!0)}},{key:"startNegotiation",value:function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,a,o,i,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={videoStream:this.stream.stream,configuration:{iceServers:this.iceServers},onicecandidate:function(e){c.sendSocketMessage({id:y.OUTGOING_EVENTS.ICE_FOR_OUTGOING,streamId:c.streamId,candidate:e})}},e.next=3,this.generateOutgoingPeer(n);case 3:r=e.sent,a=C(r,2),o=a[0],i=a[1],this.outgoingPeer=o,o.peerConnection.oniceconnectionstatechange=function(e){if(!c.closed){var n=e.currentTarget.iceConnectionState;w.b.info('Outgoing peer "'.concat(c.streamId,'" ice state  ').concat(n)),n===h&&c.emit(t.EVENTS.ICE_FAILED),n===v&&c.emit(t.EVENTS.ICE_CONNECTED)}},o.peerConnection.ontrack=function(e){c.closed||c.emit(t.EVENTS.ON_REMOTE_STREAM,e.streams[0])},this.sendSocketMessage({id:y.OUTGOING_EVENTS.START_BROADCAST,streamId:this.streamId,sdpOffer:i});case 11:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_(o,r,a,i,c,"next",e)}function c(e){_(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}()},{key:"generateOutgoingPeer",value:function(e){return new Promise((function(t,n){var r=new E.a.WebRtcPeer.WebRtcPeerSendrecv(e,(function(e){if(e)return n("Error during creating of webRtcPeer",e);w.b.log("Local participant sends video"),r.generateOffer((function(e,a){if(e)return n("Error during sdpOffer generation for local video!",e);t([r,a])}))}))}))}}])&&T(n.prototype,r),a&&T(n,a),t}(n.n(S).a);A(j,"EVENTS",{ON_REMOTE_STREAM:"ON_REMOTE_STREAM",ICE_FAILED:"ICE_FAILED",ICE_CONNECTED:"ICE_CONNECTED"});var k=n("cK1Q"),N=n("cRwh");function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return K}));var G,U,q,W=3e3,B=Object(f.i18nMark)("Connecting to recording server..."),Q=Object(f.i18nMark)("Failed to create recording session"),Y=Object(f.i18nMark)("Failed to connect to recording server"),H=Object(f.i18nMark)("Connection lost. Trying to reconnect to recording server..."),z=Object(f.i18nMark)("Failed to establish media streaming, retrying..."),K=function(e){function t(e){var n,r,a,o=e.i18n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=x(t).call(this))||"object"!==D(a)&&"function"!==typeof a?V(r):a).setNotifications({CONNECTING:new p.a({type:p.a.TYPES.INFO,id:"CONNECTING",message:o._(B),showDelay:W,i18n:o}),FAILED_TO_CREATE_SESSION:new p.a({type:p.a.TYPES.ERROR,id:"FAILED_TO_CREATE_SESSION",message:o._(Q),clickHandler:n.init.bind(V(V(n))),showDelay:W,i18n:o}),FAILED_TO_CONNECT:new p.a({type:p.a.TYPES.ERROR,id:"FAILED_TO_CONNECT",message:o._(Y),clickHandler:n.init.bind(V(V(n))),showDelay:W,i18n:o}),DISCONNECTED:new p.a({type:p.a.TYPES.ERROR,id:"DISCONNECTED",message:o._(H),showDelay:W,i18n:o}),ICE_FAILED:new p.a({type:p.a.TYPES.ERROR,id:"ICE_FAILED",message:o._(z),showDelay:W,i18n:o})}),n.setActiveNotifications({CONNECTING:!1,FAILED_TO_CREATE_SESSION:!1,FAILED_TO_CONNECT:!1,DISCONNECTED:!1,ICE_FAILED:!1}),n.streams={},n.readyToRecordStreams={},n.inited=!1,n.wasDisconnected=!1,n.disconnectedCount=0,n.recording=!1,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.getWebRtcSession();case 3:t=e.sent,n=t.connectionUrl,r=t.iceServers,this.connectionUrl=n,this.iceServers=r,this.activeNotifications.FAILED_TO_CREATE_SESSION=!1,this.connectToServer(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.activeNotifications.FAILED_TO_CREATE_SESSION=!0;case 15:case"end":return e.stop()}}),e,this,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L(o,r,a,i,c,"next",e)}function c(e){L(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()},{key:"connectToServer",value:function(){var e=this;this.socket&&(this.socket.off(),this.socket.disconnect()),this.activeNotifications.CONNECTING=!0,this.socket=b.a.connect(this.connectionUrl),this.socket.on("connect",(function(){e.activeNotifications.CONNECTING=!1,e.activeNotifications.FAILED_TO_CONNECT=!1,e.activeNotifications.DISCONNECTED=!1,e.sendSocketMessage({id:y.OUTGOING_EVENTS.JOIN}),e.inited||e.emit(t.EVENTS.INITIALIZED),e.inited=!0,e.wasDisconnected&&(e.disconnectedCount<3?e.emit(a.a.REQUEST_NEW_STREAMS):(e.socket.disconnect(),e.setActiveNotifications({CONNECTING:!1,FAILED_TO_CREATE_SESSION:!1,FAILED_TO_CONNECT:!0,DISCONNECTED:!1,ICE_FAILED:!1}),e.disconnectedCount=0))})),this.socket.on("disconnect",(function(){e.activeNotifications.DISCONNECTED=!0,e.wasDisconnected=!0,e.disconnectCurrentStreams(),e.recording&&e.emit(a.a.RECORDING_PAUSED),e.emit(a.a.RESET_STREAMS),Object.keys(e.readyToRecordStreams).forEach((function(t){e.readyToRecordStreams[t]=!1})),e.disconnectedCount++})),this.socket.on("connect_failed",(function(){e.activeNotifications.FAILED_TO_CONNECT=!0})),this.addSocketMessagesHandler()}},{key:"getFinalizeOptions",value:function(){var e=this,t={};return Object.keys(this.previews).forEach((function(n){var r=N.a[n],a=e.previews[n];t[r]=new URL(a.streamUrl).pathname.replace(/^\//,"")})),t}},{key:"disconnectCurrentStreams",value:function(){Object.values(this.streams).forEach((function(e){return e.destroy()}))}},{key:"addSocketMessagesHandler",value:function(){var e=this;this.socket.on("message",(function(t){switch(t.id){case y.INCOMING_EVENTS.RECORDING_STARTED:if(e.recording&&e.wasDisconnected)return e.emit(a.a.RECORDING_RESUMED);e.emit(a.a.RECORDING_STARTED),e.recording=!0;break;case y.INCOMING_EVENTS.RECORDINGS_PREVIEW:var n=t.recordings,r={};Object.keys(e.streams).forEach((function(t){var a=e.streams[t],o=n[a.streamId];o&&(r[t]=new k.a({streamName:t,streamUrl:o}))})),e.previews=r,e.emit(a.a.PREVIEW_IS_READY,r),e.emit(a.a.UPLOADING_PROGRESS,100),e.emit(a.a.UPLOAD_FINISHED),e.uploadFinished=!0,e.socket.off(),e.activeNotifications.CONNECTING=!1,e.activeNotifications.FAILED_TO_CONNECT=!1,e.activeNotifications.DISCONNECTED=!1;break;case y.INCOMING_EVENTS.RECORDING_STOPPED:e.emit(a.a.RECORDING_STOPPED),e.recording=!1}}))}},{key:"isUploadFinished",value:function(){return this.uploadFinished}},{key:"destroy",value:function(){this.removeAllListeners(),this.socket&&(this.socket.off(),this.socket.disconnect()),Object.values(this.streams).forEach((function(e){e&&"function"===typeof e.destroy&&e.destroy()}))}},{key:"sendSocketMessage",value:function(e){this.socket.emit("message",e)}},{key:"addStream",value:function(e){var t,n=this,r=e.streamName;this.streams[r]&&this.streams[r].destroy(),this.readyToRecordStreams[r]=!1,this.wasDisconnected&&this.streams[r]&&(t=this.streams[r].streamId);var o=new j({stream:e,socket:this.socket,iceServers:this.iceServers,streamId:t});this.streams[r]=o;var i=null;o.on(j.EVENTS.ON_REMOTE_STREAM,(function(e){i=new k.a({stream:e,streamName:r})})),o.once(j.EVENTS.ICE_FAILED,(function(){n.activeNotifications.ICE_FAILED=!0,o.destroy(),o=null,n.streams[r]=null,setTimeout((function(){n.addStream(e)}),2e3)})),o.once(j.EVENTS.ICE_CONNECTED,(function(){n.activeNotifications.ICE_FAILED=!1,n.emit(a.a.STREAM_ADDED,i),n.readyToRecordStreams[r]=!0,n.checkForRerecord()})),o.startNegotiation()}},{key:"checkForRerecord",value:function(){var e=Object.values(this.readyToRecordStreams).every((function(e){return e}));if(this.recording&&this.wasDisconnected&&e)return this.startRecording()}},{key:"startRecording",value:function(){var e=Object.values(this.streams).map((function(e){return e.streamId}));this.sendSocketMessage({id:y.OUTGOING_EVENTS.START_RECORDING,streams:e})}},{key:"stopRecording",value:function(){var e=Object.values(this.streams).map((function(e){return e.streamId}));this.sendSocketMessage({id:y.OUTGOING_EVENTS.STOP_RECORDING,streams:e})}}])&&M(n.prototype,r),o&&M(n,o),t}(r.a);G=K,U="EVENTS",q=a.a,U in G?Object.defineProperty(G,U,{value:q,enumerable:!0,configurable:!0,writable:!0}):G[U]=q},VmXB:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"getActivityState",(function(){return py})),n.d(r,"getActivityData",(function(){return my})),n.d(r,"getIsLoading",(function(){return by})),n.d(r,"getStudentData",(function(){return yy})),n.d(r,"getAllStudentsData",(function(){return vy})),n.d(r,"getGradebookStudentData",(function(){return hy})),n.d(r,"getMembers",(function(){return gy})),n.d(r,"getIsMilestoneLoading",(function(){return Ey})),n.d(r,"getIsMeetingLoading",(function(){return wy})),n.d(r,"getResultPartials",(function(){return Sy})),n.d(r,"getIsResultsPartialsLoading",(function(){return Oy})),n.d(r,"getSelectedInProgressPartials",(function(){return Cy})),n.d(r,"getSelectedReadyToSubmitPartials",(function(){return _y})),n.d(r,"getActivityLog",(function(){return Ty})),n.d(r,"getGroupId",(function(){return Iy})),n.d(r,"getGroupCommentsIsLoading",(function(){return Py})),n.d(r,"getGroupMembers",(function(){return Ry})),n.d(r,"getTeamEvalIsLoading",(function(){return Ay})),n.d(r,"getRemoveSubmissionIsLoading",(function(){return jy})),n.d(r,"getPeerReviewCommentIsLoading",(function(){return ky})),n.d(r,"getIsPreviewLoading",(function(){return Ny})),n.d(r,"getPostSubmissionMedia",(function(){return Dy})),n.d(r,"getPostSubmissionText",(function(){return Ly})),n.d(r,"getStudentGroup",(function(){return My})),n.d(r,"getStudentGroupName",(function(){return xy})),n.d(r,"getStudentActivityResult",(function(){return Fy})),n.d(r,"getQASettings",(function(){return Vy})),n.d(r,"getStudentGroupReviewType",(function(){return Gy})),n.d(r,"isShowGroupMembers",(function(){return Uy})),n.d(r,"getActivityType",(function(){return qy})),n.d(r,"getStudentGroups",(function(){return Wy})),n.d(r,"getActivityId",(function(){return By})),n.d(r,"getActivityName",(function(){return Qy})),n.d(r,"getGradeReportUrl",(function(){return Yy})),n.d(r,"getCommentsReportUrl",(function(){return Hy})),n.d(r,"getDueDate",(function(){return zy})),n.d(r,"getDataForStudent",(function(){return Ky})),n.d(r,"getActivityResultPartialsForStudent",(function(){return Xy})),n.d(r,"getActivityResultPartialsCreatedCountForStudent",(function(){return $y})),n.d(r,"getActivityResultForStudent",(function(){return Zy})),n.d(r,"getActivityResultSubmitter",(function(){return Jy})),n.d(r,"getSubmitterId",(function(){return ev})),n.d(r,"getRubric",(function(){return tv})),n.d(r,"getGroupReviewRubric",(function(){return nv})),n.d(r,"isRubricReviewEnabled",(function(){return rv})),n.d(r,"isRubricSelfReviewEnabled",(function(){return av})),n.d(r,"isFiveStarEnabled",(function(){return ov})),n.d(r,"getFeedbackCommentIsLoading",(function(){return iv})),n.d(r,"getActivityCommentIsLoading",(function(){return cv})),n.d(r,"getCurrentGradingStudentId",(function(){return sv})),n.d(r,"isDeleteResultLoading",(function(){return uv})),n.d(r,"getTermClass",(function(){return lv})),n.d(r,"getTermClassId",(function(){return dv})),n.d(r,"getRubricEvaluations",(function(){return fv})),n.d(r,"getReviewReleasedAt",(function(){return pv})),n.d(r,"getIsReviewAnonymous",(function(){return mv})),n.d(r,"getGroupReviewType",(function(){return bv})),n.d(r,"getQAAnswers",(function(){return yv})),n.d(r,"isDeletingQAAnswer",(function(){return vv})),n.d(r,"getActivityDataWithContext",(function(){return hv})),n.d(r,"isAutoAnalysisScoreEnabled",(function(){return gv})),n.d(r,"isAutoAnalysisEnabled",(function(){return Ev})),n.d(r,"getReflectionSettings",(function(){return wv})),n.d(r,"isReflectionQuestionsEnabled",(function(){return Sv})),n.d(r,"getReflectionQuestions",(function(){return Ov})),n.d(r,"hasReflectionQuestions",(function(){return Cv})),n.d(r,"getReflectionAnswers",(function(){return _v})),n.d(r,"hasReflectionAnswers",(function(){return Tv})),n.d(r,"needReflectionAnswers",(function(){return Iv})),n.d(r,"isPeerReviewEnabled",(function(){return Pv})),n.d(r,"getPeerReviewType",(function(){return Rv})),n.d(r,"getPeerReviewRequiredCount",(function(){return Av})),n.d(r,"getPeerReviewDueDate",(function(){return jv})),n.d(r,"getStudentPeerReviews",(function(){return kv})),n.d(r,"getFilteredStudentPeerReviews",(function(){return Nv})),n.d(r,"isPeerReviewGradingEnabled",(function(){return Dv})),n.d(r,"getGradedPeerReviewWeight",(function(){return Lv})),n.d(r,"isCommentingAnonymous",(function(){return Mv})),n.d(r,"isReviewerAnonymous",(function(){return xv})),n.d(r,"isSubmitterAnonymous",(function(){return Fv})),n.d(r,"getEducatorGrade",(function(){return Vv})),n.d(r,"getOverallGrade",(function(){return Gv})),n.d(r,"getGradeParts",(function(){return Uv})),n.d(r,"getMainGradePart",(function(){return qv})),n.d(r,"getPeerReviewGradePart",(function(){return Wv})),n.d(r,"getInteractiveVideoMultipleChoiceGradePart",(function(){return Bv})),n.d(r,"getIsGradeDraftAllowed",(function(){return Qv})),n.d(r,"getGradeType",(function(){return Yv}));var a=n("q1tI"),o=n.n(a),i=n("2INN"),c=n("/MKj"),s=n("9C/b"),u=n("MOhp");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.location,r=new URLSearchParams(n.search);t(Object(u.x)(r.get("lti-scope")))}},{key:"render",value:function(){return null}}])&&d(n.prototype,r),a&&d(n,a),t}(a.Component),y=Object(s.a)(Object(c.b)()(b)),v=n("jKe7"),h=n("LvDl"),g=n.n(h);function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==E(t)&&"function"!==typeof t?_(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){function t(e){var r,a,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=S(this,O(t).call(this,e)),a=_(_(r)),i={pathToComponent:null},(o="state")in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i;var c=new URLSearchParams(window.location.search);return Boolean(c.get("debug"))?(n.e(12).then(n.bind(null,"M1op")).then((function(e){r.setState({pathToComponent:e.default})})),r):S(r)}var r,a,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this.state.pathToComponent;if(!e)return null;var t=g.a.map(e,(function(e,t){return o.a.createElement(i.a,{key:t,path:t,component:e})}));return o.a.createElement(v.a,null,t)}}])&&w(r.prototype,a),c&&w(r,c),t}(a.Component),I=n("PWzU");function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,j(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.match.params.classId;I.a.getClassData(+e)}},{key:"render",value:function(){return null}}])&&R(n.prototype,r),a&&R(n,a),t}(a.Component),D=Object(s.a)(Object(c.b)()(N)),L=n("17x9"),M=n.n(L),x=n("ZD0w"),F=n("vRGJ"),V=n.n(F),G=n("3fhg"),U=n("G4qV"),q=n("upk1"),W=Object(U.a)(q.a,(function(e){return e.customization})),B=Object(U.a)(W,(function(e){return e.launchpoint})),Q=Object(U.a)(B,(function(e){return Boolean(e)&&!g.a.isEmpty(e)})),Y=Object(U.a)(W,(function(e){return e.capabilities})),H=(Object(U.a)(Y,(function(e){return Boolean(e)&&!g.a.isEmpty(e)})),Object(U.a)(Y,(function(e){return g.a.memoize((function(t){return g.a.get(e,t)}))})),n("8bCP")),z=n("j15M"),K=n("nbG6"),X=n("/iAH");n("TMv0");function $(e){return($="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ne=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=J(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==$(a)&&"function"!==typeof a?te(r):a,i=te(te(n)),s=function(){var e=n.props.details;return e?o.a.createElement("div",{className:"launch-error-details"},e):null},(c="renderDetails")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(z.a,null,o.a.createElement(K.a,null,o.a.createElement(K.d,{title:e._("Unable to load Bongo")}),o.a.createElement(K.c,null,o.a.createElement(X.a,{type:X.a.NOTE_TYPES.ERROR,message:e._("There was an issue processing this request")}),this.renderDetails())))}}])&&Z(n.prototype,r),a&&Z(n,a),t}(o.a.PureComponent);ne.propTypes={details:M.a.any,i18n:M.a.object};var re=Object(x.withI18n)()(ne);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["Unable to route to view '","'"]);return oe=function(){return e},e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?le(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=Object(H.c)("launch"),pe={invalidMessage:null},me=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),de(le(le(n=ce(this,se(t).call(this,e)))),"getDefaultInvalidMessage",(function(){return n.props.i18n._("Insufficient launchpoint settings found in browser sessionStorage")}));var r=e.i18n,a=e.hasLaunchpoint,o=e.launchpoint,i=e.history,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){de(e,t,n[t])}))}return e}({},pe);if(fe.debug("Using launchpoint settings (".concat(a,")"),JSON.stringify(o)),a){var s=null,u=o.route,l=o.view,d=o.context,f=o.parameters;if(u)return i.replace(u),ce(n);if(l){fe.debug("Launch view of '".concat(l,"' is requested, checking supplied context and parameters"));var p=G.b[l];if(p){var m=n.validate(p,d,f);if(m)fe.error("Launch view of '".concat(l,"' could not be displayed: ").concat(m)),c.invalidMessage=m;else if(g.a.isFunction(p.path))s=p.path(d,f);else{var b=g.a.get(d,G.a.CONTEXT_USER_TYPE),y=g.a.get(p,"path.".concat(b));try{s=V.a.compile(y)(d)}catch(v){fe.error("Unable to route to view '".concat(l,"'"),v),c.invalidMessage=r.t(oe(),l)}}}else fe.error("Unknown launch view '".concat(l,"'"))}if(s)return i.replace(s),ce(n)}return n.state=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),n=t,(r=[{key:"validate",value:function(e,t,n){var r=g.a.pick(t,e.requiredContext);if(!this.areRequiredInputsPresent(r))return this.getDefaultInvalidMessage();var a=e.validator;return a?a(t,n):null}},{key:"areRequiredInputsPresent",value:function(e){var t=!0;return g.a.forEach(e,(function(e){if(!(g.a.isNumber(e)||g.a.isBoolean(e)||g.a.isString(e)&&e.length>0))return fe.error("Property '".concat(e,"' is required to display the requested view but it was set in sessionStorage")),t=!1,!1})),t}},{key:"render",value:function(){var e=this.getDefaultInvalidMessage();if(this.state){var t=this.state.invalidMessage;t&&(e=t)}if(e)return o.a.createElement(re,{details:e})}}])&&ie(n.prototype,r),a&&ie(n,a),t}(o.a.PureComponent);me.propTypes={history:M.a.any,match:M.a.any,location:M.a.any,hasLaunchpoint:M.a.bool,launchpoint:M.a.object,i18n:M.a.object};var be=Object(s.a)(Object(c.b)((function(e){return{hasLaunchpoint:Q(e),launchpoint:B(e)}}))(Object(x.withI18n)()(me)));function ye(e){return(ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ge(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(z.a,null,o.a.createElement(K.a,null,o.a.createElement(K.d,{title:e._("Unable to process request")}),o.a.createElement(K.c,null,o.a.createElement(X.a,{type:X.a.NOTE_TYPES.INFO,message:e._("This resource is not available yet")}))))}}])&&ve(n.prototype,r),a&&ve(n,a),t}(o.a.PureComponent);we.propTypes={i18n:M.a.object};var Se=Object(x.withI18n)()(we),Oe=n("mTCQ"),Ce=n("nOAq"),_e=n("RKRe"),Te=n("TSYQ"),Ie=n.n(Te);n("W8hI");function Pe(e){return(Pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Pe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,je(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:Ie()("error-page",this.props.className)},o.a.createElement(Oe.a,{className:"error-page-container"},o.a.createElement(Ce.a,{className:"error-page-content"},o.a.createElement("div",{className:"error-page-status-container"},o.a.createElement("div",{className:"status-circle"},this.props.status)),o.a.createElement("div",{className:"error-page-information"},o.a.createElement("h1",null,o.a.createElement(x.Trans,{id:"Oops..."})),o.a.createElement("div",null,o.a.createElement(x.Trans,{id:"Looks like we missed a beat."})))),o.a.createElement(_e.a,null)))}}])&&Re(n.prototype,r),a&&Re(n,a),t}(a.Component);Ne.propTypes={className:M.a.string,status:M.a.string};var De=Ne;function Le(e){return(Le="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ve=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,n=!(a=(e=Me(t)).call.apply(e,[this].concat(l)))||"object"!==Le(a)&&"function"!==typeof a?Fe(r):a,i=Fe(Fe(n)),s=function(){return o.a.createElement("div",null,o.a.createElement(De,{status:"404"},o.a.createElement("div",null,o.a.createElement(x.Trans,{id:"Oops... Looks like we missed a beat."}))))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),t}(a.Component),Ge=n("J/33"),Ue=n("kbsL"),qe=n("i8i4"),We=n.n(qe),Be=n("ZtzG"),Qe=n("MzIV");n("7FdR");function Ye(e){return(Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $e=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=ze(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==Ye(a)&&"function"!==typeof a?Xe(r):a,o=Xe(Xe(n)),c=function(){var e=We.a.findDOMNode(n.messagesContainer);e.scrollTop=e.scrollHeight},(i="scrollToBottom")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,n=t.messages,r=t.i18n;return n?o.a.createElement("div",{className:"activity-log-container"},o.a.createElement("div",{className:"activity-log-messages",ref:function(t){e.messagesContainer=t}},n.map((function(e,t){var n=e.user?e.user.firstName+" "+e.user.lastName:null;return e.isSystem?o.a.createElement(K.a,{key:t},o.a.createElement("div",{className:Ie()("activity-log-item"),key:t},o.a.createElement(Be.a,{className:"activity-log-item-avatar",value:n||r._("System Message")}),o.a.createElement("div",{className:"activity-log-item-contents"},o.a.createElement("p",null,e.text),o.a.createElement("p",null,o.a.createElement(Qe.a,{unixTime:e.createdAt}))))):null})))):null}}])&&He(n.prototype,r),a&&He(n,a),t}(a.Component);$e.propTypes={messages:M.a.array};var Ze=Object(x.withI18n)()($e),Je=n("LFYD"),et=n("Wtf/");function tt(e){return(tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var it=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=rt(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==tt(a)&&"function"!==typeof a?ot(r):a,o=ot(ot(n)),c=function(){n.props.history.replace(n.props.parentUrl)},(i="onBackClick")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.i18n,r=o.a.createElement(Ue.c,{id:"button-activity-log-goto-assignment",ariaLabel:n._("Go to assignment"),onClick:this.onBackClick},Je.a.BACK);return o.a.createElement("div",{className:"md-toolbar-relative"},o.a.createElement(Ge.a,{className:"page-toolbar",nav:r,title:n._("Activity Log")}),o.a.createElement(Ze,{messages:t}))}}])&&nt(n.prototype,r),a&&nt(n,a),t}(a.Component);it.propTypes={parentUrl:M.a.string.isRequired};var ct=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{comments:et.getActivityLog(e),commentsLoading:et.getGroupCommentsIsLoading(e)}}))(it))),st=n("QMWu"),ut=n("hFGE"),lt=n("uaEo"),dt=n("+Ft7");n("LKel");function ft(e){return(ft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ht=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=mt(t).call(this,e),n=!a||"object"!==ft(a)&&"function"!==typeof a?yt(r):a,vt(yt(yt(n)),"onMessageChange",(function(e){n.setState({message:e})})),vt(yt(yt(n)),"onSubmit",(function(){n.props.onSubmit(n.state.message),n.setState({message:""})})),vt(yt(yt(n)),"scrollToBottom",(function(){var e=We.a.findDOMNode(n.messagesContainer);e.scrollTop=e.scrollHeight})),vt(yt(yt(n)),"onDeleteComment",(function(e){n.props.onDelete&&n.props.onDelete(e)})),n.state={message:""},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state.message,n=this.props,r=n.canDelete,a=n.i18n,i=this.props.messagesLoading?"none":"block",c=Object(lt.f)(t);return o.a.createElement("div",{className:"chat-container"},o.a.createElement("div",{className:"chat-messages",ref:function(t){e.messagesContainer=t}},this.props.messages.map((function(t,n){if(t.isSystem)return null;var i=t.user.dbId;return o.a.createElement("div",{className:Ie()("chat-message-item",i===e.props.studentId?"reverse":"",r?"deletable":""),key:n},o.a.createElement(Be.a,{className:"chat-message-avatar",value:t.user.firstName+" "+t.user.lastName}),o.a.createElement("div",{className:"chat-message-item-arrow"}),o.a.createElement("div",{className:"chat-message-item-contents"},o.a.createElement("p",null,t.text),o.a.createElement("div",{className:"chat-message-actions"},o.a.createElement(Qe.a,{unixTime:t.createdAt,dateTimeFormat:dt.a.MEDIUM}),r?o.a.createElement(Ue.c,{id:"button-chat-message-delete",className:"delete-chat-button",ariaLabel:a._("Delete Comment"),onClick:function(){e.onDeleteComment(t)}},Je.a.DELETE):null)))}))),o.a.createElement("div",{className:"chat-actions"},o.a.createElement("div",{className:"chat-actions-contents"},o.a.createElement(ut.i,{id:"chat-message-input",className:"chat-actions-input",enabled:!this.props.messagesLoading,placeholder:a._("Message..."),onChange:this.onMessageChange,value:t,ariaLabel:a._("Message"),errorText:c.exceedsLimit?a._("Exceeds {0} characters.",{0:c.maxLength}):"",maxLength:c.maxLength,required:!c.isEmpty,rows:1,maxRows:4}),this.props.messagesLoading?o.a.createElement(st.a,{id:"chat_progress_icon"}):null,o.a.createElement(Ue.c,{id:"button-chat-message-send",style:{display:i},className:"chat-message-send-button",enabled:c.isValid,primary:!0,onClick:this.onSubmit,ariaLabel:a._("Chat")},Je.a.SEND))))}}])&&pt(n.prototype,r),a&&pt(n,a),t}(a.Component);ht.propTypes={canDelete:M.a.bool,messages:M.a.array,messagesLoading:M.a.bool,studentId:M.a.number.isRequired,onSubmit:M.a.func,onDelete:M.a.func},ht.defaultProps={canDelete:!1};var gt=Object(x.withI18n)()(ht),Et=n("xHcp"),wt=n("HNnK");n("iqyR");function St(e){return(St="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pt=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Ct(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==St(a)&&"function"!==typeof a?Tt(r):a,It(Tt(Tt(n)),"onBackClick",(function(){n.props.history.replace(n.props.parentUrl)})),It(Tt(Tt(n)),"onDelete",(function(e){Et.a.deleteGroupComment(e.dbId)})),It(Tt(Tt(n)),"onSubmit",(function(e){Et.a.addGroupComment(e,n.props.groupId)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.canDelete,n=e.comments,r=e.commentsLoading,a=e.userId,i=e.i18n,c=o.a.createElement(Ue.c,{id:"button-chat-goto-assignment",ariaLabel:i._("Go to assignment"),onClick:this.onBackClick},Je.a.BACK);return o.a.createElement("div",null,o.a.createElement(Ge.a,{className:"page-toolbar",nav:c,title:i._("Chat")}),o.a.createElement(gt,{canDelete:t,messages:n,onDelete:this.onDelete,onSubmit:this.onSubmit,studentId:a,messagesLoading:r}))}}])&&Ot(n.prototype,r),a&&Ot(n,a),t}(a.Component);Pt.propTypes={canDelete:M.a.bool,parentUrl:M.a.string.isRequired},Pt.defaultProps={canDelete:!1};var Rt=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{comments:et.getActivityLog(e),commentsLoading:et.getGroupCommentsIsLoading(e),userId:wt.i(e),groupId:et.getGroupId(e)}}))(Pt))),At=n("hvs/"),jt=n("hf66"),kt=Object(U.a)(jt.a,(function(e){return e.groupFormation})),Nt=Object(U.a)(kt,(function(e){return e.isLoading})),Dt=Object(U.a)(kt,(function(e){return e.groupFormationData})),Lt=n("NlSD"),Mt=n("lTCR"),xt=n.n(Mt),Ft=n("wNa6"),Vt=n("b+Px"),Gt=n("8DtX"),Ut=n("mxsA");function qt(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    mutation joinStudentGroup($input: JoinStudentGroupInput!) {\n        joinStudentGroup(input: $input) {\n            studentGroup {\n                dbId\n                name\n                members {\n                    ...GeneralUser\n                }\n            }\n        }\n    }\n    ","\n"]);return qt=function(){return e},e}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getStudentGroupsToJoin",value:function(e){return new Promise((function(t,n){Ft.a.dispatch(Vt.d(!0)),Lt.a.query({query:Gt.f,variables:{activityId:e}}).then((function(e){e&&e.data?(Ft.a.dispatch(Vt.c(e.data.activity)),t(e)):n(e),Ft.a.dispatch(Vt.d(!1))})).catch((function(e){n(e),Ft.a.dispatch(Vt.d(!1))}))}))}},{key:"joinStudentGroup",value:function(e,t){return new Promise((function(n,r){Ft.a.dispatch(Vt.d(!0)),Lt.a.mutate({mutation:Qt,variables:{input:{activityDbId:e,groupDbId:t}}}).then((function(e){e&&e.data?n(e):r(e),Ft.a.dispatch(Vt.d(!0))})).catch((function(e){r(e),Ft.a.dispatch(Vt.d(!0))}))}))}}])&&Wt(t.prototype,n),r&&Wt(t,r),e}(),Qt=xt()(qt(),Ut.d),Yt=new Bt,Ht=n("zL4/"),zt=n("giI2"),Kt=n("iGlQ"),Xt=n("hu4m"),$t=n("yxKi"),Zt=n("TEiA");n("dGj9");function Jt(e){return(Jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=tn(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Jt(a)&&"function"!==typeof a?rn(r):a,an(rn(rn(n)),"state",{filterValue:"",selectedGroup:null}),an(rn(rn(n)),"onFilterChange",(function(e){n.setState({filterValue:e})})),an(rn(rn(n)),"onClearFilter",(function(){n.setState({filterValue:""})})),an(rn(rn(n)),"getGroupContainer",(function(e,t){var r=n.props.i18n;return o.a.createElement("div",{key:"group-formation-group-container-"+t,className:"group-formation-group-container"},o.a.createElement("span",{className:"group-formation-group-name"},e.name),o.a.createElement("div",{className:"group-formation-group-status"},e.members===e.maxAmount?o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Full"})):o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"{0} spots available",values:{0:e.maxAmount-e.members}}))),o.a.createElement(Ue.f,{id:"button-group-formation-join["+t+"]",primary:!0,ariaLabel:r._("Join"),enabled:e.members!==e.maxAmount},o.a.createElement(x.Trans,{id:"Join"})))})),an(rn(rn(n)),"onGroupSelection",(function(e){n.setState({selectedGroup:e})})),an(rn(rn(n)),"getGroupList",(function(){var e=n.props,t=e.i18n,r=e.groupFormationData.studentGroupsToJoin,a=[];return a.push(o.a.createElement(Kt.c,{key:"join_new_group",data:null,active:0===r.length,enabled:!0,onClick:function(){n.onGroupSelection(null)},primaryText:t._("(New Group)")})),o.a.createElement(Kt.b,null,a)})),an(rn(rn(n)),"onMemberListRowSelect",(function(){})),an(rn(rn(n)),"onJoinClick",(function(){var e=n.state.selectedGroup,t=n.props.match.params.activityId;Yt.joinStudentGroup(t,e?e.dbId:null).then((function(){H.b.debug("in the callback")}))})),an(rn(rn(n)),"getSelectedGroupDetails",(function(){var e=n.state.selectedGroup,t=n.props,r=t.i18n,a=t.groupFormationData,i=t.isLoading,c=e&&e.members&&e.members.length>0,s=[{accessor:"name",grow:!0,className:"member-name",label:r._("Name"),renderer:function(e){return o.a.createElement(Ht.a,{showValue:!0,value:e.firstName+" "+e.lastName})}}];return o.a.createElement("div",{className:"group-details-container"},o.a.createElement("div",{className:"group-details-header"},o.a.createElement("div",{className:"group-details-header-title"},o.a.createElement("h2",{className:"section-header"},e?e.name:r._("(New Group)")),o.a.createElement("div",null,o.a.createElement("span",null,r._("Members: 0 of {0}",{0:a.maxStudentsAmountInGroup})))),o.a.createElement(Ue.f,{id:"button-group-formation-join-selected",primary:!0,onClick:n.onJoinClick,ariaLabel:r._("Join"),isLoading:i,enabled:!i},o.a.createElement(x.Trans,{id:"Join"}))),o.a.createElement("div",{className:Ie()("group-details-body",c?null:"empty-members")},c?o.a.createElement(Zt.a,{columns:s,className:"group-members-table",data:e?e.members:[],listAccessor:"name",onListRowSelect:n.onMemberListRowSelect,tableSummary:r._("A list of the group members")}):o.a.createElement("div",{className:"group-members-empty-container"},o.a.createElement("p",null,r._("There are no members in this group yet.")))))})),an(rn(rn(n)),"getDescription",(function(){var e=n.props.groupFormationData;return e?o.a.createElement("div",null,o.a.createElement(x.Trans,{id:"Finalize date: <0/>",components:[o.a.createElement(Qe.a,{unixTime:e.groupFormationFinalizeAt})]})):null})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state.filterValue,t=this.props.i18n;return o.a.createElement($t.a,{title:t._("Group Selection"),description:this.getDescription()},o.a.createElement(Xt.a,{className:"group-formation-filter-container",zDepth:5},o.a.createElement(zt.a,{className:"group-formation-filter-icon",ariaLabel:t._("Group Formation Filter, icon")},Je.a.FILTER),o.a.createElement(ut.i,{id:"group-formation-filter-input",fullWidth:!0,onChange:this.onFilterChange,placeholder:t._("Looking for a classmate?"),value:e,ariaLabel:t._("Looking for a classmate?")}),e.trim().length>0?o.a.createElement(Ue.c,{id:"button-group-selection-filter-clear",onClick:this.onClearFilter},Je.a.CLOSE):null),o.a.createElement(K.a,null,o.a.createElement(K.d,{title:t._("Groups")}),o.a.createElement(K.c,null,o.a.createElement("div",{className:"group-list-container"},o.a.createElement("div",{className:"group-list"},this.getGroupList()),this.getSelectedGroupDetails()))))}}])&&en(n.prototype,r),a&&en(n,a),t}(a.Component),cn=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isLoading:et.getIsLoading(e),groupFormationData:Dt(e)}}))(on))),sn=n("rKop"),un=n("VQZn");function ln(e){return(ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==ln(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fn(this,pn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.activityId;sn.a.getActivityData(+e)}},{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(z.a,{title:e._("Group Formation")},o.a.createElement(un.a,null,"Some group formation stuff for the system"))}}])&&dn(n.prototype,r),a&&dn(n,a),t}(a.Component),yn=Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),isLoading:et.getIsLoading(e)}}))(Object(x.withI18n)()(bn))),vn=n("ArDN");function hn(e){return(hn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cn=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=En(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==hn(a)&&"function"!==typeof a?Sn(r):a,On(Sn(Sn(n)),"componentDidMount",(function(){var e=n.props.match.params.activityId;Yt.getStudentGroupsToJoin(+e)})),On(Sn(Sn(n)),"getViewByType",(function(e){switch(e){case vn.a.STUDENT_FORMED:return o.a.createElement(cn,null);case vn.a.SYSTEM_FORMED:return o.a.createElement(yn,null);default:return o.a.createElement("span",null,"Nope")}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.groupFormationData,n=e.isLoading;if(n||!t)return o.a.createElement(At.b,{loading:n});var r=t.executorsType;return r?this.getViewByType(r):null}}])&&gn(n.prototype,r),a&&gn(n,a),t}(a.Component),_n=Object(s.a)(Object(c.b)((function(e){return{groupFormationData:Dt(e),isLoading:Nt(e)}}))(Cn));function Tn(e){return(Tn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jn=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Pn(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Tn(a)&&"function"!==typeof a?An(r):a,i=An(An(n)),s=function(){var e=n.props,t=e.match.params.activityId,r=e.pollingEnabled,a=e.children,i=e.description,c=e.title,s=e.serviceMethod,u=e.allowPeerReviewBeforeSubmission;return o.a.createElement($t.b,{title:c,description:i,pollingEnabled:r,serviceMethod:s,serviceParameters:[+t,u]},a)},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.activityId,n=e.serviceMethod,r=e.allowPeerReviewBeforeSubmission;n.apply(null,[+t,r])}}])&&In(n.prototype,r),a&&In(n,a),t}(a.Component);jn.propTypes={description:M.a.node,pollingEnabled:M.a.bool,serviceMethod:M.a.func.isRequired,title:M.a.string},jn.defaultProps={pollingEnabled:!0};var kn=Object(s.a)(Object(c.b)((function(e){return{allowPeerReviewBeforeSubmission:et.isPeerReviewAllowedBeforeSubmission(e)}}))(jn)),Nn=n("TfV7"),Dn=n("yG+V");n("zHZz");function Ln(e){return(Ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Un(e,t,n[t])}))}return e}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Fn(t).call(this,e),n=!a||"object"!==Ln(a)&&"function"!==typeof a?Gn(r):a,Un(Gn(Gn(n)),"getInitialStateFromProps",(function(e){var t=g.a.clone(e.member);if(t.myFiveStarRating){if(!t.myFiveStarRating.comment){var n=g.a.clone(t.myFiveStarRating);n.comment="",t.myFiveStarRating=n}}else t.myFiveStarRating={value:0,comment:""};return{saveEnabled:!1,member:t}})),Un(Gn(Gn(n)),"onRatingChange",(function(e){var t=n.props.onChange,r=Mn({},n.state.member),a=Mn({},r.myFiveStarRating);a.value=e,r.myFiveStarRating=a,t&&t(),n.setState({member:r,saveEnabled:!0})})),Un(Gn(Gn(n)),"onCommentsChanged",(function(e){var t=n.props.onChange,r=Mn({},n.state.member),a=Mn({},r.myFiveStarRating);a.comment=e,r.myFiveStarRating=a,t&&t(),n.setState({member:r,saveEnabled:!0})})),Un(Gn(Gn(n)),"onSave",(function(){var e=n.props.match.params.activityId,t=n.state.member;e=+e,Et.a.saveTeamEvalFiveStar(e,t.dbId,t.myFiveStarRating.value,t.myFiveStarRating.comment,(function(){n.setState({saveEnabled:!1})}))})),Un(Gn(Gn(n)),"onCancel",(function(){n.setState(n.getInitialStateFromProps(n.props))})),Un(Gn(Gn(n)),"UNSAFE_componentWillReceiveProps",(function(e){if(n.props.member.dbId!==e.member.dbId){var t=n.getInitialStateFromProps(e);e.isTeamEvalLoading&&(t.saveEnabled=!0),n.setState(t)}})),n.state=n.getInitialStateFromProps(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.isTeamEvalLoading,r=e.studentId,a=e.i18n,i=e.educatorGrade,c=e.reviewIsReleased,s=this.state,u=s.member,l=s.saveEnabled,d=u.myFiveStarRating,f=u.fiveStarRatings;return o.a.createElement("div",{className:Ie()("eval-container",t)},o.a.createElement("div",{className:"eval-user-container"},o.a.createElement("div",{className:"eval-avatar-container"},o.a.createElement(Be.a,{value:u.firstName+" "+u.lastName})),o.a.createElement("div",{className:"eval-name-container"},o.a.createElement("div",null,u.firstName+" "+u.lastName),u.dbId!==r?o.a.createElement(Dn.a,{name:"eval-rating",value:d.value,onChange:this.onRatingChange,enabled:!n&&!i&&!c}):o.a.createElement(Dn.a,{name:"eval-rating",ratingSummaryItems:f,isAnonymous:this.props.isReviewAnonymous,viewType:"summary"}))),u.dbId!==r?o.a.createElement("div",{style:{display:"flex",flex:"1",flexGrow:"1",alignItems:"flex-end"}},o.a.createElement(ut.i,{id:"five-star-eval-comments",enabled:!n&&!i&&!c,style:{width:"100%"},onChange:this.onCommentsChanged,className:"eval-comments",placeholder:a._("Comments"),rows:1,maxRows:2,value:d.comment,ariaLabel:a._("Comments")})):null,u.dbId===r||i||c?null:o.a.createElement("div",{className:"eval-button-container"},o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-cancel",secondary:!0,ariaLabel:a._("Cancel"),enabled:l&&!n,onClick:this.onCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-save",primary:!0,ariaLabel:a._("Save"),isLoading:n,enabled:l&&!!d.value,onClick:this.onSave},o.a.createElement(x.Trans,{id:"Save"}))))}}])&&xn(n.prototype,r),a&&xn(n,a),t}(a.Component);qn.propTypes={className:M.a.string,onChange:M.a.func,member:M.a.object,studentId:M.a.number,isReviewAnonymous:M.a.bool};var Wn=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isTeamEvalLoading:et.getTeamEvalIsLoading(e),educatorGrade:et.getEducatorGrade(e),reviewIsReleased:!!et.getReviewReleasedAt(e),isReviewAnonymous:et.getIsReviewAnonymous(e)}}))(qn))),Bn=n("PJr8"),Qn=n("Wqtl"),Yn=n("7fh3"),Hn=n("Y7ox"),zn=n("CNUB");function Kn(e){return(Kn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tr(e,t,n[t])}))}return e}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Zn(t).call(this,e),n=!a||"object"!==Kn(a)&&"function"!==typeof a?er(r):a,tr(er(er(n)),"getInitialStateFromProps",(function(e){var t=Xn({},e.member),n=!1;return(t=g.a.merge({},t)).myRubricEvaluation?(n=!0,t.myRubricEvaluation.comment||(t.myRubricEvaluation.comment="")):t.myRubricEvaluation={points:null,comment:""},{saveEnabled:!1,member:t,showRubricDialog:!1,commentVisible:n}})),tr(er(er(n)),"onCommentsChanged",(function(e){var t=n.props.onChange,r=Xn({},n.state.member),a=Xn({},r.myRubricEvaluation);a.comment=e,r.myRubricEvaluation=a,t&&t(),n.setState({member:r,saveEnabled:!0})})),tr(er(er(n)),"onCommentSave",(function(){var e=n.props.match.params.activityId,t=n.state.member;e=+e,Et.a.saveRubricTeamEvalComment(e,t.dbId,t.myRubricEvaluation.comment).then((function(){n.setState({saveEnabled:!1})}))})),tr(er(er(n)),"onCancel",(function(){n.setState(n.getInitialStateFromProps(n.props))})),tr(er(er(n)),"UNSAFE_componentWillReceiveProps",(function(e){if(!g.a.isEqual(n.props,e)){var t=n.getInitialStateFromProps(e);e.isTeamEvalLoading&&(t.saveEnabled=!0),n.setState(t)}})),tr(er(er(n)),"onDialogCancel",(function(){n.setState({showRubricDialog:!1})})),tr(er(er(n)),"onDialogSubmit",(function(e){var t=n.props.match.params.activityId,r=n.state.member;t=+t,Et.a.saveTeamEvalRubricPoints(t,r.dbId,e).then((function(){n.setState({saveEnabled:!1,showRubricDialog:!1})}))})),tr(er(er(n)),"onEditRubric",(function(){n.setState({showRubricDialog:!0})})),tr(er(er(n)),"onSummaryClick",(function(){var e=n.state.member,t=n.props.isReviewAnonymous,r=e.rubricEvaluations;Hn.a.showModal(o.a.createElement(zn.a,{rubricEvaluations:r,isAnonymous:t}))})),n.state=n.getInitialStateFromProps(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,e),n=t,(r=[{key:"getRubricGrade",value:function(){try{return this.props.member.myRubricEvaluation.cells.map((function(e){return e.dbId}))}catch(e){H.b.warn(e)}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.isTeamEvalLoading,r=e.rubric,a=e.studentId,i=e.reviewIsReleased,c=e.i18n,s=e.educatorGrade,u=this.state,l=u.member,d=u.saveEnabled,f=u.showRubricDialog,p=l.myRubricEvaluation,m=l.rubricEvaluations,b=0,y=0,v=Boolean(p&&g.a.isNumber(p.points));return l.dbId!==a?p&&(b=v?p.points:null):m&&(b=Object(Yn.b)(m),y=m.length),o.a.createElement("div",{className:Ie()("eval-container",t)},o.a.createElement("div",{className:"eval-user-container"},o.a.createElement("div",{className:"eval-avatar-container"},o.a.createElement(Be.a,{value:l.firstName+" "+l.lastName})),o.a.createElement("div",{className:"eval-name-container"},o.a.createElement("div",null,l.firstName+" "+l.lastName),o.a.createElement("div",{className:"eval-rubric-result-container"},o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Rubric Score"})),l.dbId!==a?o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-rubric-edit",ariaLabel:c._("Rubric Score"),onClick:this.onEditRubric,className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:b,max:r.maxValue})):o.a.createElement("div",{className:"rubric-eval-myscore-container"},o.a.createElement(Bn.c,{points:b,max:r.maxValue}),o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-rubric-view",primary:!0,ariaLabel:c._("Rubric Evaluation Length"),enabled:y>0,onClick:this.onSummaryClick},"(",y,")"))))),v?o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",flex:"1",flexGrow:"1",alignItems:"flex-end"}},o.a.createElement(ut.i,{id:"rubric-eval-comments",enabled:!n&&!s,style:{width:"100%"},onChange:this.onCommentsChanged,className:"eval-comments",placeholder:c._("Comments"),rows:1,maxRows:2,value:p.comment,ariaLabel:c._("Comments")})),s?null:o.a.createElement("div",{className:"eval-button-container"},o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-comment-cancel",secondary:!0,ariaLabel:c._("Cancel"),enabled:!(!d||n),onClick:this.onCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-team-evaluations-comment-save",primary:!0,ariaLabel:c._("Save"),isLoading:n,enabled:d&&v,onClick:this.onCommentSave},o.a.createElement(x.Trans,{id:"Save"})))):null,f&&o.a.createElement(Bn.b,{rubric:r,rubricPoints:b,grade:this.getRubricGrade(),mode:i||s?Qn.a.VIEW:Qn.a.GRADE,onCancel:this.onDialogCancel,onSubmit:this.onDialogSubmit}))}}])&&$n(n.prototype,r),a&&$n(n,a),t}(a.Component);nr.propTypes={className:M.a.string,onChange:M.a.func,member:M.a.object,studentId:M.a.number,isReviewAnonymous:M.a.bool};var rr=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isTeamEvalLoading:et.getTeamEvalIsLoading(e),rubric:et.getGroupReviewRubric(e),reviewIsReleased:!!et.getReviewReleasedAt(e),educatorGrade:et.getEducatorGrade(e),isReviewAnonymous:et.getIsReviewAnonymous(e)}}))(nr))),ar=n("IF/7"),or={DISABLED:"TYPE__DISABLED",RATING:"TYPE__RATING",RUBRIC:"TYPE__RUBRIC"};function ir(e){return(ir="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fr={editingEvals:!1,evalIndex:0},pr=20,mr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=sr(t).call(this,e),n=!a||"object"!==ir(a)&&"function"!==typeof a?lr(r):a,dr(lr(lr(n)),"getUserNameAvatars",(function(){var e=n.props.members;if(e)return e instanceof Array?e.map((function(e,t){return o.a.createElement(Be.a,{tooltip:{distance:pr},key:t,value:e.firstName+" "+e.lastName})})):o.a.createElement(Be.a,{tooltip:{distance:pr},value:e.firstName+" "+e.lastName})})),dr(lr(lr(n)),"showTeamEvals",(function(){n.setState({editingEvals:!0,evalIndex:0,members:n.getSortedMembers()})})),dr(lr(lr(n)),"getSortedMembers",(function(){var e=n.props,t=e.studentGroup.reviewReleasedAt,r=e.userId,a=g.a.clone(ar.i(n.props.members)),o=g.a.findIndex(a,{dbId:r});if(t){if(0!==o){var i=a[o];a.splice(o,1),a.splice(0,0,i)}}else g.a.remove(a,(function(e){return e.dbId===r}));return a})),dr(lr(lr(n)),"hideTeamEvals",(function(){n.setState({editingEvals:!1,evalIndex:0})})),dr(lr(lr(n)),"getPreviousMemberIndex",(function(e){if((e-=1)<0)return e;var t=n.props,r=t.studentGroup.reviewReleasedAt,a=t.userId;return n.state.members[e].dbId!==a||r?e:n.getPreviousMemberIndex(e-1)})),dr(lr(lr(n)),"getNextMemberIndex",(function(e){var t=n.state.members,r=n.props,a=r.studentGroup.reviewReleasedAt,o=r.userId;return(e+=1)>t.length-1?e:t[e].dbId!==o||a?e:n.getNextMemberIndex(e)})),dr(lr(lr(n)),"onLeftNavClick",(function(){var e=n.state.evalIndex,t=n.getPreviousMemberIndex(e);t<0?n.hideTeamEvals():n.setState({evalIndex:t})})),dr(lr(lr(n)),"onRightNavClick",(function(){var e=n.state,t=e.evalIndex,r=e.members,a=n.getNextMemberIndex(t);a>r.length-1?n.hideTeamEvals():n.setState({evalIndex:a})})),dr(lr(lr(n)),"getRatingComponent",(function(){var e=n.getSortedMembers()[n.state.evalIndex],t=n.props,r=t.userId,a=t.studentGroupReviewType;return a===or.RATING?o.a.createElement(Wn,{className:"eval-nav-contents",member:e,studentId:r}):a===or.RUBRIC?o.a.createElement(rr,{className:"eval-nav-contents",member:e,studentId:r}):null})),dr(lr(lr(n)),"isRatingEnabled",(function(){var e=n.props.studentGroupReviewType;return e===or.RATING||e===or.RUBRIC})),dr(lr(lr(n)),"getEvalCard",(function(){var e=n.props.i18n;return o.a.createElement("div",{className:"eval-nav-container"},o.a.createElement(Ue.c,{id:"button-group-evaluations-left",ariaLabel:e._("Left Arrow"),onClick:n.onLeftNavClick,className:"eval-left-icon"},Je.a.LEFT),n.getRatingComponent(),o.a.createElement(Ue.c,{id:"button-group-evaluations-right",ariaLabel:e._("Right Arrow"),onClick:n.onRightNavClick,className:"eval-right-icon"},Je.a.RIGHT))})),dr(lr(lr(n)),"getDashboardCard",(function(){var e=n.props,t=e.members,r=e.i18n,a=e.groupName,i=e.currentUser;return o.a.createElement("div",{className:"group-members-dashboard-card"},o.a.createElement(K.d,{className:"dashboard-card-title",title:r._("Group: {groupName}",{groupName:a})}),o.a.createElement(K.c,{className:"dashboard-card-body group-members-content"},o.a.createElement("div",{className:"icon-avatar-info"},n.getUserNameAvatars())),t.length>1&&n.isRatingEnabled()&&Object(ar.f)(i)?o.a.createElement(K.b,{className:"dashboard-card-actions"},o.a.createElement(Ue.a,{id:"button-group-team-evaluations",primary:!0,ariaLabel:r._("Team Evaluations"),onClick:n.showTeamEvals},o.a.createElement(x.Trans,{id:"Team Evaluations"}))):null,o.a.createElement(zt.a,{className:"dashboard-card-icon",role:"presentation",ariaLabel:r._("Group Members, image background")},Je.a.PEOPLE))})),n.state=fr,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state.editingEvals,t=Ie()("dashboard-card group-members-dashboard-card",e?"eval-card":null);return o.a.createElement(K.a,{className:t},e?this.getEvalCard():this.getDashboardCard())}}])&&cr(n.prototype,r),a&&cr(n,a),t}(a.Component),br=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{members:et.getGroupMembers(e),userId:wt.i(e),studentGroupReviewType:et.getStudentGroupReviewType(e),studentGroup:et.getStudentGroup(e),groupName:et.getStudentGroupName(e),currentUser:wt.h(e)}}))(mr))),yr=n("d98y"),vr=n("2bAp"),hr=n("5ux5"),gr=n("HCbP"),Er=n("LMP5");function wr(e){return(wr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ir=15e3,Pr=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Or(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==wr(a)&&"function"!==typeof a?_r(r):a,Tr(_r(_r(n)),"_timeoutId",null),Tr(_r(_r(n)),"removeTimeout",(function(){try{clearTimeout(n._timeoutId)}catch(e){}})),Tr(_r(_r(n)),"doUpdate",(function(){n.forceUpdate()})),Tr(_r(_r(n)),"forceUpdateLater",(function(){n._timeoutId&&n.removeTimeout(),n._timeoutId=setTimeout(n.doUpdate,Ir)})),Tr(_r(_r(n)),"getNextMilestoneRelativeTime",(function(){var e=n.props,t=e.userData,r=e.milestones,a=r.length;if(r&&a)for(var o=0;o<r.length;o++)if("STATUS_OPEN"===r[o].status&&r[o].assignedTo instanceof Array)for(var i=0;i<r[o].assignedTo.length;i++)if(t.dbId===r[o].assignedTo[i].dbId)return Object(Er.j)(r[o].dueDate);return null})),Tr(_r(_r(n)),"getNextMeetingRelativeTime",(function(){var e=n.props.resultPartials,t=e.length;if(e&&t)for(var r=0;r<e.length;r++)if(e[r].__typename===hr.a.MEETING){var a=Object(Er.j)(e[r].scheduledAt);if(a.totalTimeMillis>0)return a}return null})),Tr(_r(_r(n)),"getMilestoneCount",(function(){return n.props.activityData.studentGroup.milestones.length})),Tr(_r(_r(n)),"render",(function(){var e=n.props.i18n,t=!1,r=!1,a=n.getNextMilestoneRelativeTime(),i=n.getNextMeetingRelativeTime();Boolean(a)&&Boolean(i)?a.totalTimeMillis-i.totalTimeMillis<0?(t=!0,r=!1):(t=!1,r=!0):a?(t=!0,r=!1):i&&(t=!1,r=!0);return(r||t)&&(a&&!a.isPastDue?n.forceUpdateLater():i&&!i.isPastDue&&n.forceUpdateLater()),o.a.createElement("div",{className:"dashboard-container"},gr.a.isDueDateVisible()?o.a.createElement(Nn.a,null):null,o.a.createElement(br,null),t&&o.a.createElement(yr.a,{className:"item-a",title:e._("Milestone Due"),icon:Je.a.MILESTONE},o.a.createElement("div",{className:"dashboard-contents centered"},o.a.createElement("span",{className:"fyi-text-med","aria-label":e._("Milestone Due")},Object(Er.i)(a,e)))),r&&o.a.createElement(yr.a,{className:"item-a",title:e._("Upcoming Meeting"),iconClassName:vr.a.CALENDAR},o.a.createElement("div",{className:"dashboard-contents centered"},o.a.createElement("span",{className:"fyi-text-med","aria-label":e._("Upcoming Meeting")},Object(Er.i)(i,e)))))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.removeTimeout()}}])&&Sr(n.prototype,r),a&&Sr(n,a),t}(a.Component),Rr=Object(x.withI18n)()(Object(c.b)((function(e){return{userData:wt.h(e),resultPartials:et.getResultPartials(e),milestones:et.getMilestones(e)}}))(Pr)),Ar=n("CvxL");n("lt1+");function jr(e){return(jr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Mr=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=Nr(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==jr(a)&&"function"!==typeof a?Lr(r):a,o=Lr(Lr(n)),c=function(){var e=n.props.activityId;e=+e,Et.a.deleteSubmission(e)},(i="onRemoveSubmission")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.activityId?o.a.createElement("div",{className:"group-submitted-dashboard-container"},o.a.createElement(Ar.a,null),o.a.createElement(br,null)):null}}])&&kr(n.prototype,r),a&&kr(n,a),t}(a.Component),xr=Object(c.b)((function(e){return{activityId:et.getActivityId(e),result:et.getActivityResult(e),educatorGrade:et.getEducatorGrade(e)}}))(Mr),Fr=n("hHKf"),Vr=n("s/Ur"),Gr=n.n(Vr),Ur=n("O7QZ");n("mtWD");function qr(e){return(qr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr=30,Kr={showEditGroupNameDialog:!1,tmpGroupName:null,isGroupNameValid:!0},Xr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Br(t).call(this,e),n=!a||"object"!==qr(a)&&"function"!==typeof a?Yr(r):a,Hr(Yr(Yr(n)),"onChatSubmit",(function(e){Et.a.addGroupComment(e,n.props.groupId)})),Hr(Yr(Yr(n)),"onGroupEditClick",(function(){var e=n.props.groupName;n.setState({tmpGroupName:e,isGroupNameValid:e.length<=zr,showEditGroupNameDialog:!0})})),Hr(Yr(Yr(n)),"editGroupNameCancel",(function(){n.setState({showEditGroupNameDialog:!1})})),Hr(Yr(Yr(n)),"editGroupNameSubmit",(function(){var e=n.state.tmpGroupName,t=n.props.groupId;Et.a.editGroupName(t,e).then((function(){n.setState({showEditGroupNameDialog:!1})}))})),Hr(Yr(Yr(n)),"onGroupNameChange",(function(e){n.setState({isGroupNameValid:e.length<=zr,tmpGroupName:e})})),n.state=Kr,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.match,n=e.comments,r=e.userId,a=e.isGroupNameEditing,i=e.isSubmittable,c=e.i18n,s=e.history,u=this.state,l=u.tmpGroupName,d=u.isGroupNameValid,f=o.a.createElement(Ze,{messages:n}),p=o.a.createElement(gt,{messages:n,onSubmit:this.onChatSubmit,studentId:r,messagesLoading:this.props.commentsLoading}),m=[o.a.createElement(Kt.c,{key:"_edit",enabled:i,onClick:this.onGroupEditClick,leftIcon:o.a.createElement(zt.a,{ariaLabel:c._("Edit group name, icon")},Je.a.EDIT),primaryText:c._("Edit group name")})];return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},o.a.createElement(Ur.a,{menuActions:m,toolbarActions:[o.a.createElement(Ue.d,{id:"chat-notification-button",ariaLabel:c._("Chat Messages"),dialogClassName:"chat-notification-dialog",dialogContent:p,dialogTitle:c._("Chat"),enabled:i,tooltip:{label:c._("Chat")}},Je.a.CHAT),o.a.createElement(Ue.d,{id:"activity-log-notification-button",ariaLabel:c._("Activity Log"),dialogContent:f,dialogClassName:"activity-log-notification-dialog",dialogTitle:c._("Activity Log"),enabled:i,tooltip:{label:c._("Activity Log")}},Je.a.ACTIVITY)]})),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(Ur.a,{menuActions:m,toolbarActions:[o.a.createElement(Ue.c,{id:"button-group-chat",ariaLabel:c._("Chat"),enabled:i,onClick:function(){s.push(t.url+"/chat")}},Je.a.CHAT),o.a.createElement(Ue.c,{id:"button-group-activity-log",ariaLabel:c._("Activity Log"),enabled:i,onClick:function(){s.push(t.url+"/activity-log")}},Je.a.ACTIVITY)]})),o.a.createElement(Fr.a,{id:"editGroupName",title:c._("Edit Group Name"),visible:this.state.showEditGroupNameDialog,actions:[o.a.createElement(Ue.a,{id:"button-assignment-group-name-edit-dialog-cancel",secondary:!0,ariaLabel:c._("Cancel"),enabled:!a,onClick:this.editGroupNameCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-name-edit-dialog-submit",primary:!0,ariaLabel:c._("Submit"),isLoading:a,enabled:!a&&d,onClick:this.editGroupNameSubmit},o.a.createElement(x.Trans,{id:"Submit"}))]},o.a.createElement(ut.i,{id:"edit-group-name",style:{width:"100%"},required:!0,value:l,ariaLabel:c._("Edit Group Name"),maxLength:zr,onChange:this.onGroupNameChange})))}}])&&Wr(n.prototype,r),a&&Wr(n,a),t}(a.Component),$r=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),comments:et.getActivityLog(e),commentsLoading:et.getGroupCommentsIsLoading(e),educatorGrade:et.getEducatorGrade(e),groupId:et.getGroupId(e),groupName:et.getStudentGroupName(e),result:et.getActivityResult(e),userId:wt.i(e),removeSubmissionIsLoading:et.getRemoveSubmissionIsLoading(e),isGroupNameEditing:et.isGroupNameEditing(e),isSubmittable:et.isSubmittable(e)}}))(Xr))),Zr=n("P04+"),Jr=n("7D+u"),ea={CREATE:"create",EDIT:"edit",DELETE:"delete"},ta={OPEN:"STATUS_OPEN",CANCELED:"STATUS_CANCELLED",FINISHED:"STATUS_FINISHED"};n("ll/r");function na(e){return(na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sa={deleteDialogVisible:!1,selectedMilestone:null,showMilestoneDialog:!1},ua=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=aa(t).call(this,e),n=!a||"object"!==na(a)&&"function"!==typeof a?ia(r):a,ca(ia(ia(n)),"parseUserDataForAvatar",(function(e){if(e){var t=[];return e.map((function(e){return t.push(e.firstName+" "+e.lastName)})),t}return null})),ca(ia(ia(n)),"createColumns",(function(){var e=ia(ia(n)),t=n.props,r=t.readOnly,a=t.i18n;return[{accessor:"description",className:"milestone-description",grow:!0,label:a._("Description")},{accessor:"dueDate",className:"milestone-due-date",headerClassName:"milestone-due-date-header",label:a._("Due Date"),renderer:function(e){return o.a.createElement(Jr.b,{value:e[this.accessor]})}},{accessor:"assignedTo",className:"milestone-owners",headerClassName:"milestone-owners-header",label:a._("Owner(s)"),renderer:function(t){return o.a.createElement(Jr.a,{value:e.parseUserDataForAvatar(t[this.accessor])})}},{accessor:"status",className:"milestone-status",headerClassName:"milestone-status-header",isCustomColumn:!0,label:a._("Status"),renderer:function(t,n){return o.a.createElement(Jr.c,{enabled:!r,key:n+"_status",label:e.getMilestoneStatusLabel(t.status,n),labelClassName:"milestone-status-column-label",selectedItem:e.getMilestoneStatusIcon(t.status,n),menuItems:e.createStatusMenu(t,n)})}},{accessor:"",isCustomColumn:!0,className:"table-actions milestone-actions",label:o.a.createElement("span",{style:{visibility:"hidden"}},o.a.createElement(x.Trans,{id:"Actions"})),renderer:function(t,n){return o.a.createElement(Jr.d,{key:n,menuItems:e.createActionsMenu(t,n)})}}]})),ca(ia(ia(n)),"getMilestoneStatusIcon",(function(e){return e===ta.OPEN?o.a.createElement($a,{status:ta.OPEN}):o.a.createElement($a,{status:ta.FINISHED})})),ca(ia(ia(n)),"getMilestoneStatusLabel",(function(e){var t=n.props.i18n;return e===ta.OPEN?t._("Open"):t._("Completed")})),ca(ia(ia(n)),"createActionsMenu",(function(e,t){var r=n.props,a=r.readOnly,i=r.i18n;return[o.a.createElement(Kt.c,{key:t+"_edit",enabled:!a,data:e,onClick:n.onEditClick,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Edit, icon")},Je.a.EDIT),primaryText:i._("Edit")}),o.a.createElement(Kt.c,{key:t+"_delete",enabled:!a,data:e,onClick:n.onDeleteClick,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Delete, icon")},Je.a.DELETE),primaryText:i._("Delete")})]})),ca(ia(ia(n)),"createStatusMenu",(function(e,t){var r=n.props.i18n;return[o.a.createElement(Kt.c,{key:t+"_open",data:e,onClick:function(){n.onSetStatus(e,ta.OPEN)},leftIcon:o.a.createElement($a,{status:ta.OPEN}),primaryText:r._("Open")}),o.a.createElement(Kt.c,{key:t+"_submitted",data:e,onClick:function(){n.onSetStatus(e,ta.FINISHED)},leftIcon:o.a.createElement($a,{status:ta.FINISHED}),primaryText:r._("Completed")})]})),ca(ia(ia(n)),"onEditClick",(function(e){n.setState({selectedMilestone:e,showMilestoneDialog:!0})})),ca(ia(ia(n)),"onEditCancel",(function(){n.setState({selectedMilestone:null,showMilestoneDialog:!1})})),ca(ia(ia(n)),"onEditSubmit",(function(e){var t=n.props.activityId;t=+t,Et.a.editMilestone(t,n.getRequestData(e)).then((function(){n.setState({selectedMilestone:null,showMilestoneDialog:!1})}))})),ca(ia(ia(n)),"onDeleteClick",(function(e){n.setState({deleteDialogVisible:!0,selectedMilestone:e})})),ca(ia(ia(n)),"onDeleteCancel",(function(){n.setState({deleteDialogVisible:!1,selectedMilestone:null})})),ca(ia(ia(n)),"getRequestData",(function(e){return{groupDbId:n.props.studentGroup.dbId,dbId:e.dbId,dueDate:e.dueDate,description:e.description,status:e.status,assignedTo:e.selectedUsers}})),ca(ia(ia(n)),"onDeleteSubmit",(function(){var e=n.props.activityId;e=+e;var t=Object.assign({},n.state.selectedMilestone);t.status=ta.CANCELED,t.selectedUsers=t.assignedTo.map((function(e){return+e.dbId})),Et.a.deleteMilestone(e,n.getRequestData(t)).then((function(){n.setState({deleteDialogVisible:!1,selectedMilestone:null})}))})),ca(ia(ia(n)),"onSetStatus",(function(e,t){if(e.status!==t){var r=Object.assign({},e);r.status=t,r.selectedUsers=r.assignedTo.map((function(e){return+e.dbId})),n.onEditSubmit(r)}})),ca(ia(ia(n)),"onListRowSelect",(function(e){var t=n.props.match;n.props.history.push(t.url+"/milestone/"+e.dbId)})),n.columns=n.createColumns(),n.state=sa,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.milestones,n=e.members,r=e.milestoneLoading,a=e.readOnly,i=e.i18n,c=this.state.deleteDialogVisible;return o.a.createElement("div",null,o.a.createElement(K.a,null,o.a.createElement(K.d,{title:i._("Milestones")}),o.a.createElement(K.c,null,t.length>0?o.a.createElement(Zt.a,{columns:this.columns,className:"milestones-table",data:t,listAccessor:"description",onListRowSelect:this.onListRowSelect,tableSummary:i._("Inside a table, a list of any milestones created")}):o.a.createElement("p",{className:"card-placeholder-text"},o.a.createElement(x.Trans,{id:"Milestones will appear here after they are created."})))),!a&&this.state.showMilestoneDialog&&o.a.createElement(Va,{members:n,mode:ea.EDIT,isLoading:r,milestone:this.state.selectedMilestone,visible:!0,onCancel:this.onEditCancel,onSubmit:this.onEditSubmit}),!a&&o.a.createElement(Fr.a,{id:"delete-milestone-dialog",title:i._("Delete Milestone"),visible:c,actions:[o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-delete-dialog-cancel",secondary:!0,enabled:!r,onClick:this.onDeleteCancel,ariaLabel:i._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{primary:!0,id:"button-assignment-group-milestone-delete-dialog-delete",isLoading:r,enabled:!r,onClick:this.onDeleteSubmit,ariaLabel:i._("Delete")},o.a.createElement(x.Trans,{id:"Delete"}))]},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this milestone?"}))))}}])&&ra(n.prototype,r),a&&ra(n,a),t}(a.Component);ua.propTypes={readOnly:M.a.bool},ua.defaultProps={readOnly:!1};var la=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),studentGroup:et.getStudentGroup(e),members:et.getGroupMembers(e),milestones:et.getMilestones(e),milestoneLoading:et.getIsMilestoneLoading(e)}}))(ua))),da=n("xrVw");n("gVG2");function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pa(){return(pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ma=function(e){return o.a.createElement(da.h,pa({},function(e){return g.a.pick(e,Object.keys(ma.componentProps))}(e),{className:Ie()("ui-chip",e.className)}),e.children)};ma.componentProps={avatar:M.a.any,className:M.a.string,label:M.a.string,onClick:M.a.func,removable:M.a.bool},ma.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fa(e,t,n[t])}))}return e}({},ma.componentProps);var ba=ma,ya=n("r1K/");function va(e){return(va="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ea(e,t){return(Ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oa={dbId:null,description:"",date:null,mode:ea.CREATE,selectedUsers:[],status:ta.OPEN,submitEnabled:!1,time:null,dateError:"",timeError:"",dateTimeMessage:"",descriptionError:""},Ca=Object(x.i18nMark)("This field is required."),_a=Object(x.i18nMark)("The selected date and time is in the past."),Ta=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ga(t).call(this,e),n=!a||"object"!==va(a)&&"function"!==typeof a?wa(r):a,Sa(wa(wa(n)),"onRemoveOwner",(function(e){var t=n.state.selectedUsers,r=g.a.remove(t,(function(t){return t!==e.dbId}));n.updateState({selectedUsers:r})})),Sa(wa(wa(n)),"getSelectedUsersChip",(function(){var e=n.state.selectedUsers,t=n.props.enabled,r=[];if(e)for(var a=function(a){var i=n.props.members[a];e.indexOf(i.dbId)>-1&&r.push(o.a.createElement(ba,{key:"owner_chip"+i.dbId,removable:t,onClick:function(){t&&n.onRemoveOwner(i)},label:i.firstName+" "+i.lastName,value:i.dbId}))},i=0;i<n.props.members.length;i++)a(i);return r})),Sa(wa(wa(n)),"generateSelectMenuItems",(function(){for(var e=n.state.selectedUsers,t=n.props.members,r=[],a=0;a<t.length;a++){var o=t[a];e&&e.indexOf(o.dbId)>=0||r.push({value:o.dbId,label:o.firstName+" "+o.lastName})}return r})),Sa(wa(wa(n)),"createStatusMenu",(function(e,t){var r=n.props.i18n;return[{key:t+"_open",data:e,onClick:function(){n.onSetStatusOpen(e)},leftIcon:o.a.createElement($a,{status:ta.OPEN}),label:r._("Open")},{key:t+"_submitted",data:e,onClick:function(){n.onSetStatusCompleted(e)},leftIcon:o.a.createElement($a,{status:ta.FINISHED}),label:r._("Completed")}]})),Sa(wa(wa(n)),"onPropertyChange",(function(){var e=Object.assign({},n.state);e.date&&e.time&&(e.dueDate=Object(Er.m)(Object(Er.b)(e.date,e.time))),e.date&&(e.date=Object(Er.m)(e.date)),e.time&&(e.time=Object(Er.m)(e.time)),e.assignedTo=e.selectedUsers,n.props.onChange(e,n.isValid())})),Sa(wa(wa(n)),"isValid",(function(){var e=n.state,t=e.description,r=e.descriptionError,a=e.date,o=e.dateError,i=e.time,c=e.timeError,s=e.selectedUsers;return!(!t||t.trim().length<1)&&(!(!a||!i)&&(!(!s||s.length<1)&&!(r||o||c)))})),Sa(wa(wa(n)),"updateState",(function(e){n.setState(e,(function(){n.onPropertyChange()}))})),Sa(wa(wa(n)),"onDescriptionChange",(function(e){var t="";0===e.trim().length&&(t=Ca),n.updateState({description:e,descriptionError:t})})),Sa(wa(wa(n)),"onDateChange",(function(e,t){var r="";t?n.validateDateTime(t,n.state.time):r=Ca,n.updateState({date:t,dateError:r})})),Sa(wa(wa(n)),"onTimeChange",(function(e,t){var r="";t?n.validateDateTime(n.state.date,t):r=Ca,n.updateState({time:t,timeError:r})})),Sa(wa(wa(n)),"validateDateTime",(function(e,t){var r=null;e&&(t?Object(Er.b)(e,t)<new Date&&(r=_a):Object(Er.g)(e)<Object(Er.g)(new Date)&&(r=_a));n.updateState({dateTimeMessage:r})})),Sa(wa(wa(n)),"onStatusChange",(function(e){n.updateState({status:e})})),Sa(wa(wa(n)),"onUsersChange",(function(e){var t=n.state.selectedUsers,r=g.a.clone(t);r.push(e),n.updateState({selectedUsers:r})})),Sa(wa(wa(n)),"loadMilestone",(function(e){if(e){var t={dbId:e.dbId,description:e.description,status:e.status,selectedUsers:[]};e.dueDate?(t.date=new Date(1e3*e.dueDate),t.time=new Date(1e3*e.dueDate)):(e.date&&(t.date=new Date(1e3*e.date)),e.time&&(t.time=new Date(1e3*e.time))),e.assignedTo&&(t.selectedUsers=e.assignedTo.map((function(e){return e instanceof Object?e.dbId:e}))),n.setState(t)}else n.updateState(Oa)}));var i=e.i18n;return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Sa(e,t,n[t])}))}return e}({},Oa),Ca=i._(Ca),_a=i._(_a),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ea(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.milestone;e&&this.loadMilestone(e)}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.showStatus,r=e.i18n,a=this.state,i=a.description,c=a.descriptionError,s=a.date,u=a.dateError,l=a.dateTimeMessage,d=a.time,f=a.timeError,p=a.selectedUsers,m=a.status,b=[{value:ta.OPEN,label:r._("Open")},{value:ta.FINISHED,label:r._("Completed")}],y=this.generateSelectMenuItems(p);return o.a.createElement("div",{className:"milestone-form"},o.a.createElement(ut.i,{id:"milestone-description-textfield",enabled:t,errorText:c,style:{width:"100%"},label:r._("Description"),value:i,onChange:this.onDescriptionChange,ariaLabel:r._("Description")}),o.a.createElement(ut.b,{id:"milestone-date-input",enabled:t,errorText:u,style:{width:"100%"},textFieldStyle:{width:"100%"},label:r._("Milestone Date"),value:s,showIcon:!1,inDialog:!0,onChange:this.onDateChange}),o.a.createElement(ut.k,{id:"milestone-time-input",enabled:t,errorText:f,style:{width:"100%"},textFieldStyle:{width:"100%"},label:r._("Milestone Time"),value:d,showIcon:!1,inDialog:!0,onChange:this.onTimeChange}),l&&o.a.createElement(ya.b,{className:"milestone-datetime-message",type:ya.a.INFO,message:_a,contentInheritsStatusColor:!0}),n?o.a.createElement(ut.e,{id:"owner-selectfield",enabled:t,label:r._("Status"),ariaLabel:r._("Status"),placeholder:r._("Status"),onChange:this.onStatusChange,value:m,menuItems:b}):null,o.a.createElement("div",{className:"owner-selection-container"},y&&y.length>0&&o.a.createElement(ut.e,{id:"owner-selectfield",enabled:t,label:r._("Select Owners"),ariaLabel:r._("Select Owners"),placeholder:"",onChange:this.onUsersChange,value:"",menuItems:this.generateSelectMenuItems(p)}),o.a.createElement("div",{className:"owner-selection-chips"},this.getSelectedUsersChip())))}}])&&ha(n.prototype,r),a&&ha(n,a),t}(a.Component);Ta.defaultProps={enabled:!0,showStatus:!1},Ta.propTypes={enabled:M.a.bool,members:M.a.array.isRequired,milestone:M.a.any,showStatus:M.a.bool};var Ia=Object(x.withI18n)()(Ta);function Pa(e){return(Pa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da="milestone-dialog",La=Object(x.i18nMark)("Create Milestone"),Ma=Object(x.i18nMark)("Edit Milestone"),xa={tmpMilestone:null,submitEnabled:!1},Fa=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Aa(t).call(this,e),n=!a||"object"!==Pa(a)&&"function"!==typeof a?ka(r):a,Na(ka(ka(n)),"onSubmit",(function(){n.props.onSubmit(n.state.tmpMilestone)})),Na(ka(ka(n)),"onMilestoneFormChange",(function(e,t){n.setState({tmpMilestone:e,submitEnabled:t})})),Na(ka(ka(n)),"shouldComponentUpdate",(function(e,t){return t.submitEnabled!==n.state.submitEnabled||e.visible!==n.props.visible||e.isLoading!==n.props.isLoading})),Na(ka(ka(n)),"getDialogComponent",(function(e){var t=n.props,r=t.mode,a=t.visible,i=t.onCancel,c=t.isLoading,s=t.i18n,u=n.state.submitEnabled,l=r===ea.CREATE?s._(La):s._(Ma),d=[o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-edit-dialog-cancel",secondary:!0,key:"milestone-dialog-action-cancel",ariaLabel:s._("Cancel"),enabled:!c,onClick:i},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-edit-dialog-submit",primary:!0,key:"milestone-dialog-action-submit",ariaLabel:s._("Submit"),enabled:u&&!c,isLoading:c,onClick:n.onSubmit},o.a.createElement(x.Trans,{id:"Submit"}))];return o.a.createElement(Fr.a,{actions:d,contentStyle:{width:"100%"},dialogClassName:Ie()("milestone-dialog",e?"mobile-dialog":null),fullPage:e,hasMobileCloseButton:!1,id:Da,modal:!0,title:l,visible:a},o.a.createElement(Ia,{enabled:!c,members:n.props.members,milestone:n.state.tmpMilestone,onChange:n.onMilestoneFormChange}))})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Na(e,t,n[t])}))}return e}({},xa,{tmpMilestone:e.milestone?g.a.merge({},e.milestone):null}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1)),o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)))}}])&&Ra(n.prototype,r),a&&Ra(n,a),t}(a.Component);Fa.propTypes={members:M.a.array.isRequired,milestone:M.a.any,isLoading:M.a.bool.isRequired,mode:M.a.string.isRequired,onCancel:M.a.func,onSubmit:M.a.func};var Va=Object(x.withI18n)()(Fa);function Ga(e){return(Ga="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ba(e,t){return(Ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ha={visible:!0,loading:!1},za=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Wa(t).call(this,e),n=!a||"object"!==Ga(a)&&"function"!==typeof a?Qa(r):a,Ya(Qa(Qa(n)),"onCancel",(function(){var e=n.props.onCancel;n.setState({visible:!1},(function(){e(),Hn.a.closeModal()}))})),Ya(Qa(Qa(n)),"onSubmit",(function(e){n.setState({loading:!0},(function(){n.submit(e)}))})),Ya(Qa(Qa(n)),"submit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dueDate,a=t.description,o=t.selectedUsers,i=t.status,c=n.props,s=c.studentGroup.dbId,u=c.activityId,l=c.onComplete,u=+u,d={groupDbId:s,dbId:s,dueDate:r,description:a,status:i,assignedTo:o?o.map((function(e){return+e})):[]},e.prev=4,e.next=7,Et.a.createMilestone(u,d);case 7:n.setState({loading:!1},(function(){l(),Hn.a.closeModal()})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n.setState({loading:!1});case 13:case"end":return e.stop()}}),e,this,[[4,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ua(o,r,a,i,c,"next",e)}function c(e){Ua(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ya(e,t,n[t])}))}return e}({},Ha),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ba(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.mode,n=e.members,r=this.state,a=r.loading;return r.visible?o.a.createElement(Va,{isLoading:a,members:n,mode:t,milestone:null,visible:!0,onCancel:this.onCancel,onSubmit:this.onSubmit}):null}}])&&qa(n.prototype,r),a&&qa(n,a),t}(o.a.PureComponent);za.propTypes={activityId:M.a.number.isRequired,mode:M.a.oneOf([ea.CREATE,ea.EDIT]).isRequired,onCancel:M.a.func,onComplete:M.a.func},za.defaultProps={onCancel:function(){},onComplete:function(){}};var Ka=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityId(e),members:et.getGroupMembers(e),studentGroup:et.getStudentGroup(e)}}))(za));function Xa(e){var t=e.status,n=e.i18n;return ta.OPEN===t?o.a.createElement(zt.a,{className:"milestone-status-open",ariaLabel:n._("Milestone Open, icon")},Je.a.MILESTONE_OPEN):ta.FINISHED===t?o.a.createElement(zt.a,{className:"milestone-status-completed",ariaLabel:n._("Milestone Completed, icon")},Je.a.MILESTONE_COMPLETED):null}Xa.propTypes={status:M.a.oneOf([ta.FINISHED,ta.OPEN]).isRequired};var $a=Object(x.withI18n)()(Xa),Za=n("mLw1");function Ja(e){return(Ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oo={editing:!1,deleteDialogVisible:!1,saveEnabled:!1,tmpMilestone:null},io=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=to(t).call(this,e),n=!a||"object"!==Ja(a)&&"function"!==typeof a?ro(r):a,ao(ro(ro(n)),"onBackClick",(function(){n.props.history.replace(n.props.parentUrl)})),ao(ro(ro(n)),"findMilestoneById",(function(e){var t=e.match.params.milestoneId,n=e.milestones,r=g.a.find(n,{dbId:+t});return g.a.clone(r)})),ao(ro(ro(n)),"onSubmit",(function(){n.props.onSubmit(n.state.tmpMilestone)})),ao(ro(ro(n)),"onMilestoneFormChange",(function(e,t){n.setState({tmpMilestone:e,saveEnabled:t})})),ao(ro(ro(n)),"onEditClick",(function(){n.setState({editing:!0})})),ao(ro(ro(n)),"onEditCancel",(function(){n.setState({tmpMilestone:n.findMilestoneById(n.props),editing:!1})})),ao(ro(ro(n)),"onSave",(function(){var e=n.props.studentGroup.dbId,t=n.state.tmpMilestone,r={groupDbId:e,dbId:t.dbId,dueDate:t.dueDate,description:t.description,status:t.status,assignedTo:t.selectedUsers};n.submitMilestoneEdit(r)})),ao(ro(ro(n)),"submitMilestoneEdit",(function(e){var t=n.props.activityId;t=+t,Et.a.editMilestone(t,e).then((function(){n.setState({editing:!1})}))})),ao(ro(ro(n)),"onDeleteClick",(function(){n.setState({deleteDialogVisible:!0})})),ao(ro(ro(n)),"onDeleteCancel",(function(){n.setState({deleteDialogVisible:!1})})),ao(ro(ro(n)),"onDeleteSubmit",(function(){var e=n.props,t=e.match.params.milestoneId,r=e.milestones,a=e.activityId,o=g.a.find(r,{dbId:+t}),i=Object.assign({},o);i.status=ta.CANCELED,i.assignedTo=i.assignedTo.map((function(e){return+e.dbId})),a=+a,Et.a.deleteMilestone(a,i).then((function(){n.setState({deleteDialogVisible:!1,tmpMilestone:null})}))})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ao(e,t,n[t])}))}return e}({},oo,{tmpMilestone:n.findMilestoneById(e)}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.editing,n=e.deleteDialogVisible,r=e.tmpMilestone,a=e.saveEnabled,i=this.props,c=i.members,s=i.milestoneIsLoading,u=i.readOnly,l=i.i18n,d=i.parentUrl;if(!r)return o.a.createElement(Za.a,{to:d});var f=o.a.createElement(Ue.c,{id:"button-assignment-group-milestones-goto-assignment",ariaLabel:l._("Go to assignment"),onClick:this.onBackClick},Je.a.BACK),p=[o.a.createElement(Ue.c,{id:"button-assignment-group-milestones-edit",ariaLabel:l._("Edit"),enabled:!t&&!s&&!u,onClick:this.onEditClick},Je.a.EDIT),o.a.createElement(Ue.c,{id:"button-assignment-group-milestones-delete",ariaLabel:l._("Delete"),enabled:!s&&!u,onClick:this.onDeleteClick},Je.a.DELETE)],m=[o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-delete-dialog-cancel",secondary:!0,ariaLabel:l._("Cancel"),enabled:!s,onClick:this.onDeleteCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-delete-dialog-delete",primary:!0,ariaLabel:l._("Delete"),isLoading:s,enabled:!s,onClick:this.onDeleteSubmit},o.a.createElement(x.Trans,{id:"Delete"}))];return o.a.createElement("div",{className:"milestone-page"},o.a.createElement(Ge.a,{className:"page-toolbar",nav:f,title:l._("Milestone"),actions:p}),o.a.createElement("div",{className:"milestone-page-form md-toolbar-relative"},o.a.createElement(Ia,{enabled:t,members:c,milestone:r,onChange:this.onMilestoneFormChange,showStatus:!0})),t?o.a.createElement(Xt.a,{zDepth:1,className:"milestone-page-actions"},o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-edit-dialog-cancel",secondary:!0,ariaLabel:l._("Cancel"),enabled:!s,onClick:this.onEditCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-assignment-group-milestone-edit-dialog-save",primary:!0,ariaLabel:l._("Save"),onClick:this.onSave,isLoading:s,enabled:a&&!s},o.a.createElement(x.Trans,{id:"Save"}))):null,o.a.createElement(Fr.a,{id:"delete-milestone-dialog",title:l._("Delete Milestone"),visible:n,actions:m},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this milestone?"}))))}}])&&eo(n.prototype,r),a&&eo(n,a),t}(a.Component);io.propTypes={parentUrl:M.a.string.isRequired,readOnly:M.a.bool},io.defaultProps={readOnly:!1};var co=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),studentGroup:et.getStudentGroup(e),members:et.getGroupMembers(e),milestones:et.getMilestones(e),milestoneIsLoading:et.getIsMilestoneLoading(e)}}))(io))),so=n("/W66"),uo=n("PwM7"),lo={CANCELED:"STATUS__CANCELED",FINISHED:"STATUS__FINISHED",NOT_HELD:"STATUS__WAS_NOT_HELD",PROCESSED:"STATUS__PROCESSED",READY:"STATUS__MEETING_TIME",SCHEDULED:"STATUS__SCHEDULED",STARTED:"STATUS__STARTED"},fo={D2L_FREEMIUM_EXPIRED:"RA__D2L_FREEMIUM_EXPIRED",AVAILABLE:"RA__AVAILABLE",NOT_READY:"RA__NOT_READY"},po=n("zyHd");n("++Rr");function mo(e){return(mo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eo={meetingDialogErrors:[],deleteDialogVisible:!1,selectedMeeting:null,showMeetingDialog:!1},wo=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=yo(t).call(this,e),n=!a||"object"!==mo(a)&&"function"!==typeof a?ho(r):a,go(ho(ho(n)),"createColumns",(function(){var e=ho(ho(n)),t=n.props.i18n;return[{accessor:"title",className:"meeting-title",grow:!0,label:t._("Title")},{accessor:"scheduledAt",className:"meeting-scheduled-at",label:t._("Date"),renderer:function(e){return o.a.createElement(Jr.b,{value:e[this.accessor]})}},{accessor:"owner",className:"wip-owners",label:t._("Owner"),renderer:function(e){return o.a.createElement(Jr.a,{value:e[this.accessor].firstName+" "+e[this.accessor].lastName})}},{accessor:"",isCustomColumn:!0,className:"table-actions meeting-actions",label:o.a.createElement("span",{style:{visibility:"hidden"}},o.a.createElement(x.Trans,{id:"Actions"})),renderer:function(t,n){return o.a.createElement(Jr.d,{key:n,menuItems:e.createActionsMenu(t,n)})}}]})),go(ho(ho(n)),"createActionsMenu",(function(e,t){var r=n.props,a=r.readOnly,i=r.i18n,c=e.status===lo.SCHEDULED||e.status===lo.NOT_HELD;return[o.a.createElement(Kt.c,{key:t+"_launch",enabled:!!e.lobbyPageUrl,data:e,onClick:n.onRowLaunch,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Launch, icon")},Je.a.EXIT),primaryText:i._("Launch")}),o.a.createElement(Kt.c,{key:t+"_externalLink",enabled:!!e.anonymousInvitationUrl,data:e,onClick:function(){n.onCopyExternalLink(e.anonymousInvitationUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Copy External Link, icon")},Je.a.LINK),primaryText:i._("Copy External Link")}),o.a.createElement(so.a,{key:"menu_item_divider[edit-meeting]"}),o.a.createElement(Kt.c,{key:t+"_edit",enabled:!a&&c&&!n.props.lmsLocked,data:e,onClick:n.onRowEdit,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Edit, icon")},Je.a.EDIT),primaryText:i._("Edit")}),o.a.createElement(Kt.c,{key:t+"_delete",enabled:!a&&c&&!n.props.lmsLocked,data:e,onClick:n.onRowDelete,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Delete, icon")},Je.a.DELETE),primaryText:i._("Delete")})]})),go(ho(ho(n)),"onRowEdit",(function(e){n.setState({selectedMeeting:e,showMeetingDialog:!0})})),go(ho(ho(n)),"onRowLaunch",(function(e){window.open(e.lobbyPageUrl,"_blank")})),go(ho(ho(n)),"onCopyExternalLink",(function(e){Object(uo.a)(e)})),go(ho(ho(n)),"onEditCancel",(function(){n.setState({meetingDialogErrors:[],selectedMeeting:null,showMeetingDialog:!1})})),go(ho(ho(n)),"onRowDelete",(function(e){n.setState({deleteDialogVisible:!0,selectedMeeting:e})})),go(ho(ho(n)),"onDeleteCancel",(function(){n.setState({deleteDialogVisible:!1,selectedMeeting:null})})),go(ho(ho(n)),"onEditSubmit",(function(e){var t=e.scheduledAt,r=e.title,a={dbId:e.dbId,title:r,scheduledAt:t};Et.a.editMeeting(a).then((function(){n.setState({showMeetingDialog:!1,meetingDialogErrors:[]})})).catch((function(e){n.setMeetingErrors(e)}))})),go(ho(ho(n)),"setMeetingErrors",(function(e){for(var t=n.props.i18n,r=[],a=0;a<e.length;a++){var o=e[a];if(o&&o.messages)for(var i=o.messages,c=0;c<i.length;c++){var s=i[c];s&&g.a.startsWith(s,"validators.bbb_meeting.scheduled_at.already_scheduled")&&r.push(t._("There is another meeting already scheduled which has a start time within 2 hours of this meeting. Please choose a different meeting time."))}}n.setState({meetingDialogErrors:r})})),go(ho(ho(n)),"onDeleteSubmit",(function(){var e=n.state.selectedMeeting;Et.a.cancelMeeting(+e.dbId).then((function(){n.setState({deleteDialogVisible:!1,selectedMeeting:null})}))})),go(ho(ho(n)),"onListRowSelect",(function(e){var t=n.props.match;n.props.history.push(t.url+"/meeting/"+e.dbId)})),n.columns=n.createColumns(),n.state=Eo,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.deleteDialogVisible,n=e.meetingDialogErrors,r=this.props,a=r.resultPartials,i=r.meetingIsLoading,c=r.i18n,s=po.a.getMeetingsNotFinalizedPartials(a);return(s=s.filter((function(e){return!(e.status===lo.PROCESSED&&!e.media)})))&&0!==s.length?o.a.createElement("div",null,o.a.createElement(K.a,{className:"card-01"},o.a.createElement(K.d,{title:c._("Scheduled Meetings")}),o.a.createElement(K.c,null,o.a.createElement(Zt.a,{columns:this.columns,className:"meeting-table",data:s,listAccessor:"title",onListRowSelect:this.onListRowSelect,tableSummary:c._("Inside a table, a list of any scheduled meetings")}))),this.state.showMeetingDialog&&o.a.createElement(Ho,{mode:ea.EDIT,meeting:this.state.selectedMeeting,isLoading:i,onCancel:this.onEditCancel,onSubmit:this.onEditSubmit,visible:!0,errorMessages:n}),o.a.createElement(Fr.a,{id:"delete-meeting-dialog",title:c._("Delete Meeting"),visible:t,actions:[o.a.createElement(Ue.a,{id:"button-delete-meeting-dialog-cancel",key:"delete-meeting-dialog-cancel",secondary:!0,enabled:!i,onClick:this.onDeleteCancel,ariaLabel:c._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-delete-meeting-dialog-delete",key:"delete-meeting-dialog-confirm",primary:!0,isLoading:i,enabled:!i,onClick:this.onDeleteSubmit,ariaLabel:c._("Delete")},o.a.createElement(x.Trans,{id:"Delete"}))]},o.a.createElement("p",{className:"card-placeholder-text"},o.a.createElement(x.Trans,{id:"Are you sure you want to delete this meeting?"})))):null}}])&&bo(n.prototype,r),a&&bo(n,a),t}(a.Component);wo.propTypes={readOnly:M.a.bool},wo.defaultProps={readOnly:!1};var So=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{resultPartials:et.getResultPartials(e),lmsLocked:et.getLmsLocked(e),activityId:et.getActivityId(e),meetingIsLoading:et.getIsMeetingLoading(e)}}))(wo)));function Oo(e){return(Oo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ro={dbId:null,mode:ea.CREATE,title:"",date:null,time:null,submitEnabled:!1,dateError:null,timeError:null,titleError:null},Ao=Object(x.i18nMark)("This field is required."),jo=Object(x.i18nMark)("Date can't be in the past."),ko=Object(x.i18nMark)("Time can't be in the past."),No=5,Do=3e3,Lo=50,Mo=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_o(t).call(this,e),n=!a||"object"!==Oo(a)&&"function"!==typeof a?Io(r):a,Po(Io(Io(n)),"startInterval",(function(){clearInterval(n.timer),n.timer=setInterval((function(){var e=n.state,t=e.date,r=e.time;if(t&&r){var a=Object(Er.b)(t,r),o=n.testDateTime(a);n.state.timeError!==o&&n.updateState({timeError:o})}}),Do)})),Po(Io(Io(n)),"onPropertyChange",(function(){var e=Object.assign({},n.state);e.date&&e.time&&(e.scheduledAt=Object(Er.m)(Object(Er.b)(e.date,e.time))),e.date&&(e.date=Object(Er.m)(e.date)),e.time&&(e.time=Object(Er.m)(e.time)),n.props.onChange(e,n.isValid())})),Po(Io(Io(n)),"isValid",(function(){var e=n.state,t=e.title,r=e.titleError,a=e.date,o=e.dateError,i=e.time,c=e.timeError;return!!(t.length>0&&a&&i)&&!!!(o&&c&&r)})),Po(Io(Io(n)),"testDateTime",(function(e){var t=n.props.i18n,r=null;return e<new Date?r=t._(ko):(e.getTime()-(new Date).getTime())/1e3/60<No&&(r=t._("Meeting start time must be at least {MEETING_THRESHOLD_MINUTES} minutes from now.",{MEETING_THRESHOLD_MINUTES:No})),r})),Po(Io(Io(n)),"updateState",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.setState(e,(function(){t&&n.onPropertyChange()}))})),Po(Io(Io(n)),"onTitleChange",(function(e){var t=n.props.i18n,r=null;0===e.trim().length?r=t._(Ao):e.trim().length>Lo&&(r=t._("Exceeds {MAX_TITLE_LENGTH} characters.",{MAX_TITLE_LENGTH:Lo})),n.updateState({title:e,titleError:r})})),Po(Io(Io(n)),"onDateChange",(function(e,t){var r=n.props.i18n,a=null;t?Object(Er.g)(t)<Object(Er.g)(new Date)&&(a=r._(jo)):a=r._(Ao),n.updateState({date:t,dateError:a})})),Po(Io(Io(n)),"onTimeChange",(function(e,t){var r=n.props.i18n,a=null;if(t){if(n.state.date){var o=Object(Er.b)(n.state.date,t);a=n.testDateTime(o)}}else a=r._(Ao);n.updateState({time:t,timeError:a})})),Po(Io(Io(n)),"loadMeetingFromProps",(function(e){if(e.meeting){var t={dbId:e.meeting.dbId,title:e.meeting.title};e.meeting.scheduledAt?(t.date=new Date(1e3*e.meeting.scheduledAt),t.time=new Date(1e3*e.meeting.scheduledAt)):(e.meeting.date&&(t.date=new Date(1e3*e.meeting.date)),e.meeting.time&&(t.time=new Date(1e3*e.meeting.time))),n.setState(t)}else n.updateState(Ro,!1)})),Po(Io(Io(n)),"UNSAFE_componentWillReceiveProps",(function(e){e?n.loadMeetingFromProps(e):n.setState(Ro)})),n.state=Ro,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.meeting&&this.loadMeetingFromProps(this.props)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.i18n,r=this.state,a=r.title,i=r.date,c=r.time,s=r.dateError,u=r.timeError,l=r.titleError;return t&&!this.timer&&this.startInterval(),o.a.createElement("div",{className:"meeting-form"},o.a.createElement(ut.i,{id:"meeting-title",enabled:t,maxLength:Lo,required:!0,errorText:l,label:n._("Title"),onChange:this.onTitleChange,style:{width:"100%"},value:a,ariaLabel:n._("Title")}),o.a.createElement(ut.b,{id:"meeting-date-input",enabled:t,errorText:s,label:n._("Meeting Date"),onChange:this.onDateChange,style:{width:"100%"},textFieldStyle:{width:"100%"},showIcon:!1,inDialog:!0,value:i}),o.a.createElement(ut.k,{id:"meeting-time-input",enabled:t,errorText:u,label:n._("Meeting Time"),onChange:this.onTimeChange,style:{width:"100%"},textFieldStyle:{width:"100%"},showIcon:!1,inDialog:!0,value:c}))}}])&&Co(n.prototype,r),a&&Co(n,a),t}(a.Component);Mo.defaultProps={enabled:!0},Mo.propTypes={enabled:M.a.bool,meeting:M.a.any};var xo=Object(x.withI18n)()(Mo);function Fo(e){return(Fo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bo(e,t,n[t])}))}return e}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uo(e){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qo={isDirty:!1,submitEnabled:!1,tmpMeeting:null},Yo=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Uo(t).call(this,e),n=!a||"object"!==Fo(a)&&"function"!==typeof a?Wo(r):a,Bo(Wo(Wo(n)),"onSubmit",(function(){n.props.onSubmit(n.state.tmpMeeting)})),Bo(Wo(Wo(n)),"onMeetingFormChange",(function(e,t){n.setState({tmpMeeting:e,submitEnabled:t,isDirty:!0})})),Bo(Wo(Wo(n)),"UNSAFE_componentWillReceiveProps",(function(e){e.isLoading||n.state.isDirty||n.setState({tmpMeeting:e.meeting})})),Bo(Wo(Wo(n)),"getErrorMessages",(function(){var e=n.props.errorMessages;if(!e||0===e.length)return null;var t=e.map((function(e,t){return o.a.createElement("p",{key:"meeting-dialog-error-message["+t+"]"},e)}));return o.a.createElement(ya.b,{className:"meeting-dialog-errors",type:ya.a.ERROR},t)})),Bo(Wo(Wo(n)),"onCancel",(function(){n.setState(Vo({},Qo),n.props.onCancel)})),Bo(Wo(Wo(n)),"getDialogComponent",(function(e){var t=n.props,r=t.mode,a=t.visible,i=t.isLoading,c=t.i18n,s=n.state.submitEnabled,u=r===ea.CREATE?c._("Create Meeting"):c._("Edit Meeting"),l=[o.a.createElement(Ue.a,{id:"button-edit-meeting-dialog-cancel",key:"meeting-dialog-action-cancel",ariaLabel:c._("Cancel"),enabled:!i,secondary:!0,onClick:n.onCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-edit-meeting-dialog-submit",key:"meeting-dialog-action-submit",ariaLabel:c._("Submit"),isLoading:i,enabled:s&&!i,primary:!0,onClick:n.onSubmit},o.a.createElement(x.Trans,{id:"Submit"}))];return o.a.createElement(Fr.a,{actions:l,contentStyle:{width:"100%"},dialogClassName:Ie()("meeting-dialog",e?"mobile-dialog":null),fullPage:e,hasMobileCloseButton:!1,id:"meeting-dialog",modal:!0,title:u,visible:a},o.a.createElement(xo,{meeting:n.state.tmpMeeting,enabled:!i,onChange:n.onMeetingFormChange}),n.getErrorMessages())})),n.state=Vo({},Qo,{tmpMeeting:e.meeting}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1)),o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)))}}])&&Go(n.prototype,r),a&&Go(n,a),t}(a.Component);Yo.propTypes={errorMessages:M.a.array,isLoading:M.a.bool.isRequired,mode:M.a.string.isRequired,onCancel:M.a.func,onSubmit:M.a.func},Yo.defaultProps={errorMessages:[]};var Ho=Object(x.withI18n)()(Yo);function zo(e){return(zo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ti={visible:!0,loading:!1,meetingDialogErrors:[]},ni=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=$o(t).call(this,e),n=!a||"object"!==zo(a)&&"function"!==typeof a?Jo(r):a,ei(Jo(Jo(n)),"onCancel",(function(){var e=n.props.onCancel;n.setState({visible:!1},(function(){e(),Hn.a.closeModal()}))})),ei(Jo(Jo(n)),"onSubmit",(function(e){n.setState({loading:!0},(function(){n.submitMeeting(e)}))})),ei(Jo(Jo(n)),"submitMeeting",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.scheduledAt,a=t.title,o=n.props,i=o.activityId,c=o.onComplete,i=+i,s={title:a,scheduledAt:r},e.prev=4,e.next=7,Et.a.createMeeting(i,s);case 7:n.setState({meetingDialogErrors:[],loading:!1},(function(){c(),Hn.a.closeModal()})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),n.setMeetingErrors(e.t0),n.setState({loading:!1});case 14:case"end":return e.stop()}}),e,this,[[4,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ko(o,r,a,i,c,"next",e)}function c(e){Ko(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),ei(Jo(Jo(n)),"setMeetingErrors",(function(e){for(var t=n.props.i18n,r=[],a=0;a<e.length;a++){var o=e[a];if(o&&o.messages)for(var i=o.messages,c=0;c<i.length;c++){var s=i[c];s&&g.a.startsWith(s,"validators.bbb_meeting.scheduled_at.already_scheduled")&&r.push(t._("There is another meeting already scheduled which has a start time within 2 hours of this meeting. Please choose a different meeting time."))}}n.setState({meetingDialogErrors:r})})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ei(e,t,n[t])}))}return e}({},ti),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.mode,r=this.state,a=r.loading,i=r.meetingDialogErrors;return r.visible?o.a.createElement(Ho,{activityId:t,visible:!0,mode:n,onCancel:this.onCancel,isLoading:a,onSubmit:this.onSubmit,errorMessages:i}):null}}])&&Xo(n.prototype,r),a&&Xo(n,a),t}(o.a.PureComponent);ni.propTypes={activityId:M.a.number.isRequired,mode:M.a.oneOf([ea.CREATE,ea.EDIT]).isRequired,onCancel:M.a.func,onComplete:M.a.func},ni.defaultProps={onCancel:function(){},onComplete:function(){}};var ri=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityId(e)}}))(ni));function ai(e){return(ai="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var li={editing:!1,deleteDialogVisible:!1,saveEnabled:!1,tmpMeeting:null},di=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ii(t).call(this,e),n=!a||"object"!==ai(a)&&"function"!==typeof a?si(r):a,ui(si(si(n)),"setMeeting",(function(e){n.setState({tmpMeeting:e})})),ui(si(si(n)),"findMeetingById",(function(e){var t=e.resultPartials,n=e.match.params.meetingId,r=po.a.getMeetingsNotFinalizedPartials(t),a=g.a.find(r,{dbId:+n});return g.a.clone(a)})),ui(si(si(n)),"onMeetingFormChange",(function(e,t){n.setState({tmpMeeting:e,saveEnabled:t})})),ui(si(si(n)),"onEditClick",(function(){n.setState({editing:!0})})),ui(si(si(n)),"onEditCancel",(function(){n.setState({tmpMeeting:n.findMeetingById(n.props),editing:!1})})),ui(si(si(n)),"onSave",(function(){var e=n.state.tmpMeeting;Et.a.editMeeting(e).then((function(){n.setState({deleteDialogVisible:!1,editing:!1})}))})),ui(si(si(n)),"onDeleteClick",(function(){n.setState({deleteDialogVisible:!0})})),ui(si(si(n)),"onDeleteCancel",(function(){n.setState({deleteDialogVisible:!1})})),ui(si(si(n)),"onDeleteSubmit",(function(){var e=n.state.tmpMeeting;Et.a.cancelMeeting(+e.dbId).then((function(){n.setState({deleteDialogVisible:!1,tmpMeeting:null})}))})),ui(si(si(n)),"onLaunchClick",(function(e){window.open(e.lobbyPageUrl,"_blank")})),ui(si(si(n)),"onCopyExternalLink",(function(e){Object(uo.a)(e)})),ui(si(si(n)),"getMenuActions",(function(){var e=n.props.i18n,t=n.state.tmpMeeting;if(!t)return[];var r=n.props,a=r.readOnly,i=r.meetingIsLoading,c=t.status===lo.SCHEDULED||t.status===lo.NOT_HELD;return[o.a.createElement(Kt.c,{key:"meeting_launch",enabled:!!t.lobbyPageUrl,data:t,onClick:n.onLaunchClick,leftIcon:o.a.createElement(zt.a,{ariaLabel:e._("Launch, icon")},Je.a.EXIT),primaryText:e._("Launch")}),o.a.createElement(Kt.c,{key:"meeting_externalLink",enabled:!!t.anonymousInvitationUrl,data:t,onClick:function(){n.onCopyExternalLink(t.anonymousInvitationUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:e._("Copy External Link, icon")},Je.a.LINK),primaryText:e._("Copy External Link")}),o.a.createElement(so.a,{key:"menu_item_divider[delete-meeting]"}),o.a.createElement(Kt.c,{key:"meeting_delete",enabled:!a&&c&&!i&&!n.props.lmsLocked,data:t,onClick:n.onDeleteClick,leftIcon:o.a.createElement(zt.a,{ariaLabel:e._("Delete, icon")},Je.a.DELETE),primaryText:e._("Delete")})]}));var i=n.findMeetingById(e);return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ui(e,t,n[t])}))}return e}({},li,{tmpMeeting:i}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state,n=t.editing,r=t.deleteDialogVisible,a=t.tmpMeeting,i=t.saveEnabled,c=this.props,s=c.meetingIsLoading,u=c.readOnly,l=c.i18n,d=c.parentUrl,f=this.state.tmpMeeting;if(!f)return o.a.createElement(Za.a,{to:d});var p=f.status===lo.SCHEDULED||f.status===lo.NOT_HELD,m=o.a.createElement(Ue.c,{id:"button-meeting-goto-assignment",ariaLabel:l._("Go to assignment"),onClick:function(){e.props.history.replace(d)}},Je.a.BACK),b=[o.a.createElement(Ue.c,{id:"button-meeting-edit",ariaLabel:l._("Edit"),enabled:!n&&!s&&!u&&p&&!this.props.lmsLocked,onClick:this.onEditClick},Je.a.EDIT),o.a.createElement(Ue.e,{id:"meeting-actions-menu",key:"meeting-actions-menu",icon:!0,className:"meeting-actions-menu",ariaLabel:l._("Menu"),menuItems:this.getMenuActions()},Je.a.MENU_VERT)],y=[o.a.createElement(Ue.a,{id:"button-delete-meeting-dialog-cancel",secondary:!0,enabled:!s,onClick:this.onDeleteCancel,ariaLabel:l._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-delete-meeting-dialog-delete",primary:!0,isLoading:s,enabled:!s,onClick:this.onDeleteSubmit,ariaLabel:l._("Delete")},o.a.createElement(x.Trans,{id:"Delete"}))];return o.a.createElement("div",{className:"meeting-page"},o.a.createElement(Ge.a,{className:"page-toolbar",nav:m,title:l._("Meeting"),actions:b}),o.a.createElement("div",{className:"meeting-page-form md-toolbar-relative"},o.a.createElement(xo,{enabled:n,meeting:a,onChange:this.onMeetingFormChange})),n?o.a.createElement(Xt.a,{zDepth:1,className:"meeting-page-actions"},o.a.createElement(Ue.a,{id:"button-meeting-cancel",secondary:!0,enabled:!s,onClick:this.onEditCancel,ariaLabel:l._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-meeting-save",primary:!0,onClick:this.onSave,ariaLabel:l._("Save"),isLoading:s,enabled:i&&!s},o.a.createElement(x.Trans,{id:"Save"}))):null,o.a.createElement(Fr.a,{id:"delete-meeting-dialog",title:l._("Delete Meeting"),visible:r,actions:y},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this meeting?"}))))}}])&&oi(n.prototype,r),a&&oi(n,a),t}(a.Component);di.propTypes={parentUrl:M.a.string.isRequired,readOnly:M.a.bool},di.defaultProps={readOnly:!1};var fi=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),lmsLocked:et.getLmsLocked(e),studentGroup:et.getStudentGroup(e),meetingIsLoading:et.getIsMeetingLoading(e),resultPartials:et.getResultPartials(e)}}))(di))),pi=n("YSsg"),mi=n("5id7");function bi(e){return(bi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t){return!t||"object"!==bi(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return(gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ei=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vi(this,hi(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gi(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.loading,r=e.onConfirm,a=e.title,i=e.id,c=e.className,s=e.description,u=e.cancelLabel,l=e.confirmLabel,d=e.hideOnConfirm,f=[o.a.createElement(mi.a,{id:"button-confirm-dialog-close",key:"close",secondary:!0,ariaLabel:u||t._("Cancel"),enabled:!n,onClick:Hn.a.closeModal},u||t._("Cancel")),o.a.createElement(mi.a,{id:"button-confirm-dialog-confirm",key:"confirm",primary:!0,ariaLabel:l||t._("Confirm"),enabled:!n,isLoading:n,onClick:function(){r(),d&&Hn.a.closeModal()}},l||t._("Confirm"))];return o.a.createElement(pi.a,{actions:f,ariaLabel:a,id:i,title:a,dialogClassName:c,modal:!0,visible:!0},s)}}])&&yi(n.prototype,r),a&&yi(n,a),t}(a.Component);Ei.propTypes={hideOnConfirm:M.a.bool,className:M.a.string,cancelLabel:M.a.string,confirmLabel:M.a.string,description:M.a.any,i18n:M.a.object,id:M.a.string.isRequired,loading:M.a.bool,onConfirm:M.a.func,title:M.a.string},Ei.defaultProps={hideOnConfirm:!0};var wi=Object(x.withI18n)()(Ei);function Si(e){return(Si="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(){return(Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ci(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ci(o,r,a,i,c,"next",e)}function c(e){Ci(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ji={visible:!0,loading:!1},ki=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ii(t).call(this,e),n=!a||"object"!==Si(a)&&"function"!==typeof a?Ri(r):a,Ai(Ri(Ri(n)),"onConfirm",(function(){n.setState({loading:!0},(function(){n.handleCallback()}))})),Ai(Ri(Ri(n)),"handleCallback",_i(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.onConfirm,a=t.data,e.next=3,r(a);case 3:Hn.a.closeModal();case 4:case"end":return e.stop()}}),e,this)})))),Ai(Ri(Ri(n)),"getPassThroughProps",(function(){var e=n.props;return{cancelLabel:e.cancelLabel,confirmLabel:e.confirmLabel,description:e.description,id:e.id,title:e.title}})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ai(e,t,n[t])}))}return e}({},ji),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.loading;return e.visible?o.a.createElement(wi,Oi({},this.getPassThroughProps(),{hideOnConfirm:!1,loading:t,visible:!0,onConfirm:this.onConfirm})):null}}])&&Ti(n.prototype,r),a&&Ti(n,a),t}(o.a.PureComponent);ki.propTypes={cancelLabel:M.a.string,confirmLabel:M.a.string,data:M.a.any,description:M.a.any.isRequired,id:M.a.string.isRequired,onConfirm:M.a.func,title:M.a.string},ki.defaultProps={onConfirm:function(){},title:""};var Ni=Object(x.withI18n)()(ki),Di=n("0TIy"),Li=(n("BKYJ"),n("+y5T"));function Mi(e){return(Mi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xi(){return(xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wi=1.333,Bi=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Vi(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Mi(a)&&"function"!==typeof a?Ui(r):a,qi(Ui(Ui(n)),"getCalculatedWidth",(function(){var e=window.innerWidth,t=window.innerHeight;return e/t>Wi?.7*t*Wi:"70%"})),qi(Ui(Ui(n)),"getDialogComponent",(function(e){var t=n.props,r=t.onComplete,a=t.onCancel,i=t.activityId,c=t.mediaType,s=t.id,u=t.i18n,l=t.recorderType,d={autosizeContent:!1,containFocus:!1,contentClassName:"recorder-content",dialogClassName:"recorder-dialog",fullPage:e,hasCloseButton:!0,id:"recorder-dialog",initialFocus:"",modal:!0,onClose:a,title:u._("Record Video"),visible:!0};return o.a.createElement(Fr.a,xi({dialogStyle:{height:"auto",width:e?"auto":n.getCalculatedWidth()}},d),o.a.createElement("div",{className:"dialog-media"},o.a.createElement(Di.b,{mediaType:c,activityId:i,recorderId:s,recorderType:l,onFinish:function(e,t){a(),r(e,t)}})))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 550px)"},(function(t){return void 0===e._firstMediaQueryMatchResult&&(e._firstMediaQueryMatchResult=t),e.getDialogComponent(e._firstMediaQueryMatchResult)})))}}])&&Fi(n.prototype,r),a&&Fi(n,a),t}(a.Component);Bi.propTypes={activityId:M.a.number,mediaType:M.a.string.isRequired,onComplete:M.a.func,onCancel:M.a.func,i18n:M.a.object,id:M.a.string.isRequired,recorderType:M.a.oneOf(Object.values(Li.a))},Bi.defaultProps={recorderType:Li.a.CAMERA_ONLY,onCancel:Hn.a.closeModal};var Qi=Object(x.withI18n)()(Bi),Yi=n("PXE2"),Hi=(n("vlAY"),n("szwm"));function zi(e){return(zi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $i(e,t){return($i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ji=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Xi(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==zi(a)&&"function"!==typeof a?Zi(r):a,i=Zi(Zi(n)),s=function(e){var t=n.props,r=t.onComplete,a=t.onCancel,i=t.activityId,c=t.questionId,s=t.i18n,u=t.mediaType,l=t.showImportFromCloud,d={dialogClassName:"file-upload-dialog",fullPage:e,id:"file-upload-dialog",onClose:a,mobileFullScreen:!0,modal:!0,title:s._("Add Video"),visible:!0};return e||(d.actions=[o.a.createElement(Ue.a,{id:"button-video-upload-dialog-cancel",secondary:!0,ariaLabel:s._("Cancel"),onClick:a},s._("Cancel"))]),o.a.createElement(pi.a,d,o.a.createElement("div",null,o.a.createElement(Yi.a,{activityId:i,questionId:c,type:u,showImportFromCloud:l,onCloudTransferComplete:function(e){var t=e.data.uploadedFileIds;r(t),a()},onComplete:function(e){var t=e.map((function(e){return e.isProcessed?e.dbId:null}));t=g.a.compact(t),r(t),a()}})))},(c="getDialogComponent")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$i(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 550px)"},(function(t){return void 0===e._firstMediaQueryMatchResult&&(e._firstMediaQueryMatchResult=t),e.getDialogComponent(e._firstMediaQueryMatchResult)})))}}])&&Ki(n.prototype,r),a&&Ki(n,a),t}(a.Component);Ji.defaultProps={onCancel:Hn.a.closeModal,onComplete:function(){},showImportFromCloud:!0},Ji.propTypes={onComplete:M.a.func,showImportFromCloud:M.a.bool,onCancel:M.a.func,activityId:M.a.number,questionId:M.a.number,mediaType:M.a.oneOf([Hi.a.COMMENT,Hi.a.PROFILE,Hi.a.LIBRARY,Hi.a.ACTIVITY_RESULT,Hi.a.ACTIVITY_FEEDBACK]).isRequired};var ec=Object(x.withI18n)()(Ji),tc=n("K2Ti"),nc=n("1zCZ"),rc=n("dFPr");function ac(e){return Boolean(e.viewedEvaluation&&e.viewedEvaluation.value)||Boolean(e.isViewed&&e.isViewed.value)}function oc(e){return e.comments&&e.comments.length>0}function ic(e){return e.hasOwnProperty("fivestarEvaluation")?Boolean(e.fivestarEvaluation||e.rubricEvaluation):Boolean(e.myFiveStarRating||e.myRubricEvaluation)}function cc(e,t,n){if(g.a.has(e,"isReviewCompleted"))return e.isReviewCompleted;var r=ac(e)&&oc(e);return r&&function(e,t){return e||t}(t,n)&&(r=ic(e)),r}function sc(e,t,n){var r=0;return e.map((function(e){return cc(e,t,n)&&r++,!0})),r}function uc(e,t,n,r){var a=sc(e,n,r);return a>=t?100:Math.floor(a/t*100)}var lc=n("2Gxn"),dc=n("RMfM"),fc=n("h15y"),pc=n("7n1V"),mc=n("e33A"),bc=n("u4EO"),yc=n("ChKr"),vc=n("Iab2"),hc=n.n(vc),gc=n("7dPE"),Ec=n("4XMt");n("uqCR");function wc(e){return(wc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oc(e){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cc(e,t){return(Cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ic=.5,Pc=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Oc(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==wc(a)&&"function"!==typeof a?_c(r):a,Tc(_c(_c(n)),"state",{turnValue:0}),Tc(_c(_c(n)),"updateTurnValue",(function(){var e=n.props,t=e.maxValue,r=e.value/t,a=Math.min(r,1)*Ic;n.setState({turnValue:a})})),Tc(_c(_c(n)),"getThresholdClassName",(function(){var e=n.props,t=e.thresholds,r=e.value,a="bongo-gauge-threshold-unknown";return g.a.forEach(t,(function(e){r>=e.minValue&&(a=e.trackFillClassName)})),a})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cc(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.updateTurnValue()}},{key:"componentDidUpdate",value:function(){this.updateTurnValue()}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.ariaLabel,r=e.className,a=e.label,i=e.maxValue,c=e.trackThickness,s=e.value,u=this.state.turnValue,l=this.getThresholdClassName(),d="";return d=n||t._("{label} ({value} of {maxValue})",{label:a,value:s,maxValue:i}),o.a.createElement("div",{className:Ie()("bongo-gauge",r),"aria-label":d},o.a.createElement("div",{className:"bongo-gauge-track-container","aria-hidden":!0},o.a.createElement("div",{className:"bongo-gauge-track",style:{"--bongo-gauge-track-thickness-px":"".concat(c,"px")}},o.a.createElement("div",{className:Ie()("bongo-gauge-track-fill",l),style:{"--bongo-gauge-rotation":"".concat(u,"turn")}})),o.a.createElement("div",{className:"bongo-gauge-value-label"},s)),o.a.createElement("div",{className:"bongo-gauge-label","aria-hidden":!0},a))}}])&&Sc(n.prototype,r),a&&Sc(n,a),t}(o.a.PureComponent);Pc.defaultProps={value:0,maxValue:100,thresholds:[{trackFillClassName:"bongo-gauge-threshold-0",minValue:0},{trackFillClassName:"bongo-gauge-threshold-70",minValue:70},{trackFillClassName:"bongo-gauge-threshold-85",minValue:85}],trackThickness:32},Pc.propTypes={ariaLabel:M.a.string,className:M.a.string,label:M.a.string,maxValue:M.a.number,thresholds:M.a.arrayOf(M.a.shape({trackFillClassName:M.a.string,minValue:M.a.number})),trackThickness:M.a.number,value:M.a.number.isRequired};var Rc=Object(x.withI18n)()(Pc),Ac=[pc.b.INDIVIDUAL_PROJECT],jc={A:{minValue:85,level:"a"},B:{minValue:70,level:"b"},C:{minValue:0,level:"c"},UNKNOWN:{minValue:Number.NEGATIVE_INFINITY,level:"unknown"}},kc=[jc.A,jc.B,jc.C],Nc=70,Dc=160,Lc=.8,Mc=[".","?"],xc=128,Fc="auto-analysis-transcript-fragment--filler",Vc="auto-analysis-transcript-fragment--unclear",Gc="auto-analysis-transcript-fragment--topn",Uc="auto-analysis-transcript-fragment--selected",qc="auto-analysis-transcript-fragment--key-term",Wc=10,Bc=10,Qc={NOT_SUBMITTED:"NOT_SUBMITTED",SUBMITTED:"SUBMITTED",ANALYZING:"ANALYZING",REANALYZING:"REANALYZING",TRANSCRIBING:"TRANSCRIBING",COMPLETE:"COMPLETE",ERROR:"ERROR"},Yc={ANALYSIS_FAILED:"ANALYSIS_FAILED",AUDIO_EXCEEDS_MAX:"BAD_REQUEST_AUDIO_TOO_LONG",BAD_REQUEST:"BAD_REQUEST",FILESIZE_EXCEEDS_MAX:"BAD_REQUEST_FILE_SIZE_TOO_LARGE"},Hc="data-word",zc="data-id",Kc={CLARITY:"CLARITY",FILLERS:"FILLERS",KEY_TERMS:"KEY_TERMS",TOP_N:"TOP_N"},Xc={WORD:"WORD",MARK:"MARK",TERM:"TERM"},$c={WORD:"AnnotatedWord",TERM:"AnnotatedTerm",MARK:"AnnotatedMark"};function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jc=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getRating",value:function(e){if(!g.a.isNumber(e)||g.a.isNaN(e))return null;var t=jc.UNKNOWN;return g.a.forEach(kc,(function(n){if(e>=n.minValue)return t=n,!1})),t}},{key:"getRatingBackgroundColorClassName",value:function(e){return"auto-analysis-score-rating-background-color--".concat(e.level)}},{key:"getRatingBackgroundColorClassNameForScore",value:function(e){var t=this.getRating(e);return this.getRatingBackgroundColorClassName(t)}},{key:"isActivityTypeSupported",value:function(e){return g.a.includes(Ac,e)}},{key:"getTranscriptText",value:function(e){if(g.a.isEmpty(e))return null;var t=g.a.reduce(e,this.transcriptEntryReducer,"");return t=g.a.trim(t)}},{key:"transcriptEntryReducer",value:function(e,t){switch(t.__typename){case $c.MARK:return"".concat(e).concat(t.value);default:return"".concat(e," ").concat(t.value)}}},{key:"isAnalysisStatusPending",value:function(e){return g.a.includes([Qc.SUBMITTED,Qc.TRANSCRIBING,Qc.ANALYZING,Qc.REANALYZING],e)}},{key:"isAnalysisStatusNotSubmitted",value:function(e){return e===Qc.NOT_SUBMITTED}},{key:"isAnalysisStatusCompleted",value:function(e){return e===Qc.COMPLETE}},{key:"isAnalysisStatusError",value:function(e){return e===Qc.ERROR}}])&&Zc(t.prototype,n),r&&Zc(t,r),e}());n("UDne");function es(e){return(es="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(e){return(ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rs(e,t){return(rs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var is=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=ns(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==es(a)&&"function"!==typeof a?as(r):a,os(as(as(n)),"getTruncatedNumber",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,t);return Math.floor(e*n)/n})),os(as(as(n)),"renderItemChart",(function(e){var t=e.metricValue,n=e.metricConfig,r=e.tooltip,a=n.minValue,i=n.maxValue,c=n.thresholds,s=i-a,u=0;u=t<=a?.01:t>=i?1:(t-a)/s;var l=g.a.orderBy(c,["minValue"],["asc"]);return o.a.createElement("div",{className:"auto-analysis-summary-item-chart-container"},o.a.createElement(Ec.b,{ariaLabel:r.ariaLabel,className:"auto-analysis-summary-item-chart",tabIndex:0,html:r.html||o.a.createElement("div",null,String(t)),style:{display:"flex"},position:Ec.a.BOTTOM},g.a.map(l,(function(e,t){var n=e.rating,r=Math.min((i-e.minValue)/s,1),a=Math.max(1-r,0);return o.a.createElement("div",{key:"auto-analysis-summary-item-chart-line[".concat(t,"]"),className:Ie()("auto-analysis-summary-item-chart-line",Jc.getRatingBackgroundColorClassName(n)),style:{left:"".concat(100*a,"%"),right:0}})})),o.a.createElement("div",{className:"auto-analysis-summary-item-chart-arrow",style:{left:"".concat(100*u,"%")}},o.a.createElement(zt.a,null,Je.a.PLAY))))})),os(as(as(n)),"renderItem",(function(e,t){var r=n.props,a=r.i18n,i=r.isScoreVisible,c=e.title,s=e.score,u=e.description,l=e.rating,d=n.getTruncatedNumber(s,1),f=i?a._("{title} (Rating: {formattedScore})",{title:c,formattedScore:d}):c;return o.a.createElement("div",{key:"auto-analysis-summary-item[".concat(t,"]"),className:"auto-analysis-summary-item"},o.a.createElement("div",{className:"auto-analysis-summary-item-score","aria-hidden":!0},o.a.createElement(Xt.a,{zDepth:1,className:Ie()("auto-analysis-summary-item-score-indicator",Jc.getRatingBackgroundColorClassName(l))})),o.a.createElement("div",{className:"auto-analysis-summary-item-info"},o.a.createElement("h4",{className:"auto-analysis-summary-item-title","aria-label":f},c),o.a.createElement("div",{className:"auto-analysis-summary-item-description"},u)),n.renderItemChart(e))})),os(as(as(n)),"renderInfoIcon",(function(){var e=n.props.infoTooltip;return e?o.a.createElement(Ec.b,{tabIndex:0,ariaLabel:e,label:e},o.a.createElement(zt.a,{className:"auto-analysis-summary-info-icon"},Je.a.INFO_OUTLINE)):null})),os(as(as(n)),"renderContent",(function(){var e=n.props,t=e.i18n,r=e.isScoreVisible,a=e.score,i=e.title,c=e.items,s=n.getTruncatedNumber(a,1),u=r?t._("{title} (Rating: {formattedScore})",{title:i,formattedScore:s}):i;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Ie()("auto-analysis-summary-header",Jc.getRatingBackgroundColorClassNameForScore(a))},r&&o.a.createElement("div",{className:"auto-analysis-summary-score","aria-hidden":!0},s),o.a.createElement("h3",{className:"auto-analysis-summary-title","aria-label":u},i),n.renderInfoIcon()),o.a.createElement("div",{className:"auto-analysis-summary-body"},g.a.map(c,n.renderItem)))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rs(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(Xt.a,{zDepth:2,className:"auto-analysis-summary-card"},this.renderContent())}}])&&ts(n.prototype,r),a&&ts(n,a),t}(a.PureComponent);is.defaultProps={isScoreVisible:!1},is.propTypes={isScoreVisible:M.a.bool,score:M.a.number,title:M.a.string,infoTooltip:M.a.string,items:M.a.arrayOf(M.a.shape({title:M.a.string,description:M.a.string,tooltip:M.a.shape({ariaLabel:M.a.string,html:M.a.node}),rating:M.a.any,score:M.a.number,metricConfig:M.a.shape({minValue:M.a.number,maxValue:M.a.number,thresholds:M.a.arrayOf(M.a.shape({minValue:M.a.number,rating:M.a.object}))}),metricValue:M.a.number}))};var cs=Object(x.withI18n)()(is),ss=n("hApM"),us=n("J3bt");n("Wexe");function ls(e){return(ls="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fs(e){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ps(e,t){return(ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ys=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=fs(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==ls(a)&&"function"!==typeof a?ms(r):a,bs(ms(ms(n)),"createWordFragment",(function(e){var t=n.props.i18n,r=e.value,a=e.id,i=e.isUnclear,c=e.isFiller,s=e.isTopN,u=e.fillerCount,l=e.confidence,d=e.relatedWordValue,f=[],p=[],m=bs({},Hc,d?d.toLowerCase():r.toLowerCase());if(i&&(p.push(o.a.createElement("div",{key:"fragment-unclear["+a+"]"},t._("This word was unclear to the transcriber ({confidence}% confidence).",{confidence:l}))),f.push(Vc),m[zc]=a),s&&f.push(Gc),c&&(u>1?p.push(o.a.createElement("div",{key:"fragment-filler["+a+"]"},t._("This word was identified as a filler word (used {fillerCount} times).",{fillerCount:u}))):p.push(o.a.createElement("div",{key:"fragment-filler["+a+"]"},t._("This word was identified as a filler word (used once)."))),f.push(Fc)),f.length>0){var b=[" "];return p.length>0?b.push(o.a.createElement(Ec.b,{key:"fragment["+a+"]",className:Ie()(f),html:o.a.createElement("span",null,p)},o.a.createElement("span",m,r))):b.push(o.a.createElement("span",{key:"fragment["+a+"]",className:Ie()(f)},o.a.createElement("span",m,r))),b}return[" ",r]})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ps(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){for(var e=this.props,t=e.i18n,n=e.transcript,r={},a=[],i=[],c=0;c<n.length;c++){var s=n[c];if(s.type===Xc.WORD)i.push(this.createWordFragment(s));else if(s.type===Xc.TERM){var u=o.a.createElement("div",{key:"fragment-key-term["+c+"]"},t._("This is a desired key term.")),l=bs({},Hc,String(s.match).toLowerCase());i.push(" "),i.push(o.a.createElement(Ec.b,{key:"fragment["+c+"]",className:Ie()(qc),html:o.a.createElement("span",null,u)},o.a.createElement("span",l,g.a.map(s.words,this.createWordFragment))))}else if(s.type===Xc.MARK){var d=n.length>c+1?n[c+1].start:0;i.push(s.value),Mc.includes(s.value)&&d&&d-r.end>2&&(a.push(i),i=[])}r=n[c]}i=g.a.compact(i),a.push(i),a=g.a.compact(a);var f=Jc.getTranscriptText(n);return o.a.createElement("div",{"aria-labelledby":"auto-analysis-transcript-text",tabIndex:0},g.a.map(a,(function(e,t){return o.a.createElement("div",{key:"auto-analysis-transcript-paragraph["+t+"]",className:"auto-analysis-transcript-paragraph","aria-hidden":!0},g.a.map(e,(function(e){return e})))})),o.a.createElement("div",{id:"auto-analysis-transcript-text","aria-hidden":!0,style:{display:"none"}},t._("Transcript: {transcriptText}",{transcriptText:f})))}}])&&ds(n.prototype,r),a&&ds(n,a),t}(o.a.PureComponent);ys.defaultProps={keyTerms:[],transcript:[]},ys.propTypes={keyTerms:M.a.array,transcript:M.a.array};var vs=Object(x.withI18n)()(ys),hs=n("w8M0"),gs=n("q8N1");n("Fpq1");function Es(e){return(Es="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ws(){return(ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Is={drawerVisible:!1},Ps=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Os(t).call(this,e),n=!a||"object"!==Es(a)&&"function"!==typeof a?_s(r):a,Ts(_s(_s(n)),"onSelection",(function(e){var t=n.props.onSelection,r=n.state.drawerVisible;t({id:e.currentTarget.getAttribute(zc),word:e.currentTarget.getAttribute(Hc)}),r&&n.onCloseWordListDrawer()})),Ts(_s(_s(n)),"onItemKeyDown",(function(e){var t=e.which||e.keyCode;t!==gs.a.SPACE&&t!==gs.a.ENTER||n.onSelection(e)})),Ts(_s(_s(n)),"renderEmptyListMessage",(function(){var e=n.props,t=e.i18n,r=null;switch(e.context){case Kc.FILLERS:r=t._("No filler words were found");break;case Kc.CLARITY:r=t._("No unclear words were found");break;default:r=t._("No items found")}return[o.a.createElement("div",{key:"word-list-item--empty-container",className:"word-list-item--empty-container"},o.a.createElement("span",null,r))]})),Ts(_s(_s(n)),"renderListItems",(function(){var e=n.props,t=e.context,r=e.items;return r&&0!==r.length?t===Kc.KEY_TERMS?n.renderKeyTermItems():n.renderGeneralItems():n.renderEmptyListMessage()})),Ts(_s(_s(n)),"renderKeyTermItems",(function(){var e=n.props,t=e.i18n,r=e.ink,a=e.items,i=e.selectedItem;return g.a.map(a,(function(e,a){var c=e.term,s=t._("{0} of {1}",{0:e.actualCount,1:e.targetCount}),u=i&&i.word===c.toLowerCase(),l=Ts({},Hc,c.toLowerCase()),d=t._('Item: "{termLabel}" (Occurrences: {termValue})',{termLabel:c,termValue:s});return o.a.createElement("div",ws({},l,{key:"word-list-item[".concat(a,"]"),className:Ie()("word-list-item",u?"word-list-item--selected":null),"aria-label":d,role:"button",tabIndex:0,onKeyDown:n.onItemKeyDown,onClick:n.onSelection}),r,o.a.createElement("div",{className:"word-list-item-selection"}),o.a.createElement("span",{className:"word-list-item-label"},c),o.a.createElement("div",{className:"word-list-item-value-container"},o.a.createElement("span",{className:"word-list-item-value"},"".concat(s))))}))})),Ts(_s(_s(n)),"renderGeneralItems",(function(){var e=n.props,t=e.i18n,r=e.context,a=e.ink,i=e.items,c=e.selectedItem,s=r===Kc.CLARITY,u=r===Kc.TOP_N,l=g.a.map(i,(function(e,i){if(u&&!e.count)return null;var l=e.value||e.term,d=s?"":e.count,f=t._('Item: "{termLabel}" (Occurrences: {termValue})',{termLabel:l,termValue:d});s&&(f=t._('Item: "{termLabel}" (Confidence: {0}%)',{0:e.confidence,termLabel:l}));var p=Ts({},Hc,l),m=c&&c.word===l;return r===Kc.CLARITY&&(m=c&&c.id===e.id),e.id&&(p[zc]=e.id),o.a.createElement("div",ws({},p,{key:"word-list-item[".concat(i,"]"),className:Ie()("word-list-item",m?"word-list-item--selected":null),"aria-label":f,role:"button",tabIndex:0,onKeyDown:n.onItemKeyDown,onClick:n.onSelection}),a,o.a.createElement("div",{className:"word-list-item-selection"}),o.a.createElement("span",{className:"word-list-item-label"},l),o.a.createElement("div",{className:"word-list-item-value-container"},o.a.createElement("span",{className:"word-list-item-value"},d)))}));return g.a.compact(l)})),Ts(_s(_s(n)),"getListTitle",(function(){var e=n.props,t=e.context,r=e.i18n;switch(t){case Kc.CLARITY:return r._("Top Unclear Words");case Kc.TOP_N:return r._("Top Words and Phrases");case Kc.FILLERS:return r._("Filler Words");case Kc.KEY_TERMS:return r._("Key Terms");default:return""}})),Ts(_s(_s(n)),"getDrawerButtonAriaLabel",(function(){var e=n.props,t=e.context,r=e.i18n;switch(t){case Kc.CLARITY:return r._("Show top unclear words");case Kc.TOP_N:return r._("Show top words and phrases");case Kc.FILLERS:return r._("Show filler words");case Kc.KEY_TERMS:return r._("Show key terms");default:return""}})),Ts(_s(_s(n)),"onCloseWordListDrawer",(function(){n.setState({drawerVisible:!1})})),Ts(_s(_s(n)),"onOpenWordListDrawer",(function(){n.setState({drawerVisible:!0})})),Ts(_s(_s(n)),"renderDrawerActions",(function(){var e=n.props.i18n;return o.a.createElement(Ue.c,{ariaLabel:e._("Close"),id:"auto-analysis-transcript-word-list-drawer-close-button",className:"auto-analysis-transcript-word-list-close-button",onClick:n.onCloseWordListDrawer},Je.a.CLOSE)})),Ts(_s(_s(n)),"renderDrawerHeader",(function(){return o.a.createElement(Ge.a,{nav:n.renderDrawerActions(),className:"auto-analysis-transcript-word-list-drawer-toolbar",title:n.getListTitle()})})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ts(e,t,n[t])}))}return e}({},Is),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isSmallWidth,r=e.items,a=this.state.drawerVisible,i=r?r.length:0,c=this.getListTitle();return o.a.createElement("div",{id:"auto-analysis-transcript-contents-word-list",className:Ie()("auto-analysis-transcript-contents-word-list",n?"auto-analysis-transcript-contents-word-list--width-small":null)},n?o.a.createElement("div",{className:"auto-analysis-transcript-topn-selection"},o.a.createElement(Ue.c,{id:"auto-analysis-transcript-word-list-drawer-open-button",className:"auto-analysis-transcript-word-list-drawer-open-button",onClick:this.onOpenWordListDrawer,ariaLabel:this.getDrawerButtonAriaLabel()},Je.a.VIEW_LIST),o.a.createElement(hs.a,{id:"auto-analysis-transcript-word-list-drawer",className:"auto-analysis-transcript-word-list-drawer",onVisibilityChange:function(){},visible:a,position:"right",type:hs.a.DrawerTypes.TEMPORARY,header:this.renderDrawerHeader(),navItems:this.renderListItems()})):o.a.createElement(Xt.a,{zDepth:2,className:"auto-analysis-transcript-word-list-container"},o.a.createElement("div",{id:"auto-analysis-transcript-word-list",className:"auto-analysis-transcript-word-list",tabIndex:0},o.a.createElement("div",{className:"auto-analysis-transcript-word-list-header"},o.a.createElement("h3",{className:"auto-analysis-transcript-word-list-header-label","aria-label":t._("{listTitle} (List with {listLength} items)",{listTitle:c,listLength:i})},c)),o.a.createElement("div",{className:"auto-analysis-transcript-word-list-sep"}),o.a.createElement("div",{id:"auto-analysis-transcript-word-list-contents",className:"auto-analysis-transcript-word-list-contents"},this.renderListItems()))))}}])&&Ss(n.prototype,r),a&&Ss(n,a),t}(o.a.PureComponent);Ps.defaultProps={isSmallWidth:!1,onSelection:function(){},selectedItem:null},Ps.propTypes={context:M.a.string,isSmallWidth:M.a.bool,items:M.a.any,onSelection:M.a.func,selectedItem:M.a.object};var Rs=Object(x.withI18n)()(Object(da.T)(Ps));n("Xs32");function As(e){return(As="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ms(e,t,n[t])}))}return e}function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ds(e,t){return(Ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ls(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xs=Kc,Fs={context:xs.TOP_N,selectedWordListItem:null},Vs=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ns(t).call(this,e),n=!a||"object"!==As(a)&&"function"!==typeof a?Ls(r):a,Ms(Ls(Ls(n)),"getFillerWordCounts",(function(){var e=n.props.fillerWords,t={};return e&&g.a.map(e.fillerWordCounts,(function(e){t[String(e.word).toLowerCase()]=e.count})),t})),Ms(Ls(Ls(n)),"getContextClassname",(function(){switch(n.state.context){case xs.CLARITY:return"auto-analysis-transcript-container-context--clarity";case xs.FILLERS:return"auto-analysis-transcript-container-context--fillers";case xs.KEY_TERMS:return"auto-analysis-transcript-container-context--key-terms";default:return"auto-analysis-transcript-container-context--top-n"}})),Ms(Ls(Ls(n)),"getWordsForContext",(function(){var e=n.state,t=e.context,r=e.clarity,a=e.fillers,o=e.translatedKeyTerms,i=e.topNWords;switch(t){case xs.CLARITY:return r;case xs.FILLERS:return a;case xs.KEY_TERMS:return o;default:return i}})),Ms(Ls(Ls(n)),"getFillerWordCount",(function(e,t){return t[String(e).toLowerCase()]})),Ms(Ls(Ls(n)),"getTruncatedNumber",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,t);return Math.floor(e*n)/n})),Ms(Ls(Ls(n)),"isFillerWord",(function(e,t){return Boolean(n.getFillerWordCount(e,t))})),Ms(Ls(Ls(n)),"isUnclearWord",(function(e){return Boolean(e<Lc)})),Ms(Ls(Ls(n)),"isKeyTerm",(function(){return!1})),Ms(Ls(Ls(n)),"clearSelection",(function(){var e=n.transcriptContainer.current.querySelectorAll("span.".concat(Uc));if(e)for(var t=0;t<e.length;t++)e[t].classList.remove(Uc)})),Ms(Ls(Ls(n)),"onWordSelection",(function(e){var t=n.state.context,r=n.transcriptContainer.current,a=null;if(n.clearSelection(),e){switch(t){case xs.CLARITY:a=Vc;break;case xs.FILLERS:a=Fc;break;case xs.TOP_N:a=Gc;break;case xs.KEY_TERMS:a=qc}var o=null;if((o=t===xs.CLARITY?r.querySelectorAll(".".concat(a,' > span[data-id="').concat(e.id,'"]')):r.querySelectorAll(".".concat(a,' > span[data-word="').concat(e.word.toLowerCase(),'"]')))&&o.length>0){o[0].scrollIntoView({behavior:"smooth",block:"nearest"});for(var i=0;i<o.length;i++)o[i].classList.add(Uc)}}n.setState({selectedWordListItem:e})})),Ms(Ls(Ls(n)),"getTranslatedAnnotatedWord",(function(e,t,r,a){var o=js({},e,{relatedWordValue:a,type:Xc.WORD});return r[(a||e.value).trim().toLowerCase()]&&(o.isTopN=!0),e.isFiller&&(o.fillerCount=n.getFillerWordCount(e.value,t)),e.isUnclear&&(o.confidence=n.getTruncatedNumber(100*e.confidence),o.id=n.getIdForTranscriptItem(e)),o})),Ms(Ls(Ls(n)),"getTermCount",(function(e){var t=n.props.terms;return g.a.get(g.a.find(t,["term",e.term]),"count",0)})),Ms(Ls(Ls(n)),"getTranslatedKeyTerms",(function(){var e=n.props.keyTerms,t=[];if(e){var r=e.desiredKeyTerms;if(!g.a.isEmpty(r))for(var a=0;a<r.length;a++){var o=r[a];t.push({actualCount:n.getTermCount(o),term:o.term,targetCount:o.count})}}return t})),Ms(Ls(Ls(n)),"getTranslatedAnnotatedReport",(function(){for(var e=n.props,t=e.terms,r=e.annotatedTranscript,a=n.getFillerWordCounts(),o=n.getTranslatedKeyTerms(),i=[],c=[],s=g.a.orderBy(t,["count"],["desc"]).slice(0,Wc),u=g.a.keyBy(s,(function(e){return e.term.toLowerCase()})),l=0;l<r.length;l++){var d=r[l],f=d.__typename;if(f===$c.WORD){var p=n.getTranslatedAnnotatedWord(d,a,u);p.isUnclear&&c.push(p),i.push(p)}else f===$c.TERM?function(){var e=[],t=g.a.get(d,"match");g.a.forEach(d.words,(function(r){var o=n.getTranslatedAnnotatedWord(r,a,u,t);o.isUnclear&&c.push(o),e.push(o)})),i.push(js({},d,{type:Xc.TERM,words:[].concat(e)}))}():f===$c.MARK&&i.push(js({},d,{type:Xc.MARK}))}var m=g.a.map(a,(function(e,t){return{value:t,count:e}}));m=g.a.orderBy(m,["count"],["desc"]);var b=g.a.orderBy(c,["confidence"],["asc"]).slice(0,Bc);return{translatedTranscript:i,clarity:b,topNWords:s,fillers:m,translatedKeyTerms:o}})),Ms(Ls(Ls(n)),"getSelectedContextMenuItemLabel",(function(e,t){var n=g.a.find(e,{value:t});return n?n.label:""})),Ms(Ls(Ls(n)),"getContextMenuItems",(function(){var e=n.props.i18n,t=n.state.translatedKeyTerms,r=g.a.isEmpty(t),a=[{key:"all-words",label:e._("All Words"),value:xs.TOP_N,getProps:function(){return{id:"auto-analysis-context-select-field-menu-options[all-words]",disabled:!1,primaryText:e._("All Words")}}},{key:"unclear-words",label:e._("Unclear Words"),value:xs.CLARITY,getProps:function(){return{id:"auto-analysis-context-select-field-menu-options[unclear-words]",disabled:!1,primaryText:e._("Unclear Words")}}},{key:"filler-words",label:e._("Filler Words"),value:xs.FILLERS,getProps:function(){return{id:"auto-analysis-context-select-field-menu-options[filler-words]",disabled:!1,primaryText:e._("Filler Words")}}}];return r||a.push({key:"content-key-terms",label:e._("Key Terms"),disabled:r,value:xs.KEY_TERMS,getProps:function(){return{id:"auto-analysis-context-select-field-menu-options[content-key-terms]",disabled:r,primaryText:e._("Key Terms")}}}),a})),Ms(Ls(Ls(n)),"onContextChange",(function(e){n.setState({context:e,selectedWordListItem:null}),n.clearSelection()})),Ms(Ls(Ls(n)),"isSmallWidth",(function(){return n.props.viewportDimensions.width<=ss.a.SMALL.max}));var i=n.getTranslatedAnnotatedReport();return n.state=js({},Fs,i,{context:g.a.isEmpty(i.translatedKeyTerms)?xs.TOP_N:xs.KEY_TERMS}),n.transcriptContainer=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ds(e,t)}(t,e),n=t,(r=[{key:"getIdForTranscriptItem",value:function(e){return"fragment_".concat(e.start)}},{key:"render",value:function(){var e=this.props.i18n,t=this.state,n=t.context,r=t.translatedKeyTerms,a=t.selectedWordListItem,i=t.topNWords,c=t.translatedTranscript,s=this.isSmallWidth(),u=this.getContextMenuItems(),l=this.getSelectedContextMenuItemLabel(u,n);return o.a.createElement("div",{className:Ie()("auto-analysis-transcript-container",s?"auto-analysis-transcript-container-small-width":"",this.getContextClassname())},o.a.createElement("div",{className:"auto-analysis-transcript-header"},o.a.createElement("h2",{id:"auto-analysis-transcript-title",className:"auto-analysis-transcript-title","aria-hidden":!0},e._("Transcript")),o.a.createElement("div",{className:"auto-analysis-transcript-toolbar"},o.a.createElement("div",{className:"auto-analysis-transcript-toolbar-actions-container"}),o.a.createElement("div",{className:"auto-analysis-transcript-context-selection"},o.a.createElement(us.b,{id:"auto-analysis-context-select-field",className:"auto-analysis-context-select-field",ariaLabel:e._("Transcript Context: {selectedItemLabel}",{selectedItemLabel:l}),menuItems:u,fullWidth:!1,value:n,position:"below",onChange:this.onContextChange})),o.a.createElement("div",{className:"auto-analysis-transcript-toolbar-actions-container"},s&&o.a.createElement(Rs,{isSmallWidth:s,onSelection:this.onWordSelection,items:this.getWordsForContext(),selectedItem:a,context:n})))),o.a.createElement("div",{className:Ie()("auto-analysis-transcript-contents",s?"auto-analysis-transcript-contents-small-width":"")},!s&&o.a.createElement(Rs,{isSmallWidth:s,onSelection:this.onWordSelection,items:this.getWordsForContext(),selectedItem:a,context:n}),o.a.createElement("div",{ref:this.transcriptContainer,id:"auto-analysis-transcript-contents-transcript",className:"auto-analysis-transcript-contents-transcript"},o.a.createElement(vs,{keyTerms:r,topNWords:i,transcript:c}))))}}])&&ks(n.prototype,r),a&&ks(n,a),t}(o.a.PureComponent);Vs.defaultProps={annotatedTranscript:[],fillerWords:{},keyTerms:{},terms:[]},Vs.propTypes={annotatedTranscript:M.a.array,fillerWords:M.a.object,keyTerms:M.a.object,terms:M.a.array};var Gs=Object(x.withI18n)()(Object(c.b)((function(e){return{viewportDimensions:mc.a(e)}}))(Vs));n("zyUR");function Us(e){return(Us="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Hs(e,t,n[t])}))}return e}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e){return(Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qs(e,t){return(Qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zs={isClarityAcceptable:!1,isReportVisible:!1},Ks=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Bs(t).call(this,e),n=!a||"object"!==Us(a)&&"function"!==typeof a?Ys(r):a,Hs(Ys(Ys(n)),"checkClarity",(function(e){return!!e.report.clarity&&e.report.clarity.score>=Nc})),Hs(Ys(Ys(n)),"onRevealAnalysisClick",(function(){n.setState({isReportVisible:!0})})),Hs(Ys(Ys(n)),"getTruncatedNumber",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,t);return Math.floor(e*n)/n})),Hs(Ys(Ys(n)),"getDurationLabel",(function(){var e=n.props,t=e.i18n,r=e.report.length,a=n.getTruncatedNumber(r/60),o=n.getTruncatedNumber(r%60);return a<1?t._({id:"{durationSeconds, plural, one {{durationSeconds} second} other {{durationSeconds} seconds}}",values:{durationSeconds:o}}):t._({id:"{durationMinutes, plural, one {{durationSeconds, plural, one {{durationMinutes} minute, {durationSeconds} second} other {{durationMinutes} minute, {durationSeconds} seconds}}} other {{durationSeconds, plural, one {{durationMinutes} minutes, {durationSeconds} second} other {{durationMinutes} minutes, {durationSeconds} seconds}}}}",values:{durationMinutes:a,durationSeconds:o}})})),Hs(Ys(Ys(n)),"createScoreLabel",(function(e){var t=n.props,r=t.i18n;if(t.isScoreVisible){var a=n.getTruncatedNumber(e);return r._("(Score: {formattedScore})",{formattedScore:a})}return null})),Hs(Ys(Ys(n)),"createTooltip",(function(e){var t=g.a.compact(e),n=o.a.createElement("div",null,g.a.map(t,(function(e,t){return o.a.createElement("div",{key:"summary-item-tooltip-label[".concat(t,"]")},e)})));return{ariaLabel:g.a.join(e," "),html:n}})),Hs(Ys(Ys(n)),"createKeyTermsItem",(function(){var e=n.props,t=e.i18n,r=e.report,a=r.keyTerms,o=r.terms,i=a.score,c=a.desiredKeyTerms,s=g.a.reduce(c,(function(e,t){return e+t.count}),0),u=g.a.reduce(c,(function(e,t){return qs({},e,Hs({},String(t.term).toLowerCase(),{term:t.term,count:t.count}))}),{}),l=g.a.reduce(o,(function(e,t){var n=String(t.term).toLowerCase(),r=g.a.get(u[n],"count");return r?e+Math.min(t.count,r):e}),0),d=Jc.getRating(i),f=[];switch(d){case jc.A:f.push(t._("Key term usage count {achievedTotalCount} of {targetTotalCount} is within the desirable range",{achievedTotalCount:l,targetTotalCount:s}));break;case jc.B:f.push(t._("Key term usage count {achievedTotalCount} of {targetTotalCount} is below the desirable range",{achievedTotalCount:l,targetTotalCount:s}));break;case jc.C:f.push(t._("Key term usage count {achievedTotalCount} of {targetTotalCount} is significantly below the desirable range",{achievedTotalCount:l,targetTotalCount:s}));break;default:f.push(t._("Key Term Count: {achievedTotalCount}",{achievedTotalCount:l}))}var p=t._({id:"{targetTotalCount, plural, one {{achievedTotalCount} of {targetTotalCount} key term} other {{achievedTotalCount} of {targetTotalCount} key terms}}",values:{targetTotalCount:s,achievedTotalCount:l}});f.push(n.createScoreLabel(i));var m=n.createTooltip(f);return{title:t._("Key Terms"),rating:d,score:i,tooltip:m,description:p,metricValue:l,metricConfig:{minValue:0,maxValue:s,thresholds:[{minValue:0,rating:jc.C},{minValue:.7*s,rating:jc.B},{minValue:.85*s,rating:jc.A}]}}})),Hs(Ys(Ys(n)),"createContentItems",(function(){return g.a.compact([n.createKeyTermsItem()])})),Hs(Ys(Ys(n)),"createClarityItem",(function(){var e=n.props,t=e.i18n,r=e.report,a=r.clarity,o=r.wordCount,i=0,c=0,s=0;a&&(i=a.score,c=a.clearWordCount,s=a.unclearWordCount);var u=100*n.getTruncatedNumber(c/o,2),l=Jc.getRating(i),d=[];switch(l){case jc.A:d.push(t._("Clarity of {clearWordPercLabel}% is within the desirable range",{clearWordPercLabel:u}));break;case jc.B:d.push(t._("Clarity of {clearWordPercLabel}% is below the desirable range",{clearWordPercLabel:u}));break;case jc.C:d.push(t._("Clarity of {clearWordPercLabel}% is significantly below the desirable range",{clearWordPercLabel:u}));break;default:d.push(t._("Clear Word Count: {clearWordCount} of {wordCount}",{clearWordCount:c,wordCount:o}))}var f=t._({id:"{unclearWordCount, plural, one {{clearWordPercLabel}% clear ({unclearWordCount} unclear word)} other {{clearWordPercLabel}% clear ({unclearWordCount} unclear words)}}",values:{unclearWordCount:s,clearWordPercLabel:u}});d.push(n.createScoreLabel(i));var p=n.createTooltip(d);return{title:t._("Clarity"),rating:l,score:i,tooltip:p,description:f,metricValue:c,metricConfig:{minValue:.5*r.wordCount,maxValue:r.wordCount,thresholds:[{minValue:0,rating:jc.C},{minValue:.7*r.wordCount,rating:jc.B},{minValue:.85*r.wordCount,rating:jc.A}]}}})),Hs(Ys(Ys(n)),"createFillersItem",(function(){var e=n.props,t=e.i18n,r=e.report,a=r.fillers,o=r.wordCount,i=0,c=0;a&&(i=a.score,c=a.count);var s=Jc.getRating(i),u=[];switch(s){case jc.A:u.push(t._("Filler word count of {count} is within the desirable range",{count:c}));break;case jc.B:u.push(t._("Filler word count of {count} is above the desirable range",{count:c}));break;case jc.C:u.push(t._("Filler word count of {count} is significantly above the desirable range",{count:c}));break;default:u.push(t._("Filler Word Count: {count}",{count:c}))}var l=t._({id:"{count, plural, one {{count} filler word} other {{count} filler words}}",values:{count:c}});u.push(n.createScoreLabel(i));var d=n.createTooltip(u);return{title:t._("Fillers"),rating:s,score:i,tooltip:d,description:l,metricValue:c,metricConfig:{minValue:0,maxValue:.1*o,thresholds:[{minValue:0,rating:jc.A},{minValue:.025*o,rating:jc.B},{minValue:.04*o,rating:jc.C}]}}})),Hs(Ys(Ys(n)),"createSpeakingRateItem",(function(){var e=n.props,t=e.i18n,r=e.report.speakingRate,a=0,o=0;r&&(a=r.score,o=r.wordsPerMinute);var i=n.getTruncatedNumber(o),c=Jc.getRating(a),s=[];switch(c){case jc.A:s.push(t._("Speaking Rate of {wordsPerMinuteLabel} words per minute is within the desirable range",{wordsPerMinuteLabel:i}));break;case jc.B:o<Dc?s.push(t._("Speaking Rate of {wordsPerMinuteLabel} words per minute is below the desirable range",{wordsPerMinuteLabel:i})):s.push(t._("Speaking Rate of {wordsPerMinuteLabel} words per minute is above the desirable range",{wordsPerMinuteLabel:i}));break;case jc.C:o<Dc?s.push(t._("Speaking Rate of {wordsPerMinuteLabel} words per minute is significantly below the desirable range",{wordsPerMinuteLabel:i})):s.push(t._("Speaking Rate of {wordsPerMinuteLabel} words per minute is significantly above the desirable range",{wordsPerMinuteLabel:i}));break;default:s.push(t._("Speaking Rate: {wordsPerMinuteLabel} words per minute",{wordsPerMinuteLabel:i}))}var u=t._("{wordsPerMinuteLabel} words per minute",{wordsPerMinuteLabel:i});s.push(n.createScoreLabel(a));var l=n.createTooltip(s);return{title:t._("Speaking Rate"),rating:c,score:a,tooltip:l,description:u,metricValue:o,metricConfig:{minValue:Dc-80,maxValue:Dc+80,thresholds:[{minValue:0,rating:jc.C},{minValue:120,rating:jc.B},{minValue:135,rating:jc.A},{minValue:185,rating:jc.B},{minValue:200,rating:jc.C}]}}})),Hs(Ys(Ys(n)),"createDeliveryItems",(function(){return g.a.compact([n.createClarityItem(),n.createFillersItem(),n.createSpeakingRateItem()])})),Hs(Ys(Ys(n)),"renderOverallGauge",(function(){var e=n.props,t=e.i18n,r=e.report.score,a=n.getTruncatedNumber(r),i=t._("An overall score of {formattedScore} is the average of the Delivery and Content subscores.",{formattedScore:a});return o.a.createElement(Ec.b,{className:"auto-analysis-report-overall-gauge-container",ariaLabel:i,label:i,tabIndex:0},o.a.createElement(Rc,{className:"auto-analysis-report-overall-gauge",label:t._("Overall"),maxValue:100,thresholds:[{minValue:0,trackFillClassName:"auto-analysis-report-overall-gauge-threshold-c"},{minValue:70,trackFillClassName:"auto-analysis-report-overall-gauge-threshold-b"},{minValue:85,trackFillClassName:"auto-analysis-report-overall-gauge-threshold-a"}],value:a}))})),Hs(Ys(Ys(n)),"renderInfoItem",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=n.props.i18n;return o.a.createElement("div",{className:"auto-analysis-report-info-item","aria-label":a._("{label}: {valueAriaLabel}.",{label:e,valueAriaLabel:r})},o.a.createElement("span",{className:"auto-analysis-report-info-item-label","aria-hidden":!0},"".concat(e,":")),o.a.createElement("span",{className:"auto-analysis-report-info-item-value","aria-hidden":!0},t))})),Hs(Ys(Ys(n)),"renderInfoItems",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props,r=t.i18n,a=t.analyzedAt,i=t.report,c=i.wordCount,s=n.getDurationLabel(),u=["auto-analysis-report-info-items"];e?u.push("auto-analysis-report-info-items--stacked"):u.push("auto-analysis-report-info-items--inline");var l=o.a.createElement(Qe.a,{unixTime:a}),d=new Date(1e3*a).toLocaleString();return o.a.createElement("div",{className:Ie()(u)},n.renderInfoItem(r._("Words"),c),n.renderInfoItem(r._("Duration"),s),n.renderInfoItem(r._("Analyzed at"),l,d))})),Hs(Ys(Ys(n)),"renderInfo",(function(){var e=n.props,t=e.isScoreVisible,r=e.mediaTitle,a=e.report.contentScore,i=null;return i=t&&!g.a.isNull(a)?o.a.createElement("div",{className:"auto-analysis-report-overall-container"},n.renderOverallGauge(!0),n.renderInfoItems(!0)):n.renderInfoItems(!1),o.a.createElement("div",{className:"auto-analysis-report-info"},o.a.createElement("h2",{className:"auto-analysis-report-info-title"},r),i)})),Hs(Ys(Ys(n)),"renderSummaryCards",(function(){var e=n.props,t=e.i18n,r=e.isScoreVisible,a=e.report,i=[],c=n.getTruncatedNumber(a.deliveryScore,1),s=n.createDeliveryItems(),u=t._("Delivery is a summary of the analysis for each category below"),l=o.a.createElement(cs,{key:"summary-card[delivery]",title:t._("Delivery"),score:c,isScoreVisible:r,items:s,infoTooltip:u});if(i.push(l),!g.a.isNull(a.contentScore)){var d=n.getTruncatedNumber(a.contentScore,1),f=n.createContentItems(),p=t._("Content is a summary of the analysis for each category below"),m=o.a.createElement(cs,{key:"summary-card[content]",title:t._("Content"),score:d,isScoreVisible:r,items:f,infoTooltip:p});i.push(m)}return o.a.createElement("div",{className:"auto-analysis-report-summary-cards"},i)})),Hs(Ys(Ys(n)),"renderTranscript",(function(){var e=n.props.report,t=e.annotatedTranscript,r=e.fillers,a=e.keyTerms,i=e.terms;return o.a.createElement(Gs,{annotatedTranscript:t,fillerWords:r,keyTerms:a,terms:i})})),Hs(Ys(Ys(n)),"renderReport",(function(){return o.a.createElement("div",{className:"auto-analysis-report"},n.renderInfo(),n.renderSummaryCards(),n.renderTranscript())})),Hs(Ys(Ys(n)),"renderUnclearReport",(function(){var e=n.props.i18n;return o.a.createElement("div",{className:Ie()("auto-analysis-report","auto-analysis-report--unclear")},o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear-container"},o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear-container--left"},o.a.createElement(zt.a,{className:"auto-analysis-report-status-message-unclear-icon"},Je.a.STATUS_WARNING)),o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear-container--right"},o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear--primary"},o.a.createElement("p",null,e._("Bongo was unable to confidently provide an analysis of this video"))),o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear--secondary"},o.a.createElement("p",null,e._("This may be due to unclear audio or a non-English language spoken.")),o.a.createElement("p",null,e._("Currently, the Auto Analysis\\u2122 report is only available for English videos."))))),o.a.createElement("div",{className:"auto-analysis-report-status-message-unclear--actions"},o.a.createElement(Ue.a,{primary:!0,id:"auto-analysis-report-reveal-unclear-button",ariaLabel:e._("Show the analysis anyways"),onClick:n.onRevealAnalysisClick},e._("Show the analysis anyways"))))}));var i=n.checkClarity(e);return n.state=qs({},zs,{isClarityAcceptable:i,isReportVisible:i}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qs(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(){var e=this.props.onComponentUpdate;e&&e()}},{key:"render",value:function(){var e=this.state.isReportVisible?this.renderReport():this.renderUnclearReport();return o.a.createElement("div",{className:"auto-analysis-report-container"},e)}}])&&Ws(n.prototype,r),a&&Ws(n,a),t}(a.PureComponent);Ks.defaultProps={isScoreVisible:!1},Ks.propTypes={analyzedAt:M.a.number.isRequired,i18n:M.a.any.isRequired,isScoreVisible:M.a.bool,mediaTitle:M.a.string.isRequired,onComponentUpdate:M.a.func,report:M.a.shape({score:M.a.number,contentScore:M.a.number,deliveryScore:M.a.number,length:M.a.number,wordCount:M.a.number,clarity:M.a.shape({clearWordCount:M.a.number,score:M.a.number,unclearWordCount:M.a.number}),fillers:M.a.shape({count:M.a.number,fillerWordCounts:M.a.arrayOf(M.a.shape({count:M.a.number,word:M.a.string})),percentage:M.a.number,score:M.a.number}),keyTerms:M.a.shape({desiredKeyTerms:M.a.arrayOf(M.a.shape({term:M.a.string,count:M.a.number})),penaltyKeyTerms:M.a.arrayOf(M.a.shape({term:M.a.string,penalty:M.a.number})),score:M.a.number}),speakingRate:M.a.shape({score:M.a.number,wordsPerMinute:M.a.number}),terms:M.a.arrayOf(M.a.shape({term:M.a.string,count:M.a.number})),annotatedTranscript:M.a.arrayOf(M.a.shape({value:M.a.string.isRequired}))}).isRequired};var Xs=Object(x.withI18n)()(Ks);n("OZTn");function $s(e){return($s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Js(e){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eu(e,t){return(eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ru=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Js(t).call(this,e),n=!a||"object"!==$s(a)&&"function"!==typeof a?tu(r):a,nu(tu(tu(n)),"componentDidUpdate",(function(){n.contentContainerRef.current&&n.contentContainerRef.current.focus()})),nu(tu(tu(n)),"onDownloadTranscriptClick",(function(){var e=n.props,t=e.i18n,r=e.analysis.report,a=e.mediaTitle,o=Jc.getTranscriptText(r.annotatedTranscript);o||(o=t._("(transcript blank)"));var i=new Blob([o],{type:"text/plain;charset=utf-8"}),c=t._("AutoAnalysis_Transcript_{mediaTitle}",{mediaTitle:a});c=String(c).substring(0,xc),hc.a.saveAs(i,"".concat(c,".txt"))})),nu(tu(tu(n)),"onReportComponentUpdate",(function(){n.dialogRef.current.getWrappedInstance().recalculateFocusables()})),nu(tu(tu(n)),"renderReport",(function(){var e=n.props,t=e.analysis,r=t.startTime,a=t.report,i=e.isScoreVisible,c=e.mediaTitle;return o.a.createElement(Xs,{analyzedAt:r,report:a,isScoreVisible:i,mediaTitle:c,onComponentUpdate:n.onReportComponentUpdate})})),nu(tu(tu(n)),"renderError",(function(){var e=n.props,t=e.i18n,r=e.analysis;if(r.error)switch(r.error.code){case Yc.ERROR_TYPE_ANALYSIS_FAILED:case Yc.AUDIO_EXCEEDS_MAX:case Yc.FILESIZE_EXCEEDS_MAX:var a=t._("Bongo was unable to provide an analysis of this video. This may be due to the video duration being too long or lack of audio.");return o.a.createElement(X.a,{type:X.a.NOTE_TYPES.ERROR,message:a});default:var i=t._("Unable to retrieve the analysis for this video.");return o.a.createElement(X.a,{type:X.a.NOTE_TYPES.ERROR,message:i})}return null})),nu(tu(tu(n)),"getStatusTitle",(function(e){var t=n.props.i18n;switch(e){case Qc.SUBMITTED:return t._("Submitted for Analysis");case Qc.TRANSCRIBING:return t._("Transcribing...");case Qc.ANALYZING:case Qc.REANALYZING:return t._("Analyzing...")}})),nu(tu(tu(n)),"renderWaiting",(function(){var e=n.props,t=e.i18n,r=e.analysis,a=r.startTime,i=r.state,c=a;return o.a.createElement("div",{className:"auto-analysis-dialog-content-waiting"},o.a.createElement("div",{className:"auto-analysis-dialog-content-waiting-left"},o.a.createElement(At.c,{className:"auto-analysis-dialog-content-waiting-spinner"})),o.a.createElement("div",{className:"auto-analysis-dialog-content-waiting-right"},o.a.createElement("h3",{className:"auto-analysis-dialog-content-waiting-title"},n.getStatusTitle(i)),o.a.createElement("div",{className:"auto-analysis-dialog-content-waiting-details"},c?o.a.createElement("p",null,t._("Processing started at:")," ",o.a.createElement(Qe.b,{unixTime:c})):o.a.createElement("p",null,t._("Processing should begin shortly.")),o.a.createElement("p",null,t._("Analyzing a video typically takes as long as the duration of the video.")),o.a.createElement("p",null,t._("You can close this dialog and the processing will continue to run.")))))})),nu(tu(tu(n)),"renderHeaderActions",(function(){var e=n.props,t=e.i18n;return e.analysis.state===Qc.COMPLETE?[o.a.createElement(Ue.c,{id:"auto-analysis-dialog-transcript-download",tooltip:{label:t._("Download Transcript")},onClick:n.onDownloadTranscriptClick,ariaLabel:t._("Download Transcript")},Je.a.DOWNLOAD)]:[]})),nu(tu(tu(n)),"renderContent",(function(){switch(n.props.analysis.state){case Qc.COMPLETE:return n.renderReport();case Qc.SUBMITTED:case Qc.TRANSCRIBING:case Qc.ANALYZING:case Qc.REANALYZING:return n.renderWaiting();case Qc.ERROR:case Qc.NOT_SUBMITTED:default:return n.renderError()}})),n.contentContainerRef=o.a.createRef(),n.dialogRef=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eu(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onClose,r=this.renderContent(),a=this.renderHeaderActions();return o.a.createElement(gc.a,{id:"auto-analysis-dialog",ref:this.dialogRef,dialogClassName:"auto-analysis-dialog",contentClassName:"auto-analysis-dialog-content",title:t._("Auto Analysis\\u2122"),fullPage:!0,onHide:n,headerActions:a},o.a.createElement("div",{className:"auto-analysis-dialog-content-container",ref:this.contentContainerRef},r))}}])&&Zs(n.prototype,r),a&&Zs(n,a),t}(o.a.PureComponent);ru.defaultProps={isScoreVisible:!1},ru.propTypes={analysis:M.a.shape({report:M.a.object,error:M.a.shape({code:M.a.oneOf(g.a.values(Yc)),message:M.a.string}),state:M.a.oneOf(g.a.values(Qc)),startTime:M.a.number}).isRequired,i18n:M.a.any.isRequired,isScoreVisible:M.a.bool,mediaTitle:M.a.string.isRequired,onClose:M.a.func.isRequired};var au=Object(x.withI18n)()(ru),ou=n("RBRe"),iu=n("h4t+"),cu=iu.b(),su=iu.c("analysis"),uu=Object(ou.a)(su,cu,!1);function lu(){var e=vu(["\n  query getAutoAnalysisState($mediaUrl: String!) {\n    getVideoAnalysis(mediaUrl: $mediaUrl) {\n      ...AutoAnalysisState\n    }\n  }\n  ","\n"]);return lu=function(){return e},e}function du(){var e=vu(["\n  query getAutoAnalysis($mediaUrl: String!) {\n    getVideoAnalysis(mediaUrl: $mediaUrl) {\n      ...AutoAnalysisResult\n    }\n  }\n  ","\n"]);return du=function(){return e},e}function fu(){var e=vu(["\n  fragment AutoAnalysisResult on VideoAnalysisResult {\n    analysis {\n      ...AutoAnalysisReport\n    }\n    ...AutoAnalysisState\n  }\n  ","\n  ","\n"]);return fu=function(){return e},e}function pu(){var e=vu(["\n  fragment AutoAnalysisState on VideoAnalysisResult {\n    analysisError {\n      ...AutoAnalysisError\n    }\n    mediaUrl\n    startTime\n    state\n  }\n  ","\n"]);return pu=function(){return e},e}function mu(){var e=vu(["\n  fragment AutoAnalysisError on VideoAnalysisError {\n    code\n    message\n  }\n"]);return mu=function(){return e},e}function bu(){var e=vu(["\n  fragment AutoAnalysisReport on VideoAnalysis {\n    score\n    contentScore\n    deliveryScore\n    length\n    wordCount\n    clarity {\n      clearWordCount\n      score\n      unclearWordCount\n    }\n    fillers {\n      count\n      fillerWordCounts {\n        count\n        word\n      }\n      percentage\n      score\n    }\n    keyTerms {\n      desiredKeyTerms {\n        term\n        count\n      }\n      penaltyKeyTerms {\n        term\n        penalty\n      }\n      score\n    }\n    speakingRate {\n      score\n      wordsPerMinute\n    }\n    terms {\n      term\n      count\n    }\n    annotatedTranscript {\n      value\n      ...AnnotatedWordFragment\n      ... on AnnotatedTerm {\n        start\n        end\n        isDesiredKeyTerm\n        isPenaltyKeyTerm\n        match\n        words {\n          ...AnnotatedWordFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return bu=function(){return e},e}function yu(){var e=vu(["\n  fragment AnnotatedWordFragment on AnnotatedWord {\n    start\n    end\n    confidence\n    isFiller\n    isUnclear\n    value\n  }\n"]);return yu=function(){return e},e}function vu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var hu=xt()(yu()),gu=xt()(bu(),hu),Eu=xt()(mu()),wu=xt()(pu(),Eu),Su=xt()(fu(),gu,wu),Ou=xt()(du(),Su),Cu=xt()(lu(),wu);function _u(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Tu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_u(o,r,a,i,c,"next",e)}function c(e){_u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ru=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pu(this,"pollingId2Status",{}),Pu(this,"cancelPollingForId",(function(e){H.b.debug("[AnalysisService] cancelPollingForId",e),t.pollingId2Status[e]=!1})),Pu(this,"startPollingForAutoAnalysisState",(function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(new Date).getTime();return H.b.debug("[AnalysisService] startPollingForAutoAnalysisState",{mediaUrl:e,onUpdateCallback:n,interval:r,pollingId:a}),g.a.isBoolean(t.pollingId2Status[a])||(t.pollingId2Status[a]=!0),t.pollForAutoAnalysisState(e,n,r,a),function(){t.cancelPollingForId(a)}})),Pu(this,"pollForAutoAnalysisState",function(){var e=Tu(regeneratorRuntime.mark((function e(n,r,a,o){var i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.b.debug("[AnalysisService] pollForAutoAnalysisState",{mediaUrl:n,onUpdateCallback:r,interval:a,pollingId:o}),e.prev=1,e.next=4,t.fetchAutoAnalysisState(n);case 4:i=e.sent,c=Jc.isAnalysisStatusPending(i.state),H.b.debug("[AnalysisService] pollForAutoAnalysisState result",i),c?(r({result:i,error:null,isFinished:!1}),window.setTimeout((function(){t.pollingId2Status[o]&&t.pollForAutoAnalysisState(n,r,a,o)}),a)):(t.cancelPollingForId(o),r({result:i,error:null,isFinished:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r({result:null,error:e.t0,isFinished:!0});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t,n,r,a){return e.apply(this,arguments)}}())}var t,n,r;return t=e,(n=[{key:"fetchAutoAnalysis",value:function(){var e=Tu(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu.query({query:Ou,variables:{mediaUrl:t}});case 2:if(n=e.sent,r=n.data,!((a=n.errors)&&a.length>0)){e.next=6;break}throw new Error(a);case 6:return e.abrupt("return",r.getVideoAnalysis);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAutoAnalysisState",value:function(){var e=Tu(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu.query({query:Cu,variables:{mediaUrl:t}});case 2:if(n=e.sent,r=n.data,!((a=n.errors)&&a.length>0)){e.next=6;break}throw new Error(a);case 6:return e.abrupt("return",r.getVideoAnalysis);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&Iu(t.prototype,n),r&&Iu(t,r),e}());function Au(e){return(Au="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ju(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nu(e){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Du(e,t){return(Du=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xu={analysis:{report:null,error:null,state:null,startTime:null},isFetching:!0},Fu=null,Vu=15e3,Gu=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Nu(t).call(this,e),n=!a||"object"!==Au(a)&&"function"!==typeof a?Lu(r):a,Mu(Lu(Lu(n)),"processProps",(function(e){var t={},r=e.media;return r.downloadUrl?n.fetchAutoAnalysis(r.downloadUrl):(H.b.debug("Not Fetching Auto Analysis, media.downloadUrl is not defined"),t.isFetching=!1,n.createFetchErrorNotification()),t})),Mu(Lu(Lu(n)),"poll",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vu;Fu=setTimeout((function(){return n.fetchAutoAnalysis(e)}),t)})),Mu(Lu(Lu(n)),"checkStatus",(function(e,t){Jc.isAnalysisStatusPending(e)?n.poll(t):e===Qc.NOT_SUBMITTED&&n.createSubmitErrorNotification()})),Mu(Lu(Lu(n)),"fetchAutoAnalysis",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H.b.debug(">>> Fetching Auto Analysis",t),e.next=4,Ru.fetchAutoAnalysis(t);case 4:r=e.sent,H.b.debug("<<< Fetched Auto Analysis",r),a=r.analysis,o=r.analysisError,i=r.state,c=r.startTime,n.checkStatus(i,t),n.setState({analysis:{report:a,error:o,state:i,startTime:c}}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),H.b.error("<<< Error Fetching Auto Analysis",e.t0),n.createFetchErrorNotification();case 15:n.setState({isFetching:!1});case 16:case"end":return e.stop()}}),e,this,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ju(o,r,a,i,c,"next",e)}function c(e){ju(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),Mu(Lu(Lu(n)),"createSubmitErrorNotification",(function(){var e=n.props.i18n;yc.a.addError(e._("Unable to submit video for Auto Analysis\\u2122."))})),Mu(Lu(Lu(n)),"createFetchErrorNotification",(function(){var e=n.props.i18n;yc.a.addError(e._("Unable to retrieve Auto Analysis\\u2122 report."))})),Mu(Lu(Lu(n)),"onClose",(function(){(0,n.props.onClose)(),Hn.a.closeModal()})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mu(e,t,n[t])}))}return e}({},xu,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Du(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){try{clearTimeout(Fu)}catch(e){H.b.debug('Unable to clear timeout with id "'+Fu+'"')}}},{key:"render",value:function(){var e=this.state,t=e.analysis,n=e.isFetching,r=this.props,a=r.isScoreVisible,i=r.media,c=r.viewportDimensions;return n?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(au,{id:"auto-analysis-dialog",analysis:t,isScoreVisible:a,mediaTitle:i.title,onClose:this.onClose,viewportDimensions:c})}}])&&ku(n.prototype,r),a&&ku(n,a),t}(o.a.PureComponent);Gu.propTypes={isScoreVisible:M.a.bool,media:M.a.shape({downloadUrl:M.a.string,title:M.a.string}).isRequired,onClose:M.a.func,viewportDimensions:M.a.object},Gu.defaultProps={isScoreVisible:!1,onClose:function(){}};var Uu,qu=Object(x.withI18n)()(Object(c.b)((function(e){return{viewportDimensions:mc.a(e)}}))(Gu));function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bu={COMBINED_VIDEO:"COMBINED_VIDEO",FILE:"FILE",LINK:"LINK",MEETING:"MEETING",MILESTONE:"MILESTONE",VIDEO:"VIDEO"},Qu={FILE:"FILE",IMAGE:"IMAGE",LINK:"LINK",MEETING:"MEETING",REFLECTION_ANSWERS:"REFLECTION_ANSWERS",VIDEO:"VIDEO"},Yu={DATA:"data",DOWNLOAD_URL:"downloadUrl",DOWNLOAD_SECONDARY_URL:"downloadSecondaryUrl",IMAGE_URL:"imageUrl",OWNER:"owner",PREVIEW_URL:"previewUrl",READ_ONLY:"readOnly",REFLECTION_ANSWERS:"reflectionAnswers",TYPE:"type"},Hu={INCLUDE_TOGGLE_SUBMITTING:"INCLUDE_TOGGLE_SUBMITTING"},zu={ActivityResultPartialDocument:Qu.FILE,ActivityResultPartialLink:Qu.LINK,ActivityResultPartialMedia:Qu.VIDEO,ActivityResultPartialMeeting:Qu.MEETING,ActivityResultPartialReflectionAnswers:Qu.REFLECTION_ANSWERS},Ku="ActivityResultPartialDocument",Xu="ActivityResultPartialLink",$u="ActivityResultPartialMedia",Zu="ActivityResultPartialMeeting",Ju="ActivityResultPartialReflectionAnswers",el=(Wu(Uu={},Qu.FILE,Ku),Wu(Uu,Qu.IMAGE,Ku),Wu(Uu,Qu.LINK,Xu),Wu(Uu,Qu.VIDEO,$u),Wu(Uu,Qu.MEETING,Zu),Wu(Uu,Qu.REFLECTION_ANSWERS,Ju),Uu),tl={STUDENT:"STUDENT",EDUCATOR:"EDUCATOR"},nl={ANALYSIS_PENDING:"ANALYSIS_PENDING",ANALYSIS_ERROR:"ANALYSIS_ERROR",ITEMS_REQUIRED:"ITEMS_REQUIRED",ITEMS_READY:"ITEMS_READY",VIDEO_ITEM_REQUIRED:"VIDEO_ITEM_REQUIRED"},rl=function(e){var t=e.className,n=e.enabled,r=e.isAutoAnalysisScoreVisible,a=e.item,i=e.tooltip;return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(a.key,"]-actions-inline--view-analysis"),className:Ie()("".concat("content-list-item","-actions-inline--view-analysis"),t),ariaLabel:i.label,enabled:n,tooltip:i,onClick:function(){Hn.a.showModal(o.a.createElement(qu,{isScoreVisible:r,media:a.media}))}},Je.a.ASSESSMENT)};rl.defaultProps={enabled:!1},rl.propTypes={className:M.a.string,enabled:M.a.bool,isAutoAnalysisScoreVisible:M.a.bool,item:M.a.object.isRequired,tooltip:M.a.object.isRequired};var al=rl,ol=n("upoK");function il(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}var cl=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Et.a.deletePartials([t]);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){il(o,r,a,i,c,"next",e)}function c(e){il(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),sl=function(e){var t=e.className,n=e.enabled,r=e.item,a=e.i18n,i=e.resultPartial;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--delete"),className:Ie()("".concat("content-list-item","-actions-menu--delete"),t),enabled:n,primaryText:a._("Delete"),leftIcon:o.a.createElement(zt.a,null,Je.a.DELETE),onClick:function(){Hn.a.showModal(o.a.createElement(Ni,{id:"delete-work-item-dialog",description:a._("Are you sure you want to delete the selected item?"),confirmLabel:a._("Delete"),title:a._("Delete?"),data:i,onConfirm:function(){cl(i)}}))}})};sl.defaultProps={enabled:!1},sl.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,resultPartial:M.a.object.isRequired};var ul=Object(x.withI18n)()(sl),ll=n("Gxhl");function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fl=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getDownloadWarningMessage",value:function(e,t){return o.a.createElement("span",null,o.a.createElement("p",null,e._('The meeting "{meetingTitle}" is being packaged for download.',{meetingTitle:t})),o.a.createElement("p",null,e._("This process may take several minutes depending on meeting length and resources.")),o.a.createElement("p",null,e._("Please do not navigate away from this page until the download has been initiated.")))}},{key:"download",value:function(e,t,n){var r=this.getDownloadWarningMessage(e,n);Hn.a.showModal(o.a.createElement(ll.a,{id:"".concat("meeting-download","-warning-dialog[").concat(n,"]"),dialogStyle:{width:"95%",maxWidth:"450px"},message:r,onClose:Hn.a.closeModal}));var a=document.createElement("form");a.action=t,a.method="POST",document.body.appendChild(a),a.submit(),document.body.removeChild(a)}}])&&dl(t.prototype,n),r&&dl(t,r),e}()),pl=n("fcFR"),ml=n("J4sO");function bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){hl(e,t,n[t])}))}return e}function yl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gl=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hl(this,"canCombineVideos",(function(e){return t.getExcludedReadyVideos(e).length>1})),hl(this,"downloadFromURL",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&Object(pl.a)(e,t)})),hl(this,"getExcludedItems",(function(e){return e.filter((function(e){var t=!0;return e.type!==Qu.MEETING||e.media?e.isIncluded&&(t=!1):t=!1,t}))})),hl(this,"getIncludedItems",(function(e){return e.filter((function(e){return e.isIncluded}))})),hl(this,"getIncludedVideos",(function(e){var n=t.getIncludedItems(e);return t.filterItemsOfType(n,[Qu.VIDEO,Qu.MEETING])})),hl(this,"filterItemsOfType",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=g.a.compact(g.a.concat(t));return g.a.filter(e,(function(e){return g.a.includes(n,e.type)}))})),hl(this,"getExcludedReadyVideos",(function(e){return t.getExcludedItems(e).filter(t.isVideoItem).filter(t.isItemProcessed)})),hl(this,"getResultPartialVideosToCombine",(function(e){return po.a.getVideosToCombine(e)})),hl(this,"getResultPartial",(function(e,n){var r=t.getTypenameForItem(e);return g.a.find(n,{dbId:e.id,__typename:r})})),hl(this,"isItemProcessed",(function(e){var n=Boolean(e.media&&t.isMediaProcessed(e.media));return e.type===Qu.VIDEO&&t.hasSecondaryMedia(e)&&n&&(n=t.isMediaProcessed(t.getSecondaryMedia(e))),n})),hl(this,"isMeetingWithoutMediaFilter",(function(e){return!(e.type===Qu.MEETING&&!e.media)})),hl(this,"getVideoPlayerIdForWorkItem",(function(e){return"workitem-video-".concat(e.key)})),hl(this,"isVideoItem",(function(e){return e.type===Qu.VIDEO})),hl(this,"isMediaProcessing",(function(e){return Boolean(e&&e.processingStatus===ml.a.PROGRESS)})),hl(this,"isMediaProcessed",(function(e){return Boolean(e&&e.processingStatus===ml.a.READY)})),hl(this,"getTranslatedResultPartials",(function(e,n,r,a){var o=yl(e),i=g.a.merge([],g.a.map(o,t.translateResultPartial)).filter(t.isMeetingWithoutMediaFilter);return i.push(t.createReflectionAnswersWorkItem(n)),i=g.a.compact(i),g.a.map(i,(function(e){return bl({},e,{config:r(e,i),itemState:a[e.key]||{}})}))})),hl(this,"getTranslatedResult",(function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=g.a.map(e.documents,t.translateResultPartial),i=g.a.map(e.links,t.translateResultPartial),c=[],s=[];e.media&&c.push(t.translateResultMedia(e.media,a)),r&&r.length>0&&s.push(t.createReflectionAnswersWorkItem(r));var u=g.a.compact(g.a.concat(c,o,i,s));return g.a.map(u,(function(e){return bl({},e,{config:n(e,u)})}))})),hl(this,"translateResultPartial",(function(e){var n=t.getTypeForResultPartial(e),r=e.media||e.recordedMedia,a=e.dbId;return{id:a,key:"".concat(n,"_").concat(a),name:e.title,media:r,isIncluded:Boolean(e.finalizedAt),imageUrl:t.translatePreviewUrl(e),type:n,attributes:t.translateResultPartialAttributes(e,n)}})),hl(this,"translateResultMedia",(function(e,n){var r=t.getTypeForResultMedia(e),a=e.dbId;return{id:a,key:"".concat(r,"_").concat(a),name:e.title,media:e,isIncluded:!0,imageUrl:null,type:r,attributes:t.translateResultMediaAttributes(e,r,n)}})),hl(this,"translatePreviewUrl",(function(e){try{return g.a.unescape(e.previewUrl.match(/^.*url\=([^&]*)\&/)[1])}catch(t){}return null})),hl(this,"getTypeForResultMedia",(function(e){return e.meetingAssets?Qu.MEETING:Qu.VIDEO})),hl(this,"getTypeForResultPartial",(function(e){return zu[e.__typename]})),hl(this,"getTypenameForItem",(function(e){return el[e.type]})),hl(this,"getFilteredRubricEvaluations",(function(e,t,n){var r=[];if(t){var a=n.student;r=t.filter((function(t){if(ar.e(a,t.user))return!1;if(ar.d(a,t.user)){if(e===pc.b.GROUP_PRESENTATION){var r=n.studentGroup.members;return!ar.c(a,t.user,r)}return!0}}))}return r}))}var t,n,r;return t=e,(n=[{key:"createReflectionAnswersWorkItem",value:function(e,t){return e&&e.length>0?{id:"reflection_answer",name:"",media:null,isIncluded:!0,imageUrl:null,type:Qu.REFLECTION_ANSWERS,attributes:[hl({},Yu.DATA,e),hl({},Yu.OWNER,e[0].submitter),hl({},Yu.READ_ONLY,!0)]}:null}},{key:"hasProcessingError",value:function(e){return!!e.media&&(this.mediaHasProcessingError(e.media)||this.mediaHasProcessingError(e.media.slaveMedia))}},{key:"isProcessing",value:function(e){return!!e.media&&(this.isMediaProcessing(e.media)||this.isMediaProcessing(e.media.slaveMedia))}},{key:"mediaHasProcessingError",value:function(e){return Boolean(e&&e.processingStatus===ml.a.ERROR)}},{key:"getSecondaryMedia",value:function(e){return g.a.get(e,"media.slaveMedia")}},{key:"hasSecondaryMedia",value:function(e){return Boolean(this.getSecondaryMedia(e))}},{key:"hasVideoInReadyToSubmitResultPartials",value:function(e){var t=po.a.getReadyToSubmitPartials(e);if(t&&t.length>0)for(var n=0;n<t.length;n++){var r=this.getTypeForResultPartial(t[n]);if(r===Qu.VIDEO||r===Qu.MEETING)return!0}return!1}},{key:"getVideosInReadyToSubmitResultPartials",value:function(e){var t=[],n=po.a.getReadyToSubmitPartials(e);if(n&&n.length>0)for(var r=0;r<n.length;r++){var a=n[r];this.getTypeForResultPartial(a)===Qu.VIDEO&&t.push(a)}return t}},{key:"translateResultMediaAttributes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};if(r[Yu.DOWNLOAD_URL]=g.a.get(e,"downloadUrl"),r[Yu.DOWNLOAD_SECONDARY_URL]=g.a.get(e,"slaveMedia.downloadUrl"),r[Yu.PREVIEW_URL]=g.a.get(e,"srcUrl"),t===Qu.MEETING)for(var a=0;a<n.length;a++){var o=n[a];if(o.__typename===Zu){var i=o.media||o.recordedMedia;if(i&&i.dbId===e.dbId){r[Yu.DOWNLOAD_URL]=o.meetingDownloadUrl;break}}}return r}},{key:"translateResultPartialAttributes",value:function(e,t){var n={};switch(t){case Qu.FILE:case Qu.IMAGE:n[Yu.TYPE]=e.mimeType,n[Yu.DOWNLOAD_URL]=e.downloadUrl,n[Yu.PREVIEW_URL]=e.previewUrl;break;case Qu.LINK:n[Yu.PREVIEW_URL]=e.link;break;case Qu.VIDEO:n[Yu.DOWNLOAD_URL]=g.a.get(e,"media.downloadUrl"),n[Yu.DOWNLOAD_SECONDARY_URL]=g.a.get(e,"media.slaveMedia.downloadUrl"),n[Yu.PREVIEW_URL]=g.a.get(e,"media.srcUrl");break;case Qu.MEETING:n.scheduledAt=new Date(e.scheduledAt),n[Yu.DOWNLOAD_URL]=e.meetingDownloadUrl,n[Yu.PREVIEW_URL]=g.a.get(e,"recordedMedia.srcUrl");break;case Qu.REFLECTION_ANSWERS:n[Yu.REFLECTION_ANSWERS]=e.data}return n}}])&&vl(t.prototype,n),r&&vl(t,r),e}()),El=function(e,t){var n=g.a.get(e,["attributes",Yu.DOWNLOAD_URL]);n&&e.type===Qu.MEETING?fl.download(t,n,e.name):n&&gl.downloadFromURL(n,name)},wl=function(e){var t=e.className,n=e.enabled,r=e.item,a=e.i18n,i=e.onClick,c=g.a.get(r,"media.slaveMedia");if(c&&r.type!==Qu.MEETING){var s=gl.isMediaProcessed(c),u={label:""},l={label:""};return gl.mediaHasProcessingError(c)&&(u.label=a._("There was an error processing this video")),gl.mediaHasProcessingError(r.media)&&(l.label=a._("There was an error processing this video")),o.a.createElement(Ue.e,{id:"".concat("content-list-item","[").concat(r,"]-actions-inline--download"),key:"".concat("content-list-item","[").concat(r,"]-actions-inline--download"),className:Ie()("".concat("content-list-item","-actions-inline--download"),t),icon:!0,ariaLabel:a._("Download"),menuItems:[o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--download-camera"),key:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--download-camera"),enabled:n,leftIcon:o.a.createElement(zt.a,null,Je.a.VIDEOCAM),tooltip:l,primaryText:a._("Camera"),onClick:function(){El(r,a),i()}}),o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--download-desktop"),key:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--download-desktop"),enabled:s,leftIcon:o.a.createElement(zt.a,null,Je.a.APP_WINDOW),tooltip:u,primaryText:a._("Screen"),onClick:function(){var e=r.name,t=g.a.get(r,["attributes",Yu.DOWNLOAD_SECONDARY_URL]);t&&gl.downloadFromURL(t,e),i()}})]},Je.a.DOWNLOAD)}return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(r,"]-actions-inline--download"),className:Ie()("".concat("content-list-item","-actions-inline--download"),t),enabled:n,tooltip:{label:a._("Download")},ariaLabel:a._("Download"),onClick:function(){El(r,a),i()}},Je.a.DOWNLOAD)};wl.defaultProps={enabled:!1,onClick:function(){}},wl.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.any.isRequired,item:M.a.object.isRequired,onClick:M.a.func};var Sl=Object(x.withI18n)()(wl),Ol=function(e,t){var n=g.a.get(e,["attributes",Yu.DOWNLOAD_URL]);n&&e.type===Qu.MEETING?fl.download(t,n,e.name):n&&gl.downloadFromURL(n,name)},Cl=function(e){var t=e.enabled,n=e.item,r=e.i18n,a=e.onClick,i=g.a.get(n,"media.slaveMedia");if(i&&n.type!==Qu.MEETING){var c=gl.isMediaProcessed(i),s={label:""},u={label:""};return gl.mediaHasProcessingError(i)&&(s.label=r._("There was an error processing this video")),gl.mediaHasProcessingError(n.media)&&(u.label=r._("There was an error processing this video")),[o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download-camera"),key:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download-camera"),enabled:t,leftIcon:o.a.createElement(zt.a,null,Je.a.DOWNLOAD),tooltip:u,primaryText:r._("Download camera recording"),onClick:function(){Ol(n,r),a()}}),o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download-desktop"),key:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download-desktop"),enabled:c,leftIcon:o.a.createElement(zt.a,null,Je.a.DOWNLOAD),tooltip:s,primaryText:r._("Download screen recording"),onClick:function(){var e=n.name,t=g.a.get(n,["attributes",Yu.DOWNLOAD_SECONDARY_URL]);t&&gl.downloadFromURL(t,e)}})]}return[o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download"),key:"".concat("content-list-item","[").concat(n.key,"]-actions-menu--download"),enabled:t,leftIcon:o.a.createElement(zt.a,null,Je.a.DOWNLOAD),primaryText:r._("Download"),onClick:function(){Ol(n,r)}})]};Cl.defaultProps={enabled:!1},Cl.propTypes={enabled:M.a.bool,i18n:M.a.any.isRequired,item:M.a.object.isRequired};var _l=Object(x.withI18n)()(Cl),Tl=n("ZmiZ");function Il(e){return(Il="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rl(e,t){return!t||"object"!==Il(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Al(e){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rl(this,Al(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=e.title,a=e.onTitleEdit,i=e.onSubmit,c=e.errors,s=e.onCancel;return o.a.createElement(pi.a,{id:"edit-partial-dialog",title:t._("Edit"),visible:!0,actions:[o.a.createElement(Ue.a,{id:"button-edit-resource-dialog-cancel",secondary:!0,enabled:!n,onClick:s,ariaLabel:t._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-edit-resource-dialog-save",primary:!0,isLoading:n,enabled:!n&&r.trim().length>0,onClick:i,ariaLabel:t._("Save")},o.a.createElement(x.Trans,{id:"Save"}))]},o.a.createElement(Tl.b,{id:"partial-name-textfield",label:t._("Name"),onChange:a,errorText:c[0],value:r,ariaLabel:t._("Name")}))}}])&&Pl(n.prototype,r),a&&Pl(n,a),t}(a.Component),Nl=Object(x.withI18n)()(kl),Dl="Invalid errors list",Ll=function(e){var t={};if(!e[0].path&&!e[0].locations)throw new Error(Dl);return e.forEach((function(e){var n=e.path?e.path.join("_"):"general_error";t[n]=e.message.split(":::")[1]})),t},Ml=function(e){var t=[];if(!e[0].path&&!e[0].locations)throw new Error(Dl);return e.forEach((function(e){var n=e.message.split(":::")[1];t.push(n)})),t},xl=function(e,t){if(!e[0].path&&!e[0].locations)throw new Error(Dl);var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(o.value.message.split(":::")[0]===t)return!0}}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return!1};function Fl(e){return(Fl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vl(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Gl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Vl(o,r,a,i,c,"next",e)}function c(e){Vl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ql(e){return(ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wl(e,t){return(Wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yl=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ql(t).call(this,e),n=!a||"object"!==Fl(a)&&"function"!==typeof a?Bl(r):a,Ql(Bl(Bl(n)),"onTitleEdit",(function(e){n.setState({title:e})})),Ql(Bl(Bl(n)),"onSubmit",Gl(regeneratorRuntime.mark((function e(){var t,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.i18n,a=t.onSubmit,o=g.a.merge({},n.props.partial,{title:n.state.title}),n.setState({errors:[]}),e.prev=3,e.next=6,Et.a.editPartials([o]);case 6:a(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),i=[r._("Error during edit of partial. Please try again.")];try{i=g.a.values(Ll(e.t0))}catch(c){H.b.warn(c)}n.setState({errors:i});case 14:case"end":return e.stop()}}),e,this,[[3,9]])})))),n.state={title:e.partial.title,errors:[]},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wl(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.onCancel;return o.a.createElement(Nl,{title:this.state.title,errors:this.state.errors,onTitleEdit:this.onTitleEdit,onCancel:n,isLoading:t,onSubmit:this.onSubmit})}}])&&Ul(n.prototype,r),a&&Ul(n,a),t}(a.Component),Hl=Object(x.withI18n)()(Yl),zl=function(e){var t=e.className,n=e.enabled,r=e.item,a=e.i18n,i=e.resultPartial;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--edit"),className:Ie()("".concat("content-list-item","-actions-menu--edit"),t),enabled:n,primaryText:a._("Edit"),leftIcon:o.a.createElement(zt.a,null,Je.a.EDIT),onClick:function(){Hn.a.showModal(o.a.createElement(Hl,{isLoading:!1,partial:i,onCancel:Hn.a.closeModal,onSubmit:Hn.a.closeModal}))}})};zl.defaultProps={enabled:!1},zl.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,resultPartial:M.a.object.isRequired};var Kl=Object(x.withI18n)()(zl),Xl=(n("leQN"),function(e){var t=e.className,n=e.enabled,r=e.item,a=e.loading,i=e.onClick,c=e.tooltip;return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-inline--toggle-included"),className:Ie()("".concat("content-list-item","-actions-inline--toggle-included"),t),ariaLabel:c.label,secondary:!0,isLoading:a,enabled:n&&!a,tooltip:c,onClick:function(){i(r)}},r.isIncluded?Je.a.STAR:Je.a.STAR_EMPTY)});Xl.defaultProps={enabled:!1,loading:!1},Xl.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.any.isRequired,item:M.a.object.isRequired,loading:M.a.bool,onClick:M.a.func.isRequired,tooltip:M.a.object.isRequired};var $l=Object(x.withI18n)()(Xl),Zl=(n("a2Z2"),function(e){var t=e.className,n=e.enabled,r=e.item,a=e.label,i=e.onClick,c=e.tooltip;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--toggle-included"),className:Ie()("".concat("content-list-item","-actions-menu--toggle-included"),t),enabled:n,primaryText:a,leftIcon:o.a.createElement(zt.a,null,r.isIncluded?Je.a.STAR_EMPTY:Je.a.STAR),tooltip:c,onClick:function(){i(r)}})});Zl.defaultProps={enabled:!1,onClick:function(){}},Zl.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.any.isRequired,item:M.a.object.isRequired,label:M.a.string.isRequired,onClick:M.a.func,tooltip:M.a.object.isRequired};var Jl=Object(x.withI18n)()(Zl),ed=function(e){var t=e.className,n=e.i18n,r=e.id,a=e.previewUrl,i=e.onClick,c=a?n._("Preview (New Tab)"):n._("Preview is not supported for this file type");return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(r,"]-actions-inline--launch"),className:Ie()("".concat("content-list-item","-actions-inline--launch"),t),enabled:Boolean(a),ariaLabel:c,tooltip:{label:c},onClick:function(){if(i(),a)return window.open(a,"_blank")}},Je.a.OPEN_IN_NEW)};ed.defaultProps={onClick:function(){},previewUrl:null},ed.propTypes={className:M.a.string,id:M.a.string.isRequired,i18n:M.a.object.isRequired,previewUrl:M.a.string,onClick:M.a.func};var td=Object(x.withI18n)()(ed),nd=function(e){var t=e.className,n=e.enabled,r=e.item,a=e.i18n;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(r.key,"]-actions-menu--launch"),className:Ie()("".concat("content-list-item","-actions-menu--launch"),t),enabled:n,primaryText:a._("Preview (New Tab)"),leftIcon:o.a.createElement(zt.a,null,Je.a.OPEN_IN_NEW),onClick:function(){var e=g.a.get(r,["attributes",Yu.PREVIEW_URL]);if(e)return window.open(e,"_blank")}})};nd.defaultProps={enabled:!1},nd.propTypes={className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired};var rd,ad=Object(x.withI18n)()(nd),od=n("a/gg"),id=n("bjo3");n("eCIM");function cd(e){return(cd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ud(e){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ld(e,t){return(ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pd="reflection-questions-work-list-item",md=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=ud(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==cd(a)&&"function"!==typeof a?dd(r):a,fd(dd(dd(n)),"onTextChange",(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fd(e,t,n[t])}))}return e}({},n.props.question,fd({isDirty:!0},id.a.ANSWER.TEXT,g.a.trimStart(e)));n.props.onChange&&n.props.onChange(t)})),fd(dd(dd(n)),"getAnswer",(function(){var e=n.props,t=e.i18n,r=e.question,a=e.readOnly,i=e.errorMessage,c=r[id.a.ANSWER.TEXT];return a?o.a.createElement("div",{className:pd+"-answer-text"},c||o.a.createElement("i",null,t._("(No response has been submitted)"))):o.a.createElement(ut.i,{id:pd+"["+r.dbId+"]",ariaLabel:t._("Edit Reflection Question Answer"),className:pd+"-answer-input",errorText:i,maxLength:id.c,maxRows:0,onChange:n.onTextChange,rows:1,required:!0,value:r[id.a.ANSWER.TEXT]})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ld(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.question,r=n[id.a.QUESTION.SORT]+1;return o.a.createElement("div",{key:pd+"["+n.dbId+"]",className:pd},o.a.createElement("div",{className:pd+"-index"},t._("{questionNumber}.",{questionNumber:r})),o.a.createElement("div",{className:pd+"-qa"},o.a.createElement("div",{className:pd+"-question"},n[id.a.QUESTION.TEXT]),o.a.createElement("div",{className:pd+"-answer"},o.a.createElement("div",{className:pd+"-answer-label"},t._("Response:")),this.getAnswer())))}}])&&sd(n.prototype,r),a&&sd(n,a),t}(a.Component);md.propTypes={errorMessage:M.a.string,onChange:M.a.func,question:M.a.shape((rd={},fd(rd,id.a.QUESTION.SORT,M.a.number.isRequired),fd(rd,id.a.QUESTION.TEXT,M.a.string.isRequired),fd(rd,id.a.ANSWER.TEXT,M.a.string),rd)).isRequired,readOnly:M.a.bool},md.defaultProps={errorMessage:null,readOnly:!1};var bd=Object(x.withI18n)()(md);function yd(e){return(yd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gd(e,t){return!t||"object"!==yd(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ed(e){return(Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wd(e,t){return(wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gd(this,Ed(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wd(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.answers;return o.a.createElement("div",{className:"reflection-answers-container"},o.a.createElement("div",{className:"reflection-answers"},e.map((function(e,t){var n,r=(vd(n={},id.a.QUESTION.SORT,t),vd(n,id.a.QUESTION.TEXT,e.question[id.a.QUESTION.TEXT]),vd(n,id.a.ANSWER.TEXT,e[id.a.ANSWER.TEXT]),n);return o.a.createElement(bd,{key:"reflection-answers-item["+t+"]",question:r,readOnly:!0})}))))}}])&&hd(n.prototype,r),a&&hd(n,a),t}(a.Component);Sd.propTypes={answers:M.a.array.isRequired},Sd.defaultProps={};var Od=Sd;function Cd(e){return(Cd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Id(e,t){return(Id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Rd="reflection-answers-dialog",Ad=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Td(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Cd(a)&&"function"!==typeof a?Pd(r):a,i=Pd(Pd(n)),s=function(e){var t=n.props,r=t.i18n,a=t.answers,i=t.needAnswers,c=t.onClose;return o.a.createElement(Fr.a,{id:Rd,contentClassName:Rd+"-content",dialogClassName:Rd+"-container",title:r._("Reflection Questions"),visible:!0,fullPage:e,onClose:c,actions:[o.a.createElement(Ue.a,{id:"button-reflect-questions-dialog-close",primary:!0,ariaLabel:r._("Close"),onClick:c},r._("Close"))]},o.a.createElement("div",{className:Rd},i?r._("There are no answers saved."):o.a.createElement(Od,{answers:a})))},(c="getDialogComponent")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Id(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.visible?o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)),o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1))):null}}])&&_d(n.prototype,r),a&&_d(n,a),t}(a.Component);Ad.propTypes={answers:M.a.array,needAnswers:M.a.bool,onClose:M.a.func.isRequired,visible:M.a.bool},Ad.defaultProps={visible:!1};var jd=Object(x.withI18n)()(Object(c.b)((function(e,t){return{answers:t.answers?t.answers:et.getReflectionAnswers(e),needAnswers:g.a.has(t,"needAnswers")?t.needAnswers:et.needReflectionAnswers(e)}}))(Ad)),kd=n("v6po"),Nd=function(e){var t=e.activityId,n=e.className,r=e.enabled,a=e.i18n,i=e.item,c=e.termClassId;return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(i.key,"]-actions-inline--preview"),className:Ie()("".concat("content-list-item","-actions-inline--preview"),n),enabled:r,tooltip:{label:a._("Preview")},ariaLabel:a._("Preview"),onClick:function(){i.type===Qu.REFLECTION_ANSWERS?Hn.a.showModal(o.a.createElement(jd,{visible:!0,onClose:Hn.a.closeModal})):i.type!==Qu.VIDEO&&i.type!==Qu.MEETING||Hn.a.showModal(o.a.createElement(od.a,{onCancel:Hn.a.closeModal,usageContext:kd.a.STUDENT_RESULT_PARTIAL,termClassId:c,activityId:t,media:i.media}))}},Je.a.PREVIEW)};Nd.defaultProps={enabled:!1},Nd.propTypes={activityId:M.a.number.isRequired,className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,termClassId:M.a.number.isRequired};var Dd=Object(x.withI18n)()(Nd),Ld=function(e){var t=e.activityId,n=e.className,r=e.enabled,a=e.i18n,i=e.item,c=e.termClassId;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(i.key,"]-actions-menu--preview"),className:Ie()("".concat("content-list-item","-actions-menu--preview"),n),enabled:r,leftIcon:o.a.createElement(zt.a,null,Je.a.PREVIEW),primaryText:a._("Preview"),onClick:function(){i.type===Qu.REFLECTION_ANSWERS?Hn.a.showModal(o.a.createElement(jd,{visible:!0,onClose:Hn.a.closeModal})):i.type!==Qu.VIDEO&&i.type!==Qu.MEETING||Hn.a.showModal(o.a.createElement(od.a,{onCancel:Hn.a.closeModal,usageContext:kd.a.STUDENT_RESULT_PARTIAL,termClassId:c,activityId:t,media:i.media}))}})};Ld.defaultProps={enabled:!1},Ld.propTypes={activityId:M.a.number.isRequired,className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,termClassId:M.a.number.isRequired};var Md=Object(x.withI18n)()(Ld),xd=function(e){var t=e.answers,n=e.className,r=e.enabled,a=e.i18n,i=e.item,c=e.needAnswers;return o.a.createElement(Ue.c,{id:"".concat("content-list-item","[").concat(i.key,"]-actions-inline--preview"),className:Ie()("".concat("content-list-item","-actions-inline--preview"),n),enabled:r,tooltip:{label:a._("Preview")},ariaLabel:a._("Preview"),onClick:function(){Hn.a.showModal(o.a.createElement(jd,{visible:!0,answers:t,needAnswers:c,onClose:Hn.a.closeModal}))}},Je.a.PREVIEW)};xd.defaultProps={enabled:!1},xd.propTypes={answers:M.a.array.isRequired,className:M.a.string,enabled:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,needAnswers:M.a.bool.isRequired};var Fd=Object(x.withI18n)()(xd);n("WWkf");function Vd(e){return(Vd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ud(e){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qd(e,t){return(qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qd=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ud(t).call(this,e),n=!a||"object"!==Vd(a)&&"function"!==typeof a?Wd(r):a,Bd(Wd(Wd(n)),"onCommentChange",(function(e){n.setState({commentText:e})})),n.commentTextFieldRef=o.a.createRef(),n.state={commentText:e.comment.commentText},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qd(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame((function(){e.commentTextFieldRef.current.focus()}))}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.i18n,r=e.loading,a=e.onConfirm,i=this.state.commentText,c=Object(lt.f)(i),s=[o.a.createElement(mi.a,{id:"submission-comment-edit-dialog-cancel",key:"submission-comment-edit-dialog-cancel",secondary:!0,enabled:!r,onClick:Hn.a.closeModal},n._("Cancel")),o.a.createElement(mi.a,{id:"submission-comment-edit-dialog-submit",key:"submission-comment-edit-dialog-submit",primary:!0,isLoading:r,enabled:!r&&c.isValid,onClick:function(){a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bd(e,t,n[t])}))}return e}({},t,{commentText:i}))}},n._("Submit"))];return o.a.createElement(pi.a,{id:"submission-comment-edit-dialog",className:"submission-comment-edit-dialog",title:n._("Edit Comment"),visible:!0,actions:s},o.a.createElement(ut.i,{id:"submission-comment-edit-textfield",ariaLabel:n._("Comment"),ref:this.commentTextFieldRef,enabled:!0,errorText:c.exceedsLimit?n._("Exceeds {0} characters.",{0:c.maxLength}):"",placeholder:n._("Comment..."),maxLength:c.maxLength,maxRows:4,onChange:this.onCommentChange,required:!0,rows:1,value:i}))}}])&&Gd(n.prototype,r),a&&Gd(n,a),t}(o.a.PureComponent);Qd.defaultProps={loading:!1},Qd.propTypes={comment:M.a.object.isRequired,i18n:M.a.object.isRequired,loading:M.a.bool,onConfirm:M.a.func.isRequired};var Yd=Object(x.withI18n)()(Qd);function Hd(e){return(Hd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xd(e){return(Xd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $d(e,t){return($d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ef={loading:!1},tf=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Xd(t).call(this,e),n=!a||"object"!==Hd(a)&&"function"!==typeof a?Zd(r):a,Jd(Zd(Zd(n)),"onConfirm",(function(e){n.setState({loading:!0},(function(){n.handleCallback(e)}))})),Jd(Zd(Zd(n)),"handleCallback",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.onConfirm,e.next=3,r(t);case 3:Hn.a.closeModal();case 4:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zd(o,r,a,i,c,"next",e)}function c(e){zd(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Jd(e,t,n[t])}))}return e}({},ef),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state.loading,t=this.props.comment;return o.a.createElement(Yd,{comment:t,loading:e,visible:!0,onConfirm:this.onConfirm})}}])&&Kd(n.prototype,r),a&&Kd(n,a),t}(o.a.PureComponent);tf.propTypes={comment:M.a.object.isRequired,onConfirm:M.a.func.isRequired};var nf=Object(x.withI18n)()(tf),rf=n("KhDq");n("kwFD");function af(e){return(af="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cf(e,t){return!t||"object"!==af(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sf(e){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uf(e,t){return(uf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cf(this,sf(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.completedClassName,r=e.interval,a=e.intervalClassName,i=e.label,c=e.labelClassName,s=e.showIntervals,u=e.maxValue,l=e.value,d=[];if(s&&r)for(var f=Math.floor(u/r),p=1;p<f;p++){var m=Math.round(p/f*100);d.push(o.a.createElement("div",{key:"stepped-progressinterval-item["+p+"]",className:Ie()("stepped-progress-interval-item",n),style:{left:m+"%"}}))}var b=Math.min(100,Math.round(l/u*100));return o.a.createElement("div",{className:Ie()("stepped-progress-container","md-paper--1",t)},o.a.createElement("div",{className:Ie()("stepped-progress-interval",a)},d),o.a.createElement("div",{className:Ie()("stepped-progress-complete",n),style:{width:b+"%"}}),o.a.createElement("div",{className:Ie()("stepped-progress-label",c)},i))}}])&&of(n.prototype,r),a&&of(n,a),t}(a.Component);lf.propTypes={className:M.a.string,completedClassName:M.a.string,intervalClassName:M.a.string,labelClassName:M.a.string,interval:M.a.number,label:M.a.string,maxValue:M.a.number,showIntervals:M.a.bool,value:M.a.number},lf.defaultProps={interval:1,showIntervals:!0,maxValue:10,value:0};var df=Object(Ec.c)(lf),ff=n("wRmV"),pf=n("L2DV"),mf=n("6ZeI"),bf=n("sRqO"),yf=(n("CPhW"),function(e){var t=e.id,n=e.media,r=e.onPlayVideo;return o.a.createElement("div",{className:Ie()("video-poster-container"),onContextMenu:function(e){return e.preventDefault()}},o.a.createElement("video",{src:n.srcUrl}),o.a.createElement(bf.a,{id:"".concat(t,"--play-button"),play:r}))});yf.propTypes={id:M.a.string.isRequired,media:M.a.object.isRequired,onPlayVideo:M.a.func.isRequired};var vf=Object(x.withI18n)()(yf);n("1OwP");function hf(e){return(hf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gf(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wf(e){return(wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sf(e,t){return(Sf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Of(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _f="content-list-item",Tf=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=wf(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==hf(a)&&"function"!==typeof a?Of(r):a,Cf(Of(Of(n)),"renderIcon",(function(){var e=n.props,t=e.item,r=e.onPlayVideo,a=t.config,i=a.isProcessing,c=a.hasProcessingError;if(n.hasVideoPoster()){var s=gl.getVideoPlayerIdForWorkItem(t);return o.a.createElement(vf,{id:"video-thumbnail-".concat(s),media:t.media,onPlayVideo:r.bind(null,s)})}var u=null;if(c)u=Je.a.ERROR;else if(i)u=Je.a.HOURGLASS_EMPTY;else switch(t.type){case Qu.FILE:u=Je.a.DESCRIPTION;break;case Qu.IMAGE:u=Je.a.PHOTO;break;case Qu.LINK:u=Je.a.LINK;break;case Qu.VIDEO:u=Je.a.VIDEOCAM;break;case Qu.MEETING:u=Je.a.EVENT;break;case Qu.REFLECTION_ANSWERS:u=Je.a.LIST_NUMBERED}return o.a.createElement("div",{className:"".concat(_f,"-icon")},o.a.createElement(zt.a,{className:"".concat(_f,"-type-icon")},u))})),Cf(Of(Of(n)),"hasVideoPoster",(function(){var e=n.props,t=e.item;return e.showVideoThumbnail&&(t.type===Qu.VIDEO||t.type===Qu.MEETING)})),Cf(Of(Of(n)),"renderName",(function(){var e=n.props.item,t=n.getItemLabel(e);return o.a.createElement("div",{className:"".concat(_f,"-name")},o.a.createElement("span",{className:"".concat(_f,"-name--label")},t.primary),t.secondary&&o.a.createElement("span",{className:"".concat(_f,"-name--desc")},t.secondary))})),Cf(Of(Of(n)),"getItemLabel",(function(){var e=n.props,t=e.i18n,r=e.item,a=r.config,o=a.isProcessing,i=a.hasProcessingError,c=r.name,s="";return r.type===Qu.REFLECTION_ANSWERS&&(c=t._("Reflection Answers")),i?(c=t._('Error processing "{0}"',{0:r.name}),r.type===Qu.MEETING?s=t._("An error occured processing this meeting."):r.type===Qu.VIDEO&&(s=t._("An error occured processing this video."))):o&&(c=t._('Processing "{0}"...',{0:r.name}),r.type===Qu.MEETING?s=t._("We are processing this meeting. Please check back later."):r.type===Qu.VIDEO&&(s=t._("We are processing this video. Please check back later."))),{primary:c,secondary:s}})),Cf(Of(Of(n)),"renderPrimaryActions",(function(){var e=n.props.item.config.actions;return 0===e.primary.length?null:o.a.createElement("div",{className:Ie()("".concat(_f,"-actions"),"".concat(_f,"-actions--primary"))},e.primary)})),Cf(Of(Of(n)),"renderSecondaryActions",(function(){var e=n.props.item,t=e.config.actions,r=gf(t.secondary);if(0===t.secondary.length)return null;var a=["item-sep"];return 0===g.a.get(t,"overflow.actions",[]).length&&a.push("item-sep--hidden"),r.push(o.a.createElement("div",{key:"work-item-action-sep[".concat(e.key,"]"),className:Ie()(a)})),o.a.createElement("div",{className:Ie()("".concat(_f,"-actions"),"".concat(_f,"-actions--secondary"))},r)})),Cf(Of(Of(n)),"renderOverflowActions",(function(){var e=n.props,t=e.item,r=e.i18n,a=t.config.actions.overflow;if(!a)return null;var i=a.actions||[];return o.a.createElement(Ue.e,{id:"".concat(_f,"[").concat(t.key,"]-actions-menu"),className:Ie()("".concat(_f,"-actions-menu"),0===i.length?"".concat(_f,"-actions-menu--hidden"):""),ariaLabel:r._("Menu"),icon:!0,enabled:Boolean(a.enabled&&i.length>0),menuItems:i},Je.a.MENU_VERT)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.item,t=e.key,n=e.isIncluded,r=e.config,a=r.isProcessing,i=r.hasProcessingError;return o.a.createElement("div",{id:"".concat(_f,"[").concat(t,"]"),tabIndex:0,"aria-label":this.getItemLabel().primary,className:Ie()(_f,"".concat(_f,"--").concat(n?"included":"excluded"),a&&"".concat(_f,"--processing"),i&&"".concat(_f,"--processing-error"),this.hasVideoPoster()&&"".concat(_f,"--has-video-poster"))},this.renderPrimaryActions(),this.renderIcon(),o.a.createElement("div",{className:"".concat(_f,"-details")},this.renderName(),o.a.createElement("div",{className:"".concat(_f,"-actions")},this.renderSecondaryActions(),this.renderOverflowActions())))}}])&&Ef(n.prototype,r),a&&Ef(n,a),t}(o.a.PureComponent);Tf.propTypes={i18n:M.a.any.isRequired,item:M.a.object,onPlayVideo:M.a.func,showVideoThumbnail:M.a.bool,workItemConfiguration:M.a.func},Tf.defaultProps={item:{},onPlayVideo:function(){},showVideoThumbnail:!1,workItemConfiguration:function(){}};var If=Object(x.withI18n)()(Tf);n("SZKS");function Pf(e){return(Pf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Af(e){return(Af=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jf(e,t){return(jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Df="animate-playback",Lf="video-playback",Mf="meeting-playback",xf="dual-stream-playback",Ff=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Af(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Pf(a)&&"function"!==typeof a?kf(r):a,Nf(kf(kf(n)),"getVideoPlayerClassname",(function(){var e=n.props.selectedPlaybackWorkItem;if(e){if(e.type===Qu.MEETING)return Mf;if(e.type===Qu.VIDEO){var t=e.attributes;return t[Yu.DOWNLOAD_URL]&&t[Yu.DOWNLOAD_SECONDARY_URL]?xf:Lf}}return null})),Nf(kf(kf(n)),"getMediaComponent",(function(){var e=n.props,t=e.activityId,r=e.commentMarks,a=e.onHideVideoPlayer,i=e.onPlayVideo,c=e.termClassId,s=e.i18n,u=e.selectedPlaybackWorkItem;if(!u)return null;var l=gl.getVideoPlayerIdForWorkItem(u);return o.a.createElement("div",{className:Ie()("submission-review-video-player-container",Df,n.getVideoPlayerClassname())},o.a.createElement(Ue.c,{onClick:a,className:"submission-review-video-player-close-button",title:s._("Close")},Je.a.CLOSE),o.a.createElement(mf.a,{id:l,activityId:t,autoplay:!0,marks:r,media:u.media,onPlay:i,playerId:l,termClassId:c,usageContext:kd.a.STUDENT_RESULT}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onShowVideoPlayer,r=e.selectedPlaybackWorkItem,a=e.workItems;return o.a.createElement(Xt.a,{zDepth:1,className:Ie()("submission-review-assets-container",this.getVideoPlayerClassname(),t)},o.a.createElement("div",{className:Ie()("submission-review-asset-items")},r&&this.getMediaComponent(),g.a.map(a,(function(e){return o.a.createElement(If,{item:e,key:"content-list-item-[".concat(e.key,"]"),onPlayVideo:n,showVideoThumbnail:!0})}))))}}])&&Rf(n.prototype,r),a&&Rf(n,a),t}(o.a.PureComponent);Ff.defaultProps={commentMarks:[],onPlayVideo:function(){},selectedPlaybackWorkItem:null},Ff.propTypes={activityId:M.a.number.isRequired,className:M.a.string,commentMarks:M.a.array,i18n:M.a.any.isRequired,onHideVideoPlayer:M.a.func.isRequired,onShowVideoPlayer:M.a.func.isRequired,onPlayVideo:M.a.func,selectedPlaybackWorkItem:M.a.object,termClassId:M.a.number.isRequired,workItems:M.a.array.isRequired};var Vf=Object(x.withI18n)()(Ff),Gf=n("G/cw"),Uf=n("8For"),qf=(n("uVrG"),n("H9kt"));function Wf(e){return(Wf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qf(e){return(Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yf(e,t){return(Yf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var zf="review-comment",Kf=zf+"-actions",Xf="review-delete-comment-button",$f="review-edit-comment-button",Zf=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Qf(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Wf(a)&&"function"!==typeof a?Hf(r):a,i=Hf(Hf(n)),s=function(){var e=n.props,t=e.i18n,r=e.comment,a=e.onDeleteComment,i=e.onEditComment,c=e.canDelete,s=e.canEdit,u=e.customActions;return r.isDeleted?null:u?o.a.createElement("div",{className:Kf},u):c||s?o.a.createElement("div",{className:Kf},s&&o.a.createElement(Ue.c,{id:"button-comment-edit",className:$f,ariaLabel:t._("Edit Comment"),onClick:function(){i(r)}},Je.a.EDIT),c&&o.a.createElement(Ue.c,{id:"button-comment-delete",className:Xf,ariaLabel:t._("Delete Comment"),onClick:function(){a(r)}},Je.a.DELETE)):null},(c="getActions")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.comment,r=e.onSyncTimeClick,a=e.onDeleteComment,i=e.canDelete,c=e.showCommenterName,s=e.showSyncTime,u=e.termClassId,l=e.activityId,d=e.usageContext,f=null;n&&null!==n.syncTime&&s&&(f=o.a.createElement("a",{className:"review-comment-synctime",onClick:function(){r(n.syncTime)}},Er.l(n.syncTime)));var p=t._(qf.a.COMMENT_DELETED),m=null;return c&&(m=o.a.createElement("span",{className:"review-comment-commenter"},Object(lt.a)(n,t))),n.commentMedia?o.a.createElement("div",{className:Ie()(zf,"review-comment-media-container")},o.a.createElement("div",{className:"review-comment-media-text"},f,m,o.a.createElement("div",{className:"review-comment-date"},o.a.createElement(Gf.a,{unixTime:n.updatedAt}))),o.a.createElement("div",{className:"review-comment-media"},(n.commentMedia.processingStatus===ml.a.PROGRESS||n.commentMedia.processingStatus===ml.a.UNREACHABLE)&&o.a.createElement("div",{className:"review-comment-media-processing"},o.a.createElement(Uf.a,{ariaLabel:t._("Video Processing, icon")},Je.a.HOURGLASS_EMPTY),o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Processing..."}))),n.commentMedia.processingStatus===ml.a.ERROR&&o.a.createElement("div",{className:"review-comment-media-processing"},o.a.createElement(Uf.a,{ariaLabel:t._("Video Processing Error, icon")},Je.a.ERROR),o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Processing error"}))),n.commentMedia.processingStatus===ml.a.READY&&o.a.createElement("div",{className:"review-comment-media-player"},o.a.createElement(mf.a,{id:"peer-comment-media[".concat(n.dbId,"]"),playerId:"Peer comment video player "+n.dbId,media:n.commentMedia,termClassId:u,activityId:l,usageContext:d})),i&&!n.isDeleted?o.a.createElement("div",{className:Kf},o.a.createElement(Ue.c,{id:"button-comment-delete",className:Xf,ariaLabel:t._("Delete Comment"),onClick:function(){a(n)}},Je.a.DELETE)):null)):o.a.createElement("div",{className:zf},o.a.createElement("div",{className:"review-comment-text-container"},f,m,o.a.createElement("div",null,o.a.createElement("p",{className:Ie()("review-comment-text",n.isDeleted?"comment-deleted":null)},n.isDeleted?p:n.commentText)),o.a.createElement("div",null,o.a.createElement(Gf.a,{unixTime:n.updatedAt}))),this.getActions())}}])&&Bf(n.prototype,r),a&&Bf(n,a),t}(a.Component),Jf=Object(x.withI18n)()(Zf);Zf.propTypes={canDelete:M.a.bool.isRequired,canEdit:M.a.bool.isRequired,comment:M.a.object.isRequired,customActions:M.a.any,onSyncTimeClick:M.a.func.isRequired,onDeleteComment:M.a.func.isRequired,onEditComment:M.a.func.isRequired,showCommenterName:M.a.bool.isRequired,showSyncTime:M.a.bool,termClassId:M.a.number,activityId:M.a.number,usageContext:M.a.oneOf([kd.a.ACTIVITY_COMMENTARY,kd.a.ACTIVITY_OVERVIEW,kd.a.COMMENT,kd.a.DIRECT_LIBRARY,kd.a.FEEDBACK,kd.a.INTERACTIVE_VIDEO,kd.a.PROFILE,kd.a.QA_QUESTION,kd.a.STUDENT_RESULT,kd.a.STUDENT_RESULT_PARTIAL]).isRequired},Zf.defaultProps={showSyncTime:!0};n("VJ5r");function ep(e){return(ep="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e){return(np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rp(e,t){return(rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function op(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ip={message:""},cp=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=np(t).call(this,e),n=!a||"object"!==ep(a)&&"function"!==typeof a?ap(r):a,op(ap(ap(n)),"scrollCommentsToBottom",(function(){var e=n.commentsContainer.current;e&&(e.scrollTop=e.scrollHeight)})),op(ap(ap(n)),"showPeerReviewReport",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Peer Reviews"),rubricEvaluations:e}))})),op(ap(ap(n)),"getCommentPresetItems",(function(){var e=n.props.commentPresets,t=n.state.message,r=g.a.clone(e),a=[];if(t&&(r=g.a.filter(r,(function(e){return-1!==e.commentText.toLowerCase().indexOf(t.toLowerCase())}))),r)for(var o=function(e){a.push({className:"feedback-text-dropdown-item",contentClassName:"feedback-text-dropdown-item-text",tileClassName:"feedback-text-dropdown-item-tile",primaryText:r[e].commentText,onClick:function(){return n.onPresetMessageChange(r[e].commentText)}})},i=0;i<r.length;i++)o(i);return a})),op(ap(ap(n)),"getComments",(function(){var e=n.props,t=e.comments,r=e.i18n,a=e.termClassId,i=e.activityId,c=e.getCommentConfig,s=e.onEditComment,u=e.onDeleteComment,l=e.onSyncTimeClick;return!t||t&&0===t.length?o.a.createElement("div",{className:"submission-review-comments no-comments",ref:n.commentsContainer},o.a.createElement("span",{className:"card-placeholder-text"},r._("No comments"))):o.a.createElement("div",{className:"submission-review-comments",ref:n.commentsContainer},t&&t.map((function(e){var t=c(e);return o.a.createElement(Jf,{key:"comment"+e.dbId,comment:e,showCommenterName:!0,canEdit:t.canEdit,canDelete:t.canDelete,termClassId:a,activityId:i,usageContext:kd.a.COMMENT,onSyncTimeClick:l,onDeleteComment:u,onEditComment:s,customActions:t.customActions})})))})),op(ap(ap(n)),"onAddVideoComment",(function(){(0,n.props.onAddVideoComment)()})),op(ap(ap(n)),"onCommentChange",(function(e){(0,n.props.onCommentChange)(e),n.setState({message:e})})),op(ap(ap(n)),"onPresetMessageChange",(function(e){(0,n.props.onPresetMessageChange)(e),n.setState({message:""})})),op(ap(ap(n)),"onSubmitComment",(function(){(0,n.props.onSubmitComment)(n.state.message),n.setState({message:""})})),op(ap(ap(n)),"getSubmitSection",(function(){var e=n.state.message,t=n.props,r=t.activityCommentIsLoading,a=t.isCommentingAnonymous,i=t.onPresetDropdownVisibilityChange,c=t.i18n,s=Object(lt.f)(e);r&&n._previousActivityCommentIsLoading&&requestAnimationFrame((function(){n.commentTextFieldRef.current.focus()})),n._previousActivityCommentIsLoading=r;var u=null;return lc.f()||(u=lc.d()?c._("(\\u2318 + Enter) to Submit"):c._("(Ctrl + Enter) to Submit")),o.a.createElement("div",{className:"submission-review-comment-submit-section"},!a&&o.a.createElement(Ue.c,{id:"submission-review-add-video-comment-btn",enabled:!r,className:"add-video-comment-button",ariaLabel:c._("Add Video"),onClick:n.onAddVideoComment},Je.a.VIDEO_ADD),o.a.createElement(ut.j,{ref:n.commentTextFieldRef,id:"submission-review-comment-preset-dropdown",className:"comment-preset-dropdown",listClassName:"comment-preset-dropdown-list",ariaLabel:c._("Comment"),enabled:!r,errorText:s.exceedsLimit?c._("Exceeds {0} characters.",{0:s.maxLength}):"",helpText:u,helpOnFocus:!0,maxLength:s.maxLength,maxRows:2,menuItems:n.getCommentPresetItems(),onDropdownVisibilityChange:i,onTextChange:n.onCommentChange,onSubmit:n.onSubmitComment,placeholder:c._("Comment..."),required:!s.isEmpty,rows:1,toggleQuery:".md-text-field-container",value:e}),o.a.createElement(Ue.c,{id:"submission-review-comment-send-btn",enabled:!r&&s.isValid,className:"send-comment-button",isLoading:r,onClick:n.onSubmitComment},Je.a.SEND))})),n.state=ip,n._previousActivityCommentIsLoading=!1,n.commentTextFieldRef=o.a.createRef(),n.commentsContainer=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rp(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollCommentsToBottom()}},{key:"componentDidUpdate",value:function(){this.props.scrollCommentsToBottom&&this.scrollCommentsToBottom()}},{key:"render",value:function(){var e=this.props,t=e.assessmentRatingComponent,n=e.className;return o.a.createElement("div",{className:Ie()("submission-review-comments-container",n)},this.getComments(),this.getSubmitSection(),t)}}])&&tp(n.prototype,r),a&&tp(n,a),t}(o.a.PureComponent);cp.defaultProps={activityCommentIsLoading:!1,assessmentRatingComponent:null,comments:[],commentPresets:[],isCommentingAnonymous:!1,onPresetMessageChange:function(){},onPresetDropdownVisibilityChange:function(){},scrollCommentsToBottom:!1},cp.propTypes={activityCommentIsLoading:M.a.bool,activityId:M.a.number.isRequired,assessmentRatingComponent:M.a.any,className:M.a.string,comments:M.a.array,commentPresets:M.a.array,getCommentConfig:M.a.func.isRequired,i18n:M.a.any.isRequired,isCommentingAnonymous:M.a.bool,onAddVideoComment:M.a.func.isRequired,onCommentChange:M.a.func.isRequired,onDeleteComment:M.a.func.isRequired,onEditComment:M.a.func.isRequired,onPresetMessageChange:M.a.func,onPresetDropdownVisibilityChange:M.a.func,onSubmitComment:M.a.func.isRequired,onSyncTimeClick:M.a.func.isRequired,scrollCommentsToBottom:M.a.bool,termClassId:M.a.number.isRequired};var sp=Object(x.withI18n)()(Object(s.a)(cp));n("FC0G");function up(e){return(up="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dp(e){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fp(e,t){return(fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bp={selectedPlaybackWorkItem:null},yp=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=dp(t).call(this,e),n=!a||"object"!==up(a)&&"function"!==typeof a?pp(r):a,mp(pp(pp(n)),"getCommentMarks",(function(){var e=n.props.comments,t=[];return e&&e.forEach((function(e){e&&null!==e.syncTime&&t.push({timestamp:e.syncTime})})),t})),mp(pp(pp(n)),"getSelectedVideoPlayerId",(function(){var e=n.state.selectedPlaybackWorkItem,t=null;return e&&(t=gl.getVideoPlayerIdForWorkItem(e)),t})),mp(pp(pp(n)),"hideVideoPlayer",(function(){n.setState({selectedPlaybackWorkItem:null})})),mp(pp(pp(n)),"onAddVideoComment",(function(){(0,n.props.onAddVideoComment)(n.getSelectedVideoPlayerId())})),mp(pp(pp(n)),"onCommentChange",(function(e){(0,n.props.onCommentChange)(e,n.getSelectedVideoPlayerId())})),mp(pp(pp(n)),"onPresetDropdownVisibilityChange",(function(e){(0,n.props.onPresetDropdownVisibilityChange)(e,n.getSelectedVideoPlayerId())})),mp(pp(pp(n)),"onPresetMessageChange",(function(e){(0,n.props.onPresetMessageChange)(e,n.getSelectedVideoPlayerId())})),mp(pp(pp(n)),"onSubmitComment",(function(e){(0,n.props.onSubmitComment)(e,n.getSelectedVideoPlayerId())})),mp(pp(pp(n)),"onPlayVideo",(function(e){for(var t=n.props.workItems,r=0;r<t.length;r++){var a=t[r];if(a.type===Qu.VIDEO||a.type===Qu.MEETING)gl.getVideoPlayerIdForWorkItem(a)===e&&n.setState({selectedPlaybackWorkItem:a})}})),mp(pp(pp(n)),"onSyncTimeClick",(function(e){var t=n.props,r=t.onSyncTimeClick,a=t.workItems,o=g.a.find(a,{type:Qu.VIDEO||Qu.MEETING}),i=gl.getVideoPlayerIdForWorkItem(o);o&&n.setState({selectedPlaybackWorkItem:o}),r(e,i)})),n.state=bp,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fp(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.activityCommentIsLoading,r=e.assessmentRatingComponent,a=e.assetsClassName,i=e.className,c=e.comments,s=e.commentsClassName,u=e.commentPresets,l=e.getCommentConfig,d=e.isCommentingAnonymous,f=e.onDeleteComment,p=e.onEditComment,m=e.onSubmissionViewed,b=e.scrollCommentsToBottom,y=e.termClassId,v=e.workItems,h=this.state.selectedPlaybackWorkItem;return o.a.createElement("div",{className:Ie()("submission-review-container",i)},o.a.createElement(Vf,{activityId:t,className:a,commentMarks:this.getCommentMarks(),onHideVideoPlayer:this.hideVideoPlayer,onShowVideoPlayer:this.onPlayVideo,onPlayVideo:m,selectedPlaybackWorkItem:h,termClassId:y,workItems:v}),o.a.createElement(sp,{activityId:t,activityCommentIsLoading:n,assessmentRatingComponent:r,comments:c,commentsClassName:s,commentPresets:u,getCommentConfig:l,isCommentingAnonymous:d,onAddVideoComment:this.onAddVideoComment,onCommentChange:this.onCommentChange,onDeleteComment:f,onEditComment:p,onPresetDropdownVisibilityChange:this.onPresetDropdownVisibilityChange,onPresetMessageChange:this.onPresetMessageChange,onSubmitComment:this.onSubmitComment,onSyncTimeClick:this.onSyncTimeClick,scrollCommentsToBottom:b,termClassId:y}))}}])&&lp(n.prototype,r),a&&lp(n,a),t}(o.a.PureComponent);yp.defaultProps={activityCommentIsLoading:!1,assessmentRatingComponent:null,comments:[],commentPresets:[],isCommentingAnonymous:!1,onPresetDropdownVisibilityChange:function(){},onPresetMessageChange:function(){},onSubmissionViewed:function(){},scrollCommentsToBottom:!1},yp.propTypes={activityCommentIsLoading:M.a.bool,activityId:M.a.number.isRequired,assetsClassName:M.a.string,assessmentRatingComponent:M.a.any,className:M.a.string,comments:M.a.array,commentsClassName:M.a.string,commentPresets:M.a.array,getCommentConfig:M.a.func.isRequired,isCommentingAnonymous:M.a.bool,onAddVideoComment:M.a.func.isRequired,onCommentChange:M.a.func.isRequired,onDeleteComment:M.a.func.isRequired,onEditComment:M.a.func.isRequired,onPresetDropdownVisibilityChange:M.a.func,onPresetMessageChange:M.a.func,onSubmissionViewed:M.a.func,onSubmitComment:M.a.func.isRequired,onSyncTimeClick:M.a.func.isRequired,scrollCommentsToBottom:M.a.bool,termClassId:M.a.number.isRequired,workItems:M.a.array.isRequired};var vp=yp;n("hH2E");function hp(e){return(hp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gp(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wp(e){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sp(e,t){return(Sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Op(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _p=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=wp(t).call(this,e),n=!a||"object"!==hp(a)&&"function"!==typeof a?Op(r):a,Cp(Op(Op(n)),"selectedResultChanged",(function(e){var t=n.props.onSelectedResultChange;n.submissionReview.current&&n.submissionReview.current.hideVideoPlayer(),t(e)})),Cp(Op(Op(n)),"onNextPeerReview",(function(){var e=n.props.availablePeerReviews;e&&n.selectedResultChanged(e[0].submitter.dbId)})),Cp(Op(Op(n)),"getPeerSelectField",(function(){var e=n.props,t=e.activityType,r=e.availablePeerReviews,a=e.filteredReviews,i=e.isFiveStarEnabled,c=e.isRubricReviewEnabled,s=e.i18n,u=e.peerReviewType,l=e.selectedResult,d=g.a.get(l,"submitter.dbId"),f=[],p=t===pc.b.GROUP_PRESENTATION?s._("Select Group"):s._("Select Student"),m=[];return u===pf.a.SYSTEM?((f=gp(a)).push(g.a.find(r,{submitter:{dbId:d}})),f=g.a.uniqBy(f,"submitter.dbId")):u===pf.a.STUDENT&&(f=gp(r)),(f=g.a.compact(f))&&(m=f.map((function(e){var t={value:e.submitter.dbId};return t.label=Object(lt.b)(e,s),n.isReviewedPeerReview(e.submitter.dbId)&&cc(e,i,c)&&(t.className="has-review"),t}))),m.length>0?o.a.createElement("div",{className:"peer-review-student-select-container"},o.a.createElement("h5",null,s._("Peer:")),o.a.createElement(ut.e,{id:"review-student-select",className:"peer-review-student-select-field",label:"",ariaLabel:s._("Select Student for Peer Review"),value:d||"",placeholder:p,onChange:n.selectedResultChanged,sameWidth:!1,menuItems:m})):null})),Cp(Op(Op(n)),"isQuantitativeReviewEnabled",(function(){var e=n.props,t=e.isFiveStarEnabled,r=e.isRubricReviewEnabled;return t||r})),Cp(Op(Op(n)),"getCardHeader",(function(){var e=n.props,t=e.filteredReviews,r=e.peerReviewRequiredCount,a=e.isFiveStarEnabled,i=e.isRubricReviewEnabled,c=e.i18n,s=[];t&&t.map((function(e){return cc(e,a,i)&&s.push(e),!0}));var u=s.length,l=["peer-review-header-progress-label"],d=c._("Reviewed: {completedCount}",{completedCount:u}),f=null;return r&&(u>=r?(l.push("label--bold"),d=c._("Completed"),f=o.a.createElement(rf.b,{className:"peer-review-header-progress-icon",type:rf.a.SUCCESS,enableTooltip:!1})):(d=c._("Reviewed: {completedCount} of {peerReviewRequiredCount}",{completedCount:u,peerReviewRequiredCount:r}),f=o.a.createElement(df,{className:"peer-review-header-progress",value:u,maxValue:r}))),o.a.createElement("div",{className:"peer-review-header"},o.a.createElement("div",{className:"peer-review-header-title"},o.a.createElement("h2",{className:"card-header"},c._("Peer Review")),o.a.createElement("div",{className:"peer-review-header-right-container"},o.a.createElement("div",{className:Ie()(l)},d),f)))})),Cp(Op(Op(n)),"isReviewedPeerReview",(function(e){var t=n.props.filteredReviews;if(t)for(var r=0;r<t.length;r++)if(t[r].submitter.dbId===e)return!0;return!1})),Cp(Op(Op(n)),"getRatingComponent",(function(){var e=n.props,t=e.onRatingChange,r=e.onEditRubricRating,a=e.isTestStudent,i=e.rubric,c=e.selectedResult,s=e.i18n;if(c){var u=n.props,l=u.isFiveStarEnabled,d=u.isRubricReviewEnabled;if(l){var f=0;return c.myFiveStarRating&&(f=c.myFiveStarRating.value),o.a.createElement("div",{className:"peer-review-rating-container"},o.a.createElement(Dn.a,{enabled:!a,name:"peer-review-rating",value:f,onChange:t}))}if(d){var p=0;return c.myRubricEvaluation&&(p=c.myRubricEvaluation.points),o.a.createElement("div",{className:"peer-review-rubric-assessment-container"},s._("Rubric Score"),o.a.createElement(Ue.a,{id:"button-peer-review-rubric",ariaLabel:s._("Rubric Score"),enabled:!a,onClick:r,className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:p,max:i.maxValue})))}}return null})),Cp(Op(Op(n)),"getPeerReviewDueDate",(function(){var e=n.props,t=e.i18n,r=e.peerReviewDueDate;return r?o.a.createElement("div",{className:"peer-review-due-date-container"},o.a.createElement(zt.a,{iconClassName:vr.a.CALENDAR}),o.a.createElement("p",null,t._("Due Date:")," ",o.a.createElement(Qe.b,{unixTime:r}))):null})),Cp(Op(Op(n)),"getPeerReviewGradingInfo",(function(){var e=n.props,t=e.isPeerReviewGradingEnabled,r=e.gradedPeerReviewWeight,a=e.i18n;return t?o.a.createElement("div",{className:"peer-review-grading-info"},o.a.createElement(ya.b,{className:"peer-review-grading-message",type:ya.a.INFO,message:a._("This assignment factors your peer review activity into your overall grade. Quality of all your completed peer reviews will be graded with {gradedPeerReviewWeight}% weight towards your overall grade.",{gradedPeerReviewWeight:r})})):null})),Cp(Op(Op(n)),"getPeerReviewPaperHeader",(function(){var e=n.props,t=e.availablePeerReviews,r=e.isFiveStarEnabled,a=e.isRubricReviewEnabled,i=e.i18n,c=e.peerReviewType,s=e.selectedResult;if(!s)return null;var u=t&&t.length>0,l=ac(s),d=oc(s),f=ic(s),p=n.isReviewedPeerReview(s.submitter.dbId)&&cc(s,r,a),m=l?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,b=d?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,y=f?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,v=l?i._("Completed"):i._("View any of the documents or watch the video"),h=d?i._("Completed"):i._("Leave a comment"),g=f?i._("Completed"):a?i._("Submit a rubric evaluation"):i._("Submit a five star rating"),E=c===pf.a.SYSTEM,w={label:i._("Retrieve a new peer submission for review")};return E&&(p?u||(w={label:i._("There are no more peer submissions available")}):w={label:i._("You must complete the current review before proceeding")}),o.a.createElement("div",{className:"peer-review-paper-header"},o.a.createElement("div",{className:"peer-review-paper-header-primary"},n.getPeerSelectField(),o.a.createElement("div",{style:{flex:1}}),E&&o.a.createElement(Ue.a,{id:"button-peer-review-next-peer",primary:!0,ariaLabel:i._("Next Peer"),className:"next-peer-button",enabled:p&&u,tooltip:w,onClick:n.onNextPeerReview},i._("Next Peer"))),o.a.createElement("div",{className:"peer-review-paper-header-secondary"},o.a.createElement(ff.b,{className:Ie()("peer-review-progress-item",l&&"peer-review-progress-item--complete"),label:v},o.a.createElement(zt.a,{className:"peer-review-progress-item-icon"},m),o.a.createElement("div",{className:"peer-review-progress-item-label"},i._("Viewed Submission"))),o.a.createElement(ff.b,{className:Ie()("peer-review-progress-item",d&&"peer-review-progress-item--complete"),label:h},o.a.createElement(zt.a,{className:"peer-review-progress-item-icon"},b),o.a.createElement("div",{className:"peer-review-progress-item-label"},i._("Commented"))),n.isQuantitativeReviewEnabled()&&o.a.createElement(ff.b,{className:Ie()("peer-review-progress-item",f&&"peer-review-progress-item--complete"),label:g},o.a.createElement(zt.a,{className:"peer-review-progress-item-icon"},y),o.a.createElement("div",{className:"peer-review-progress-item-label"},i._("Evaluated")))))})),Cp(Op(Op(n)),"getPeerSubmissionPreview",(function(){var e=n.props,t=e.activityId,r=e.activityCommentIsLoading,a=e.comments,i=e.getCommentConfig,c=e.isCommentingAnonymous,s=e.onAddVideoComment,u=e.onDeleteComment,l=e.onEditComment,d=e.onCommentChange,f=e.onSubmissionViewed,p=e.onSubmitComment,m=e.onSyncTimeClick,b=e.rubric,y=e.scrollCommentsToBottom,v=e.termClassId,h=e.workItems;return o.a.createElement("div",{className:"peer-review-paper-container"},o.a.createElement(Xt.a,{className:"peer-review-paper",zDepth:1},n.getPeerReviewPaperHeader(),o.a.createElement(vp,{ref:n.submissionReview,activityId:t,activityCommentIsLoading:r,assessmentRatingComponent:n.getRatingComponent(),assetsClassName:"peer-review-submission-assets-container",comments:a,getCommentConfig:i,isCommentingAnonymous:c,onAddVideoComment:s,onDeleteComment:u,onEditComment:l,onCommentChange:d,onSubmissionViewed:f,onSubmitComment:p,onSyncTimeClick:m,rubric:b,scrollCommentsToBottom:y,termClassId:v,workItems:h})))})),Cp(Op(Op(n)),"getNoPeerSubmissionsMessage",(function(){var e=n.props.i18n;return o.a.createElement("div",{className:"peer-review-no-submissions"},o.a.createElement("p",{className:"card-placeholder-text"},e._("There are no submissions to review right now.")))})),n.submissionReview=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sp(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.hasPeerSubmissions;return e.peerReviewType?o.a.createElement("div",null,o.a.createElement(K.a,{className:"peer-review-card"},o.a.createElement("div",{className:"peer-review-title"},this.getCardHeader()),o.a.createElement("div",{className:"peer-review-content"},gr.a.isPeerReviewDueDateEnabled()&&this.getPeerReviewDueDate(),this.getPeerReviewGradingInfo(),t?this.getPeerSubmissionPreview():this.getNoPeerSubmissionsMessage()))):null}}])&&Ep(n.prototype,r),a&&Ep(n,a),t}(o.a.PureComponent);_p.propTypes={activityId:M.a.number,activityCommentIsLoading:M.a.bool,activityType:M.a.string,availablePeerReviews:M.a.array,comments:M.a.array,filteredReviews:M.a.array,getCommentConfig:M.a.func,gradedPeerReviewWeight:M.a.number,hasPeerSubmissions:M.a.bool,i18n:M.a.object,isFiveStarEnabled:M.a.bool,isCommentingAnonymous:M.a.bool,isPeerReviewGradingEnabled:M.a.bool,isRubricReviewEnabled:M.a.bool,isTestStudent:M.a.bool,onAddVideoComment:M.a.func.isRequired,onCommentChange:M.a.func.isRequired,onDeleteComment:M.a.func.isRequired,onEditComment:M.a.func.isRequired,onEditRubricRating:M.a.func.isRequired,onRatingChange:M.a.func.isRequired,onSelectedResultChange:M.a.func.isRequired,onSubmissionViewed:M.a.func.isRequired,onSubmitComment:M.a.func.isRequired,onSyncTimeClick:M.a.func.isRequired,peerReviewDueDate:M.a.number,peerReviewRequiredCount:M.a.number,peerReviewType:M.a.string,rubric:M.a.object,selectedResult:M.a.any,scrollCommentsToBottom:M.a.bool,termClassId:M.a.number.isRequired,workItems:M.a.array.isRequired};var Tp=Object(x.withI18n)()(_p);function Ip(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Pp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ip(o,r,a,i,c,"next",e)}function c(e){Ip(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ap=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rp(this,"addComment",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.addPeerReviewComment(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()),Rp(this,"addVideoComment",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.addPeerReviewVideo(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()),Rp(this,"editComment",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.editPeerReviewComment(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Rp(this,"deleteComment",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.deletePeerReviewComment(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Rp(this,"createPeerReviewFiveStar",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.createPeerReviewFiveStar(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()),Rp(this,"setPeerReviewViewed",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.setPeerReviewViewed(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Rp(this,"createRubricPeerReview",function(){var e=Pp(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.a.createRubricPeerReview(t,n,r,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}())};function jp(e){return(jp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Np(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kp(o,r,a,i,c,"next",e)}function c(e){kp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lp(e){return(Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mp(e,t){return(Mp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vp={selectedReviewSubmitterId:null,commentIsLoading:!1,resumeVideoAfterMessageSubmit:!1,scrollCommentsToBottom:!1},Gp=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Lp(t).call(this,e),n=!a||"object"!==jp(a)&&"function"!==typeof a?xp(r):a,Fp(xp(xp(n)),"componentDidMount",(function(){n.scrollToBottom()})),Fp(xp(xp(n)),"getInitialSelectedReviewIdFromProps",(function(e){var t=null,r=e.availablePeerReviews,a=n.getFilteredReviews(e);return a&&a.length>0?t=a[a.length-1].submitter.dbId:r&&r.length>0&&(t=r[0].submitter.dbId),t})),Fp(xp(xp(n)),"scrollToBottom",(function(){n.setState({scrollCommentsToBottom:!0},(function(){n.setState({scrollCommentsToBottom:!1})}))})),Fp(xp(xp(n)),"getPlayerTime",(function(e){var t=fc.c(e,Ft.a.getState());return null===t?n.getSelectedReviewObject().media?0:null:+t.toFixed(1)-.1})),Fp(xp(xp(n)),"pauseVideoPlayback",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit;if(e){var a=fc.b(e,Ft.a.getState(),"isPlaying"),o=r;if(o||(o=a),a){var i=n.getPlayerTime(e);t(dc.r(e)),n.globalPlayerEmitter.pause({playerId:e,startTime:i})}n.setState({resumeVideoAfterMessageSubmit:o})}})),Fp(xp(xp(n)),"finalizeCommentState",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit;(n.setState({resumeVideoAfterMessageSubmit:!1,commentIsLoading:!1}),n.scrollToBottom(),r)&&(fc.b(e,Ft.a.getState(),"isPaused")&&n.globalPlayerEmitter.play({playerId:e,startTime:n.getPlayerTime()}),t(dc.s(e)))})),Fp(xp(xp(n)),"onCommentChange",(function(e,t){n.pauseVideoPlayback(t)})),Fp(xp(xp(n)),"onSubmitComment",function(){var e=Np(regeneratorRuntime.mark((function e(t,r){var a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,o=a.activityId,i=a.viewContext,c=n.state.selectedReviewSubmitterId,n.setState({commentIsLoading:!0}),e.next=5,Ap.addComment(o,c,t,n.getPlayerTime(r),i);case 5:n.finalizeCommentState(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Fp(xp(xp(n)),"onAddVideoComment",(function(e){var t=n.props.activityId;n.pauseVideoPlayback(e),Di.a.isRecorderSupported()&&!lc.b()?Hn.a.showModal(o.a.createElement(Qi,{activityId:+t,mediaType:Hi.a.COMMENT,id:"FeedbackCommentRecorder",onComplete:function(t){t&&t.masterMediaId&&n.onAddVideoComplete(t.masterMediaId,e)}})):Hn.a.showModal(o.a.createElement(ec,{activityId:+t,mediaType:Hi.a.COMMENT,showImportFromCloud:!1,onComplete:function(t){t&&t[0]&&n.onAddVideoComplete(t[0],e)}}))})),Fp(xp(xp(n)),"onAddVideoComplete",function(){var e=Np(regeneratorRuntime.mark((function e(t,r){var a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,o=a.activityId,i=a.viewContext,c=n.state.selectedReviewSubmitterId,t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ap.addVideoComment(o,c,t,n.getPlayerTime(r),i);case 6:n.finalizeCommentState(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Fp(xp(xp(n)),"onSelectedResultChange",(function(e){n.setState({selectedReviewSubmitterId:null},(function(){n.setState({selectedReviewSubmitterId:e},(function(){n.scrollToBottom()}))}))})),Fp(xp(xp(n)),"onEditComment",(function(e){Hn.a.showModal(o.a.createElement(nf,{comment:e,onConfirm:function(){var e=Np(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ap.editComment(t.dbId,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}))})),Fp(xp(xp(n)),"onDeleteComment",(function(e){var t=n.props,r=t.activityId,a=t.i18n;Hn.a.showModal(o.a.createElement(Ni,{id:"delete-review-item-dialog",description:a._("Are you sure you want to delete this comment?"),cancelLabel:a._("No"),confirmLabel:a._("Yes"),title:a._("Delete Comment"),onConfirm:Np(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ap.deleteComment(r,e.dbId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}))})),Fp(xp(xp(n)),"onSyncTimeClick",(function(e,t){var r=n.props.dispatch,a=n.getPlayerTime(),o=e;r(dc.B(t,o)),n.globalPlayerEmitter.seek({playerId:t,startTime:a,endTime:o})})),Fp(xp(xp(n)),"onRatingChange",(function(e){var t=n.props.activityId,r=n.state.selectedReviewSubmitterId;Ap.createPeerReviewFiveStar(t,r,e)})),Fp(xp(xp(n)),"getSelectedReviewObject",(function(){var e=n.props.availablePeerReviews,t=n.state.selectedReviewSubmitterId,r=n.getFilteredReviews(),a=null,o=null;return r&&(o=g.a.find(r,(function(e){return e.submitter.dbId===t}))),o?a=o:e&&(a=g.a.find(e,(function(e){return e.submitter.dbId===t}))),a})),Fp(xp(xp(n)),"isTestStudent",(function(){var e=n.props.userData;return ar.h(e)})),Fp(xp(xp(n)),"getFilteredReviews",(function(e){var t=e;t||(t=n.props);var r=t,a=r.activityType,o=r.reviewedPeerReviews,i=r.userId;if(!o)return[];var c=g.a.filter(o,(function(e){return+e.submitter.dbId!==+i}));return a===pc.b.GROUP_PRESENTATION&&(c=g.a.uniqBy(c,"activityStudentGroup.dbId")),c})),Fp(xp(xp(n)),"onSubmissionViewed",(function(){var e=n.props.activityId,t=n.state.selectedReviewSubmitterId,r=n.getSelectedReviewObject();r&&!ac(r)&&Ap.setPeerReviewViewed(e,t)})),Fp(xp(xp(n)),"getComments",(function(){var e=[],t=n.getSelectedReviewObject();return t&&(e=t.comments)&&(e=g.a.orderBy(e,["syncTime","updatedAt"],["asc","asc"])),e})),Fp(xp(xp(n)),"getCommentConfig",(function(e){var t=n.props.userId,r=e.commenter&&e.commenter.dbId===t;return{canDelete:r,canEdit:r}})),Fp(xp(xp(n)),"onEditRubricRating",(function(){var e=n.props,t=e.activityId,r=e.rubric,a=n.state.selectedReviewSubmitterId,i=n.getSelectedReviewObject();if(i){var c=null,s=null;i.myRubricEvaluation&&(c=i.myRubricEvaluation.points,s=i.myRubricEvaluation.cells.map((function(e){return e.dbId}))),Hn.a.showModal(o.a.createElement(Bn.b,{rubric:r,rubricPoints:c,grade:s,mode:Qn.a.GRADE,onCancel:Hn.a.closeModal,onSubmit:function(){var e=Np(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ap.createRubricPeerReview(t,a,n);case 2:Hn.a.closeModal();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}))}})),Fp(xp(xp(n)),"getWorkItemConfig",(function(e){return{isProcessing:!1,hasProcessingError:!1,actions:{primary:[],secondary:n.getSecondaryActions(e)}}})),Fp(xp(xp(n)),"isDownloadEnabled",(function(e){var t=!1,n=g.a.get(e,["attributes",Yu.DOWNLOAD_URL]);switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:t=Boolean(n)}return t})),Fp(xp(xp(n)),"getSecondaryActions",(function(e){var t=[],r=g.a.get(e,["attributes",Yu.PREVIEW_URL]),a=n.isDownloadEnabled(e);switch(e.type){case Qu.FILE:case Qu.IMAGE:t.push(o.a.createElement(td,{id:"item-action-launch[".concat(e.key,"]"),key:"item-action-launch[".concat(e.key,"]"),previewUrl:r,onClick:function(){n.onSubmissionViewed()}})),t.push(o.a.createElement(Sl,{id:"item-action-download[".concat(e.key,"]"),key:"item-action-download[".concat(e.key,"]"),item:e,enabled:a,onClick:function(){n.onSubmissionViewed()}}));break;case Qu.LINK:t.push(o.a.createElement(td,{id:"item-action-launch[".concat(e.key,"]"),key:"item-action-launch[".concat(e.key,"]"),previewUrl:r,onClick:function(){n.onSubmissionViewed()}}))}return t})),n.globalPlayerEmitter=new tc.a;var i=n.getInitialSelectedReviewIdFromProps(e);return i&&(Vp.selectedReviewSubmitterId=i),n.state=Vp,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mp(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.selectedReviewSubmitterId||this.setState({selectedReviewSubmitterId:this.getInitialSelectedReviewIdFromProps(e)})}},{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.activityType,r=e.availablePeerReviews,a=e.gradedPeerReviewWeight,i=e.isCommentingAnonymous,c=e.isFiveStarEnabled,s=e.isPeerReviewGradingEnabled,u=e.isRubricReviewEnabled,l=e.peerReviewDueDate,d=e.peerReviewType,f=e.peerReviewRequiredCount,p=e.rubric,m=e.termClassId,b=this.state,y=b.commentIsLoading,v=b.scrollCommentsToBottom;if(!d)return null;var h=this.getFilteredReviews(),g=this.getSelectedReviewObject(),E=Boolean(r&&r.length>0||h&&h.length>0),w=[];return g&&(w=gl.getTranslatedResult(g,this.getWorkItemConfig)),o.a.createElement(Tp,{activityId:t,activityCommentIsLoading:y,activityType:n,availablePeerReviews:r,comments:this.getComments(),filteredReviews:h,getCommentConfig:this.getCommentConfig,gradedPeerReviewWeight:a,hasPeerSubmissions:E,isCommentingAnonymous:i,isFiveStarEnabled:c,isPeerReviewGradingEnabled:s,isRubricReviewEnabled:u,isTestStudent:this.isTestStudent(),onAddVideoComment:this.onAddVideoComment,onCommentChange:this.onCommentChange,onDeleteComment:this.onDeleteComment,onEditComment:this.onEditComment,onEditRubricRating:this.onEditRubricRating,onRatingChange:this.onRatingChange,onSelectedResultChange:this.onSelectedResultChange,onSubmissionViewed:this.onSubmissionViewed,onSubmitComment:this.onSubmitComment,onSyncTimeClick:this.onSyncTimeClick,peerReviewDueDate:l,peerReviewType:d,peerReviewRequiredCount:f,rubric:p,selectedResult:g,scrollCommentsToBottom:v,termClassId:m,workItems:w})}}])&&Dp(n.prototype,r),a&&Dp(n,a),t}(o.a.PureComponent);Gp.defaultProps={availablePeerReviews:[],gradedPeerReviewWeight:0,peerReviewDueDate:0,rubric:{}},Gp.propTypes={activityId:M.a.number.isRequired,activityType:M.a.string.isRequired,availablePeerReviews:M.a.array,dispatch:M.a.func.isRequired,gradedPeerReviewWeight:M.a.number,i18n:M.a.any.isRequired,isFiveStarEnabled:M.a.bool.isRequired,isRubricReviewEnabled:M.a.bool.isRequired,isPeerReviewGradingEnabled:M.a.bool.isRequired,isCommentingAnonymous:M.a.bool.isRequired,peerReviewType:M.a.string.isRequired,peerReviewRequiredCount:M.a.number.isRequired,peerReviewDueDate:M.a.number,rubric:M.a.object,termClassId:M.a.number.isRequired,userData:M.a.object.isRequired,userId:M.a.number.isRequired};var Up=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityId(e),activityType:et.getActivityType(e),availablePeerReviews:et.getAvailablePeerReviews(e),gradedPeerReviewWeight:et.getGradedPeerReviewWeight(e),isCommentingAnonymous:et.isCommentingAnonymous(e),isFiveStarEnabled:et.isFiveStarEnabled(e),isPeerReviewGradingEnabled:et.isPeerReviewGradingEnabled(e),isRubricReviewEnabled:et.isRubricReviewEnabled(e),peerReviewDueDate:et.getPeerReviewDueDate(e),peerReviewRequiredCount:et.getPeerReviewRequiredCount(e),peerReviewType:et.getPeerReviewType(e),reviewedPeerReviews:et.getReviewedPeerReviews(e),rubric:et.getRubric(e),termClassId:et.getTermClassId(e),userData:wt.h(e),userId:wt.i(e)}}))(Gp));function qp(e){return(qp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bp(e,t){return!t||"object"!==qp(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qp(e){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yp(e,t){return(Yp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bp(this,Qp(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yp(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.linkValue,r=e.linkTitle,a=e.isLoading,i=e.onEditLinkTitle,c=e.onEditLinkValue,s=e.onSave,u=e.errors,l=e.previewLink,d=e.linkValueIsValid,f=[];return f.push(o.a.createElement(Ue.a,{id:"add-file-add-link-dialog-cancel-button",enabled:!a,secondary:!0,ariaLabel:t._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"}))),f.push(o.a.createElement(Ue.a,{id:"add-file-add-link-dialog-save-button",primary:!0,ariaLabel:t._("Save"),onClick:s,enabled:!a&&d,isLoading:a},o.a.createElement(x.Trans,{id:"Save"}))),o.a.createElement(pi.a,{actions:f,dialogClassName:"c-add-link-dialog",id:"add-link-dialog",title:t._("Add Link"),modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement("ul",null,u.map((function(e){return o.a.createElement("li",{className:"u-error"},e)}))),o.a.createElement(Tl.b,{id:"add-link-title-input",label:t._("Link title"),enabled:!a,value:r,onChange:i,ariaLabel:t._("Link title")}),o.a.createElement("div",{className:Ie()("u-display-flex","u-align-items-center")},o.a.createElement(Tl.b,{id:"add-link-url-input",label:t._("Link"),enabled:!a,value:n,onChange:c,ariaLabel:t._("Link")}),o.a.createElement(Ue.c,{id:"add-link-preview-button",enabled:d,onClick:l,tooltip:{label:t._("Preview (New Tab)")},ariaLabel:t._("Preview (New Tab)")},Je.a.OPEN_IN_NEW))))}}])&&Wp(n.prototype,r),a&&Wp(n,a),t}(a.Component),zp=Object(x.withI18n)()(Hp),Kp=n("oDFA"),Xp=n.n(Kp);function $p(e){return($p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zp(o,r,a,i,c,"next",e)}function c(e){Zp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function em(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tm(e){return(tm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nm(e,t){return(nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function am(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var om=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=tm(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==$p(a)&&"function"!==typeof a?rm(r):a,am(rm(rm(n)),"state",{linkValue:"",linkValueIsValid:!1,linkTitle:"",isLoading:!1,errors:[]}),am(rm(rm(n)),"onEditLinkTitle",(function(e){n.setState({linkTitle:e})})),am(rm(rm(n)),"onEditLinkValue",(function(e){var t=Xp()({strict:!1}).test(e);n.setState({linkValue:e,linkValueIsValid:t})})),am(rm(rm(n)),"onSave",Jp(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.activityId,a=t.onComplete,o=n.state,i=o.linkTitle,c=o.linkValue,n.setIsLoading(!0),e.prev=3,e.next=6,Et.a.createLink(r,i,c);case 6:n.setIsLoading(!1),a(),Hn.a.closeModal(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),n.setErrors(g.a.values(Ll(e.t0))),n.setIsLoading(!1);case 15:case"end":return e.stop()}}),e,this,[[3,11]])})))),am(rm(rm(n)),"previewLink",(function(){var e=n.state.linkValue;e=e.match(/^https?:/)?e:"//"+e,window.open(e,"_blank")})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nm(e,t)}(t,e),n=t,(r=[{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setErrors",value:function(e){this.setState({errors:e})}},{key:"render",value:function(){var e=this.state,t=e.linkValue,n=e.linkTitle,r=e.isLoading,a=e.errors,i=e.linkValueIsValid;return o.a.createElement(zp,{linkValue:t,linkTitle:n,isLoading:r,linkValueIsValid:i,errors:a,previewLink:this.previewLink,onEditLinkTitle:this.onEditLinkTitle,onEditLinkValue:this.onEditLinkValue,onSave:this.onSave})}}])&&em(n.prototype,r),a&&em(n,a),t}(a.Component);om.propTypes={onComplete:M.a.func,activityId:M.a.number};var im=om;n("u3PK");function cm(e){return(cm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function um(e){return(um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lm(e,t){return(lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pm=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=um(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==cm(a)&&"function"!==typeof a?dm(r):a,fm(dm(dm(n)),"state",{webcamMode:!0,desktopMode:!1}),fm(dm(dm(n)),"getDialogComponent",(function(e){var t=n.props,r=t.onCancel,a=t.onRecordClick,i=t.onUploadClick,c=t.i18n,s=t.allowDesktopSharing,u=n.state,l=u.webcamMode,d=u.desktopMode,f=!lc.b(),p={dialogClassName:"add-video-dialog",id:"add-video-dialog",onClose:r,title:c._("Add Video"),modal:!0,visible:!0};return e?p.fullPage=!0:p.actions=[o.a.createElement(Ue.a,{id:"button-add-video-dialog-cancel",secondary:!0,ariaLabel:c._("Cancel"),onClick:r},o.a.createElement(x.Trans,{id:"Cancel"}))],o.a.createElement(Fr.a,p,o.a.createElement("div",{className:"u-text-center align-top add-video-contents"},f&&o.a.createElement("div",{className:"add-video-checklist"},o.a.createElement(Ue.f,{id:"button-video-dialog-record",className:"u-mr-5px record-video-button",ariaLabel:c._("Record Video"),enabled:(l||d)&&Di.a.isRecorderSupported(),tooltip:{label:Di.a.isRecorderSupported()?null:c._(qf.a.RECORDING_NOT_SUPPORTED)},onClick:function(){r(),a(l,d,d&&!l)}},o.a.createElement(x.Trans,{id:"Record Video"})),gr.a.isWebcamRecordingSelectionEnabled()&&s&&o.a.createElement("div",{id:"checkbox-add-video-dialog-webcam"},o.a.createElement(ut.a,{id:"webcam",name:"webcam",label:c._("Camera"),ariaLabel:c._("Camera"),className:"add-video-checkmark",checked:l,onChange:function(e){n.setState({webcamMode:e})}})),gr.a.isDesktopRecordingSelectionEnabled()&&s&&o.a.createElement("div",{id:"checkbox-add-video-dialog-desktop"},o.a.createElement(ut.a,{id:"desktop",name:"desktop",label:c._("Screen"),ariaLabel:c._("Screen"),className:"add-video-checkmark-btm",checked:d,onChange:function(e){n.setState({desktopMode:e})}}))),o.a.createElement(Ue.f,{id:"button-video-dialog-upload",ariaLabel:c._("Upload Video"),onClick:function(){r(),i()}},o.a.createElement(x.Trans,{id:"Upload Video"}))))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lm(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1)),o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)))}}])&&sm(n.prototype,r),a&&sm(n,a),t}(a.Component);pm.defaultProps={allowDesktopSharing:!0},pm.propTypes={allowDesktopSharing:M.a.bool,onCancel:M.a.func,onRecordClick:M.a.func,onUploadClick:M.a.func};var mm=Object(x.withI18n)()(pm),bm=(n("rlsJ"),n("uxn8")),ym=n("ngQI"),vm=n("PjZZ");function hm(e){return(hm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Em(e){return(Em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wm(e,t){return(wm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Om(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cm=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Em(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==hm(a)&&"function"!==typeof a?Sm(r):a,Om(Sm(Sm(n)),"onClick",(function(){var e=n.props.checked;n.onValueChanged(e)})),Om(Sm(Sm(n)),"onKeyDown",(function(e){var t=n.props.checked;(e.which||e.keyCode)===gs.a.SPACE&&n.onValueChanged(t)})),Om(Sm(Sm(n)),"onValueChanged",(function(e){var t=n.props.onChange;t&&t(!e)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wm(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.ariaLabel,n=e.checked,r=e.className,a=e.id,i=e.ink,c=e.label;return o.a.createElement("div",{className:r},o.a.createElement("label",{className:"md-selection-control-label md-pointer--hover md-text"},o.a.createElement("div",{role:"checkbox","aria-checked":n,"aria-labelledby":"".concat(a,"-label"),className:Ie()("md-fake-btn md-pointer--hover md-fake-btn--no-outline md-selection-control-toggle md-btn md-btn--icon ",n?"md-text--theme-secondary":"md-text--secondary",vm.a(!1,{checked:this.props.checked})),tabIndex:"0",onClick:this.onClick,onKeyDown:this.onKeyDown},i,o.a.createElement("i",{className:"md-icon material-icons md-text--inherit"},n?Je.a.CHECK_BOX_CHECKED:Je.a.CHECK_BOX_UNCHECKED)),o.a.createElement("span",{"aria-label":t,id:"".concat(a,"-label")},c)))}}])&&gm(n.prototype,r),a&&gm(n,a),t}(o.a.PureComponent);Cm.propTypes={ariaLabel:M.a.string,checked:M.a.bool,className:M.a.string,id:M.a.string.isRequired,label:M.a.string,onChange:M.a.func},Cm.defaultProps={checked:!1};var _m=Object(da.T)(Cm);n("25rm");function Tm(e){return(Tm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Im(){return(Im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rm(e,t){return!t||"object"!==Tm(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Am(e){return(Am=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var km=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rm(this,Am(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,r=e.checked,a=e.i18n,i=e.dragHandleProps,c=e.handleCheckToggle;return o.a.createElement("div",{className:"combine-video-list-item","aria-grabbed":r},o.a.createElement(_m,{id:"combine-item-".concat(n),className:"combine-video-list-item--checkbox",name:"combine-checkboxes[".concat(n,"]"),label:t,"aria-label":a._("Select {name} to combine",{name:t}),value:n,checked:r,onChange:function(e){c(n,e)}}),o.a.createElement("span",Im({className:"combine-video-list-item--drag-handle",style:r?{}:{display:"none"}},i),o.a.createElement(Uf.a,{className:vr.a.DOT_8,enabled:r})))}}])&&Pm(n.prototype,r),a&&Pm(n,a),t}(a.Component);km.defaultProps={dragHandleProps:{}},km.propTypes={name:M.a.string.isRequired,id:M.a.number.isRequired,handleCheckToggle:M.a.func.isRequired,dragHandleProps:M.a.object};var Nm=Object(x.withI18n)()(km);n("amkF");function Dm(e){return(Dm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lm(){return(Lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xm(e){return(xm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fm(e,t){return(Fm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Um=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=xm(t).call(this,e),n=!a||"object"!==Dm(a)&&"function"!==typeof a?Vm(r):a,Gm(Vm(Vm(n)),"onDragEnd",(function(e,t){if(e.destination){var r=n.props,a=r.moveItem,o=r.videos,i=t[e.source.index].media.dbId,c=t[e.destination.index].media.dbId;a(g.a.findIndex(o,{media:{dbId:i}}),g.a.findIndex(o,{media:{dbId:c}}))}})),n.portal=document.createElement("div"),document.body.appendChild(n.portal),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fm(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.videos,a=t.handleCheckToggle,i=g.a.groupBy(r,(function(e){return e.checked?"checked":"unchecked"})),c=i.checked||[],s=i.unchecked||[],u=c.map((function(t,n){var r=t.media,i=t.title,c=t.checked;return o.a.createElement(ym.b,{key:r.dbId,draggableId:r.dbId,index:n,type:"COMBINE_MEDIA_ITEM"},(function(t,n){var s=o.a.createElement("li",Lm({ref:t.innerRef,className:n.isDragging?"combine-media-list-item-drag-container--active":""},t.draggableProps),o.a.createElement(Nm,{key:r.dbId,name:i,id:r.dbId,checked:c,handleCheckToggle:a,dragHandleProps:t.dragHandleProps}));return n.isDragging?We.a.createPortal(s,e.portal):s}))})),l=u&&u.length>1,d=u&&u.length>0;return[o.a.createElement(Xt.a,{key:"combine-media-list-checked",className:"combine-media-list-checked-container"},o.a.createElement("div",{className:"combine-media-list-message"},!l&&o.a.createElement("p",null,n._("Select at least 2 videos below to combine")),l&&o.a.createElement("p",null,n._("{0} videos selected",{0:c.length}))),d&&o.a.createElement(ym.a,{onDragEnd:function(t){return e.onDragEnd(t,c)}},o.a.createElement(ym.c,{droppableId:"droppable-library-media-list",type:"COMBINE_MEDIA_ITEM"},(function(e,t){return o.a.createElement("div",Lm({ref:e.innerRef,className:Ie()("combine-media-list-checked-drag-container",{"combine-media-list-checked-drag-container--active":t.isDraggingOver})},e.droppableProps),o.a.createElement("ul",{style:{listStyle:"none"}},u))})))),o.a.createElement("ul",{key:"combine-media-list-unchecked",style:{listStyle:"none"}},s.map((function(e){var t=e.media,n=e.title,r=e.checked;return o.a.createElement("li",{key:t.dbId},o.a.createElement(Nm,{key:t.dbId,name:n,id:t.dbId,checked:r,handleCheckToggle:a,dragHandleProps:null}))})))]}}])&&Mm(n.prototype,r),a&&Mm(n,a),t}(a.Component);Gm(Um,"portal",null),Um.propTypes={videos:M.a.arrayOf(M.a.object),moveItem:M.a.func,handleCheckToggle:M.a.func};var qm=Object(x.withI18n)()(Um);function Wm(e){return(Wm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qm(e){return(Qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ym(e,t){return(Ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Km=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Qm(t).call(this,e),n=!a||"object"!==Wm(a)&&"function"!==typeof a?Hm(r):a,zm(Hm(Hm(n)),"submit",(function(){var e=n.props,t=e.onSubmit,r=e.onCancel,a=n.getVideosToCombine();n.setState({isLoading:!0}),t(a).then((function(){n.setState({isLoading:!1}),r()})).catch((function(e){n.setState({isLoading:!1}),H.b.error(e)}))})),zm(Hm(Hm(n)),"handleCheckToggle",(function(e,t){var r=g.a.merge([],n.state.videos),a=g.a.findIndex(r,{media:{dbId:e}});a<0||(r[a]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zm(e,t,n[t])}))}return e}({},r[a],{checked:t}),n.setState({videos:r}))})),zm(Hm(Hm(n)),"moveItem",(function(e,t){var r=n.state.videos;n.setState({videos:bm.c(r,e,t)})})),n.state={videos:g.a.merge([],e.videos),isLoading:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ym(e,t)}(t,e),n=t,(r=[{key:"getVideosToCombine",value:function(){return this.state.videos.filter((function(e){return e.checked})).map((function(e){return e.dbId}))}},{key:"render",value:function(){var e=this.state,t=e.videos,n=e.isLoading,r=this.props.i18n,a=this.getVideosToCombine(),i=!n&&a.length>1,c=[];return c.push(o.a.createElement(Ue.a,{id:"button-combine-video-cancel",secondary:!0,ariaLabel:r._("Cancel"),onClick:this.props.onCancel},o.a.createElement(x.Trans,{id:"Cancel"}))),c.push(o.a.createElement(Ue.a,{id:"button-combine-video-submit",primary:!0,ariaLabel:r._("Submit"),isLoading:n,onClick:this.submit,enabled:i},o.a.createElement(x.Trans,{id:"Submit"}))),o.a.createElement(pi.a,{actions:c,dialogClassName:"c-combine-video-dialog",id:"combine-video-dialog",title:r._("Combine Video"),modal:!0,visible:!0},o.a.createElement("div",{className:"c-combine-video-dialog__content"},o.a.createElement(qm,{videos:t,moveItem:this.moveItem,handleCheckToggle:this.handleCheckToggle})))}}])&&Bm(n.prototype,r),a&&Bm(n,a),t}(a.Component);Km.propTypes={videos:M.a.arrayOf(M.a.object),onCancel:M.a.func.isRequired,onSubmit:M.a.func.isRequired};var Xm=Object(x.withI18n)()(Km),$m=(n("0b8y"),n("tdQW")),Zm=n("eDl9"),Jm=n("pElA");function eb(){var e=nb(["\n    mutation uploadActivityResultPartialDocumentAsStudent($input: UploadActivityResultPartialDocumentAsStudentInput!){\n        uploadActivityResultPartialDocumentAsStudent(input: $input) {\n            document {\n                ...Document\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n    ","\n"]);return eb=function(){return e},e}function tb(){var e=nb(["\n    mutation provideActivityResultPartialMediaAsStudent($input: ProvideActivityResultPartialMediaAsStudentInput!) {\n        provideActivityResultPartialMediaAsStudent(input: $input) {\n            media {\n                ...MediaPartial\n            }\n        }\n    }\n    ","\n"]);return tb=function(){return e},e}function nb(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ab=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addMediaToProgress",value:function(e){var t=e.studentId,n=e.mediaId,r=e.activityId;return Lt.a.mutate({mutation:ob,variables:{input:{activityDbId:r,userDbId:t,mediaDbId:n}}}).then((function(e){if(e.errors&&e.errors.length>0)return Promise.reject(e.errors);var t=e.data.provideActivityResultPartialMediaAsStudent.media;return Ft.a.dispatch(Jm.wb([t])),Promise.resolve(t)}))}},{key:"addFileToProgress",value:function(e){var t=e.studentId,n=e.file,r=e.activityId;return Lt.a.mutate({mutation:ib,variables:{input:{activityDbId:r,"document[fileInfo][file]":n,userDbId:t}}}).then((function(e){var t=e.errors;if(e.data.uploadActivityResultPartialDocumentAsStudent.errors&&e.data.uploadActivityResultPartialDocumentAsStudent.errors.length>0&&(t=e.data.uploadActivityResultPartialDocumentAsStudent.errors),t&&t.length)return Promise.reject(t);var n=e.data.uploadActivityResultPartialDocumentAsStudent.document;return Ft.a.dispatch(Jm.wb([n])),Promise.resolve(n)}))}}],(n=null)&&rb(t.prototype,n),r&&rb(t,r),e}(),ob=xt()(tb(),Zm.c),ib=xt()(eb(),Zm.a);function cb(e){return(cb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sb(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lb(e){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function db(e,t){return(db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pb=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=lb(t).call(this,e),n=!a||"object"!==cb(a)&&"function"!==typeof a?fb(r):a,o=fb(fb(n)),i="upload",c=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.isEducatorProgressUpload,o=r.studentId,t){e.next=3;break}return e.abrupt("return");case 3:if(i=n.props,c=i.onComplete,s=i.activityId,u=i.onCancel,l=i.i18n,n.setState({errors:[],loading:!0}),e.prev=5,!a){e.next=11;break}return e.next=9,ab.addFileToProgress({file:t,activityId:s,studentId:o});case 9:e.next=13;break;case 11:return e.next=13,Et.a.addFile(t,s);case 13:n.setState({loading:!1}),c(),u(),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(5),d=[l._("Error during upload; please try again later")],e.t0.file&&(d=e.t0.file),n.setState({errors:d,loading:!1});case 23:case"end":return e.stop()}}),e,this,[[5,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sb(o,r,a,i,c,"next",e)}function c(e){sb(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),i in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={errors:[],loading:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&db(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.i18n,r=[];return r.push(o.a.createElement(Ue.a,{id:"button-add-file-upload-dialog-cancel",secondary:!0,ariaLabel:n._("Cancel"),onClick:t},o.a.createElement(x.Trans,{id:"Cancel"}))),o.a.createElement(pi.a,{actions:r,dialogClassName:"c-file-upload-dialog",id:"c-file-upload-dialog",title:n._("Upload File"),modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement(At.b,{loading:this.state.loading},o.a.createElement("p",{className:"u-mb-25px"},o.a.createElement(x.Trans,{id:"Max allowed file size is 100 MB. Allowed extensions are: doc, docx, xls, xlsx, pdf, txt, rtf, jpg, jpeg, png, bmp, zip, ppt, pptx"})),this.state.errors.map((function(e){return o.a.createElement("p",{key:e,className:"c-file-upload-dialog__error"},e.split(":::").pop())})),o.a.createElement($m.a,{onChange:this.upload.bind(this),id:"filesToUpload-input",name:"filesToUpload",primary:!0}))))}}])&&ub(n.prototype,r),a&&ub(n,a),t}(a.Component);pb.propTypes={activityId:M.a.number,isEducatorProgressUpload:M.a.bool,onCancel:M.a.func,onComplete:M.a.func,studentId:M.a.number},pb.defaultProps={isEducatorProgressUpload:!1};var mb=Object(x.withI18n)()(pb),bb=n("UyA7"),yb=n("o41Y"),vb=["TYPE__AUTO_ANALYSIS_OVERALL_SCORE","TYPE__AUTO_ANALYSIS_DELIVERY_SCORE","TYPE__AUTO_ANALYSIS_CONTENT_SCORE"],hb={NONE:"TYPE__NONE",AUTO_ANALYSIS_OVERALL_SCORE:"TYPE__AUTO_ANALYSIS_OVERALL_SCORE",AUTO_ANALYSIS_DELIVERY_SCORE:"TYPE__AUTO_ANALYSIS_DELIVERY_SCORE",AUTO_ANALYSIS_CONTENT_SCORE:"TYPE__AUTO_ANALYSIS_CONTENT_SCORE"};n("lojD");function gb(e){return(gb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_b(e,t,n[t])}))}return e}function wb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sb(e){return(Sb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ob(e,t){return(Ob=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tb="new-content-list-item",Ib={showChooser:!1},Pb=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Sb(t).call(this,e),n=!a||"object"!==gb(a)&&"function"!==typeof a?Cb(r):a,_b(Cb(Cb(n)),"handleOutsideClick",(function(e){var t=n._chooserRef.current;t&&!t.contains(e.target)&&n.hideChooser()})),_b(Cb(Cb(n)),"hideChooser",(function(){n.setState({showChooser:!1},(function(){window.removeEventListener("click",n.handleOutsideClick)}))})),_b(Cb(Cb(n)),"onAddClick",(function(){n.setState({showChooser:!0},(function(){setTimeout((function(){window.addEventListener("click",n.handleOutsideClick)}),0)}))})),_b(Cb(Cb(n)),"renderHeader",(function(){var e=n.props.i18n;if(n.state.showChooser)return o.a.createElement("div",{className:"".concat(Tb,"-header")},o.a.createElement("h3",{className:"".concat(Tb,"-header--label")},e._("Add...")),o.a.createElement("div",{className:"".concat(Tb,"-header--actions")},o.a.createElement(Ue.c,{className:"".concat(Tb,"-header--actions-close"),onClick:function(){n.hideChooser()}},Je.a.CLOSE)))})),_b(Cb(Cb(n)),"renderMain",(function(){var e=n.props,t=e.i18n,r=e.configuration,a=e.onCreateNewWorkItem,i=[Eb({type:Bu.VIDEO,icon:Je.a.VIDEOCAM,key:"new-video",ariaLabel:t._("Add video"),label:t._("Video")},r.tools[Bu.VIDEO]),Eb({type:Bu.FILE,icon:Je.a.DESCRIPTION,key:"new-file",ariaLabel:t._("Add file"),label:t._("File")},r.tools[Bu.FILE]),Eb({type:Bu.LINK,icon:Je.a.LINK,key:"new-link",ariaLabel:t._("Add link"),label:t._("Link")},r.tools[Bu.LINK]),Eb({type:Bu.MEETING,icon:Je.a.EVENT,key:"new-meeting",ariaLabel:t._("Add meeting"),label:t._("Meeting")},r.tools[Bu.MEETING]),Eb({type:Bu.MILESTONE,icon:Je.a.MILESTONE_ADD,key:"new-milestone",ariaLabel:t._("Add milestone"),label:t._("Milestone")},r.tools[Bu.MILESTONE]),Eb({type:Bu.COMBINED_VIDEO,icon:Je.a.MERGE,key:"new-combined-video",ariaLabel:t._("Add combined video"),label:t._("Combined Video")},r.tools[Bu.COMBINED_VIDEO])];return o.a.createElement("div",{className:"".concat(Tb,"-main")},o.a.createElement("div",{className:"".concat(Tb,"-main--chooser")},o.a.createElement("div",{className:"".concat(Tb,"-main--chooser-row")},i.map((function(e){return e.visible?o.a.createElement(Ue.a,{primary:!0,id:"".concat(Tb,"--").concat(e.key),key:e.key,enabled:e.enabled,ariaLabel:e.ariaLabel,className:"".concat(Tb,"-main--chooser-button"),tooltip:e.tooltip,onClick:function(){n.hideChooser(),a(e.type)}},o.a.createElement(o.a.Fragment,null,o.a.createElement(zt.a,null,e.icon),o.a.createElement("span",null,e.label))):null})))))})),_b(Cb(Cb(n)),"renderAddContent",(function(){var e=n.props,t=e.i18n,r=e.configuration,a=r.enabled,i=Eb({},r.tooltip,{className:"".concat(Tb,"--add-content-button-tooltip")});return o.a.createElement(Ue.a,{id:"".concat(Tb,"--add-content-button"),primary:!0,enabled:a,className:"".concat(Tb,"--add-content-button"),tooltip:i,onClick:n.onAddClick},o.a.createElement(zt.a,{className:"".concat(Tb,"--icon")},Je.a.ADD_CIRCLE),o.a.createElement("div",{className:"".concat(Tb,"--text"),"aria-label":t._("Add to work in progress")},t._("Add...")))})),_b(Cb(Cb(n)),"renderChooser",(function(){return o.a.createElement("div",null,n.renderHeader(),n.renderMain(),n.renderFooter())})),n.state=Eb({},Ib),n._chooserRef=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ob(e,t)}(t,e),n=t,(r=[{key:"renderFooter",value:function(){return o.a.createElement("div",{className:"".concat(Tb,"-footer")})}},{key:"render",value:function(){var e=this.state.showChooser,t="div",n=null,r={className:Ie()([Tb,"".concat(Tb,"--").concat(e?"chooser":"default")])};return e?(t=Xt.a,r.zDepth=1,n=this.renderChooser()):n=this.renderAddContent(),o.a.createElement("div",{ref:this._chooserRef},o.a.createElement(t,r,n))}}])&&wb(n.prototype,r),a&&wb(n,a),t}(o.a.PureComponent);Pb.propTypes={configuration:M.a.object,onCreateNewWorkItem:M.a.func},Pb.defaultProps={configuration:{},onCreateNewWorkItem:function(){}};var Rb=Object(x.withI18n)()(Pb);n("aPJY");function Ab(e){return(Ab="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kb(e){return(kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nb(e,t){return(Nb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mb="content-card-container",xb=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=kb(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Ab(a)&&"function"!==typeof a?Db(r):a,Lb(Db(Db(n)),"renderExcludedContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props,r=t.i18n,a=t.createNewWorkItemConfiguration,i=t.onCreateNewWorkItem;return o.a.createElement("div",{id:"".concat(Mb,"--excluded-items"),className:Ie()(Mb,"".concat(Mb,"--excluded"),"".concat(Mb,"--list"))},o.a.createElement("div",{"aria-label":r._("You have {0} items in the work in progress section",{0:e.length})}),o.a.createElement("div",{className:"content-list-container"},o.a.createElement(Rb,{configuration:a,onCreateNewWorkItem:i}),g.a.map(e,n.renderWorkItem)))})),Lb(Db(Db(n)),"renderWorkItem",(function(e){var t=n.props.onWorkItemAction;return o.a.createElement(If,{key:"content-list-item-[".concat(e.key,"]"),item:e,onWorkItemAction:t})})),Lb(Db(Db(n)),"renderIncludedContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props,r=t.i18n,a=t.submitConfiguration;return o.a.createElement(Xt.a,{id:"".concat(Mb,"--included-items"),ariaLabel:r._("You have {0} items included in the submission section",{0:e.length}),className:Ie()(Mb,"".concat(Mb,"--included"),"".concat(Mb,"--list")),zDepth:1},o.a.createElement("div",{className:"".concat(Mb,"--header")},o.a.createElement("h2",{className:"".concat(Mb,"--header-label")},r._("Submission"))),n.renderIncludedContainerMessage(),o.a.createElement("div",{className:"content-list-container"},g.a.map(e,n.renderWorkItem)),o.a.createElement("div",{className:"".concat(Mb,"--footer")},o.a.createElement(Ue.f,{id:"".concat(Mb,"--footer-submit-button"),className:"".concat(Mb,"--footer-button"),primary:!0,enabled:a.enabled,onClick:a.onSubmit,tooltip:a.tooltip},r._("Submit"))))})),Lb(Db(Db(n)),"renderItemsRequiredMessage",(function(){var e=n.props.i18n,t=o.a.createElement(zt.a,{className:"".concat(Mb,"--primary-action-icon")},Je.a.STAR_EMPTY);return o.a.createElement("div",{className:"".concat(Mb,"--message")},o.a.createElement("div",{className:"".concat(Mb,"--message-wrapper")},o.a.createElement(zt.a,{className:"".concat(Mb,"--message-icon")},Je.a.INFO_OUTLINE),o.a.createElement("div",{className:"".concat(Mb,"--message-label")},o.a.createElement("div",null,o.a.createElement("span",null,e._("You do not have any items included for submission yet."))),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Add your content above \u2014 click the {readyIcon} when you are ready to include it in your submission.",values:{readyIcon:t}}))))))})),Lb(Db(Db(n)),"renderNotSubmittedMessage",(function(){var e=n.props.i18n,t=e._("Assignment Not Submitted"),r=e._("When you are comfortable with the items included below, click the 'Submit' button.");return o.a.createElement(X.a,{className:"".concat(Mb,"--note"),type:X.a.NOTE_TYPES.INFO,title:t,message:r})})),Lb(Db(Db(n)),"renderVideoItemsRequiredMessage",(function(){var e=n.props.i18n,t=e._("Video Required"),r=e._("You must include a video in order to submit this assignment.");return o.a.createElement(X.a,{className:"".concat(Mb,"--note"),type:X.a.NOTE_TYPES.WARNING,title:t,message:r})})),Lb(Db(Db(n)),"renderAutoAnalysisPendingMessage",(function(){var e=n.props.i18n,t=e._("Analyzing Video..."),r=e._("You will be able to submit after the Auto Analysis\\u2122 report for your included video is available.");return o.a.createElement(X.a,{className:"".concat(Mb,"--note"),type:X.a.NOTE_TYPES.WARNING,title:t,message:r})})),Lb(Db(Db(n)),"renderAutoAnalysisErrorMessage",(function(){var e=n.props.i18n,t=e._("Unable to Analyze Video"),r=e._("There was an issue while generating the Auto Analysis\\u2122 report for your included video. This may be due to missing or unclear audio inside the video. Please try including a different video.");return o.a.createElement(X.a,{className:"".concat(Mb,"--note"),type:X.a.NOTE_TYPES.ERROR,title:t,message:r})})),Lb(Db(Db(n)),"renderIncludedContainerMessage",(function(){switch(n.props.submitConfiguration.state){case nl.ITEMS_REQUIRED:return n.renderItemsRequiredMessage();case nl.VIDEO_ITEM_REQUIRED:return o.a.createElement(o.a.Fragment,null,n.renderNotSubmittedMessage(),n.renderVideoItemsRequiredMessage());case nl.ANALYSIS_UNFETCHED:return n.renderNotSubmittedMessage();case nl.ANALYSIS_PENDING:return o.a.createElement(o.a.Fragment,null,n.renderNotSubmittedMessage(),n.renderAutoAnalysisPendingMessage());case nl.ANALYSIS_ERROR:return o.a.createElement(o.a.Fragment,null,n.renderNotSubmittedMessage(),n.renderAutoAnalysisErrorMessage());case nl.ITEMS_READY:return n.renderNotSubmittedMessage()}return null})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nb(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.workItems,n=e.i18n,r=g.a.groupBy(t,"isIncluded"),a=r.false,i=r.true;return o.a.createElement(K.a,{className:"submission-content-card"},o.a.createElement(K.d,{title:n._("Work In Progress")}),o.a.createElement(K.c,null,this.renderExcludedContainer(a),this.renderIncludedContainer(i)))}}])&&jb(n.prototype,r),a&&jb(n,a),t}(o.a.PureComponent);xb.displayName="PreSubmissionCard",xb.propTypes={createNewWorkItemConfiguration:M.a.object,onCreateNewWorkItem:M.a.func,onWorkItemAction:M.a.func,submitConfiguration:M.a.object,workItems:M.a.array},xb.defaultProps={createNewWorkItemConfiguration:{},onCreateNewWorkItem:function(){},onWorkItemAction:function(){},submitConfiguration:{},workItems:[]};var Fb=Object(x.withI18n)()(xb),Vb=function(e){var t=e.className,n=e.enabled,r=e.isAutoAnalysisScoreVisible,a=e.item,i=e.i18n;return o.a.createElement(ol.a,{id:"".concat("content-list-item","[").concat(a.key,"]-actions-menu--view-analysis"),className:Ie()("".concat("content-list-item","-actions-menu--view-analysis"),t),enabled:n,primaryText:i._("View Analysis"),leftIcon:o.a.createElement(zt.a,null,Je.a.ASSESSMENT),onClick:function(){Hn.a.showModal(o.a.createElement(qu,{isScoreVisible:r,media:a.media}))}})};Vb.defaultProps={enabled:!1},Vb.propTypes={className:M.a.string,enabled:M.a.bool,isAutoAnalysisScoreVisible:M.a.bool,i18n:M.a.object.isRequired,item:M.a.object.isRequired,tooltip:M.a.object.isRequired};var Gb=Object(x.withI18n)()(Vb);function Ub(e){return(Ub="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Kb(e,t,n[t])}))}return e}function Wb(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Bb(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Wb(o,r,a,i,c,"next",e)}function c(e){Wb(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yb(e){return(Yb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hb(e,t){return(Hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xb={meetingDialogErrors:[],workItemStates:{},savingMeeting:!1},$b=1e4,Zb=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Yb(t).call(this,e),n=!a||"object"!==Ub(a)&&"function"!==typeof a?zb(r):a,Kb(zb(zb(n)),"processAfterUpdate",(function(){var e=n.props.resultPartials;if(n.isAutoGradingWithAutoAnalysisEnabled()){var t=gl.getVideosInReadyToSubmitResultPartials(e);n.requestAutoAnalysisForVideos(t)}})),Kb(zb(zb(n)),"isAutoGradingWithAutoAnalysisEnabled",(function(){var e=n.props,t=e.activityData;return e.activityType===pc.b.INDIVIDUAL_PROJECT&&g.a.includes(vb,t.autoGradeScoreSource)})),Kb(zb(zb(n)),"requestAutoAnalysisForVideos",(function(e){for(var t=0;t<e.length;t++){var r=e[t],a=gl.translateResultPartial(r),o=a.media.srcUrl;if(!n.mediaUrlToEndPollingFunc[o]){var i=Ru.startPollingForAutoAnalysisState(o,n.getPollingUpdateHandler(a),$b);n.mediaUrlToEndPollingFunc[o]=i,n.updateWorkItemState(a,{autoAnalysis:{isPolling:!0,data:null}})}}})),Kb(zb(zb(n)),"getPollingUpdateHandler",(function(e){return function(t){var r=t.result,a=t.error,o=t.isFinished;n.onPollForAutoAnalysisStateComplete(e,r,a,o)}})),Kb(zb(zb(n)),"onPollForAutoAnalysisStateComplete",(function(e,t,r,a){n.updateWorkItemState(e,{autoAnalysis:{isPolling:!a,error:r,data:t}})})),Kb(zb(zb(n)),"onAddLink",(function(){var e=n.props.activityId;Hn.a.showModal(o.a.createElement(im,{activityId:e,onComplete:function(){Hn.a.closeModal(),n.refreshActivityData(e)}}))})),Kb(zb(zb(n)),"onAddVideo",(function(){var e=n.props.activityId;lc.f()||n.isCengageEducator()?n.onUploadVideo():Hn.a.showModal(o.a.createElement(mm,{activityId:e,mediaType:Hi.a.ACTIVITY_RESULT,onCancel:Hn.a.closeModal,onRecordClick:n.recordVideo,onUploadClick:n.onUploadVideo}))})),Kb(zb(zb(n)),"onCombineVideos",(function(){var e=n.props.resultPartials;Hn.a.showModal(o.a.createElement(Xm,{videos:gl.getResultPartialVideosToCombine(e),onCancel:Hn.a.closeModal,onSubmit:n.onCreateCombinedVideo}))})),Kb(zb(zb(n)),"onCreateCombinedVideo",function(){var e=Bb(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.activityId,e.prev=1,e.next=4,Et.a.combineVideos(+r,t);case 4:n.closeModal(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),Kb(zb(zb(n)),"onDownloadMeetingWarningDialogClose",(function(){n.setState({downloadUrl:"",downloadWarningMessage:""})})),Kb(zb(zb(n)),"submitAssignment",Bb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.activityId,e.prev=1,e.next=4,Et.a.submitAssignment(t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])})))),Kb(zb(zb(n)),"onSubmitAssignment",(function(){var e=n.props.i18n;Hn.a.showModal(o.a.createElement(Ni,{id:"submit-assignment-item-dialog",description:e._("Are you sure you want to submit this assignment?"),cancelLabel:e._("No"),confirmLabel:e._("Yes"),title:e._("Submit?"),onConfirm:n.submitAssignment}))})),Kb(zb(zb(n)),"getStudentIdFromActivity",(function(){var e=n.props.activityData;return g.a.get(e,"dataForOneStudent.student.dbId")})),Kb(zb(zb(n)),"onUploadFile",(function(){var e=n.props.activityId;Hn.a.showModal(o.a.createElement(mb,{activityId:e,onCancel:Hn.a.closeModal,isEducatorProgressUpload:n.isCengageEducator(),studentId:n.getStudentIdFromActivity(),onComplete:function(){Hn.a.closeModal(),n.refreshActivityData(e)}}))})),Kb(zb(zb(n)),"addUploadedEducatorVideosToProgress",function(){var e=Bb(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.i18n,o=r.activityId,e.prev=1,i=[],t.forEach((function(e){i.push(ab.addMediaToProgress({activityId:+o,studentId:+n.getStudentIdFromActivity(),mediaId:e}))})),e.next=6,Promise.all(i);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),yc.a.addError(a._("Failed to add video"));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),Kb(zb(zb(n)),"onUploadVideo",(function(){var e=n.props.activityId,t=n.isCengageEducator()?Hi.a.LIBRARY:Hi.a.ACTIVITY_RESULT;Hn.a.showModal(o.a.createElement(ec,{activityId:e,mediaType:t,onCancel:Hn.a.closeModal,onComplete:function(t){n.isCengageEducator()?n.addUploadedEducatorVideosToProgress(t):n.refreshActivityData(e)}}))})),Kb(zb(zb(n)),"previewReflectionAnswers",(function(){Hn.a.showModal(o.a.createElement(jd,{visible:!0,onClose:Hn.a.closeModal}))})),Kb(zb(zb(n)),"recordVideo",(function(e,t){var r=n.props.activityId,a=Li.a.CAMERA_ONLY;e&&t?a=Li.a.CAMERA_WITH_DESKTOP:!e&&t&&(a=Li.a.DESKTOP_ONLY),Hn.a.showModal(o.a.createElement(Qi,{mediaType:Hi.a.ACTIVITY_RESULT,id:"ActivityProgressRecorder",activityId:+r,recorderType:a,onCancel:Hn.a.closeModal,onComplete:function(){Hn.a.closeModal(),n.refreshActivityData(r)}}))})),Kb(zb(zb(n)),"updateWorkItemStateProperty",(function(e,t,r,a){n.updateWorkItemState(e,Kb({},t,r),a)})),Kb(zb(zb(n)),"updateWorkItemState",(function(e,t,r){var a=n.state.workItemStates,o=a[e.key]||{};n.setState({workItemStates:qb({},a,Kb({},e.key,qb({},o,t)))},(function(){r&&r()}))})),Kb(zb(zb(n)),"toggleIncludedWork",function(){var e=Bb(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.activityId,o=r.resultPartials,i=gl.getResultPartial(t,o),!t.isIncluded){e.next=7;break}return e.next=5,Et.a.addPartialsToInProgress(+a,[i]);case 5:e.next=9;break;case 7:return e.next=9,Et.a.addPartialsToReadyForSubmit(+a,[i]);case 9:n.refreshActivityData(a),n.updateWorkItemStateProperty(t,Hu.INCLUDE_TOGGLE_SUBMITTING,!1);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),Kb(zb(zb(n)),"refreshActivityData",(function(e){n.isCengageEducator()||Et.a.getActivityResults(+e)})),Kb(zb(zb(n)),"onCreateNewWorkItem",(function(e){switch(e){case Bu.COMBINED_VIDEO:n.onCombineVideos();break;case Bu.FILE:n.onUploadFile();break;case Bu.LINK:n.onAddLink();break;case Bu.MEETING:n.onAddMeeting();break;case Bu.MILESTONE:n.onAddMilestone();break;case Bu.VIDEO:n.onAddVideo();break;default:throw new Error("Unknown creation of work item (type: ".concat(e,")"))}})),Kb(zb(zb(n)),"isCengageEducator",(function(){var e=n.props,t=e.currentUser,r=e.institution;return(Object(ar.b)(t)||Object(ar.g)(t))&&yb.a(r)})),Kb(zb(zb(n)),"getCreateNewWorkItemConfiguration",(function(e){var t,r=n.props,a=r.i18n,o=r.activityType,i=r.isSubmittable,c=r.needReflectionAnswers,s=r.lmsLocked,u=r.readOnly,l=r.isVideoToolEnabled,d=r.isDocumentToolEnabled,f=r.isMeetingToolEnabled,p=Boolean(i&&!c&&!s&&!u),m=l,b=d&&gr.a.isDocumentUploadEnabled(),y=gl.canCombineVideos(e),v=m,h=d&&gr.a.isDocumentUploadEnabled(),g=f&&gr.a.isMeetingEnabled(),E=o===pc.b.GROUP_PRESENTATION,w={label:""};return c?w.label=a._("This action will be available after the Reflection Questions have been completed"):i||(w.label=a._("This action is not available at this time")),n.isCengageEducator()&&(p=o===pc.b.INDIVIDUAL_PROJECT,v=!1,h=!1,g=!1,E=!1,w.label=o===pc.b.INDIVIDUAL_PROJECT?"":a._("This action is not available")),{tooltip:w,enabled:p,tools:(t={},Kb(t,Bu.VIDEO,{enabled:!0,tooltip:{label:""},visible:m}),Kb(t,Bu.FILE,{enabled:!0,tooltip:{label:""},visible:b}),Kb(t,Bu.LINK,{enabled:!0,tooltip:{label:""},visible:h}),Kb(t,Bu.MEETING,{enabled:!0,tooltip:{label:""},visible:g}),Kb(t,Bu.MILESTONE,{enabled:!0,tooltip:{label:""},visible:E}),Kb(t,Bu.COMBINED_VIDEO,{enabled:y,tooltip:{label:y?"":a._("This action requires at least two videos")},visible:v}),t)}})),Kb(zb(zb(n)),"isDownloadEnabled",(function(e,t){var n=!1,r=g.a.get(e,["attributes",Yu.DOWNLOAD_URL]);switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:n=Boolean(r);break;case Qu.MEETING:n=t&&r&&gr.a.isMeetingDownloadAllowed();break;case Qu.VIDEO:n=t&&Boolean(r)}return n})),Kb(zb(zb(n)),"isIncludeToggleEnabled",(function(e,t,r){var a=n.props,o=a.needReflectionAnswers,i=a.readOnly,c=a.lmsLocked;if(e.type===Qu.REFLECTION_ANSWERS||o)return!1;var s=!i&&!c;return!!s&&(e.type!==Qu.VIDEO||(s=t,e.isIncluded)?e.type!==Qu.MEETING||(s=t,e.isIncluded)?s:s&&!r&&!n.isAutoGradingWithAutoAnalysisEnabled():s&&!r)})),Kb(zb(zb(n)),"getItemAutoAnalysis",(function(e){return g.a.get(e,"itemState.autoAnalysis",null)})),Kb(zb(zb(n)),"getVideoItemsAutoAnalysis",(function(e){var t=[];return g.a.forEach(e,(function(e){var r=n.getItemAutoAnalysis(e);t.push(r)})),t})),Kb(zb(zb(n)),"getSubmitConfiguration",(function(e){var t=n.props,r=t.i18n,a=t.readOnly,o=t.lmsLocked,i=t.needReflectionAnswers,c=null,s=g.a.filter(gl.getIncludedItems(e),(function(e){return e.type!==Qu.REFLECTION_ANSWERS})),u=s.length>0?nl.ITEMS_READY:nl.ITEMS_REQUIRED,l=!0;if(a)l=!1,c={label:r._("You are not allowed to perform this action")};else if(o)l=!1;else if(i)l=!1,c={label:r._("You must complete the Reflection Questions")};else if(s.length<1)l=!1,c={label:r._("You do not have enough items included for submission")};else if(n.isAutoGradingWithAutoAnalysisEnabled()){var d=gl.filterItemsOfType(s,Qu.VIDEO),f={label:r._("You will be able to submit after including a video with an Auto Analysis\\u2122 report")};if(g.a.isEmpty(d))l=!1,c=f,u=nl.VIDEO_ITEM_REQUIRED;else{var p=n.getVideoItemsAutoAnalysis(d);if(g.a.isEmpty(p))l=!1,u=nl.ANALYSIS_PENDING;else{var m=!1,b=!1,y=!1;g.a.forEach(p,(function(e){if(e)if(e.error)m=!0;else if(e.data){var t=e.data.state;e.error||Jc.isAnalysisStatusError(t)?m=!0:(Jc.isAnalysisStatusPending(t)||Jc.isAnalysisStatusNotSubmitted(t))&&(b=!0)}else y=!0;else y=!0})),m?(l=!1,c=f,u=nl.ANALYSIS_ERROR):b?(l=!1,c=f,u=nl.ANALYSIS_PENDING):y&&(l=!1,c=f,u=nl.ANALYSIS_UNFETCHED)}}}return{enabled:l,tooltip:c,onSubmit:n.onSubmitAssignment,state:u}})),Kb(zb(zb(n)),"getDeleteActionConfig",(function(e){var t=n.props,r=t.needReflectionAnswers,a=t.readOnly,o=t.lmsLocked,i=!a&&!o&&!r,c=!0;return e.type===Qu.REFLECTION_ANSWERS&&(c=!1),{enabled:i,visible:c}})),Kb(zb(zb(n)),"getEditActionConfig",(function(e){var t=n.props,r=t.needReflectionAnswers,a=t.readOnly,o=t.lmsLocked,i=!a&&!o&&!r,c=!0;return e.type===Qu.REFLECTION_ANSWERS&&(c=!1),{enabled:i,visible:c}})),Kb(zb(zb(n)),"getIncludeToggleConfig",(function(e){var t=n.props,r=t.i18n,a=t.resultPartials,o=gl.isProcessing(e),i=gl.hasProcessingError(e),c=gl.isItemProcessed(e),s=gl.hasVideoInReadyToSubmitResultPartials(a),u=n.isIncludeToggleEnabled(e,c,s),l=e.type===Qu.MEETING,d=e.type===Qu.VIDEO||l,f=e.type===Qu.REFLECTION_ANSWERS,p=e.isIncluded?r._("Remove from Submission"):r._("Add to Submission"),m=p;return u||(f?m=r._("Your answers to the Reflection Questions are included in your submission."):i&&d?m=r._("An error occurred during processing. You will not be able to add this to your submission."):l&&n.isAutoGradingWithAutoAnalysisEnabled()?m=r._("Meetings cannot be included in your submission for this assignment."):!e.isIncluded&&d&&s?m=r._("You already have a video included in your submission. Only one video is allowed per submission."):o&&(m=r._("You can add this to the submission after it's done processing."))),{enabled:u,label:p,primaryActionVisible:!0,secondaryActionVisible:!f&&!0,primaryActionTooltip:{label:m},secondaryActionTooltip:{label:u?"":m}}})),Kb(zb(zb(n)),"getAutoAnalysisConfig",(function(e){var t=n.props,r=t.activityType,a=t.i18n,o=t.isAutoAnalysisEnabled,i=gr.a.getAutoAnalysisPermission();return{enabled:!i.isRestricted&&gl.isItemProcessed(e),visible:o&&i.isVisible&&Jc.isActivityTypeSupported(r),tooltip:{label:i.isRestricted?a._(i.restrictedMessage):a._("View Analysis")}}})),Kb(zb(zb(n)),"getPrimaryActions",(function(e){var t=n.state.workItemStates[e.key],r=g.a.get(t,Hu.INCLUDE_TOGGLE_SUBMITTING,!1),a=n.getIncludeToggleConfig(e),i=r?"":a.primaryActionTooltip.label;return[o.a.createElement($l,{key:"include-toggle-".concat(e.key),enabled:a.enabled,loading:r,item:e,tooltip:{label:i},onClick:function(){n.updateWorkItemStateProperty(e,Hu.INCLUDE_TOGGLE_SUBMITTING,!0,(function(){n.toggleIncludedWork(e)}))}})]})),Kb(zb(zb(n)),"getSecondaryActions",(function(e){if(n.props.isSmallViewport)return[];var t=n.props,r=t.activityId,a=t.isAutoAnalysisScoreVisible,i=t.termClassId,c=n.getAutoAnalysisConfig(e),s=gl.isItemProcessed(e),u=g.a.get(e,["attributes",Yu.PREVIEW_URL]),l=[];switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:l.push(o.a.createElement(td,{id:e.key,key:"secondary-action-launch-".concat(e.key),previewUrl:u}));break;case Qu.VIDEO:c.visible&&l.push(o.a.createElement(al,{key:"secondary-action-analysis-".concat(e.key),enabled:c.enabled,isAutoAnalysisScoreVisible:a,item:e,tooltip:c.tooltip})),l.push(o.a.createElement(Dd,{key:"secondary-action-preview-".concat(e.key),activityId:r,enabled:Boolean(s&&u),item:e,termClassId:i}));break;case Qu.MEETING:case Qu.REFLECTION_ANSWERS:l.push(o.a.createElement(Dd,{key:"secondary-action-preview-".concat(e.key),activityId:r,enabled:!0,item:e,termClassId:i}))}return l})),Kb(zb(zb(n)),"getOverflowActionsConfig",(function(e){var t=n.props.isSmallViewport;if(e.type===Qu.REFLECTION_ANSWERS&&!t)return{actions:[]};var r=n.props,a=r.activityId,i=r.i18n,c=r.isAutoAnalysisScoreVisible,s=r.resultPartials,u=r.termClassId,l=n.state.workItemStates,d=n.getAutoAnalysisConfig(e),f=gl.isItemProcessed(e),p=n.getIncludeToggleConfig(e),m=n.getEditActionConfig(e),b=n.getDeleteActionConfig(e),y=g.a.get(e,["attributes",Yu.PREVIEW_URL]),v=gl.getResultPartial(e,s),h=e.type!==Qu.LINK&&e.type!==Qu.REFLECTION_ANSWERS,E=n.isDownloadEnabled(e,f),w=l[e.key],S=g.a.get(w,Hu.INCLUDE_TOGGLE_SUBMITTING,!1),O=[];if(p.secondaryActionVisible&&(O.push(o.a.createElement(Jl,{key:"menu-action-toggle-".concat(e.key),enabled:p.enabled,label:p.label,item:e,tooltip:p.secondaryActionTooltip,onClick:function(){n.updateWorkItemStateProperty(e,Hu.INCLUDE_TOGGLE_SUBMITTING,!0,(function(){n.toggleIncludedWork(e)}))}})),O.push(o.a.createElement(so.a,{key:"toggle-menu-items-sep"}))),t)switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:O.push(o.a.createElement(ad,{key:"menu-action-launch-".concat(e.key),enabled:Boolean(y),item:e}));break;case Qu.VIDEO:O.push(o.a.createElement(Md,{key:"menu-action-preview-".concat(e.key),activityId:a,enabled:Boolean(f&&y),item:e,label:i._("Preview"),termClassId:u})),d.visible&&O.push(o.a.createElement(Gb,{key:"menu-action-analysis-".concat(e.key),enabled:d.enabled,isAutoAnalysisScoreVisible:c,item:e,tooltip:d.tooltip}));break;case Qu.MEETING:case Qu.REFLECTION_ANSWERS:O.push(o.a.createElement(Md,{key:"menu-action-preview-".concat(e.key),activityId:a,enabled:!0,item:e,label:i._("Preview"),termClassId:u}))}return h&&(O.push(o.a.createElement(_l,{key:"menu-action-download-".concat(e.key),enabled:E,item:e})),O.push(o.a.createElement(so.a,{key:"general-menu-items-sep"}))),m.visible&&O.push(o.a.createElement(Kl,{key:"menu-action-edit-".concat(e.key),enabled:m.enabled,item:e,resultPartial:v})),b.visible&&O.push(o.a.createElement(ul,{key:"menu-action-delete-".concat(e.key),enabled:b.enabled,item:e,resultPartial:v})),{actions:O,enabled:!S}})),Kb(zb(zb(n)),"getWorkItemConfig",(function(e){return{isProcessing:gl.isProcessing(e),hasProcessingError:gl.hasProcessingError(e),actions:{primary:n.getPrimaryActions(e),secondary:n.getSecondaryActions(e),overflow:n.getOverflowActionsConfig(e)}}})),n.state=qb({},Xb),n.mediaUrlToEndPollingFunc={},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hb(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.processAfterUpdate()}},{key:"componentDidUpdate",value:function(){this.processAfterUpdate()}},{key:"componentWillUnmount",value:function(){g.a.forEach(this.mediaUrlToEndPollingFunc,(function(e){return e()}))}},{key:"onAddMeeting",value:function(){Hn.a.showModal(o.a.createElement(ri,{mode:ea.CREATE}))}},{key:"onAddMilestone",value:function(){Hn.a.showModal(o.a.createElement(Ka,{mode:ea.CREATE}))}},{key:"render",value:function(){var e=this.props,t=e.resultPartials,n=e.reflectionAnswers,r=this.state.workItemStates,a=gl.getTranslatedResultPartials(t,n,this.getWorkItemConfig,r);return o.a.createElement(Fb,{workItems:a,createNewWorkItemConfiguration:this.getCreateNewWorkItemConfiguration(a),onCreateNewWorkItem:this.onCreateNewWorkItem,submitConfiguration:this.getSubmitConfiguration(a)})}}])&&Qb(n.prototype,r),a&&Qb(n,a),t}(o.a.PureComponent);Zb.propTypes={readOnly:M.a.bool,activityData:M.a.any,activityId:M.a.any,activityType:M.a.string,currentUser:M.a.object,institution:M.a.object,isDocumentToolEnabled:M.a.bool,isMeetingToolEnabled:M.a.bool,isReflectionQuestionsEnabled:M.a.bool,isSubmittable:M.a.bool,isAutoAnalysisEnabled:M.a.bool,isAutoAnalysisScoreVisible:M.a.bool,isVideoToolEnabled:M.a.bool,lmsLocked:M.a.bool,needReflectionAnswers:M.a.bool,reflectionAnswers:M.a.array,resultPartials:M.a.array,termClassId:M.a.any,isSmallViewport:M.a.bool,i18n:M.a.object},Zb.defaultProps={readOnly:!1};var Jb=Object(x.withI18n)()(Object(c.b)((function(e){return{activityData:et.getActivityData(e),activityId:et.getActivityId(e),activityType:et.getActivityType(e),currentUser:wt.h(e),institution:bb.h(e),isDocumentToolEnabled:et.isDocumentToolEnabled(e),isMeetingToolEnabled:et.isMeetingToolEnabled(e),isReflectionQuestionsEnabled:et.isReflectionQuestionsEnabled(e),isSubmittable:et.isSubmittable(e),isAutoAnalysisEnabled:et.isAutoAnalysisEnabled(e),isAutoAnalysisScoreVisible:et.isAutoAnalysisScoreEnabled(e),isVideoToolEnabled:et.isVideoToolEnabled(e),lmsLocked:et.getLmsLocked(e),needReflectionAnswers:et.needReflectionAnswers(e),reflectionAnswers:et.getReflectionAnswers(e),resultPartials:et.getResultPartials(e),termClassId:et.getTermClassId(e),isSmallViewport:mc.a(e).width<=ss.a.SMALL.max}}))(Zb)),ey=n("qBI/");n("1pdk");function ty(e){return(ty="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ny(e){return(ny=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ry(e,t){return(ry=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ay(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var oy=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=ny(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==ty(a)&&"function"!==typeof a?ay(r):a,i=ay(ay(n)),s=function(){var e=n.props,t=e.instructionsText,r=e.instructionsMedia,a=e.resultPartials,i=e.activityName,c=e.availablePeerReviews,s=e.i18n,u=e.rubric;return o.a.createElement(kn,{title:i,serviceMethod:Et.a.refreshGroupProgressActivity},o.a.createElement($r,null),o.a.createElement(Rr,{resultPartials:a}),o.a.createElement(ey.a,null),o.a.createElement(Zr.a,{title:s._("Instructions"),media:r,text:t,rubric:u}),o.a.createElement(la,null),o.a.createElement(So,null),o.a.createElement(Jb,null),c&&o.a.createElement(Up,null))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ry(e,t)}(t,e),t}(a.Component),iy=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),availablePeerReviews:et.getAvailablePeerReviews(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),resultPartials:et.getResultPartials(e),rubric:et.getRubric(e)}}))(oy))),cy=n("Wme0"),sy=n("45tj"),uy=n("0Kzw"),ly=function(e){return e.educator},dy=(Object(U.a)(ly,(function(e){return e.activity})),n("28FC")),fy=n("csv8"),py=Object(U.a)(ly,(function(e){return e?e.activity:null})),my=Object(U.a)(py,(function(e){return e.activityData})),by=Object(U.a)(py,(function(e){return e.isLoading})),yy=Object(U.a)(my,(function(e){return e.dataForOneStudent})),vy=Object(U.a)(my,(function(e){return e?e.dataForAllStudents:null})),hy=Object(U.a)(py,(function(e){return e?e.gradebookStudentData:null})),gy=Object(U.a)(my,(function(e){return e.studentGroup.members})),Ey=Object(U.a)(py,(function(e){return e.milestoneIsLoading})),wy=Object(U.a)(py,(function(e){return e.meetingIsLoading})),Sy=Object(U.a)(my,(function(e){return e.resultPartials})),Oy=Object(U.a)(py,(function(e){return e.resultsPartialsIsLoading})),Cy=Object(U.a)(py,(function(e){return e.selectedInProgressPartials})),_y=Object(U.a)(py,(function(e){return e.selectedReadyToSubmitPartials})),Ty=Object(U.a)(my,(function(e){return e.studentGroup.comments})),Iy=Object(U.a)(my,(function(e){return e.studentGroup.dbId})),Py=Object(U.a)(py,(function(e){return e.groupCommentsIsLoading})),Ry=Object(U.a)(yy,(function(e){return e.studentGroup.members})),Ay=Object(U.a)(py,(function(e){return e.teamEvalIsLoading})),jy=Object(U.a)(py,(function(e){return e.removeSubmissionIsLoading})),ky=Object(U.a)(py,(function(e){return e.peerReviewCommentIsLoading})),Ny=Object(U.a)(py,(function(e){return e.previewIsLoading})),Dy=Object(U.a)(my,(function(e){return e.commentaryMedia})),Ly=Object(U.a)(my,(function(e){return e.commentaryText})),My=Object(U.a)(yy,(function(e){return e?e.studentGroup:null})),xy=Object(U.a)(My,(function(e){return e?e.name:""})),Fy=Object(U.a)(yy,(function(e){return e?e.result:null})),Vy=Object(U.a)(my,(function(e){return e.qaSettings})),Gy=Object(U.a)(my,(function(e){return e.studentGroup.reviewType})),Uy=Object(U.a)(py,(function(e){return e.showGroupMembers})),qy=Object(U.a)(my,(function(e){return e?e.type:null})),Wy=Object(U.a)(my,(function(e){return e?e.studentGroups:null})),By=Object(U.a)(my,(function(e){return e?e.dbId:null})),Qy=Object(U.a)(my,(function(e){return e?e.name:null})),Yy=Object(U.a)(my,(function(e){return e?e.gradeReportUrl:null})),Hy=Object(U.a)(my,(function(e){return e?e.commentsReportUrl:null})),zy=Object(U.a)(my,(function(e){return e?e.submitDueAt:null})),Ky=Object(U.a)(my,(function(e){return e?e.dataForOneStudent:null})),Xy=Object(U.a)(Ky,(function(e){return e?e.resultPartials:null})),$y=Object(U.a)(Ky,(function(e){return e?e.resultPartialsCreatedCount:null})),Zy=Object(U.a)(Ky,(function(e){return e?e.result:null})),Jy=Object(U.a)(Fy,(function(e){return e?e.submitter:null})),ev=Object(U.a)(Jy,(function(e){return e?e.dbId:null})),tv=Object(U.a)(my,(function(e){return e.rubric})),nv=Object(U.a)(my,(function(e){return e.groupReviewRubric})),rv=Object(U.a)(my,(function(e){return e?e.rubricPeerAllowed:null})),av=Object(U.a)(my,(function(e){return e.rubricSelfAllowed})),ov=Object(U.a)(my,(function(e){return e?e.studentFivestarValuationEnabled:null})),iv=Object(U.a)(py,(function(e){return e.feedbackCommentIsLoading})),cv=Object(U.a)(py,(function(e){return e.activityCommentIsLoading})),sv=Object(U.a)(py,(function(e){return e.currentGradingStudentId})),uv=Object(U.a)(py,(function(e){return e.deleteResultIsLoading})),lv=Object(U.a)(my,(function(e){return e?e.termClass:null})),dv=Object(U.a)(lv,(function(e){return e?e.dbId:null})),fv=Object(U.a)(Ky,(function(e){return e?e.rubricEvaluations:null})),pv=Object(U.a)(My,(function(e){return e?e.reviewReleasedAt:null})),mv=Object(U.a)(My,(function(e){return e?e.isReviewAnonymous:null})),bv=Object(U.a)(my,(function(e){return e?e.groupReviewType:null})),yv=Object(U.a)(yy,(function(e){return e?e.qaAnswers:null})),vv=Object(U.a)(py,(function(e){return e.deleteQAAnswerIsLoading})),hv=Object(U.a)(py,(function(e){return e.activityDataWithContext})),gv=Object(U.a)(my,(function(e){return e.isVideoAnalysisScoreEnabled})),Ev=Object(U.a)(my,(function(e){return e.autoAnalysisEnabled===dy.a.ENABLED})),wv=Object(U.a)(my,(function(e){return gr.a.isReflectionQuestionsAllowed()?e.reflectStageSettings:null})),Sv=Object(U.a)(wv,(function(e){return Boolean(e)&&e.reflectStageEnabled})),Ov=Object(U.a)(wv,(function(e){return gr.a.isReflectionQuestionsAllowed()&&Boolean(e)?e.reflectQuestions:[]})),Cv=Object(U.a)(Ov,(function(e){return Boolean(e)&&e.length>0})),_v=Object(U.a)(Sv,yy,(function(e,t){return e?t.reflectAnswers:[]})),Tv=Object(U.a)(_v,(function(e){return Boolean(e)&&e.length>0})),Iv=Object(U.a)(Sv,Cv,Tv,(function(e,t,n){return e&&t&&!n})),Pv=Object(U.a)(my,(function(e){return Boolean(e.peerReviewType)})),Rv=Object(U.a)(my,(function(e){return e.peerReviewType})),Av=Object(U.a)(my,(function(e){return e.peerReviewAmount})),jv=Object(U.a)(my,(function(e){return e.peerReviewDueAt})),kv=Object(U.a)(yy,(function(e){return e.reviewedResults?e.reviewedResults:[]})),Nv=Object(U.a)(kv,ev,(function(e,t){return g.a.filter(e,(function(e){return e.result&&e.result.submitter&&+e.result.submitter.dbId!==+t}))})),Dv=Object(U.a)(my,Pv,(function(e,t){return!(!t||!gr.a.isGradedPeerReviewAllowed())&&Boolean(e[fy.b.SETTINGS_ENABLED])})),Lv=Object(U.a)(Dv,my,(function(e,t){return e?t[fy.b.SETTINGS_WEIGHT]:null})),Mv=Object(U.a)(my,(function(e){return e.isCommentingAnonymous})),xv=Mv,Fv=Object(U.a)(my,(function(e){return e.peerReviewSubmitterAnonymous})),Vv=Object(U.a)(yy,(function(e){return e.educatorGrade})),Gv=Object(U.a)(Vv,(function(e){return e?e.overallValue:null})),Uv=Object(U.a)(Vv,(function(e){return e?e.gradeParts:null})),qv=Object(U.a)(Uv,(function(e){return e?g.a.find(e,{type:rc.a.ACTIVITY_RESULT}):null})),Wv=Object(U.a)(Uv,(function(e){return e?g.a.find(e,{type:rc.a.PEER_REVIEW}):null})),Bv=Object(U.a)(Uv,(function(e){return e?g.a.find(e,{type:rc.a.INTERACTIVE_VIDEO}):null})),Qv=Object(U.a)(yy,(function(e){return e.isGradeDraftAllowed})),Yv=Object(U.a)(my,(function(e){return e?e.gradeType:null})),Hv=function(e){return e===tl.EDUCATOR?r:et},zv=function(e,t){return Hv(t).getActivityId(e)},Kv=function(e,t){return Hv(t).getActivityType(e)},Xv=function(e,t){return Hv(t).hasReflectionAnswers(e)},$v=function(e,t){return Hv(t).isAutoAnalysisEnabled(e)},Zv=function(e,t){return Hv(t).isAutoAnalysisScoreEnabled(e)},Jv=function(e,t){return Hv(t).isFiveStarEnabled(e)},eh=function(e,t){return Hv(t).isRubricReviewEnabled(e)},th=function(e,t){return t!==tl.EDUCATOR&&et.isRubricSelfReviewEnabled(e)},nh=function(e,t){return Hv(t).needReflectionAnswers(e)},rh=function(e,t){return Hv(t).getReflectionAnswers(e)},ah=function(e,t){return t===tl.EDUCATOR?Zy(e):et.getActivityResult(e)},oh=function(e,t){return Hv(t).getRubric(e)},ih=function(e,t){return Hv(t).getRubricEvaluations(e)},ch=function(e,t){return t===tl.EDUCATOR?yy(e):et.getMyData(e)},sh=function(e,t){return Hv(t).getActivityResultSubmitter(e)},uh=function(e,t){return Hv(t).getTermClassId(e)};n("7H7w");function lh(e){return(lh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fh(e){return(fh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ph(e,t){return(ph=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yh=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=fh(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==lh(a)&&"function"!==typeof a?mh(r):a,bh(mh(mh(n)),"showPeerReviewReport",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Peer Reviews"),rubricEvaluations:e}))})),bh(mh(mh(n)),"getCardHeader",(function(){var e=n.props.title;return o.a.createElement("div",{className:"md-card-title md-card-title--primary card-title post-submission-card-header"},o.a.createElement("h2",{className:"section-header"},e),o.a.createElement("div",{className:"post-submission-feedback-rating-container"},n.getRatingComponent()))})),bh(mh(mh(n)),"getRatingComponent",(function(){var e=n.props,t=e.rubric,r=e.rubricPeerEvaluations,a=e.isFiveStarEnabled,i=e.isRubricReviewEnabled,c=e.studentData,s=e.i18n;if(a){var u=0;return c&&c.peerReview&&(u=c.peerReview.fiveStarValue),o.a.createElement("div",{className:"post-submission-fivestar-container"},o.a.createElement(Dn.a,{name:"feedback-review-rating",enabled:!1,value:u}),o.a.createElement("span",null,"(",c.peerReview.fiveStarRatesAmount,")"))}if(i){var l=g.a.get(c,"peerReview.rubricGrade",0);return o.a.createElement("div",{className:"post-submission-rubric-result-container"},o.a.createElement("span",null,s._("Peer Review")),o.a.createElement(Ue.a,{id:"button-grading-feedback-peer-review-rubric",enabled:!!r.length,onClick:n.showPeerReviewReport.bind(null,r),className:"post-submission-rubric-result-button",ariaLabel:s._("Peer Review"),primary:!0},o.a.createElement(Bn.c,{points:l,max:t.maxValue})))}})),bh(mh(mh(n)),"getAssessmentRatingComponent",(function(){var e=n.props,t=e.i18n,r=e.isRubricSelfReviewEnabled,a=e.isTestStudent,i=e.onEditSelfAssessmentRubric,c=e.rubric,s=e.studentRubricSelfEvaluation;if(!r)return null;var u=0;return s&&(u=s.points),o.a.createElement("div",{className:"self-assessment-container"},o.a.createElement("div",{className:"self-assessment-rubric-results"},t._("Rubric Self Assessment"),o.a.createElement(Ue.a,{id:"button-feedback-self-assessment-rubric",ariaLabel:t._("Rubric Self Assessment"),onClick:i,enabled:!a,className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:u,max:c.maxValue}))),a&&o.a.createElement(ya.b,{type:ya.a.INFO},o.a.createElement("p",null,t._("Feedback is not allowed for test students"))))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ph(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.activityCommentIsLoading,r=e.comments,a=e.commentPresets,i=e.getCommentConfig,c=e.onAddVideoComment,s=e.onCommentChange,u=e.onDeleteComment,l=e.onEditComment,d=e.onPresetDropdownVisibilityChange,f=e.onPresetMessageChange,p=e.onSubmitComment,m=e.onSyncTimeClick,b=e.scrollCommentsToBottom,y=e.termClassId,v=e.workItems;return o.a.createElement(K.a,{className:Ie()("post-submission-card")},this.getCardHeader(),o.a.createElement(vp,{activityId:t,activityCommentIsLoading:n,assessmentRatingComponent:this.getAssessmentRatingComponent(),comments:r,commentPresets:a,getCommentConfig:i,onAddVideoComment:c,onDeleteComment:u,onEditComment:l,onCommentChange:s,onPresetDropdownVisibilityChange:d,onPresetMessageChange:f,onSubmitComment:p,onSyncTimeClick:m,scrollCommentsToBottom:b,termClassId:y,workItems:v}))}}])&&dh(n.prototype,r),a&&dh(n,a),t}(o.a.PureComponent);yh.defaultProps={activityCommentIsLoading:!1,comments:[],commentPresets:[],isFiveStarEnabled:!1,isRubricReviewEnabled:!1,isRubricSelfReviewEnabled:!1,isTestStudent:!1,onPresetDropdownVisibilityChange:function(){},onPresetMessageChange:function(){},rubric:{},rubricPeerEvaluations:[],scrollCommentsToBottom:!1},yh.propTypes={activityCommentIsLoading:M.a.bool,activityId:M.a.number.isRequired,className:M.a.string,comments:M.a.array,commentPresets:M.a.array,getCommentConfig:M.a.func.isRequired,i18n:M.a.any.isRequired,isFiveStarEnabled:M.a.bool,isRubricReviewEnabled:M.a.bool,isRubricSelfReviewEnabled:M.a.bool,isTestStudent:M.a.bool,onAddVideoComment:M.a.func.isRequired,onCommentChange:M.a.func.isRequired,onDeleteComment:M.a.func.isRequired,onEditComment:M.a.func.isRequired,onEditSelfAssessmentRubric:M.a.func,onPresetDropdownVisibilityChange:M.a.func,onPresetMessageChange:M.a.func,onSubmitComment:M.a.func.isRequired,onSyncTimeClick:M.a.func.isRequired,rubric:M.a.object,rubricPeerEvaluations:M.a.array,scrollCommentsToBottom:M.a.bool,studentData:M.a.object.isRequired,studentRubricSelfEvaluation:M.a.object,termClassId:M.a.number.isRequired,title:M.a.string.isRequired,workItems:M.a.array.isRequired};var vh=Object(x.withI18n)()(Object(s.a)(yh));function hh(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function gh(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){hh(o,r,a,i,c,"next",e)}function c(e){hh(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Eh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wh=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Eh(this,"addComment",function(){var e=gh(regeneratorRuntime.mark((function e(t,n,r,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o!==tl.EDUCATOR){e.next=5;break}return e.next=3,sn.a.createActivityCommentText(t,n,r,a);case 3:e.next=11;break;case 5:if(o!==tl.STUDENT){e.next=10;break}return e.next=8,Et.a.addFeedbackComment(t,n,r,a);case 8:e.next=11;break;case 10:throw new Error("Unknown context for adding comment.");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),Eh(this,"addVideoComment",function(){var e=gh(regeneratorRuntime.mark((function e(t,n,r,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o!==tl.EDUCATOR){e.next=5;break}return e.next=3,sn.a.createActivityCommentMedia(t,n,r,a);case 3:e.next=11;break;case 5:if(o!==tl.STUDENT){e.next=10;break}return e.next=8,Et.a.addFeedbackCommentVideo(t,n,r,a);case 8:e.next=11;break;case 10:throw new Error("Unknown context for adding video comment.");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),Eh(this,"editComment",function(){var e=gh(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==tl.EDUCATOR){e.next=5;break}return e.next=3,sn.a.editFeedbackComment(t,n);case 3:e.next=11;break;case 5:if(r!==tl.STUDENT){e.next=10;break}return e.next=8,Et.a.editFeedbackComment(t,n);case 8:e.next=11;break;case 10:throw new Error("Unknown context for editing comment.");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()),Eh(this,"deleteComment",function(){var e=gh(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==tl.EDUCATOR){e.next=5;break}return e.next=3,sn.a.deleteActivityComment(t,n);case 3:e.next=11;break;case 5:if(r!==tl.STUDENT){e.next=10;break}return e.next=8,Et.a.deleteFeedbackComment(t,n);case 8:e.next=11;break;case 10:throw new Error("Unknown context for deleting comment.");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()),Eh(this,"createRubricPeerReview",function(){var e=gh(regeneratorRuntime.mark((function e(t,n,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==tl.STUDENT){e.next=5;break}return e.next=3,Et.a.createRubricPeerReview(t,n,r,!0);case 3:e.next=6;break;case 5:throw new Error("Unknown context for creating rubric peer review.");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}())};function Sh(e){return(Sh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oh(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ch(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Oh(o,r,a,i,c,"next",e)}function c(e){Oh(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Th(e){return(Th=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ih(e,t){return(Ih=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ph(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ah={commentIsLoading:!1,scrollCommentsToBottom:!1},jh=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Th(t).call(this,e),n=!a||"object"!==Sh(a)&&"function"!==typeof a?Ph(r):a,Rh(Ph(Ph(n)),"scrollToBottom",(function(){n.setState({scrollCommentsToBottom:!0},(function(){n.setState({scrollCommentsToBottom:!1})}))})),Rh(Ph(Ph(n)),"getPlayerTime",(function(e){var t=n.props.studentData.resultPartials,r=fc.c(e,Ft.a.getState());return null===r?gl.hasVideoInReadyToSubmitResultPartials(t)?0:null:+r.toFixed(1)-.1})),Rh(Ph(Ph(n)),"pauseVideoPlayback",(function(e){var t=n.props.dispatch;if(e&&fc.b(e,Ft.a.getState(),"isPlaying")){var r=n.getPlayerTime(e);t(dc.r(e)),n.globalPlayerEmitter.pause({playerId:e,startTime:r}),n.resumeVideoAfterMessageSubmit=!0}})),Rh(Ph(Ph(n)),"finalizeCommentState",(function(e){var t=n.props.dispatch;n.scrollToBottom(),n.resumeVideoAfterMessageSubmit&&(n.globalPlayerEmitter.play({playerId:e,startTime:n.getPlayerTime()}),t(dc.s(e))),n.setState({commentIsLoading:!1}),n.resumeVideoAfterMessageSubmit=!1})),Rh(Ph(Ph(n)),"onCommentChange",(function(e,t){n.pauseVideoPlayback(t)})),Rh(Ph(Ph(n)),"onSubmitComment",function(){var e=Ch(regeneratorRuntime.mark((function e(t,r){var a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,o=a.activityId,i=a.submitter,c=a.userId,s=a.viewContext,u=c,s===tl.EDUCATOR&&(u=i.dbId),n.setState({commentIsLoading:!0}),e.next=6,wh.addComment(+o,u,t,n.getPlayerTime(r),s);case 6:n.finalizeCommentState(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Rh(Ph(Ph(n)),"onAddVideoComment",(function(e){var t=n.props.activityId;n.pauseVideoPlayback(e),Di.a.isRecorderSupported()&&!lc.b()?Hn.a.showModal(o.a.createElement(Qi,{activityId:+t,mediaType:Hi.a.COMMENT,id:"FeedbackCommentRecorder",onComplete:function(t){t&&t.masterMediaId&&n.onAddVideoComplete(t.masterMediaId,e)}})):Hn.a.showModal(o.a.createElement(ec,{activityId:+t,mediaType:Hi.a.COMMENT,showImportFromCloud:!1,onComplete:function(t){t&&t[0]&&n.onAddVideoComplete(t[0],e)}}))})),Rh(Ph(Ph(n)),"onAddVideoComplete",function(){var e=Ch(regeneratorRuntime.mark((function e(t,r){var a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,o=a.activityId,i=a.result,c=a.userId,s=a.viewContext,t){e.next=3;break}return e.abrupt("return");case 3:return u=c,s===tl.EDUCATOR&&(u=i.submitter.dbId),e.next=7,wh.addVideoComment(+o,u,t,n.getPlayerTime(r),s);case 7:n.finalizeCommentState(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Rh(Ph(Ph(n)),"onAddPreset",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(Ni,{id:"add-comment-preset-dialog",description:t._("Are you sure you want to add this comment as a preset?"),cancelLabel:t._("No"),confirmLabel:t._("Yes"),title:t._("Add Preset"),onConfirm:Ch(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uy.a.addPresetComment(e.commentText);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}))})),Rh(Ph(Ph(n)),"onPresetDropdownVisibilityChange",(function(e,t){var r=n.props.dispatch;e?n.pauseVideoPlayback(t):n.resumeVideoAfterMessageSubmit&&(n.globalPlayerEmitter.play({playerId:t,startTime:n.getPlayerTime()}),r(dc.s(t)),n.resumeVideoAfterMessageSubmit=!1)})),Rh(Ph(Ph(n)),"onPresetMessageChange",(function(e,t){n.pauseVideoPlayback(t),n.onSubmitComment(e,t)})),Rh(Ph(Ph(n)),"onEditComment",(function(e){var t=n.props.viewContext;Hn.a.showModal(o.a.createElement(nf,{comment:e,onConfirm:function(){var e=Ch(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh.editComment(n.dbId,n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}))})),Rh(Ph(Ph(n)),"onDeleteComment",(function(e){var t=n.props,r=t.activityId,a=t.i18n,i=t.viewContext;Hn.a.showModal(o.a.createElement(Ni,{id:"delete-review-item-dialog",description:a._("Are you sure you want to delete this comment?"),cancelLabel:a._("No"),confirmLabel:a._("Yes"),title:a._("Delete Comment"),onConfirm:Ch(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wh.deleteComment(+r,e.dbId,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}))})),Rh(Ph(Ph(n)),"onEditSelfAssessmentRubric",(function(){var e=n.props,t=e.activityId,r=e.result,a=e.rubric,i=e.userId,c=e.viewContext,s=null,u=null;r&&r.myRubricEvaluation&&(s=r.myRubricEvaluation.points,u=r.myRubricEvaluation.cells.map((function(e){return e.dbId}))),Hn.a.showModal(o.a.createElement(Bn.b,{rubric:a,rubricPoints:s,grade:u,mode:Qn.a.GRADE,onCancel:Hn.a.closeModal,onSubmit:function(){var e=Ch(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh.createRubricPeerReview(t,i,n,c);case 2:Hn.a.closeModal();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}))})),Rh(Ph(Ph(n)),"onSyncTimeClick",(function(e,t){var r=n.props.dispatch,a=n.getPlayerTime(t),o=e;r(dc.B(t,o)),n.globalPlayerEmitter.seek({playerId:t,startTime:a,endTime:o})})),Rh(Ph(Ph(n)),"getWorkItemConfig",(function(e){return{actions:{primary:[],secondary:n.getSecondaryActions(e)}}})),Rh(Ph(Ph(n)),"isDownloadEnabled",(function(e,t){var n=!1,r=g.a.get(e,["attributes",Yu.DOWNLOAD_URL]);switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:n=Boolean(r);break;case Qu.MEETING:n=t&&r&&gr.a.isMeetingDownloadAllowed();break;case Qu.VIDEO:n=t&&Boolean(r)}return n})),Rh(Ph(Ph(n)),"getSecondaryActions",(function(e){var t=n.props,r=t.activityType,a=t.isAutoAnalysisEnabled,i=t.isAutoAnalysisScoreVisible,c=t.needReflectionAnswers,s=t.reflectionAnswers,u=t.i18n,l=[],d=g.a.get(e,["attributes",Yu.PREVIEW_URL]),f=gr.a.getAutoAnalysisPermission(),p=!f.isRestricted&&gl.isItemProcessed(e),m=a&&f.isVisible&&Jc.isActivityTypeSupported(r),b=f.isRestricted?u._(f.restrictedMessage):u._("View Analysis"),y=gl.isItemProcessed(e),v=n.isDownloadEnabled(e,y);switch(e.type){case Qu.FILE:case Qu.IMAGE:case Qu.LINK:var h="item-action-launch[".concat(e.key,"]");l.push(o.a.createElement(td,{id:h,key:h,previewUrl:d}));break;case Qu.REFLECTION_ANSWERS:var E="item-action-reflection-answers[".concat(e.key,"]");l.push(o.a.createElement(Fd,{key:E,item:e,answers:s,needAnswers:c,enabled:!0}));break;case Qu.VIDEO:if(m){var w="item-action-auto-analysis[".concat(e.key,"]");l.push(o.a.createElement(al,{key:w,item:e,enabled:p,isAutoAnalysisScoreVisible:i,tooltip:{label:b}}))}}return e.type!==Qu.REFLECTION_ANSWERS&&e.type!==Qu.LINK&&l.push(o.a.createElement(Sl,{key:e.key,item:e,enabled:v})),l})),Rh(Ph(Ph(n)),"getComments",(function(){var e=n.props.result.comments;return e?g.a.orderBy(e,["syncTime","updatedAt"],["asc","asc"]):{}})),Rh(Ph(Ph(n)),"getCommentActions",(function(e){var t=n.props,r=t.i18n,a=t.commentPresets,i=[],c=g.a.find(a,(function(t){return t.commentText===e.commentText}));return i.push({primaryText:r._("Add as Preset"),disabled:Boolean(c),onClick:function(){n.onAddPreset(e)},leftIcon:o.a.createElement(zt.a,null,Je.a.ADD)},{primaryText:r._("Edit"),onClick:function(){n.onEditComment(e)},leftIcon:o.a.createElement(zt.a,null,Je.a.EDIT)},{primaryText:r._("Delete"),onClick:function(){n.onDeleteComment(e)},leftIcon:o.a.createElement(zt.a,null,Je.a.DELETE)}),i})),Rh(Ph(Ph(n)),"getCommentConfig",(function(e){var t=n.props,r=t.i18n,a=t.userId,i=t.viewContext,c=e.commenter&&e.commenter.dbId===a;if(i===tl.STUDENT)return{canDelete:c,canEdit:c};var s=!c&&e.commenter&&ar.b(e.commenter),u=null;return c&&(u=[o.a.createElement(Ue.e,{id:"review-comment-menu-button-"+e.dbId,key:"review-comment-menu-button-"+e.dbId,icon:!0,className:"review-edit-comment-button",menuItems:n.getCommentActions(e),ariaLabel:r._("Comment options")},Je.a.MENU_VERT)]),{canDelete:!s,canEdit:!s,customActions:u}})),n.globalPlayerEmitter=new tc.a,n.state=Ah,n.resumeVideoAfterMessageSubmit=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ih(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.commentIsLoading,n=e.scrollCommentsToBottom,r=this.props,a=r.activityId,i=r.activityType,c=r.commentPresets,s=r.i18n,u=r.isFiveStarEnabled,l=r.isRubricReviewEnabled,d=r.isRubricSelfReviewEnabled,f=r.reflectionAnswers,p=r.result,m=r.rubric,b=r.rubricEvaluations,y=r.studentData,v=r.termClassId,h=r.userData,g=r.viewContext;if(!p)return null;var E=y.resultPartials,w=gl.getTranslatedResult(p,this.getWorkItemConfig,f,E),S=gl.getFilteredRubricEvaluations(i,b,y),O=g===tl.EDUCATOR?s._("Submission"):s._("My Submission");return o.a.createElement(vh,{activityCommentIsLoading:t,activityId:a,comments:this.getComments(),commentPresets:c,isFiveStarEnabled:u,isRubricReviewEnabled:l,isRubricSelfReviewEnabled:d,isTestStudent:ar.h(h),getCommentConfig:this.getCommentConfig,getWorkItemActions:this.getWorkItemActions,onAddVideoComment:this.onAddVideoComment,onCommentChange:this.onCommentChange,onDeleteComment:this.onDeleteComment,onEditComment:this.onEditComment,onEditSelfAssessmentRubric:this.onEditSelfAssessmentRubric,onPresetDropdownVisibilityChange:this.onPresetDropdownVisibilityChange,onPresetMessageChange:this.onPresetMessageChange,onSubmitComment:this.onSubmitComment,onSyncTimeClick:this.onSyncTimeClick,rubric:m,rubricPeerEvaluations:S,scrollCommentsToBottom:n,studentData:y,studentRubricSelfEvaluation:p.myRubricEvaluation,termClassId:v,title:O,workItems:w})}}])&&_h(n.prototype,r),a&&_h(n,a),t}(o.a.PureComponent);jh.propTypes={activityId:M.a.number,activityType:M.a.string,commentPresets:M.a.array,dispatch:M.a.func,i18n:M.a.any.isRequired,isFiveStarEnabled:M.a.bool,isAutoAnalysisEnabled:M.a.bool,isAutoAnalysisScoreVisible:M.a.bool,isRubricReviewEnabled:M.a.bool,isRubricSelfReviewEnabled:M.a.bool,needReflectionAnswers:M.a.bool,reflectionAnswers:M.a.array,result:M.a.object,rubric:M.a.object,rubricEvaluations:M.a.array,studentData:M.a.object,submitter:M.a.object,termClassId:M.a.number,userData:M.a.object,userId:M.a.number,viewContext:M.a.string.isRequired};jh.SUBMISSION_VIEW_CONTEXT=tl;var kh=Object(x.withI18n)()(Object(c.b)((function(e,t){var n=t.viewContext;return{activityId:zv(e,n),activityType:Kv(e,n),hasReflectionAnswers:Xv(e,n),isAutoAnalysisEnabled:$v(e,n),isAutoAnalysisScoreVisible:Zv(e,n),isFiveStarEnabled:Jv(e,n),isRubricReviewEnabled:eh(e,n),isRubricSelfReviewEnabled:th(e,n),needReflectionAnswers:nh(e,n),reflectionAnswers:rh(e,n),result:ah(e,n),rubric:oh(e,n),rubricEvaluations:ih(e,n),studentData:ch(e,n),submitter:sh(e,n),termClassId:uh(e,n),commentPresets:wt.a(e),userId:wt.i(e),userData:wt.h(e)}}))(jh));function Nh(e){return(Nh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dh(e){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lh(e,t){return(Lh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fh=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Dh(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Nh(a)&&"function"!==typeof a?Mh(r):a,xh(Mh(Mh(n)),"state",{showMilestoneDialog:!1,showMeetingDialog:!1}),xh(Mh(Mh(n)),"createMeeting",(function(){n.setState({showMeetingDialog:!0})})),xh(Mh(Mh(n)),"onMeetingDialogCancel",(function(){n.setState({showMeetingDialog:!1})})),xh(Mh(Mh(n)),"onMeetingDialogSubmit",(function(e){n.setState({showMeetingDialog:!1});var t=e.scheduledAt,r=e.title,a=n.props.activityId;a=+a;var o={title:r,scheduledAt:t};Et.a.createMeeting(a,o)})),xh(Mh(Mh(n)),"createMilestone",(function(){n.setState({showMilestoneDialog:!0})})),xh(Mh(Mh(n)),"onMilestoneCancel",(function(){n.setState({showMilestoneDialog:!1})})),xh(Mh(Mh(n)),"onMilestoneSubmit",(function(e){n.setState({showMilestoneDialog:!1});var t=e.dueDate,r=e.description,a=e.selectedUsers,o=e.status,i=n.props,c=i.studentGroup.dbId,s=i.activityId;s=+s;var u={groupDbId:c,dbId:e.dbId,dueDate:t,description:r,status:o,assignedTo:a?a.map((function(e){return+e})):[]};Et.a.createMilestone(s,u)})),xh(Mh(Mh(n)),"getDescription",(function(){var e=n.props,t=e.i18n,r=e.groupName,a=e.locale,i=e.result,c=null;if(i){var s=i.submitter,u=i.submittedAt,l="".concat(s.firstName," ").concat(s.lastName),d=new Date(1e3*u),f=Object(Er.e)(d,dt.a.SHORT,Object(sy.d)(a));c=o.a.createElement("div",null,t._("Submitted by: {submittedBy} ({submittedAtString})",{submittedBy:l,submittedAtString:f}))}return o.a.createElement("div",null,o.a.createElement("div",null,t._("Group: {groupName}",{groupName:r})),c)})),xh(Mh(Mh(n)),"render",(function(){var e=n.props,t=e.activityName,r=e.postSubmissionMedia,a=e.postSubmisstionText,i=e.i18n;return o.a.createElement(kn,{title:t,description:n.getDescription(),serviceMethod:Et.a.refreshGroupSubmittedActivity},o.a.createElement("div",null,o.a.createElement(Ur.a,null),o.a.createElement(xr,null),o.a.createElement(Zr.a,{title:i._("Post-Submission Instructions"),media:r,text:a}),o.a.createElement(Up,null),o.a.createElement(kh,{viewContext:kh.SUBMISSION_VIEW_CONTEXT.STUDENT})))})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lh(e,t)}(t,e),t}(a.Component),Vh=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),activityName:et.getActivityName(e),comments:et.getActivityLog(e),locale:cy.a(e),postSubmissionMedia:et.getPostSubmissionMedia(e),postSubmisstionText:et.getPostSubmissionText(e),groupName:et.getStudentGroupName(e),result:et.getActivityResult(e),studentGroup:et.getStudentGroup(e)}}))(Fh))),Gh=(n("dp1i"),n("Rso3"));function Uh(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    mutation skip($input: DistributeTestStudentsInput!){\n        distributeTestStudentsForActivity(input: $input){\n            activity {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return Uh=function(){return e},e}function qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"skip",value:function(e){return Lt.a.mutate({mutation:Bh,variables:{input:{dbId:e}}}).then((function(e){var t=e.data.distributeTestStudentsForActivity.errors;return t&&t.length>0?Promise.reject(t):Promise.resolve(e.data.distributeTestStudentsForActivity.activity.dbId)}))}}],(n=null)&&qh(t.prototype,n),r&&qh(t,r),e}(),Bh=xt()(Uh()),Qh=n("BulX"),Yh=n("DbOS");function Hh(e){return(Hh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zh(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Kh(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zh(o,r,a,i,c,"next",e)}function c(e){zh(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $h(e){return($h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zh(e,t){return(Zh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tg=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=$h(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Hh(a)&&"function"!==typeof a?Jh(r):a,eg(Jh(Jh(n)),"state",{loading:!1}),eg(Jh(Jh(n)),"clickHandler",Kh(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.match.params,a=r.activityId,o=r.classId,i=t.i18n,e.prev=1,n.setState({loading:!0}),e.next=5,Wh.skip(+a);case 5:n.setState({loading:!1}),c=V.a.compile(Qh.j.STUDENT_ACTIVITY)({activityId:a,classId:o}),c=Object(pl.b)(c),c=Object(Yh.a)(c),window.location.href=c,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),H.b.error(e.t0),n.setState({loading:!1}),yc.a.addError(i._("Failed to skip group formation step"));case 17:case"end":return e.stop()}}),e,this,[[1,12]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zh(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.currentUser;return ar.h(e)&&this.props.children&&g.a.isFunction(this.props.children)?this.props.children({clickHandler:this.clickHandler,loading:this.state.loading}):null}}])&&Xh(n.prototype,r),a&&Xh(n,a),t}(a.Component),ng=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{currentUser:wt.h(e)}}))(tg)));function rg(e){return(rg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function og(e){return(og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ig(e,t){return(ig=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ug=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=og(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==rg(a)&&"function"!==typeof a?cg(r):a,sg(cg(cg(n)),"onBackClick",(function(){var e=n.props,t=e.match,r=e.history,a=V.a.compile(xee.STUDENT_ACTIVITY_LIST)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sg(e,t,n[t])}))}return e}({},t.params));r.push(a)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ig(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement($t.a,{title:e._("Group Selection")},o.a.createElement(K.a,{className:"group-formation-error-card"},o.a.createElement(K.c,null,o.a.createElement(Gh.a,null),gr.a.isStudentAssignmentNavigationVisible()&&o.a.createElement(Ue.a,{id:"button-not-in-group-back-to-assignments",primary:!0,className:"group-formation-error-back-button",onClick:this.onBackClick,ariaLabel:e._("Back to Assignments"),iconEl:o.a.createElement(zt.a,null,Je.a.BACK)},e._("Back to Assignments")),o.a.createElement("div",{className:"group-formation-error"},o.a.createElement(zt.a,null,Je.a.INFO_OUTLINE),o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"You have not yet been placed in a group for this assignment. Please contact your instructor to be placed in a group."})))),o.a.createElement("div",{className:"u-full-width"},o.a.createElement(ng,null,(function(t){var n=t.loading,r=t.clickHandler;return o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(Ue.a,{id:"button-not-in-group-skip",primary:!0,isLoading:n,onClick:r,ariaLabel:e._("View Assignment")},e._("View Assignment")))})))))}}])&&ag(n.prototype,r),a&&ag(n,a),t}(a.Component),lg=Object(c.b)((function(e){return{isDeepLinkingEnabled:bb.v(e),institution:bb.h(e)}}))(Object(x.withI18n)()(Object(s.a)(ug)));n("kE32");function dg(e){return(dg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fg(e){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pg(e,t){return(pg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yg={renderOldGroupFormationPages:!1},vg=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=fg(t).call(this,e),n=!a||"object"!==dg(a)&&"function"!==typeof a?mg(r):a,bg(mg(mg(n)),"render",(function(){var e=n.props,t=e.activityData,r=e.match,a=n.state.renderOldGroupFormationPages,c=Boolean(t&&t.myData&&t.myData.studentGroup),s=Boolean(c&&t.myData&&t.myData.result);return a?null:o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{path:"".concat(r.path,"/group-not-found"),component:lg}),t.allowGroupsForming?o.a.createElement(i.a,{path:"".concat(r.path,"/group"),component:_n}):null,c?o.a.createElement(i.a,{component:s?Vh:iy}):o.a.createElement(i.a,{component:lg}))),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,t.allowGroupsForming?o.a.createElement(i.a,{path:"".concat(r.path,"/group"),component:_n}):null,o.a.createElement(i.a,{path:"".concat(r.path,"/group-not-found"),component:lg}),o.a.createElement(i.a,{path:"".concat(r.path,"/group"),component:_n}),o.a.createElement(i.a,{path:"".concat(r.path,"/chat"),render:function(){return o.a.createElement(Rt,{parentUrl:r.url})}}),o.a.createElement(i.a,{path:"".concat(r.path,"/activity-log"),render:function(){return o.a.createElement(ct,{parentUrl:r.url})}}),o.a.createElement(i.a,{path:"".concat(r.path,"/milestone/:milestoneId"),render:function(){return o.a.createElement(co,{parentUrl:r.url})}}),o.a.createElement(i.a,{path:"".concat(r.path,"/meeting/:meetingId"),render:function(){return o.a.createElement(fi,{parentUrl:r.url})}}),c?o.a.createElement(i.a,{component:s?Vh:iy}):o.a.createElement(i.a,{component:lg}))))}));var c=e.activityData,s=!1;if(c){var u=c.executorsType,l=!c.groupsFormedAt&&(!c.myData||!c.myData.studentGroup||!c.myData.studentGroup.dbId);u===vn.a.STUDENT_FORMED&&l&&(s=!0,window.location.href="".concat(window.location.origin,"/student/activity/").concat(c.dbId,"/gpd/student-groups")),u===vn.a.SYSTEM_FORMED&&l&&(s=!0,window.location.href="".concat(window.location.origin,"/student/activity/").concat(c.dbId,"/gpd/general-availability/show-calendar"))}return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){bg(e,t,n[t])}))}return e}({},yg,{renderOldGroupFormationPages:s}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pg(e,t)}(t,e),t}(a.Component),hg=Object(s.a)(Object(c.b)((function(e){return{activityData:et.getActivityData(e)}}))(vg)),gg=n("1h2I");n("491w");function Eg(e){return(Eg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pg(e,t,n[t])}))}return e}function Sg(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cg(e,t,n){return(Cg="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_g(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _g(e){return(_g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tg(e,t){return(Tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ig(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rg={isConfirmDialogVisible:!1,isDirty:!1,isPreviewDialogVisible:!1,isSavingReflectionQuestions:!1,isValid:!1,questionsWithAnswers:[],errors:{}},Ag="reflection-questions-work",jg=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_g(t).call(this,e),n=!a||"object"!==Eg(a)&&"function"!==typeof a?Ig(r):a,Pg(Ig(Ig(n)),"onQuestionAnswerChange",(function(e){var t=Sg(n.state.questionsWithAnswers),r=g.a.findIndex(t,{dbId:e.dbId});r>=0&&t.splice(r,1,e),n.setState({isDirty:!0,questionsWithAnswers:t})})),Pg(Ig(Ig(n)),"onSubmitAnswersClick",(function(){n.setState({isConfirmDialogVisible:!0})})),Pg(Ig(Ig(n)),"process",(function(){var e=n.props.i18n,t=n.state.questionsWithAnswers,r=id.c,a={},o=!0;return t.map((function(t,n){var i=t[id.a.ANSWER.TEXT];return i?i.length>r&&(o=!1,a[Ag+"-answer-text-length["+n+"]"]=e._("Exceeds {maxAnswerLength} characters.",{maxAnswerLength:r})):o=!1,null})),{isValid:o,errors:a}})),Pg(Ig(Ig(n)),"onConfirmDialogCanel",(function(){n.setState({isConfirmDialogVisible:!1})})),Pg(Ig(Ig(n)),"onConfirmDialogSubmit",(function(){n.setState({isConfirmDialogVisible:!1}),n.onReflectionQuestionsSubmit()})),Pg(Ig(Ig(n)),"getQuestionAnswerForm",(function(){var e=n.props,t=e.i18n,r=e.readOnly,a=n.state,i=a.questionsWithAnswers,c=a.errors;return o.a.createElement("div",{className:Ag+"-form"},o.a.createElement("div",{className:Ag+"-message"},o.a.createElement("p",null,t._("Please review the assignment instructions and then respond to the following questions.")),o.a.createElement("p",null,t._("This section must be completed before proceeding with the assignment."))),o.a.createElement("div",{className:Ag+"-list"},i.map((function(e,t){var a=c[Ag+"-answer-text-length["+t+"]"];return o.a.createElement(bd,{key:Ag+"-item["+t+"]",errorMessage:a,onChange:n.onQuestionAnswerChange,question:wg({},e,Pg({},id.a.QUESTION.SORT,t)),readOnly:r})}))))})),Pg(Ig(Ig(n)),"onPreviewReflectionAnswersOpen",(function(){n.setState({isPreviewDialogVisible:!0})})),Pg(Ig(Ig(n)),"getCardTitleActions",(function(){var e=n.props,t=e.i18n;return e.needAnswers?null:o.a.createElement("div",{className:Ag+"-completed-container"},o.a.createElement(Ue.a,{id:"button-reflection-questions-preview",primary:!0,ariaLabel:t._("View Answers"),iconBefore:!1,iconEl:o.a.createElement(zt.a,null,Je.a.PREVIEW),onClick:n.onPreviewReflectionAnswersOpen},t._("View Answers")))})),Pg(Ig(Ig(n)),"onPreviewReflectionAnswersClose",(function(){n.setState({isPreviewDialogVisible:!1})})),Pg(Ig(Ig(n)),"getCardTitle",(function(){var e=n.props.i18n;return o.a.createElement(K.d,{title:e._("Reflection Questions"),actions:n.getCardTitleActions()})})),Pg(Ig(Ig(n)),"getCardBody",(function(){return o.a.createElement(K.c,null,o.a.createElement("div",{className:Ag+"-container"},n.getQuestionAnswerForm()))})),Pg(Ig(Ig(n)),"getCardActions",(function(){var e=n.props,t=e.i18n,r=e.readOnly,a=n.state,i=a.isDirty,c=a.isValid,s=a.isSavingReflectionQuestions,u=i&&c&&!s,l={label:t._("You must provide an answer for each question before proceeding")},d=t._("Save Answers");return c&&(l={}),n.state.isSavingReflectionQuestions&&(d=t._("Saving Answers..."),l={}),o.a.createElement(K.b,null,o.a.createElement(Ue.f,{id:"button-reflection-questions-submit",primary:!0,ariaLabel:d,enabled:u&&!r,onClick:n.onSubmitAnswersClick,tooltip:l},d))})),Pg(Ig(Ig(n)),"getConfirmDialog",(function(){var e=n.props.i18n,t=n.state.isConfirmDialogVisible,r=[];return r.push(o.a.createElement(Ue.a,{id:"button-reflection-questions-confirmation-dialog-cancel",ariaLabel:e._("Cancel"),onClick:n.onConfirmDialogCanel},e._("Close"))),r.push(o.a.createElement(Ue.a,{id:"button-reflection-questions-confirmation-dialog-submit",primary:!0,ariaLabel:e._("Submit"),onClick:n.onConfirmDialogSubmit},e._("Submit"))),t?o.a.createElement(Fr.a,{dialogClassName:Ag+"-confirm-dialog",id:"reflection-questions-confirm-dialog",actions:r,title:e._("Confirm Submit"),visible:!0},o.a.createElement("div",null,o.a.createElement("div",null,e._("You will not be able to modify these responses after they have been submitted.")),o.a.createElement("div",null,e._("Are you sure you want to submit your answers?")))):null})),Pg(Ig(Ig(n)),"getPreviewDialog",(function(){var e=n.state.isPreviewDialogVisible;return o.a.createElement(jd,{visible:e,onClose:n.onPreviewReflectionAnswersClose})})),Pg(Ig(Ig(n)),"onReflectionQuestionsSubmit",(function(){var e=n.props,t=e.activityData,r=e.activityId,a=e.i18n;r=+r;var o=n.state.questionsWithAnswers.map((function(e){var t;return Pg(t={},id.a.ANSWER.TEXT,e[id.a.ANSWER.TEXT]),Pg(t,"questionDbId",e.dbId),t}));n.setSaving(!0),Et.a.saveReflectionQuestionAnswers(r,o).then((function(){n.setSaving(!1),Et.a.refreshActivityData(t),yc.a.addSuccess(a._("Reflection Questions: Your answers have been saved."))})).catch((function(){n.setSaving(!1),yc.a.addError(a._("Reflection Questions: Unable to save your answers."))}))})),Pg(Ig(Ig(n)),"setSaving",(function(e){n.setState({isSavingReflectionQuestions:e})})),n.state=wg({},Rg,{questionsWithAnswers:e.questions}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tg(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.isDirty||this.setState({questionsWithAnswers:e.questions})}},{key:"setState",value:function(e,n){var r=this;Cg(_g(t.prototype),"setState",this).call(this,e,(function(){r.validate(r.props,n)}))}},{key:"validate",value:function(e,n){var r=this.process(e);Cg(_g(t.prototype),"setState",this).call(this,r,n)}},{key:"render",value:function(){var e=this.props,t=e.questions,n=e.needAnswers;return Boolean(t&&t.length>0)?o.a.createElement(K.a,null,this.getCardTitle(),n&&this.getCardBody(),n&&this.getCardActions(),n&&this.getConfirmDialog(),this.getPreviewDialog()):null}}])&&Og(n.prototype,r),a&&Og(n,a),t}(a.Component);jg.propTypes={answers:M.a.array,questions:M.a.array,readOnly:M.a.bool},jg.defaultProps={answers:[],questions:[],readOnly:!1};var kg=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityData:et.getActivityData(e),activityId:et.getActivityId(e),answers:et.getReflectionAnswers(e),hasQuestions:et.hasReflectionQuestions(e),needAnswers:et.needReflectionAnswers(e),questions:et.getReflectionQuestions(e)}}))(jg)));function Ng(e){return(Ng="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dg(e){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lg(e,t){return(Lg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xg=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Dg(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Ng(a)&&"function"!==typeof a?Mg(r):a,i=Mg(Mg(n)),s=function(){var e=n.props,t=e.activityName,r=e.availablePeerReviews,a=e.instructionsText,i=e.instructionsMedia,c=e.lmsLocked,s=e.rubric,u=e.i18n,l=e.isReflectionQuestionsEnabled;return o.a.createElement(kn,{title:t,serviceMethod:Et.a.refreshIndividualProgressActivity},o.a.createElement(Ur.a,null),o.a.createElement(gg.a,null),o.a.createElement(ey.a,null),o.a.createElement(Zr.a,{title:u._("Instructions"),media:i,text:a,rubric:s}),!(c||!l)&&o.a.createElement(kg,null),o.a.createElement("div",null,o.a.createElement(So,null),o.a.createElement(Jb,null)),r&&o.a.createElement(Up,null))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lg(e,t)}(t,e),t}(a.Component);xg.propTypes={activityName:M.a.string,availablePeerReviews:M.a.array,instructionsText:M.a.string,instructionsMedia:M.a.object,lmsLocked:M.a.bool,rubric:M.a.object,i18n:M.a.object,isReflectionQuestionsEnabled:M.a.bool};var Fg=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),availablePeerReviews:et.getAvailablePeerReviews(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),isReflectionQuestionsEnabled:et.isReflectionQuestionsEnabled(e),lmsLocked:et.getLmsLocked(e),rubric:et.getRubric(e)}}))(xg)));function Vg(e){return(Vg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gg(e){return(Gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ug(e,t){return(Ug=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Wg=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=Gg(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Vg(a)&&"function"!==typeof a?qg(r):a,i=qg(qg(n)),s=function(){var e=n.props,t=e.activityName,r=e.postSubmissionMedia,a=e.postSubmisstionText,i=e.i18n;return o.a.createElement(kn,{title:t,serviceMethod:Et.a.refreshIndividualSubmittedActivity},o.a.createElement("div",null,o.a.createElement(Ur.a,null),o.a.createElement(gg.b,null),o.a.createElement(Zr.a,{title:i._("Post-Submission Instructions"),media:r,text:a}),o.a.createElement(Up,null),o.a.createElement(kh,{viewContext:kh.SUBMISSION_VIEW_CONTEXT.STUDENT})))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ug(e,t)}(t,e),t}(a.Component);Wg.propTypes={activityName:M.a.string,i18n:M.a.any.isRequired,postSubmissionMedia:M.a.object,postSubmisstionText:M.a.string};var Bg=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),postSubmissionMedia:et.getPostSubmissionMedia(e),postSubmisstionText:et.getPostSubmissionText(e)}}))(Wg)));n("rgW0");function Qg(e){return(Qg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yg(e){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hg(e,t){return(Hg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Kg=function(e){function t(){var e,n,r,a,c,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return r=this,a=(e=Yg(t)).call.apply(e,[this].concat(d)),n=!a||"object"!==Qg(a)&&"function"!==typeof a?zg(r):a,c=zg(zg(n)),u=function(){var e=n.props,t=e.activityResult,r=e.match,a=t?o.a.createElement(Bg,null):o.a.createElement(Fg,null);return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 700px)"},(function(e){return o.a.createElement(v.a,null,e&&o.a.createElement(i.a,{path:"".concat(r.path,"/meeting/:meetingId"),render:function(){return o.a.createElement(fi,{parentUrl:r.url})}}),o.a.createElement(i.a,null,a))})))},(s="render")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hg(e,t)}(t,e),t}(a.Component),Xg=Object(s.a)(Object(c.b)((function(e){return{activityResult:et.getActivityResult(e),isLoading:et.getIsLoading(e)}}))(Kg)),$g=n("6puI");n("6Byh");function Zg(e){return(Zg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tE(e,t){return(tE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aE=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=eE(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Zg(a)&&"function"!==typeof a?nE(r):a,rE(nE(nE(n)),"onPreview",(function(e){var t=n.props.onPreview;if(t&&t(e),e.previewUrl)return window.open(e.previewUrl,"_blank")})),rE(nE(nE(n)),"onDownload",(function(e){var t=n.props.onDownload;t&&t(e),po.a.downloadPartial(e)})),rE(nE(nE(n)),"onLinkClick",(function(e){var t=n.props.onOpenLink;t&&t(e),window.open(e.link)})),rE(nE(nE(n)),"getListItem",(function(e,t){var r=n.props.i18n;return o.a.createElement("div",{className:"document-list-item",key:"document_item_"+t},o.a.createElement("span",{className:"partial-type-icon"},$g.b(e,r)),o.a.createElement("span",{className:"document-list-item-title"},e.title),n.getListItemActions(e))})),rE(nE(nE(n)),"getListItemActions",(function(e){var t=n.props.i18n;if(po.a.isDocument(e)){var r=!!e.previewUrl;return o.a.createElement("div",null,o.a.createElement(Ue.c,{id:"button-document-download",ariaLabel:t._("Download"),tooltip:{position:Ec.a.LEFT,label:t._("Download")},onClick:function(){n.onDownload(e)}},Je.a.DOWNLOAD),r&&o.a.createElement(Ue.c,{id:"button-document-preview",ariaLabel:t._("Preview (New Tab)"),tooltip:{position:Ec.a.LEFT,label:t._("Preview (New Tab)")},onClick:function(){n.onPreview(e)}},Je.a.OPEN_IN_NEW))}return po.a.isLink(e)?o.a.createElement("div",null,o.a.createElement(Ue.c,{id:"button-link-open",ariaLabel:t._("Preview (New Tab)"),onClick:function(){n.onLinkClick(e)},tooltip:{position:Ec.a.LEFT,html:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:"link_open_tooltip_1"},t._("Launch URL:")),o.a.createElement("div",{key:"link_open_tooltip_2",style:{wordBreak:"break-all"}},e.link))}},Je.a.OPEN_IN_NEW)):po.a.isReflectionAnswers(e)?o.a.createElement("div",null,o.a.createElement(Ue.c,{id:"button-link-preview",ariaLabel:t._("Preview"),tooltip:{position:Ec.a.LEFT,label:t._("Preview")},onClick:function(){e&&e.previewFunction()}},Je.a.PREVIEW)):void 0})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.documents,r=t.links,a=g.a.concat(n,r);return a=g.a.sortBy(a,["title"]),a=g.a.compact(a),o.a.createElement("div",{className:"document-list-container"},a.map((function(t,n){return e.getListItem(t,n)})))}}])&&Jg(n.prototype,r),a&&Jg(n,a),t}(a.Component);aE.propTypes={documents:M.a.array,links:M.a.array,onDownload:M.a.func,onOpenLink:M.a.func,onPreview:M.a.func};var oE=Object(x.withI18n)()(aE);function iE(e){return(iE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sE(e){return(sE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uE(e,t){return(uE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var dE=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=sE(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==iE(a)&&"function"!==typeof a?lE(r):a,i=lE(lE(n)),s=function(e){var t=n.props,r=t.visible,a=t.onClose,i=t.documents,c=t.links,s=t.i18n,u=t.onDownload,l=t.onPreview,d=t.onOpenLink,f={dialogClassName:"documents-dialog",fullPage:e,id:"documents-dialog",modal:!0,onClose:a,title:s._("Documents"),visible:r};return e||(f.actions=[o.a.createElement(Ue.a,{id:"button-document-dialog-close",secondary:!0,onClick:a},o.a.createElement(x.Trans,{id:"Close"}))]),o.a.createElement(pi.a,f,o.a.createElement(oE,{documents:i,links:c,onDownload:u,onPreview:l,onOpenLink:d}))},(c="getDialogComponent")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1)),o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)))}}])&&cE(n.prototype,r),a&&cE(n,a),t}(a.Component);dE.propTypes={documents:M.a.array,links:M.a.array,visible:M.a.bool,onClose:M.a.func,onDownload:M.a.func,onOpenLink:M.a.func,onPreview:M.a.func},dE.defaultProps={onDownload:function(){},onOpenLink:function(){},onPreivew:function(){}};var fE=Object(x.withI18n)()(dE);n("jLiW"),n("tdhA");function pE(e){return(pE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){EE(e,t,n[t])}))}return e}function yE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vE(e){return(vE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hE(e,t){return(hE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wE={resumeVideoAfterMessageSubmit:!1,selectedReviewSubmitterId:null,showDocuments:!1,showDeleteCommentDialog:!1,selectedDeleteComment:null,showEditCommentDialog:!1,selectedEditComment:null,message:"",showReflectionAnswersDialog:!1,showRubricDialog:!1},SE="PeerReviewSubmission",OE=o.a.createElement(x.Trans,{id:"Peer Review"}),CE=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vE(t).call(this,e),n=!a||"object"!==pE(a)&&"function"!==typeof a?gE(r):a,EE(gE(gE(n)),"getInitialSelectedReviewIdFromProps",(function(e){var t=null,r=e.availablePeerReviews,a=n.getFilteredReviews(e);return a&&a.length>0?t=a[a.length-1].submitter.dbId:r&&r.length>0&&(t=r[0].submitter.dbId),t})),EE(gE(gE(n)),"componentDidMount",(function(){n.scrollToBottom()})),EE(gE(gE(n)),"scrollToBottom",(function(){var e=We.a.findDOMNode(n.feedContainer);e&&(e.scrollTop=e.scrollHeight)})),EE(gE(gE(n)),"onMessageChange",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit,a=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),o=r;if(o||(o=a),a){var i=n.getPlayerTime(),c=n.getVideoPlayerId();t(dc.r(c)),n.globalPlayerEmitter.pause({playerId:c,startTime:i})}n.setState({message:e,resumeVideoAfterMessageSubmit:o})})),EE(gE(gE(n)),"getPlayerTime",(function(){var e=fc.c(n.getVideoPlayerId(),Ft.a.getState());return null===e?null:+e.toFixed(1)-.1})),EE(gE(gE(n)),"onMessageSubmit",(function(){var e=n.props,t=e.activityId,r=e.dispatch,a=n.state,o=a.message,i=a.selectedReviewSubmitterId,c=a.resumeVideoAfterMessageSubmit;Et.a.addPeerReviewComment(+t,i,o,n.getPlayerTime()).then((function(){n.setState({message:"",resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),c&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),r(dc.s(n.getVideoPlayerId())))}))})),EE(gE(gE(n)),"onVideoAdd",(function(){var e=n.props,t=e.dispatch,r=e.match.params.activityId,a=n.state.resumeVideoAfterMessageSubmit,i=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),c=a;c||(c=i),i&&(n.globalPlayerEmitter.pause({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),t(dc.r(n.getVideoPlayerId()))),n.setState({resumeVideoAfterMessageSubmit:c}),Di.a.isRecorderSupported()&&!lc.b()?Hn.a.showModal(o.a.createElement(Qi,{mediaType:Hi.a.COMMENT,id:"PeerReviewCommentRecorder",onComplete:function(e){e&&e.masterMediaId&&n.onAddVideoComplete(e.masterMediaId)},activityId:+r})):Hn.a.showModal(o.a.createElement(ec,{mediaType:Hi.a.COMMENT,showImportFromCloud:!1,onComplete:function(e){e&&e[0]&&n.onAddVideoComplete(e[0])},activityId:+r}))})),EE(gE(gE(n)),"onAddVideoComplete",(function(e){var t=n.props,r=t.dispatch,a=t.match.params.activityId,o=n.state,i=o.selectedReviewSubmitterId,c=o.resumeVideoAfterMessageSubmit;e&&Et.a.addPeerReviewVideo(+a,i,e,n.getPlayerTime()).then((function(){n.setState({resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),c&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),r(dc.s(n.getVideoPlayerId())))}))})),EE(gE(gE(n)),"onStudentChange",(function(e){n.setState({selectedReviewSubmitterId:null},(function(){n.setState({selectedReviewSubmitterId:e},(function(){n.scrollToBottom()}))}))})),EE(gE(gE(n)),"onEditComment",(function(e){n.setState({selectedEditComment:g.a.clone(e),showEditCommentDialog:!0})})),EE(gE(gE(n)),"onEditCancel",(function(){n.setState({selectedEditComment:null,showEditCommentDialog:!1})})),EE(gE(gE(n)),"onEditSubmit",(function(){var e=n.state.selectedEditComment;Et.a.editPeerReviewComment(e.dbId,e).then((function(){n.setState({showEditCommentDialog:!1,selectedEditComment:null})}))})),EE(gE(gE(n)),"onEditCommentChange",(function(e){n.setState({selectedEditComment:bE({},n.state.selectedEditComment,{commentText:e})})})),EE(gE(gE(n)),"onDeleteComment",(function(e){n.setState({showDeleteCommentDialog:!0,selectedDeleteComment:e})})),EE(gE(gE(n)),"onDeleteCancel",(function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})})),EE(gE(gE(n)),"onDeleteSubmit",(function(){var e=n.state.selectedDeleteComment,t=n.props.activityId;t=+t,Et.a.deletePeerReviewComment(t,e.dbId).then((function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})}))})),EE(gE(gE(n)),"getVideoPlayerId",(function(){var e=n.props.activityId,t=n.getSelectedReviewObject();return e&&t?SE+"_"+e+"_"+t.submitter.dbId:SE+"_UNKNOWN"})),EE(gE(gE(n)),"onSyncTimeClick",(function(e){var t=n.props.dispatch,r=n.getPlayerTime(),a=e,o=n.getVideoPlayerId();t(dc.B(o,a)),n.globalPlayerEmitter.seek({playerId:o,startTime:r,endTime:a})})),EE(gE(gE(n)),"onViewDocuments",(function(){n.setState({showDocuments:!0})})),EE(gE(gE(n)),"onDocumentDialogClose",(function(){n.setState({showDocuments:!1})})),EE(gE(gE(n)),"onNextPeerReview",(function(){var e=n.props.availablePeerReviews;e&&n.onStudentChange(e[0].submitter.dbId)})),EE(gE(gE(n)),"getPeerSelectField",(function(){var e=n.state.selectedReviewSubmitterId,t=n.props,r=t.activityType,a=t.availablePeerReviews,i=t.isFiveStarEnabled,c=t.isRubricReviewEnabled,s=t.i18n,u=t.peerReviewType,l=n.getFilteredReviews(),d=[],f=r===pc.b.GROUP_PRESENTATION?s._("Select Group"):s._("Select Student"),p=[];return u===pf.a.SYSTEM?((d=mE(l)).push(g.a.find(a,{submitter:{dbId:e}})),d=g.a.uniqBy(d,"submitter.dbId")):u===pf.a.STUDENT&&(d=mE(a)),(d=g.a.compact(d))&&(p=d.map((function(e){var t={value:e.submitter.dbId};return t.label=Object(lt.b)(e,s),n.isReviewedPeerReview(e.submitter.dbId)&&cc(e,i,c)&&(t.className="has-review"),t}))),p.length>0?o.a.createElement("div",{className:"review-student-select-container"},o.a.createElement("h5",null,s._("Peer:")),o.a.createElement(ut.e,{id:"review-student-select",className:"review-student-select-field",label:"",ariaLabel:s._("Select Student for Peer Review"),value:e||"",placeholder:f,onChange:n.onStudentChange,sameWidth:!1,menuItems:p})):null})),EE(gE(gE(n)),"isQuantitativeReviewEnabled",(function(){var e=n.props,t=e.isFiveStarEnabled,r=e.isRubricReviewEnabled;return t||r})),EE(gE(gE(n)),"getCardHeader",(function(){var e=n.props,t=e.peerReviewRequiredCount,r=e.isFiveStarEnabled,a=e.isRubricReviewEnabled,i=e.i18n,c=n.getFilteredReviews(),s=[];c&&c.map((function(e){return cc(e,r,a)&&s.push(e),!0}));var u=s.length,l=["review-header-progress-label"],d=i._("Reviewed: {completedCount}",{completedCount:u}),f=null;return t&&(u>=t?(l.push("label--bold"),d=i._("Completed"),f=o.a.createElement(rf.b,{className:"review-header-progress-icon",type:rf.a.SUCCESS,enableTooltip:!1})):(d=i._("Reviewed: {completedCount} of {peerReviewRequiredCount}",{completedCount:u,peerReviewRequiredCount:t}),f=o.a.createElement(df,{className:"review-header-progress",value:u,maxValue:t}))),o.a.createElement("div",{className:"review-header"},o.a.createElement("div",{className:"review-header-title"},o.a.createElement("h2",{className:"card-header"},OE),o.a.createElement("div",{className:"review-header-right-container"},o.a.createElement("div",{className:Ie()(l)},d),f)))})),EE(gE(gE(n)),"getFeedSection",(function(){var e=null,t=n.getSelectedReviewObject();return t&&(e=t.comments)&&(e=g.a.orderBy(e,["syncTime","updatedAt"],["asc","asc"])),o.a.createElement("div",{className:"review-feed"},e&&e.map((function(e){return e?o.a.createElement(Jf,{key:"review-comment"+e.dbId,comment:e,canDelete:!0,canEdit:!0,termClassId:n.props.termClassId,activityId:n.props.activityId,usageContext:kd.a.COMMENT,showCommenterName:!1,onSyncTimeClick:n.onSyncTimeClick,onDeleteComment:n.onDeleteComment,onEditComment:n.onEditComment}):null})))})),EE(gE(gE(n)),"getSubmitSection",(function(){var e=n.state.message,t=n.props,r=t.isCommentingAnonymous,a=t.i18n,i=t.peerReviewCommentIsLoading,c=Object(lt.f)(e);i&&n._peerReviewCommentIsLoading&&requestAnimationFrame((function(){n.feedbackTextFieldRef.current.focus()})),n._peerReviewCommentIsLoading=i;var s=null;return lc.f()||(s=lc.d()?a._("(\\u2318 + Enter) to Submit"):a._("(Ctrl + Enter) to Submit")),o.a.createElement("div",{className:"review-submit-section"},!r&&o.a.createElement(Ue.c,{id:"button-peer-review-video-add",enabled:!i&&!n.isTestStudent(),className:"review-add-video-button",ariaLabel:a._("Add Video"),onClick:n.onVideoAdd},Je.a.VIDEO_ADD),o.a.createElement(ut.i,{ref:n.feedbackTextFieldRef,id:"review-textfield",className:"review-textfield",ariaLabel:a._("Comment"),enabled:!i&&!n.isTestStudent(),errorText:c.exceedsLimit?a._("Exceeds {0} characters.",{0:c.maxLength}):"",helpText:s,helpOnFocus:!0,maxLength:c.maxLength,maxRows:2,onChange:n.onMessageChange,onSubmit:n.onMessageSubmit,placeholder:a._("Comment..."),required:!c.isEmpty,rows:1,value:e}),o.a.createElement(Ue.c,{id:"button-peer-review-message-send",enabled:!i&&c.isValid&&!n.isTestStudent(),className:"message-send-button",ariaLabel:a._("Send"),onClick:n.onMessageSubmit,isLoading:i},Je.a.SEND))})),EE(gE(gE(n)),"getVideoTopToolbar",(function(e,t){var r=[],a=n.props.i18n;return e&&e.length>0||t&&t.length>0?(r.push(o.a.createElement(Ue.c,{id:"button-peer-review-document-menu",className:"video-actions-menu-button",key:"document-button",ariaLabel:a._("File"),onClick:n.onViewDocuments,iconClassName:vr.a.FILE})),o.a.createElement("div",{className:"video-top-toolbar-container"},r)):null})),EE(gE(gE(n)),"getDeleteDialogActions",(function(){var e=n.props,t=e.peerReviewCommentIsLoading,r=e.i18n;return[o.a.createElement(Ue.a,{key:"delete-dialog-cancel",id:"button-peer-review-comment-delete-dialog-cancel",secondary:!0,ariaLabel:r._("Cancel"),enabled:!t,onClick:n.onDeleteCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{key:"delete-dialog-delete",id:"button-peer-review-comment-delete-dialog-delete",primary:!0,ariaLabel:r._("Delete"),isLoading:t,enabled:!t,onClick:n.onDeleteSubmit},o.a.createElement(x.Trans,{id:"Delete"}))]})),EE(gE(gE(n)),"onRatingChange",(function(e){var t=n.props.activityId,r=n.state.selectedReviewSubmitterId;Et.a.createPeerReviewFiveStar(+t,r,e)})),EE(gE(gE(n)),"getEditDialogActions",(function(e){var t=n.props,r=t.peerReviewCommentIsLoading,a=t.i18n;return[o.a.createElement(Ue.a,{key:"edit-dialog-cancel",id:"button-peer-review-comment-edit-dialog-cancel",secondary:!0,ariaLabel:a._("Cancel"),enabled:!r,onClick:n.onEditCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{key:"delete-dialog-submit",id:"button-peer-review-comment-edit-dialog-submit",primary:!0,ariaLabel:a._("Submit"),isLoading:r,enabled:!r&&e.isValid,onClick:n.onEditSubmit},o.a.createElement(x.Trans,{id:"Submit"}))]})),EE(gE(gE(n)),"getSelectedReviewObject",(function(){var e=n.props.availablePeerReviews,t=n.state.selectedReviewSubmitterId,r=n.getFilteredReviews(),a=null,o=null;return r&&(o=g.a.find(r,(function(e){return e.submitter.dbId===t}))),o?a=o:e&&(a=g.a.find(e,(function(e){return e.submitter.dbId===t}))),a})),EE(gE(gE(n)),"isReviewedPeerReview",(function(e){var t=n.getFilteredReviews();if(t)for(var r=0;r<t.length;r++)if(t[r].submitter.dbId===e)return!0;return!1})),EE(gE(gE(n)),"getRatingComponent",(function(e){var t=n.props,r=t.rubric,a=t.i18n;if(e){var i=n.props,c=i.isFiveStarEnabled,s=i.isRubricReviewEnabled;if(c){var u=0;return e.myFiveStarRating&&(u=e.myFiveStarRating.value),o.a.createElement(Dn.a,{enabled:!n.isTestStudent(),name:"peer-review-rating",value:u,onChange:n.onRatingChange})}if(s){var l=0;return e.myRubricEvaluation&&(l=e.myRubricEvaluation.points),o.a.createElement("div",{className:"eval-rubric-result-container"},o.a.createElement(x.Trans,{id:"Rubric Score"}),o.a.createElement(Ue.a,{id:"button-peer-review-rubric",ariaLabel:a._("Rubric Score"),enabled:!n.isTestStudent(),onClick:n.onEditRubric,className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:l,max:r.maxValue})))}}return null})),EE(gE(gE(n)),"onEditRubric",(function(){n.setState({showRubricDialog:!0})})),EE(gE(gE(n)),"onRubricDialogCancel",(function(){n.setState({showRubricDialog:!1})})),EE(gE(gE(n)),"onRubricDialogSubmit",(function(e){n.setState({showRubricDialog:!1});var t=n.props.activityId,r=n.state.selectedReviewSubmitterId;t=+t,Et.a.createRubricPeerReview(t,r,e,!1)})),EE(gE(gE(n)),"onPreviewReflectionAnswers",(function(){n.setState({showReflectionAnswersDialog:!0})})),EE(gE(gE(n)),"onPreviewReflectionAnswersClose",(function(){n.setState({showReflectionAnswersDialog:!1})})),EE(gE(gE(n)),"isTestStudent",(function(){var e=n.props.userData;return ar.h(e)})),EE(gE(gE(n)),"getFilteredReviews",(function(e){var t=e;t||(t=n.props);var r=t,a=r.activityType,o=r.reviewedPeerReviews,i=r.userId;if(!o)return[];var c=g.a.filter(o,(function(e){return+e.submitter.dbId!==+i}));return a===pc.b.GROUP_PRESENTATION&&(c=g.a.uniqBy(c,"activityStudentGroup.dbId")),c})),EE(gE(gE(n)),"getPeerReviewDueDate",(function(){var e=n.props,t=e.i18n,r=e.peerReviewDueDate;return r?o.a.createElement("div",{className:"peer-review-due-date-container"},o.a.createElement(zt.a,{iconClassName:vr.a.CALENDAR}),o.a.createElement("p",null,t._("Due Date:")," ",o.a.createElement(Qe.b,{unixTime:r}))):null})),EE(gE(gE(n)),"getPeerReviewGradingInfo",(function(){var e=n.props,t=e.isPeerReviewGradingEnabled,r=e.gradedPeerReviewWeight,a=e.i18n;return t?o.a.createElement("div",{className:"peer-review-grading-info"},o.a.createElement(ya.b,{className:"peer-review-grading-message",type:ya.a.INFO,message:a._("This assignment factors your peer review activity into your overall grade. Quality of all your completed peer reviews will be graded with {gradedPeerReviewWeight}% weight towards your overall grade.",{gradedPeerReviewWeight:r})})):null})),EE(gE(gE(n)),"getPeerReviewPaperHeader",(function(){var e=n.props,t=e.availablePeerReviews,r=e.isFiveStarEnabled,a=e.isRubricReviewEnabled,i=e.i18n,c=e.peerReviewType,s=n.getSelectedReviewObject();if(!s)return null;var u=t&&t.length>0,l=ac(s),d=oc(s),f=ic(s),p=n.isReviewedPeerReview(s.submitter.dbId)&&cc(s,r,a),m=l?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,b=d?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,y=f?Je.a.TASK_COMPLETE:Je.a.TASK_INCOMPLETE,v=l?i._("Completed"):i._("View any of the documents or watch the video"),h=d?i._("Completed"):i._("Leave a comment"),g=f?i._("Completed"):a?i._("Submit a rubric evaluation"):i._("Submit a five star rating"),E=c===pf.a.SYSTEM,w={label:i._("Retrieve a new peer submission for review")};return E&&(p?u||(w={label:i._("There are no more peer submissions available")}):w={label:i._("You must complete the current review before proceeding")}),o.a.createElement("div",{className:"review-paper-header"},o.a.createElement("div",{className:"review-paper-header-primary"},n.getPeerSelectField(),o.a.createElement("div",{style:{flex:1}}),E&&o.a.createElement(Ue.a,{id:"button-peer-review-next-peer",primary:!0,ariaLabel:i._("Next Peer"),className:"next-peer-button",enabled:p&&u,tooltip:w,onClick:n.onNextPeerReview},i._("Next Peer"))),o.a.createElement("div",{className:"review-paper-header-secondary"},o.a.createElement(ff.b,{className:Ie()("review-progress-item",l&&"review-progress-item--complete"),label:v},o.a.createElement(zt.a,{className:"review-progress-item-icon"},m),o.a.createElement("div",{className:"review-progress-item-label"},i._("Viewed Submission"))),o.a.createElement(ff.b,{className:Ie()("review-progress-item",d&&"review-progress-item--complete"),label:h},o.a.createElement(zt.a,{className:"review-progress-item-icon"},b),o.a.createElement("div",{className:"review-progress-item-label"},i._("Commented"))),n.isQuantitativeReviewEnabled()&&o.a.createElement(ff.b,{className:Ie()("review-progress-item",f&&"review-progress-item--complete"),label:g},o.a.createElement(zt.a,{className:"review-progress-item-icon"},y),o.a.createElement("div",{className:"review-progress-item-label"},i._("Evaluated")))))})),EE(gE(gE(n)),"onSubmissionViewed",(function(){var e=n.getSelectedReviewObject();if(e&&!ac(e)){var t=n.props.activityId;Et.a.setPeerReviewViewed(+t,e.submitter.dbId)}})),EE(gE(gE(n)),"getPeerSubmissionPreview",(function(){var e=n.state,t=e.showDocuments,r=e.showDeleteCommentDialog,a=e.showEditCommentDialog,i=e.selectedEditComment,c=e.showReflectionAnswersDialog,s=e.showRubricDialog,u=n.props,l=u.peerReviewType,d=u.rubric,f=u.isReflectionQuestionsEnabled,p=u.i18n,m=null,b=null,y=null;if(!l)return null;var v=n.getSelectedReviewObject(),h=[],E=[];v&&(v.media?m=v.media:v.requiredMedia&&(m=v.requiredMedia),v.myRubricEvaluation&&(b=v.myRubricEvaluation.points,y=v.myRubricEvaluation.cells.map((function(e){return e.dbId}))),f&&h.push(po.a.createReflectionAnswersPartial(p._("Reflection Answers"),E,n.onPreviewReflectionAnswers)),h=g.a.concat.apply(g.a,[h].concat(mE(v.documents||[]))),h=g.a.compact(h));var w=i?i.commentText:"",S=Object(lt.f)(w);return o.a.createElement("div",{className:"review-paper-container"},o.a.createElement(Xt.a,{className:"review-paper",zDepth:1},n.getPeerReviewPaperHeader(),o.a.createElement("div",{className:"review-paper-content"},v?o.a.createElement("div",{className:"review-wrapper"},m?o.a.createElement("div",{className:Ie()("review-video-container",h.length>0?null:"no-documents")},m&&n.getVideoTopToolbar(h,v.links),m&&o.a.createElement(mf.a,{id:"peer-review-media",usageContext:kd.a.STUDENT_RESULT,activityId:n.props.activityId,termClassId:n.props.termClassId,onPlay:n.onSubmissionViewed,playerId:n.getVideoPlayerId(),media:m})):o.a.createElement("div",{className:Ie()("review-document-container",m?null:"no-media")},o.a.createElement("h3",null,o.a.createElement(x.Trans,{id:"Documents"})),h?o.a.createElement(oE,{documents:h,links:v.links,onOpenLink:n.onSubmissionViewed,onDownload:n.onSubmissionViewed,onPreview:n.onSubmissionViewed}):o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"No documents found"}))),o.a.createElement("div",{className:Ie()("review-comments-container",m?null:"no-media")},o.a.createElement("div",{className:"review-feed-container",ref:function(e){n.feedContainer=e}},n.getFeedSection()),o.a.createElement("div",{className:"review-submit-container"},n.getSubmitSection(),o.a.createElement("div",{className:"review-rating-container"},n.getRatingComponent(v)),n.isTestStudent()&&o.a.createElement(ya.b,{type:ya.a.INFO},o.a.createElement("p",null,p._("Peer review is not allowed for test students"))))),o.a.createElement(fE,{visible:t,documents:h,links:v.links,onClose:n.onDocumentDialogClose,onOpenLink:n.onSubmissionViewed,onDownload:n.onSubmissionViewed,onPreview:n.onSubmissionViewed}),o.a.createElement(Fr.a,{id:"delete-review-item-dialog",title:p._("Delete Comment"),visible:r,actions:n.getDeleteDialogActions()},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this comment?"}))),i&&o.a.createElement(Fr.a,{id:"edit-review-item-dialog",className:"edit-review-item-dialog",title:p._("Edit Comment"),visible:a,actions:n.getEditDialogActions(S)},o.a.createElement(ut.i,{id:"review-edit-textfield",className:"review-edit-textfield",enabled:!n.props.peerReviewCommentIsLoading,placeholder:p._("Comment..."),onChange:n.onEditCommentChange,value:i.commentText,rows:1,errorText:S.exceedsLimit?p._("Exceeds {0} characters.",{0:S.maxLength}):"",maxLength:S.maxLength,required:!0,maxRows:4})),s&&o.a.createElement(Bn.b,{rubric:d,rubricPoints:b||0,mode:Qn.a.GRADE,grade:y,onCancel:n.onRubricDialogCancel,onSubmit:n.onRubricDialogSubmit})):null,v&&o.a.createElement(jd,{visible:c,onClose:n.onPreviewReflectionAnswersClose,answers:E,needAnswers:!1}))))})),EE(gE(gE(n)),"getNoPeerSubmissionsMessage",(function(){var e=n.props.i18n;return o.a.createElement("div",{className:"review-no-submissions"},o.a.createElement("p",{className:"card-placeholder-text"},e._("There are no submissions to review right now.")))})),n.globalPlayerEmitter=new tc.a;var i=n.getInitialSelectedReviewIdFromProps(e);return i&&(wE.selectedReviewSubmitterId=i),n.state=wE,n.feedbackTextFieldRef=o.a.createRef(),n._peerReviewCommentIsLoading=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hE(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.selectedReviewSubmitterId||this.setState({selectedReviewSubmitterId:this.getInitialSelectedReviewIdFromProps(e)})}},{key:"isVideoPaused",value:function(){return fc.b(this.getVideoPlayerId(),Ft.a.getState(),"isPaused")}},{key:"render",value:function(){var e=this.props,t=e.availablePeerReviews;if(!e.peerReviewType)return null;var n=this.getFilteredReviews(),r=Boolean(t&&t.length>0||n&&n.length>0);return o.a.createElement("div",null,o.a.createElement(K.a,{className:"review-card"},o.a.createElement("div",{className:"review-title"},this.getCardHeader()),o.a.createElement("div",{className:"review-content"},gr.a.isPeerReviewDueDateEnabled()&&this.getPeerReviewDueDate(),this.getPeerReviewGradingInfo(),r?this.getPeerSubmissionPreview():this.getNoPeerSubmissionsMessage())))}}])&&yE(n.prototype,r),a&&yE(n,a),t}(a.Component);CE.propTypes={activityId:M.a.number,activityType:M.a.string,availablePeerReviews:M.a.array,dispatch:M.a.func,gradedPeerReviewWeight:M.a.number,i18n:M.a.object,isFiveStarEnabled:M.a.bool,isRubricReviewEnabled:M.a.bool,isPeerReviewGradingEnabled:M.a.bool,isReflectionQuestionsEnabled:M.a.bool,isCommentingAnonymous:M.a.bool,match:M.a.object,peerReviewType:M.a.string,peerReviewRequiredCount:M.a.number,peerReviewCommentIsLoading:M.a.bool,peerReviewDueDate:M.a.number,rubric:M.a.object,termClassId:M.a.number,userData:M.a.object};var _E=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),activityType:et.getActivityType(e),rubric:et.getRubric(e),userData:wt.h(e),userId:wt.i(e),peerReviewCommentIsLoading:et.getPeerReviewCommentIsLoading(e),peerReviewType:et.getPeerReviewType(e),availablePeerReviews:et.getAvailablePeerReviews(e),reviewedPeerReviews:et.getReviewedPeerReviews(e),isFiveStarEnabled:et.isFiveStarEnabled(e),isRubricReviewEnabled:et.isRubricReviewEnabled(e),peerReviewRequiredCount:et.getPeerReviewRequiredCount(e),isCommentingAnonymous:et.isCommentingAnonymous(e),isReflectionQuestionsEnabled:et.isReflectionQuestionsEnabled(e),isPeerReviewGradingEnabled:et.isPeerReviewGradingEnabled(e),gradedPeerReviewWeight:et.getGradedPeerReviewWeight(e),peerReviewDueDate:et.getPeerReviewDueDate(e),termClassId:et.getTermClassId(e)}}))(CE))),TE=n("xyD6");function IE(e){return(IE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RE(e,t){return!t||"object"!==IE(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AE(e){return(AE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jE(e,t){return(jE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),RE(this,AE(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.i18n,r=e.studentData,a=e.questions;return t?o.a.createElement("div",{className:"dashboard-container"},gr.a.isDueDateVisible()?o.a.createElement(Nn.a,null):null,o.a.createElement(yr.a,{className:"item-a",title:n._("Questions Answered"),iconClassName:vr.a.QUESTION},o.a.createElement("div",{className:"dashboard-contents"},o.a.createElement(x.Trans,{id:"{0,number} of {1,number}",values:{0:r.interactiveAnswers.length,1:a.length}})))):null}}])&&PE(n.prototype,r),a&&PE(n,a),t}(a.Component),NE=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityId(e),questions:TE.a(e),studentData:et.getMyData(e)}}))(kE));function DE(e){return(DE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ME(e){return(ME=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xE(e,t){return(xE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GE=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=ME(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==DE(a)&&"function"!==typeof a?FE(r):a,VE(FE(FE(n)),"getInProgressCount",(function(){var e=n.props.resultPartials;return po.a.getInProgressPartials(e).length})),VE(FE(FE(n)),"getSubmittedCount",(function(){var e=n.props.resultPartials;return po.a.getReadyToSubmitPartials(e).length})),VE(FE(FE(n)),"onRemoveSubmission",(function(){var e=n.props.activityId;e=+e,Et.a.deleteSubmission(e)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.result,r=e.removeSubmissionIsLoading;return t?o.a.createElement("div",{className:"dashboard-container"},o.a.createElement(Ar.a,null),o.a.createElement(yr.b,{result:n,removeSubmissionIsLoading:r,onRemoveSubmission:this.onRemoveSubmission})):null}}])&&LE(n.prototype,r),a&&LE(n,a),t}(a.Component),UE=Object(c.b)((function(e){return{activityId:et.getActivityId(e),result:et.getActivityResult(e)}}))(GE),qE=n("/0q4"),WE=n("A2tp"),BE=n("ppB1");n("9N6j");function QE(e){return(QE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zE(e){return(zE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KE(e,t){return(KE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZE="interactive-video-summary",JE=ZE+"-answer-item",ew={isPreviewDialogVisible:!1,previewDialogMedia:null},tw=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=zE(t).call(this,e),n=!a||"object"!==QE(a)&&"function"!==typeof a?XE(r):a,$E(XE(XE(n)),"isMediaReady",(function(e){return e&&e.processingStatus===ml.a.READY})),$E(XE(XE(n)),"isMediaProcessing",(function(e){return e&&e.processingStatus===ml.a.PROGRESS})),$E(XE(XE(n)),"onPreviewClick",(function(e){n.setState({isPreviewDialogVisible:!0,previewDialogMedia:e})})),$E(XE(XE(n)),"getMultipleChoiceResponse",(function(e,t,n){return o.a.createElement("div",null,t,Boolean(n)&&o.a.createElement("span",{className:Ie()(JE+"-feedback",JE+"-feedback"+(e?"--correct":"--incorrect"))},"("+n+")"))})),$E(XE(XE(n)),"getVideoResponse",(function(e){var t=n.props.i18n,r="",a=!1;return n.isMediaReady(e)?(a=!0,r=o.a.createElement("a",null,t._("Preview"))):n.isMediaProcessing(e)?(a=!1,r=o.a.createElement("i",null,t._("(Video Response is processing)"))):(a=!1,r=o.a.createElement("i",null,t._("(There was an error processing this Video Response)"))),o.a.createElement("div",null,o.a.createElement(da.a,{disabled:!a,onClick:function(t){n.onPreviewClick(e,t)}},r))})),$E(XE(XE(n)),"getAnswer",(function(e,t){var r=n.props,a=r.i18n,i=r.isEducator,c=r.isRestricted,s=BE.b.OPTION,u=BE.b.QUESTION,l=BE.b.SETTINGS,d=t+1,f=e.question[u.TEXT],p=null,m=null,b=null,y=null,v=null,h=e.__typename===BE.a,g=Je.a.VIDEOCAM,E=null;return h?(m=a._("(N/A)"),v=e[l.MEDIA]):(g=(E=!!e.option[s.IS_CORRECT])?Je.a.CHECK_CIRCLE:Je.a.CANCEL,p=e.question[u.WEIGHT],m=a._("{questionWeight}%",{questionWeight:p}),b=e.option[s.TEXT],y=e.option[s.DESCRIPTION]),o.a.createElement("div",{key:"summary_item_"+t,className:JE},o.a.createElement("div",{className:JE+"-index"},a._("{questionNumber}.",{questionNumber:d})),o.a.createElement("div",{className:JE+"-middle-container"},o.a.createElement("div",{className:JE+"-question"},c?o.a.createElement("i",null,a._("(Question #{questionNumber})",{questionNumber:d})):f),o.a.createElement("div",{className:JE+"-answer"},!c||i?o.a.createElement("span",{className:JE+"-label-value-container"},o.a.createElement("i",{className:JE+"-label"},i?a._("Response:"):a._("Your response:")),h?n.getVideoResponse(v):n.getMultipleChoiceResponse(E,b,y)):null)),o.a.createElement("div",{className:JE+"-right-container"},o.a.createElement("div",{className:JE+"-weight"},m),o.a.createElement("div",{className:JE+"-correct"},h?o.a.createElement(zt.a,{tooltip:{label:a._("Video Responses are not automatically graded")},className:JE+"-icon"},g):o.a.createElement(qE.c,{className:JE+"-icon",type:E?qE.a:qE.b}))))})),$E(XE(XE(n)),"getSummary",(function(e){var t=n.props.i18n;return e&&e.length>0?o.a.createElement("div",{className:ZE+"-answers-container"},e.map(n.getAnswer)):o.a.createElement("div",{className:ZE+"-empty-answers"},t._("No answers submitted yet."))})),$E(XE(XE(n)),"onPreviewCancel",(function(){n.setState(ew)})),n.state=ew,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.match.params,r=n.activityId,a=n.classId,i=this.state,c=i.isPreviewDialogVisible,s=i.previewDialogMedia,u=YE(this.props.interactiveAnswers).sort((function(e,t){return e.question.orderNumber-t.question.orderNumber}));return o.a.createElement("div",null,o.a.createElement(K.a,{className:ZE+"-card"},o.a.createElement(K.c,{className:ZE+"-card-body"},o.a.createElement(K.d,{title:t._("Question Summary"),className:ZE+"-card-title"}),this.getSummary(u),c&&s&&o.a.createElement(od.a,{activityId:+r,termClassId:+a,usageContext:kd.a.STUDENT_RESULT,visible:c,onCancel:this.onPreviewCancel,media:s}))))}}])&&HE(n.prototype,r),a&&HE(n,a),t}(a.Component);tw.propTypes={interactiveAnswers:M.a.array.isRequired,isEducator:M.a.bool,isRestricted:M.a.bool},tw.defaultProps={isEducator:!1,isRestricted:!1};var nw=Object(s.a)(Object(x.withI18n)()(tw)),rw=n("TDYo"),aw=n("0zen"),ow=n("jUYa"),iw=(n("1IXb"),n("V+cX"));function cw(e){return(cw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uw(e){return(uw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lw(e,t){return(lw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pw={showingQuestion:!1,inVideoPlayback:!1,multipleChoiceValue:null,currentQuestion:null,iosSettings:null,answerFeedbackMessage:null,isAnswerCorrect:!1,submittingAnswer:!1,showFeedbackMessage:!1,isRetakeAvailable:!1,playerTime:0,recordingFinished:!1,recordingSubmitted:!1,showVideoUploadDialog:!1},mw="Interactive Video recorder",bw="Interactive Video player",yw="InteractiveQuestionOfTypeChoice",vw="InteractiveQuestionOfTypeVideo",hw=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=uw(t).call(this,e),n=!a||"object"!==cw(a)&&"function"!==typeof a?dw(r):a,fw(dw(dw(n)),"componentWillUnmount",(function(){(0,n.props.dispatch)(dc.o(bw))})),fw(dw(dw(n)),"onUnload",(function(e){var t=n.props.i18n,r=n.state,a=r.inQuestion,o=r.inAnswer;if(a||o){var i=t._("Are you sure you want to leave this page? Any unsaved changes will be lost.");return e.returnValue=i,i}})),fw(dw(dw(n)),"getNextQuestion",(function(){var e=n.props.questions,t=n.getCurrentAnswers();return e.length===t.length?null:e[t.length]})),fw(dw(dw(n)),"getCurrentQuestionIndex",(function(){var e=n.props.questions,t=n.state.currentQuestion,r=0;return t&&(r=g.a.findIndex(e,(function(e){return e.dbId===t.dbId}))),r})),fw(dw(dw(n)),"setVideoToLastQuestionTime",(function(e){var t=0,r=n.getCurrentAnswers();r&&r.length>0&&(t=r[r.length-1].question.showTime),n.setVideoPlayerTime(t,e)})),fw(dw(dw(n)),"retryQuestion",(function(){n.setVideoToLastQuestionTime((function(){n.startResumeAssignment()}))})),fw(dw(dw(n)),"isVideoQuestion",(function(e){return e.__typename===vw})),fw(dw(dw(n)),"isMultipleChoiceQuestion",(function(e){return e.__typename===yw})),fw(dw(dw(n)),"showCurrentQuestion",(function(){n.setState({showingQuestion:!0,inVideoPlayback:!1})})),fw(dw(dw(n)),"startResumeAssignment",(function(){var e=n.state.playerTime,t=n.props,r=t.enablePolling,a=t.playerDuration,o=t.studentData,i=n.getNextQuestion();!i&&o.interactiveVideoWatchingFinishedAt&&r(!0),n.setState({showingQuestion:!1,inVideoPlayback:!1,isRetakeAvailable:!1,showFeedbackMessage:!1,multipleChoiceValue:null,isAnswerCorrect:!1,currentQuestion:i,recordingSubmitted:!1},(function(){i&&i.showTime>e&&e!==a?n.playVideoPlayer():i||o.interactiveVideoWatchingFinishedAt?n.showCurrentQuestion():n.playVideoPlayer()}))})),fw(dw(dw(n)),"checkTimeThreshold",(function(e){var t=n.state.currentQuestion;e&&t&&t.showTime<=e&&(n.props.isPlayerPlaying&&n.pauseVideoPlayer(),n.setVideoPlayerTime(t.showTime,(function(){n.showCurrentQuestion()}))),n.setState({playerTime:e})})),fw(dw(dw(n)),"pauseVideoPlayer",(function(){(0,n.props.dispatch)(dc.r(bw)),n.playerUserInteractionsEmitter.pause({playerId:bw,startTime:n.props.payerTime})})),fw(dw(dw(n)),"playVideoPlayer",(function(){var e=n.props.dispatch;n.setState({showingQuestion:!1,inVideoPlayback:!0},(function(){e(dc.s(bw)),n.playerUserInteractionsEmitter.play({playerId:bw,startTime:n.props.payerTime})}))})),fw(dw(dw(n)),"setVideoPlayerTime",(function(e,t){(0,n.props.dispatch)(dc.B(bw,e)),0!==n.props.payerTime&&n.playerUserInteractionsEmitter.seek({playerId:bw,startTime:n.props.payerTime,endTime:e}),n.setState({playerTime:e},(function(){t&&t()}))})),fw(dw(dw(n)),"getCurrentAnswers",(function(){var e=n.props,t=e.questions,r=e.studentData,a=[];if(r&&r.interactiveAnswers)for(var o=0;o<r.interactiveAnswers.length;o++){var i=r.interactiveAnswers[o];a[g.a.find(t,{dbId:i.question.dbId}).orderNumber]=r.interactiveAnswers[o]}return a})),fw(dw(dw(n)),"onQuestionVideoPlaybackEnded",(function(){var e=n.props.enablePolling;Et.a.setInteractiveVideoFinishedWatching(n.props.activityId),n.state.currentQuestion?n.setState({showingQuestion:!0}):e(!0)})),fw(dw(dw(n)),"getVideoProgressContainer",(function(){var e=n.state.playerTime,t=n.props,r=t.playerDuration,a=t.isPlayerPlaying,i=t.isPlayerPaused;return o.a.createElement("div",{className:"video-progress-container"},a&&o.a.createElement(Ue.c,{id:"button-interactive-video-progress-pause",className:"video-progress-action-button",onClick:n.pauseVideoPlayer},Je.a.PAUSE),i&&o.a.createElement(Ue.c,{id:"button-interactive-video-progress-play",className:"video-progress-action-button",onClick:n.playVideoPlayer},Je.a.PLAY),o.a.createElement("span",null,Object(Er.k)(e)," / ",Object(Er.k)(r)))})),fw(dw(dw(n)),"getRecorderPlayerContainer",(function(){var e=n.props,t=e.activityId,r=e.interactiveVideoSettings,a=n.state,i=a.showingQuestion,c=a.currentQuestion,s=a.recordingSubmitted,u=r.media,l={autoplay:!1,controls:!1,sources:[{src:u.srcUrl,type:"video/mp4"}]};u&&u.caption&&(l.tracks=[u.caption]);var d=!0;return i&&c&&n.isVideoQuestion(c)&&(d=!1),o.a.createElement("div",{ref:function(e){return n.recorderPlayerContainer=e},className:"player-recorder-container"},d||s||!n.isRecordingSupported()||lc.b()?o.a.createElement("div",{className:"player-container"},o.a.createElement(WE.a,{id:"assignment-interactive-video-player",activityId:t,termClassId:n.props.termClassId,mediaId:u.dbId,usageContext:kd.a.INTERACTIVE_VIDEO,allowKeyboardControl:!0,onTimeUpdate:n.checkTimeThreshold,options:l,onEnded:n.onQuestionVideoPlaybackEnded,playerId:bw})):null,o.a.createElement("div",{className:"recorder-container"},!d&&!s&&n.isRecordingSupported()&&!lc.b()&&o.a.createElement(Di.b,{mediaType:Hi.a.ACTIVITY_RESULT,questionId:c.dbId,activityId:t,recorderId:mw,showRecordButton:!0,showSubmitButton:!1,onStop:n.onRecordingFinished,onRecord:n.onRecordingStarted,onReset:n.onRecordingReset,onFinish:function(e){n.onRecordingSubmitted(e)}})))})),fw(dw(dw(n)),"onRecordingReset",(function(){n.setState({recordingFinished:!1,submittingRecording:!1})})),fw(dw(dw(n)),"onRecordingFinished",(function(){n.setState({recordingFinished:!0},(function(){Object(uo.c)(n.recorderPlayerContainer.offsetParent.offsetTop)}))})),fw(dw(dw(n)),"onRecordingSubmitted",(function(){var e=n.props.match.params.activityId;Et.a.refreshInteractiveVideoProgressActivity(+e).then((function(){n.setState({submittingRecording:!1,recordingFinished:!1,recordingSubmitted:!0})}))})),fw(dw(dw(n)),"submitRecording",(function(){var e=n.props.dispatch;n.setState({submittingRecording:!0},(function(){e(rw.j(mw))}))})),fw(dw(dw(n)),"onMultipleChoiceChange",(function(e){e&&(e=+e),n.setState({multipleChoiceValue:e})})),fw(dw(dw(n)),"submitAnswer",(function(){var e=n.state,t=e.currentQuestion,r=e.multipleChoiceValue,a=n.props,o=a.interactiveVideoSettings,i=a.dispatch;(0,a.enablePolling)(!1),n.setState({submittingAnswer:!0}),Et.a.createInteractiveAnswer(t.dbId,r).then((function(e){var t=e.createInteractiveAnswer;n.setState({isAnswerCorrect:t.option.correct,answerFeedbackMessage:t.option.optionDescription,showFeedbackMessage:!0,submittingAnswer:!1,isRetakeAvailable:!t.option.correct&&o.isRetakeRequired},(function(){!t.option.correct&&o.isRetakeRequired||i(Jm.sb(t))}))}))})),fw(dw(dw(n)),"getQuestionContainer",(function(){var e=n.props,t=e.i18n,r=e.playerIsReady,a=e.questions,i=e.studentData,c=e.isSubmittable,s=n.state,u=s.showingQuestion,l=s.inVideoPlayback,d=s.currentQuestion,f=n.getCurrentAnswers();if(!d&&i.interactiveVideoWatchingFinishedAt&&f.length===a.length)return o.a.createElement("div",{className:"question-contents-container processing-message"},o.a.createElement(zt.a,{ariaLabel:t._("Information, icon")},Je.a.INFO_OUTLINE),o.a.createElement("span",null,t._("Your assignment will be submitted once it's done processing.")));var p=f.length>0?t._("Resume Assignment"):t._("Begin Assignment"),m=null;return d&&n.isMultipleChoiceQuestion(d)?u&&(m="multiple-choice"):d&&n.isVideoQuestion(d)&&u&&(m="video-question"),u?o.a.createElement("div",{className:Ie()("question-contents-container",m)},n.getQuestionText(),n.getAnswerOptions(),n.getAnswerFeedback(),n.getAnswerActions()):l?n.getVideoProgressContainer():o.a.createElement("div",{className:Ie()("question-contents-container",m)},o.a.createElement(Ue.f,{id:"button-interactive-video-begin-resume",primary:!0,ariaLabel:p,enabled:!l&&r&&c,onClick:n.startResumeAssignment,tooltip:{label:c?null:t._("This action is not available at this time")}},p))})),fw(dw(dw(n)),"getQuestionText",(function(){var e=n.state.currentQuestion;return e?o.a.createElement("div",{className:"question-text"},e.questionText):null})),fw(dw(dw(n)),"getAnswerOptions",(function(){var e=n.state,t=e.currentQuestion,r=e.multipleChoiceValue,a=e.showFeedbackMessage,i=e.submittingAnswer,c=n.props.i18n;return n.isMultipleChoiceQuestion(t)?o.a.createElement("div",{className:"multiple-choice-options"},o.a.createElement(ow.a,{id:"question-selection-control",name:"question-selection-control",type:"radio",ariaLabel:c._("Question options"),enabled:!a&&!i,value:r,onChange:n.onMultipleChoiceChange,controls:t.options.map((function(e){return{label:e.optionText,value:e.dbId}}))})):null})),fw(dw(dw(n)),"getAnswerFeedback",(function(){var e=n.props.i18n,t=n.state,r=t.answerFeedbackMessage,a=t.isAnswerCorrect,i=t.showFeedbackMessage,c=r;return c||(c=a?e._("Correct"):e._("Incorrect")),i?o.a.createElement("div",{className:"answer-feedback"},o.a.createElement(qE.c,{className:"feedback-icon",type:a?qE.a:qE.b}),o.a.createElement("span",{className:"feedback-text"},c)):null})),fw(dw(dw(n)),"getAnswerActions",(function(){var e=n.state,t=e.currentQuestion,r=e.multipleChoiceValue,a=e.submittingAnswer,i=e.isRetakeAvailable,c=e.showingQuestion,s=e.isAnswerCorrect,u=e.recordingFinished,l=e.submittingRecording,d=e.showFeedbackMessage,f=e.recordingSubmitted,p=n.props,m=p.i18n,b=p.isInteractiveAnswerLoading,y=p.isRecording,v=!1;return c&&(!i&&d||s)&&(v=!0),n.isMultipleChoiceQuestion(t)?o.a.createElement("div",{className:"answer-actions"},i&&!s&&o.a.createElement(Ue.f,{id:"button-interactive-video-mc-retry",primary:!0,className:"retry-button",isLoading:b,ariaLabel:m._("Retry"),enabled:i,onClick:n.retryQuestion},m._("Retry")),v?o.a.createElement(Ue.f,{id:"button-interactive-video-mc-continue",primary:!0,className:"continue-button",ariaLabel:m._("Continue"),enabled:!0,onClick:n.startResumeAssignment},m._("Continue")):o.a.createElement(Ue.f,{id:"button-interactive-video-mc-submit",primary:!0,isLoading:b,ariaLabel:m._("Submit Answer"),enabled:Boolean(r&&!b&&!a&&!i),onClick:n.submitAnswer},m._("Submit Answer"))):u?o.a.createElement("div",{className:"answer-actions"},o.a.createElement(Ue.f,{id:"button-interactive-video-vr-submit",primary:!0,className:"continue-button",isLoading:l,ariaLabel:m._("Submit Video"),enabled:!l&&!y,onClick:n.submitRecording},m._("Submit Video"))):f?o.a.createElement("div",{className:"answer-actions"},o.a.createElement(Ue.f,{id:"button-interactive-video-vr-continue",primary:!0,className:"continue-button",ariaLabel:m._("Continue"),enabled:!0,onClick:n.startResumeAssignment},m._("Continue"))):!n.isRecordingSupported()||lc.b()?o.a.createElement("div",{className:"answer-actions"},o.a.createElement(Ue.f,{id:"button-interactive-video-vr-choose",primary:!0,className:"continue-button",ariaLabel:m._("Choose Video"),enabled:!0,onClick:n.onUploadVideo},m._("Choose Video"))):null})),fw(dw(dw(n)),"isRecordingSupported",(function(){return Di.a.isRecorderSupported()})),fw(dw(dw(n)),"onUploadVideo",(function(){n.setState({showVideoUploadDialog:!0})})),fw(dw(dw(n)),"onUploadVideoCancel",(function(){n.setState({showVideoUploadDialog:!1})})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fw(e,t,n[t])}))}return e}({},pw,{currentQuestion:n.getNextQuestion()}),n.onUnload=n.onUnload.bind(dw(dw(n))),n.playerUserInteractionsEmitter=new tc.a,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e&&e.playerIsReady&&e.playerIsReady!==this.props.playerIsReady&&this.setVideoToLastQuestionTime()}},{key:"render",value:function(){var e=this.props,t=e.questions,n=e.studentData,r=e.i18n,a=e.readOnly,i=e.userId,c=e.interactiveVideoSettings,s=this.props.match.params.activityId,u=this.state,l=u.currentQuestion,d=u.showingQuestion,f=u.showVideoUploadDialog,p=this.getCurrentAnswers(),m=n.interactiveVideoWatchingFinishedAt&&p.length===t.length,b=!l&&m,y=r._("Interactive Video");return d&&!b?y=r._("Question {0} of {1}",{0:this.getCurrentQuestionIndex()+1,1:t.length}):b&&(y=r._("Complete")),o.a.createElement("div",null,a?null:o.a.createElement(K.a,{className:"interactive-video-work-in-progress"},o.a.createElement(K.c,{className:"interactive-video-card-body"},this.getRecorderPlayerContainer(),o.a.createElement("div",{className:"question-container"},o.a.createElement("div",{className:"question-container-header"},o.a.createElement("h2",{className:"section-header"},y)),this.getQuestionContainer())),f&&o.a.createElement(ec,{onCancel:this.onUploadVideoCancel,onComplete:this.onRecordingSubmitted,mediaType:Hi.a.ACTIVITY_RESULT,activityId:+s,questionId:l?+l.dbId:null,studentId:i})),m&&o.a.createElement(nw,{interactiveAnswers:p,isEducator:!1,isRestricted:!c[BE.b.SETTINGS.IS_SUMMARY_VISIBLE]}))}}])&&sw(n.prototype,r),a&&sw(n,a),t}(a.Component);hw.propTypes={readOnly:M.a.bool,enablePolling:M.a.func,payerTime:M.a.number},hw.defaultProps={readOnly:!1};var gw=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),termClassId:et.getTermClassId(e),studentData:et.getMyData(e),result:et.getActivityResult(e),webcamFileName:aw.K(e,mw),recorderInitialized:aw.c(e,mw),interactiveVideoSettings:TE.b(e),questions:TE.a(e),recorderInIntialState:aw.J(e,mw)===iw.a.INITIAL,playerIsReady:fc.b(bw,e,"isReady"),playerDuration:fc.b(bw,e,"duration"),isPlayerPaused:fc.b(bw,e,"isPaused"),isPlayerPlaying:fc.b(bw,e,"isPlaying"),payerTime:fc.c(bw,e),recorderProps:aw.B(e,mw),isRecording:aw.J(e,mw)===iw.a.RECORDING,isInteractiveAnswerLoading:et.isInteractiveAnswerLoading(e),allowPeerReviewBeforeSubmission:et.isPeerReviewAllowedBeforeSubmission(e),userId:wt.i(e),isSubmittable:et.isSubmittable(e)}}))(hw)));function Ew(e){return(Ew="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sw(e){return(Sw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ow(e,t){return(Ow=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tw=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Sw(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Ew(a)&&"function"!==typeof a?Cw(r):a,_w(Cw(Cw(n)),"state",{pollingEnabled:!1}),_w(Cw(Cw(n)),"reloadActivityData",(function(){var e=n.props.activityId;Et.a.refreshInteractiveVideoProgressActivity(+e)})),_w(Cw(Cw(n)),"enablePolling",(function(e){e&&n.reloadActivityData(),n.setState({pollingEnabled:e})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ow(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.studentData,n=e.questions;t.interactiveVideoWatchingFinishedAt&&t.interactiveAnswers.length===n.length&&this.setState({pollingEnabled:!0})}},{key:"render",value:function(){var e=this.props,t=e.activityName,n=e.availablePeerReviews,r=e.instructionsText,a=e.instructionsMedia,i=e.rubric,c=e.i18n,s=this.state.pollingEnabled;return o.a.createElement(kn,{title:t,pollingEnabled:s,serviceMethod:Et.a.refreshInteractiveVideoProgressActivity},o.a.createElement(Ur.a,null),o.a.createElement(NE,null),o.a.createElement(ey.a,null),o.a.createElement(Zr.a,{title:c._("Instructions"),media:a,text:r,rubric:i}),n&&o.a.createElement(_E,null),!this.props.lmsLocked&&o.a.createElement(gw,{enablePolling:this.enablePolling}))}}])&&ww(n.prototype,r),a&&ww(n,a),t}(a.Component),Iw=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),lmsLocked:et.getLmsLocked(e),activityId:et.getActivityId(e),availablePeerReviews:et.getAvailablePeerReviews(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),userId:wt.i(e),questions:TE.a(e),rubric:et.getRubric(e),studentData:et.getMyData(e)}}))(Tw)));n("Tvoo");function Pw(e){return(Pw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aw(e,t){return!t||"object"!==Pw(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jw(e){return(jw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kw(e,t){return(kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nw=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Aw(this,jw(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kw(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.i18n,r=e.id,a=e.onClick,i=gr.a.getAutoAnalysisPermission();return i.isVisible?o.a.createElement(ol.a,{key:r,id:r,onClick:a,leftIcon:o.a.createElement(Uf.a,{ariaHidden:!0},Je.a.ASSESSMENT),primaryText:n._("View Analysis"),enabled:t&&!i.isRestricted,tooltip:{label:n._(i.restrictedMessage)}}):null}}])&&Rw(n.prototype,r),a&&Rw(n,a),t}(a.PureComponent);Nw.defaultProps={enabled:!0},Nw.propTypes={enabled:M.a.bool,id:M.a.string.isRequired,onClick:M.a.func.isRequired};var Dw=Object(x.withI18n)()(Nw);function Lw(e){return(Lw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qw(e,t,n[t])}))}return e}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vw(e){return(Vw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gw(e,t){return(Gw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ww={resumeVideoAfterMessageSubmit:!1,selectedStudent:null,selectedAvailableResult:null,selectedDeleteComment:null,selectedEditComment:null,showDeleteCommentDialog:!1,showDocuments:!1,showEditCommentDialog:!1,showRecorderDialog:!1,message:"",showSelfAssessmentDialog:!1,showReflectionAnswersDialog:!1},Bw="Submission results video player",Qw=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Vw(t).call(this,e),n=!a||"object"!==Lw(a)&&"function"!==typeof a?Uw(r):a,qw(Uw(Uw(n)),"componentDidMount",(function(){n.scrollToBottom()})),qw(Uw(Uw(n)),"scrollToBottom",(function(){var e=We.a.findDOMNode(n.feedContainer);e&&(e.scrollTop=e.scrollHeight)})),qw(Uw(Uw(n)),"getPlayerTime",(function(){var e=fc.c(n.getVideoPlayerId(),Ft.a.getState());return null===e?null:+e.toFixed(1)-.1})),qw(Uw(Uw(n)),"getVideoPlayerId",(function(){var e=n.props,t=e.result,r=e.activityId;return t?Bw+"_"+r+"_"+t.submitter.dbId+"_"+g.a.get(t,"media.dbId"):Bw})),qw(Uw(Uw(n)),"onMessageChange",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit,a=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),o=r;if(o||(o=a),a){var i=n.getPlayerTime(),c=n.getVideoPlayerId();t(dc.r(c)),n.globalPlayerEmitter.pause({playerId:c,startTime:i})}n.setState({message:e,resumeVideoAfterMessageSubmit:o})})),qw(Uw(Uw(n)),"onMessageSubmit",(function(){var e=n.props,t=e.activityId,r=e.userId,a=e.dispatch,o=n.state,i=o.message,c=o.resumeVideoAfterMessageSubmit;Et.a.addFeedbackComment(+t,r,i,n.getPlayerTime()).then((function(){n.setState({message:"",resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),c&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),a(dc.s(n.getVideoPlayerId())))}))})),qw(Uw(Uw(n)),"onVideoAdd",(function(){var e=n.props,t=e.dispatch,r=e.activityId,a=n.state.resumeVideoAfterMessageSubmit,i=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),c=a;c||(c=i),i&&(n.globalPlayerEmitter.pause({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),t(dc.r(n.getVideoPlayerId()))),n.setState({resumeVideoAfterMessageSubmit:c}),Di.a.isRecorderSupported()&&!lc.b()?Hn.a.showModal(o.a.createElement(Qi,{mediaType:Hi.a.COMMENT,id:"FeedbackCommentRecorder",onComplete:function(e){e&&e.masterMediaId&&n.onAddVideoComplete(e.masterMediaId)},activityId:+r})):Hn.a.showModal(o.a.createElement(ec,{mediaType:Hi.a.COMMENT,showImportFromCloud:!1,onComplete:function(e){e&&e[0]&&n.onAddVideoComplete(e[0])},activityId:+r}))})),qw(Uw(Uw(n)),"onAddVideoComplete",(function(e){var t=n.props,r=t.dispatch,a=t.activityId,o=t.userId,i=n.state.resumeVideoAfterMessageSubmit;e&&Et.a.addFeedbackCommentVideo(+a,o,e,n.getPlayerTime()).then((function(){n.setState({resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),i&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),r(dc.s(n.getVideoPlayerId())))}))})),qw(Uw(Uw(n)),"onEditComment",(function(e){n.setState({selectedEditComment:g.a.clone(e),showEditCommentDialog:!0})})),qw(Uw(Uw(n)),"onEditCancel",(function(){n.setState({selectedEditComment:null,showEditCommentDialog:!1})})),qw(Uw(Uw(n)),"onEditSubmit",(function(){var e=n.state.selectedEditComment;Et.a.editFeedbackComment(e.dbId,e).then((function(){n.setState({showEditCommentDialog:!1,selectedEditComment:null})}))})),qw(Uw(Uw(n)),"onEditCommentChange",(function(e){n.setState({selectedEditComment:xw({},n.state.selectedEditComment,{commentText:e})})})),qw(Uw(Uw(n)),"onDeleteComment",(function(e){n.setState({showDeleteCommentDialog:!0,selectedDeleteComment:e})})),qw(Uw(Uw(n)),"onDeleteCancel",(function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})})),qw(Uw(Uw(n)),"onDeleteSubmit",(function(){var e=n.state.selectedDeleteComment,t=n.props.activityId;t=+t,Et.a.deleteFeedbackComment(t,e.dbId).then((function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})}))})),qw(Uw(Uw(n)),"onSyncTimeClick",(function(e){var t=n.props.dispatch,r=n.getPlayerTime(),a=e,o=n.getVideoPlayerId();t(dc.B(o,a)),n.globalPlayerEmitter.seek({playerId:o,startTime:r,endTime:a})})),qw(Uw(Uw(n)),"isTestStudent",(function(){var e=n.props.userData;return ar.h(e)})),qw(Uw(Uw(n)),"getFeedSection",(function(){var e=n.props,t=e.result,r=e.userId,a=t.comments;return a&&0===a.length?o.a.createElement("div",{className:"review-feed no-comments"},o.a.createElement("span",{className:"card-placeholder-text"},o.a.createElement(x.Trans,{id:"No comments"}))):(a&&(a=g.a.orderBy(a,["syncTime","updatedAt"],["asc","asc"])),o.a.createElement("div",{className:"review-feed"},a&&a.map((function(e){if(!e)return null;var t=Boolean(e.commenter&&e.commenter.dbId===r);return o.a.createElement(Jf,{key:"review-comment"+e.dbId,comment:e,termClassId:n.props.termClassId,activityId:n.props.activityId,usageContext:kd.a.COMMENT,showCommenterName:!0,canEdit:t,canDelete:t,onSyncTimeClick:n.onSyncTimeClick,onDeleteComment:n.onDeleteComment,onEditComment:n.onEditComment})}))))})),qw(Uw(Uw(n)),"getSubmitSection",(function(){var e=n.state.message,t=n.props,r=t.i18n,a=t.feedbackCommentIsLoading,i=Object(lt.f)(e);a&&n._feedbackCommentIsLoading&&requestAnimationFrame((function(){n.feedbackTextFieldRef.current.focus()})),n._feedbackCommentIsLoading=a;var c=null;return lc.f()||(c=lc.d()?r._("(\\u2318 + Enter) to Submit"):r._("(Ctrl + Enter) to Submit")),o.a.createElement("div",{className:"review-submit-section"},o.a.createElement(Ue.c,{id:"button-feedback-video-add",enabled:!a&&!n.isTestStudent(),className:"review-add-video-button",ariaLabel:r._("Add Video"),onClick:n.onVideoAdd},Je.a.VIDEO_ADD),o.a.createElement(ut.i,{ref:n.feedbackTextFieldRef,id:"feedback-textfield",className:"feedback-textfield",ariaLabel:r._("Self Evaluation"),enabled:!a&&!n.isTestStudent(),errorText:i.exceedsLimit?r._("Exceeds {0} characters.",{0:i.maxLength}):"",helpText:c,helpOnFocus:!0,maxLength:i.maxLength,maxRows:2,onChange:n.onMessageChange,onSubmit:n.onMessageSubmit,placeholder:r._("Self Evaluation..."),required:!i.isEmpty,rows:1,value:e}),o.a.createElement(Ue.c,{id:"button-feedback-message-send",enabled:!a&&i.isValid&&!n.isTestStudent(),className:"message-send-button",onClick:n.onMessageSubmit,isLoading:a,ariaLabel:r._("Send")},Je.a.SEND))})),qw(Uw(Uw(n)),"onViewDocuments",(function(){n.setState({showDocuments:!0})})),qw(Uw(Uw(n)),"onDocumentDialogClose",(function(){n.setState({showDocuments:!1})})),qw(Uw(Uw(n)),"onShowAutoAnalysis",(function(e){var t=n.props.isAutoAnalysisScoreVisible;Hn.a.showModal(o.a.createElement(qu,{isScoreVisible:t,media:e}))})),qw(Uw(Uw(n)),"getVideoTopToolbar",(function(){var e=[],t=n.props,r=t.result,a=t.hasReflectionAnswers,i=t.i18n,c=t.activityType,s=t.isAutoAnalysisEnabled;if(!r)return null;(a||r.documents&&r.documents.length>0||r.links&&r.links.length>0)&&(e.push(o.a.createElement(Kt.c,{key:"document_view_item",onClick:n.onViewDocuments,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Documents, icon"),iconClassName:vr.a.FILE}),primaryText:i._("Documents")})),e.push(o.a.createElement(so.a,{key:"feedback_divider[0]"})));var u=r.media;if(!u&&r&&r.requiredMedia&&(u=r.requiredMedia),u){var l=Boolean(u.meetingAssets||u.meetingDownloadUrl);u.slaveMedia?e.push(o.a.createElement(Kt.c,{key:"download_camera_item",enabled:Boolean(u.downloadUrl),onClick:function(){return Object(pl.a)(u.downloadUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download camera recording")}),o.a.createElement(Kt.c,{key:"download_desktop_item",enabled:Boolean(u.slaveMedia.downloadUrl),onClick:function(){return Object(pl.a)(u.slaveMedia.downloadUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download screen recording")})):e.push(o.a.createElement(Kt.c,{key:"download_item",enabled:Boolean(u.downloadUrl),onClick:function(){return po.a.downloadPartial(u)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download")}));var d=Jc.isActivityTypeSupported(c);s&&d&&!l&&e.push(o.a.createElement(Dw,{id:"auto-analysis",onClick:function(){n.onShowAutoAnalysis(u)}}))}return 0===e.length?null:o.a.createElement("div",{className:"video-top-toolbar-container"},o.a.createElement(Ue.e,{id:"video-actions-menu-button",className:"video-actions-menu-button",menuItems:e},Je.a.MENU_VERT))})),qw(Uw(Uw(n)),"onEditSelfAssessmentRubric",(function(){n.setState({showSelfAssessmentDialog:!0})})),qw(Uw(Uw(n)),"onSelfAssessmentRubricSubmit",(function(e){n.setState({showSelfAssessmentDialog:!1});var t=n.props,r=t.activityId,a=t.userId;Et.a.createRubricPeerReview(r,a,e,!0).catch((function(e){H.b.error(e)}))})),qw(Uw(Uw(n)),"onSelfAssessmentRubricCancel",(function(){n.setState({showSelfAssessmentDialog:!1})})),qw(Uw(Uw(n)),"getFilteredRubricEvaluations",(function(){var e=n.props,t=e.activityType,r=e.rubricEvaluations,a=e.myData,o=[];if(r){var i=a.student;o=r.filter((function(e){if(ar.e(i,e.user))return!1;if(ar.d(i,e.user)){if(t===pc.b.GROUP_PRESENTATION){var n=a.studentGroup.members;return!ar.c(i,e.user,n)}return!0}}))}return o})),qw(Uw(Uw(n)),"getRatingComponent",(function(){var e=n.props,t=e.rubric,r=e.isFiveStarEnabled,a=e.isRubricReviewEnabled,i=e.myData,c=e.i18n;if(r){var s=0;return i&&i.peerReview&&(s=i.peerReview.fiveStarValue),o.a.createElement("div",{className:"peer-review-fivestar-container"},o.a.createElement(Dn.a,{name:"feedback-review-rating",enabled:!1,value:s,onChange:n.onRatingChange}),o.a.createElement("span",null,"(",i.peerReview.fiveStarRatesAmount,")"))}if(a){var u=g.a.get(i,"peerReview.rubricGrade",0),l=n.getFilteredRubricEvaluations();return o.a.createElement("div",{className:"eval-rubric-result-container"},o.a.createElement(x.Trans,{id:"Peer Review"}),o.a.createElement(Ue.a,{id:"button-feedback-peer-review-rubric",enabled:!!l.length&&!n.isTestStudent(),ariaLabel:c._("Peer Review"),onClick:n.showPeerReviewReport.bind(null,l),className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:u,max:t.maxValue})))}})),qw(Uw(Uw(n)),"showPeerReviewReport",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Peer Reviews"),rubricEvaluations:e}))})),qw(Uw(Uw(n)),"getSelfAssessmentComponent",(function(){var e=n.props,t=e.rubric,r=e.isRubricSelfReviewEnabled,a=e.result,i=e.i18n;if(r){var c=0;return a&&a.myRubricEvaluation&&(c=a.myRubricEvaluation.points),o.a.createElement("div",{className:"self-assessment-rubric-results"},o.a.createElement(x.Trans,{id:"Rubric Self Assessment"}),o.a.createElement(Ue.a,{id:"button-feedback-self-assessment-rubric",ariaLabel:i._("Rubric Self Assessment"),onClick:n.onEditSelfAssessmentRubric,enabled:!n.isTestStudent(),className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:c,max:t.maxValue})))}return null})),qw(Uw(Uw(n)),"getCardHeader",(function(){return o.a.createElement("div",{className:"md-card-title md-card-title--primary card-title feedback-card-header"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"My Submission"})),o.a.createElement("div",{className:"feedback-rating-container"},n.getRatingComponent()))})),qw(Uw(Uw(n)),"getDeleteDialogActions",(function(){var e=n.props,t=e.feedbackCommentIsLoading,r=e.i18n;return[o.a.createElement(Ue.a,{id:"button-feedback-delete-dialog-cancel",secondary:!0,ariaLabel:r._("Cancel"),enabled:!t,onClick:n.onDeleteCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-feedback-delete-dialog-delete",primary:!0,ariaLabel:r._("Delete"),isLoading:t,enabled:!t,onClick:n.onDeleteSubmit},o.a.createElement(x.Trans,{id:"Delete"}))]})),qw(Uw(Uw(n)),"getEditDialogActions",(function(e){var t=n.props,r=t.feedbackCommentIsLoading,a=t.i18n;return[o.a.createElement(Ue.a,{id:"button-feedback-edit-dialog-cancel",secondary:!0,ariaLabel:a._("Cancel"),enabled:!r,onClick:n.onEditCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-feedback-edit-dialog-submit",primary:!0,ariaLabel:a._("Submit"),isLoading:r,enabled:!r&&e.isValid,onClick:n.onEditSubmit},o.a.createElement(x.Trans,{id:"Submit"}))]})),qw(Uw(Uw(n)),"onPreviewReflectionAnswers",(function(){n.setState({showReflectionAnswersDialog:!0})})),qw(Uw(Uw(n)),"onPreviewReflectionAnswersClose",(function(){n.setState({showReflectionAnswersDialog:!1})})),n.state=Ww,n.globalPlayerEmitter=new tc.a,n.feedbackTextFieldRef=o.a.createRef(),n._feedbackCommentIsLoading=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gw(e,t)}(t,e),n=t,(r=[{key:"isVideoPaused",value:function(){return fc.b(this.getVideoPlayerId(),Ft.a.getState(),"isPaused")}},{key:"render",value:function(){var e=this,t=this.props,n=t.result,r=t.rubric,a=t.reflectionAnswers,i=t.i18n,c=this.state,s=c.selectedEditComment,u=c.showDocuments,l=c.showDeleteCommentDialog,d=c.showEditCommentDialog,f=c.showSelfAssessmentDialog,p=c.showReflectionAnswersDialog;if(!n)return null;var m=[],b=n.media,y=n.comments;!b&&n&&n.requiredMedia&&(b=n.requiredMedia);var v=null,h=null;n&&n.myRubricEvaluation&&(v=n.myRubricEvaluation.points,h=n.myRubricEvaluation.cells.map((function(e){return e.dbId}))),y&&y.forEach((function(e){e&&null!==e.syncTime&&m.push({timestamp:e.syncTime})}));var E=s?s.commentText:"",w=Object(lt.f)(E),S=[];return S.push(po.a.createReflectionAnswersPartial(i._("Reflection Answers"),a,this.onPreviewReflectionAnswers)),S=g.a.concat.apply(g.a,[S].concat(Mw(n.documents||[]))),S=g.a.compact(S),o.a.createElement("div",null,o.a.createElement(K.a,{className:"review-card"},this.getCardHeader(),o.a.createElement("div",{className:"review-wrapper"},b?o.a.createElement("div",{className:Ie()("review-video-container",S&&S.length>0?null:"no-documents")},b&&this.getVideoTopToolbar(),b&&o.a.createElement(mf.a,{id:"review-media",media:b,activityId:this.props.activityId,termClassId:this.props.termClassId,usageContext:kd.a.STUDENT_RESULT,marks:m,playerId:this.getVideoPlayerId()})):o.a.createElement("div",{className:Ie()("review-document-container",b?null:"no-media")},n&&S?o.a.createElement(oE,{documents:S,links:n.links}):o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"No documents found"}))),o.a.createElement("div",{className:Ie()("review-comments-container",b?null:"no-media")},o.a.createElement("div",{className:"review-feed-container",ref:function(t){e.feedContainer=t}},this.getFeedSection()),o.a.createElement("div",{className:"review-submit-container"},this.getSubmitSection(),o.a.createElement("div",{className:"self-assessment-container"},this.getSelfAssessmentComponent()),this.isTestStudent()&&o.a.createElement(ya.b,{type:ya.a.INFO},o.a.createElement("p",null,i._("Feedback is not allowed for test students"))))),o.a.createElement(fE,{visible:u,documents:S,links:n.links,onClose:this.onDocumentDialogClose}),o.a.createElement(Fr.a,{id:"delete-review-item-dialog",title:i._("Delete Comment"),visible:l,actions:this.getDeleteDialogActions()},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this comment?"}))),s&&o.a.createElement(Fr.a,{id:"edit-review-item-dialog",className:"edit-review-item-dialog",title:i._("Edit Comment"),visible:d,actions:this.getEditDialogActions(w)},o.a.createElement(ut.i,{id:"review-edit-textfield",className:"review-edit-textfield",enabled:!this.props.feedbackCommentIsLoading,placeholder:i._("Comment..."),onChange:this.onEditCommentChange,value:s.commentText,rows:1,errorText:w.exceedsLimit?i._("Exceeds {0} characters.",{0:w.maxLength}):"",maxLength:w.maxLength,required:!0,maxRows:4,ariaLabel:i._("Comment")})),f&&o.a.createElement(Bn.b,{rubric:r,rubricPoints:v,grade:h,mode:Qn.a.GRADE,onCancel:this.onSelfAssessmentRubricCancel,onSubmit:this.onSelfAssessmentRubricSubmit,onGradeChange:this.onRubricGradeChange}),o.a.createElement(jd,{visible:p,onClose:this.onPreviewReflectionAnswersClose}))))}}])&&Fw(n.prototype,r),a&&Fw(n,a),t}(a.Component),Yw=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),activityData:et.getActivityData(e),activityType:et.getActivityType(e),result:et.getActivityResult(e),reflectionAnswers:et.getReflectionAnswers(e),hasReflectionAnswers:et.hasReflectionAnswers(e),feedbackCommentIsLoading:et.getFeedbackCommentIsLoading(e),userId:wt.i(e),isFiveStarEnabled:et.isFiveStarEnabled(e),isRubricReviewEnabled:et.isRubricReviewEnabled(e),isRubricSelfReviewEnabled:et.isRubricSelfReviewEnabled(e),rubric:et.getRubric(e),rubricEvaluations:et.getRubricEvaluations(e),myData:et.getMyData(e),userData:wt.h(e),termClassId:et.getTermClassId(e),isAutoAnalysisEnabled:et.isAutoAnalysisEnabled(e),isAutoAnalysisScoreVisible:et.isAutoAnalysisScoreEnabled(e)}}))(Qw)));function Hw(e){return(Hw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zw(e){return(zw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kw(e,t){return(Kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $w=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=zw(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Hw(a)&&"function"!==typeof a?Xw(r):a,i=Xw(Xw(n)),s=function(){var e=n.props,t=e.activityName,r=e.postSubmissionMedia,a=e.postSubmisstionText,i=e.studentData,c=e.interactiveVideoSettings,s=e.i18n,u=i.result.media&&i.result.media.processingStatus===ml.a.READY;return o.a.createElement(kn,{title:t,serviceMethod:Et.a.refreshInteractiveVideoSubmittedActivity},o.a.createElement("div",null,o.a.createElement(Ur.a,null),o.a.createElement(UE,null),o.a.createElement(Zr.a,{title:s._("Post-Submission Instructions"),media:r,text:a}),o.a.createElement(_E,null),u&&o.a.createElement(Yw,null),o.a.createElement(nw,{interactiveAnswers:i.interactiveAnswers,isEducator:!1,isRestricted:!c[BE.b.SETTINGS.IS_SUMMARY_VISIBLE]})))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kw(e,t)}(t,e),t}(a.Component),Zw=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),studentData:et.getMyData(e),postSubmissionMedia:et.getPostSubmissionMedia(e),postSubmisstionText:et.getPostSubmissionText(e),interactiveVideoSettings:TE.b(e)}}))($w)));n("Pnbs");function Jw(e){return(Jw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e){return(eS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tS(e,t){return(tS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rS=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=eS(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Jw(a)&&"function"!==typeof a?nS(r):a,i=nS(nS(n)),s=function(){var e=n.props.activityResult;return o.a.createElement("div",null,e?o.a.createElement(Zw,null):o.a.createElement(Iw,null))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tS(e,t)}(t,e),t}(a.Component),aS=Object(s.a)(Object(c.b)((function(e){return{activityResult:et.getActivityResult(e),isLoading:et.getIsLoading(e)}}))(rS)),oS=n("W5Bm");function iS(e){return(iS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sS(e,t){return!t||"object"!==iS(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uS(e){return(uS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lS(e,t){return(lS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sS(this,uS(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lS(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=lc.f();return o.a.createElement("div",null,o.a.createElement(oS.a,{stopRecordingOnDocumentHide:e,refreshPageOnAnswerSubmission:e,bypassActivateCameraPrompt:!0,isStandaloneMode:!0}))}}])&&cS(n.prototype,r),a&&cS(n,a),t}(a.Component),fS=n("TVp9");function pS(e){return(pS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bS(e,t){return!t||"object"!==pS(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yS(e){return(yS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vS(e,t){return(vS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bS(this,yS(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vS(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.i18n;this.getAnsweredQuestionsCount(e)===e.questionCount&&this.getAnsweredQuestionsCount(this.props)!==this.props.questionCount&&Hn.a.showModal(o.a.createElement(ll.a,{id:"can-close-window",visible:!0,onClose:function(){window.close()},message:o.a.createElement("div",null,t._("All questions have been answered. This window will be closed."))}))}},{key:"getAnsweredQuestionsCount",value:function(e){return e.qaAnswers?e.qaAnswers.filter((function(t){return!e.question||t.qaQuestion.dbId!==e.question.dbId})).length:0}},{key:"render",value:function(){return this.props.activityData?o.a.createElement(dS,null):o.a.createElement(bc.a,{loading:!0})}}])&&mS(n.prototype,r),a&&mS(n,a),t}(a.Component);hS.propTypes={i18n:M.a.object,qaAnswers:M.a.array,questionCount:M.a.number};var gS=Object(x.withI18n)()(Object(c.b)((function(e){return{activityData:et.getActivityData(e),qaAnswers:fS.d(e),questionCount:fS.f(e),question:fS.e(e)}}))(Object(s.a)(hS)));function ES(e){return(ES="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SS(e,t){return!t||"object"!==ES(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OS(e){return(OS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CS(e,t){return(CS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),SS(this,OS(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CS(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.questionCount,r=e.qaAnswers,a=e.i18n;if(!t)return null;var i=r.length;return o.a.createElement("div",{className:"dashboard-container"},gr.a.isDueDateVisible()?o.a.createElement(Nn.a,null):null,o.a.createElement(yr.a,{className:"item-a",title:a._("Questions Answered"),iconClassName:vr.a.QUESTION},o.a.createElement("div",{className:"dashboard-contents"},o.a.createElement(x.Trans,{id:"{numberOfQuestionsAnswered,number} of {questionCount,number}",values:{numberOfQuestionsAnswered:i,questionCount:n}}))))}}])&&wS(n.prototype,r),a&&wS(n,a),t}(a.Component),TS=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityData(e),qaAnswers:fS.d(e),questionCount:fS.f(e)}}))(_S));function IS(e){return(IS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RS(e){return(RS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AS(e,t){return(AS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var kS=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=RS(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==IS(a)&&"function"!==typeof a?jS(r):a,o=jS(jS(n)),c=function(){var e=n.props.activityId;e=+e,Et.a.deleteSubmission(e)},(i="onRemoveSubmission")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AS(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.result,r=e.removeSubmissionIsLoading;return t?o.a.createElement("div",{className:"dashboard-container"},o.a.createElement(Ar.a,null),n?o.a.createElement(yr.b,{result:n,removeSubmissionIsLoading:r,onRemoveSubmission:this.onRemoveSubmission}):null):null}}])&&PS(n.prototype,r),a&&PS(n,a),t}(a.Component),NS=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:et.getActivityId(e),result:et.getActivityResult(e),qaSettings:fS.g(e),reviewedPeerReviews:et.getReviewedPeerReviews(e),peerReviewRequiredCount:et.getPeerReviewRequiredCount(e),removeSubmissionIsLoading:et.getRemoveSubmissionIsLoading(e)}}))(kS));function DS(e){return(DS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MS(e,t){return(MS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var FS=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=LS(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==DS(a)&&"function"!==typeof a?xS(r):a,i=xS(xS(n)),s=function(){var e=n.props,t=e.activityName,r=e.availablePeerReviews,a=e.instructionsText,i=e.instructionsMedia,c=e.i18n,s=e.isPeerReviewAllowedBeforeSubmission,u=e.rubric,l=e.isReflectionQuestionsEnabled,d=lc.f();return o.a.createElement($t.a,{title:t},o.a.createElement(Ur.a,{canRemoveSubmission:function(){return!1}}),o.a.createElement(TS,null),o.a.createElement(ey.a,null),o.a.createElement(Zr.a,{title:c._("Instructions"),media:i,text:a,rubric:u}),!(n.props.lmsLocked||!l)&&o.a.createElement(kg,null),o.a.createElement(oS.a,{stopRecordingOnDocumentHide:d,refreshPageOnAnswerSubmission:!1}),r&&s?o.a.createElement(_E,null):null)},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MS(e,t)}(t,e),t}(a.Component),VS=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),lmsLocked:et.getLmsLocked(e),availablePeerReviews:et.getAvailablePeerReviews(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),isPeerReviewAllowedBeforeSubmission:et.isPeerReviewAllowedBeforeSubmission(e),isReflectionQuestionsEnabled:et.isReflectionQuestionsEnabled(e),rubric:et.getRubric(e)}}))(FS))),GS=n("3Tiu"),US=n("rnBV"),qS=n("ERI2");function WS(e){return(WS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YS(e,t){return(YS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KS=2e4,XS=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=QS(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==WS(a)&&"function"!==typeof a?HS(r):a,zS(HS(HS(n)),"componentWillUnmount",(function(){n._ismounted=!1,clearTimeout(n.pollingTimer)})),zS(HS(HS(n)),"canRemoveSubmission",(function(){var e=n.props,t=e.result;return!!e.qaSettings.isStudentRetakeAllowed&&(t&&t.deletable)})),zS(HS(HS(n)),"startPolling",(function(){clearTimeout(n.pollingTimer),n._ismounted&&(n.pollingTimer=setTimeout((function(){n.refreshData()}),KS))})),zS(HS(HS(n)),"refreshData",(function(){var e=n.props,t=e.match.params.activityId;t=+t,e.currentActivityState===US.a.SUBMITTED&&qS.a.refreshSubmittedData(t).then((function(){n.startPolling()}))})),zS(HS(HS(n)),"onResetComplete",(function(){(0,n.props.dispatch)(GS.n(US.a.PROGRESS))})),zS(HS(HS(n)),"render",(function(){var e=n.props,t=e.activityName,r=e.i18n,a=e.instructionsText,i=e.instructionsMedia;return o.a.createElement($t.a,{title:t},o.a.createElement("div",null,o.a.createElement(Ur.a,{canRemoveSubmission:n.canRemoveSubmission,onResetComplete:n.onResetComplete}),o.a.createElement(NS,null),o.a.createElement(Zr.a,{title:r._("Post-Submission Instructions"),media:i,text:a}),o.a.createElement(_E,null),o.a.createElement(Yw,null)))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YS(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._ismounted=!0,this.refreshData(),this.startPolling()}}])&&BS(n.prototype,r),a&&BS(n,a),t}(a.Component),$S=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),educatorGrade:et.getEducatorGrade(e),result:et.getActivityResult(e),instructionsMedia:et.getPostSubmissionMedia(e),qaSettings:fS.g(e),instructionsText:et.getPostSubmissionText(e),currentActivityState:fS.b(e)}}))(XS)));n("7rMt");function ZS(e){return(ZS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eO(e){return(eO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tO(e,t){return(tO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return r=this,a=(e=eO(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==ZS(a)&&"function"!==typeof a?nO(r):a,rO(nO(nO(n)),"updateCurrentActivityState",(function(){var e=n.props,t=e.result,r=e.dispatch,a=US.a.PROGRESS;t&&t.requiredMedia&&t.requiredMedia.processingStatus&&t.requiredMedia.processingStatus===ml.a.READY&&(a=US.a.SUBMITTED),r(GS.n(a))})),rO(nO(nO(n)),"render",(function(){var e=n.props.currentActivityState,t=!0;return e?(e===US.a.SUBMITTED&&(t=!1),o.a.createElement(v.a,null,o.a.createElement(i.a,{exact:!0,path:Qh.j.STANDALONE_QA_RECORDER,component:gS}),o.a.createElement(i.a,{component:t?VS:$S}))):null})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tO(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.updateCurrentActivityState()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this.updateCurrentActivityState()}}])&&JS(n.prototype,r),a&&JS(n,a),t}(a.Component),oO=Object(s.a)(Object(c.b)((function(e){return{result:et.getActivityResult(e),isLoading:et.getIsLoading(e),currentActivityState:fS.b(e)}}))(aO)),iO=n("G57k");n("zFSh");function cO(e){return(cO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uO(e){return(uO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lO(e,t){return(lO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fO=function(e){function t(e){var n,r,a,i,c,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=uO(t).call(this,e))||"object"!==cO(a)&&"function"!==typeof a?dO(r):a,i=dO(dO(n)),s=function(e){if(!e)return null;switch(e){case pc.b.GROUP_PRESENTATION:return o.a.createElement(hg,null);case pc.b.INDIVIDUAL_PROJECT:return o.a.createElement(Xg,null);case pc.b.QA_ENHANCED:return o.a.createElement(oO,null);case pc.b.INTERACTIVE_VIDEO:return o.a.createElement(aS,null);default:return o.a.createElement("span",null,"Activity type not supported")}},(c="getActivityComponent")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n.state={show404Page:!1,isGroupFormationError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lO(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.match.params.activityId;Et.a.getActivityData(+t).catch((function(t){if(t&&t.errors){for(var n=0;n<t.errors.length;n++)if(-1!==t.errors[n].message.indexOf("group_for_activity_with_id_is_not_found")){e.setState({isGroupFormationError:!0});break}}else t.data}))}},{key:"render",value:function(){var e=this.props,t=e.activityType,n=e.activityData,r=e.isLoading,a=this.state,i=a.show404Page,c=a.isGroupFormationError;return r?o.a.createElement(At.b,{loading:r}):i?o.a.createElement(Ve,null):c?o.a.createElement(lg,null):t?o.a.createElement("span",null,o.a.createElement(iO.a,{classId:n.termClass.dbId}),this.getActivityComponent(t)):null}}])&&sO(n.prototype,r),a&&sO(n,a),t}(a.Component),pO=Object(s.a)(Object(c.b)((function(e){return{activityData:et.getActivityData(e),activityType:et.getActivityType(e),isLoading:et.getIsLoading(e)}}))(fO)),mO=n("J1aS");function bO(e){return(bO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yO(){return(yO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hO(e){return(hO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gO(e,t){return(gO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SO={WEBCAM_ONLY:"webcam only",WEBCAM_DESKSHARE:"webcam deskshare",DESKSHARE:"deskshare",AUDIO:"audio only"},OO=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=hO(t).call(this,e),n=!a||"object"!==bO(a)&&"function"!==typeof a?EO(r):a,wO(EO(EO(n)),"showRecorder",(function(){localStorage.setItem("recorderStandActivityId",n.state.activityId),n.setState({showRecorder:!0})})),wO(EO(EO(n)),"hideRecorder",(function(){n.setState({showRecorder:!1})})),wO(EO(EO(n)),"onActivityIdChange",(function(e){n.setState({activityId:e})})),wO(EO(EO(n)),"onModeChange",(function(e){n.setState({mode:e})}));var o=localStorage.getItem("recorderStandActivityId");return n.state={activityId:o||"",showRecorder:!1,webcam:SO.DESKSHARE},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gO(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.showRecorder,n=e.activityId,r=e.mode,a=this.props.i18n,i={};r===SO.WEBCAM_ONLY&&(i.canShareDesktop=!1),r===SO.WEBCAM_DESKSHARE&&(i.canShareDesktop=!0),r===SO.DESKSHARE&&(i.onlyDesktopMode=!0),r===SO.AUDIO&&(i.onlyAudio=!0);var c=+n>0;return o.a.createElement("div",{style:{width:"50%",margin:"0 auto"}},!t&&o.a.createElement("div",null,o.a.createElement(Tl.b,{id:"Activity id",name:"Activity id",label:"Activity id",onChange:this.onActivityIdChange,value:""+n}),o.a.createElement(ow.a,{id:"mode",name:"mode",type:"radio",label:"Recorder Type",ariaLabel:a._("Recorder Type"),enabled:c,onChange:this.onModeChange,controls:[{label:"Camera Only",value:SO.WEBCAM_ONLY},{label:"Camera + Screen",value:SO.WEBCAM_DESKSHARE},{label:"Screen Only",value:SO.DESKSHARE},{label:"Audio Only",value:SO.AUDIO}]}),o.a.createElement(Ue.f,{id:"button-recorder-show",primary:!0,ariaLabel:"Show Recorder",enabled:c,onClick:this.showRecorder},"Show Recorder")),t&&o.a.createElement(un.a,null,o.a.createElement(Di.b,yO({recorderId:"StandRecorder",mediaType:Hi.a.ACTIVITY_RESULT,activityId:+n,onFinish:this.hideRecorder},i))))}}])&&vO(n.prototype,r),a&&vO(n,a),t}(a.Component),CO=Object(x.withI18n)()(OO),_O=n("+psP");function TO(e){return(TO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PO(e,t){return!t||"object"!==TO(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RO(e){return(RO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AO(e,t){return(AO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jO=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),PO(this,RO(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AO(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(_O.a,{svgUrl:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/shapes.svg",cursorUrl:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/cursor.xml",zoomsUrl:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/panzooms.xml",chatMessagesUrl:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/slides_new.xml",playerId:"BbbTestPlayer",playerOptions:{sources:[{src:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/__4_73279eb9b6cac318a5641bfa3447b46b.mp4",type:"video/mp4"}]},videoUrl:"https://encoded-staging-virginia-youseeu-com.s3.amazonaws.com/i-3/educator/_4/3694-1519719005_73279eb9b6cac318a5641bfa3447b46b/__4_73279eb9b6cac318a5641bfa3447b46b.mp4"})}}])&&IO(n.prototype,r),a&&IO(n,a),t}(a.Component),kO=n("Ondw");n("Jwcr"),n("ybFX");function NO(e){return(NO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LO(e,t){return!t||"object"!==NO(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MO(e){return(MO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xO(e,t){return(xO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FO=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),LO(this,MO(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xO(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.children?o.a.createElement("div",{className:Ie()("c-crate-activity__block",this.props.className)},this.props.title?o.a.createElement("h2",{className:"section-header"},this.props.title):null,this.props.children):null}}])&&DO(n.prototype,r),a&&DO(n,a),t}(a.Component);FO.propTypes={className:M.a.string,hasToggle:M.a.bool,onToggle:M.a.func,title:M.a.string};var VO=n("vnhF"),GO=(n("9WWN"),n("VQIj")),UO=n("KTZk"),qO=(n("dufB"),function(e){var t=e.className,n=e.children;return o.a.createElement("span",{className:Ie()("form-label-tag",t)},n)});qO.propTypes={className:M.a.string,children:M.a.node};var WO=qO,BO=function(e){var t=e.i18n,n=e.className;return o.a.createElement(WO,{className:Ie()("form-label-tag--optional",n)},t._("(optional)"))};BO.propTypes={className:M.a.string};var QO=Object(x.withI18n)()(BO),YO=function(e){var t=e.i18n,n=e.className;return o.a.createElement(WO,{className:Ie()("form-label-tag--required",n)},t._("(required)"))};YO.propTypes={className:M.a.string};var HO=Object(x.withI18n)()(YO);function zO(e){return(zO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XO(e){return(XO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $O(e,t){return($O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eC=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=XO(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==zO(a)&&"function"!==typeof a?ZO(r):a,JO(ZO(ZO(n)),"onConfigureRubrics",(function(){var e=n.props,t=e.match,r=e.history,a=e.location,o=V.a.compile(Qh.f.EDUCATOR_RUBRICS_LIST)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){JO(e,t,n[t])}))}return e}({},t.params));r.push({pathname:o,state:{quickNavItems:[{context:VO.a.CONFIGURATION,location:a}]}})})),JO(ZO(ZO(n)),"renderAutoAnalysisGradeSource",(function(){var e=n.props,t=e.i18n,r=e.onAutoGradeScoreSourceChange,a=e.autoGradeScoreSource;if(!r||!a)return null;var i=[{label:t._("Overall Score"),value:hb.AUTO_ANALYSIS_OVERALL_SCORE,itemProps:{id:"auto-grade-source-type-option-aa-overall"}},{label:t._("Delivery Score"),value:hb.AUTO_ANALYSIS_DELIVERY_SCORE,itemProps:{id:"auto-grade-source-type-option-aa-delivery"}},{label:t._("Content Score"),value:hb.AUTO_ANALYSIS_CONTENT_SCORE,itemProps:{id:"auto-grade-source-type-option-aa-content"}}];return o.a.createElement("div",{className:"grade-type-auto-analysis-source-selectfield-container"},o.a.createElement(ut.e,{id:"selectfield-assignment-settings-grade-type-auto-analysis-source",className:"grade-type-selectfield",label:t._("Auto Analysis\\u2122 Score"),onChange:r,value:a.value,enabled:!a.disabled,menuItems:i}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$O(e,t)}(t,e),n=t,(r=[{key:"getGradeTypeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score Type"):e._("Grade Type")}},{key:"render",value:function(){var e=this.props,t=e.onGradeTypeChange,n=e.gradeType,r=e.activityName,a=e.onActivityNameChange,i=e.submitDueAt,c=e.onSubmitDueAtChange,s=e.gradeRubric,u=e.onGradeRubricChange,l=e.rubrics,d=e.showClientErrors,f=e.i18n,p=e.rubricAlreadyUsedForPeerReview,m=e.resetSubmitDueAt,b=e.canAutoGrade,y=e.canGradeType,v=e.countTowardsFinalGrade,h=e.activityScore,E=e.institution,w=e.onActivityScoreChange,S=e.onCountTowardsFinalGradeChange,O=Object(yb.a)(E);l=this.props.rubrics||[],l=g.a.clone(l),p&&(l=l.map((function(e){return e.dbId!==p.dbId&&((e=g.a.merge({},e)).disabled=!0),e})));var C=n.value===nc.a.RUBRIC,_=n.value===nc.a.AUTO_ANALYSIS,T=!1;i&&i.value&&(T=i.value<new Date);var I=[{label:f._("Percentage"),value:nc.a.GRADE,itemProps:{id:"grade-type-option-percentage"}}];if(b){var P=gr.a.isAutoGradingRestricted(),R=f._("Auto Analysis\\u2122");I.push({label:R,value:nc.a.AUTO_ANALYSIS,itemProps:{id:"grade-type-option-auto-analysis"},disabled:P,getProps:function(){return{primaryText:o.a.createElement(Ec.b,{className:"grade-type-option-tooltip",label:P?f._(qf.a.FREEMIUM_CONFIG_OPTION):""},R),className:Ie()({"grade-type-option":!0,"grade-type-option--disabled":P})}}})}var A=!gr.a.isRubricEnabled(),j=f._("Rubric");return I=g.a.concat(I,[{label:j,value:nc.a.RUBRIC,itemProps:{id:"grade-type-option-rubric"},disabled:A,getProps:function(){return{primaryText:o.a.createElement(Ec.b,{className:"grade-type-option-tooltip",label:A?f._(qf.a.FREEMIUM_CONFIG_OPTION):""},j),className:Ie()({"grade-type-option":!0,"grade-type-option---disabled":A})}}},{label:f._("Pass/Fail"),value:nc.a.PASS_FAIL,itemProps:{id:"grade-type-option-pass-fail"}},{label:f._("Auto Pass"),value:nc.a.COMPLETION,itemProps:{id:"grade-type-option-auto-pass"}},{label:f._("Five Star"),value:nc.a.FIVESTAR,itemProps:{id:"grade-type-option-rating"}}]),o.a.createElement(FO,{className:"general-section-form",title:f._("General")},o.a.createElement("div",{className:"config-section-contents"},gr.a.isAssignmentNameVisible()?o.a.createElement("div",null,o.a.createElement(ut.i,{style:__,id:"activity-name-textfield",value:r.value,enabled:!r.disabled,errorText:d?r.error:"",label:o.a.createElement(o.a.Fragment,null,f._("Assignment Name"),o.a.createElement(HO,null)),ariaLabel:f._("Assignment Name"),onChange:function(e){return a(e)}})):null,gr.a.isDueDateVisible()?o.a.createElement("div",null,o.a.createElement("div",{className:"due-date-container"},o.a.createElement(ut.b,{id:"due-date-datepicker",textFieldStyle:__,value:i.value,enabled:!i.disabled,onChange:function(e,t){c(t)},label:o.a.createElement(o.a.Fragment,null,f._("Due Date"),o.a.createElement(QO,null)),ariaLabel:f._("Due Date (optional)")}),o.a.createElement(ut.k,{id:"due-date-timepicker",textFieldStyle:__,value:i.value,enabled:!i.disabled,label:o.a.createElement(o.a.Fragment,null,f._("Due Time"),o.a.createElement(QO,null)),ariaLabel:f._("Due Time (optional)"),onChange:function(e,t){c(t)}}),o.a.createElement(Ue.c,{id:"button-due-date-reset",onClick:m,enabled:!i.disabled,ariaLabel:f._("Reset due date"),className:"md-cell--bottom"},Je.a.CLOSE)),!i.disabled&&T&&o.a.createElement(ya.b,{className:"assignment-datetime-message",type:ya.a.INFO,message:f._("The selected date and time is in the past."),contentInheritsStatusColor:!0})):null,y&&o.a.createElement("div",{className:"grade-type-container"},o.a.createElement("div",{className:"grade-type-selectfield-container"},o.a.createElement(ut.e,{id:"selectfield-assignment-settings-grade-type",className:"grade-type-selectfield",label:this.getGradeTypeLabel(),ariaLabel:this.getGradeTypeLabel(),onChange:t,value:n.value,enabled:!n.disabled,menuItems:I})),_&&this.renderAutoAnalysisGradeSource(),C&&o.a.createElement(ut.g,{className:"grade-type-select-rubric-container",onConfigureRubrics:this.onConfigureRubrics,onRubricChange:u,selectedRubric:s,rubrics:l})),O&&o.a.createElement(ut.i,{style:__,id:"activity-score",value:h.value,enabled:!h.disabled,errorText:d?h.error:"",label:f._("Activity Score"),ariaLabel:f._("Activity Score"),type:"number",min:0,onChange:function(e){var t=0;e>0&&(t=e),w(t)}}),O&&o.a.createElement(GO.a,{id:"count_towards_final_grade",name:"count_towards_final_grade",label:f._("Count towards final grade"),ariaLabel:f._("Count towards final grade"),checked:v.value,enabled:!v.disabled,onChange:S})))}}])&&KO(n.prototype,r),a&&KO(n,a),t}(a.Component);eC.propTypes={onGradeTypeChange:M.a.func.isRequired,gradeType:M.a.object,onAutoGradeScoreSourceChange:M.a.func.isRequired,autoGradeScoreSource:M.a.object,canAutoGrade:M.a.bool,canGradeType:M.a.bool,activityName:M.a.object,onActivityNameChange:M.a.func.isRequired,submitDueAt:M.a.object,onSubmitDueAtChange:M.a.func.isRequired,gradeRubric:M.a.object,onGradeRubricChange:M.a.func.isRequired,rubrics:M.a.arrayOf(M.a.shape({dbId:M.a.number.isRequired,name:M.a.string.isRequired}))},eC.defaultProps={canGradeType:!0};var tC=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(){return{}}))(eC))),nC=n("k/UH");n("jNk8");function rC(e){return(rC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oC(e){return(oC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iC(e,t){return(iC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uC="{{WEIGHT_ELEMENT_PLACEHOLDER}}",lC=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=oC(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==rC(a)&&"function"!==typeof a?cC(r):a,sC(cC(cC(n)),"onPeerReviewAmountChange",(function(e){var t=e;if(t>=1e3)return!1;t<0&&(t=0),(0,n.props.onPeerReviewAmountChange)(t)})),sC(cC(cC(n)),"onGradedPeerReviewChange",(function(e,t){var r=t||n.props,a=r.onGradedPeerReviewChange,o=r.gradedPeerReviewSettings,i=r.peerReviewAmount,c=g.a.merge({},o,e),s=c.weight;c.isValid=s>=fy.e&&s<=fy.d,c.enabled&&!i.disabled&&i.value<1&&(c.isValid=!1),a&&a(c)})),sC(cC(cC(n)),"isGradedPeerReviewWeightValid",(function(){var e=n.props.gradedPeerReviewSettings.weight;return e>=fy.e&&e<=fy.d})),sC(cC(cC(n)),"getGradedPeerReviewOption",(function(){var e=n.props,t=e.i18n,r=e.canGradedPeerReview,a=e.gradedPeerReviewSettings,i=e.hasGradedSubmission;if(r){var c=a.weight,s=a.enabled&&!i&&!a.isEditingRestricted,u=s&&!n.isGradedPeerReviewWeightValid(),l=null;u&&(l=t._("Weight must be between 1% and 99%"));var d=n.getGradeUsingLabel(),f=o.a.createElement(ut.c,{id:"graded-peer-review-weight",className:"graded-peer-review-weight",ariaLabel:t._("Peer review grade weight"),enabled:s,error:u,onChange:function(e){n.onGradedPeerReviewChange({weight:e})},onValidate:function(e){return e<=fy.d},value:c}),p=g.a.split(d,uC,2);p.splice(1,0,f);var m=n.getGradedPeerReviewTooltipLabel();return a.tooltip?m=a.tooltip:!a.enabled&&i&&(m=n.getGradedPeerReviewRestrictedTooltipLabel()),o.a.createElement("div",{className:"graded-peer-review-options-container"},o.a.createElement("div",{className:"graded-peer-review-checkbox-container"},o.a.createElement(ut.a,{id:"graded-peer-review-checkbox",name:"graded-peer-review-checkbox",className:"graded-peer-review-checkbox",ariaLabel:n.getGradeWeightLabel(c),enabled:!i&&!a.isEditingRestricted,label:o.a.createElement("div",{className:"graded-peer-review-checkbox-label"},p.map((function(e,t){return o.a.createElement("span",{key:t},e)}))),tooltip:{label:m},checked:a.enabled,onChange:function(e){n.onGradedPeerReviewChange({enabled:e})}})),u&&o.a.createElement(ya.b,{className:"graded-peer-review-weight-error-message",type:ya.a.ERROR,message:l,contentInheritsStatusColor:!0}))}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iC(e,t)}(t,e),n=t,(r=[{key:"getGradeUsingLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score peer reviews using {WEIGHT_ELEMENT_PLACEHOLDER} weight",{WEIGHT_ELEMENT_PLACEHOLDER:uC}):e._("Grade peer reviews using {WEIGHT_ELEMENT_PLACEHOLDER} weight",{WEIGHT_ELEMENT_PLACEHOLDER:uC})}},{key:"getGradedPeerReviewTooltipLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Enabling this option will make the overall assignment score weighted. The scored peer review portion is automatically calculated but can be manually overridden."):e._("Enabling this option will make the overall assignment grade weighted. The graded peer review portion is automatically calculated but can be manually overridden.")}},{key:"getGradedPeerReviewRestrictedTooltipLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Enabling this option is currently restricted because at least one score has been saved for this assignment."):e._("Enabling this option is currently restricted because at least one grade has been saved for this assignment.")}},{key:"getGradeWeightLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("Score peer reviews with {weight}% weight",{weight:e}):t._("Grade peer reviews with {weight}% weight",{weight:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.gradeType.value===this.props.gradeType.value&&e.peerReviewAmount.value===this.props.peerReviewAmount.value||this.onGradedPeerReviewChange(e.gradedPeerReviewSettings,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.peerReview,r=t.onPeerReviewChange,a=t.allowViewOthersResultsWithoutOwn,i=t.onAllowViewOthersResultsWithoutOwnChange,c=t.isCommentingAnonymous,s=t.onIsCommentingAnonymousChange,u=t.peerReviewType,l=t.onPeerReviewTypeChange,d=t.peerReviewAmount,f=t.quantitativeReviewType,p=t.onQuantitativeReviewTypeChange,m=t.quantitativeReviewTypes,b=t.showAdvanced,y=t.i18n,v=t.isD2LFreemium,h=t.tooltipLabel,g=t.enablePeerReview,E=t.gradedPeerReviewSettings,w=t.hasGradedSubmission,S=t.canGradedPeerReview,O=t.peerReviewDueAt,C=t.resetPeerReviewDueAt,_=t.onPeerReviewDueAtChange,T=t.isPeerRevieweeAnonymous,I=t.onIsPeerRevieweeAnonymousChange,P=Boolean(S&&w&&n.value&&E.enabled),R=!P,A=R&&!c.disabled,j=R&&!T.disabled,k={label:y._("Enabling this option will mask the reviewer's name from the submission owner.")},N={label:y._("Enabling this option will mask the submitter's name from reviewers. This will not mask any identifiable information included in the submission.")};v?(A=!1,k.label=y._(qf.a.FREEMIUM_CONFIG_OPTION),j=!1,N.label=y._(qf.a.FREEMIUM_CONFIG_OPTION)):u.value!==pf.a.SYSTEM&&(j=!1,N.label=y._("This option is only available with the Automatic (System Selected) peer review mode"));var D=!1;return O&&O.value&&(D=O.value<new Date),o.a.createElement("div",{className:Ie()("peer-review-form",n.value?"c-crate-activity__block":null)},o.a.createElement("div",{id:"toggle-assignment-settings-peer-review",className:"peer-review-header"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Peer Review"})),o.a.createElement(nC.a,{id:"peer-review-toggle",className:Ie()("peer-review-toggle",P?"restricted":null),label:"",enabled:gr.a.isPeerReviewEnabled()&&g&&!n.disabled&&R,tooltip:{label:P?y._("This feature cannot be disabled"):h},ariaLabel:y._("Enable/Disable Peer Review"),name:"peer-review-toggle",onChange:r,checked:gr.a.isPeerReviewEnabled()&&n.value})),gr.a.isPeerReviewEnabled()&&o.a.createElement("div",{className:"config-section-contents peer-review-contents"},P&&o.a.createElement(ya.b,{className:"graded-peer-review-has-grade-message",type:ya.a.RESTRICTED,message:y._("Editing of peer review options is currently restricted because at least one grade has been saved for this assignment."),contentInheritsStatusColor:!1}),n.value&&o.a.createElement("div",{id:"assignment-settings-peer-review-type"},b&&o.a.createElement(ut.h,{style:__,id:"peer_review_type",enabled:!v&&!u.disabled&&R,name:"peer_review_type",type:"radio",tooltip:{label:v?y._(qf.a.FREEMIUM_CONFIG_OPTION):null},ariaLabel:y._("Peer Review Type"),value:u.value,onChange:l,controls:[{id:"radio-peer-review-type-system",label:y._("Automatic (System Selected)"),value:pf.a.SYSTEM},{id:"radio-peer-review-type-student",label:y._("Manual (Student Selected)"),value:pf.a.STUDENT}]}),b&&o.a.createElement("div",{className:"peer-review-options-container"},o.a.createElement("div",{id:"checkbox-peer-review-allow-before-submission"},o.a.createElement(ut.a,{id:"allow_view_other_results_without_own",enabled:!v&&!a.disabled&&R,name:"allow_view_other_results_without_own",label:y._("Allow peer review before submission"),ariaLabel:y._("Allow peer review before submission"),tooltip:{label:v?y._(qf.a.FREEMIUM_CONFIG_OPTION):null},checked:a.value,onChange:i})),o.a.createElement("div",{id:"checkbox-peer-review-allow-conceal-reviewer"},o.a.createElement(ut.a,{id:"anonymous_commenting",enabled:A,name:"anonymous_commenting",label:y._("Conceal reviewer identity"),ariaLabel:y._("Conceal reviewer identity"),tooltip:k,checked:c.value,onChange:s})),o.a.createElement("div",{id:"checkbox-peer-review-allow-conceal-submitter"},o.a.createElement(ut.a,{id:"anonymous_submitter",enabled:j,name:"anonymous_submitter",label:y._("Conceal submitter identity"),ariaLabel:y._("Conceal submitter identity"),tooltip:N,checked:T.value,onChange:I})),this.getGradedPeerReviewOption()),o.a.createElement("div",{className:"peer-review-other-options"},o.a.createElement(ut.i,{style:__,id:"peer_review_amount",className:"peer-review-required-amount",name:"peer_review_amount",label:y._("Number of Required Reviews"),value:""+d.value,enabled:!d.disabled&&R,onChange:function(t){return e.onPeerReviewAmountChange(t)},min:0,type:"number",errorText:E&&E.enabled&&d.value<1?y._("Must be greater than 0 when using grading peer reviews"):null,ariaLabel:y._("Number of Required Reviews")}),b&&o.a.createElement(ut.e,{style:__,id:"selectfield-assignment-settings-peer-review-evaluation-type",enabled:!v&&!f.disabled&&R,className:"peer-review-quantitative-type",label:y._("Review Type"),ariaLabel:y._("Review Type"),tooltip:{label:v?y._(qf.a.FREEMIUM_CONFIG_OPTION):null},value:f.value,onChange:p,menuItems:m})),b&&gr.a.isPeerReviewDueDateEnabled()&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"due-date-container"},o.a.createElement(ut.b,{id:"due-date-datepicker",textFieldStyle:__,value:O.value,enabled:!O.disabled,onChange:function(e,t){_(t)},label:o.a.createElement(o.a.Fragment,null,y._("Due Date"),o.a.createElement(QO,null)),ariaLabel:y._("Due Date (optional)")}),o.a.createElement(ut.k,{id:"due-date-timepicker",textFieldStyle:__,value:O.value,enabled:!O.disabled,label:o.a.createElement(o.a.Fragment,null,y._("Due Time"),o.a.createElement(QO,null)),ariaLabel:y._("Due Time (optional)"),onChange:function(e,t){_(t)}}),o.a.createElement(Ue.c,{id:"button-peer-review-due-date-reset",onClick:C,ariaLabel:y._("Reset due date"),className:"due-date-reset-btn md-cell--bottom",enabled:!O.disabled},Je.a.CLOSE)),!O.disabled&&D&&o.a.createElement(ya.b,{className:"peer-review-datetime-message",type:ya.a.INFO,message:y._("The selected date and time is in the past."),contentInheritsStatusColor:!0})))))}}])&&aC(n.prototype,r),a&&aC(n,a),t}(a.Component);lC.propTypes={showAdvanced:M.a.bool,enablePeerReview:M.a.bool.isRequired,tooltipLabel:M.a.string,peerReview:M.a.object.isRequired,onPeerReviewChange:M.a.func.isRequired,gradeType:M.a.object.isRequired,allowViewOthersResultsWithoutOwn:M.a.object.isRequired,onAllowViewOthersResultsWithoutOwnChange:M.a.func.isRequired,isCommentingAnonymous:M.a.object.isRequired,onIsCommentingAnonymousChange:M.a.func.isRequired,isPeerRevieweeAnonymous:M.a.object.isRequired,onIsPeerRevieweeAnonymousChange:M.a.func.isRequired,peerReviewType:M.a.object.isRequired,onPeerReviewTypeChange:M.a.func.isRequired,peerReviewAmount:M.a.object.isRequired,onPeerReviewAmountChange:M.a.func.isRequired,quantitativeReviewType:M.a.object.isRequired,onQuantitativeReviewTypeChange:M.a.func.isRequired,canGradedPeerReview:M.a.bool,gradedPeerReviewSettings:M.a.object,onGradedPeerReviewChange:M.a.func,hasGradedSubmission:M.a.bool,peerReviewDueAt:M.a.object,onPeerReviewDueAtChange:M.a.func,resetPeerReviewDueAt:M.a.func,i18n:M.a.object,quantitativeReviewTypes:M.a.array,isD2LFreemium:M.a.bool},lC.defaultProps={canGradedPeerReview:!1,enablePeerReview:!0,hasGradedSubmission:!1,showAdvanced:!1};var dC=Object(x.withI18n)()(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e)}}))(lC));n("idEK");function fC(e){return(fC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mC(e,t){return!t||"object"!==fC(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bC(e){return(bC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yC(e,t){return(yC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vC=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mC(this,bC(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yC(e,t)}(t,e),n=t,(r=[{key:"getDisabledLabel",value:function(){var e=this.props.i18n;return gr.a.isRubricEnabled()?Object(UO.a)()?e._("Rubric Self Assessment can only be enabled for assignments with Score Type of Rubric"):e._("Rubric Self Assessment can only be enabled for assignments with Grade Type of Rubric"):e._(qf.a.FREEMIUM_CONFIG_OPTION)}},{key:"render",value:function(){var e=this.props,t=e.selfAssessment,n=e.onSelfAssessmentChange,r=e.i18n,a=t.disabled,i=a?this.getDisabledLabel():"";return o.a.createElement("div",{className:"self-assessment-form"},o.a.createElement("div",{id:"toggle-assignment-settings-self-assessment",className:"self-assessment-header"},o.a.createElement("h2",{className:"section-header"},r._("Rubric Self Assessment")),o.a.createElement(nC.a,{ariaLabel:r._("Enable/Disable Rubric Self Assessment"),id:"self-assessment-toggle",checked:t.value,className:"self-assessment-toggle",enabled:!a,label:"",name:"self-assessment-toggle",onChange:n,tooltip:{label:i}})))}}])&&pC(n.prototype,r),a&&pC(n,a),t}(a.Component);vC.propTypes={selfAssessment:M.a.object.isRequired,onSelfAssessmentChange:M.a.func.isRequired,i18n:M.a.object.isRequired};var hC,gC=Object(x.withI18n)()(vC);n("KeFY");function EC(e){return(EC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wC(){return(wC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){IC(e,t,n[t])}))}return e}function OC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CC(e){return(CC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _C(e,t){return(_C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PC=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=CC(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==EC(a)&&"function"!==typeof a?TC(r):a,IC(TC(TC(n)),"onTextChange",(function(e){var t=SC({},n.props.question,IC({isDirty:!0},id.a.QUESTION.TEXT,g.a.trimStart(e)));n.props.onChange(t)})),IC(TC(TC(n)),"onDelete",(function(){n.props.onDelete(n.props.question)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_C(e,t)}(t,e),n=t,(r=[{key:"getQuestionNumber",value:function(){var e=this.props,t=e.i18n,n=e.question[id.a.QUESTION.SORT]+1;if(n)return t._("{questionNumber}.",{questionNumber:n})}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.question,r=e.isEditingLocked,a=e.isEditingRestricted,i=e.dragHandleProps,c=e.errorMessage,s=String(n[id.a.QUESTION.TEXT]),u=r||a;return o.a.createElement("div",{className:"reflection-questions-config-item"},o.a.createElement("div",{className:"reflection-questions-config-item-index"},this.getQuestionNumber()),o.a.createElement(ut.i,{id:"reflection-questions-config-item-text",className:"reflection-questions-config-item-text",ariaLabel:t._("Edit Reflection Question Text"),enabled:!r,maxLength:id.e,maxRows:3,onChange:this.onTextChange,placeholder:n.isNew?t._("New question..."):"",rows:1,required:!0,errorText:c,value:s}),o.a.createElement("div",{className:"reflection-questions-config-item-icons"},o.a.createElement(Ue.c,{id:"button-reflection-question-delete",ariaLabel:t._("Delete Reflection Question"),enabled:!u,onClick:this.onDelete,tooltip:u?{label:t._("Questions cannot be deleted at this time")}:null},Je.a.DELETE),o.a.createElement("div",wC({className:"reflection-questions-config-item-icons-reorder"},i),o.a.createElement(zt.a,{ariaLabel:t._("Reorder Question"),className:vr.a.DOT_8,enabled:!u,tooltip:{label:u?t._("Questions cannot be reorderd at this time"):t._("Drag to reorder")}}))))}}])&&OC(n.prototype,r),a&&OC(n,a),t}(a.Component);PC.propTypes={dragHandleProps:M.a.object,errorMessage:M.a.string,isEditingRestricted:M.a.bool,onChange:M.a.func.isRequired,onDelete:M.a.func.isRequired,question:M.a.shape((hC={isDirty:M.a.bool,isNew:M.a.bool},IC(hC,id.a.QUESTION.TEXT,M.a.string.isRequired),IC(hC,id.a.QUESTION.SORT,M.a.number.isRequired),hC)).isRequired},PC.defaultProps={dragHandleProps:{},errorMessage:null,isEditingLocked:!1,isEditingRestricted:!1,question:SC({},id.g)};var RC=Object(x.withI18n)()(PC);n("mWtQ");function AC(e){return(AC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jC(){return(jC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function NC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function DC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){VC(e,t,n[t])}))}return e}function LC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MC(e){return(MC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xC(e,t){return(xC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GC="reflection-questions-settings",UC=GC+"-list-item",qC="REFLECTION_QUESTION",WC=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=MC(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==AC(a)&&"function"!==typeof a?FC(r):a,VC(FC(FC(n)),"onToggleChange",(function(){var e=n.props.settings.enabled;n.onChange(DC({},n.props.settings,{enabled:!e,isDirty:!0}))})),VC(FC(FC(n)),"onQuestionChange",(function(e){for(var t=n.props.settings.questions,r=[],a=!1,o=0;t&&o<t.length;o++){var i=t[o];i.dbId===e.dbId?(r.push(e),a=!0):r.push(i)}!a&&Boolean(e.isNew)&&r.push(e),n.onChange(DC({},n.props.settings,{questions:r,isDirty:!0}))})),VC(FC(FC(n)),"onQuestionDelete",(function(e){var t=n.props.settings.questions,r=t?NC(t):[],a=g.a.findIndex(r,["dbId",e.dbId]);r.splice(a,1),n.onChange(DC({},n.props.settings,{questions:r,isDirty:!0}))})),VC(FC(FC(n)),"onDragEnd",(function(e){if(e.destination){var t=n.props.settings.questions,r=n.reorder(t,e.source.index,e.destination.index);n.onChange(DC({},n.props.settings,{questions:r,isDirty:!0}))}})),VC(FC(FC(n)),"reorder",(function(e,t,n){var r=NC(e),a=kC(r.splice(t,1),1)[0];return r.splice(n,0,a),r})),VC(FC(FC(n)),"onChange",(function(e){var t=n.process(e);n.props.onChange(DC({},e,t))})),VC(FC(FC(n)),"process",(function(e){var t=n.props.i18n,r=e.questions,a=e.enabled,o=r.length,i={},c=id.f,s=id.e;o>=c||(i[GC+"-no-questions"]=t._("Please create at least {minQuestionCount} reflection question.",{minQuestionCount:c}));for(var u=0;u<r.length;u++){var l=r[u][id.a.QUESTION.TEXT];l.length>s&&(i[GC+"-question-text-length["+u+"]"]=t._("Exceeds {maxQuestionLength} characters.",{maxQuestionLength:s})),l.length>0||(i[GC+"-question-text-length["+u+"]"]=t._("Field is required."))}return{errors:i,isValid:!a||!(Object.keys(i).length>0)}})),VC(FC(FC(n)),"getErrorsList",(function(){var e=n.props.settings,t=e.errors,r=e.isValid,a=[],i=t[GC+"-no-questions"];return i&&a.push(o.a.createElement("h5",{key:GC+"-error[0]"},i)),r||!(a&&a.length>0)?null:o.a.createElement("div",{className:GC+"-validation-container"},o.a.createElement(zt.a,{className:GC+"-validation-icon"},Je.a.ERROR),o.a.createElement("div",{className:GC+"-validation-errors"},a))})),VC(FC(FC(n)),"getQuestion",(function(e,t,r){var a=n.props.settings,i=a.errors,c=a.isEditingLocked,s=a.isEditingRestricted,u=t,l=i[GC+"-question-text-length["+t+"]"];return o.a.createElement(RC,{key:UC+"["+u+"]",isEditingLocked:c,isEditingRestricted:s,question:DC({},e,{orderNumber:u}),onChange:n.onQuestionChange,onDelete:n.onQuestionDelete,dragHandleProps:r,errorMessage:l})})),VC(FC(FC(n)),"onNewQuestionClick",(function(){var e,t=n.props.settings.questions,r=t?t.length:0,a=DC({},id.g,(VC(e={},id.a.QUESTION.SORT,r),VC(e,"dbId",id.h()),e));n.onQuestionChange(a)})),VC(FC(FC(n)),"getActions",(function(){var e=n.props,t=e.i18n,r=e.settings,a=r.questions,i=r.isEditingLocked,c=r.isEditingRestricted,s=(a?a.length:0)<id.d&&!i&&!c;return o.a.createElement("div",{className:GC+"-actions"},o.a.createElement(Ue.f,{id:"button-assignment-settings-reflection-questions-create",primary:!0,onClick:n.onNewQuestionClick,enabled:s,tooltip:{label:s?"":t._("Questions cannot be created at this time")}},t._("Add New Question")))})),VC(FC(FC(n)),"getQuestions",(function(){var e=n.props,t=e.i18n,r=e.settings,a=r.questions,i=r.isEditingLocked,c=r.isEditingRestricted,s=a.map((function(e,t){return o.a.createElement(ym.b,{key:e.dbId,draggableId:e.dbId,index:t,type:qC,isDragDisabled:i||c},(function(r,a){return o.a.createElement("div",jC({ref:r.innerRef,className:a.isDragging?UC+"-drag-container--active":""},r.draggableProps),n.getQuestion(e,t,r.dragHandleProps))}))}));return o.a.createElement("div",{className:GC},n.getWarningMessage(),o.a.createElement("p",{className:GC+"-message"},t._("Provide a list of questions below. The student will be prompted to answer these questions prior to proceeding to work on the assignment.")),o.a.createElement("div",{className:GC+"-list"},o.a.createElement(ym.a,{onDragEnd:n.onDragEnd},o.a.createElement(ym.c,{droppableId:"droppable-reflection-questions",type:qC},(function(e,t){return o.a.createElement("div",jC({ref:e.innerRef,className:t.isDraggingOver?GC+"-list-drag-container--active":""},e.droppableProps),s)}))),n.getErrorsList(),n.getActions()))})),VC(FC(FC(n)),"getWarningMessage",(function(){var e=n.props,t=e.i18n,r=e.settings,a=r.isEditingLocked,i=r.isEditingRestricted;if(!a&&!i)return null;var c="";return a?c=t._("Changes to the Reflection Questions section is not allowed."):i&&(c=t._("Changes to the Reflection Questions section is currently limited because at least one student has already answered these questions.")),o.a.createElement("div",{className:GC+"-message--warning"},o.a.createElement(ya.b,{type:ya.a.WARNING,message:c}))})),VC(FC(FC(n)),"getHeader",(function(e,t){var r=n.props,a=r.i18n,i=r.settings,c=i.isEditingLocked,s=i.isEditingRestricted,u=id.d;return o.a.createElement("div",{id:"toggle-assignment-settings-reflection-questions",className:GC+"-header"},o.a.createElement("div",{className:GC+"-header-left"},o.a.createElement("h2",{className:GC+"-header-text--primary section-header"},a._("Reflection Questions")),e&&t>0&&o.a.createElement("h4",{className:GC+"-header-text--secondary"},a._("({questionCount} of {max} max)",{questionCount:t,max:u}))),o.a.createElement(nC.a,{id:"reflection-questions-toggle",className:GC+"-toggle",label:"",ariaLabel:a._("Enable/Disable Reflection Questions"),name:"reflection-questions-toggle",onChange:n.onToggleChange,enabled:!c&&!s,checked:e}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xC(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.settings,t=e.enabled,n=e.questions;return o.a.createElement("div",{className:GC+"-container"},this.getHeader(t,n.length||0),t&&this.getQuestions())}}])&&LC(n.prototype,r),a&&LC(n,a),t}(a.Component);WC.propTypes={onChange:M.a.func.isRequired,settings:M.a.shape({enabled:M.a.bool,isEditingLocked:M.a.bool,isEditingRestricted:M.a.bool,questions:M.a.array})},WC.defaultProps={settings:{enabled:!1,isEditingLocked:!1,isEditingRestricted:!1,questions:[]}};var BC=Object(x.withI18n)()(WC),QC=BC,YC=n("1w3K"),HC=(n("LcIb"),function(e){var t=e.children;if(!t)return null;var n=g.a.flatten([t]);return o.a.createElement(YC.TransitionGroup,null,n.map((function(e,t){return o.a.createElement(YC.CSSTransition,{key:t,in:!0,appear:!0,classNames:"leftToRight",timeout:{enter:150,exit:150}},e)})))});HC.displayName="LeftToRightAnimation";var zC=HC;n("+hrH");function KC(e){return(KC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $C(e,t){return!t||"object"!==KC(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZC(e){return(ZC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JC(e,t){return(JC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var e_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$C(this,ZC(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JC(e,t)}(t,e),n=t,(r=[{key:"getGradeSyncLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score Sync"):e._("Grade Sync")}},{key:"getEnableGradeSyncLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Enable/Disable Score Sync"):e._("Enable/Disable Grade Sync")}},{key:"render",value:function(){var e=this.props,t=e.deepLink,n=e.onDeepLinkChange,r=e.ltiGradeIdentifier,a=e.gradeSync,i=e.onGradeSyncChange,c=e.onLtiGradeIdentifierChange,s=e.showAdvanced,u=e.i18n;return o.a.createElement("div",null,s&&gr.a.isLMSSyncOptionVisible()&&o.a.createElement("div",{className:"lms-sync-form"},o.a.createElement("div",{id:"toggle-assignment-settings-lms-sync",className:"lms-sync-header"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Deep Linking"})),o.a.createElement(nC.a,{id:"lms-sync-toggle",className:"lms-sync-toggle",label:"",ariaLabel:u._("Enable/Disable Deep Linking"),name:"lms-sync-toggle",onChange:n,enabled:!t.disabled,checked:t.value})),o.a.createElement(zC,null,t.value&&o.a.createElement("div",{className:"config-section-contents"},o.a.createElement(ut.i,{id:"lti-grade-identifier",value:r.value,enabled:!r.disabled,onChange:function(e){return c(e)},label:u._("Deep Linking Identifier"),ariaLabel:u._("Deep Linking Identifier")}),o.a.createElement(GO.a,{id:"grade_sync",name:"grade_sync",label:this.getGradeSyncLabel(),ariaLabel:this.getEnableGradeSyncLabel(),checked:a.value,enabled:!a.disabled,onChange:i})))))}}])&&XC(n.prototype,r),a&&XC(n,a),t}(a.Component);e_.propTypes={deepLink:M.a.object.isRequired,onDeepLinkChange:M.a.func.isRequired,ltiGradeIdentifier:M.a.object.isRequired,gradeSync:M.a.object.isRequired,onGradeSyncChange:M.a.func.isRequired,onLtiGradeIdentifierChange:M.a.func.isRequired};var t_=Object(x.withI18n)()(e_),n_=n("x6TD"),r_=(n("TkQy"),n("Onr9")),a_=n("3UYF");n("mGax");function o_(e){return(o_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c_(e,t){return!t||"object"!==o_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s_(e){return(s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u_(e,t){return(u_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c_(this,s_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.link,r=e.ssoToken,a=new URL(n);r&&a.searchParams.append("token",r),a=a.toString();var i=o.a.createElement(Ue.c,{id:"instructions-preview-open-in-tab-button",key:"instructions-preview-open-in-tab-button",className:"instructions-preview-open-in-tab-button",onClick:function(){return window.open(a)},tooltip:{label:t._("Open instructions in new window")}},Je.a.OPEN_IN_NEW);return o.a.createElement(pi.a,{id:"c-preview-instruction-link-dialog",dialogClassName:"c-preview-instruction-link-dialog",title:o.a.createElement(o.a.Fragment,null,t._("Instructions Link Preview"),"\xa0",i),visible:!0,actions:[o.a.createElement(Ue.a,{id:"button-instructions-link-dialog-close",secondary:!0,ariaLabel:t._("Close"),onClick:Hn.a.closeModal},t._("Close"))]},o.a.createElement(a_.a,{link:a}))}}])&&i_(n.prototype,r),a&&i_(n,a),t}(a.Component),d_=Object(c.b)((function(e){return{ssoToken:wt.f(e)}}))(Object(x.withI18n)()(l_));function f_(e){return(f_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m_(e,t){return!t||"object"!==f_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b_(e){return(b_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y_(e,t){return(y_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m_(this,b_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.instructions,n=e.onInstructionsChange,r=e.showClientErrors,a=e.overviewVideo,i=e.onAddOverviewMedia,c=e.onSetOverviewVideo,s=e.onAddCommentaryMedia,u=e.onSetCommentaryMedia,l=e.showAdvanced,d=e.i18n,f=this.props,p=f.commentaryText,m=f.onCommentaryTextChange,b=f.commentaryMedia;return o.a.createElement(FO,{className:"instructions-section-form",title:d._("Instructions")},o.a.createElement("div",{className:"config-section-contents"},o.a.createElement("div",{className:"instructions-container"},o.a.createElement(Gr.a,{query:"(max-width: 599px)"},(function(e){return o.a.createElement(n_.a,{id:"assignment-settings-instructions-video-container",showControls:e,media:a,isLocked:t.disabled,onAddMedia:i,onSetMedia:c})})),o.a.createElement("div",{className:"u-display-flex u-full-width"},o.a.createElement(ut.i,{id:"instructions-textfield",value:t.value,errorText:r?t.error:"",enabled:!t.disabled,label:o.a.createElement(o.a.Fragment,null,d._("Instructions"),o.a.createElement(HO,null)),fullWidth:!0,maxRows:4,rows:1,ariaLabel:d._("Instructions"),onChange:function(e){return n(e)}}),gr.a.isViewInstructionsLinkAllowed()&&t.link&&o.a.createElement(r_.a,{id:"button-instructions-preview-link",title:d._("Preview link"),className:"preview-url-button",onClick:function(){Hn.a.showModal(o.a.createElement(d_,{link:t.link}))},ariaLabel:d._("Preview link, icon")},Je.a.PREVIEW))),l&&o.a.createElement("div",{className:"instructions-container"},o.a.createElement(Gr.a,{query:"(max-width: 599px)"},(function(e){return o.a.createElement(n_.a,{id:"assignment-settings-post-instructions-video-container",showControls:e,media:b,isLocked:p.disabled,onAddMedia:s,onSetMedia:u})})),o.a.createElement(ut.i,{id:"post-submission-instructions-textfield",value:p.value,enabled:!p.disabled,label:d._("Post-Submission Instructions"),maxRows:4,rows:1,ariaLabel:d._("Post-Submission Instructions"),onChange:function(e){return m(e)}}))))}}])&&p_(n.prototype,r),a&&p_(n,a),t}(a.Component);v_.propTypes={instructions:M.a.object,onInstructionsChange:M.a.func.isRequired,commentaryText:M.a.object.isRequired,onCommentaryTextChange:M.a.func.isRequired,commentaryMedia:M.a.any};var h_=Object(x.withI18n)()(v_),g_=(n("CmP4"),function(){return o.a.createElement("div",{className:"premium-upgrade-message"},o.a.createElement(Uf.a,null,Je.a.INFO_OUTLINE),o.a.createElement("span",null,"Upgrade to Premium to get access to Rubric Grading, Peer Review, Document Submission, Virtual Meetings and more! Please contact ",o.a.createElement("a",{href:"mailto:support@tophat.com"},"support@tophat.com"),"\xa0 for more information. To learn more about how to use Video Assignments, visit our Support Page ",o.a.createElement("a",{target:"_blank",href:"https://success.tophat.com/s/article/Professor-Creating-a-Video-Assignment"},"https://success.tophat.com/s/article/Professor-Creating-a-Video-Assignment")))});function E_(e){return(E_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O_(e,t){return(O_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __={width:"100%"},T_=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,a=(e=S_(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==E_(a)&&"function"!==typeof a?C_(r):a,o=C_(C_(n)),c=function(e){var t=n.props,r=t.i18n,a=t.isFormDirty,o=t.isSaving;if(!a||o)return null;var i=r._("Are you sure you want to leave this page? Changes you made may not be saved.");return e.returnValue=i,i},(i="onBeforeUnload")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O_(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onBeforeUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"render",value:function(){var e=this.props,t=e.gradeType,n=e.onGradeTypeChange,r=e.onDeepLinkChange,a=e.deepLink,i=e.peerReview,c=e.onPeerReviewChange,s=e.activityName,u=e.onActivityNameChange,l=e.instructions,d=e.onInstructionsChange,f=e.overviewVideo,p=e.submitDueAt,m=e.onSubmitDueAtChange,b=e.gradeRubric,y=e.onGradeRubricChange,v=e.commentaryText,h=e.onCommentaryTextChange,E=e.commentaryMedia,w=e.allowViewOthersResultsWithoutOwn,S=e.onAllowViewOthersResultsWithoutOwnChange,O=e.isCommentingAnonymous,C=e.onIsCommentingAnonymousChange,_=e.peerReviewType,T=e.onPeerReviewTypeChange,I=e.peerReviewAmount,P=e.onPeerReviewAmountChange,R=e.quantitativeReviewType,A=e.onQuantitativeReviewTypeChange,j=e.selfAssessment,k=e.onSelfAssessmentChange,N=e.ltiGradeIdentifier,D=e.gradeSync,L=e.onGradeSyncChange,M=e.onLtiGradeIdentifierChange,F=e.quantitativeReviewTypes,V=e.rubrics,G=e.showAdvanced,U=e.onSubmit,q=e.showClientErrors,W=e.onAddOverviewMedia,B=e.onSetOverviewVideo,Q=e.onSetCommentaryMedia,Y=e.onAddCommentaryMedia,H=e.serverErrors,z=e.i18n,K=e.rubricAlreadyUsedForPeerReview,X=e.enablePeerReview,$=e.peerReviewTooltipLabel,Z=e.resetSubmitDueAt,J=e.canSave,ee=e.saveButtonTooltipLabel,te=e.canAutoGrade,ne=e.canGradeType,re=e.canSelfAssessment,ae=e.canReflectionQuestions,oe=e.reflectionQuestionsSettings,ie=e.onReflectionQuestionsChange,ce=e.canGradedPeerReview,se=e.gradedPeerReviewSettings,ue=e.onGradedPeerReviewChange,le=e.countTowardsFinalGrade,de=e.activityScore,fe=e.hasGradedSubmission,pe=e.institution,me=e.onActivityScoreChange,be=e.onCountTowardsFinalGradeChange,ye=e.disableEditing,ve=e.peerReviewDueAt,he=e.onPeerReviewDueAtChange,ge=e.resetPeerReviewDueAt,Ee=e.isPeerRevieweeAnonymous,we=e.onIsPeerRevieweeAnonymousChange,Se=e.isSaving,Oe={instructions:l,onInstructionsChange:d,showAdvanced:G,showClientErrors:q,overviewVideo:f,onAddOverviewMedia:W,onSetOverviewVideo:B,serverErrors:H,commentaryText:v,commentaryMedia:E,onCommentaryTextChange:h,onSetCommentaryMedia:Q,onAddCommentaryMedia:Y},Ce={activityName:s,instructions:l,gradeType:t,overviewVideo:f,submitDueAt:p,gradeRubric:b,onGradeTypeChange:n,onGradeRubricChange:y,onSubmitDueAtChange:m,onInstructionsChange:d,onActivityNameChange:u,rubrics:V,showAdvanced:G,showClientErrors:q,serverErrors:H,rubricAlreadyUsedForPeerReview:K,resetSubmitDueAt:Z,canAutoGrade:te,canGradeType:ne,countTowardsFinalGrade:le,activityScore:de,institution:pe,onActivityScoreChange:me,onCountTowardsFinalGradeChange:be,autoGradeScoreSource:e.autoGradeScoreSource,onAutoGradeScoreSourceChange:e.onAutoGradeScoreSourceChange},_e={peerReview:i,gradeType:t,isCommentingAnonymous:O,allowViewOthersResultsWithoutOwn:w,peerReviewType:_,peerReviewAmount:I,quantitativeReviewType:R,onQuantitativeReviewTypeChange:A,onPeerReviewAmountChange:P,onPeerReviewTypeChange:T,onAllowViewOthersResultsWithoutOwnChange:S,onIsCommentingAnonymousChange:C,onPeerReviewChange:c,quantitativeReviewTypes:F,showAdvanced:G,showClientErrors:q,serverErrors:H,enablePeerReview:X,tooltipLabel:$,canGradedPeerReview:ce,gradedPeerReviewSettings:se,onGradedPeerReviewChange:ue,hasGradedSubmission:fe,peerReviewDueAt:ve,onPeerReviewDueAtChange:he,resetPeerReviewDueAt:ge,isPeerRevieweeAnonymous:Ee,onIsPeerRevieweeAnonymousChange:we},Te={ltiGradeIdentifier:N,gradeSync:D,onGradeSyncChange:L,onLtiGradeIdentifierChange:M,deepLink:a,onDeepLinkChange:r,showAdvanced:G,showClientErrors:q,serverErrors:H},Ie={onChange:ie,settings:oe},Pe=H&&g.a.values(H),Re=g.a.isFunction(this.props.children)?this.props.children(this.props):this.props.children;return o.a.createElement("div",{className:"c-crate-activity"},gr.a.isPremiumUpgradeMessageVisible()&&o.a.createElement(g_,null),o.a.createElement(tC,Ce),o.a.createElement(h_,Oe),o.a.createElement(FO,null,Re),o.a.createElement("div",{className:"settings-form-advanced-container"},G&&ae&&o.a.createElement(BC,Ie),o.a.createElement(dC,_e),G&&re&&o.a.createElement(gC,{selfAssessment:j,onSelfAssessmentChange:k}),G&&gr.a.isDeepLinkingEnabled()&&o.a.createElement(t_,Te),G&&this.props.advancedComponents),Pe&&Pe.length>0&&o.a.createElement("ul",{className:"u-pb-20px"},Pe.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},o.a.createElement("p",null,e))}))),Pe&&0===Pe.length&&o.a.createElement("p",{className:"u-error"},o.a.createElement(x.Trans,{id:"Something went wrong. Please try again"})),o.a.createElement("div",{className:"settings-form-actions"},o.a.createElement(Ue.f,{id:"button-assignment-settings-save",primary:!0,ariaLabel:Se?z._("Saving..."):z._("Save"),enabled:J&&!ye&&!Se,tooltip:{label:ee},onClick:U,className:"settings-form-save-button"},Se?z._("Saving..."):z._("Save")),o.a.createElement(Ue.a,{id:"button-assignment-settings-advanced",secondary:!0,ariaLabel:this.props.showAdvanced?z._("Hide Advanced"):z._("Show Advanced"),className:"settings-form-advanced-button",onClick:this.props.onShowAdvanced},this.props.showAdvanced?z._("Hide Advanced"):z._("Show Advanced"))))}}])&&w_(n.prototype,r),a&&w_(n,a),t}(a.Component),I_=Object(x.withI18n)()(T_),P_={NONE:"TYPE__NONE",FIVE_STAR:"TYPE__FIVE_STAR",RUBRIC:"TYPE__RUBRIC"};n("gAqt"),n("gEnJ");function R_(e){return(R_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j_(e,t){return!t||"object"!==R_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k_(e){return(k_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N_(e,t){return(N_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j_(this,k_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onComplete,n=e.activityId,r=e.recorderType;return o.a.createElement(Qi,{mediaType:Hi.a.LIBRARY,activityId:n,id:"Library record media",recorderType:r,onComplete:function(e,n){Hn.a.closeModal(),200===n&&t([e.masterMediaId])}})}}])&&A_(n.prototype,r),a&&A_(n,a),t}(a.Component);D_.propTypes={onComplete:M.a.func,activityId:M.a.number,recorderType:M.a.oneOf(Object.values(Li.a)).isRequired,desktopMode:M.a.bool};var L_=Object(U.a)(ly,(function(e){return e.library})),M_=Object(U.a)(L_,(function(e){return e.isLoading})),x_=Object(U.a)(L_,(function(e){return e.list})),F_=Object(U.a)(L_,(function(e){return e.isItemProcessing})),V_=n("sZpB"),G_=n("92Bf");function U_(){var e=Y_(["\n    mutation  combineLibraryMedia($input: CombineLibraryMediaInput!) {\n        combineLibraryMedia(input: $input) {\n            media {\n                ...LibraryMedia\n            }\n        }\n    }\n    ","\n"]);return U_=function(){return e},e}function q_(){var e=Y_(["\n    mutation editlibraryMediaTitle($input: EditLibraryMediaTitleInput!) {\n        editLibraryMediaTitle(input: $input) {\n            media {\n                title\n            }\n        }\n    }\n"]);return q_=function(){return e},e}function W_(){var e=Y_(["\n    mutation deleteLibraryMedia($input:  DeleteLibraryMediaInput!) {\n        deleteLibraryMedia(input: $input) {\n            removedId\n        }\n    }\n"]);return W_=function(){return e},e}function B_(){var e=Y_(["\n    query getLibraryMedia($dbId: Int!){\n        viewer {\n            libraryMedia(dbId: $dbId) {\n                ...LibraryMedia\n            }\n        }\n    }\n    ","\n"]);return B_=function(){return e},e}function Q_(){var e=Y_(["\n    query getEducatorsLibrary {\n        viewer {\n            libraryMedias {\n                ...LibraryMedia\n            }\n        }\n    }\n    ","\n"]);return Q_=function(){return e},e}function Y_(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function H_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"combineItems",value:function(e){return new Promise((function(t,n){Lt.a.mutate({mutation:eT,variables:{input:{mediaDbIds:e}}}).then((function(e){if(e&&e.data){var r=e.data.combineLibraryMedia.media;Ft.a.dispatch(V_.g(r)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}}],(n=null)&&H_(t.prototype,n),r&&H_(t,r),e}();z_(K_,"getLibraryData",(function(){return new Promise((function(e,t){return Ft.a.dispatch(V_.l(!0)),Lt.a.query({query:X_,fetchPolicy:"network-only"}).then((function(t){var n=t.data.viewer.libraryMedias;Ft.a.dispatch(V_.k(n)),Ft.a.dispatch(V_.l(!1)),e(n)})).catch((function(e){t(e),Ft.a.dispatch(V_.l(!1))}))}))})),z_(K_,"deleteItem",(function(e){return new Promise((function(t,n){Ft.a.dispatch(V_.j(!0)),Lt.a.mutate({mutation:Z_,variables:{input:{dbId:e}}}).then((function(e){if(e&&e.data){var r=e.data.deleteLibraryMedia.removedId;Ft.a.dispatch(V_.h(r)),Ft.a.dispatch(V_.j(!1)),t(r)}else n(e)})).catch((function(e){n(e)}))}))})),z_(K_,"editItemTitle",(function(e,t){return new Promise((function(n,r){Ft.a.dispatch(V_.j(!0)),Lt.a.mutate({mutation:J_,variables:{input:{dbId:e,title:t}}}).then((function(t){if(t&&t.errors&&t.errors.length)r(t.errors);else if(t&&t.data&&t.data.editLibraryMediaTitle){var a=t.data.editLibraryMediaTitle.media.title;Ft.a.dispatch(V_.i(e,a)),n({id:e,title:a})}else r(t);Ft.a.dispatch(V_.j(!1))})).catch((function(e){r(e),Ft.a.dispatch(V_.j(!1))}))}))})),z_(K_,"getItem",(function(e){return new Promise((function(t,n){return Lt.a.query({query:$_,variables:{dbId:e}}).then((function(e){e&&e.data?t(e.data.viewer.libraryMedia):n(e)})).catch((function(e){n(e)}))}))})),z_(K_,"addItemToList",(function(e){Ft.a.dispatch(V_.g(e))}));var X_=xt()(Q_(),G_.a),$_=xt()(B_(),G_.a),Z_=xt()(W_()),J_=xt()(q_()),eT=xt()(U_(),G_.a),tT=n("t4gB");n("/V82");function nT(e){return(nT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aT(e,t){return!t||"object"!==nT(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oT(e){return(oT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iT(e,t){return(iT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aT(this,oT(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.media,n=e.onComplete,r=e.i18n,a=[];return a.push(o.a.createElement(Ue.a,{id:"button-add-video-media-dialog-back",secondary:!0,ariaLabel:r._("Back"),onClick:Hn.a.showPreviousModal},o.a.createElement(x.Trans,{id:"Back"}))),a.push(o.a.createElement(Ue.a,{id:"button-add-video-media-dialog-close",secondary:!0,ariaLabel:r._("Close"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Close"}))),a.push(o.a.createElement(Ue.a,{id:"button-add-video-media-dialog-select",secondary:!0,ariaLabel:r._("Select"),onClick:function(){Hn.a.closeModal(),n()}},o.a.createElement(x.Trans,{id:"Select"}))),o.a.createElement(pi.a,{actions:a,dialogClassName:"c-media-dialog",contentClassName:"c-media-dialog__content",autosizeContent:!1,mobileFullScreen:!0,id:"media-dialog",title:r._("Preview Media"),modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement(mf.a,{id:"library-preview-dialog-media",playerId:"Media "+t.dbId,termClassId:this.props.termClassId,activityId:this.props.activityId,usageContext:kd.a.DIRECT_LIBRARY,media:t})))}}])&&rT(n.prototype,r),a&&rT(n,a),t}(a.Component);cT.propTypes={media:M.a.object,onComplete:M.a.func,termClassId:M.a.number,activityId:M.a.number};var sT=Object(x.withI18n)()(cT);n("HqXl");function uT(e){return(uT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dT(e){return(dT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fT(e,t){return(fT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mT=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,n=!(a=(e=dT(t)).call.apply(e,[this].concat(u)))||"object"!==uT(a)&&"function"!==typeof a?pT(r):a,o=pT(pT(n)),c=function(){},(i="handlePagination")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fT(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this,t=this.props.onComplete,n=this.props.i18n;return[{accessor:"title",grow:!0,className:"wip-name",label:n._("Video Title"),renderer:function(e){return o.a.createElement("div",{className:"u-break-long-words"},o.a.createElement("a",{onClick:function(){t(e),Hn.a.closeModal()}},e[this.accessor]))}},{accessor:"",className:"table-actions wip-actions",label:"",renderer:function(t,r){var a=po.a.isMediaProcessed({media:t});return o.a.createElement("div",{className:"educator-library-item-actions"},o.a.createElement(Ue.c,{id:"button-library-item-preview["+r+"]",enabled:a,title:n._("Preview"),ariaLabel:n._("Preview"),onClick:function(){Hn.a.showNextModal(o.a.createElement(sT,{media:t,termClassId:e.props.termClassId,activityId:e.props.activityId,onComplete:e.props.onComplete.bind(null,t)}))}},Je.a.PREVIEW),o.a.createElement(Ue.c,{id:"button-library-item-select["+r+"]",title:n._("Select"),ariaLabel:n._("Select"),onClick:function(){e.props.onComplete(t),Hn.a.closeModal()}},Je.a.ADD))}}]}},{key:"createActionsMenu",value:function(e,t){var n=this,r=po.a.isMediaProcessed({media:e}),a=this.props.i18n;return[o.a.createElement(Kt.c,{key:t+"_add",data:e,enabled:!0,onClick:function(){n.props.onComplete(e),Hn.a.closeModal()},leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Choose, icon")},Je.a.ADD),primaryText:a._("Choose")}),o.a.createElement(Kt.c,{key:t+"_watch",data:e,enabled:r,onClick:function(){Hn.a.showNextModal(o.a.createElement(sT,{media:e,termClassId:n.props.termClassId,activityId:n.props.activityId,onComplete:n.props.onComplete.bind(null,e)}))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Preview, icon")},Je.a.PREVIEW),primaryText:a._("Preview")})]}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.i18n;return o.a.createElement("div",null,o.a.createElement(tT.a,{columns:this.getColumns(),data:n,listAccessor:"title",tableSummary:r._("Inside a table, a list of available videos in your library"),onListRowSelect:function(t){e.props.onComplete(t),Hn.a.closeModal()}}))}}])&&lT(n.prototype,r),a&&lT(n,a),t}(a.Component);mT.propTypes={list:M.a.arrayOf(M.a.object),onComplete:M.a.func,termClassId:M.a.number,activityId:M.a.number};var bT=Object(x.withI18n)()(mT);n("UYZU");function yT(e){return(yT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hT(e,t){return!t||"object"!==yT(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ET(e,t){return(ET=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hT(this,gT(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ET(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){K_.getLibraryData()}},{key:"render",value:function(){var e=this.props,t=e.onComplete,n=e.isLoading,r=e.list,a=e.i18n,i=[];return i.push(o.a.createElement(Ue.a,{id:"button-add-video-library-dialog-back",secondary:!0,ariaLabel:a._("Back"),onClick:Hn.a.showPreviousModal},o.a.createElement(x.Trans,{id:"Back"}))),i.push(o.a.createElement(Ue.a,{id:"button-add-video-library-dialog-close",secondary:!0,ariaLabel:a._("Close"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Close"}))),o.a.createElement(pi.a,{actions:i,dialogClassName:"c-library-dialog",mobileFullScreen:!0,id:"library-dialog",title:a._("Select from Library"),initialFocus:"",containFocus:!1,modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement(bc.a,{loading:n},!!r.length&&o.a.createElement(bT,{list:r,termClassId:this.props.termClassId,activityId:this.props.activityId,onComplete:t}),!r.length&&!n&&o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Empty"})))))}}])&&vT(n.prototype,r),a&&vT(n,a),t}(a.Component);wT.propTypes={onComplete:M.a.func,termClassId:M.a.number,activityId:M.a.number};var ST=Object(x.withI18n)()(Object(c.b)((function(e){return{isLoading:M_(e),list:x_(e)}}))(wT));function OT(e){return(OT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _T(e){return(_T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TT(e,t){return(TT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RT=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=_T(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==OT(a)&&"function"!==typeof a?IT(r):a,PT(IT(IT(n)),"state",{webcamMode:!0,desktopMode:!1}),PT(IT(IT(n)),"onUpload",(function(){var e=n.props.activityId;Hn.a.showNextModal(o.a.createElement(ec,{activityId:e,mediaType:Hi.a.LIBRARY,onCancel:n.onUploadCancel,onComplete:n.onComplete}))})),PT(IT(IT(n)),"onUploadCancel",(function(){Hn.a.closeModal()})),PT(IT(IT(n)),"onRecord",(function(e,t){var r=n.props.activityId,a=Li.a.CAMERA_ONLY;e&&t&&(a=Li.a.CAMERA_WITH_DESKTOP),t&&!e&&(a=Li.a.DESKTOP_ONLY),Hn.a.showNextModal(o.a.createElement(D_,{activityId:r,onComplete:n.onComplete,recorderType:a}))})),PT(IT(IT(n)),"onLibrary",(function(){var e=n.props,t=e.activityId,r=e.termClassId;Hn.a.showNextModal(o.a.createElement(ST,{activityId:t,termClassId:r,onComplete:n.onComplete}))})),PT(IT(IT(n)),"onComplete",(function(e){var t=n.props.onComplete;if(e.dbId)return t([e]);if("undefined"!==typeof e[0]){var r=[],a=e.map((function(e){return new Promise((function(t){K_.getItem(e).then((function(e){r.push(e),t()}))}))}));Promise.all(a).then((function(){t(r)}))}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.selectFromLibrary,a=t.allowDesktopSharing,i=this.state,c=i.webcamMode,s=i.desktopMode,u=!lc.b(),l=[];return l.push(o.a.createElement(Ue.a,{id:"button-add-video-dialog-cancel",secondary:!0,ariaLabel:n._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"}))),o.a.createElement(pi.a,{actions:l,dialogClassName:"activity-config-add-video-dialog",mobileFullScreen:!0,id:"add-video-dialog",title:n._("Add Video"),modal:!0,visible:!0},o.a.createElement("div",{className:"u-text-center"},u&&o.a.createElement("div",{className:"add-video-button-with-checkboxes"},o.a.createElement(Ue.f,{id:"button-video-dialog-record",className:"u-mr-5px",ariaLabel:n._("Record Video"),enabled:Di.a.isRecorderSupported()&&(c||s),tooltip:{label:Di.a.isRecorderSupported()?null:n._(qf.a.RECORDING_NOT_SUPPORTED)},onClick:function(){e.onRecord(c,s)}},o.a.createElement(x.Trans,{id:"Record Video"})),gr.a.isWebcamRecordingSelectionEnabled()&&a&&o.a.createElement("div",{id:"checkbox-add-video-dialog-webcam"},o.a.createElement(ut.a,{id:"webcam",name:"webcam",label:n._("Camera"),ariaLabel:n._("Camera"),className:"add-video-checkmark",checked:c,onChange:function(t){e.setState({webcamMode:t})}})),gr.a.isDesktopRecordingSelectionEnabled()&&a&&o.a.createElement("div",{id:"checkbox-add-video-dialog-desktop"},o.a.createElement(ut.a,{id:"desktop",name:"desktop",label:n._("Screen"),ariaLabel:n._("Screen"),className:"add-video-checkmark-btm",checked:s,onChange:function(t){e.setState({desktopMode:t})}}))),o.a.createElement(Ue.f,{id:"button-video-dialog-upload",ariaLabel:n._("Upload Video"),onClick:this.onUpload,className:"align-top"},o.a.createElement(x.Trans,{id:"Upload Video"})),r&&gr.a.isEducatorLibraryAvailable()&&o.a.createElement(Ue.f,{id:"button-video-dialog-library",ariaLabel:n._("Select from resources"),onClick:this.onLibrary,className:"align-top"},o.a.createElement(x.Trans,{id:"Select from resources"}))))}}])&&CT(n.prototype,r),a&&CT(n,a),t}(a.Component);RT.propTypes={allowDesktopSharing:M.a.bool,onComplete:M.a.func,termClassId:M.a.number,activityId:M.a.number},RT.defaultProps={allowDesktopSharing:!0,selectFromLibrary:!0};var AT=Object(x.withI18n)()(Object(c.b)((function(){return{}}))(RT)),jT=n("4F3V"),kT=function(e){!(window===window.top)&&window.parent&&window.parent.postMessage(e,"*")},NT="SAVING",DT="SUCCESS",LT="ERROR",MT=function(e){return{source:"YouSeeU",type:"FormStateChangeEvent",changedState:e}},xT=function(){kT(MT({isDirty:!0}))},FT=function(){kT(MT({saveStatus:NT}))},VT=function(){kT(MT({isDirty:!1,saveStatus:DT}))},GT=function(){kT(MT({saveStatus:LT}))};function UT(e){return(UT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qT(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function WT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function BT(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function QT(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){BT(o,r,a,i,c,"next",e)}function c(e){BT(o,r,a,i,c,"throw",e)}i(void 0)}))}}function YT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ZT(e,t,n[t])}))}return e}function HT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zT(e,t,n){return(zT="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KT(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function KT(e){return(KT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XT(e,t){return(XT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JT={showAdvanced:!1,isValid:!0,isSaving:!1,isFormDirty:!1,activityName:{value:"",error:"",disabled:!1},instructions:{value:"",error:"",link:null,disabled:!1},gradeType:{value:nc.a.GRADE,disabled:!1},autoGradeScoreSource:{value:hb.NONE,disabled:!1},overviewVideo:null,submitDueAt:{value:null,disabled:!1},gradeRubric:{value:null,disabled:!1},commentaryText:{value:"",disabled:!1},commentaryMedia:null,peerReview:{value:!1,disabled:!1},allowViewOthersResultsWithoutOwn:{value:!1,disabled:!1},isCommentingAnonymous:{value:!1,disabled:!1},isPeerRevieweeAnonymous:{value:!1,disabled:!1},peerReviewType:{value:pf.a.SYSTEM,disabled:!1},peerReviewAmount:{value:3,disabled:!1},quantitativeReviewType:{value:P_.NONE,disabled:!1},peerReviewDueAt:{value:null,disabled:!1},rubricAlreadyUsedForPeerReview:null,selfAssessment:{value:!1,disabled:!0},deepLink:{value:!1,disabled:!1},ltiGradeIdentifier:{value:"",disabled:!1},gradeSync:{value:!1,disabled:!1},addVideoModal:null,activityScore:{value:null,error:"",disabled:!1},countTowardsFinalGrade:{value:!0,disabled:!1},reflectionQuestionsSettings:{enabled:!1,errors:{},isDirty:!1,isEditingLocked:!1,isEditingRestricted:!1,isValid:!0,questions:[]},gradedPeerReviewSettings:{enabled:!1,isEditingRestricted:!1,isValid:!0,weight:fy.c,tooltip:""},hasGradedSubmission:!1},eI=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=KT(t).call(this,e),n=!a||"object"!==UT(a)&&"function"!==typeof a?$T(r):a,ZT($T($T(n)),"getRectifiedState",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=g.a.merge({},e,t),a=r.gradeType.value===nc.a.AUTO_ANALYSIS;a&&(r=n.getUpdatedStateForAutoAnalysisGradeType(r,!0));var o=r.gradeType.value===nc.a.RUBRIC;return o||(r=n.getUpdatedStateForRubricGradeType(r,!1)),r})),ZT($T($T(n)),"getUpdatedStateForRubricGradeType",(function(e,t){var n={};t||(n.selfAssessment=g.a.merge({},e.selfAssessment,{disabled:!0,value:!1}),n.gradeRubric=g.a.merge({},e.gradeRubric,{value:null}),e.quantitativeReviewType.value===P_.RUBRIC&&(n.quantitativeReviewType=g.a.merge({},e.quantitativeReviewType,{value:P_.NONE})));return g.a.merge({},e,n)})),ZT($T($T(n)),"getUpdatedStateForAutoAnalysisGradeType",(function(e,t){var r=n.props.i18n,a={};return t?(a.gradedPeerReviewSettings=g.a.merge({},e.gradedPeerReviewSettings,{enabled:!1,valid:!0,isEditingRestricted:!0,weight:fy.c,tooltip:r._(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE)}),e.autoGradeScoreSource.value===hb.NONE&&(a.autoGradeScoreSource=g.a.merge({},e.autoGradeScoreSource,{value:hb.AUTO_ANALYSIS_OVERALL_SCORE}))):(a.gradedPeerReviewSettings=g.a.merge({},e.gradedPeerReviewSettings,{isEditingRestricted:!1,tooltip:""}),a.autoGradeScoreSource=g.a.merge({},e.autoGradeScoreSource,{value:hb.NONE})),g.a.merge({},e,a)})),ZT($T($T(n)),"onReflectionQuestionsChange",(function(e){n.setState({reflectionQuestionsSettings:e},n.onChange)})),ZT($T($T(n)),"onGradedPeerReviewChange",(function(e){n.setState({gradedPeerReviewSettings:e},n.onChange)})),ZT($T($T(n)),"onGradeTypeChange",(function(e){var t=n.state.gradeType,r=t.value,a=g.a.merge({},n.state,{gradeType:YT({},t,{value:e})}),o=r===nc.a.AUTO_ANALYSIS,i=e===nc.a.AUTO_ANALYSIS;if(i||o){var c=n.getUpdatedStateForAutoAnalysisGradeType(a,i);a=g.a.merge(a,c)}var s=r===nc.a.RUBRIC,u=e===nc.a.RUBRIC;if(u||s){var l=n.getUpdatedStateForRubricGradeType(a,u);a=g.a.merge(a,l)}n.setState(a,(function(){var t=n.props.onGradeTypeChange;n.onChange(),t(e,r)}))})),ZT($T($T(n)),"onAutoGradeScoreSourceChange",(function(e){var t=n.state.autoGradeScoreSource,r=g.a.merge({},t,{value:e});n.setState({autoGradeScoreSource:r},n.onChange)})),ZT($T($T(n)),"onDeepLinkChange",(function(e){var t={},r=g.a.merge({},n.state.deepLink);r.value=e,t.deepLink=r,n.setState(t,n.onChange)})),ZT($T($T(n)),"onPeerReviewChange",(function(e){var t=g.a.merge({},n.state.peerReview);t.value=e,n.setState({peerReview:t},n.onChange)})),ZT($T($T(n)),"onActivityNameChange",(function(e){var t=g.a.merge({},n.state.activityName);t.value=e,n.setState({activityName:t},n.onChange)})),ZT($T($T(n)),"onActivityScoreChange",(function(e){var t=g.a.merge({},n.state.activityScore);e<0&&(e=0),t.value=e,n.setState({activityScore:t},n.onChange)})),ZT($T($T(n)),"onCountTowardsFinalGradeChange",(function(e){var t=g.a.merge({},n.state.countTowardsFinalGrade);t.value=e,n.setState({countTowardsFinalGrade:t},n.onChange)})),ZT($T($T(n)),"onInstructionsChange",(function(e){var t=g.a.merge({},n.state.instructions),r=$g.a(e);t.link=r||null,t.value=e,n.setState({instructions:t},n.onChange)})),ZT($T($T(n)),"onSubmitDueAtChange",(function(e){var t=g.a.merge({},n.state.submitDueAt);t.value=e,n.setState({submitDueAt:t},n.onChange)})),ZT($T($T(n)),"resetSubmitDueAt",(function(){var e=g.a.merge({},n.state.submitDueAt);e.value=null,n.setState({submitDueAt:e},n.onChange)})),ZT($T($T(n)),"onPeerReviewDueAtChange",(function(e){var t=g.a.merge({},n.state.peerReviewDueAt);t.value=e,n.setState({peerReviewDueAt:t},n.onChange)})),ZT($T($T(n)),"resetPeerReviewDueAt",(function(){var e=g.a.merge({},n.state.peerReviewDueAt);e.value=null,n.setState({peerReviewDueAt:e},n.onChange)})),ZT($T($T(n)),"onGradeRubricChange",(function(e){var t={},r=g.a.merge({},n.state.gradeRubric);r.value=e,t.gradeRubric=r;var a=g.a.merge({},n.state.selfAssessment);a.disabled=!1,t.selfAssessment=a,n.setState(t,n.onChange)})),ZT($T($T(n)),"onCommentaryTextChange",(function(e){var t=g.a.merge({},n.state.commentaryText);t.value=e,n.setState({commentaryText:t},n.onChange)})),ZT($T($T(n)),"onAllowViewOthersResultsWithoutOwnChange",(function(e){var t=g.a.merge({},n.state.allowViewOthersResultsWithoutOwn);t.value=e,n.setState({allowViewOthersResultsWithoutOwn:t},n.onChange)})),ZT($T($T(n)),"onIsCommentingAnonymousChange",(function(e){var t=g.a.merge({},n.state.isCommentingAnonymous);t.value=e,n.setState({isCommentingAnonymous:t},n.onChange)})),ZT($T($T(n)),"onIsPeerRevieweeAnonymousChange",(function(e){var t=YT({},n.state.isPeerRevieweeAnonymous,{value:e});n.setState({isPeerRevieweeAnonymous:t},n.onChange)})),ZT($T($T(n)),"onPeerReviewTypeChange",(function(e){var t=g.a.merge({},n.state.peerReviewType);t.value=e,n.setState({peerReviewType:t},n.onChange),e!==pf.a.SYSTEM&&n.onIsPeerRevieweeAnonymousChange(!1)})),ZT($T($T(n)),"onPeerReviewAmountChange",(function(e){var t=g.a.merge({},n.state.peerReviewAmount);e<0&&(e=0),t.value=+e,n.setState({peerReviewAmount:t},n.onChange)})),ZT($T($T(n)),"onQuantitativeReviewTypeChange",(function(e){var t=g.a.merge({},n.state.quantitativeReviewType);t.value=e,n.setState({quantitativeReviewType:t},n.onChange)})),ZT($T($T(n)),"onSelfAssessmentChange",(function(e){var t=g.a.merge({},n.state.selfAssessment);t.value=e,n.setState({selfAssessment:t},n.onChange)})),ZT($T($T(n)),"onLtiGradeIdentifierChange",(function(e){var t=g.a.merge({},n.state.ltiGradeIdentifier);t.value=e,n.setState({ltiGradeIdentifier:t},n.onChange)})),ZT($T($T(n)),"onGradeSyncChange",(function(e){var t=g.a.merge({},n.state.gradeSync);t.value=e,n.setState({gradeSync:t},n.onChange)})),ZT($T($T(n)),"onShowAdvanced",(function(){n.props.onShowAdvanced()})),ZT($T($T(n)),"onChange",g.a.debounce((function(){n.props.onChange(n.getFormData(),YT({},n.state))}))),ZT($T($T(n)),"onSubmit",QT(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isSaving:!0},null,!0),e.next=3,n.props.onSubmit();case 3:n.setState({isSaving:!1,isFormDirty:!1},null,!0);case 4:case"end":return e.stop()}}),e,this)})))),ZT($T($T(n)),"onAddOverviewMedia",(function(){var e=n.props.match.params,t=e.activityId,r=e.classId;Hn.a.showModal(o.a.createElement("div",{id:"activity-config-instructions-add-video-dialog"},o.a.createElement(AT,{activityId:t,termClassId:+r,onComplete:function(e){var t=WT(e,1)[0];n.onSetOverviewVideo(t)}})))})),ZT($T($T(n)),"onAddCommentaryMedia",(function(){var e=n.props.match.params,t=e.activityId,r=e.classId;Hn.a.showModal(o.a.createElement("div",{id:"activity-config-post-instructions-add-video-dialog"},o.a.createElement(AT,{activityId:t,termClassId:+r,onComplete:function(e){var t=WT(e,1)[0];n.onSetCommentaryMedia(t)}})))})),ZT($T($T(n)),"onSetOverviewVideo",(function(e){var t=g.a.merge({},n.state);t.overviewVideo=e,n.setState(t,n.onChange)})),ZT($T($T(n)),"onSetCommentaryMedia",(function(e){var t=g.a.merge({},n.state);t.commentaryMedia=e,n.setState(t,n.onChange)})),ZT($T($T(n)),"getReflectStageSettings",(function(){var e=n.state.reflectionQuestionsSettings;return e?{reflectStageEnabled:e.enabled,reflectQuestions:n.getReflectQuestions()}:null})),ZT($T($T(n)),"getPeerReviewSettings",(function(){var e={allowViewOthersResultsWithoutOwn:n.state.allowViewOthersResultsWithoutOwn.value,isCommentingAnonymous:n.state.isCommentingAnonymous.value,peerReviewSubmitterAnonymous:n.state.isPeerRevieweeAnonymous.value,peerReviewType:n.state.peerReviewType.value,peerReviewAmount:n.state.peerReviewAmount.value,peerReviewDueAt:n.state.peerReviewDueAt.value?Er.d(n.state.peerReviewDueAt.value):void 0,quantitativeReviewType:n.state.quantitativeReviewType.value};if(gr.a.isGradedPeerReviewAllowed())if(n.props.canGradedPeerReview){var t=n.state.gradedPeerReviewSettings;e[fy.b.SETTINGS_ENABLED]=t.enabled,e[fy.b.SETTINGS_WEIGHT]=t.weight}else e[fy.b.SETTINGS_ENABLED]=!1,e[fy.b.SETTINGS_WEIGHT]=fy.c;return e})),ZT($T($T(n)),"getReflectQuestions",(function(){var e=n.state.reflectionQuestionsSettings;return e&&e.enabled&&e.questions?e.questions.map((function(e,t){return g.a.merge({},g.a.pick(e,g.a.values(id.a.QUESTION)),{orderNumber:t})})):[]})),ZT($T($T(n)),"getGradeTypeSetting",(function(){var e=n.state.gradeType;return e.value===nc.a.AUTO_ANALYSIS?nc.a.GRADE:e.value})),n.state=n.mapActivityDataToState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XT(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.enablePeerReview!==e.enablePeerReview&&this.setState({peerReview:YT({},this.state.peerReview,{value:e.enablePeerReview})},this.onChange),!this.props.termClass&&e.termClass&&this.onChange()}},{key:"componentDidUpdate",value:function(e){this.props.rubrics!==e.rubrics&&this.onChange()}},{key:"componentDidMount",value:function(){this.onChange(),this.onChange.flush()}},{key:"componentWillUnmount",value:function(){jT.a()}},{key:"setState",value:function(e,n,r){var a=YT({},e);r||(a.isFormDirty=!0,xT()),zT(KT(t.prototype),"setState",this).call(this,a,n)}},{key:"mapActivityDataToState",value:function(e){var t=e.activityData,n=e.enablePeerReview,r=e.canGradedPeerReview,a=e.canReflectionQuestions,o=e.mainFormState;if(o)return g.a.merge({},JT,o);var i=g.a.merge({},JT),c=jT.b(),s=jT.c();if(c&&(i.activityName.value=c,t&&(t.name=c)),s&&(i.ltiGradeIdentifier.value=s,i.deepLink.value=!0,i.gradeSync.value=!0,t&&(t.ltiGradeIdentifier=s,t.ltiDeepLinking=!0)),!t)return i.peerReview.value=n,i.peerReviewType.value=gr.a.getDefaultPeerReviewType(),i.quantitativeReviewType.value=P_.FIVE_STAR,i;t.name&&(i.activityName.value=t.name),i.overviewVideo=t.instructionsMedia,i.instructions.value=t.instructionsText;var u=$g.a(t.instructionsText);u&&(i.instructions.link=u),g.a.includes(vb,t.autoGradeScoreSource)?(i.gradeType.value=nc.a.AUTO_ANALYSIS,i.autoGradeScoreSource.value=t.autoGradeScoreSource):i.gradeType.value=t.gradeType,t.submitDueAt&&(i.submitDueAt.value=Er.n(t.submitDueAt)),t.commentaryText&&(i.commentaryText.value=t.commentaryText),i.commentaryMedia=t.commentaryMedia,t.rubric&&(i.gradeRubric.value=g.a.isNumber(t.rubric)?t.rubric:t.rubric.dbId),g.a.isNumber(t.activityScore)&&(i.activityScore.value=t.activityScore),g.a.isBoolean(t.countTowardsFinalGrade)&&(i.countTowardsFinalGrade.value=t.countTowardsFinalGrade),i.peerReview.value=n&&!!t.peerReviewType,t.peerReviewType&&(i.peerReviewType.value=t.peerReviewType),t.peerReviewDueAt&&(i.peerReviewDueAt.value=Er.n(t.peerReviewDueAt)),g.a.isNumber(t.peerReviewAmount)&&(i.peerReviewAmount.value=t.peerReviewAmount),g.a.isBoolean(t.allowViewOthersResultsWithoutOwn)&&(i.allowViewOthersResultsWithoutOwn.value=t.allowViewOthersResultsWithoutOwn),g.a.isBoolean(t.isCommentingAnonymous)&&(i.isCommentingAnonymous.value=t.isCommentingAnonymous),g.a.isBoolean(t.peerReviewSubmitterAnonymous)&&(i.isPeerRevieweeAnonymous.value=t.peerReviewSubmitterAnonymous),g.a.isBoolean(t.studentFivestarValuationEnabled)?t.studentFivestarValuationEnabled?i.quantitativeReviewType.value=P_.FIVE_STAR:t.rubricPeerAllowed?i.quantitativeReviewType.value=P_.RUBRIC:i.quantitativeReviewType.value=P_.NONE:i.quantitativeReviewType.value=t.studentFivestarValuationEnabled,i.selfAssessment.value=t.rubricSelfAllowed,t.rubric&&(i.selfAssessment.disabled=!1),i.deepLink.value=t.ltiDeepLinking,t.ltiGradeIdentifier&&(i.ltiGradeIdentifier.value=t.ltiGradeIdentifier),t.ltiGradeIdentifier&&(i.deepLink.value=!0),i.gradeSync.value=t.ltiGradeSyncEnabled;var l=!1;if(t.dataForAllStudents){var d=!1,f=null;t.dataForAllStudents.forEach((function(e){if(e.educatorGrade&&(d=!0),!l&&e.reflectAnswers&&e.reflectAnswers.length>0&&(l=!0),e.rubricEvaluations&&e.rubricEvaluations.length){var t=e.rubricEvaluations.filter((function(e){return ar.f(e.user)}));t.length&&(f=t[0].rubric)}})),i.rubricAlreadyUsedForPeerReview=f,i.gradeType.disabled=d,i.autoGradeScoreSource.disabled=d,i.hasGradedSubmission=d,t.rubric&&(i.gradeRubric.disabled=d)}return a&&t.reflectStageSettings&&(i.reflectionQuestionsSettings=YT({},i.reflectionQuestionsSettings,{enabled:t.reflectStageSettings.reflectStageEnabled,questions:qT(t.reflectStageSettings.reflectQuestions||[]),isEditingRestricted:l})),t.cengageSettings&&(i.activityScore.value=t.cengageSettings.score,i.countTowardsFinalGrade.value=t.cengageSettings.countTowardsFinalGrade),this.props.disableEditing&&(i.activityName.disabled=!0,i.instructions.disabled=!0,i.gradeType.disabled=!0,i.autoGradeScoreSource.disabled=!0,i.submitDueAt.disabled=!0,i.gradeRubric.disabled=!0,i.commentaryText.disabled=!0,i.peerReview.disabled=!0,i.allowViewOthersResultsWithoutOwn.disabled=!0,i.isCommentingAnonymous.disabled=!0,i.isPeerRevieweeAnonymous.disabled=!0,i.peerReviewType.disabled=!0,i.peerReviewDueAt.disabled=!0,i.peerReviewAmount.disabled=!0,i.quantitativeReviewType.disabled=!0,i.selfAssessment.disabled=!0,i.deepLink.disabled=!0,i.ltiGradeIdentifier.disabled=!0,i.gradeSync.disabled=!0,i.activityScore.disabled=!0,i.countTowardsFinalGrade.disabled=!0,i.reflectionQuestionsSettings.isEditingRestricted=!0,i.gradedPeerReviewSettings.isEditingRestricted=!0),this.props.isEditingLocked&&(i.activityName.disabled=!0,i.instructions.disabled=!0,i.commentaryText.disabled=!0,i.reflectionQuestionsSettings.isEditingLocked=!0),r&&t[fy.b.SETTINGS_ENABLED]&&(i.gradedPeerReviewSettings=YT({},i.gradedPeerReviewSettings,{enabled:t[fy.b.SETTINGS_ENABLED]||!1,weight:t[fy.b.SETTINGS_WEIGHT]||fy.c})),this.getRectifiedState(i)}},{key:"getStateWithoutErrors",value:function(){var e=g.a.merge({},this.state);return e.activityName.error="",e.instructions.error="",e.gradeRubric.error="",e.activityScore.error="",e}},{key:"validate",value:function(){var e=this.props,t=e.i18n,n=e.canGradedPeerReview,r=e.canGradeType,a=e.rubrics,o=this.state,i=o.activityName,c=o.gradedPeerReviewSettings,s=o.gradeRubric,u=o.gradeType,l=o.peerReview,d=o.instructions,f=o.reflectionQuestionsSettings,p=!0,m=this.getStateWithoutErrors(),b=t._("This field is required");return u.value===nc.a.RUBRIC&&null===a&&(p=!1),i.value||(p=!1,m.activityName.error=b),d.value||(p=!1,m.instructions.error=b),f.isValid||(p=!1),l&&l.value&&n&&c.enabled&&!c.isValid&&(p=!1),r&&u.value===nc.a.RUBRIC&&null!==a&&(!s.value||g.a.findIndex(a,["dbId",+s.value])<0)&&(p=!1,m.gradeRubric.error=b),Object(yb.a)(this.props.institution)&&(this.state.activityScore.value<0||!this.state.activityScore.value)&&(p=!1,m.activityScore.error=b),this.setState(YT({},m,{isValid:p}),null,!0),p}},{key:"getFormData",value:function(){var e=this.props.canReflectionQuestions,t=this.validate(),n={name:this.state.activityName.value,instructions:this.state.instructions.value,overviewMedia:this.state.overviewVideo?this.state.overviewVideo.dbId:void 0,submitDueAt:this.state.submitDueAt.value?Er.d(this.state.submitDueAt.value):void 0,gradeType:this.getGradeTypeSetting(),rubric:this.state.gradeRubric.value,commentaryText:this.state.commentaryText.value,commentaryMedia:this.state.commentaryMedia?this.state.commentaryMedia.dbId:void 0,peerReview:this.getPeerReviewSettings(),selfAssessment:this.state.selfAssessment.value,lmsSync:{deepLink:this.state.deepLink.value,ltiGradeIdentifier:this.state.ltiGradeIdentifier.value,gradeSync:this.state.gradeSync.value}};return gr.a.isDeepLinkingEnabled()||(n.lmsSync.deepLink=!1,n.lmsSync.ltiGradeIdentifier=null,n.lmsSync.gradeSync=!1),e&&(n.reflectStageSettings=this.getReflectStageSettings()),Object(yb.a)(this.props.institution)&&(n.cengageSettings={score:+this.state.activityScore.value,countTowardsFinalGrade:this.state.countTowardsFinalGrade.value}),gr.a.isDeepLinkingEnabled()||(n.lmsSync.deepLink=!1,n.lmsSync.ltiGradeIdentifier=null,n.lmsSync.gradeSync=!1),this.state.peerReview.value||(n.peerReview.peerReviewType=null),n.rubric||delete n.rubric,{isValid:t,form:n}}},{key:"render",value:function(){var e=this.state,t=e.gradeType,n=e.deepLink,r=e.peerReview,a=e.activityName,i=e.instructions,c=e.overviewVideo,s=e.submitDueAt,u=e.gradeRubric,l=e.commentaryText,d=e.commentaryMedia,f=e.allowViewOthersResultsWithoutOwn,p=e.isCommentingAnonymous,m=e.isPeerRevieweeAnonymous,b=e.peerReviewType,y=e.peerReviewAmount,v=e.quantitativeReviewType,h=e.selfAssessment,g=e.ltiGradeIdentifier,E=e.gradeSync,w=e.addVideoModal,S=e.rubricAlreadyUsedForPeerReview,O=e.activityScore,C=e.countTowardsFinalGrade,_=e.reflectionQuestionsSettings,T=e.gradedPeerReviewSettings,I=e.isValid,P=e.hasGradedSubmission,R=e.peerReviewDueAt,A=e.isSaving,j=e.isFormDirty,k=e.autoGradeScoreSource,N=this.props,D=N.i18n,L=N.canSave,M=N.enablePeerReview,x=N.canGradeType,F=N.peerReviewTooltipLabel,V=N.saveButtonTooltipLabel,G=N.advancedComponents,U=N.canSelfAssessment,q=N.canAutoGrade,W=N.canGradedPeerReview,B=N.canReflectionQuestions,Q=N.institution,Y=N.disableEditing,H=t.value===nc.a.RUBRIC,z=[{label:D._("None"),value:P_.NONE,itemProps:{id:"peer-review-evaluation-type-option-none"}},{label:D._("Five Star"),value:P_.FIVE_STAR,itemProps:{id:"peer-review-evaluation-type-option-rating"}},{label:D._("Assignment Rubric"),value:P_.RUBRIC,itemProps:{id:"peer-review-evaluation-type-option-rubric"},disabled:!H}],K=I&&L,X=V;return X||I||(X=D._("All required fields must be completed and valid before saving")),o.a.createElement(I_,{canGradeType:x,disableEditing:Y,activityScore:O,countTowardsFinalGrade:C,institution:Q,enablePeerReview:M,canSave:K,canSelfAssessment:U,saveButtonTooltipLabel:X,isSaving:A,gradeType:t,autoGradeScoreSource:k,deepLink:n,peerReviewTooltipLabel:F,peerReview:r,activityName:a,instructions:i,overviewVideo:c,submitDueAt:s,gradeRubric:u,commentaryText:l,commentaryMedia:d,allowViewOthersResultsWithoutOwn:f,isCommentingAnonymous:p,isPeerRevieweeAnonymous:m,peerReviewType:b,peerReviewAmount:y,quantitativeReviewType:v,selfAssessment:h,ltiGradeIdentifier:g,gradeSync:E,advancedComponents:G,canAutoGrade:q,canGradedPeerReview:W,gradedPeerReviewSettings:T,onGradedPeerReviewChange:this.onGradedPeerReviewChange,canReflectionQuestions:B,reflectionQuestionsSettings:_,onReflectionQuestionsChange:this.onReflectionQuestionsChange,serverErrors:this.props.serverErrors,showAdvanced:this.props.showAdvanced,addVideoModal:w,rubrics:this.props.rubrics,rubricAlreadyUsedForPeerReview:S,showClientErrors:this.props.showClientErrors,quantitativeReviewTypes:z,onActivityScoreChange:this.onActivityScoreChange,onCountTowardsFinalGradeChange:this.onCountTowardsFinalGradeChange,resetSubmitDueAt:this.resetSubmitDueAt,onAddCommentaryMedia:this.onAddCommentaryMedia,onSetCommentaryMedia:this.onSetCommentaryMedia,onSetOverviewVideo:this.onSetOverviewVideo,onAddOverviewMedia:this.onAddOverviewMedia,onSubmit:this.onSubmit,onGradeSyncChange:this.onGradeSyncChange,onLtiGradeIdentifierChange:this.onLtiGradeIdentifierChange,onSelfAssessmentChange:this.onSelfAssessmentChange,onQuantitativeReviewTypeChange:this.onQuantitativeReviewTypeChange,onPeerReviewAmountChange:this.onPeerReviewAmountChange,onPeerReviewTypeChange:this.onPeerReviewTypeChange,onIsCommentingAnonymousChange:this.onIsCommentingAnonymousChange,onIsPeerRevieweeAnonymousChange:this.onIsPeerRevieweeAnonymousChange,onAllowViewOthersResultsWithoutOwnChange:this.onAllowViewOthersResultsWithoutOwnChange,onCommentaryTextChange:this.onCommentaryTextChange,onGradeRubricChange:this.onGradeRubricChange,onSubmitDueAtChange:this.onSubmitDueAtChange,onDeepLinkChange:this.onDeepLinkChange,onPeerReviewChange:this.onPeerReviewChange,onInstructionsChange:this.onInstructionsChange,onActivityNameChange:this.onActivityNameChange,onGradeTypeChange:this.onGradeTypeChange,onAutoGradeScoreSourceChange:this.onAutoGradeScoreSourceChange,onShowAdvanced:this.onShowAdvanced,hasGradedSubmission:P,peerReviewDueAt:R,onPeerReviewDueAtChange:this.onPeerReviewDueAtChange,resetPeerReviewDueAt:this.resetPeerReviewDueAt,isFormDirty:j},this.props.children)}}])&&HT(n.prototype,r),a&&HT(n,a),t}(a.Component);eI.defaultProps={onChange:function(){},onGradeTypeChange:function(){},onSubmit:function(){},advancedComponents:null,canGradeType:!0,canSave:!0,canSelfAssessment:!0,enablePeerReview:!0,isSaving:!1,saveButtonTooltipLabel:"",showClientErrors:!1,canAutoGrade:!1,canGradedPeerReview:!1,canReflectionQuestions:!1,mainFormState:null,disableEditing:!1,rubrics:null};var tI=Object(c.b)((function(e){return{institution:bb.h(e),termClass:bb.k(e)}}))(Object(x.withI18n)()(Object(s.a)(eI)));n("NWOK");function nI(e){return(nI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aI(e){return(aI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oI(e,t){return(oI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sI={width:"100%"},uI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=aI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==nI(a)&&"function"!==typeof a?iI(r):a,cI(iI(iI(n)),"getTooltipMessage",(function(e,t,r){var a=n.props,o=a.i18n;return a.isD2LFreemium?e.value?o._(t)+" ("+o._(qf.a.FREEMIUM_CONFIG_NOT_EDITABLE_OPTION)+")":o._(r)+" ("+o._(qf.a.FREEMIUM_CONFIG_OPTION)+")":e.value?o._(t):o._(r)})),cI(iI(iI(n)),"onConfigureRubrics",(function(){var e=n.props,t=e.match,r=e.history,a=e.location,o=V.a.compile(Qh.f.EDUCATOR_RUBRICS_LIST)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){cI(e,t,n[t])}))}return e}({},t.params));r.push({pathname:o,state:{quickNavItems:[{context:VO.a.CONFIGURATION,location:a}]}})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oI(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.executorsType,n=e.onExecutorsTypeChange,r=e.rubrics,a=e.groupReviewType,i=e.onGroupReviewTypeChange,c=e.activityData,s=e.onIsVideoToolEnabledChange,u=e.isVideoToolEnabled,l=e.isDocumentToolEnabled,d=e.onIsDocumentToolEnabledChange,f=e.isMeetingToolEnabled,p=e.onIsMeetingToolEnabledChange,m=e.gpdRubric,b=e.onGpdRubricChange,y=e.finalizeGroupDate,v=e.onFinalizeGroupDateChange,h=e.minStudentsAmountInGroup,g=e.maxStudentsAmountInGroup,E=e.onMinStudentsAmountInGroupChange,w=e.onMaxStudentsAmountInGroupChange,S=e.onMainFormChange,O=e.onSubmit,C=e.onShowAdvanced,_=e.showAdvanced,T=e.showClientErrors,I=e.meetingToolError,P=e.serverErrors,R=e.i18n,A=e.isD2LFreemium,j=e.mainFormState,k=e.disableEditing,N=e.isEditingLocked,D=t.value!==vn.a.EDUCATOR_FORMED&&t.value!==vn.a.WHOLE_CLASS,L=a.value===or.RUBRIC,M=R._("Video enabled"),F=R._("Video disabled"),V=R._("Documents enabled"),G=R._("Documents disabled"),U=R._("Meetings enabled"),q=R._("Meetings disabled");return o.a.createElement(tI,{onChange:S,onSubmit:O,serverErrors:P,showClientErrors:T,showAdvanced:_,onShowAdvanced:C,rubrics:r,disableEditing:k,isEditingLocked:N,activityData:c,mainFormState:j,enablePeerReview:gr.a.isPeerReviewEnabled(),peerReviewTooltipLabel:gr.a.isPeerReviewEnabled()?"":R._(qf.a.FREEMIUM_CONFIG_OPTION),canGradedPeerReview:!1,canAutoGrade:!1},_&&o.a.createElement("div",{className:"group-student-activity-form"},o.a.createElement("div",null,o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Toolset"})),o.a.createElement("div",{className:"activity-toolset-container"},o.a.createElement("div",{className:"activity-toolset-primary"},o.a.createElement(Ue.b,{secondary:!0,id:"group-assignment-toolset-video",enabled:!A&&!u.disabled,isToggle:!0,checked:u.value,onClick:s,tooltip:{label:this.getTooltipMessage(u,M,F)},ariaLabel:R._("Enable/Disable Video")},Je.a.VIDEOCAM),o.a.createElement(Ue.b,{secondary:!0,id:"group-assignment-toolset-document",enabled:!A&&!l.disabled,isToggle:!0,iconClassName:vr.a.FILE,onClick:d,checked:l.value,tooltip:{label:this.getTooltipMessage(l,V,G)},ariaLabel:R._("Enable/Disable Documents")}),o.a.createElement(Ue.b,{secondary:!0,id:"group-assignment-toolset-meeting",enabled:!A&&!f.disabled,isToggle:!0,iconClassName:vr.a.CALENDAR,onClick:p,checked:f.value,tooltip:{label:this.getTooltipMessage(f,U,q)},ariaLabel:R._("Enable/Disable Meetings")})),o.a.createElement("div",{className:"activity-toolset-secondary"})),T&&I&&o.a.createElement("p",{className:"u-error u-text-center"},I)),o.a.createElement("div",{className:"group-options-container"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Group Options"})),o.a.createElement("div",{className:"config-section-contents"},o.a.createElement("div",{className:"config-section-contents group-formation-container"},o.a.createElement(ut.e,{id:"selectfield-assignment-settings-group-formation",value:t.value,enabled:!t.disabled,onChange:n,label:R._("Group Formation"),ariaLabel:R._("Group Formation"),menuItems:[{label:R._("Educator Formed"),value:vn.a.EDUCATOR_FORMED,itemProps:{id:"group-formation-option-educator"}},{label:R._("Student Formed"),value:vn.a.STUDENT_FORMED,itemProps:{id:"group-formation-option-student"}},{label:R._("System Formed"),value:vn.a.SYSTEM_FORMED,itemProps:{id:"group-formation-option-system"}}]}),o.a.createElement(zC,null,D&&o.a.createElement("div",null,o.a.createElement("div",{className:"finalize-group-date-container"},o.a.createElement(ut.b,{id:"finalize-group-date-datepicker",className:"finalize-group-date-datepicker",textFieldStyle:sI,label:R._("Finalize groups at date"),value:y.value,enabled:!y.disabled,errorText:T?y.error:"",ariaLabel:R._("Finalize groups at date"),onChange:function(e,t){v(t)}}),o.a.createElement(ut.k,{id:"finalize-group-date-timepicker",className:"finalize-group-date-timepicker",textFieldStyle:sI,label:R._("Finalize groups at time"),value:y.value,enabled:!y.disabled,ariaLabel:R._("Finalize groups at time"),onChange:function(e,t){v(t)}})),o.a.createElement("div",{className:"finalize-group-min-max-container"},o.a.createElement(ut.i,{id:"min_students_amount",className:"min_students_amount",name:"min_students_amount",label:R._("Minimum students per group"),ariaLabel:R._("Minimum students per group"),value:""+h.value,enabled:!h.disabled,errorText:T?h.error:"",onChange:E,min:0,type:"number"}),o.a.createElement(ut.i,{id:"max_students_amount",className:"max_students_amount",name:"max_students_amount",label:R._("Max students per group"),ariaLabel:R._("Max students per group"),onChange:w,value:""+g.value,enabled:!g.disabled,errorText:T?g.error:"",min:0,type:"number"}))))),o.a.createElement("div",{className:"config-section-contents group-team-eval-container"},o.a.createElement(ut.e,{id:"selectfield-assignment-settings-group-review-type",className:"team-eval-selectfield",label:R._("Team Evaluation"),ariaLabel:R._("Team Evaluation"),value:a.value,enabled:!a.disabled,onChange:i,menuItems:[{label:R._("Disabled"),value:or.DISABLED,itemProps:{id:"group-review-option-disabled"}},{label:R._("Five Star"),value:or.RATING,itemProps:{id:"group-review-option-rating"}},{label:R._("Rubric"),value:or.RUBRIC,itemProps:{id:"group-review-option-rubric"}}]}),L&&o.a.createElement(ut.g,{className:"team-eval-select-rubric-container",onConfigureRubrics:this.onConfigureRubrics,onRubricChange:b,selectedRubric:m,rubrics:r}))))))}}])&&rI(n.prototype,r),a&&rI(n,a),t}(a.Component),lI=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e)}}))(uI))),dI=Object(U.a)(ly,(function(e){return e.configuration})),fI=Object(U.a)(dI,(function(e){return e.groupConfiguration})),pI=Object(U.a)(dI,(function(e){return e.individualConfiguration})),mI=Object(U.a)(dI,(function(e){return e.qaConfiguration})),bI=Object(U.a)(dI,(function(e){return e.interactiveVideoConfiguration})),yI=n("qea/");function vI(e,t){var n={};return n.name=e.name,n.ltiGradeIdentifier=e.lmsSync.ltiGradeIdentifier,n.ltiDeepLinking=e.lmsSync.deepLink,n.ltiGradeSyncEnabled=e.lmsSync.gradeSync,n.instructionsText=e.instructions,n.instructionsMedia=t.overviewVideo,n.commentaryText=e.commentaryText,n.commentaryMedia=t.commentaryMedia,n.gradeType=e.gradeType,n.submitDueAt=e.submitDueAt,n.rubric=e.rubric,n.peerReviewType=e.peerReview.peerReviewType,n.peerReviewAmount=e.peerReview.peerReviewAmount,n.allowViewOthersResultsWithoutOwn=e.peerReview.allowViewOthersResultsWithoutOwn,n.isCommentingAnonymous=e.peerReview.isCommentingAnonymous,n.isPeerRevieweeAnonymous=e.peerReview.isPeerRevieweeAnonymous,n.studentFivestarValuationEnabled=e.peerReview.quantitativeReviewType,n.rubricSelfAllowed=e.selfAssessment,n}function hI(e){return(hI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gI(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function EI(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){gI(o,r,a,i,c,"next",e)}function c(e){gI(o,r,a,i,c,"throw",e)}i(void 0)}))}}function wI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SI(e){return(SI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OI(e,t){return(OI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TI={executorsType:{value:vn.a.EDUCATOR_FORMED,disabled:!1},groupReviewType:{value:or.DISABLED,disabled:!1},isVideoToolEnabled:{value:!0,disabled:!1},isDocumentToolEnabled:{value:!0,disabled:!1},isMeetingToolEnabled:{value:!0,disabled:!1},gpdRubric:{value:null,disabled:!1},finalizeGroupDate:{value:null,disabled:!1},minStudentsAmountInGroup:{value:1,disabled:!1},maxStudentsAmountInGroup:{value:1,disabled:!1},meetingToolError:"",showAdvanced:!1},II="This field is required",PI=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=SI(t).call(this,e),n=!a||"object"!==hI(a)&&"function"!==typeof a?CI(r):a,_I(CI(CI(n)),"_isSubmitting",!1),_I(CI(CI(n)),"onShowAdvanced",(function(){var e=!n.state.showAdvanced;n.setState({showAdvanced:e})})),_I(CI(CI(n)),"onExecutorsTypeChange",(function(e){var t=g.a.merge({},n.state.executorsType);t.value=e,n.setState({executorsType:t},n.onChange)})),_I(CI(CI(n)),"onGpdRubricChange",(function(e){var t=g.a.merge({},n.state.gpdRubric);t.value=e,n.setState({gpdRubric:t},n.onChange)})),_I(CI(CI(n)),"onMinStudentsAmountInGroupChange",(function(e){e=+e;var t=g.a.merge({},n.state.minStudentsAmountInGroup);e>n.state.maxStudentsAmountInGroup.value&&(e=n.state.maxStudentsAmountInGroup.value),e<0&&(e=0),t.value=+e,n.setState({minStudentsAmountInGroup:t},n.onChange)})),_I(CI(CI(n)),"onMaxStudentsAmountInGroupChange",(function(e){e=+e;var t=g.a.merge({},n.state.maxStudentsAmountInGroup);e<n.state.minStudentsAmountInGroup.value&&(e=n.state.minStudentsAmountInGroup.value),e<0&&(e=0),t.value=e,n.setState({maxStudentsAmountInGroup:t},n.onChange)})),_I(CI(CI(n)),"onFinalizeGroupDateChange",(function(e){var t=g.a.merge({},n.state.gpdRubric);t.value=e,n.setState({finalizeGroupDate:t},n.onChange)})),_I(CI(CI(n)),"onIsVideoToolEnabledChange",(function(){var e=g.a.merge({},n.state.isVideoToolEnabled);e.value=!e.value,n.setState({isVideoToolEnabled:e},n.onChange)})),_I(CI(CI(n)),"onIsDocumentToolEnabledChange",(function(){var e=g.a.merge({},n.state.isDocumentToolEnabled);e.value=!e.value,n.setState({isDocumentToolEnabled:e},n.onChange)})),_I(CI(CI(n)),"onIsMeetingToolEnabledChange",(function(){var e=g.a.merge({},n.state.isMeetingToolEnabled);e.value=!e.value,n.setState({isMeetingToolEnabled:e},n.onChange)})),_I(CI(CI(n)),"onGroupReviewTypeChange",(function(e){var t=g.a.merge({},n.state.groupReviewType);t.value=e,n.setState({groupReviewType:t},n.onChange)})),_I(CI(CI(n)),"getStateWithoutErrors",(function(){var e=g.a.merge({},n.state);return e.finalizeGroupDate.error="",e.minStudentsAmountInGroup.error="",e.maxStudentsAmountInGroup.error="",e.finalizeGroupDate.error="",e.meetingToolError="",e.gpdRubric.error="",e})),_I(CI(CI(n)),"validate",(function(){var e=n.props,t=e.i18n,r=e.rubrics,a=!0,o=n.getActivityData(),i=n.getStateWithoutErrors();if(n.state.executorsType.value!==vn.a.EDUCATOR_FORMED&&n.state.executorsType.value!==vn.a.WHOLE_CLASS&&(n.state.finalizeGroupDate.value||(a=!1,i.finalizeGroupDate.error=II),n.state.minStudentsAmountInGroup.value||(a=!1,i.minStudentsAmountInGroup.error=II),n.state.maxStudentsAmountInGroup.value||(a=!1,i.maxStudentsAmountInGroup.error=II),o&&o.studentGroups&&o.studentGroups.length||!n.state.finalizeGroupDate.value||n.state.finalizeGroupDate.value.getTime()<(new Date).getTime()&&(a=!1,i.finalizeGroupDate.error=t._("Finalize at date can't be in the past"))),n.state.groupReviewType.value===or.RUBRIC&&null!==r){var c=n.state.gpdRubric;(!c.value||g.a.findIndex(r,["dbId",+c.value])<0)&&(a=!1,i.gpdRubric.error=II)}return n.state.isMeetingToolEnabled.value||n.state.isDocumentToolEnabled.value||n.state.isVideoToolEnabled.value||(a=!1,i.meetingToolError=II),n.setState(i),a})),_I(CI(CI(n)),"onChange",(function(){n.props.onChange(n.getFormData())})),_I(CI(CI(n)),"onMainFormChange",(function(e,t){n.mainFormData=e,n.mainFormState=t,n.onChange()})),_I(CI(CI(n)),"getFormData",(function(){var e=n.validate(),t=n.state.finalizeGroupDate,r=t.value?Er.m(t.value):null,a={executorsType:n.state.executorsType.value,gpd:{finalizeGroupsAt:r,minStudentsAmount:+n.state.minStudentsAmountInGroup.value,maxStudentsAmount:+n.state.maxStudentsAmountInGroup.value,groupReviewType:n.state.groupReviewType.value,rubric:n.state.gpdRubric.value},toolsets:{isVideoToolEnabled:n.state.isVideoToolEnabled.value,isDocumentToolEnabled:n.state.isDocumentToolEnabled.value,isMeetingToolEnabled:n.state.isMeetingToolEnabled.value}};return a.gpd.rubric||delete a.gpd.rubric,a.executorsType!==vn.a.EDUCATOR_FORMED&&a.executorsType!==vn.a.WHOLE_CLASS||(delete a.gpd.finalizeGroupsAt,delete a.gpd.minStudentsAmount,delete a.gpd.maxStudentsAmount),{isValid:e&&n.mainFormData.isValid,form:g.a.merge({},n.mainFormData.form,a)}})),_I(CI(CI(n)),"onSubmit",EI(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._isSubmitting=!0,e.next=3,n.props.onSubmit(n.getFormData());case 3:case"end":return e.stop()}}),e,this)})))),_I(CI(CI(n)),"getActivityData",(function(){var e=n.props,t=e.activityData,r=e.groupConfiguration;return r?r.activityData:t})),_I(CI(CI(n)),"getMainFormState",(function(){var e=n.props.groupConfiguration;return e?e.mainFormState:null})),n.state=n.mapActivityDataToState(),n.mainFormData=null,n._isSubmitting=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OI(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){if(!this._isSubmitting){var e,t,n=this.props,r=n.dispatch,a=n.match,o=n.activityData;if(o&&+o.dbId!==+a.params.activityId)r(yI.e(null));else{var i=(e=this.getFormData().form,t=this.mainFormState,vI(e,t));r(yI.e({activityData:i,mainFormState:this.mainFormState,state:this.state}))}}}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._isSubmitting=!1}},{key:"mapActivityDataToState",value:function(){var e=this.props,t=e.groupConfiguration,n=e.isD2LFreemium,r=g.a.merge({},TI),a=this.getActivityData();if(t)return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_I(e,t,n[t])}))}return e}({},r,t.state);if(!a)return n&&(r.isVideoToolEnabled.value=!0,r.isDocumentToolEnabled.value=!0,r.isMeetingToolEnabled.value=!1),r;if(r.isVideoToolEnabled.value=a.isVideoToolEnabled,r.isDocumentToolEnabled.value=a.isDocumentToolEnabled,r.isMeetingToolEnabled.value=a.isMeetingToolEnabled,r.groupReviewType.value=a.groupReviewType,a.groupReviewRubric&&(r.gpdRubric.value=g.a.isNumber(a.groupReviewRubric)?a.groupReviewRubric:a.groupReviewRubric.dbId),a.groupsFormationFinalizeAt&&(r.finalizeGroupDate.value=Er.n(a.groupsFormationFinalizeAt)),a.minStudentsAmountInGroup&&(r.minStudentsAmountInGroup.value=a.minStudentsAmountInGroup),a.maxStudentsAmountInGroup&&(r.maxStudentsAmountInGroup.value=a.maxStudentsAmountInGroup),a.executorsType&&(r.executorsType.value=a.executorsType),a.dataForAllStudents){var o=!1;a.dataForAllStudents.forEach((function(e){e.studentGroup&&e.studentGroup.members&&e.studentGroup.members.forEach((function(e){e.rubricEvaluations&&e.rubricEvaluations.length>0&&(o=!0)}))})),r.groupReviewType.disabled=o,a.groupReviewRubric&&(r.gpdRubric.disabled=o)}return this.props.disableEditing&&(r.executorsType.disabled=!0,r.groupReviewType.disabled=!0,r.isVideoToolEnabled.disabled=!0,r.isDocumentToolEnabled.disabled=!0,r.isMeetingToolEnabled.disabled=!0,r.gpdRubric.disabled=!0,r.finalizeGroupDate.disabled=!0,r.minStudentsAmountInGroup.disabled=!0,r.maxStudentsAmountInGroup.disabled=!0),this.props.isEditingLocked&&(r.isVideoToolEnabled.disabled=!0,r.isDocumentToolEnabled.disabled=!0,r.isMeetingToolEnabled.disabled=!0),r}},{key:"render",value:function(){var e=this.state,t=e.executorsType,n=e.groupReviewType,r=e.isVideoToolEnabled,a=e.isDocumentToolEnabled,i=e.isMeetingToolEnabled,c=e.gpdRubric,s=e.finalizeGroupDate,u=e.minStudentsAmountInGroup,l=e.maxStudentsAmountInGroup,d=e.showAdvanced,f=e.meetingToolError,p=this.props,m=p.rubrics,b=p.serverErrors;return o.a.createElement(lI,{executorsType:t,serverErrors:b,rubrics:m,groupReviewType:n,activityData:this.getActivityData(),mainFormState:this.getMainFormState(),isVideoToolEnabled:r,isDocumentToolEnabled:a,isMeetingToolEnabled:i,gpdRubric:c,finalizeGroupDate:s,minStudentsAmountInGroup:u,maxStudentsAmountInGroup:l,showAdvanced:d,meetingToolError:f,showClientErrors:this.props.showClientErrors,onShowAdvanced:this.onShowAdvanced,disableEditing:this.props.disableEditing,isEditingLocked:this.props.isEditingLocked,onSubmit:this.onSubmit,onMainFormChange:this.onMainFormChange,onMaxStudentsAmountInGroupChange:this.onMaxStudentsAmountInGroupChange,onMinStudentsAmountInGroupChange:this.onMinStudentsAmountInGroupChange,onFinalizeGroupDateChange:this.onFinalizeGroupDateChange,onGpdRubricChange:this.onGpdRubricChange,onIsMeetingToolEnabledChange:this.onIsMeetingToolEnabledChange,onIsDocumentToolEnabledChange:this.onIsDocumentToolEnabledChange,onIsVideoToolEnabledChange:this.onIsVideoToolEnabledChange,onGroupReviewTypeChange:this.onGroupReviewTypeChange,onExecutorsTypeChange:this.onExecutorsTypeChange})}}])&&wI(n.prototype,r),a&&wI(n,a),t}(a.Component);PI.defaultProps={onChange:function(){},onSubmit:function(){},disableEditing:!1,isEditingLocked:!1};var RI=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),groupConfiguration:fI(e)}}))(PI))),AI=n("oe1p");function jI(e){return(jI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DI(e,t){return!t||"object"!==jI(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LI(e){return(LI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MI(e,t){return(MI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),DI(this,LI(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MI(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.activityData,r=e.history,a=e.match;if(!n)return null;var i=$g.c(n);return o.a.createElement(ol.a,{leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Copy, icon")},Je.a.CONTENT_COPY),primaryText:t._("Copy"),onClick:function(){sn.a.copyActivity(n.dbId).then((function(e){if(i){var t=V.a.compile(Qh.g.EDUCATOR_ACTIVITY_EDIT)({activityId:e.dbId});return t=Object(Yh.a)(t),window.location.href=t}var n=V.a.compile(xee.EDUCATOR_ACTIVITY_SETTINGS);r.push(n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kI(e,t,n[t])}))}return e}({},a.params,{activityId:e.dbId})))}))}})}}])&&NI(n.prototype,r),a&&NI(n,a),t}(a.Component);xI.propTypes={activityData:M.a.object.isRequired};var FI=Object(x.withI18n)()(Object(s.a)(xI));function VI(e){return(VI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UI(e,t){return!t||"object"!==VI(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qI(e){return(qI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WI(e,t){return(WI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),UI(this,qI(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WI(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onConfirm,n=e.i18n,r=e.activityName,a=e.isLoading,i=e.hasError,c=[o.a.createElement(Ue.a,{id:"button-confirm-delete-dialog-no",enabled:!a,secondary:!0,ariaLabel:n._("No"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"No"})),o.a.createElement(Ue.a,{id:"button-confirm-delete-dialog-yes",isLoading:a,primary:!0,ariaLabel:n._("Yes"),onClick:t},o.a.createElement(x.Trans,{id:"Yes"}))];return o.a.createElement(pi.a,{actions:c,id:"confirm-activity-delete",title:n._("Delete Assignment?"),modal:!0,visible:!0},o.a.createElement("div",null,i&&o.a.createElement("p",{className:"u-error"},n._("Error: Can't remove provided assignment")),o.a.createElement("p",null,n._('Are you sure you want to delete assignment "{activityName}"?',{activityName:r}))))}}])&&GI(n.prototype,r),a&&GI(n,a),t}(a.Component),QI=Object(x.withI18n)()(BI);function YI(e){return(YI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zI(e){return(zI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KI(e,t){return(KI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=zI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==YI(a)&&"function"!==typeof a?XI(r):a,$I(XI(XI(n)),"state",{isLoading:!1,hasError:!1}),$I(XI(XI(n)),"onConfirm",(function(){var e=n.props,t=e.activity,r=e.onSuccess;n.setIsLoading(!0),n.setHasError(!1),sn.a.deleteActivity(t.dbId,t.name).then((function(e){r(e),Hn.a.closeModal()})).catch((function(){n.setIsLoading(!1),n.setHasError(!0)}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KI(e,t)}(t,e),n=t,(r=[{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"render",value:function(){var e=this.props.activity,t=this.state,n=t.isLoading,r=t.hasError;return o.a.createElement(QI,{onConfirm:this.onConfirm,isLoading:n,hasError:r,activityName:e.name})}}])&&HI(n.prototype,r),a&&HI(n,a),t}(a.Component);ZI.propTypes={onSuccess:M.a.func,activity:M.a.object};var JI=ZI;function eP(e){return(eP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rP(e,t){return!t||"object"!==eP(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aP(e){return(aP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oP(e,t){return(oP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rP(this,aP(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oP(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.activityData,r=e.history,a=e.match,i=e.onDeleteSuccess;return o.a.createElement(ol.a,{enabled:n.deletable&&gr.a.isDeleteAssignmentActionVisible(),leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Delete, icon")},Je.a.DELETE),primaryText:t._("Delete"),onClick:function(){Hn.a.showModal(o.a.createElement(JI,{activityName:!0,activity:n,onSuccess:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tP(e,t,n[t])}))}return e}({},a.params);i&&i(e);var n=V.a.compile(xee.EDUCATOR_ACTIVITY_LIST);r.push(n(t))}}))}})}}])&&nP(n.prototype,r),a&&nP(n,a),t}(a.Component);iP.propTypes={activityData:M.a.object.isRequired,onDeleteSuccess:M.a.func};var cP=Object(x.withI18n)()(Object(s.a)(iP));function sP(e){return(sP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dP(e,t){return!t||"object"!==sP(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fP(e){return(fP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pP(e,t){return(pP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dP(this,fP(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pP(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.activityId,r=e.i18n,a=e.history,i=e.match,c=e.dispatch,s=t&&$g.c(t);return o.a.createElement(ol.a,{primaryText:r._("Configure"),leftIcon:o.a.createElement(Uf.a,{ariaLabel:r._("Configure, icon")},Je.a.CONFIGURE),onClick:function(){c(yI.f(null)),c(yI.e(null)),c(yI.h(null)),c(yI.g(null));var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){uP(e,t,n[t])}))}return e}({},i.params);if(t?e.activityId=t.dbId:n&&(e.activityId=n),s){var r=V.a.compile(Qh.g.EDUCATOR_ACTIVITY_EDIT)(e);return r=Object(Yh.a)(r),window.location.href=r}var o=V.a.compile(xee.EDUCATOR_ACTIVITY_SETTINGS);a.push(o(e))}})}}])&&lP(n.prototype,r),a&&lP(n,a),t}(a.Component);mP.propTypes={activityId:M.a.string,activityData:M.a.any};var bP=Object(x.withI18n)()(Object(c.b)()(Object(s.a)(mP)));n("yt4I");function yP(e){return(yP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hP(e){return(hP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gP(e,t){return(gP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SP=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=hP(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==yP(a)&&"function"!==typeof a?EP(r):a,wP(EP(EP(n)),"getGradebookLabel",(function(){var e=n.props.i18n;return Object(UO.a)()?e._("Scorebook"):e._("Gradebook")})),wP(EP(EP(n)),"getGradebookIconLabel",(function(){var e=n.props.i18n;return Object(UO.a)()?e._("Scorebook, icon"):e._("Gradebook, icon")})),wP(EP(EP(n)),"getWhenAvailableMessage",(function(){var e=n.props.i18n;return Object(UO.a)()?e._("Scorebook will be available once groups are finalized."):e._("Gradebook will be available once groups are finalized.")})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gP(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.locale,r=e.i18n,a=e.match,i=e.history,c=null,s=t&&t.type===pc.b.GROUP_PRESENTATION,u=t&&t.groupsFormedAt,l=t&&t.executorsType===vn.a.EDUCATOR_FORMED,d=!0;if(s&&!l&&!u){var f=Object(Er.e)(new Date(1e3*t.groupsFormationFinalizeAt),dt.a.SHORT,Object(sy.d)(n));d=!1,c={html:o.a.createElement("div",{className:"gradebook-menu-tooltip"},o.a.createElement("span",null,this.getWhenAvailableMessage()),o.a.createElement("span",null,r._("Groups will be finalized at: {formattedDate}.",{formattedDate:f})))}}return o.a.createElement(ol.a,{enabled:d,primaryText:this.getGradebookLabel(),leftIcon:o.a.createElement(Uf.a,{ariaLabel:this.getGradebookIconLabel()},Je.a.GRADEBOOK),tooltip:c,onClick:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){wP(e,t,n[t])}))}return e}({},a.params);if(t&&(e.activityId=t.dbId),t&&t.type===pc.b.IN_CLASSROOM){var n=V.a.compile(Qh.g.GRADEBOOK);return location.href=n(e)}var r=V.a.compile(xee.EDUCATOR_GRADEBOOK);i.push(r(e))}})}}])&&vP(n.prototype,r),a&&vP(n,a),t}(a.Component);SP.propTypes={activityId:M.a.number,activityData:M.a.object,locale:M.a.any.isRequired};var OP=Object(x.withI18n)()(Object(s.a)(SP));function CP(e){return(CP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IP(e,t){return!t||"object"!==CP(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PP(e){return(PP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RP(e,t){return(RP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),IP(this,PP(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RP(e,t)}(t,e),n=t,(r=[{key:"getGradingLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Scoring"):e._("Grading")}},{key:"getGradingIconLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Scoring, icon"):e._("Grading, icon")}},{key:"render",value:function(){var e=this.props,t=e.match,n=e.history;return o.a.createElement(ol.a,{primaryText:this.getGradingLabel(),leftIcon:o.a.createElement(Uf.a,{ariaLabel:this.getGradingIconLabel()},Je.a.GRADE),onClick:function(){var e=V.a.compile(xee.EDUCATOR_ACTIVITY_GRADING);n.push(e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_P(e,t,n[t])}))}return e}({},t.params)))}})}}])&&TP(n.prototype,r),a&&TP(n,a),t}(a.Component),jP=Object(x.withI18n)()(Object(s.a)(AP));n("4WYY");function kP(e){return(kP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DP(e){return(DP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LP(e,t){return(LP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FP="create-groups-action-button",VP="COPY_GROUPS_VIEW",GP={view:"DEFAULT_VIEW",selectedAssignment:"",activities:[]},UP=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=DP(t).call(this,e),n=!a||"object"!==kP(a)&&"function"!==typeof a?MP(r):a,xP(MP(MP(n)),"onHide",(function(){var e=n.props.onHide;e&&e()})),xP(MP(MP(n)),"onCopyGroupsSelection",(function(){n.setState({view:VP},(function(){n.selectFieldContainer.current.querySelector('div[role="listbox"]').focus()}))})),xP(MP(MP(n)),"getActionButton",(function(e){var t=e.enabled,n=e.icon,r=e.id,a=e.message,i=e.onClick,c=e.title,s=e.tooltip;return o.a.createElement(Ue.a,{id:"".concat(FP,"-").concat(r),key:"".concat(FP,"-").concat(r),className:FP,ariaLabel:a,enabled:t,tooltip:s,onClick:i},o.a.createElement("div",{className:FP+"-container"},o.a.createElement("div",{className:FP+"-icon"},o.a.createElement(Uf.a,null,n)),o.a.createElement("div",{className:FP+"-contents"},o.a.createElement("div",{className:FP+"-title"},c),o.a.createElement("div",{className:FP+"-message"},a))))})),xP(MP(MP(n)),"getDefaultView",(function(){var e=n.props,t=e.activities,r=e.i18n,a=e.onManualCreation,i=r._("Choose an action below to create groups for this assignment."),c=[{id:"manual-create",title:r._("Manual Creation"),message:r._("Manually create groups and assign members"),icon:Je.a.CONFIGURE,onClick:a},{id:"copy-groups",title:r._("Copy From Assignment"),message:r._("Copy groups from an existing assignment"),enabled:t.length>0,icon:Je.a.CONTENT_COPY,tooltip:t.length>0?"":{label:r._("No group assignments found to copy from")},onClick:n.onCopyGroupsSelection}];return o.a.createElement("div",{className:"create-groups-dialog-container"},o.a.createElement("div",{className:"create-groups-dialog-header"},i),o.a.createElement("div",{className:"create-groups-dialog-actions"},c.map((function(e){return n.getActionButton(e)}))))})),xP(MP(MP(n)),"getActivityListItems",(function(){var e=n.props,t=e.activities,r=e.i18n;return t.map((function(e){var t=g.a.get(e,"studentGroups"),n=t?t.length:0;return{key:"copy-group-activity[".concat(e.dbId,"]"),label:e.name,value:e.dbId,disabled:0===n,getProps:function(){return{primaryText:e.name,secondaryText:r._("Groups: {groupCount}",{groupCount:n})}}}}))})),xP(MP(MP(n)),"getCopyGroupsView",(function(){var e=n.props,t=e.i18n,r=e.onCopy,a=n.state.selectedAssignment;return o.a.createElement("div",{className:"create-groups-dialog-container"},o.a.createElement("div",{className:"create-groups-dialog-header"},t._("Choose an assignment below to copy groups from.")),o.a.createElement("div",{ref:n.selectFieldContainer,className:"create-groups-dialog-copy-options"},o.a.createElement(us.b,{id:"copy-groups-assignment-select-field",className:"copy-groups-assignment-select-field",ariaLabel:t._("Assignment"),placeholder:t._("Assignment..."),menuItems:n.getActivityListItems(),value:a,onChange:function(e){n.setState({selectedAssignment:e})}})),o.a.createElement("div",{className:"create-groups-dialog-copy-actions"},o.a.createElement(Ue.f,{id:"create-groups-dialog-copy-actions--copy",primary:!0,ariaLabel:t._("Copy groups from selected assignment"),className:"create-groups-dialog-copy-actions--copy",enabled:Boolean(a),iconEl:o.a.createElement(Uf.a,null,Je.a.CONTENT_COPY),onClick:function(){r(a)}},t._("Copy"))))})),n.selectFieldContainer=o.a.createRef(),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xP(e,t,n[t])}))}return e}({},GP),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LP(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n,t=this.state.view;return o.a.createElement(gc.a,{id:"create-groups-dialog",dialogClassName:"create-groups-dialog",onHide:this.onHide,title:e._("Create Groups")},"DEFAULT_VIEW"===t&&this.getDefaultView(),t===VP&&this.getCopyGroupsView())}}])&&NP(n.prototype,r),a&&NP(n,a),t}(o.a.PureComponent);UP.propTypes={activities:M.a.array,onCopy:M.a.func.isRequired,onHide:M.a.func,onManualCreation:M.a.func.isRequired,viewportDimensions:M.a.object.isRequired},UP.defaultProps={activities:[],onHide:function(){}};var qP=Object(x.withI18n)()(UP);function WP(e){return(WP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BP(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function QP(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){BP(o,r,a,i,c,"next",e)}function c(e){BP(o,r,a,i,c,"throw",e)}i(void 0)}))}}function YP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HP(e){return(HP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zP(e,t){return(zP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $P={loading:!0,activities:[]},ZP=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=HP(t).call(this,e),n=!a||"object"!==WP(a)&&"function"!==typeof a?KP(r):a,XP(KP(KP(n)),"fetchGroupActivities",QP(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.activityId,a=t.termClass,e.next=3,sn.a.fetchGroupActivities(a.dbId);case 3:return o=e.sent,o=g.a.filter(o,(function(e){return e.dbId!==r})),o=g.a.orderBy(o,[function(e){return e.name.toLowerCase()}],["asc"]),n.setState({activities:o,loading:!1}),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})))),XP(KP(KP(n)),"launchGroupFormationPage",(function(){var e=n.props.groupFormationUrl;n.setState({loading:!0},(function(){window.location.href=e}))})),XP(KP(KP(n)),"onCopy",(function(e){var t=n.props,r=t.activityId,a=t.activityName,o=t.i18n;n.setState({loading:!0},QP(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,sn.a.copyGroupsToAssignment(e,r);case 3:n.launchGroupFormationPage(),t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),H.b.error(t.t0),Hn.a.closeModal(),yc.a.addError(o._('We were not able to copy groups to: "{activityName}"',{activityName:a}));case 11:case"end":return t.stop()}}),t,this,[[0,6]])}))))})),XP(KP(KP(n)),"onHide",(function(){Hn.a.closeModal()})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){XP(e,t,n[t])}))}return e}({},$P),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zP(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.fetchGroupActivities()}},{key:"render",value:function(){var e=this.props.viewportDimensions,t=this.state,n=t.loading,r=t.activities;return n?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(qP,{onHide:this.onHide,onCopy:this.onCopy,onManualCreation:this.launchGroupFormationPage,activities:r,viewportDimensions:e})}}])&&YP(n.prototype,r),a&&YP(n,a),t}(o.a.PureComponent);ZP.propTypes={activityId:M.a.number.isRequired,activityName:M.a.string.isRequired,groupFormationUrl:M.a.string.isRequired};var JP=Object(x.withI18n)()(Object(c.b)((function(e){return{termClass:bb.k(e),viewportDimensions:mc.a(e)}}))(ZP));function eR(e){return(eR="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nR(e){return(nR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rR(e,t){return(rR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iR=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=nR(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==eR(a)&&"function"!==typeof a?aR(r):a,oR(aR(aR(n)),"onClick",(function(){var e=n.props.activityData,t=e.studentGroups,r=e.dbId,a=e.name,i=n.createGroupFormationUrl();e&&e.type===pc.b.GROUP_PRESENTATION&&g.a.isEmpty(t)?Hn.a.showModal(o.a.createElement(JP,{activityId:r,activityName:a,groupFormationUrl:i})):window.location.href=i})),oR(aR(aR(n)),"createGroupFormationUrl",(function(){var e=n.props,t=e.activityData,r=e.ltiScope,a=e.reff,o=t.dbId,i="".concat(window.location.origin,"/educator/activity/").concat(o,"/student-groups/");return a?(i+="?ref="+a,r&&(i+="&lti-scope=".concat(r))):!a&&r&&(i+="?lti-scope="+r),i})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rR(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.i18n,r=e.institution,a=!yb.a(r)||t&&t.cengageSettings&&t.cengageSettings.inPath,i=t&&t.type===pc.b.GROUP_PRESENTATION,c=t&&t.groupsFormedAt,s=t&&t.executorsType===vn.a.EDUCATOR_FORMED,u=!0;return!i||s||c||(u=!1),o.a.createElement(ol.a,{enabled:a&&u,primaryText:n._("Manage groups"),leftIcon:o.a.createElement(Uf.a,null,Je.a.GROUP),onClick:this.onClick})}}])&&tR(n.prototype,r),a&&tR(n,a),t}(a.Component);iR.propTypes={activityData:M.a.object,activityId:M.a.number,allowGroupsForming:M.a.bool,reff:M.a.string};var cR=Object(c.b)((function(e){return{ltiScope:bb.j(e),institution:bb.h(e)}}))(Object(x.withI18n)()(iR));function sR(e){return(sR="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dR(e,t){return!t||"object"!==sR(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fR(e){return(fR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pR(e,t){return(pR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mR=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dR(this,fR(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pR(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.match,r=e.history;return o.a.createElement(ol.a,{primaryText:t._("Student progress"),leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Student progress, icon")},Je.a.PERSON),onClick:function(){var e=V.a.compile(xee.EDUCATOR_ACTIVITY_STUDENT_PROGRESS);r.push(e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){uR(e,t,n[t])}))}return e}({},n.params)))}})}}])&&lR(n.prototype,r),a&&lR(n,a),t}(a.Component);mR.propTypes={activityId:M.a.number};var bR=Object(x.withI18n)()(Object(s.a)(mR)),yR="gradebook",vR=n("wd/R"),hR=n.n(vR),gR=n("hIiU");n("s6u6");function ER(e){return(ER="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SR(e){return(SR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OR(e,t){return(OR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TR="tooltip-trial",IR=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=SR(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==ER(a)&&"function"!==typeof a?CR(r):a,_R(CR(CR(n)),"onDismiss",(function(){var e=n.props.onDismiss;g.a.isFunction(e)&&e()})),_R(CR(CR(n)),"onRequestExtension",(function(){var e=n.props.onRequestExtension;g.a.isFunction(e)&&e()})),_R(CR(CR(n)),"getTooltipContent",(function(){var e=n.props,t=e.i18n,r=e.expirationDate,a=gR.a.getFormattedExpirationDateTime(r);return o.a.createElement("div",{className:"".concat(TR,"--content")},o.a.createElement("div",{className:"".concat(TR,"--header")},t._("Full-featured Bongo Trial")),o.a.createElement("div",{className:"".concat(TR,"--message-container")},o.a.createElement("div",null,o.a.createElement(zt.a,{className:"".concat(TR,"--message-icon")},Je.a.TIMER),t._("Trial expiration: {expiration}",{expiration:a})),o.a.createElement("div",null,o.a.createElement(zt.a,{className:"".concat(TR,"--message-icon")},Je.a.UNLOCKED),t._("All functionality is unlocked during the trial period.")),o.a.createElement("div",{className:Ie()("".concat(TR,"--message--centered"),"".concat(TR,"--message-actions"))},o.a.createElement(Ue.a,{id:"button-trial-request-extension",className:"".concat(TR,"--message-button"),onClick:n.onRequestExtension},t._("Request Extension")),o.a.createElement(Ue.a,{id:"button-trial-dismiss",className:"".concat(TR,"--message-button"),onClick:n.onDismiss},t._("Dismiss")))))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OR(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.isOpen;return o.a.createElement(Ec.b,{animation:"fade",className:Ie()(TR,n),delay:0,distance:0,duration:250,html:this.getTooltipContent(),interactive:!0,open:r,position:Ec.a.BOTTOM,sticky:!0,stickyDuration:0,trigger:"manual"},t)}}])&&wR(n.prototype,r),a&&wR(n,a),t}(a.Component);IR.propTypes={className:M.a.string,children:M.a.node,expirationDate:M.a.number,isOpen:M.a.bool,onDismiss:M.a.func.isRequired,onHidden:M.a.func,onRequestExtension:M.a.func.isRequired,i18n:M.a.any},IR.defaultProps={expirationDate:0,isOpen:!1};var PR=Object(x.withI18n)()(IR);function RR(e){return(RR="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AR(){return(AR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){MR(e,t,n[t])}))}return e}function kR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NR(e){return(NR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DR(e,t){return(DR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xR="button-trial",FR=[Number.POSITIVE_INFINITY,2592e5,864e5];var VR=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=NR(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==RR(a)&&"function"!==typeof a?LR(r):a,MR(LR(LR(n)),"_updateTimeoutId",null),MR(LR(LR(n)),"state",{isTooltipOpen:!gR.a.isTrialExpired(n.props.expirationDate)&&gR.a.shouldShowTrialNotice()}),MR(LR(LR(n)),"navigateToTrialsPage",(function(){var e=n.props,t=e.history,r=e.match,a=V.a.compile(xee.EDUCATOR_TRIAL)(jR({},r.params));t.push(a)})),MR(LR(LR(n)),"onTooltipRequestExtension",(function(){gR.a.updateLastAckTime(),n.setState({isTooltipOpen:!1},(function(){setTimeout(n.navigateToTrialsPage,100)}))})),MR(LR(LR(n)),"onTooltipDismiss",(function(){gR.a.updateLastAckTime(),n.setState({isTooltipOpen:!1})})),MR(LR(LR(n)),"onClick",(function(){n.setState({isTooltipOpen:!0})})),MR(LR(LR(n)),"renderButtonLabel",(function(){for(var e=n.props,t=e.i18n,r=e.expirationDate,a=hR()(),i=hR()(r),c=r-(new Date).getTime(),s=FR.length-1;s>=0&&!(c<=FR[s]);s--);var u=o.a.createElement("span",{className:Ie()("".concat(xR,"--label-time"),"".concat(xR,"--label-time--severity-").concat(s))},a.to(i,!0));return o.a.createElement("div",{className:"".concat(xR,"--label")},t._("Trial ends in"),"\xa0",u)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DR(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.expirationDate;clearTimeout(this._updateTimeoutId),this._updateTimeoutId=setTimeout((function(){if(e.forceUpdate(),gR.a.isTrialExpired(t)){var n=e.props,r=n.location,a=n.history;gR.a.rerouteToTrialsPage(r.pathname,a)}}),3e4)}},{key:"componentWillUnmount",value:function(){this._updateTimeoutId&&clearTimeout(this._updateTimeoutId)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.expirationDate,a=t.location,i=this.state.isTooltipOpen;return gR.a.isTrialExpired(this.props.expirationDate)?null:gR.a.isTrialPath(a.pathname)?null:o.a.createElement(PR,{expirationDate:r,isOpen:i,onRequestExtension:this.onTooltipRequestExtension,onDismiss:this.onTooltipDismiss},o.a.createElement(Ue.a,AR({},(e=this.props,g.a.pick(e,g.a.keys(Ue.a.propTypes))),{id:"button-trial",className:Ie()(xR,n),onClick:this.onClick,enabled:!i}),o.a.createElement(zt.a,{className:"".concat(xR,"--icon")},Je.a.TIMER),this.renderButtonLabel()))}}])&&kR(n.prototype,r),a&&kR(n,a),t}(a.Component);VR.propTypes=jR({},Ue.a.propTypes,{className:M.a.string,children:M.a.node,expirationDate:M.a.number,history:M.a.any,match:M.a.any,location:M.a.any}),VR.defaultProps={expirationDate:0};var GR=Object(x.withI18n)()(Object(s.a)(VR));function UR(e){return(UR="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WR(e){return(WR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BR(e,t){return(BR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HR="trial-card",zR="https://www.bongolearn.com/ready-to-upgrade/",KR=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=WR(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==UR(a)&&"function"!==typeof a?QR(r):a,YR(QR(QR(n)),"getExtensionFormUrl",(function(){var e=n.props.institution.externalTrackingUuid,t="institutionUUID=".concat(encodeURIComponent(e));return"".concat(zR,"?").concat(t)})),YR(QR(QR(n)),"renderDetails",(function(){var e=n.props,t=e.i18n,r=e.currentUser,a=e.trialExpirationDate,i=e.institution,c=gR.a.isTrialExpired(a),s=gR.a.getFormattedExpirationDateTime(a),u=Object(ar.b)(r),l=[];return l.push(o.a.createElement("div",{key:"trial-card-detail[expiration]"},o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--left")},Je.a.TIMER),o.a.createElement("div",{className:"".concat(HR,"-detail-text")},t._("Trial expiration: {expiration}",{expiration:s})))),l.push(o.a.createElement("div",{key:"trial-card-detail[restrictions]"},o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--left")},c?Je.a.LOCKED:Je.a.UNLOCKED),o.a.createElement("div",{className:"".concat(HR,"-detail-text")},c?t._("All functionality is locked since the trial period has expired"):t._("All functionality is unlocked during the trial period")))),u?(l.push(o.a.createElement("div",{key:"trial-card-detail[institution-id]"},o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--left")},Je.a.ACCOUNT),o.a.createElement("div",{className:"".concat(HR,"-detail-text")},t._("Institution ID:"),"\xa0",o.a.createElement(Ec.b,{label:t._("Click to copy. Use this unique ID when requesting an extension.")},o.a.createElement(da.a,{id:"button-trial-institution-id",className:"".concat(HR,"-detail-button"),onClick:function(){Object(uo.a)(i.externalTrackingUuid)}},i.externalTrackingUuid,o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--right")},Je.a.CONTENT_COPY)))))),l.push(o.a.createElement("div",{key:"trial-card-detail[info]"},o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--left")},Je.a.INFO_OUTLINE),o.a.createElement("div",{className:"".concat(HR,"-detail-text")},t._("To continue using Bongo after the trial period, please contact us using this form:"),"\xa0",o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("a",{id:"link-trial-extension-form",href:n.getExtensionFormUrl(),target:"_blank",rel:"noopener noreferrer"},zR),o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--right")},Je.a.OPEN_IN_NEW)))))):l.push(o.a.createElement("div",{key:"trial-card-detail[info]"},o.a.createElement(zt.a,{className:"".concat(HR,"-detail-icon--left")},Je.a.INFO_OUTLINE),o.a.createElement("div",{className:"".concat(HR,"-detail-text")},t._("To continue using Bongo after the trial period, please contact your institution or instructor")))),o.a.createElement("div",{className:"".concat(HR,"-detail-container")},l)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BR(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isTrial,r=e.trialExpirationDate;if(!n)return null;var a=gR.a.isTrialExpired(r)?t._("Bongo Trial: Expired"):t._("Bongo Trial: Active");return o.a.createElement(K.a,null,o.a.createElement(K.d,{title:a,className:"trial-card-title"}),o.a.createElement(K.c,null,this.renderDetails()))}}])&&qR(n.prototype,r),a&&qR(n,a),t}(a.Component);KR.propTypes={currentUser:M.a.object,institution:M.a.object,isTrial:M.a.bool,trialExpirationDate:M.a.number,i18n:M.a.any};var XR=Object(x.withI18n)()(Object(c.b)((function(e){return{currentUser:wt.h(e),institution:bb.h(e),isTrial:bb.y(e),trialExpirationDate:bb.q(e)}}))(KR));n("6ru4");function $R(e){return($R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){aA(e,t,n[t])}))}return e}function JR(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tA(e){return(tA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nA(e,t){return(nA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oA=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=tA(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==$R(a)&&"function"!==typeof a?rA(r):a,aA(rA(rA(n)),"getMenuItems",(function(){var e=n.props.menuActions,t=[];return e&&(t=JR(e)),t})),aA(rA(rA(n)),"getCompiledPath",(function(e,t){return V.a.compile(e)(t)})),aA(rA(rA(n)),"getQuickNav",(function(){var e=n.props,t=e.context,r=e.existingQuickNavItems,a=e.activityName,i=e.activityType,c=e.match,s=e.showQuickNav,u=[],l=[VO.a.GRADEBOOK,VO.a.GROUPS,VO.a.PROGRESS,VO.a.CONFIGURATION,VO.a.GRADING];if(!t||!c.params.classId||!s)return null;if(t===VO.a.ASSIGNMENTS||t===VO.a.CONFIGURATION_NEW)return null;if(r&&r.length>0)(u=r.map((function(e,t){return o.a.createElement(AI.e,{key:"nav-item-"+t,context:e.context,to:e.url||e.location,text:e.context.breadcrumbLabel||e.context.label})}))).push(o.a.createElement(AI.e,{key:"current-nav-location",text:t.breadcrumbLabel||t.label}));else{if([VO.a.RUBRICS,VO.a.MEETINGS,VO.a.LIBRARY,VO.a.NOTIFICATIONS,VO.a.SUPPORT,VO.a.TEMPLATE_SETTINGS].includes(t))return null;gr.a.isEducatorAssignmentNavigationVisible()&&(u.push(o.a.createElement(AI.e,{key:"assignment-nav-item-",to:n.getCompiledPath(xee.EDUCATOR_ACTIVITY_LIST,ZR({},c.params)),text:VO.a.ASSIGNMENTS.label})),a&&u.push(o.a.createElement(AI.e,{key:"activity-name-nav-item",text:a}))),t===VO.a.GRADING||t===VO.a.PROGRESS?(u.push(o.a.createElement(AI.e,{key:"gradebook-nav-item",text:VO.a.GRADEBOOK.breadcrumbLabel||VO.a.GRADEBOOK.label,to:n.getCompiledPath(xee.EDUCATOR_GRADEBOOK,ZR({},c.params))})),g.a.remove(l,VO.a.GRADEBOOK),g.a.remove(l,VO.a.GROUPS)):i&&i!==pc.b.GROUP_PRESENTATION&&g.a.remove(l,VO.a.GROUPS),g.a.remove(l,t),u.push(o.a.createElement(AI.e,{key:"current-nav-location",text:t.breadcrumbLabel||t.label,menuItems:n.createNavMenuItems(l)}))}return o.a.createElement(AI.d,{navItems:u})})),aA(rA(rA(n)),"getTrialButton",(function(){var e=n.props,t=e.isTrial,r=e.trialExpirationDate;if(t)return o.a.createElement(GR,{className:"toolbar-trial-button",expirationDate:r})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nA(e,t)}(t,e),n=t,(r=[{key:"createNavMenuItems",value:function(e){var t,n=this.props,r=n.match,a=n.activityType,i=n.institution,c=n.context,s=n.activityData,u=n.locale,l=[],d=!0,f=!0;return yb.a(i)&&(d=!1,f=!1),e.indexOf(VO.a.CONFIGURATION)>=0&&f&&l.push(o.a.createElement(bP,{key:"edit-assignment-menu-item",activityId:r.params.activityId})),e.indexOf(VO.a.GRADEBOOK)>=0&&d&&l.push(o.a.createElement(OP,{key:"gradebook-menu-item",locale:u})),e.indexOf(VO.a.GRADING)>=0&&r.params.studentId&&l.push(o.a.createElement(jP,{key:"grading-menu-item"})),a&&a===pc.b.GROUP_PRESENTATION&&e.indexOf(VO.a.GROUPS)>=0&&(c===VO.a.GRADEBOOK&&(t=yR),l.push(o.a.createElement(cR,{key:"manage-groups-menu-item",reff:t,activityData:s}))),e.indexOf(VO.a.PROGRESS)>=0&&r.params.studentId&&l.push(o.a.createElement(bR,{key:"student-progress-menu-item"})),l}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.classId,r=e.i18n,a=e.match.params.activityId,i=[];return Object(VO.b)(r),Object(UO.a)()&&function(e){VO.a.GRADEBOOK.label=e._("Scorebook"),VO.a.GRADEBOOK.ariaLabel=e._("Scorebook"),VO.a.GRADEBOOK.iconAriaLabel=e._("Scorebook, icon"),VO.a.GRADING.label=e._("Scoring"),VO.a.GRADING.ariaLabel=e._("Scoring"),VO.a.GRADING.iconAriaLabel=e._("Scoring, icon")}(r),a&&(a=+a),t&&(i=JR(t)),i.push(this.getTrialButton()),o.a.createElement("div",null,o.a.createElement(Ge.b,{activityId:a,actions:i,classId:n,title:this.getQuickNav(),menuOptions:this.getMenuItems(),navigationDrawerType:AI.b.EDUCATOR}))}}])&&eA(n.prototype,r),a&&eA(n,a),t}(a.Component);oA.propTypes={actions:M.a.array,activityData:M.a.object,activityId:M.a.number,activityName:M.a.string,activityType:M.a.string,existingQuickNavItems:M.a.array,classId:M.a.number,context:M.a.object,menuActions:M.a.array,studentId:M.a.number,showQuickNav:M.a.bool},oA.defaultProps={actions:[],existingQuickNavItems:[],menuActions:[],showQuickNav:!0};var iA=Object(c.b)((function(e){return{institution:bb.h(e),isTrial:bb.y(e),trialExpirationDate:bb.q(e),locale:cy.a(e)}}))(Object(x.withI18n)()(Object(s.a)(oA))),cA=n("cMfo");function sA(e){return(sA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lA(e){return(lA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dA(e,t){return(dA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pA=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=lA(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==sA(a)&&"function"!==typeof a?fA(r):a,i=fA(fA(n)),s=function(){var e=n.props,t=e.activityData,r=e.isCengageEditLtiScope;if(!t||r)return[];var a=[];return gr.a.isDeleteAssignmentActionVisible()&&a.push(o.a.createElement(cP,{key:"delete-assignment-menu-action",activityData:t})),a},(c="getMenuActions")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.isCengageEditLtiScope;return t?o.a.createElement(iA,{activityName:t.name,activityType:t.type,activityData:t,showQuickNav:!n,context:VO.a.CONFIGURATION,menuActions:this.getMenuActions()}):null}}])&&uA(n.prototype,r),a&&uA(n,a),t}(a.Component);pA.propTypes={activityData:M.a.object.isRequired};var mA=Object(c.b)((function(e){return{isCengageEditLtiScope:bb.j(e)===cA.a.CENGAGE_EDIT}}))(Object(x.withI18n)()(Object(s.a)(pA)));function bA(e){return(bA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vA(e,t){return!t||"object"!==bA(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hA(e){return(hA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gA(e,t){return(gA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vA(this,hA(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onFormChange,a=e.onSubmit,i=e.showClientErrors,c=e.serverErrors,s=e.i18n,u=e.disableEditing,l=e.isEditingLocked;return o.a.createElement(z.a,{title:s._("Configure Group Assignment")},o.a.createElement(iO.a,null),o.a.createElement(mA,{activityData:n}),o.a.createElement(un.a,null,o.a.createElement(RI,{rubrics:t,activityData:n,showClientErrors:i,serverErrors:c,onSubmit:a,disableEditing:u,isEditingLocked:l,onChange:r})))}}])&&yA(n.prototype,r),a&&yA(n,a),t}(a.Component),wA=Object(x.withI18n)()(EA),SA=n("4pH6"),OA=n("IwvU"),CA="/educator/cengage/finish-lpn-activity-edit/".concat(Qh.a,"/cancel/false"),_A=function(e){var t=Ft.a.getState();bb.j(t)===cA.a.CENGAGE_EDIT&&e&&(window.location.href=V.a.compile(CA)({activityId:e})+"?lti-scope=cengage-edit")};function TA(e){return(TA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){NA(e,t,n[t])}))}return e}function PA(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function RA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AA(e){return(AA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jA(e,t){return(jA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DA=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=AA(t).call(this,e),n=!a||"object"!==TA(a)&&"function"!==typeof a?kA(r):a,NA(kA(kA(n)),"onFormChange",(function(e){n.formData=e})),NA(kA(kA(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isValid,a=t.form,o=n.props,i=o.match,c=o.history,s=o.dispatch,FT(),r){e.next=7;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 7:return e.next=9,sn.a.editGroupProject(n.props.activityId,a).then((function(){a.lmsSync.ltiGradeIdentifier===jT.c()&&jT.a(),VT(),_A(n.props.activityId),s(yI.e(null)),s(kO.ab(null,OA.a.CONFIGURATION)),s(kO.Z(null));var e=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(IA({},i.params));c.push(e)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 9:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){PA(o,r,a,i,c,"next",e)}function c(e){PA(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.rubrics,r=e.isD2LFreemium,a=e.disableEditing,i=e.isEditingLocked;return o.a.createElement(wA,{rubrics:n,showClientErrors:this.state.showClientErrors,serverErrors:this.state.serverErrors,onSubmit:this.onSubmit,onFormChange:this.onFormChange,activityData:t,disableEditing:a,isEditingLocked:i,isD2LFreemium:r})}}])&&RA(n.prototype,r),a&&RA(n,a),t}(a.Component);DA.propTypes={activityId:M.a.number.isRequired,activityData:M.a.object,rubrics:M.a.arrayOf(M.a.object)};var LA=Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),navigation:SA.a(e)}}))(DA)),MA=100;n("oo1z");function xA(e){return(xA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){WA(e,t,n[t])}))}return e}function VA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GA(e){return(GA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UA(e,t){return(UA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BA=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=GA(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==xA(a)&&"function"!==typeof a?qA(r):a,WA(qA(qA(n)),"onDelete",(function(){var e=n.props,t=e.keyTerm;(0,e.onDelete)(t)})),WA(qA(qA(n)),"onTermChanged",(function(e){var t=n.props,r=t.keyTerm;(0,t.onChange)(FA({},r,{term:e}))})),WA(qA(qA(n)),"onCountChanged",(function(e){var t=n.props,r=t.keyTerm,a=t.onChange,o=e?parseInt(e):e;if(o>MA)return!1;a(FA({},r,{count:o}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.countError,n=e.keyTerm,r=e.i18n,a=e.showHeader,i=e.termError;return o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term"},o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-container"},o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-input"},a&&o.a.createElement("span",{className:"activity-auto-analysis-desired-key-term-input-label"},r._("Word or Phrase")),o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-term-input[".concat(n.id,"]"),ariaLabel:i?r._("Word or Phrase is required"):r._("Word or Phrase"),onChange:this.onTermChanged,error:Boolean(i),value:n.term})),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-count"},a&&o.a.createElement("span",{className:"activity-auto-analysis-desired-key-term-input-label"},r._("Occurrences")),o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-term-count[".concat(n.id,"]"),ariaLabel:t?r._("Count of word or phrases must be a number greater than zero"):r._("Count of word or phrase"),type:"number",error:Boolean(t),onChange:this.onCountChanged,value:n.count})),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-item-actions"},o.a.createElement(Ue.c,{id:"activity-auto-analysis-desired-key-term-delete[".concat(n.id,"]"),ariaLabel:r._("Delete key term"),onClick:this.onDelete},Je.a.DELETE))),(i||t)&&o.a.createElement("div",{className:"activity-auto-analysis-key-term-validation-container"},o.a.createElement(zt.a,{className:"activity-auto-analysis-key-term-validation-icon"},Je.a.ERROR),o.a.createElement("div",{className:"activity-auto-analysis-key-term-validation-msg-container"},i&&o.a.createElement("span",{className:"activity-auto-analysis-key-term-validation-msg"},i),t&&o.a.createElement("span",{className:"activity-auto-analysis-key-term-validation-msg"},t))))}}])&&VA(n.prototype,r),a&&VA(n,a),t}(o.a.PureComponent);BA.propTypes={countError:M.a.string,termError:M.a.string,keyTerm:M.a.object.isRequired,onDelete:M.a.func.isRequired,onChange:M.a.func.isRequired,showHeader:M.a.bool},BA.defaultProps={countError:"",termError:"",showHeader:!1};var QA=Object(x.withI18n)()(BA);n("yov7");function YA(e){return(YA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zA(e){return(zA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KA(e,t){return(KA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZA={newKeyTerm:null},JA=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=zA(t).call(this,e),n=!a||"object"!==YA(a)&&"function"!==typeof a?XA(r):a,$A(XA(XA(n)),"getTooltipMessage",(function(e,t,r){var a=n.props,o=a.isD2LFreemium,i=a.isTopHatFreemium;return o||i?e.value?"".concat(t," (").concat(qf.a.FREEMIUM_CONFIG_NOT_EDITABLE_OPTION,")"):"".concat(r," (").concat(qf.a.FREEMIUM_CONFIG_OPTION,")"):e.value?t:r})),$A(XA(XA(n)),"getAdvancedComponents",(function(){return[]})),$A(XA(XA(n)),"getAutoAnalysisConfig",(function(){var e=n.props,t=e.i18n,r=e.isVideoToolEnabled,a=gr.a.getAutoAnalysisPermission(),o=!0,i="";return a.isRestricted?(i=t._(a.restrictedMessage),o=!1):r.value||(i=t._("This option is only applicable if video has been enabled in the Toolset"),o=!1),{enabled:o,tooltipLabel:i}})),$A(XA(XA(n)),"renderToolsetSection",(function(){var e=n.props.i18n,t=n.props,r=t.isVideoToolEnabled,a=t.isDocumentToolEnabled,i=t.isMeetingToolEnabled,c=t.onIsVideoToolEnabledChange,s=t.onIsDocumentToolEnabledChange,u=t.onIsMeetingToolEnabledChange,l=t.showClientErrors,d=t.meetingToolError,f=t.isD2LFreemium,p=t.isTopHatFreemium,m=r.tooltip||n.getTooltipMessage(r,e._("Video enabled"),e._("Video disabled")),b=n.getTooltipMessage(a,e._("Documents enabled"),e._("Documents disabled")),y=n.getTooltipMessage(i,e._("Meetings enabled"),e._("Meetings disabled"));return o.a.createElement("div",null,o.a.createElement("h2",{className:"section-header"},e._("Toolset")),o.a.createElement("div",{className:"activity-toolset-container"},o.a.createElement("div",{className:"activity-toolset-primary"},o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-video",enabled:!f&&!r.disabled,isToggle:!0,onClick:c,checked:r.value,tooltip:{label:m},ariaLabel:e._("Enable/Disable Video")},Je.a.VIDEOCAM),o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-document",enabled:!p&&!f&&!a.disabled,isToggle:!0,iconClassName:vr.a.FILE,onClick:s,checked:a.value,tooltip:{label:b},ariaLabel:e._("Enable/Disable Documents")}),o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-meeting",enabled:!p&&!f&&!i.disabled,isToggle:!0,iconClassName:vr.a.CALENDAR,onClick:u,checked:i.value,tooltip:{label:y},ariaLabel:e._("Enable/Disable Meetings")}))),l&&d&&o.a.createElement("p",{className:"u-error u-text-center"},d))})),$A(XA(XA(n)),"addNewKeyTerm",(function(){(0,n.props.onKeyTermAdd)(n.state.newKeyTerm.trim()),n.setState({newKeyTerm:null})})),$A(XA(XA(n)),"onNewKeyTermChange",(function(e){n.setState({newKeyTerm:e})})),$A(XA(XA(n)),"onNewKeyTermSubmit",(function(){n.state.newKeyTerm.trim().length>0&&n.addNewKeyTerm()})),$A(XA(XA(n)),"renderAutoAnalysisActions",(function(){var e=n.props.i18n,t=n.state.newKeyTerm,r=n.getAutoAnalysisConfig(),a=Boolean(t&&t.trim().length>0&&r.enabled);return o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms-actions"},o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-terms-actions-input",className:"activity-auto-analysis-desired-key-terms-actions-input",ariaLabel:e._("Enter new key term"),enabled:r.enabled,onChange:n.onNewKeyTermChange,placeholder:e._("New key term"),tooltip:{label:r.tooltipLabel},value:t,onSubmit:n.onNewKeyTermSubmit,onSubmitKeystroke:{modifiers:[],keyCode:gs.a.ENTER}}),o.a.createElement(Ue.f,{id:"activity-auto-analysis-key-terms-create-button",ariaLabel:e._("Add new key term"),primary:!0,enabled:a,tooltip:{label:r.tooltipLabel},onClick:n.addNewKeyTerm},e._("Add")))})),$A(XA(XA(n)),"renderAutoAnalysisItems",(function(){var e=n.props,t=e.i18n,r=e.videoAnalysisKeyTerms,a=e.onKeyTermChange,i=e.onKeyTermDelete;return g.a.map(r,(function(e,n){var r="",c="";return 0===e.term.trim().length?r=t._("Field is required."):e.isDuplicate&&(r=t._("Duplicate key terms are not allowed.")),(!e.count||e.count<=0||e.count>MA)&&(c=t._("Count must be between 1 and {DESIRED_TERM_MAX_COUNT}.",{DESIRED_TERM_MAX_COUNT:MA})),o.a.createElement(QA,{key:"activity-auto-analysis-desired-key-term[".concat(e.id,"]"),keyTerm:e,countError:c,termError:r,onChange:a,onDelete:i,showHeader:0===n})}))})),$A(XA(XA(n)),"renderKeyTermsWarning",(function(){var e=n.props,t=e.i18n,r=e.mainFormState;if(!r)return null;var a=r.autoGradeScoreSource;if(r.hasGradedSubmission&&g.a.includes([hb.AUTO_ANALYSIS_OVERALL_SCORE,hb.AUTO_ANALYSIS_CONTENT_SCORE],a.value)){var i=t._("Any changes to Key Terms will recalculate Auto Analysis\\u2122 scores");return o.a.createElement(X.a,{className:"activity-auto-analysis-key-terms-note",type:X.a.NOTE_TYPES.WARNING,message:i})}return null})),$A(XA(XA(n)),"renderAutoAnalysisSection",(function(){var e=n.props,t=e.i18n,r=e.isAutoAnalysisScoreEnabled,a=e.onIsAutoAnalysisScoreEnabledChange,i=n.getAutoAnalysisConfig(),c=r.tooltip||i.tooltipLabel||t._("Enabling this option will provide scores for each metric.");return o.a.createElement("div",{className:"activity-auto-analysis-container"},o.a.createElement("h2",{className:"section-header"},t._("Auto Analysis\\u2122")),o.a.createElement("p",null,t._("Auto Analysis\\u2122 is a tool that will automatically transcribe video submissions and provide a report of key metrics on the learner's delivery.")),o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-contents"},o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-scores"},o.a.createElement(GO.a,{id:"individual-assignment-toolset-auto-analysis-scores-checkbox",name:"individual-assignment-toolset-auto-analysis-scores-checkbox",checked:i.enabled&&r.value,enabled:i.enabled&&!r.disabled,label:t._("Provide Scores for Auto Analysis\\u2122"),onChange:a,tooltip:{label:c}})),o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-key-terms-container",className:"activity-auto-analysis-key-terms-container"},o.a.createElement(Xt.a,{className:"activity-auto-analysis-key-terms-paper"},o.a.createElement("div",{className:"activity-auto-analysis-key-terms-header"},o.a.createElement("h4",{className:"activity-auto-analysis-key-terms-header-title"},t._("Key Terms")),o.a.createElement("p",{className:"activity-auto-analysis-key-terms-header-msg"},t._("Entering key terms will add a content portion to Auto Analysis reports. For each key word or phrase, enter the desired occurrence of the term. Do not enter plurals, they will be automatically grouped into the singular form. These terms can be updated later and the reports will be updated accordingly.")),n.renderKeyTermsWarning()),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms-contents"},n.renderAutoAnalysisActions(),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms"},n.renderAutoAnalysisItems()))))))})),$A(XA(XA(n)),"renderConfigForm",(function(){return n.props.showAdvanced?o.a.createElement(o.a.Fragment,null,n.renderToolsetSection(),n.renderAutoAnalysisSection()):null})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$A(e,t,n[t])}))}return e}({},ZA),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onMainFormChange,a=e.onGradeTypeChange,i=e.onSubmit,c=e.onShowAdvanced,s=e.showAdvanced,u=e.showClientErrors,l=e.serverErrors,d=e.i18n,f=e.mainFormState,p=e.disableEditing,m=e.isEditingLocked,b=e.canSave,y=e.saveButtonTooltipLabel;return o.a.createElement(tI,{canSave:b,saveButtonTooltipLabel:y,rubrics:t,activityData:n,mainFormState:f,canAutoGrade:gr.a.isAutoGradingAllowed(),canGradedPeerReview:gr.a.isGradedPeerReviewAllowed(),canReflectionQuestions:gr.a.isReflectionQuestionsAllowed(),onSubmit:i,disableEditing:p,isEditingLocked:m,showAdvanced:s,onShowAdvanced:c,serverErrors:l,showClientErrors:u,onChange:r,onGradeTypeChange:a,enablePeerReview:gr.a.isPeerReviewEnabled(),peerReviewTooltipLabel:gr.a.isPeerReviewEnabled()?"":d._(qf.a.FREEMIUM_CONFIG_OPTION)},this.renderConfigForm(),o.a.createElement("div",{style:{position:"fixed",bottom:"16px",padding:"6px",backgroundColor:"rgba(0,0,0,.7)",left:"0",right:"0",display:"flex",alignItems:"center",justifyContent:"center",color:"yellow",fontWeight:"bold",fontSize:"18px",textTransform:"uppercase",zIndex:"9999999",pointerEvents:"none",letterSpacing:"4px"}},"Legacy Individual Activity Settings Form"))}}])&&HA(n.prototype,r),a&&HA(n,a),t}(a.Component);JA.propTypes={rubrics:M.a.array,activityData:M.a.object,canSave:M.a.bool,saveButtonTooltipLabel:M.a.string,isVideoToolEnabled:M.a.object,isDocumentToolEnabled:M.a.object,isMeetingToolEnabled:M.a.object,isAutoAnalysisScoreEnabled:M.a.object,onGradeTypeChange:M.a.func,onIsVideoToolEnabledChange:M.a.func,onIsDocumentToolEnabledChange:M.a.func,onIsMeetingToolEnabledChange:M.a.func,onIsAutoAnalysisScoreEnabledChange:M.a.func,onMainFormChange:M.a.func,onSubmit:M.a.func,onShowAdvanced:M.a.func,showAdvanced:M.a.bool,showClientErrors:M.a.bool,meetingToolError:M.a.string,serverErrors:M.a.any,i18n:M.a.object,isD2LFreemium:M.a.bool,mainFormState:M.a.object,disableEditing:M.a.bool,isEditingLocked:M.a.bool,isTopHatFreemium:M.a.bool,onKeyTermsChange:M.a.func,videoAnalysisKeyTerms:M.a.array,onKeyTermDelete:M.a.func.isRequired,onKeyTermAdd:M.a.func.isRequired,onKeyTermChange:M.a.func.isRequired};var ej=Object(x.withI18n)()(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),isTopHatFreemium:bb.x(e)}}))(JA));function tj(e){return(tj="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nj(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rj(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function aj(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){rj(o,r,a,i,c,"next",e)}function c(e){rj(o,r,a,i,c,"throw",e)}i(void 0)}))}}function oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lj(e,t,n[t])}))}return e}function ij(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cj(e){return(cj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sj(e,t){return(sj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dj=!1,fj={isSaveButtonEnabled:!0,saveButtonTooltipLabel:"",isVideoToolEnabled:{value:!0,disabled:!1,tooltip:""},isDocumentToolEnabled:{value:!0,disabled:!1},isMeetingToolEnabled:{value:!0,disabled:!1},isAutoAnalysisScoreEnabled:{value:dj,disabled:!1,tooltip:""},videoAnalysisKeyTerms:{value:[],disabled:!1},meetingToolError:"",showAdvanced:!1},pj="This field is required",mj="keyTerm_",bj=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=cj(t).call(this,e),n=!a||"object"!==tj(a)&&"function"!==typeof a?uj(r):a,lj(uj(uj(n)),"_isSubmitting",!1),lj(uj(uj(n)),"onShowAdvanced",(function(){var e=!n.state.showAdvanced;n.setState({showAdvanced:e})})),lj(uj(uj(n)),"checkForDuplicateKeyTerm",(function(e,t){for(var n=!1,r=e[t].term.trim().toLowerCase(),a=0;a<e.length;a++)if(a!==t&&e[a].term.trim().toLowerCase()===r){n=!0;break}return n})),lj(uj(uj(n)),"getTranslatedKeyTerms",(function(e){var t=[];if(e)for(var r=0;r<e.length;r++)t.push(oj({},e[r],{id:e[r].id||g.a.uniqueId(mj),isDuplicate:n.checkForDuplicateKeyTerm(e,r)}));return t})),lj(uj(uj(n)),"onVideoToolToggled",(function(){n.onIsVideoToolEnabledChange({value:!n.state.isVideoToolEnabled.value})})),lj(uj(uj(n)),"onIsVideoToolEnabledChange",(function(e){var t=g.a.merge({},n.state.isVideoToolEnabled,e);t.value||n.onIsAutoAnalysisScoreEnabledChange(!1),n.setState({isVideoToolEnabled:t},n.onChange)})),lj(uj(uj(n)),"onDocumentToolToggled",(function(){n.onIsDocumentToolEnabledChange({value:!n.state.isDocumentToolEnabled.value})})),lj(uj(uj(n)),"onIsDocumentToolEnabledChange",(function(e){var t=g.a.merge({},n.state.isDocumentToolEnabled,e);n.setState({isDocumentToolEnabled:t},n.onChange)})),lj(uj(uj(n)),"onMeetingToolToggled",(function(){n.onIsMeetingToolEnabledChange({value:!n.state.isMeetingToolEnabled.value})})),lj(uj(uj(n)),"onIsMeetingToolEnabledChange",(function(e){var t=g.a.merge({},n.state.isMeetingToolEnabled,e);n.setState({isMeetingToolEnabled:t},n.onChange)})),lj(uj(uj(n)),"onAutoAnalysisScoreToggled",(function(){n.onIsAutoAnalysisScoreEnabledChange({value:!n.state.isAutoAnalysisScoreEnabled.value})})),lj(uj(uj(n)),"onIsAutoAnalysisScoreEnabledChange",(function(e){var t=g.a.merge({},n.state.isAutoAnalysisScoreEnabled,e);n.setState({isAutoAnalysisScoreEnabled:t},n.onChange)})),lj(uj(uj(n)),"getRectifiedState",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=g.a.merge({},t,r);if(!g.a.isEmpty(e)){var o=e.gradeType.value===nc.a.AUTO_ANALYSIS;o&&(a=n.getUpdatedStateForAutoAnalysisGradeType(a,!0))}return a})),lj(uj(uj(n)),"onGradeTypeChange",(function(e,t){if(e!==t){var r=e===nc.a.AUTO_ANALYSIS,a=t===nc.a.AUTO_ANALYSIS;if(r||a){var o=n.getUpdatedStateForAutoAnalysisGradeType(n.state,r);n.setState(o)}}})),lj(uj(uj(n)),"getUpdatedStateForAutoAnalysisGradeType",(function(e,t){var r=n.props.i18n,a={};if(t){var o=r._(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE);a.isVideoToolEnabled=g.a.merge({},e.isVideoToolEnabled,{value:!0,disabled:!0,tooltip:r._("Video enabled ({optionNotEditableMessage})",{optionNotEditableMessage:o})}),a.isAutoAnalysisScoreEnabled=g.a.merge({},e.isAutoAnalysisScoreEnabled,{value:!0,disabled:!0,tooltip:o})}else a.isVideoToolEnabled=g.a.merge({},e.isVideoToolEnabled,{disabled:!1,tooltip:""}),a.isAutoAnalysisScoreEnabled=g.a.merge({},e.isAutoAnalysisScoreEnabled,{value:dj,disabled:!1,tooltip:""});return g.a.merge({},e,a)})),lj(uj(uj(n)),"onChange",(function(){n.props.onChange(n.getFormData())})),lj(uj(uj(n)),"onMainFormChange",(function(e,t){n.mainFormData=e,n.mainFormState=t;var r=n.getRectifiedState(t,n.state);n.setState(r,n.onChange)})),lj(uj(uj(n)),"getStateWithoutErrors",(function(){var e=g.a.merge({},n.state);return e.meetingToolError="",e})),lj(uj(uj(n)),"validate",(function(){var e=n.props.i18n,t=!0,r=n.getStateWithoutErrors(),a="";n.state.isMeetingToolEnabled.value||n.state.isDocumentToolEnabled.value||n.state.isVideoToolEnabled.value||(t=!1,r.meetingToolError=pj);var o=n.mainFormState.autoGradeScoreSource,i=n.state.videoAnalysisKeyTerms;o.value===hb.AUTO_ANALYSIS_CONTENT_SCORE&&g.a.isEmpty(i.value)&&(t=!1,a=e._("Key Terms must be configured when using the Auto Analysis\\u2122 Content Score for grading."));for(var c=0;c<i.value.length;c++){var s=i.value[c];if(0===s.term.trim().length||s.isDuplicate||!s.count||s.count<=0){t=!1,a=e._("Please fix issues in the Auto Analysis\\u2122, Key Terms section.");break}}return r.saveButtonTooltipLabel=a,r.isSaveButtonEnabled=t,n.setState(r),t})),lj(uj(uj(n)),"getFormData",(function(){for(var e=n.state,t=e.isVideoToolEnabled,r=e.isDocumentToolEnabled,a=e.isMeetingToolEnabled,o=e.isAutoAnalysisScoreEnabled,i=e.videoAnalysisKeyTerms,c=n.mainFormState.autoGradeScoreSource,s=n.validate(),u=[],l=0;l<i.value.length;l++){var d=i.value[l];u.push({term:d.term,count:d.count})}var f={autoGradeScoreSource:c.value,toolsets:{isVideoToolEnabled:t.value,isDocumentToolEnabled:r.value,isMeetingToolEnabled:a.value,isVideoAnalysisScoreEnabled:o.value,videoAnalysisKeyTerms:u}};return{isValid:s&&n.mainFormData.isValid,form:g.a.merge({},n.mainFormData.form,f)}})),lj(uj(uj(n)),"onSubmit",aj(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._isSubmitting=!0,e.next=3,n.props.onSubmit(n.getFormData());case 3:case"end":return e.stop()}}),e,this)})))),lj(uj(uj(n)),"getActivityData",(function(){var e=n.props,t=e.activityData,r=e.individualConfiguration;return r?r.activityData:t})),lj(uj(uj(n)),"getMainFormState",(function(){var e=n.props.individualConfiguration;return e?e.mainFormState:n.mainFormState})),lj(uj(uj(n)),"onKeyTermAdd",(function(e){var t=n.state.videoAnalysisKeyTerms;n.setState({videoAnalysisKeyTerms:oj({},t,{value:[{id:g.a.uniqueId(mj),term:e,count:1}].concat(nj(t.value))})},n.onChange)})),lj(uj(uj(n)),"onKeyTermChange",(function(e){for(var t=n.state.videoAnalysisKeyTerms,r=nj(t.value),a=0;a<r.length;a++)if(r[a].id===e.id){r[a]=oj({},e);break}n.setState({videoAnalysisKeyTerms:oj({},t,{value:nj(r)})},n.onChange)})),lj(uj(uj(n)),"onKeyTermDelete",(function(e){var t=n.state.videoAnalysisKeyTerms,r=t.value;n.setState({videoAnalysisKeyTerms:oj({},t,{value:g.a.remove(r,(function(t){return t.id!==e.id}))})},n.onChange)})),n.state=n.mapActivityDataToState(),n.mainFormData=null,n._isSubmitting=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sj(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){if(!this._isSubmitting){var e,t,n=this.props,r=n.dispatch,a=n.match,o=n.activityData;if(o&&+o.dbId!==+a.params.activityId)r(yI.f(null));else{var i=(e=this.getFormData().form,t=this.mainFormState,vI(e,t));r(yI.f({activityData:i,mainFormState:this.mainFormState,state:this.state}))}}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._isSubmitting=!1,e.isTopHatFreemium&&this.setState({isDocumentToolEnabled:{value:!1,disabled:!0},isMeetingToolEnabled:{value:!1,disabled:!0}})}},{key:"mapActivityDataToState",value:function(){var e=this.props,t=e.individualConfiguration,n=e.isD2LFreemium,r=g.a.merge({},fj),a=this.getActivityData();return t?oj({},r,t.state):a?(r.isVideoToolEnabled.value=a.isVideoToolEnabled,r.isDocumentToolEnabled.value=a.isDocumentToolEnabled,r.isMeetingToolEnabled.value=a.isMeetingToolEnabled,r.isAutoAnalysisScoreEnabled.value=a.isVideoAnalysisScoreEnabled,r.videoAnalysisKeyTerms.value=this.getTranslatedKeyTerms(a.videoAnalysisKeyTerms),this.props.disableEditing&&(r.isVideoToolEnabled.disabled=!0,r.isDocumentToolEnabled.disabled=!0,r.isMeetingToolEnabled.disabled=!0,r.isAutoAnalysisScoreEnabled.disabled=!0),this.props.isEditingLocked&&(r.isVideoToolEnabled.disabled=!0,r.isDocumentToolEnabled.disabled=!0,r.isMeetingToolEnabled.disabled=!0,r.isAutoAnalysisScoreEnabled.disabled=!0),this.getRectifiedState(this.mainFormState,this.state,r)):(n&&(r.isVideoToolEnabled.value=!0,r.isDocumentToolEnabled.value=!0,r.isMeetingToolEnabled.value=!1,r.isAutoAnalysisScoreEnabled.value=!1),r)}},{key:"render",value:function(){var e=this.state,t=e.isVideoToolEnabled,n=e.isDocumentToolEnabled,r=e.isMeetingToolEnabled,a=e.isAutoAnalysisScoreEnabled,i=e.showAdvanced,c=e.meetingToolError,s=e.videoAnalysisKeyTerms,u=this.state,l=u.isSaveButtonEnabled,d=u.saveButtonTooltipLabel,f=this.props,p=f.rubrics,m=f.serverErrors;return o.a.createElement(ej,{rubrics:p,canSave:l,saveButtonTooltipLabel:d,isVideoToolEnabled:t,isDocumentToolEnabled:n,isMeetingToolEnabled:r,isAutoAnalysisScoreEnabled:a,activityData:this.getActivityData(),mainFormState:this.getMainFormState(),showClientErrors:this.props.showClientErrors,showAdvanced:i,meetingToolError:c,disableEditing:this.props.disableEditing,isEditingLocked:this.props.isEditingLocked,serverErrors:m,onShowAdvanced:this.onShowAdvanced,onSubmit:this.onSubmit,onMainFormChange:this.onMainFormChange,onGradeTypeChange:this.onGradeTypeChange,onIsVideoToolEnabledChange:this.onVideoToolToggled,onIsDocumentToolEnabledChange:this.onDocumentToolToggled,onIsMeetingToolEnabledChange:this.onMeetingToolToggled,onIsAutoAnalysisScoreEnabledChange:this.onAutoAnalysisScoreToggled,onKeyTermAdd:this.onKeyTermAdd,onKeyTermChange:this.onKeyTermChange,onKeyTermDelete:this.onKeyTermDelete,videoAnalysisKeyTerms:this.getTranslatedKeyTerms(s.value)})}}])&&ij(n.prototype,r),a&&ij(n,a),t}(a.Component);bj.propTypes={dispatch:M.a.func,match:M.a.object,onChange:M.a.func,rubrics:M.a.array,activityData:M.a.object,onMainFormChange:M.a.func,onSubmit:M.a.func,onShowAdvanced:M.a.func,showAdvanced:M.a.bool,showClientErrors:M.a.bool,meetingToolError:M.a.string,serverErrors:M.a.any,i18n:M.a.object,isD2LFreemium:M.a.bool,mainFormState:M.a.object,disableEditing:M.a.bool,isEditingLocked:M.a.bool,individualConfiguration:M.a.object},bj.defaultProps={onChange:function(){},onSubmit:function(){},disableEditing:!1,isEditingLocked:!1};var yj=Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),isTopHatFreemium:bb.x(e),individualConfiguration:pI(e)}}))(Object(x.withI18n)()(bj)));function vj(e){return(vj="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gj(e,t){return!t||"object"!==vj(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ej(e){return(Ej=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wj(e,t){return(wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sj=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gj(this,Ej(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wj(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onSubmit,a=e.showClientErrors,i=e.serverErrors,c=e.i18n,s=e.disableEditing,u=e.isEditingLocked;return o.a.createElement(z.a,{title:c._("Configure Individual Assignment")},o.a.createElement(iO.a,null),o.a.createElement(mA,{activityData:n}),o.a.createElement(un.a,null,o.a.createElement(yj,{rubrics:t,onSubmit:r,showClientErrors:a,disableEditing:s,isEditingLocked:u,serverErrors:i,activityData:n})))}}])&&hj(n.prototype,r),a&&hj(n,a),t}(a.Component),Oj=Object(x.withI18n)()(Sj);function Cj(e){return(Cj="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jj(e,t,n[t])}))}return e}function Tj(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ij(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pj(e){return(Pj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rj(e,t){return(Rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Aj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kj=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Pj(t).call(this,e),n=!a||"object"!==Cj(a)&&"function"!==typeof a?Aj(r):a,jj(Aj(Aj(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match,o=r.history,i=r.dispatch,FT(),t.isValid){e.next=6;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 6:return e.next=8,sn.a.editIndividualProject(n.props.activityId,t.form).then((function(){t.form.lmsSync.ltiGradeIdentifier===jT.c()&&jT.a(),VT(),_A(n.props.activityId),i(yI.f(null)),i(kO.ab(null,OA.a.CONFIGURATION)),i(kO.Z(null));var e=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(_j({},a.params));o.push(e)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tj(o,r,a,i,c,"next",e)}function c(e){Tj(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rj(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.rubrics,r=e.disableEditing,a=e.isEditingLocked;return o.a.createElement(Oj,{rubrics:n,showClientErrors:this.state.showClientErrors,serverErrors:this.state.serverErrors,disableEditing:r,isEditingLocked:a,onSubmit:this.onSubmit,activityData:t})}}])&&Ij(n.prototype,r),a&&Ij(n,a),t}(a.Component);kj.propTypes={activityId:M.a.number.isRequired,activityData:M.a.object,rubrics:M.a.arrayOf(M.a.object)};var Nj=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(kj)),Dj="keyTerm_",Lj=100;function Mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xj(e,t,n[t])}))}return e}function xj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"mergeCustomizer",value:function(e,t){if(g.a.isArray(e))return t}},{key:"checkForDuplicateKeyTerm",value:function(e,t){for(var n=!1,r=e[t].term.trim().toLowerCase(),a=0;a<e.length;a++)if(a!==t&&e[a].term.trim().toLowerCase()===r){n=!0;break}return n}},{key:"getTranslatedKeyTerms",value:function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n],a=this.checkForDuplicateKeyTerm(e,n),o=g.a.trim(r.term).length>0&&r.count>0&&!a;t.push(Mj({},r,{id:r.id||g.a.uniqueId(Dj),isDuplicate:a,isValid:o}))}return t}},{key:"processStudentData",value:function(e){var t=!1,n=!1,r=!1;return e&&e.dataForAllStudents&&e.dataForAllStudents.forEach((function(e){e.educatorGrade&&(n=!0),e.reflectAnswers&&e.reflectAnswers.length>0&&(t=!0),e.rubricEvaluations&&e.rubricEvaluations.length&&e.rubricEvaluations.filter((function(e){return ar.f(e.user)})).length&&(r=!0)})),{hasReflectionAnswers:t,hasSubmissionEvaluation:n,hasPeerRubricEvaluation:r}}}],(n=null)&&Fj(t.prototype,n),r&&Fj(t,r),e}();function Gj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qj(e,t,n[t])}))}return e}function Uj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wj=Object(H.c)("activity-form"),Bj=function(){function e(t,n){var r=this,a=n.activityData,o=n.formCustomizations,i=n.isReadOnly,c=n.onChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qj(this,"form",{}),qj(this,"_onActivityFormChangeHandler",null),qj(this,"_applyExistingSettings",(function(e){Wj.debug("Applying existing settings from activityData",e);var t=g.a.keys(r.form);g.a.forEach(t,(function(t){var n=r.form[t];if(n.selectFieldName){var a=g.a.get(e,n.selectFieldName),o=a;g.a.isFunction(n.getFormSettingValue)&&(o=n.getFormSettingValue(a)),n.updateValue(o)}else if(g.a.isFunction(n.getFormSettingValue)){var i=n.getFormSettingValue(e);n.updateValue(i)}})),Wj.debug("activityData applied to form",r.form)})),qj(this,"_applyIntegrationSettings",(function(){var e=jT.b();e&&r.form.name.updateValue(e);var t=jT.c();t&&(r.form.integrationDeepLink.updateValue(!0),r.form.integrationDeepLinkId.updateValue(t),r.form.integrationDeepLinkGradeSync.updateValue(!0))})),qj(this,"_applyCustomizations",(function(e){var t=g.a.keys(e);g.a.forEach(t,(function(t){var n=e[t],a=r.form[t];a&&a.update(n)}))})),qj(this,"_createDefaultActivityForm",(function(e){var t={};return g.a.forEach(e,(function(e,n){var a=g.a.merge({},e,{key:n,onChange:r._onActivitySettingChange});t[n]=Qj(a)})),t})),qj(this,"_makeReadOnly",(function(){g.a.forEach(r.form,(function(e,t){var n=g.a.merge({},e,{disabledReasons:{isReadOnly:!0}});r.form[t]=Qj(n)}))})),qj(this,"_onActivitySettingChange",(function(e,t){Wj.debug("[".concat(e.key,"] _onActivitySettingChange"),e.value);var n=Gj({},r.form,qj({},e.key,e));r._onActivityFormChange(n),r._applyActivitySettingChangeSideEffects(e,t)})),qj(this,"_applyActivitySettingChangeSideEffects",(function(e,t){if(g.a.isFunction(e.getSideEffects)){var n=e.getSideEffects(e,t,r.form);Wj.debug("[".concat(e.key,"] _applyActivitySettingChangeSideEffects"),n),g.a.forEach(n,(function(e,t){var n=r.form[t];n&&n.update(e)}))}})),qj(this,"_onActivityFormChange",(function(e){Wj.debug("_onActivityFormChange",e),r.form=e,g.a.isFunction(r._onActivityFormChangeHandler)&&r._onActivityFormChangeHandler(r.form)})),qj(this,"setOnChangeHandler",(function(e){r._onActivityFormChangeHandler=e})),this.form=this._createDefaultActivityForm(t),this._applyIntegrationSettings(),o&&this._applyCustomizations(o),a&&this._applyExistingSettings(a),i&&this._makeReadOnly(),this.setOnChangeHandler(c)}var t,n,r;return t=e,(n=[{key:"getForm",value:function(){return this.form}},{key:"applyUpdates",value:function(e){e&&this._applyCustomizations(e)}}])&&Uj(t.prototype,n),r&&Uj(t,r),e}(),Qj=function e(t){if(!t||g.a.isEmpty(t))throw new Error("createActivitySetting requires a setting object");if(!t.key)throw new Error("createActivitySetting requires setting.key");if(!t.onChange||!g.a.isFunction(t.onChange))throw new Error("createActivitySetting requires setting.onChange function");var n=g.a.compact(g.a.values(t.disabledReasons)),r=Gj({},t,{value:g.a.get(t,"value",t.defaultValue),disabledReasons:g.a.get(t,"disabledReasons",{}),selectFieldName:g.a.get(t,"selectFieldName",t.key),inputFieldName:g.a.get(t,"inputFieldName",t.key),isEnabled:n.length<=0}),a=function(t,n){var r=e(t);return r.onChange(r,n),r},o=function(e){var t=g.a.mergeWith({},r,e,Vj.mergeCustomizer);return a(t,r)},i=function(e){var t=Gj({},r,e);return a(t,r)},c=function(e){return i({value:e})};return Gj({},r,{update:o,updateValue:function(e){return o({value:e})},set:i,setValue:c,useDefaultValue:function(){var e=g.a.get(r,"defaultValue",null);return c(e)},getSideEffects:function(e,t,n){if(g.a.isFunction(r.getSideEffects)){var a=r.getSideEffects(e,t,n);return g.a.isObject(a)?a:{}}return{}},toMutationInput:function(){var e=r.value;return g.a.isFunction(r.getMutationInputValue)&&(e=r.getMutationInputValue(r)),r.inputFieldName?g.a.set({},r.inputFieldName,e):e}})};function Yj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hj={activityScore:{selectFieldName:"cengageSettings.score",inputFieldName:"cengageSettings.score",defaultValue:null},countTowardsFinalGrade:{selectFieldName:"cengageSettings.countTowardsFinalGrade",inputFieldName:"cengageSettings.countTowardsFinalGrade",defaultValue:!0}},zj={name:{selectFieldName:"name",inputFieldName:"name",defaultValue:""},dueDate:{selectFieldName:"submitDueAt",inputFieldName:"submitDueAt",defaultValue:null,getMutationInputValue:function(e){return e.value?Er.d(e.value):void 0},getFormSettingValue:function(e){return e?Er.n(e):null}},gradeType:{selectFieldName:"gradeType",inputFieldName:"gradeType",defaultValue:nc.a.GRADE,getMutationInputValue:function(e){return e.value===nc.a.AUTO_ANALYSIS?nc.a.GRADE:e.value},getSideEffects:function(e,t,n){if(!(e.value!==t.value))return{};var r={},a=t.value===nc.a.RUBRIC;if(e.value===nc.a.RUBRIC)r.gradeRubric={disabledReasons:{gradeType:null}};else if(a){r.gradeRubric={value:null,disabledReasons:{gradeType:!0}},n.peerReviewEvaluationType.value===P_.RUBRIC&&(r.peerReviewEvaluationType={value:P_.NONE})}var o=t.value===nc.a.AUTO_ANALYSIS;if(e.value===nc.a.AUTO_ANALYSIS){var i=n.autoGradeScoreSource.value;n.autoGradeScoreSource.value&&n.autoGradeScoreSource.value!==hb.NONE||(i=hb.AUTO_ANALYSIS_OVERALL_SCORE),r.toolsetVideo={value:!0,disabledReasons:{isAutoAnalysisGradeType:!0}},r.autoAnalysis={value:!0,disabledReasons:{isAutoAnalysisGradeType:!0}},r.autoAnalysisScore={value:!0,disabledReasons:{isAutoAnalysisGradeType:!0}},r.autoGradeScoreSource={value:i,disabledReasons:{isAutoAnalysisGradeType:null}},r.peerReviewGrading={value:{enabled:!1},disabledReasons:{isAutoAnalysisGradeType:!0}}}else o&&(r.toolsetVideo={disabledReasons:{isAutoAnalysisGradeType:null}},r.autoAnalysis={value:!0,disabledReasons:{isAutoAnalysisGradeType:null}},r.autoAnalysisScore={value:!0,disabledReasons:{isAutoAnalysisGradeType:null}},r.autoGradeScoreSource={value:hb.NONE,disabledReasons:{isAutoAnalysisGradeType:!0}},r.peerReviewGrading={disabledReasons:{isAutoAnalysisGradeType:null}});return r}},gradeRubric:{selectFieldName:"rubric",inputFieldName:"rubric",defaultValue:null,getMutationInputValue:function(e){if(e.value)return e.value},getFormSettingValue:function(e){if(g.a.isNumber(e))return e;var t=g.a.get(e,"dbId",null);return g.a.isNumber(t)?t:null},getSideEffects:function(e){return e.value?{selfAssessment:{disabledReasons:{gradeRubric:null}}}:{selfAssessment:{value:!1,disabledReasons:{gradeRubric:!0}}}}},autoGradeScoreSource:{selectFieldName:"autoGradeScoreSource",inputFieldName:"autoGradeScoreSource",defaultValue:hb.NONE,getSideEffects:function(e){if(g.a.includes(vb,e.value))return{gradeType:{value:nc.a.AUTO_ANALYSIS}}}}},Kj={instructions:{selectFieldName:"instructionsText",inputFieldName:"instructions",defaultValue:{text:"",link:null},getMutationInputValue:function(e){return e.value.text},getFormSettingValue:function(e){return{text:e||"",link:$g.a(e)}}},instructionsMedia:{selectFieldName:"instructionsMedia",inputFieldName:"overviewMedia",defaultValue:null,getMutationInputValue:function(e){if(e.value&&g.a.isNumber(e.value.dbId))return e.value.dbId}},commentary:{selectFieldName:"commentaryText",inputFieldName:"commentaryText",defaultValue:""},commentaryMedia:{selectFieldName:"commentaryMedia",inputFieldName:"commentaryMedia",defaultValue:null,getMutationInputValue:function(e){if(e.value&&g.a.isNumber(e.value.dbId))return e.value.dbId}}},Xj={toolsetVideo:{selectFieldName:"isVideoToolEnabled",inputFieldName:"toolsets.isVideoToolEnabled",defaultValue:!0,getSideEffects:function(e,t){if(e.value!==t.value)return e.value?{autoAnalysis:{disabledReasons:{toolsetVideo:null}}}:{autoAnalysis:{value:!1,disabledReasons:{toolsetVideo:!0}}}}},toolsetDocument:{selectFieldName:"isDocumentToolEnabled",inputFieldName:"toolsets.isDocumentToolEnabled",defaultValue:!0},toolsetMeeting:{selectFieldName:"isMeetingToolEnabled",inputFieldName:"toolsets.isMeetingToolEnabled",defaultValue:!0},autoAnalysisScore:{selectFieldName:"isVideoAnalysisScoreEnabled",inputFieldName:"toolsets.isVideoAnalysisScoreEnabled",defaultValue:!0,getFormSettingValue:function(e){return Boolean(e)}},autoAnalysisKeyTerms:{selectFieldName:"videoAnalysisKeyTerms",inputFieldName:"toolsets.videoAnalysisKeyTerms",defaultValue:[],getMutationInputValue:function(e){for(var t=[],n=0;n<e.value.length;n++){var r=e.value[n];t.push({term:r.term,count:r.count})}return t},getFormSettingValue:function(e){return e||[]}}},$j={autoAnalysis:{selectFieldName:"autoAnalysisEnabled",inputFieldName:"autoAnalysisEnabled",defaultValue:!0,getMutationInputValue:function(e){return e.value?dy.a.ENABLED:dy.a.DISABLED},getFormSettingValue:function(e){return e===dy.a.ENABLED},getSideEffects:function(e,t){var n={};return e.value!==t.value&&(e.value?(n.autoAnalysisScore={disabledReasons:{autoAnalysis:null}},n.autoAnalysisKeyTerms={disabledReasons:{autoAnalysis:null}}):(n.autoAnalysisScore={disabledReasons:{autoAnalysis:!0}},n.autoAnalysisKeyTerms={disabledReasons:{autoAnalysis:!0}})),n}}},Zj={reflectionQuestions:{selectFieldName:"reflectStageSettings",inputFieldName:"reflectStageSettings",defaultValue:{enabled:!1,errors:{},isDirty:!1,isEditingLocked:!1,isEditingRestricted:!1,isValid:!0,questions:[]},getFormSettingValue:function(e){return{enabled:g.a.get(e,"reflectStageEnabled",!1),questions:g.a.get(e,"reflectQuestions",[])}},getMutationInputValue:function(e){var t=e.value,n=t.enabled,r=t.questions,a=[];return n&&(a=r.map((function(e,t){return g.a.merge({},g.a.pick(e,g.a.values(id.a.QUESTION)),{orderNumber:t})}))),{reflectStageEnabled:n,reflectQuestions:a}}}},Jj={peerReviewConcealedReviewer:{defaultValue:!1,selectFieldName:"isCommentingAnonymous",inputFieldName:"peerReview.isCommentingAnonymous"},peerReviewConcealedSubmitter:{defaultValue:!1,selectFieldName:"peerReviewSubmitterAnonymous",inputFieldName:"peerReview.peerReviewSubmitterAnonymous"},peerReviewAllowedPriorToSubmission:{defaultValue:!1,selectFieldName:"allowViewOthersResultsWithoutOwn",inputFieldName:"peerReview.allowViewOthersResultsWithoutOwn"},peerReviewMode:{defaultValue:pf.a.SYSTEM,selectFieldName:"peerReviewType",inputFieldName:"peerReview.peerReviewType",getSideEffects:function(e,t){var n={};return e.value!==t.value&&(e.value===pf.a.SYSTEM?n.peerReviewConcealedSubmitter={disabledReasons:{peerReviewMode:null}}:e.value===pf.a.STUDENT&&(n.peerReviewConcealedSubmitter={value:!1,disabledReasons:{peerReviewMode:!0}})),Boolean(e.value)!==Boolean(t.value)&&e.value&&(n.peerReviewRequiredReviews={value:3}),n}},peerReviewRequiredReviews:{defaultValue:3,selectFieldName:"peerReviewAmount",inputFieldName:"peerReview.peerReviewAmount",getMutationInputValue:function(e){return+e.value}},peerReviewEvaluationType:{defaultValue:P_.FIVE_STAR,selectFieldName:null,inputFieldName:"peerReview.quantitativeReviewType",getFormSettingValue:function(e){var t=P_.NONE,n=g.a.get(e,"studentFivestarValuationEnabled",!1),r=g.a.get(e,"rubricPeerAllowed",!1);return n?t=P_.FIVE_STAR:r&&(t=P_.RUBRIC),t}},peerReviewDueDate:{defaultValue:null,selectFieldName:"peerReviewDueAt",inputFieldName:"peerReview.peerReviewDueAt",getMutationInputValue:function(e){return e.value?Er.d(e.value):void 0},getFormSettingValue:function(e){return e?Er.n(e):null}}},ek={peerReviewGrading:{defaultValue:{enabled:!1,isEditingRestricted:!1,isValid:!0,weight:fy.c,tooltip:""},selectFieldName:null,inputFieldName:"peerReview",getMutationInputValue:function(e){var t,n=e.value,r=n.enabled,a=n.weight;return Yj(t={},fy.b.SETTINGS_ENABLED,r),Yj(t,fy.b.SETTINGS_WEIGHT,a),t},getFormSettingValue:function(e){return{enabled:g.a.get(e,fy.b.SETTINGS_ENABLED,!1),weight:g.a.get(e,fy.b.SETTINGS_WEIGHT,fy.c)}}}},tk={selfAssessment:{defaultValue:!1,disabledReasons:{gradeRubric:!0},selectFieldName:"rubricSelfAllowed",inputFieldName:"selfAssessment"}},nk={integrationDeepLink:{defaultValue:!1,selectFieldName:"ltiDeepLinking",inputFieldName:"lmsSync.deepLink"},integrationDeepLinkId:{defaultValue:"",selectFieldName:"ltiGradeIdentifier",inputFieldName:"lmsSync.ltiGradeIdentifier"},integrationDeepLinkGradeSync:{defaultValue:!1,selectFieldName:"ltiGradeSyncEnabled",inputFieldName:"lmsSync.gradeSync"}};!function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yj(e,t,n[t])}))}}({},zj,Kj,Xj,Zj,Jj,tk,nk,Hj);function rk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ak=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rk(e,t,n[t])}))}return e}({},zj,Kj,Xj,Jj,tk,nk,$j);function ok(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ik(e,t,n[t])}))}return e}function ik(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ck=function(e){var t=e.activityForm,n=e.institution,r=e.rubrics,a=e.canAutoGrade,i=e.canGradeType,c=t.name,s=t.dueDate,u=t.gradeType,l=t.gradeRubric,d=t.autoGradeScoreSource,f=t.activityScore,p=t.countTowardsFinalGrade,m={canAutoGrade:a,canGradeType:i,institution:n,rubrics:r,activityName:{value:c.value,disabled:!c.isEnabled},onActivityNameChange:c.updateValue,submitDueAt:{value:s.value,disabled:!s.isEnabled},onSubmitDueAtChange:s.updateValue,resetSubmitDueAt:function(){s.updateValue(null)},gradeType:{value:u.value,disabled:!u.isEnabled},onGradeTypeChange:u.updateValue,gradeRubric:{value:l.value,disabled:!l.isEnabled},onGradeRubricChange:l.updateValue,autoGradeScoreSource:{value:d.value,disabled:!d.isEnabled},onAutoGradeScoreSourceChange:d.updateValue};return f&&(m=ok({},m,{activityScore:{value:f.value,disabled:!f.isEnabled},onActivityScoreChange:f.updateValue})),p&&(m=ok({},m,{countTowardsFinalGrade:{value:p.value,disabled:!p.isEnabled},onCountTowardsFinalGradeChange:p.updateValue})),o.a.createElement(tC,m)},sk=function(e){var t=e.activityForm,n=e.showAdvanced,r=e.onAddOverviewMedia,a=e.onAddCommentaryMedia,i=t.instructions,c=t.instructionsMedia,s=t.commentary,u=t.commentaryMedia,l={showAdvanced:n,instructions:{value:i.value.text,link:i.value.link,disabled:!i.isEnabled},onInstructionsChange:function(e){var t={link:$g.a(e),text:e};i.updateValue(t)},overviewVideo:c.value,onAddOverviewMedia:r,onSetOverviewVideo:c.updateValue,commentaryText:{value:s.value,disabled:!s.isEnabled},onCommentaryTextChange:s.updateValue,commentaryMedia:u.value,onAddCommentaryMedia:a,onSetCommentaryMedia:u.updateValue};return o.a.createElement(h_,l)};function uk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lk(e,t,n[t])}))}return e}function lk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dk=function(e){var t=e.activityForm.reflectionQuestions,n={settings:uk({},t.value,{isEditingLocked:!t.isEnabled}),onChange:t.setValue};return o.a.createElement(QC,n)};function fk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pk(e,t,n[t])}))}return e}function pk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mk=function(e){var t=e.canGradedPeerReview,n=e.canPeerReview,r=e.showAdvanced,a=e.peerReviewEvaluationTypes,i=e.peerReviewTooltipLabel,c=e.peerReviewGradingTooltipLabel,s=e.hasSubmissionEvaluation,u=e.activityForm,l=u.gradeType,d=u.peerReviewMode,f=u.peerReviewConcealedReviewer,p=u.peerReviewConcealedSubmitter,m=u.peerReviewAllowedPriorToSubmission,b=u.peerReviewRequiredReviews,y=u.peerReviewEvaluationType,v=u.peerReviewGrading,h=u.peerReviewDueDate,g={enablePeerReview:n,canGradedPeerReview:t,hasGradedSubmission:s,tooltipLabel:i,showAdvanced:r,peerReview:{value:Boolean(d.value),disabled:!d.isEnabled},onPeerReviewChange:function(e){e?d.useDefaultValue():d.updateValue(null)},peerReviewType:{value:d.value,disabled:!d.isEnabled},onPeerReviewTypeChange:d.updateValue,isCommentingAnonymous:{value:f.value,disabled:!f.isEnabled},onIsCommentingAnonymousChange:f.updateValue,isPeerRevieweeAnonymous:{value:p.value,disabled:!p.isEnabled},onIsPeerRevieweeAnonymousChange:p.updateValue,allowViewOthersResultsWithoutOwn:{value:m.value,disabled:!m.isEnabled},onAllowViewOthersResultsWithoutOwnChange:m.updateValue,peerReviewAmount:{value:b.value,disabled:!b.isEnabled},onPeerReviewAmountChange:b.updateValue,quantitativeReviewTypes:a,quantitativeReviewType:{value:y.value,disabled:!y.isEnabled},onQuantitativeReviewTypeChange:y.updateValue,peerReviewDueAt:{value:h.value,disabled:!h.isEnabled},onPeerReviewDueAtChange:h.updateValue,resetPeerReviewDueAt:function(){h.updateValue(null)},gradeType:{value:l.value}};return t&&(g=fk({},g,{gradedPeerReviewSettings:fk({},v.value,{isEditingRestricted:!v.isEnabled,tooltip:c}),onGradedPeerReviewChange:v.setValue})),o.a.createElement(dC,g)},bk=function(e){var t=e.activityForm.selfAssessment,n={selfAssessment:{value:t.value,disabled:!t.isEnabled},onSelfAssessmentChange:t.updateValue};return o.a.createElement(gC,n)},yk=function(e){var t=e.activityForm,n=e.showAdvanced,r=t.integrationDeepLink,a=t.integrationDeepLinkId,i=t.integrationDeepLinkGradeSync,c={showAdvanced:n,deepLink:{value:r.value,disabled:!r.isEnabled},onDeepLinkChange:r.updateValue,ltiGradeIdentifier:{value:a.value,disabled:!a.isEnabled},onLtiGradeIdentifierChange:a.updateValue,gradeSync:{value:i.value,disabled:!i.isEnabled},onGradeSyncChange:i.updateValue};return o.a.createElement(t_,c)};n("QvYj");function vk(e){return(vk="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ok(e,t,n[t])}))}return e}function gk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ek(e){return(Ek=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wk(e,t){return(wk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ok(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ck=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Ek(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==vk(a)&&"function"!==typeof a?Sk(r):a,Ok(Sk(Sk(n)),"onDelete",(function(){var e=n.props,t=e.keyTerm;(0,e.onDelete)(t)})),Ok(Sk(Sk(n)),"onTermChanged",(function(e){var t=n.props,r=t.keyTerm;(0,t.onChange)(hk({},r,{term:e}))})),Ok(Sk(Sk(n)),"onCountChanged",(function(e){var t=n.props,r=t.keyTerm,a=t.onChange,o=e?parseInt(e):e;if(o>Lj)return!1;a(hk({},r,{count:o}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wk(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.countError,n=e.enabled,r=e.keyTerm,a=e.i18n,i=e.showHeader,c=e.termError;return o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term"},o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-container"},o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-input"},i&&o.a.createElement("span",{className:"activity-auto-analysis-desired-key-term-input-label"},a._("Word or Phrase")),o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-term-input[".concat(r.id,"]"),ariaLabel:c?a._("Word or Phrase is required"):a._("Word or Phrase"),onChange:this.onTermChanged,enabled:n,error:Boolean(c),value:r.term})),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-count"},i&&o.a.createElement("span",{className:"activity-auto-analysis-desired-key-term-input-label"},a._("Occurrences")),o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-term-count[".concat(r.id,"]"),ariaLabel:t?a._("Count of word or phrases must be a number greater than zero"):a._("Count of word or phrase"),type:"number",enabled:n,error:Boolean(t),onChange:this.onCountChanged,value:r.count})),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-term-item-actions"},o.a.createElement(Ue.c,{id:"activity-auto-analysis-desired-key-term-delete[".concat(r.id,"]"),ariaLabel:a._("Delete key term"),enabled:n,onClick:this.onDelete},Je.a.DELETE))),(c||t)&&o.a.createElement("div",{className:"activity-auto-analysis-key-term-validation-container"},o.a.createElement(zt.a,{className:"activity-auto-analysis-key-term-validation-icon"},Je.a.ERROR),o.a.createElement("div",{className:"activity-auto-analysis-key-term-validation-msg-container"},c&&o.a.createElement("span",{className:"activity-auto-analysis-key-term-validation-msg"},c),t&&o.a.createElement("span",{className:"activity-auto-analysis-key-term-validation-msg"},t))))}}])&&gk(n.prototype,r),a&&gk(n,a),t}(o.a.PureComponent);Ck.propTypes={countError:M.a.string,termError:M.a.string,keyTerm:M.a.object.isRequired,onDelete:M.a.func.isRequired,onChange:M.a.func.isRequired,showHeader:M.a.bool,enabled:M.a.bool},Ck.defaultProps={countError:"",termError:"",showHeader:!1,enabled:!0};var _k=Object(x.withI18n)()(Ck);n("tS7S");function Tk(e){return(Tk="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Nk(e,t,n[t])}))}return e}function Pk(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ak(e){return(Ak=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jk(e,t){return(jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dk={newKeyTerm:null},Lk=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ak(t).call(this,e),n=!a||"object"!==Tk(a)&&"function"!==typeof a?kk(r):a,Nk(kk(kk(n)),"getTooltipLabel",(function(){var e=n.props.i18n,t=gr.a.getAutoAnalysisPermission(),r="";return t.isRestricted&&(r=e._(t.restrictedMessage)),r})),Nk(kk(kk(n)),"addNewKeyTerm",(function(){var e=n.props.keyTerms,t=n.state.newKeyTerm,r=g.a.trim(t),a=[{id:g.a.uniqueId(Dj),term:r,count:1}].concat(Pk(e));n.onChange(a),n.setState({newKeyTerm:null})})),Nk(kk(kk(n)),"onNewKeyTermChange",(function(e){n.setState({newKeyTerm:e})})),Nk(kk(kk(n)),"onNewKeyTermSubmit",(function(){n.addNewKeyTerm()})),Nk(kk(kk(n)),"onKeyTermChange",(function(e){var t=n.props.keyTerms,r=g.a.map(t,(function(t){return t.id===e.id?Ik({},e):t}));n.onChange(r)})),Nk(kk(kk(n)),"onKeyTermDelete",(function(e){var t=n.props.keyTerms,r=g.a.map(t,(function(t){return t.id===e.id?null:t}));n.onChange(r)})),Nk(kk(kk(n)),"onChange",(function(e){var t=n.props.onChange,r=g.a.compact(e);t(r=Vj.getTranslatedKeyTerms(r))})),Nk(kk(kk(n)),"renderKeyTermsWarning",(function(){var e=n.props,t=e.i18n;if(e.showRecalculationWarning){var r=t._("Any changes to Key Terms will recalculate Auto Analysis\\u2122 scores");return o.a.createElement(X.a,{className:"activity-auto-analysis-key-terms-note",type:X.a.NOTE_TYPES.WARNING,message:r})}return null})),Nk(kk(kk(n)),"renderKeyTermsActions",(function(){var e=n.props,t=e.i18n,r=e.isEditable,a=n.state.newKeyTerm,i=n.getTooltipLabel(),c=Boolean(a&&a.trim().length>0&&r);return o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms-actions"},o.a.createElement(ut.i,{id:"activity-auto-analysis-desired-key-terms-actions-input",className:"activity-auto-analysis-desired-key-terms-actions-input",ariaLabel:t._("Enter new key term"),enabled:r,onChange:n.onNewKeyTermChange,placeholder:t._("New key term"),tooltip:{label:i},value:a,onSubmit:n.onNewKeyTermSubmit,onSubmitKeystroke:{modifiers:[],keyCode:gs.a.ENTER}}),o.a.createElement(Ue.f,{id:"activity-auto-analysis-key-terms-create-button",ariaLabel:t._("Add new key term"),primary:!0,enabled:c,tooltip:{label:i},onClick:n.addNewKeyTerm},t._("Add")))})),Nk(kk(kk(n)),"renderKeyTerms",(function(){var e=n.props,t=e.i18n,r=e.isEditable,a=e.keyTerms;return g.a.map(a,(function(e,a){var i="",c="";return 0===e.term.trim().length?i=t._("Field is required."):e.isDuplicate&&(i=t._("Duplicate key terms are not allowed.")),(!e.count||e.count<=0||e.count>Lj)&&(c=t._("Count must be between 1 and {0}.",{0:Lj})),o.a.createElement(_k,{key:"activity-auto-analysis-desired-key-term[".concat(e.id,"]"),keyTerm:e,countError:c,termError:i,onChange:n.onKeyTermChange,onDelete:n.onKeyTermDelete,showHeader:0===a,enabled:r})}))})),n.state=Ik({},Dk),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jk(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-key-terms-container",className:"activity-auto-analysis-key-terms-container"},o.a.createElement("div",{className:"activity-auto-analysis-key-terms-header"},o.a.createElement("p",{className:"activity-auto-analysis-key-terms-header-msg"},e._("Entering key terms will add a content portion to Auto Analysis reports. For each key word or phrase, enter the desired occurrence of the term. Do not enter plurals, they will be automatically grouped into the singular form. These terms can be updated later and the reports will be updated accordingly.")),this.renderKeyTermsWarning()),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms-contents"},this.renderKeyTermsActions(),o.a.createElement("div",{className:"activity-auto-analysis-desired-key-terms"},this.renderKeyTerms())))}}])&&Rk(n.prototype,r),a&&Rk(n,a),t}(o.a.PureComponent);Lk.defaultProps={isEditable:!0,keyTerms:[],showRecalculationWarning:!1},Lk.propTypes={isEditable:M.a.bool,keyTerms:M.a.array,onChange:M.a.func.isRequired,showRecalculationWarning:M.a.bool,i18n:M.a.object.isRequired};var Mk=Object(x.withI18n)()(Lk);n("fIC4");function xk(e){return(xk="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vk(e){return(Vk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gk(e,t){return(Gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wk={keyTerms:[],isValid:!0},Bk=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Vk(t).call(this,e),n=!a||"object"!==xk(a)&&"function"!==typeof a?Uk(r):a,qk(Uk(Uk(n)),"onKeyTermsChange",(function(e){var t=!0;g.a.forEach(e,(function(e){if(!e.isValid)return t=!1,!1})),n.setState({keyTerms:e,isValid:t})})),qk(Uk(Uk(n)),"onSaveClick",(function(){(0,n.props.onSave)(n.state.keyTerms),n.close()})),qk(Uk(Uk(n)),"close",(function(){Hn.a.closeModal()}));var o=e.activityForm.autoAnalysisKeyTerms,i=Vj.getTranslatedKeyTerms(o.value);return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qk(e,t,n[t])}))}return e}({},Wk,{keyTerms:i}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gk(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.activityForm,r=e.hasSubmissionEvaluation,a=n.autoAnalysisKeyTerms,i=n.autoGradeScoreSource,c=this.state,s=c.keyTerms,u=c.isValid,l=r&&g.a.includes([hb.AUTO_ANALYSIS_OVERALL_SCORE,hb.AUTO_ANALYSIS_CONTENT_SCORE],i.value),d=t._("Auto Analysis\\u2122 Key Terms"),f=t._("Ok"),p=[o.a.createElement(Ue.f,{primary:!0,id:"auto-analysis-key-terms-dialog-save",key:"auto-analysis-key-terms-dialog-save",enabled:u,ariaLabel:f,onClick:this.onSaveClick},f)];return o.a.createElement(gc.a,{id:"auto-analysis-key-terms-dialog",dialogClassName:"auto-analysis-key-terms-dialog",contentClassName:"auto-analysis-key-terms-dialog-content",title:d,footerActions:p,onHide:this.close},o.a.createElement("div",{className:"auto-analysis-key-terms-dialog-content-container"},o.a.createElement(Mk,{showRecalculationWarning:l,isEditable:a.isEnabled,onChange:this.onKeyTermsChange,keyTerms:s})))}}])&&Fk(n.prototype,r),a&&Fk(n,a),t}(o.a.PureComponent);Bk.defaultProps={hasSubmissionEvaluation:!1},Bk.propTypes={activityForm:M.a.object.isRequired,hasSubmissionEvaluation:M.a.bool,onSave:M.a.func.isRequired,i18n:M.a.object.isRequired};var Qk=Object(x.withI18n)()(Bk);n("6Swy");function Yk(e){return(Yk="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zk(e){return(zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kk(e,t){return(Kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zk=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=zk(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Yk(a)&&"function"!==typeof a?Xk(r):a,$k(Xk(Xk(n)),"onKeyTermsDialogSave",(function(e){n.props.activityForm.autoAnalysisKeyTerms.updateValue(e)})),$k(Xk(Xk(n)),"onConfigureKeyTermsClick",(function(){var e=n.props,t=e.activityForm,r=e.hasSubmissionEvaluation,a=o.a.createElement(Qk,{activityForm:t,hasSubmissionEvaluation:r,onSave:n.onKeyTermsDialogSave});Hn.a.showModal(a)})),$k(Xk(Xk(n)),"getKeyTermCount",(function(){var e=n.props.activityForm.autoAnalysisKeyTerms;return e.value?e.value.length:0})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kk(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n,t=e._("Configure Key Terms"),n="",r=this.getKeyTermCount();return r&&(n=e._({id:"{keyTermCount, plural, one {{keyTermCount} term defined} other {{keyTermCount} terms defined}}",values:{keyTermCount:r}})),o.a.createElement(Ue.a,{primary:!0,id:"auto-analysis-key-terms-configure",className:"auto-analysis-key-terms-configure",ariaLabel:t,onClick:this.onConfigureKeyTermsClick},o.a.createElement("div",{className:"auto-analysis-key-terms-configure-label-primary"},o.a.createElement(zt.a,{className:"auto-analysis-key-terms-configure-icon"},Je.a.SETTINGS),t),o.a.createElement("div",{className:"auto-analysis-key-terms-configure-label-secondary"},n))}}])&&Hk(n.prototype,r),a&&Hk(n,a),t}(o.a.PureComponent);Zk.defaultProps={hasSubmissionEvaluation:!1},Zk.propTypes={activityForm:M.a.object.isRequired,hasSubmissionEvaluation:M.a.bool,i18n:M.a.object.isRequired};var Jk=Object(x.withI18n)()(Zk);n("MKu0");function eN(e){return(eN="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nN(e){return(nN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rN(e,t){return(rN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iN={newKeyTerm:null},cN=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nN(t).call(this,e),n=!a||"object"!==eN(a)&&"function"!==typeof a?aN(r):a,oN(aN(aN(n)),"getTooltipLabel",(function(){var e=n.props,t=e.i18n,r=e.activityForm.toolsetVideo,a=gr.a.getAutoAnalysisPermission(),o="";return a.isRestricted?o=t._(a.restrictedMessage):r.value||(o=t._("This option is only applicable if video has been enabled in the Toolset")),o})),oN(aN(aN(n)),"renderScoreSettings",(function(){var e=n.props,t=e.i18n,r=e.activityForm.autoAnalysisScore,a=n.getTooltipLabel(),i=t._("Enabling this option will provide scores for each metric.");return r.disabledReasons.isAutoAnalysisGradeType?i=t._(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE):a&&(i=a),o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-scores"},o.a.createElement(GO.a,{id:"individual-assignment-toolset-auto-analysis-scores-checkbox",name:"individual-assignment-toolset-auto-analysis-scores-checkbox",checked:r.value,enabled:r.isEnabled,label:t._("Provide Scores for Auto Analysis\\u2122"),onChange:r.updateValue,tooltip:{label:i}}))})),oN(aN(aN(n)),"renderSubSettings",(function(){var e=n.props,t=e.activityForm,r=e.hasSubmissionEvaluation;return t.autoAnalysis.value?o.a.createElement("div",{id:"individual-assignment-toolset-auto-analysis-contents"},n.renderScoreSettings(),o.a.createElement(Jk,{activityForm:t,hasSubmissionEvaluation:r})):null})),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oN(e,t,n[t])}))}return e}({},iN),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rN(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.activityForm.autoAnalysis,r="";return r=n.disabledReasons.isAutoAnalysisGradeType?t._(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE):this.getTooltipLabel(),o.a.createElement("div",{className:"activity-auto-analysis-container"},o.a.createElement("div",{className:"activity-auto-analysis-header"},o.a.createElement("h2",{className:"section-header"},t._("Auto Analysis\\u2122")),o.a.createElement(nC.a,{id:"activity-auto-analysis-toggle",className:"activity-auto-analysis-toggle",label:"",ariaLabel:t._("Enable/Disable Auto Analysis\\u2122"),name:"activity-auto-analysis-toggle",onChange:n.updateValue,enabled:n.isEnabled,checked:n.value,tooltip:{label:r}})),o.a.createElement("p",null,t._("Auto Analysis\\u2122 is a tool that will automatically transcribe video submissions and provide a report of key metrics on the learner's delivery.")),this.renderSubSettings())}}])&&tN(n.prototype,r),a&&tN(n,a),t}(o.a.PureComponent);cN.defaultProps={hasSubmissionEvaluation:!1},cN.propTypes={activityForm:M.a.object.isRequired,hasSubmissionEvaluation:M.a.bool,i18n:M.a.object.isRequired};var sN=Object(x.withI18n)()(cN),uN=(n("3Hpt"),function(e,t,n){var r=g.a.get(e,"disabledReasons",{});return r.isFreemium?e.value?"".concat(t," (").concat(qf.a.FREEMIUM_CONFIG_NOT_EDITABLE_OPTION,")"):"".concat(n," (").concat(qf.a.FREEMIUM_CONFIG_OPTION,")"):r.isAutoAnalysisGradeType?e.value?"".concat(t," (").concat(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE,")"):"".concat(n," (").concat(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE,")"):e.value?t:n}),lN=function(e){var t=e.i18n,n=e.activityForm,r=n.toolsetVideo,a=n.toolsetDocument,i=n.toolsetMeeting,c=uN(r,t._("Video enabled"),t._("Video disabled")),s=uN(a,t._("Documents enabled"),t._("Documents disabled")),u=uN(i,t._("Meetings enabled"),t._("Meetings disabled"));return o.a.createElement("div",null,o.a.createElement("h2",{className:"section-header"},t._("Toolset")),o.a.createElement("div",{className:"activity-toolset-container"},o.a.createElement("div",{className:"activity-toolset-primary"},o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-video",enabled:r.isEnabled,isToggle:!0,onClick:function(){r.updateValue(!r.value)},checked:r.value,tooltip:{label:c},ariaLabel:c},Je.a.VIDEOCAM),o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-document",enabled:a.isEnabled,isToggle:!0,iconClassName:vr.a.FILE,onClick:function(){a.updateValue(!a.value)},checked:a.value,tooltip:{label:s},ariaLabel:s}),o.a.createElement(Ue.b,{secondary:!0,id:"individual-assignment-toolset-meeting",enabled:i.isEnabled,isToggle:!0,iconClassName:vr.a.CALENDAR,onClick:function(){i.updateValue(!i.value)},checked:i.value,tooltip:{label:u},ariaLabel:u}))))};lN.propTypes={activityForm:M.a.object.isRequired,i18n:M.a.object.isRequired};var dN=Object(x.withI18n)()(lN);n("F+kV");function fN(e){return(fN="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mN(e){return(mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bN(e,t){return(bN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hN=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=mN(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==fN(a)&&"function"!==typeof a?yN(r):a,vN(yN(yN(n)),"renderHeader",(function(){return gr.a.isPremiumUpgradeMessageVisible()?o.a.createElement(g_,null):null})),vN(yN(yN(n)),"renderErrors",(function(){var e=n.props,t=e.i18n,r=e.serverErrors,a=r&&g.a.values(r);return o.a.createElement(o.a.Fragment,null,a&&a.length>0&&o.a.createElement("ul",{className:"u-pb-20px"},a.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},o.a.createElement("p",null,e))}))),a&&0===a.length&&o.a.createElement("p",{className:"u-error"},t._("Something went wrong. Please try again")))})),vN(yN(yN(n)),"renderFooter",(function(){var e=n.props.i18n,t=n.props,r=t.isValid,a=t.isSaving,i=t.isReadOnly,c=t.validationErrors,s=n.props,u=s.showAdvanced,l=s.onShowAdvanced,d=s.onSubmit,f=r&&!a&&!i,p=u?e._("Hide Advanced"):e._("Show Advanced"),m=a?e._("Saving..."):e._("Save"),b=r?"":e._("All required fields must be completed and valid before saving");return g.a.isEmpty(c)||(b=c[0]),o.a.createElement("div",{className:"settings-form-actions"},o.a.createElement(Ue.f,{id:"button-assignment-settings-save",primary:!0,ariaLabel:m,enabled:f,tooltip:{label:b},onClick:d,className:"settings-form-save-button"},m),o.a.createElement(Ue.a,{id:"button-assignment-settings-advanced",secondary:!0,ariaLabel:p,className:"settings-form-advanced-button",onClick:l},p))})),vN(yN(yN(n)),"renderSettings",(function(){return o.a.createElement(o.a.Fragment,null,n.renderBasicSettings(),n.renderInstructionsSettings(),n.renderToolsetSettings(),n.renderAutoAnalysisSettings(),o.a.createElement("div",{className:"settings-form-advanced-container"},n.renderReflectionQuestionSettings(),n.renderPeerReviewSettings(),n.renderSelfAssessmentSettings(),n.renderDeepLinkSettings()))})),vN(yN(yN(n)),"renderBasicSettings",(function(){var e=n.props,t=e.activityForm,r=e.institution,a=e.rubrics,i=n.props,c={activityForm:t,institution:r,rubrics:a,canAutoGrade:i.canAutoGrade,canGradeType:i.canGradeType};return o.a.createElement(ck,c)})),vN(yN(yN(n)),"renderInstructionsSettings",(function(){var e=n.props,t=e.activityForm,r=e.showAdvanced,a=n.props,i={showAdvanced:r,activityForm:t,onAddOverviewMedia:a.onAddOverviewMedia,onAddCommentaryMedia:a.onAddCommentaryMedia};return o.a.createElement(sk,i)})),vN(yN(yN(n)),"renderToolsetSettings",(function(){var e=n.props,t=e.activityForm;if(!e.showAdvanced)return null;var r={activityForm:t};return o.a.createElement(dN,r)})),vN(yN(yN(n)),"renderAutoAnalysisSettings",(function(){var e=n.props,t={activityForm:e.activityForm,hasSubmissionEvaluation:e.hasSubmissionEvaluation};return o.a.createElement(sN,t)})),vN(yN(yN(n)),"renderReflectionQuestionSettings",(function(){var e=n.props,t=e.showAdvanced,r=e.canReflectionQuestions,a=e.activityForm;if(!t)return null;if(!r)return null;var i={activityForm:a};return o.a.createElement(dk,i)})),vN(yN(yN(n)),"renderPeerReviewSettings",(function(){var e=n.props,t=e.i18n,r=e.activityForm,a=n.props,i=a.canGradedPeerReview,c=a.canPeerReview,s=n.props,u=s.showAdvanced,l=s.hasSubmissionEvaluation,d=r.gradeType,f=d.value===nc.a.RUBRIC,p=[{label:t._("None"),value:P_.NONE,itemProps:{id:"peer-review-evaluation-type-option-none"}},{label:t._("Five Star"),value:P_.FIVE_STAR,itemProps:{id:"peer-review-evaluation-type-option-rating"}},{label:t._("Assignment Rubric"),value:P_.RUBRIC,itemProps:{id:"peer-review-evaluation-type-option-rubric"},disabled:!f}],m="";d.value===nc.a.AUTO_ANALYSIS&&(m=t._(qf.a.AUTO_ANALYSIS_CONFIG_OPTION_NOT_EDITABLE));var b={activityForm:r,canGradedPeerReview:i,canPeerReview:c,showAdvanced:u,peerReviewEvaluationTypes:p,peerReviewTooltipLabel:c?"":t._(qf.a.FREEMIUM_CONFIG_OPTION),peerReviewGradingTooltipLabel:m,hasSubmissionEvaluation:l};return o.a.createElement(mk,b)})),vN(yN(yN(n)),"renderSelfAssessmentSettings",(function(){var e=n.props,t=e.showAdvanced,r=e.activityForm;if(!t)return null;var a={activityForm:r};return o.a.createElement(bk,a)})),vN(yN(yN(n)),"renderDeepLinkSettings",(function(){var e=n.props,t=e.showAdvanced,r=e.activityForm;if(!t)return null;if(!gr.a.isDeepLinkingEnabled())return null;var a={activityForm:r,showAdvanced:t};return o.a.createElement(yk,a)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bN(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:Ie()("activity-settings-form")},this.renderHeader(),this.renderSettings(),this.renderErrors(),this.renderFooter())}}])&&pN(n.prototype,r),a&&pN(n,a),t}(a.Component);hN.defaultProps={canAutoGrade:!1,canGradedPeerReview:!1,canGradeType:!0,canReflectionQuestions:!1,showAdvanced:!1,isSaveButtonEnabled:!0,isSaving:!1,isReadOnly:!1,isValid:!1,validationErrors:[]},hN.propTypes={activityForm:M.a.object.isRequired,rubrics:M.a.array,institution:M.a.object.isRequired,hasSubmissionEvaluation:M.a.bool,canAutoGrade:M.a.bool,canGradedPeerReview:M.a.bool,canGradeType:M.a.bool,canReflectionQuestions:M.a.bool,isSaveButtonEnabled:M.a.bool,isSaving:M.a.bool,isReadOnly:M.a.bool,isValid:M.a.bool,showAdvanced:M.a.bool,validationErrors:M.a.array,serverErrors:M.a.any,onAddOverviewMedia:M.a.func,onAddCommentaryMedia:M.a.func,onShowAdvanced:M.a.func.isRequired,onSubmit:M.a.func.isRequired,i18n:M.a.object};var gN=Object(x.withI18n)()(hN);function EN(e){return(EN="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function SN(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ON(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){SN(o,r,a,i,c,"next",e)}function c(e){SN(o,r,a,i,c,"throw",e)}i(void 0)}))}}function CN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){RN(e,t,n[t])}))}return e}function _N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TN(e){return(TN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IN(e,t){return(IN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AN={isSaving:!1,isValid:!0,isFormDirty:!1,validationErrors:[],showAdvanced:!1,activityId:null,hasReflectionAnswers:!1,hasSubmissionEvaluation:!1,hasPeerRubricEvaluation:!1,activityForm:{}},jN=function(e){function t(e){var n,r,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=TN(t).call(this,e),n=!a||"object"!==EN(a)&&"function"!==typeof a?PN(r):a,RN(PN(PN(n)),"_isSubmitting",!1),RN(PN(PN(n)),"_activityForm",null),RN(PN(PN(n)),"onBeforeUnload",(function(e){var t=n.props.i18n,r=n.state,a=r.isFormDirty,o=r.isSaving;if(!a||o)return null;var i=t._("Are you sure you want to leave this page? Changes you made may not be saved.");return e.returnValue=i,i})),RN(PN(PN(n)),"onFormChange",(function(e){xT(),n.setState({activityForm:e,isFormDirty:!0}),n.validate(e)})),RN(PN(PN(n)),"validate",(function(e){var t=n.processActivityForm(e);n.setState(t)})),RN(PN(PN(n)),"processActivityForm",(function(e){var t=n.props,r=t.i18n,a=t.institution,o=t.rubrics,i=e.name,c=e.gradeType,s=e.instructions,u=e.reflectionQuestions,l=e.peerReviewMode,d=e.peerReviewGrading,f=e.activityScore,p=e.gradeRubric,m={isValid:!0,validationErrors:[]};i.value||(m.isValid=!1,m.validationErrors.push(r._("Please enter an Assignment Name"))),c.value===nc.a.RUBRIC&&(null!==o?(!p.value||g.a.findIndex(o,["dbId",+p.value])<0)&&(m.isValid=!1,m.validationErrors.push(r._("Please select a Rubric"))):m.isValid=!1),s.value.text||(m.isValid=!1,m.validationErrors.push(r._("Please enter Instructions"))),gr.a.isReflectionQuestionsAllowed()&&(u.value.isValid||(m.isValid=!1,m.validationErrors.push(r._("Please fix issues in the Reflection Questions section")))),l.value&&gr.a.isGradedPeerReviewAllowed()&&d.value.enabled&&!d.value.isValid&&(m.isValid=!1,m.validationErrors.push(r._("Please fix issues in the Peer Review section"))),Object(yb.a)(a)&&f&&(f.value<0||!f.value)&&(m.isValid=!1,m.validationErrors.push(r._("Please enter a valid Activity Score")));var b=e.toolsetVideo,y=e.toolsetDocument,v=e.toolsetMeeting;b.value||y.value||v.value||(m.isValid=!1,m.validationErrors.push(r._("Please enabled at least 1 toolset option (Video, Documents or Meetings)")));var h=e.autoAnalysisKeyTerms;e.autoGradeScoreSource.value===hb.AUTO_ANALYSIS_CONTENT_SCORE&&g.a.isEmpty(h.value)&&(m.isValid=!1,m.validationErrors.push(r._("Key Terms must be configured when using the Auto Analysis\\u2122 Content Score for grading")));for(var E=0;E<h.value.length;E++){var w=h.value[E];(0===w.term.trim().length||w.isDuplicate||!w.count||w.count<=0)&&(m.isValid=!1,m.validationErrors.push(r._("Please fix issues in the Auto Analysis\\u2122, Key Terms section")))}return m})),RN(PN(PN(n)),"getFormInput",(function(){var e=n.state,t=e.activityForm,r=e.isValid,a={};return g.a.forEach(t,(function(e){a=g.a.merge({},a,e.toMutationInput())})),{isValid:r,form:CN({},a)}})),RN(PN(PN(n)),"onSubmit",ON(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.onSubmit,n._isSubmitting=!0,n.setState({isSaving:!0}),e.next=5,t(n.getFormInput());case 5:n._isSubmitting=!1,n.setState({isSaving:!1,isFormDirty:!1});case 7:case"end":return e.stop()}}),e,this)})))),RN(PN(PN(n)),"onShowAdvanced",(function(){var e=n.state.showAdvanced;n.setState({showAdvanced:!e})})),RN(PN(PN(n)),"onAddOverviewMedia",(function(){var e=n.state.activityForm.instructionsMedia,t=n.props.match.params,r=t.activityId,a=t.classId;Hn.a.showModal(o.a.createElement("div",{id:"activity-config-instructions-add-video-dialog"},o.a.createElement(AT,{activityId:+r,termClassId:+a,onComplete:function(t){var n=wN(t,1)[0];e.updateValue(n)}})))})),RN(PN(PN(n)),"onAddCommentaryMedia",(function(){var e=n.state.activityForm.commentaryMedia,t=n.props.match.params,r=t.activityId,a=t.classId;Hn.a.showModal(o.a.createElement("div",{id:"activity-config-post-instructions-add-video-dialog"},o.a.createElement(AT,{activityId:+r,termClassId:+a,onComplete:function(t){var n=wN(t,1)[0];e.updateValue(n)}})))})),e.individualConfiguration){var i=e.individualConfiguration,c=i.state,s=i.activityForm;n._activityForm=s,n._activityForm.setOnChangeHandler(n.onFormChange),n.state=CN({},c)}else{var u=g.a.get(e.activityData,"dbId",null),l=n.createActivitySettingsConfig(e),d=Vj.processStudentData(e.activityData),f=n.getFormCustomizations(e,d);n._activityForm=new Bj(l,{activityData:e.activityData,isReadOnly:e.isReadOnly,formCustomizations:f,onChange:n.onFormChange}),n.state=CN({},AN,d,{activityForm:n._activityForm.getForm(),activityId:u})}return n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IN(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onBeforeUnload);var e=this.state.activityForm;this.validate(e)}},{key:"componentDidUpdate",value:function(e,t,n){if(this.props.isTopHatFreemium&&!e.isTopHatFreemium){var r=this.getTopHatFreemiumCustomizations(this.props);this._activityForm.applyUpdates(r)}if(this.props.rubrics!==e.rubrics){var a=this.state.activityForm;this.validate(a)}}},{key:"componentWillUnmount",value:function(){if(window.removeEventListener("beforeunload",this.onBeforeUnload),!this._isSubmitting){var e=this.props,t=e.dispatch,n=e.match,r=this.state.activityId;if(r&&+r!==+n.params.activityId)t(yI.f(null));else{var a={activityForm:this._activityForm,state:this.state};t(yI.f(a))}}}},{key:"createActivitySettingsConfig",value:function(e){var t=e.institution,n=CN({},ak);return Object(yb.a)(t)&&(n=g.a.merge({},n,Hj)),gr.a.isGradedPeerReviewAllowed()&&(n=g.a.merge({},n,ek)),gr.a.isReflectionQuestionsAllowed()&&(n=g.a.merge({},n,Zj)),n}},{key:"getFormCustomizations",value:function(e,t){var n=CN({},this.getIntegrationCustomizations(e),this.getCustomizationsBasedOnStudentData(t));return gr.a.getAutoAnalysisPermission().isRestricted&&(n=g.a.merge({},n,{autoAnalysisScore:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysisKeyTerms:{value:!1,disabledReasons:{isFreemium:!0}}})),n}},{key:"getIntegrationCustomizations",value:function(e){var t={},n=gr.a.getDefaultPeerReviewType();return t.peerReviewMode={value:n,defaultValue:n},t=g.a.merge({},t,this.getD2LCustomizations(e)),t=g.a.merge({},t,this.getTopHatCustomizations(e)),t=g.a.merge({},t,this.getCengageCustomizations(e))}},{key:"getD2LCustomizations",value:function(e){return e.isD2LFreemium?this.getD2LFreemiumCustomizations(e):{}}},{key:"getD2LFreemiumCustomizations",value:function(e){return{toolsetVideo:{value:!0,disabledReasons:{isFreemium:!0}},toolsetDocument:{value:!0,disabledReasons:{isFreemium:!0}},toolsetMeeting:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysis:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysisScore:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysisKeyTerms:{value:!1,disabledReasons:{isFreemium:!0}}}}},{key:"getTopHatCustomizations",value:function(e){return e.isTopHatFreemium?this.getTopHatFreemiumCustomizations(e):{}}},{key:"getTopHatFreemiumCustomizations",value:function(e){return{toolsetDocument:{value:!1,disabledReasons:{isFreemium:!0}},toolsetMeeting:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysis:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysisScore:{value:!1,disabledReasons:{isFreemium:!0}},autoAnalysisKeyTerms:{value:!1,disabledReasons:{isFreemium:!0}}}}},{key:"getCengageCustomizations",value:function(e){return e.isEditingLimited?this.getCengageLimitedEditingCustomizations(e):{}}},{key:"getCengageLimitedEditingCustomizations",value:function(e){return{name:{disabledReasons:{isEditingLimited:!0}},instructions:{disabledReasons:{isEditingLimited:!0}},commentary:{disabledReasons:{isEditingLimited:!0}},reflectionQuestions:{disabledReasons:{isEditingLimited:!0}},toolsetVideo:{disabledReasons:{isEditingLimited:!0}},toolsetDocument:{disabledReasons:{isEditingLimited:!0}},toolsetMeeting:{disabledReasons:{isEditingLimited:!0}}}}},{key:"getCustomizationsBasedOnStudentData",value:function(e){var t={};return e.hasSubmissionEvaluation&&(t.gradeType={disabledReasons:{hasSubmissionEvaluation:!0}},t.gradeRubric={disabledReasons:{hasSubmissionEvaluation:!0}},t.autoGradeScoreSource={disabledReasons:{hasSubmissionEvaluation:!0}},t.peerReviewGrading={disabledReasons:{hasSubmissionEvaluation:!0}}),e.hasPeerRubricEvaluation&&(t.gradeRubric={disabledReasons:{hasPeerRubricEvaluation:!0}}),e.hasReflectionAnswers&&(t.reflectionQuestions={value:{isEditingRestricted:!0}}),t}},{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.institution,r=e.serverErrors,a=e.showClientErrors,i=this.props.isReadOnly,c=this.state,s=c.activityForm,u=c.hasSubmissionEvaluation,l=this.state,d=l.showAdvanced,f=l.isSaving,p=this.state,m=p.isValid,b=p.validationErrors;return o.a.createElement(gN,{activityForm:s,rubrics:t,canAutoGrade:gr.a.isAutoGradingAllowed(),canGradedPeerReview:gr.a.isGradedPeerReviewAllowed(),canPeerReview:gr.a.isPeerReviewEnabled(),canReflectionQuestions:gr.a.isReflectionQuestionsAllowed(),isSaving:f,isValid:m,isReadOnly:i,validationErrors:b,showClientErrors:a,showAdvanced:d,serverErrors:r,institution:n,hasSubmissionEvaluation:u,onShowAdvanced:this.onShowAdvanced,onSubmit:this.onSubmit,onAddCommentaryMedia:this.onAddCommentaryMedia,onAddOverviewMedia:this.onAddOverviewMedia})}}])&&_N(n.prototype,r),a&&_N(n,a),t}(o.a.PureComponent);jN.defaultProps={isReadOnly:!1,isEditingLimited:!1,serverErrors:null,showClientErrors:!1},jN.propTypes={activityData:M.a.object,isReadOnly:M.a.bool,isEditingLimited:M.a.bool,onSubmit:M.a.func.isRequired,rubrics:M.a.array,serverErrors:M.a.any,showClientErrors:M.a.bool,individualConfiguration:M.a.object,institution:M.a.object,isD2LFreemium:M.a.bool,isTopHatFreemium:M.a.bool,i18n:M.a.object,match:M.a.object,dispatch:M.a.func};var kN=Object(s.a)(Object(c.b)((function(e){return{individualConfiguration:pI(e),institution:bb.h(e),isD2LFreemium:bb.s(e),isTopHatFreemium:bb.x(e)}}))(Object(x.withI18n)()(jN)));function NN(e){return(NN="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){GN(e,t,n[t])}))}return e}function LN(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function MN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xN(e){return(xN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FN(e,t){return(FN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UN=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=xN(t).call(this,e),n=!a||"object"!==NN(a)&&"function"!==typeof a?VN(r):a,GN(VN(VN(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match,o=r.history,i=r.dispatch,c=n.props.activityId,FT(),t.isValid){e.next=7;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 7:return e.next=9,sn.a.editIndividualProject(c,t.form).then((function(){t.form.lmsSync.ltiGradeIdentifier===jT.c()&&jT.a(),VT(),_A(c),i(yI.f(null)),i(kO.ab(null,OA.a.CONFIGURATION)),i(kO.Z(null));var e=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(DN({},a.params));o.push(e)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 9:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){LN(o,r,a,i,c,"next",e)}function c(e){LN(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FN(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n,t=this.props,n=t.rubrics,r=t.activityData,a=t.isReadOnly,i=t.isEditingLimited,c=this.state,s=c.showClientErrors,u=c.serverErrors;return o.a.createElement(z.a,{title:e._("Configure Individual Assignment")},o.a.createElement(mA,{activityData:r}),o.a.createElement(un.a,null,o.a.createElement(kN,{activityData:r,rubrics:n,showClientErrors:s,serverErrors:u,isReadOnly:a,isEditingLimited:i,onSubmit:this.onSubmit})))}}])&&MN(n.prototype,r),a&&MN(n,a),t}(a.Component);UN.propTypes={activityId:M.a.number.isRequired,activityData:M.a.object,rubrics:M.a.array,isEditingLimited:M.a.bool,isReadOnly:M.a.bool,dispatch:M.a.func.isRequired,match:M.a.object.isRequired,history:M.a.object.isRequired,i18n:M.a.object.isRequired};var qN=Object(s.a)(Object(c.b)()(Object(x.withI18n)()(UN)));n("dCfD");function WN(e){return(WN="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QN(e){return(QN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YN(e,t){return(YN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KN=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=QN(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==WN(a)&&"function"!==typeof a?HN(r):a,zN(HN(HN(n)),"onFieldChange",(function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zN(e,t,n[t])}))}return e}({},n.props.option,zN({isDirty:!0},e,t));n.props.onChange(r)})),zN(HN(HN(n)),"onDelete",(function(){n.props.onDelete(n.props.option)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YN(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.option,a=t.isEditingRestricted,i=t.disableEditing,c=!r.isNew||r.isDirty;return o.a.createElement("div",{className:"interactive-video-answer-option"},o.a.createElement(ut.d,{id:"interactive-video-answer-option-radio_"+r.dbId,className:"interactive-video-answer-option-radio",ariaLabel:n._("Set Correct Answer"),checked:r[BE.b.OPTION.IS_CORRECT],enabled:c&&!a,name:BE.b.OPTION.IS_CORRECT,onChange:function(t,n){e.onFieldChange(BE.b.OPTION.IS_CORRECT,!0,n)},tooltip:{label:n._("Set this option as the correct answer")}}),o.a.createElement(ut.i,{id:"interactive-video-answer-option-text",className:"interactive-video-answer-option-text",ariaLabel:n._("Edit Answer Option Text"),maxLength:BE.g,maxRows:1,onChange:function(t,n){e.onFieldChange(BE.b.OPTION.TEXT,g.a.trimStart(t),n)},placeholder:r.isNew?n._("New option..."):"",rows:1,required:!r.isNew||r.isDirty,value:String(r[BE.b.OPTION.TEXT]),enabled:!i}),o.a.createElement(qE.c,{id:"interactive-video-answer-option-correct-icon",className:Ie()("interactive-video-answer-option-correct-icon",!c&&"interactive-video-answer-option-correct-icon--hidden"),type:r[BE.b.OPTION.IS_CORRECT]?qE.a:qE.b}),o.a.createElement(ut.i,{id:"interactive-video-answer-option-feedback",className:"interactive-video-answer-option-feedback",ariaLabel:n._("Edit Answer Feedback Text"),enabled:!i&&c,maxLength:BE.e,maxRows:1,onChange:function(t,n){e.onFieldChange(BE.b.OPTION.DESCRIPTION,g.a.trimStart(t),n)},placeholder:c?n._("Feedback Text"):"",rows:1,value:r[BE.b.OPTION.DESCRIPTION]}),o.a.createElement(Ue.c,{id:"button-interactive-video-question-option-delete",ariaLabel:n._("Delete Answer Option"),enabled:c&&!a,onClick:this.onDelete},Je.a.DELETE))}}])&&BN(n.prototype,r),a&&BN(n,a),t}(a.Component);KN.propTypes={isEditingRestricted:M.a.bool,onChange:M.a.func.isRequired,onDelete:M.a.func.isRequired,option:M.a.object.isRequired},KN.defaultProps={isEditingRestricted:!1};var XN=Object(x.withI18n)()(KN);n("5sx6");function $N(e){return($N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZN(){return(ZN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function JN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tD(e,t){return(tD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aD=/^(\d*)(:?)(\d{0,2})$/,oD=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=eD(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==$N(a)&&"function"!==typeof a?nD(r):a,rD(nD(nD(n)),"state",{isFocused:!1,tmpValue:""}),rD(nD(nD(n)),"getTimeInSecondsFromString",(function(e){if(!e)return 0;var t,n,r=aD.exec(e);r&&r.length>0?r[2]&&r[2].length>0?(t=r[1],n=r[3]):n=r[1]:(t=0,n=0);return 60*(t+=Math.floor(n/60))+(n%=60)})),rD(nD(nD(n)),"onChange",(function(e,t){if(aD.test(e)){var r,a;n.setState({tmpValue:e});var o=aD.exec(e);if(o&&!(o.length<4)){var i;Boolean(o[2]&&o[2].length>0)?(r=+o[1],a=+o[3]):(r=0,a=+o[1]),i=60*(r+=Math.floor(a/60))+(a%=60),n.props.onChange&&n.props.onChange(i,t)}}})),rD(nD(nD(n)),"onFocus",(function(){n.setState({isFocused:!0,tmpValue:Er.k(+n.props.value)})})),rD(nD(nD(n)),"onBlur",(function(){n.setState({isFocused:!1,tmpValue:n.getValue(n.props.value)})})),rD(nD(nD(n)),"getValue",(function(){var e=n.props,t=e.value,r=e.valueLabel,a=n.state,o=a.isFocused,i=a.tmpValue;return r||(o?i:Er.k(+t))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tD(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props;return o.a.createElement(ut.i,ZN({},function(e){return g.a.pick(e,Object.keys(oD.componentProps))}(e),{className:Ie()("input-time",e.className),floating:this.state.isFocused,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,value:this.getValue()}))}}])&&JN(n.prototype,r),a&&JN(n,a),t}(a.Component);oD.componentProps={ariaLabel:M.a.string,className:M.a.string,enabled:M.a.bool,onBlur:M.a.func,onChange:M.a.func,onFocus:M.a.func,id:M.a.string,label:M.a.string,maxRows:M.a.number,placeholder:M.a.string,required:M.a.bool,rows:M.a.number,style:M.a.object,value:M.a.string,valueLabel:M.a.string},oD.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rD(e,t,n[t])}))}return e}({},oD.componentProps,{tooltip:M.a.any}),oD.defaultProps={enabled:!0,maxRows:1,rows:1,value:0};var iD=Object(Ec.c)(oD);function cD(e){return(cD="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sD(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function uD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){bD(e,t,n[t])}))}return e}function lD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dD(e,t,n){return(dD="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fD(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function fD(e){return(fD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pD(e,t){return(pD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yD="interactive-video-questions-dialog",vD={value:BE.n,label:"mc",itemProps:{id:"question-type-option-multiple-choice"}},hD={value:BE.o,label:"video",itemProps:{id:"question-type-option-video"}},gD=[vD,hD],ED={errors:{},isDirty:!1,isValid:!0,isEndTimeSelected:!1,question:BE.m},wD=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=fD(t).call(this,e),n=!a||"object"!==cD(a)&&"function"!==typeof a?mD(r):a,bD(mD(mD(n)),"onQuestionTextChange",(function(e){e=g.a.trimStart(e),n.setState({isDirty:!0,question:uD({},n.state.question,bD({},BE.b.QUESTION.TEXT,e))})})),bD(mD(mD(n)),"onTypeChange",(function(e){n.setState({isDirty:!0,question:uD({},n.state.question,{type:e})})})),bD(mD(mD(n)),"onTimeChange",(function(e){n.setState({isDirty:!0,question:uD({},n.state.question,bD({},BE.b.QUESTION.SHOW_TIME,e))})})),bD(mD(mD(n)),"onSave",(function(e){var t=n.state.question;n.props.onSave(t,e)})),bD(mD(mD(n)),"onCancel",(function(e){n.setState(uD({},ED)),n.props.onCancel(e)})),bD(mD(mD(n)),"onOptionChange",(function(e){for(var t=[],r=!1,a=0;a<n.state.question[BE.b.QUESTION.OPTIONS].length;a++){var o=n.state.question[BE.b.QUESTION.OPTIONS][a];o.dbId===e.dbId?(t.push(e),r=!0):e[BE.b.OPTION.IS_CORRECT]&&o[BE.b.OPTION.IS_CORRECT]?t.push(uD({},o,bD({},BE.b.OPTION.IS_CORRECT,!1))):t.push(o)}!r&&e.isNew&&t.push(e),n.setState({isDirty:!0,question:uD({},n.state.question,bD({},BE.b.QUESTION.OPTIONS,t))})})),bD(mD(mD(n)),"onOptionDelete",(function(e){var t=sD(n.state.question[BE.b.QUESTION.OPTIONS]),r=g.a.findIndex(t,["dbId",e.dbId]);t.splice(r,1),n.setState({isDirty:!0,question:uD({},n.state.question,bD({},BE.b.QUESTION.OPTIONS,t))})})),bD(mD(mD(n)),"onEndTimeClick",(function(){var e=n.props.videoDuration;n.state.isEndTimeSelected?n.setState({isDirty:!0,isEndTimeSelected:!1,question:uD({},n.state.question,bD({},BE.b.QUESTION.SHOW_TIME,0))}):n.setState({isDirty:!0,isEndTimeSelected:!0,question:uD({},n.state.question,bD({},BE.b.QUESTION.SHOW_TIME,Math.floor(e)+1))})})),bD(mD(mD(n)),"getMultipleChoiceOption",(function(e){var t=n.props,r=t.isEditingRestricted,a=t.disableEditing;return o.a.createElement(XN,{disableEditing:a,key:yD+"-option_"+e.dbId,isEditingRestricted:r,option:e,onChange:n.onOptionChange,onDelete:n.onOptionDelete})})),bD(mD(mD(n)),"getMultipleChoiceOptions",(function(e){for(var t=n.props,r=t.i18n,a=t.isEditingRestricted,i=[],c=0;c<e[BE.b.QUESTION.OPTIONS].length;c++){var s=e[BE.b.QUESTION.OPTIONS][c];i.push(n.getMultipleChoiceOption(s))}if(i.length<BE.f&&!a){var u,l=uD({},BE.l,(bD(u={},BE.b.OPTION.IS_CORRECT,0===i.length),bD(u,"dbId",BE.p()),u));i.push(n.getMultipleChoiceOption(l))}return o.a.createElement("div",{className:yD+"-answers-container"},o.a.createElement("div",{className:yD+"-answers-header"},o.a.createElement("h4",null,r._("Multiple Choice Options")),o.a.createElement("i",null,r._("(maximum of {0})",{0:BE.f}))),o.a.createElement("div",{className:yD+"-answers-list"},i))})),bD(mD(mD(n)),"getErrorsList",(function(){var e=n.state,t=e.errors;if(e.isValid)return null;for(var r=[],a=Object.values(t),i=0;i<a.length;i++)r.push(o.a.createElement("h5",{key:yD+"-errors_"+i},a[i]));return o.a.createElement("div",{className:yD+"-validation-container"},o.a.createElement(zt.a,{className:yD+"-validation-icon"},Je.a.ERROR),o.a.createElement("div",{className:yD+"-validation-errors"},r))})),bD(mD(mD(n)),"process",(function(e,t){var r=n.props,a=r.i18n,o=r.videoDuration,i=t.question,c=t.isEndTimeSelected,s={errors:{},isValid:!1};i[BE.b.QUESTION.TEXT]||(s.errors[yD+"-text"]=a._("Enter text for the question.")),i[BE.b.QUESTION.TEXT].length>BE.i&&(s.errors[yD+"-text-length"]=a._("Question text cannot exceed {0} characters.",{0:BE.i}));var u=i[BE.b.QUESTION.SHOW_TIME];if(!c&&u>o&&(s.errors[yD+"-time"]=a._("The time entered exceeds the video duration.")),i.type===BE.n){(!i[BE.b.QUESTION.OPTIONS]||i[BE.b.QUESTION.OPTIONS].length<BE.j)&&(s.errors[yD+"-options"]=a._("Enter at least {0} multiple choice options for this question.",{0:BE.j}));for(var l=!1,d=0;d<i[BE.b.QUESTION.OPTIONS].length;d++){var f=i[BE.b.QUESTION.OPTIONS][d];f[BE.b.OPTION.TEXT]||(s.errors[yD+"-option-text"]=a._("All multiple choice options must have text.")),f[BE.b.OPTION.TEXT].length>BE.g&&(s.errors[yD+"-text"]=a._("Option text cannot exceed {0} characters.",{0:BE.g})),f[BE.b.OPTION.DESCRIPTION]&&f[BE.b.OPTION.DESCRIPTION].length>BE.e&&(s.errors[yD+"-feedback"]=a._("Feedback text cannot exceed {0} characters.",{0:BE.e})),l=l||f[BE.b.OPTION.IS_CORRECT]}l||(s.errors[yD+"-correct"]=a._("Mark an option as the correct answer."))}return s.isValid=0===Object.keys(s.errors).length,s})),bD(mD(mD(n)),"getShowTimeValue",(function(){return n.state.isEndTimeSelected?"":String(n.state.question[BE.b.QUESTION.SHOW_TIME])}));var i=e.i18n;return vD.label=i._({id:"Multiple Choice"}),hD.label=i._({id:"Video Response"}),n.state=uD({},ED,{question:g.a.merge({},e.question),isEndTimeSelected:e.question[BE.b.QUESTION.SHOW_TIME]>e.videoDuration}),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pD(e,t)}(t,e),n=t,(r=[{key:"setState",value:function(e,n){var r=this;dD(fD(t.prototype),"setState",this).call(this,e,(function(){r.validate(r.props,r.state,n)}))}},{key:"validate",value:function(e,n,r){var a=this.process(e,n);dD(fD(t.prototype),"setState",this).call(this,a,r)}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isVisible,r=e.title,a=e.isEditingRestricted,i=e.disableEditing,c=this.state,s=c.isDirty,u=c.isValid,l=c.isEndTimeSelected;return o.a.createElement(Fr.a,{id:yD,contentClassName:yD+"-content",dialogClassName:yD,title:r,visible:n,actions:[o.a.createElement(Ue.a,{id:"button-interactive-video-question-dialog-cancel",secondary:!0,ariaLabel:t._("Cancel"),onClick:this.onCancel},t._("Cancel")),o.a.createElement(Ue.a,{id:"button-interactive-video-question-dialog-ok",primary:!0,ariaLabel:t._("OK"),enabled:s&&u&&!i,onClick:this.onSave},t._("OK"))]},o.a.createElement("div",{className:yD+"-content-form"},o.a.createElement("div",{className:yD+"-top"},o.a.createElement("div",{className:yD+"-left"},o.a.createElement(ut.e,{id:yD+"-question-type",className:yD+"-question-type",ariaLabel:t._("Question Type"),enabled:!a,label:t._("Question Type"),menuItems:gD,onChange:this.onTypeChange,value:this.state.question.type}),o.a.createElement(ut.i,{id:yD+"-question-text",value:String(this.state.question[BE.b.QUESTION.TEXT]),enabled:!i,ariaLabel:t._("Edit Question Text"),label:t._("Question"),maxLength:BE.i,maxRows:4,onChange:this.onQuestionTextChange,required:!0,rows:1})),o.a.createElement("div",{className:yD+"-right"},o.a.createElement("div",{className:yD+"-time-container"},o.a.createElement(iD,{id:yD+"-time",className:yD+"-time",enabled:!l&&!a,value:this.getShowTimeValue(),valueLabel:l?t._("(end of video)"):"",ariaLabel:t._("Prompt at time within video"),label:t._("Prompt At"),onChange:this.onTimeChange,required:!0}),!a&&o.a.createElement(da.a,{id:yD+"-time-set",className:yD+"-time-set",onClick:this.onEndTimeClick},o.a.createElement("a",null,l?t._("Set Custom Time"):t._("Set At End")))))),this.state.question.type===BE.n&&this.getMultipleChoiceOptions(this.state.question)),this.getErrorsList())}}])&&lD(n.prototype,r),a&&lD(n,a),t}(a.Component);wD.propTypes={isEditingRestricted:M.a.bool,isVisible:M.a.bool,videoDuration:M.a.number,onCancel:M.a.func.isRequired,onSave:M.a.func.isRequired,title:M.a.string.isRequired,question:M.a.object},wD.defaultProps={isEditingRestricted:!1,isVisible:!1,videoDuration:0,question:BE.m};var SD=Object(x.withI18n)()(wD);n("gZ03");function OD(e){return(OD="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){AD(e,t,n[t])}))}return e}function _D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function TD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ID(e){return(ID=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PD(e,t){return(PD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jD="interactive-video-question-item",kD=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ID(t).call(this,e),n=!a||"object"!==OD(a)&&"function"!==typeof a?RD(r):a,AD(RD(RD(n)),"getFormattedTime",(function(e){return Er.k(+e)})),AD(RD(RD(n)),"getQuestionMenuActions",(function(e){var t=n.props,r=t.i18n,a=t.isEditingRestricted,i=[];return i.push({primaryText:r._("Edit"),onClick:function(t){n.onEditQuestion(e,t)},leftIcon:o.a.createElement(zt.a,{ariaLabel:r._("Edit, icon")},Je.a.EDIT)}),a||i.push({primaryText:r._("Delete"),onClick:function(t){n.onDeleteQuestion(e,t)},leftIcon:o.a.createElement(zt.a,{ariaLabel:r._("Delete, icon")},Je.a.DELETE)}),i})),AD(RD(RD(n)),"getQuestionWeightInfo",(function(e){var t=n.props.i18n;return n.isVideoType(e)?{isAuto:!0,value:t._("(auto)")}:{isAuto:!1,value:String(e[BE.b.QUESTION.WEIGHT])}})),AD(RD(RD(n)),"getShowTimeLabel",(function(e){var t=n.props,r=t.videoDuration,a=t.i18n,o=e[BE.b.QUESTION.SHOW_TIME];return o>0&&o>=r?a._("(end)"):n.getFormattedTime(o)})),AD(RD(RD(n)),"isVideoType",(function(e){return e.type===BE.o})),AD(RD(RD(n)),"getQuestion",(function(e,t,r,a,i){var c=n.props,s=c.i18n,u=c.errors,l=c.isEditingRestricted,d=n.getQuestionWeightInfo(e);return o.a.createElement("div",{key:jD+"_"+e.dbId,className:jD},o.a.createElement(Ue.a,{id:"button-interactive-video-question-time["+i+"]",primary:!0,className:jD+"--time",onClick:function(t){n.onQuestionTimeClick(e,t)}},n.getShowTimeLabel(e)),o.a.createElement("div",{className:jD+"--type"},o.a.createElement(zt.a,{tooltip:{label:n.isVideoType(e)?s._("Video Response"):s._("Multiple Choice")}},n.isVideoType(e)?Je.a.VIDEOCAM:Je.a.SPEAKER_NOTES)),t&&o.a.createElement("div",{className:jD+"--position"},o.a.createElement(Ue.c,{id:"button-interactive-video-question-position-up",className:jD+"--position-up",enabled:!r&&!l,forceIconFontSize:!0,forceIconSize:24,onClick:function(t){n.onQuestionPositionChange(e,-1,t)}},Je.a.ARROW_UP),o.a.createElement(Ue.c,{id:"button-interactive-video-question-position-down",className:jD+"--position-down",enabled:!a&&!l,forceIconFontSize:!0,forceIconSize:24,onClick:function(t){n.onQuestionPositionChange(e,1,t)}},Je.a.ARROW_DOWN)),o.a.createElement("div",{className:Ie()(jD+"--text",t&&jD+"--text-with-position")},e[BE.b.QUESTION.TEXT]),o.a.createElement("div",{className:jD+"--weight"},o.a.createElement(ut.c,{id:jD+"-weight_"+e.dbId,enabled:!d.isAuto&&!l,error:Boolean(u[jD+"-weight_"+e.dbId]),isAuto:d.isAuto,onChange:function(t,r){n.onWeightChange(e,t,r)},value:d.value})),o.a.createElement("div",{className:jD+"--actions"},o.a.createElement(Ue.e,{icon:!0,id:jD+"-actions_"+e.dbId,ariaLabel:s._("Comment options"),menuItems:n.getQuestionMenuActions(e)},Je.a.MENU_VERT)))})),AD(RD(RD(n)),"getQuestions",(function(){for(var e=n.props.questions,t=[],r=!1,a=0;e&&a<e.length;a++){var o=e[a],i=a>0?e[a-1]:null,c=i&&i[BE.b.QUESTION.SHOW_TIME]===o[BE.b.QUESTION.SHOW_TIME],s=a+1<e.length?e[a+1]:null,u=s&&s[BE.b.QUESTION.SHOW_TIME]===o[BE.b.QUESTION.SHOW_TIME];r=c||u,t.push(n.getQuestion(o,r,!c,!u,a))}return t})),AD(RD(RD(n)),"getQuestionDialog",(function(){var e=n.props,t=e.i18n,r=e.videoDuration,a=e.isEditingRestricted,i=e.disableEditing;if(n.state.editDialog.isVisible)return o.a.createElement(SD,{isVisible:n.state.editDialog.isVisible,disableEditing:i,onSave:n.onSaveQuestionDialog,onCancel:n.onCancelQuestionDialog,question:n.state.editDialog.question,title:t._("Edit Question"),videoDuration:r,isEditingRestricted:a})})),AD(RD(RD(n)),"onWeightChange",(function(e,t){var r=_D(n.props.questions),a=g.a.findIndex(r,["dbId",e.dbId]),o=CD({},r[a],AD({},BE.b.QUESTION.WEIGHT,t));r.splice(a,1,o),n.props.onChange(r)})),AD(RD(RD(n)),"onEditQuestion",(function(e){n.setState({editDialog:{isVisible:!0,question:e}})})),AD(RD(RD(n)),"onDeleteQuestion",(function(e){var t=_D(n.props.questions),r=g.a.findIndex(t,["dbId",e.dbId]);t.splice(r,1),n.props.onChange(t)})),AD(RD(RD(n)),"onQuestionPositionChange",(function(e,t){var r=_D(n.props.questions),a=g.a.findIndex(r,["dbId",e.dbId]);if(!(a<0)){var o=a+t;if(!(o<0||o>r.length)){var i=Math.min(a,o),c=r.splice(i,2),s=CD({},c[1],AD({},BE.b.QUESTION.SORT,c[0][BE.b.QUESTION.SORT])),u=CD({},c[0],AD({},BE.b.QUESTION.SORT,c[1][BE.b.QUESTION.SORT]));r.splice(i,0,s,u),n.props.onChange(r)}}})),AD(RD(RD(n)),"onQuestionTimeClick",(function(e,t){n.props.onQuestionTimeClick&&n.props.onQuestionTimeClick(e,t)})),AD(RD(RD(n)),"onSaveQuestionDialog",(function(e,t){n.props.onSaveQuestion(e,t),n.setState({editDialog:{isVisible:!1,question:null}})})),AD(RD(RD(n)),"onCancelQuestionDialog",(function(){n.setState({editDialog:{isVisible:!1,question:null}})})),n.state={editDialog:{isVisible:!1,question:{}}},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PD(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.questions;return e&&0!==e.length?o.a.createElement("div",{className:Ie()("interactive-video-questions")},this.getQuestions(),this.getQuestionDialog()):null}}])&&TD(n.prototype,r),a&&TD(n,a),t}(a.Component);kD.propTypes={errors:M.a.object,isEditingRestricted:M.a.bool,onChange:M.a.func.isRequired,onQuestionTimeClick:M.a.func,onSaveQuestion:M.a.func.isRequired,onValid:M.a.func,questions:M.a.array.isRequired,videoDuration:M.a.number},kD.defaultProps={errors:{},isEditingRestricted:!1,videoDuration:0};var ND=Object(x.withI18n)()(Object(c.b)((function(){return{}}))(kD));n("3/zm");function DD(e){return(DD="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qD(e,t,n[t])}))}return e}function MD(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FD(e,t,n){return(FD="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VD(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function VD(e){return(VD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GD(e,t){return(GD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WD="interactive-video-settings",BD=WD+"-player",QD=15e3,YD={editDialog:{isVisible:!1,question:null},errors:{},hasVideoResponseQuestions:!1,hasMultipleChoiceQuestions:!1,isValid:!0,totalWeight:0},HD=BD+"-"+(new Date).getTime(),zD=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=VD(t).call(this,e),n=!a||"object"!==DD(a)&&"function"!==typeof a?UD(r):a,qD(UD(UD(n)),"stopPollingForInteractiveVideoMedia",(function(){H.b.debug("Stopping polling for interactive video media processing"),clearTimeout(n._timer)})),qD(UD(UD(n)),"pollForInteractiveVideoMedia",(function(e){e&&e.dbId&&n.isMediaProcessing(e)&&(H.b.debug("Polling for interactive video media processing:",e),clearTimeout(n._timer),n._timer=setTimeout(n.fetchMedia,QD))})),qD(UD(UD(n)),"fetchMedia",(function(){var e=n.props.interactiveVideoConfiguration,t=g.a.get(e,"media.dbId");H.b.debug("Fetching media:",t),t&&K_.getItem(+t).then((function(e){n.onFetchMediaResult(e)}))})),qD(UD(UD(n)),"onFetchMediaResult",(function(e){H.b.debug("Fetched media:",e),e&&(n.isMediaProcessing(e)?n.pollForInteractiveVideoMedia(e):n.onSetInteractiveVideoMedia(e))})),qD(UD(UD(n)),"getSortedQuestions",(function(e){var t=MD(e);t.sort((function(e,t){var n=e[BE.b.QUESTION.SHOW_TIME]-t[BE.b.QUESTION.SHOW_TIME];return 0===n?e[BE.b.QUESTION.SORT]-t[BE.b.QUESTION.SORT]:n}));for(var n=0;n<t.length;n++)t[n]=LD({},t[n],qD({},BE.b.QUESTION.SORT,n));return t})),qD(UD(UD(n)),"getCounter",(function(){var e=n.props,t=e.i18n,r=e.interactiveVideoConfiguration,a=r.questions?r.questions.length:0;return o.a.createElement("div",{className:WD+"-counter"},o.a.createElement("h4",null,t._("Questions: {count}",{count:a})),o.a.createElement("i",null,t._("(maximum of 20)")))})),qD(UD(UD(n)),"getMessage",(function(e){var t=n.props.i18n;return e?n.isMediaReady(e)?o.a.createElement("div",{className:WD+"-message"},o.a.createElement("i",null,t._("Create multiple choice or video response questions that will be prompted during the video."))):n.isMediaProcessing(e)?o.a.createElement("div",{className:WD+"-message"},o.a.createElement("i",null,t._("The video is processing. This may take several minutes. After the video has finished processing then you will be able to create questions.")),o.a.createElement(st.b,{id:WD+"-progress",className:WD+"-progress"})):o.a.createElement("div",{className:WD+"-message"},o.a.createElement("i",null,t._("There was an issue retrieving or processing the video."))):o.a.createElement("div",{className:WD+"-message"},o.a.createElement("i",null,t._("Add a video then you can create questions which will be prompted in context of that video.")))})),qD(UD(UD(n)),"getActions",(function(e){var t=n.props,r=t.i18n,a=t.interactiveVideoConfiguration,i=a.isEditingRestricted,c=a.questions,s=!(c&&c.length>=BE.h);if(e)return o.a.createElement("div",{className:WD+"-actions"},o.a.createElement(Ue.f,{id:"button-assignment-interactive-video-question-create",primary:!0,className:WD+"-actions-create",enabled:s&&!i,onClick:n.onCreateQuestion,tooltip:{label:s?"":r._("A maximum of {0} questions are allowed",{0:BE.h})}},r._("Create Question")))})),qD(UD(UD(n)),"getRubricItems",(function(e){var t=n.props.interactiveVideoConfiguration.rubricAlreadyUsedForPeerReview;return e=g.a.clone(e||[]),t&&(e=e.map((function(e){return e.dbId!==t.dbId&&((e=g.a.merge({},e)).disabled=!0),e}))),e})),qD(UD(UD(n)),"getGradeTypeMenuItems",(function(){var e=n.props,t=e.i18n,r=e.isD2LFreemium;return[{label:t._("Percentage"),value:nc.a.GRADE},{label:t._("Rubric"),value:nc.a.RUBRIC,disabled:r},{label:t._("Pass/Fail"),value:nc.a.PASS_FAIL},{label:t._("Auto Pass"),value:nc.a.COMPLETION},{label:t._("Five Star"),value:nc.a.FIVESTAR}]})),qD(UD(UD(n)),"getConfigBlock",(function(){var e=n.props,t=e.i18n,r=e.rubrics,a=e.disableEditing,i=e.interactiveVideoConfiguration.isRetakeEnabled,c=n.state,s=c.errors,u=c.hasMultipleChoiceQuestions,l=c.hasVideoResponseQuestions,d=n.activityFormProps.gradeType.value===nc.a.RUBRIC,f=!a&&l&&!u&&!n.activityFormProps.gradeType.disabled,p="";a?p=n.getGradeTypeLabel():l&&u&&(p=n.getGradeTypeWithVideoLabel());var m=Boolean(s[WD+"-grade-type-rubric"]),b=n.activityFormProps.gradeRubric;return m&&((b=LD({},b)).error=!0),o.a.createElement("div",{className:WD+"-config"},u&&o.a.createElement("div",{id:"checkbox-assignment-settings-force-retake"},o.a.createElement(ut.a,{id:"force-retake",name:"force-retake",ariaLabel:t._("Force retaking multiple choice questions"),enabled:!a,label:t._("Force retaking multiple choice questions"),tooltip:{label:t._("If enabled, this will require the student to answer each multiple choice question correctly before proceeding")},checked:i,onChange:n.onAllowRetakeChange})),l&&o.a.createElement("div",{className:WD+"-grade-type-container"},o.a.createElement(ut.e,{id:"grade-type",className:WD+"-grade-type-dropdown",ariaLabel:n.getVideoResponseGradeTypeLabel(),enabled:f,label:n.getVideoResponseGradeTypeLabel(),menuItems:n.getGradeTypeMenuItems(),onChange:function(e){n.activityFormProps.onGradeTypeChange(e),n.setState({})},tooltip:{label:p},value:n.activityFormProps.gradeType.value}),d&&o.a.createElement(ut.g,{id:WD+"-grade-type-rubric",className:WD+"-grade-type-rubric",onConfigureRubrics:n.onConfigureRubrics,onRubricChange:function(e){n.activityFormProps.onGradeRubricChange(e),n.setState({})},selectedRubric:b,rubrics:n.getRubricItems(r)})))})),qD(UD(UD(n)),"getQuestionDialog",(function(){var e=n.props,t=e.i18n,r=e.interactiveVideoConfiguration.isEditingRestricted,a=e.disableEditing;if(n.state.editDialog.isVisible)return o.a.createElement(SD,{isEditingRestricted:r,isVisible:n.state.editDialog.isVisible,onCancel:n.onCancelQuestionDialog,onSave:n.onSaveQuestion,disableEditing:a,question:n.state.editDialog.question,title:t._("Create Question"),videoDuration:n.getMediaDuration()})})),qD(UD(UD(n)),"onConfigureRubrics",(function(){var e=n.props,t=e.match,r=e.history,a=e.location,o=V.a.compile(Qh.f.EDUCATOR_RUBRICS_LIST)(LD({},t.params));r.push({pathname:o,state:{quickNavItems:[{context:VO.a.CONFIGURATION,location:a}]}})})),qD(UD(UD(n)),"onAllowRetakeChange",(function(){n.props.onChange({isRetakeEnabled:!n.props.interactiveVideoConfiguration.isRetakeEnabled})})),qD(UD(UD(n)),"onRestrictSummaryChange",(function(){n.props.onChange({isSummaryEnabled:!n.props.interactiveVideoConfiguration.isSummaryEnabled})})),qD(UD(UD(n)),"onQuestionsChange",(function(e){var t=n.getSortedQuestions(e),r={questions:t},a=n.getQuestionsTotals(t);a.hasMultipleChoiceQuestions&&a.hasVideoResponseQuestions&&n.activityFormProps.onGradeTypeChange(nc.a.GRADE),a.hasMultipleChoiceQuestions||(r.isRetakeEnabled=!1),n.props.onChange(r)})),qD(UD(UD(n)),"onCreateQuestion",(function(){var e=n.props.dispatch,t=fc.c(HD,Ft.a.getState()),r=Math.floor(+t);e(dc.r(HD)),e(dc.B(HD,r));var a=LD({},BE.m,qD({dbId:BE.p()},BE.b.QUESTION.SHOW_TIME,r));n.setState({editDialog:{isVisible:!0,question:a}})})),qD(UD(UD(n)),"onSaveQuestion",(function(e){var t=MD(n.props.interactiveVideoConfiguration.questions),r=g.a.findIndex(t,["dbId",e.dbId]);r<0?t.push(e):t.splice(r,1,e),n.setState({editDialog:{isVisible:!1,question:null}}),n.onQuestionsChange(t)})),qD(UD(UD(n)),"onCancelQuestionDialog",(function(){n.setState({editDialog:{isVisible:!1,question:null}})})),qD(UD(UD(n)),"onSetInteractiveVideoMedia",(function(e){(0,n.props.dispatch)(dc.o(HD)),n.props.onSetInteractiveVideoMedia(e),e||n.stopPollingForInteractiveVideoMedia()})),qD(UD(UD(n)),"onQuestionTimeClick",(function(e){var t=n.props.dispatch;t(dc.r(HD)),t(dc.B(HD,e[BE.b.QUESTION.SHOW_TIME]))})),qD(UD(UD(n)),"getMediaDuration",(function(){var e=n.props.interactiveVideoMediaDuration;return e||0})),qD(UD(UD(n)),"getQuestionsSummary",(function(){var e=n.props.i18n,t=n.state,r=t.hasMultipleChoiceQuestions,a=t.hasVideoResponseQuestions;if(!r&&!a)return null;var i=n.state.totalQuestionWeight,c=a?Math.max(0,100-i):0,s=i+c,u=[];return r&&a&&(u.push(o.a.createElement("div",{key:WD+"-summary-item_"+u.length,className:WD+"-summary-item"},o.a.createElement("h6",{className:WD+"-summary-label"},n.getMultipleChoiceWeightLabel()),o.a.createElement("h6",{className:WD+"-summary-value"},i+"%"))),u.push(o.a.createElement("div",{key:WD+"-summary-item_"+u.length,className:WD+"-summary-item"},o.a.createElement("h6",{className:WD+"-summary-label"},n.getVideoResponseWeightLabel()),o.a.createElement("h6",{className:WD+"-summary-value"},c+"%"))),u.push(o.a.createElement("div",{key:WD+"-summary-item_"+u.length,className:WD+"-summary-item-separator"}))),u.push(o.a.createElement("div",{key:WD+"-summary-item_"+u.length,className:WD+"-summary-item"},o.a.createElement("h6",{className:WD+"-summary-label"},e._("Total:")),o.a.createElement("h6",{className:WD+"-summary-value"},s+"%"))),o.a.createElement("div",{className:WD+"-summary"},o.a.createElement("div",{className:WD+"-summary-list"},u))})),qD(UD(UD(n)),"getErrorsList",(function(){var e=n.state,t=e.errors;if(e.isValid)return null;for(var r=[],a=Object.values(t),i=0;i<a.length;i++)r.push(o.a.createElement("h5",{key:WD+"-errors_"+i},a[i]));return o.a.createElement("div",{className:WD+"-validation-container"},o.a.createElement(zt.a,{className:WD+"-validation-icon"},Je.a.ERROR),o.a.createElement("div",{className:WD+"-validation-errors"},r))})),qD(UD(UD(n)),"isMediaReady",(function(e){return e&&e.processingStatus===ml.a.READY})),qD(UD(UD(n)),"isMediaProcessing",(function(e){return e&&e.processingStatus===ml.a.PROGRESS})),qD(UD(UD(n)),"getAdvancedComponents",(function(){var e=n.props,t=e.interactiveVideoConfiguration,r=e.i18n;return o.a.createElement("div",{id:"toggle-assignment-settings-restricted-summary",key:WD+"-restricted-summary",className:WD+"-restricted-summary-container"},o.a.createElement("h2",{className:"section-header"},r._("Restricted Submission Summary Details")),o.a.createElement(nC.a,{id:"restricted-summary-toggle",name:"restricted-summary-toggle",className:WD+"-restricted-summary-toggle",ariaLabel:r._("Enable/Disable Restricted Summary"),checked:!t.isSummaryEnabled,label:"",onChange:n.onRestrictSummaryChange,tooltip:{label:r._("If restricted, the student submission summary will not show the question text or answer after completing the Interactive Video")}}))})),qD(UD(UD(n)),"process",(function(e){var t=n.props,r=t.i18n,a=t.rubrics,o=e.interactiveVideoConfiguration,i=o.questions,c={errors:{},hasVideoResponseQuestions:!1,hasMultipleChoiceQuestions:!1,isValid:!1,totalWeight:0};if(o.media){if(n.activityFormProps&&n.activityFormProps.gradeType.value===nc.a.RUBRIC){var s=n.activityFormProps.gradeRubric.value;(!s||g.a.findIndex(a,["dbId",+s])<0)&&(c.errors[WD+"-grade-type-rubric"]=r._("Select a rubric to use for grading."))}if(i&&i.length>=BE.k){if(i){for(var u=0;u<i.length;u++){var l=i[u];if(l.type===BE.n){var d=+l[BE.b.QUESTION.WEIGHT];d>100?c.errors[jD+"-weight_"+l.dbId]=r._("Question weight ({value}%) cannot exceed 100%.",{value:d}):d<=0&&(c.errors[jD+"-weight_"+l.dbId]=r._("Question weight ({value}%) must be at least 1%.",{value:d}))}}var f=n.getQuestionsTotals(i),p=f.totalQuestionWeight,m=f.hasVideoResponseQuestions,b=f.hasMultipleChoiceQuestions;m?p>99&&(c.errors[jD+"-total-weight"]=r._("Total percent ({totalQuestionWeight}%) of multiple choice questions cannot exceed 99% when using video response questions.",{totalQuestionWeight:p})):100!==p&&(c.errors[jD+"-total-weight"]=r._("Total percent ({totalQuestionWeight}%) must equal 100%.",{totalQuestionWeight:p})),c.totalQuestionWeight=p,c.hasMultipleChoiceQuestions=b,c.hasVideoResponseQuestions=m}}else c.errors[WD+"-counter"]=r._("There must be at least {0} question configured.",{0:BE.k})}else c.errors[WD+"-media"]=r._("There must be a video provided for the interactive video section.");return c.isValid=0===Object.keys(c.errors).length,c})),qD(UD(UD(n)),"getQuestionsTotals",(function(e){for(var t={hasVideoResponseQuestions:!1,hasMultipleChoiceQuestions:!1,totalQuestionWeight:0},n=0;n<e.length;n++){var r=e[n];if(r.type===BE.o)t.hasVideoResponseQuestions=!0;else{t.hasMultipleChoiceQuestions=!0;var a=+r[BE.b.QUESTION.WEIGHT];t.totalQuestionWeight+=a}}return t}));var i=n.process(e);return n.state=LD({},YD,i),n.updatePlayerId(e),n.pollForInteractiveVideoMedia(e.interactiveVideoConfiguration.media),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GD(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.validate(e),this.pollForInteractiveVideoMedia(e.interactiveVideoConfiguration.media);var t=g.a.get(this.props,"interactiveVideoConfiguration.media.dbId");g.a.get(e,"interactiveVideoConfiguration.media.dbId")!==t&&this.updatePlayerId(e)}},{key:"updatePlayerId",value:function(e){var t=g.a.get(e,"activityData.dbId","NEW"),n=g.a.get(e,"interactiveVideoConfiguration.media.dbId");HD=BD+"-"+t+"-"+n}},{key:"getGradeTypeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score type cannot be changed once a student has started the assignment."):e._("Grade type cannot be changed once a student has started the assignment.")}},{key:"getGradeTypeWithVideoLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Currently, score type can only be Percentage when using a mix of multiple choice and video response questions."):e._("Currently, grade type can only be Percentage when using a mix of multiple choice and video response questions.")}},{key:"getVideoResponseGradeTypeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Video Response Score Type"):e._("Video Response Grade Type")}},{key:"getMultipleChoiceWeightLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Multiple Choice Score Weight:"):e._("Multiple Choice Grade Weight:")}},{key:"getVideoResponseWeightLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Video Response Score Weight:"):e._("Video Response Grade Weight:")}},{key:"render",value:function(){var e=this,t=this.props,n=t.activityData,r=t.onMainFormChange,a=t.onSubmit,i=t.onShowAdvanced,c=t.rubrics,s=t.showAdvanced,u=t.showClientErrors,l=t.serverErrors,d=t.i18n,f=t.interactiveVideoConfiguration,p=t.onAddInteractiveVideoMedia,m=t.mainFormState,b=t.disableEditing,y=t.isEditingLocked,v=this.state,h=v.errors,g=v.isValid,E=v.hasVideoResponseQuestions,w=f.media,S=HD,O=this.isMediaReady(w);return o.a.createElement(tI,{advancedComponents:this.getAdvancedComponents(),canSave:g,disableEditing:b,isEditingLocked:y,canSelfAssessment:!0,canGradeType:!1,canAutoGrade:!1,canGradedPeerReview:!1,saveButtonTooltipLabel:g?"":d._("Please complete all required fields"),rubrics:c,activityData:n,mainFormState:m,onSubmit:a,showAdvanced:s,onShowAdvanced:i,serverErrors:l,showClientErrors:u,onChange:r,enablePeerReview:!!gr.a.isPeerReviewEnabled()&&E,peerReviewTooltipLabel:E?"":d._("Peer Review is only available if Video Response questions are being used")},(function(t){return e.activityFormProps=t,o.a.createElement("div",{className:WD+"-container"},o.a.createElement("h2",{className:"section-header"},d._("Interactive Video")),o.a.createElement("div",{className:WD},o.a.createElement("div",{className:WD+"-top-container"},o.a.createElement("div",{className:WD+"-top-left-container",style:{"--aspect-ratio":"4/3"}},o.a.createElement(n_.a,{id:"assignment-settings-interactive-video-container",className:WD+"-media",isLocked:f.isEditingRestricted,media:w,usageContext:kd.a.INTERACTIVE_VIDEO,onAddMedia:p,onSetMedia:e.onSetInteractiveVideoMedia,playerId:S,showControls:!0,allowDesktopSharing:!1})),o.a.createElement("div",{className:WD+"-top-right-container"},e.getCounter(),e.getMessage(w),e.getActions(O))),e.getConfigBlock(),o.a.createElement("div",{className:WD+"-questions-container"},o.a.createElement(ND,{errors:h,disableEditing:b||f.isEditingLocked,onChange:e.onQuestionsChange,onQuestionTimeClick:e.onQuestionTimeClick,onSaveQuestion:e.onSaveQuestion,questions:f.questions,videoDuration:e.getMediaDuration(),isEditingRestricted:f.isEditingRestricted}),e.getQuestionsSummary()),e.getErrorsList(),e.getQuestionDialog()))}))}},{key:"setState",value:function(e,n){var r=this;FD(VD(t.prototype),"setState",this).call(this,e,(function(){r.validate(r.props,n)}))}},{key:"validate",value:function(e,n){var r=this.process(e);FD(VD(t.prototype),"setState",this).call(this,r,n)}}])&&xD(n.prototype,r),a&&xD(n,a),t}(a.Component);zD.componentProps={interactiveVideoConfiguration:M.a.object.isRequired};var KD=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),interactiveVideoMediaDuration:fc.b(HD,e,"duration")}}))(zD)));function XD(e){return(XD="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $D(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ZD(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$D(o,r,a,i,c,"next",e)}function c(e){$D(o,r,a,i,c,"throw",e)}i(void 0)}))}}function JD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oL(e,t,n[t])}))}return e}function eL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nL(e){return(nL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rL(e,t){return(rL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iL={showAdvanced:!1,interactiveVideoConfiguration:{isRetakeEnabled:!1,isSummaryEnabled:!0,media:null,questions:[],isEditingRestricted:!1,isEditingLocked:!1,rubricAlreadyUsedForPeerReview:null},dualStreamMediaDialogMessage:""},cL=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nL(t).call(this,e),n=!a||"object"!==XD(a)&&"function"!==typeof a?aL(r):a,oL(aL(aL(n)),"_isSubmitting",!1),oL(aL(aL(n)),"onAddInteractiveVideoMedia",(function(){var e,t=n.props,r=t.activityData,a=t.match.params.classId;r&&(e=r.dbId),Hn.a.showModal(o.a.createElement("div",{id:"activity-config-interactive-video-add-video-dialog"},o.a.createElement(AT,{activityId:e,termClassId:+a,allowDesktopSharing:!1,onComplete:function(e){var t=eL(e,1)[0];n.onSetInteractiveVideoMedia(t)}})))})),oL(aL(aL(n)),"onSetInteractiveVideoMedia",(function(e){for(var t=n.props,r=t.i18n,a=t.onMainFormChange,o=n.state.interactiveVideoConfiguration.questions,i=[],c=0;c<o.length;c++)i.push(JD({},o[c],oL({},BE.b.QUESTION.SHOW_TIME,0)));var s=e?g.a.merge({},e):null,u="";if(s&&s.slaveMedia){var l=e.title;u=r._('The selected video "{videoTitle}" includes screen recording but only the camera recording will be visible during playback.',{videoTitle:l}),s.slaveMedia=null}n.setState({interactiveVideoConfiguration:JD({},n.state.interactiveVideoConfiguration,{media:s,questions:i}),dualStreamMediaDialogMessage:u},a)})),oL(aL(aL(n)),"onShowAdvanced",(function(){var e=!n.state.showAdvanced;n.setState({showAdvanced:e})})),oL(aL(aL(n)),"getData",(function(){var e=n.props,t=e.activityData,r=e.interactiveVideoConfiguration;return r?r.activityData:t})),oL(aL(aL(n)),"getMainFormState",(function(){var e=n.props.interactiveVideoConfiguration;return e?e.mainFormState:null})),oL(aL(aL(n)),"mapInteractiveQuestions",(function(e){return e?e.map((function(e){if(e.__typename===BE.n){var t,r=n.mapQuestionOptions(e[BE.b.QUESTION.OPTIONS]);return JD({},BE.d,e,(oL(t={},BE.b.QUESTION.OPTIONS,r),oL(t,"type",BE.n),t))}return e.__typename===BE.o?JD({},BE.d,e,{type:BE.o}):null})):[]})),oL(aL(aL(n)),"mapQuestionOptions",(function(e){return e.map((function(e){return JD({},BE.c,e)}))})),oL(aL(aL(n)),"onChange",(function(){n.props.onChange(n.getFormData())})),oL(aL(aL(n)),"onInteractiveVideoConfigurationChange",(function(e){n.setState({interactiveVideoConfiguration:JD({},n.state.interactiveVideoConfiguration,e)})})),oL(aL(aL(n)),"onMainFormChange",(function(e,t){n.mainFormData=e,n.mainFormState=t})),oL(aL(aL(n)),"getStateWithoutErrors",(function(){return g.a.merge({},n.state)})),oL(aL(aL(n)),"validate",(function(){var e=n.getStateWithoutErrors();return n.setState(e),!0})),oL(aL(aL(n)),"getGradeType",(function(e){for(var t=n.state.interactiveVideoConfiguration,r=t.questions,a=!1,o=!1,i=0;(!a||!o)&&i<r.length;i++){r[i].type===BE.o?o=!0:a=!0}return a&&!o?t.isRetakeEnabled?nc.a.COMPLETION:nc.a.GRADE:e})),oL(aL(aL(n)),"getMainFormOverrides",(function(e){var t=e.gradeType;return{gradeType:n.getGradeType(t.value)}})),oL(aL(aL(n)),"getFormData",(function(){var e=n.validate(),t=n.state.interactiveVideoConfiguration,r=n.getQuestions(t),a={interactiveVideoSettings:n.getSettings(t),interactiveQuestionsOfTypeVideo:r.videoQuestions,interactiveQuestionsOfTypeChoice:r.multipleChoiceQuestions};return{isValid:e&&n.mainFormData.isValid,form:g.a.merge({},n.mainFormData.form,n.getMainFormOverrides(n.mainFormData.form),a)}})),oL(aL(aL(n)),"getSettings",(function(e){var t;return oL(t={},BE.b.SETTINGS.IS_RETAKE,e.isRetakeEnabled),oL(t,BE.b.SETTINGS.IS_SUMMARY_VISIBLE,e.isSummaryEnabled),oL(t,BE.b.SETTINGS.MEDIA,e.media?e.media.dbId:null),t})),oL(aL(aL(n)),"getQuestions",(function(e){for(var t=[],r=[],a=0;a<e.questions.length;a++){var o=JD({},e.questions[a]);o.type===BE.o?(o=g.a.pick(o,g.a.values(BE.b.QUESTION_VIDEO)),t.push(o)):o.type===BE.n&&((o=g.a.pick(o,g.a.values(BE.b.QUESTION)))[BE.b.QUESTION.OPTIONS]=n.getQuestionOptions(o),r.push(o))}return{videoQuestions:t,multipleChoiceQuestions:r}})),oL(aL(aL(n)),"getQuestionOptions",(function(e){var t=[];if(e[BE.b.QUESTION.OPTIONS])for(var n=0;n<e[BE.b.QUESTION.OPTIONS].length;n++)t.push(g.a.pick(e[BE.b.QUESTION.OPTIONS][n],g.a.values(BE.b.OPTION)));return t})),oL(aL(aL(n)),"onSubmit",ZD(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._isSubmitting=!0,e.next=3,n.props.onSubmit(n.getFormData());case 3:case"end":return e.stop()}}),e,this)})))),oL(aL(aL(n)),"onDualStreamMediaDialogClose",(function(){n.setState({dualStreamMediaDialogMessage:""})})),n.mainFormData=null,n.state=JD({},n.mapActivityDataToState()),n._isSubmitting=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rL(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){if(!this._isSubmitting){var e,t,n=this.props,r=n.dispatch,a=n.match,o=n.activityData;if(o&&+o.dbId!==+a.params.activityId)r(yI.g(null));else{var i=(e=this.getFormData().form,t=this.mainFormState,vI(e,t));r(yI.g({activityData:i,mainFormState:this.mainFormState,state:this.state}))}}}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._isSubmitting=!1}},{key:"mapActivityDataToState",value:function(){var e=this.props.interactiveVideoConfiguration,t=g.a.merge({},iL),n=this.getData();if(e)return t=JD({},t,e.state);if(!n)return t;var r=!1,a=null;n.dataForAllStudents&&n.dataForAllStudents.forEach((function(e){if(e.educatorGrade&&(r=!0),!r&&e.interactiveAnswers&&e.interactiveAnswers.length>0&&(r=!0),e.rubricEvaluations&&e.rubricEvaluations.length){var t=e.rubricEvaluations.filter((function(e){return ar.f(e.user)}));t.length&&(a=t[0].rubric)}}));var o=n.interactiveVideoSettings||{};return t=g.a.merge(t,{interactiveVideoConfiguration:{isRetakeEnabled:o[BE.b.SETTINGS.IS_RETAKE],isSummaryEnabled:o[BE.b.SETTINGS.IS_SUMMARY_VISIBLE],media:o[BE.b.SETTINGS.MEDIA],questions:this.mapInteractiveQuestions(n.interactiveQuestions),gradeType:n.gradeType,rubric:n.rubric?n.rubric.dbId:null,selfAssessment:n.rubricSelfAllowed,isEditingRestricted:r,rubricAlreadyUsedForPeerReview:a}}),this.props.disableEditing&&(t.interactiveVideoConfiguration.isEditingRestricted=!0),this.props.isEditingLocked&&(t.interactiveVideoConfiguration.isEditingRestricted=!0,t.interactiveVideoConfiguration.isEditingLocked=!0),t}},{key:"render",value:function(){var e=this.state,t=e.showAdvanced,n=e.interactiveVideoConfiguration,r=e.dualStreamMediaDialogMessage,a=this.props,i=a.rubrics,c=a.serverErrors;return o.a.createElement("div",null,o.a.createElement(KD,{disableEditing:this.props.disableEditing,isEditingLocked:this.props.isEditingLocked,activityData:this.getData(),mainFormState:this.getMainFormState(),interactiveVideoConfiguration:n,onAddInteractiveVideoMedia:this.onAddInteractiveVideoMedia,onChange:this.onInteractiveVideoConfigurationChange,onMainFormChange:this.onMainFormChange,onSetInteractiveVideoMedia:this.onSetInteractiveVideoMedia,onShowAdvanced:this.onShowAdvanced,onSubmit:this.onSubmit,rubrics:i,serverErrors:c,showAdvanced:t,showClientErrors:this.props.showClientErrors}),o.a.createElement(ll.a,{id:"dual-stream-media-dialog",message:r,onClose:this.onDualStreamMediaDialogClose}))}}])&&tL(n.prototype,r),a&&tL(n,a),t}(a.Component);cL.defaultProps={onChange:function(){},onSubmit:function(){},disableEditing:!1,isEditingLocked:!1};var sL=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),interactiveVideoConfiguration:bI(e)}}))(cL)));function uL(e){return(uL="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dL(e,t){return!t||"object"!==uL(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fL(e){return(fL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pL(e,t){return(pL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dL(this,fL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pL(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onSubmit,a=e.showClientErrors,i=e.serverErrors,c=e.i18n,s=e.disableEditing,u=e.isEditingLocked;return o.a.createElement(z.a,{title:c._("Interactive Video Assignment")},o.a.createElement(iO.a,null),o.a.createElement(mA,{activityData:n}),o.a.createElement(un.a,null,o.a.createElement(sL,{rubrics:t,onSubmit:r,showClientErrors:a,serverErrors:i,activityData:n,disableEditing:s,isEditingLocked:u})))}}])&&lL(n.prototype,r),a&&lL(n,a),t}(a.Component),bL=Object(x.withI18n)()(mL);function yL(e){return(yL="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){OL(e,t,n[t])}))}return e}function hL(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function gL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EL(e){return(EL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wL(e,t){return(wL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CL=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=EL(t).call(this,e),n=!a||"object"!==yL(a)&&"function"!==typeof a?SL(r):a,OL(SL(SL(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match,o=r.history,i=r.dispatch,FT(),t.isValid){e.next=6;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 6:return e.next=8,sn.a.editInteractiveVideoProject(n.props.activityId,t.form).then((function(){t.form.lmsSync.ltiGradeIdentifier===jT.c()&&jT.a(),VT(),_A(n.props.activityId),i(yI.g(null)),i(kO.ab(null,OA.a.CONFIGURATION)),i(kO.Z(null));var e=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(vL({},a.params));o.push(e)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){hL(o,r,a,i,c,"next",e)}function c(e){hL(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wL(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.rubrics,r=e.disableEditing,a=e.isEditingLocked;return o.a.createElement(bL,{rubrics:n,showClientErrors:this.state.showClientErrors,serverErrors:this.state.serverErrors,onSubmit:this.onSubmit,disableEditing:r,isEditingLocked:a,activityData:t})}}])&&gL(n.prototype,r),a&&gL(n,a),t}(a.Component);CL.propTypes={activityId:M.a.number.isRequired,activityData:M.a.object,rubrics:M.a.arrayOf(M.a.object)};var _L=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(CL)),TL=n("jpbM"),IL=n.n(TL),PL=n("8eDJ");n("AVXr");function RL(e){return(RL="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AL(){return(AL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kL(e,t){return!t||"object"!==RL(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NL(e){return(NL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DL(e,t){return(DL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kL(this,NL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DL(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.index,n=e.onRemoveQuestion,r=e.questionText,a=e.isUsed,i=e.onQuestionTextChange,c=e.onIsUsedChange,s=e.media,u=e.addQuestionMedia,l=e.dragHandleProps,d=e.setQuestionMedia,f=e.showClientErrors,p=e.isQaQuestionsLocked,m=e.i18n,b="QA question #".concat(this.props.dbId," ");return s&&(b+="Media #".concat(s.dbId)),o.a.createElement("div",{className:"c-qa-question",tabIndex:0},o.a.createElement(Gr.a,{query:"(max-width: 699px)"},o.a.createElement(n_.a,{id:"assignment-settings-qa-question-video-container[".concat(t,"]"),usageContext:kd.a.QA_QUESTION,playerId:b,showControls:!0,media:s,onAddMedia:u,onSetMedia:d,isLocked:p,allowDesktopSharing:!1})),o.a.createElement(Gr.a,{query:"(min-width: 700px)"},o.a.createElement(n_.a,{id:"assignment-settings-qa-question-video-container[".concat(t,"]"),usageContext:kd.a.QA_QUESTION,playerId:b,media:s,onAddMedia:u,onSetMedia:d,isLocked:p,allowDesktopSharing:!1})),o.a.createElement("div",{className:"c-qa-question__info-container"},o.a.createElement("div",{id:"qa-question-text[".concat(t,"]")},o.a.createElement(Tl.b,{style:{width:"100%"},onChange:i,value:r.value,errorText:f?r.error:"",maxRows:3,rows:1,id:"textfield-qa-question-text[".concat(t,"]"),name:"question-text"+t,label:m._("Question Text"),ariaLabel:m._("Question Text")})),o.a.createElement("div",{id:"qa-question-active[".concat(t,"]")},o.a.createElement(GO.a,{enabled:!p,checked:a.value,onChange:c,id:"checkbox-qa-question-active[".concat(t,"]"),name:"is_used"+t,label:m._("Active"),ariaLabel:m._("Active")}))),o.a.createElement("div",{className:"c-qa-question__delete-container"},o.a.createElement("div",{className:"c-qa-question__action-container"},o.a.createElement(Ue.c,{id:"button-qa-question-delete[".concat(t,"]"),ariaLabel:m._("Delete"),onClick:n,enabled:!p},Je.a.DELETE)),o.a.createElement("div",{className:"c-qa-question__action-container"},o.a.createElement("span",AL({id:"button-qa-question-reorder[".concat(t,"]"),className:"c-qa-question__dragger"},l),o.a.createElement(Uf.a,{className:vr.a.DOT_8,ariaLabel:m._("Reorder Question"),enabled:!p,tooltip:{label:p?m._("Questions cannot be reorderd at this time"):m._("Drag to reorder")}})))))}}])&&jL(n.prototype,r),a&&jL(n,a),t}(a.Component);LL.propTypes={dragHandleProps:M.a.object};var ML=Object(x.withI18n)()(LL);n("aqn0");function xL(e){return(xL="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FL(){return(FL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function VL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GL(e){return(GL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UL(e,t){return(UL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BL=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=GL(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==xL(a)&&"function"!==typeof a?qL(r):a,WL(qL(qL(n)),"onDragEnd",(function(e){e.destination&&(0,n.props.moveQuestion)(e.source.index,e.destination.index)})),WL(qL(qL(n)),"renderRecordingModeOptions",(function(){var e=n.props,t=e.i18n,r=e.onRecordingModeChange,a=e.recordingMode,i={id:"radio-recording-mode-camera",label:o.a.createElement("div",{className:"radio-recording-mode-option-text"},t._("Camera only")),value:PL.a.CAMERA_ONLY},c={id:"radio-recording-mode-camera-screen",label:o.a.createElement("div",{className:"radio-recording-mode-option-text"},t._("Camera + Screen"),o.a.createElement(Uf.a,{tooltip:{label:t._("Users will be required to record their screen in addition to their camera for every answer. This will require users to access this assignment from a device that supports screen recording (mobile devices not supported).")}},Je.a.STATUS_INFO)),value:PL.a.CAMERA_AND_SCREENSHARE};return o.a.createElement("div",{className:"qa-assignment-settings-recording-mode-container"},o.a.createElement(ow.a,{id:"qa_recording_mode",name:"qa_recording_mode",enabled:!a.disabled,tooltip:{label:a.tooltip},controls:[i,c],label:t._("Recording Mode"),labelClassName:Ie()("md-subheading-1","qa-assignment-settings-recording-mode-header"),onChange:r,type:"radio",value:a.value}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UL(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onMainFormChange,a=e.onSubmit,i=e.isStartedImmediately,c=e.delay,s=e.answerMinLength,u=e.answerMaxLength,l=e.amountOfRandomQuestionsPerStudent,d=e.isRandomQuestionsModeEnabled,f=e.isStudentRetakeAllowed,p=e.onIsStudentRetakeAllowedChange,m=e.onIsStartedImmediatelyChange,b=e.onIsRandomQuestionsModeEnabledChange,y=e.onAmountOfRandomQuestionsPerStudentChange,v=e.onDelayChange,h=e.onAnswerMinLengthChange,g=e.onAnswerMaxLengthChange,E=e.qaQuestions,w=e.onAddQuestion,S=e.onRemoveQuestion,O=e.onQuestionTextChange,C=e.onIsUsedChange,_=e.showClientErrors,T=e.addQuestionMedia,I=e.setQuestionMedia,P=e.showAdvanced,R=e.onShowAdvanced,A=e.serverErrors,j=e.isQaQuestionsLocked,k=e.addQuestionLocked,N=e.mainFormState,D=e.i18n,L=e.disableEditing,M=e.isEditingLocked;k=E.length>=20;var F=E.map((function(e,t){return o.a.createElement(ym.b,{key:e.dbId,draggableId:e.dbId,index:t,type:"QA_QUESTION",isDragDisabled:j},(function(n,r){return o.a.createElement("div",FL({ref:n.innerRef,className:r.isDragging?"qa-questions-list-item-drag-container--active":""},n.draggableProps),o.a.createElement(ML,FL({key:e.dbId+"_"+t,isQaQuestionsLocked:j,showClientErrors:_,addQuestionMedia:T.bind(null,t),setQuestionMedia:I.bind(null,t),onIsUsedChange:C.bind(null,t),onQuestionTextChange:O.bind(null,t),onRemoveQuestion:S.bind(null,t),index:t,addQuestionLocked:k,dragHandleProps:n.dragHandleProps},e)))}))}));return o.a.createElement(tI,{rubrics:t,activityData:n,mainFormState:N,canAutoGrade:!1,canGradedPeerReview:gr.a.isGradedPeerReviewAllowed(),canReflectionQuestions:gr.a.isReflectionQuestionsAllowed(),onSubmit:a,disableEditing:L,isEditingLocked:M,serverErrors:A,showAdvanced:P,onShowAdvanced:R,showClientErrors:_,onChange:r,enablePeerReview:gr.a.isPeerReviewEnabled(),peerReviewTooltipLabel:gr.a.isPeerReviewEnabled()?"":D._(qf.a.FREEMIUM_CONFIG_OPTION)},o.a.createElement("div",null,o.a.createElement("div",{className:"c-crate-activity__block questions-container"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Questions"})),o.a.createElement("div",{className:"config-section-contents"},o.a.createElement(ym.a,{onDragEnd:this.onDragEnd},o.a.createElement(ym.c,{droppableId:"droppable-qa-questions",type:"QA_QUESTION"},(function(e,t){return o.a.createElement("div",FL({ref:e.innerRef,className:t.isDraggingOver?"qa-questions-list-drag-container--active":""},e.droppableProps),F)}))),o.a.createElement(Ue.f,{id:"button-assignment-qa-question-create",className:"add-question-button",ariaLabel:D._("Add Question"),enabled:k?!k:!j,tooltip:{label:k?D._("Maximum allowed questions reached"):""},onClick:w},o.a.createElement(x.Trans,{id:"Add Question"}))))),o.a.createElement("div",null,o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Answer Settings"})),o.a.createElement("div",{className:Ie()("config-section-contents","qa-answer-settings-contents")},this.renderRecordingModeOptions(),P&&o.a.createElement("div",{id:"checkbox-assignment-settings-allow-retake"},o.a.createElement(GO.a,{id:"allow_retake",name:"allow_retake",label:D._("Allow Retake"),ariaLabel:D._("Allow Retake"),checked:f.value,enabled:!f.disabled,onChange:p})),P&&o.a.createElement("div",{id:"checkbox-assignment-settings-record-reaction"},o.a.createElement(GO.a,{id:"record_reaction",name:"record_reaction",label:D._("Record Reaction"),ariaLabel:D._("Record Reaction"),checked:i.value,enabled:!i.disabled,onChange:m})),P&&o.a.createElement("div",{id:"checkbox-assignment-settings-random-mode"},o.a.createElement(GO.a,{id:"random_question_mode_enabled",name:"random_question_mode_enabled",label:D._("Random Question Mode"),ariaLabel:D._("Random Question Mode"),checked:d.value,enabled:!d.disabled,onChange:b})),P&&d.value&&o.a.createElement(Tl.b,{style:__,id:"amount_of_random_questions",name:"amount_of_random_questions",label:D._("Number of random questions per student"),enabled:!d.disabled&&!l.disabled,value:""+l.value,errorText:_?l.error:"",onChange:y,min:0,type:"number"}),!i.value&&o.a.createElement(Tl.b,{style:__,value:""+c.value,enabled:!c.disabled,tooltip:{label:c.tooltip},errorText:_?c.error:"",onChange:v,id:"delay",name:"delay",label:D._("Delay (seconds)"),min:0,type:"number"}),o.a.createElement("div",{className:"record-time-container"},o.a.createElement(Tl.b,{className:"min-record-time-input",style:__,errorText:_?s.error:"",value:""+s.value,enabled:!s.disabled,tooltip:{label:s.tooltip},onChange:h,id:"min_record_time",name:"min_record_time",label:D._("Min Record Time (seconds)"),min:1,type:"number"}),o.a.createElement(Tl.b,{className:"max-record-time-input",style:__,errorText:_?u.error:"",value:""+u.value,enabled:!u.disabled,onChange:g,id:"max_record_time",name:"max_record_time",label:D._("Max Record Time (seconds)"),min:0,type:"number"})))))}}])&&VL(n.prototype,r),a&&VL(n,a),t}(a.Component),QL=Object(x.withI18n)()(BL);function YL(e){return(YL="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HL(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function zL(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){HL(o,r,a,i,c,"next",e)}function c(e){HL(o,r,a,i,c,"throw",e)}i(void 0)}))}}function KL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function XL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $L(e){return($L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZL(e,t){return(ZL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tM={dbId:"",questionText:{value:""},media:null,isUsed:{value:!0},orderNumber:0},nM={isStartedImmediately:{value:!1,disabled:!1},delay:{value:10,disabled:!1,tooltip:""},answerMinLength:{value:10,disabled:!1,tooltip:""},answerMaxLength:{value:60,disabled:!1},amountOfRandomQuestionsPerStudent:{value:"",disabled:!1},isRandomQuestionsModeEnabled:{value:!1,disabled:!1},isStudentRetakeAllowed:{value:!1,disabled:!1},recordingMode:{value:PL.a.CAMERA_ONLY,disabled:!1,tooltip:""},qaQuestions:[],showAdvanced:!1,isQaQuestionsLocked:!1,addQuestionLocked:!1,dualStreamMediaDialogMessage:""},rM=o.a.createElement(x.Trans,{id:"This field is required"}),aM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=$L(t).call(this,e),n=!a||"object"!==YL(a)&&"function"!==typeof a?JL(r):a,eM(JL(JL(n)),"_isSubmitting",!1),eM(JL(JL(n)),"onShowAdvanced",(function(){var e=!n.state.showAdvanced;n.setState({showAdvanced:e})})),eM(JL(JL(n)),"getUnableToEditTooltipLabel",(function(){return n.props.i18n._("This setting can only be changed prior to any answers being recorded")})),eM(JL(JL(n)),"onRecordingModeChange",(function(e){var t=n.props.i18n,r=g.a.merge({},n.state.recordingMode,{value:e}),a=g.a.merge({},n.state.answerMinLength),o=g.a.merge({},n.state.delay);if(e===PL.a.CAMERA_AND_SCREENSHARE){var i=t._('This setting cannot be configured when recording mode is set to "Camera + Screen"');a.value=1,a.disabled=!0,a.tooltip=i,o.value=0,o.disabled=!0,o.tooltip=i}else a.disabled=!1,a.tooltip="",o.disabled=!1,o.tooltip="";n.setState({recordingMode:r,answerMinLength:a,delay:o},n.onChange)})),eM(JL(JL(n)),"onIsStudentRetakeAllowedChange",(function(e){var t=g.a.merge({},n.state.isStudentRetakeAllowed);t.value=e,n.setState({isStudentRetakeAllowed:t},n.onChange)})),eM(JL(JL(n)),"onIsStartedImmediatelyChange",(function(e){var t=g.a.merge({},n.state.isStartedImmediately);t.value=e,n.setState({isStartedImmediately:t},n.onChange)})),eM(JL(JL(n)),"onIsRandomQuestionsModeEnabledChange",(function(e){var t=g.a.merge({},n.state.isRandomQuestionsModeEnabled);t.value=e,n.setState({isRandomQuestionsModeEnabled:t},n.onChange)})),eM(JL(JL(n)),"onAmountOfRandomQuestionsPerStudentChange",(function(e){var t=g.a.merge({},n.state.amountOfRandomQuestionsPerStudent);(e=+e)<0&&(e=0);var r=n.getActiveQuestionsCount();e>r&&(e=r),t.value=e,n.setState({amountOfRandomQuestionsPerStudent:t},n.onChange)})),eM(JL(JL(n)),"onDelayChange",(function(e){var t=g.a.merge({},n.state.delay);(e=+e)<0&&(e=0),t.value=e,n.setState({delay:t},n.onChange)})),eM(JL(JL(n)),"onAnswerMinLengthChange",(function(e){var t=g.a.merge({},n.state.answerMinLength);(e=+e)<0&&(e=0),t.value=e,n.setState({answerMinLength:t},n.onChange)})),eM(JL(JL(n)),"onAnswerMaxLengthChange",(function(e){var t=g.a.merge({},n.state.answerMaxLength);(e=+e)<0&&(e=0),t.value=e,n.setState({answerMaxLength:t},n.onChange)})),eM(JL(JL(n)),"onAddQuestion",(function(){var e=g.a.merge([],n.state.qaQuestions),t=g.a.merge({},tM);t.dbId=IL()(5),e.push(t),n.setState({qaQuestions:e},n.onChange)})),eM(JL(JL(n)),"onQuestionTextChange",(function(e,t){var r=g.a.merge([],n.state.qaQuestions);r[e].questionText.value=t,n.setState({qaQuestions:r},n.onChange)})),eM(JL(JL(n)),"onIsUsedChange",(function(e,t){var r=g.a.merge([],n.state.qaQuestions);r[e].isUsed.value=t,n.setState({qaQuestions:r},n.onChange)})),eM(JL(JL(n)),"onRemoveQuestion",(function(e){var t=g.a.merge([],n.state.qaQuestions);t=bm.d(t,e),n.setState({qaQuestions:t},n.onChange)})),eM(JL(JL(n)),"moveQuestion",(function(e,t){var r=bm.c(n.state.qaQuestions,e,t);n.setState({qaQuestions:r})})),eM(JL(JL(n)),"addQuestionMedia",(function(e){var t,r=n.props,a=r.activityData,i=r.match.params.classId;a&&(t=a.dbId),Hn.a.showModal(o.a.createElement("div",{id:"activity-config-qa-add-video-dialog"},o.a.createElement(AT,{activityId:t,termClassId:+i,allowDesktopSharing:!1,onComplete:function(t){var r=KL(t,1)[0];n.setQuestionMedia(e,r)}})))})),eM(JL(JL(n)),"setQuestionMedia",(function(e,t){var r=n.props.i18n,a=g.a.merge([],n.state.qaQuestions),o=t?g.a.merge({},t):null,i="";if(o&&o.slaveMedia){var c=t.title;i=r._('The selected video "{videoTitle}" includes screen recording but only the camera recording will be visible during playback.',{videoTitle:c}),o.slaveMedia=null}a[e].media=o,n.setState({qaQuestions:a,dualStreamMediaDialogMessage:i},n.onChange)})),eM(JL(JL(n)),"onChange",(function(){n.props.onChange(n.getFormData())})),eM(JL(JL(n)),"onMainFormChange",(function(e,t){n.mainFormData=e,n.mainFormState=t,n.onChange()})),eM(JL(JL(n)),"validate",(function(){var e=!0,t=n.getStateWithoutErrors(),r=n.props.i18n;if(+n.state.answerMaxLength.value<+n.state.answerMinLength.value&&(e=!1,t.answerMaxLength.error=r._("Max record time must be greater than the minimum")),n.state.answerMinLength.value||(e=!1,t.answerMinLength.error=rM),n.state.answerMaxLength.value||(e=!1,t.answerMaxLength.error=rM),n.state.qaQuestions.forEach((function(n,r){n.questionText.value||(e=!1,t.qaQuestions[r].questionText.error=rM)})),n.state.isRandomQuestionsModeEnabled.value){var a=n.getActiveQuestionsCount();n.state.amountOfRandomQuestionsPerStudent.value||(t.amountOfRandomQuestionsPerStudent.error=rM,e=!1),n.state.amountOfRandomQuestionsPerStudent.value>a&&(t.amountOfRandomQuestionsPerStudent.error=r._("Can't be larger than the number of active questions"),e=!1)}return n.setState(t),e})),eM(JL(JL(n)),"getFormData",(function(){var e=n.validate(),t={qaSettings:{isStartedImmediately:n.state.isStartedImmediately.value,delay:n.state.delay.value,answerMinLength:n.state.answerMinLength.value,answerMaxLength:n.state.answerMaxLength.value,amountOfRandomQuestionsPerStudent:n.state.amountOfRandomQuestionsPerStudent.value,isRandomQuestionsModeEnabled:n.state.isRandomQuestionsModeEnabled.value,isStudentRetakeAllowed:n.state.isStudentRetakeAllowed.value,recordingMode:n.state.recordingMode.value},qaQuestions:n.state.qaQuestions.map((function(e,t){return delete(e=g.a.merge({},e)).dbId,e.media?e.media=e.media.dbId:delete e.media,e.isUsed=e.isUsed.value,e.questionText=e.questionText.value,e.orderNumber=t,e}))};return n.state.isRandomQuestionsModeEnabled.value||delete t.qaSettings.amountOfRandomQuestionsPerStudent,t.qaSettings.amountOfRandomQuestionsPerStudent||delete t.qaSettings.amountOfRandomQuestionsPerStudent,g.a.isNumber(t.qaSettings.delay)&&!n.state.isStartedImmediately.value||delete t.qaSettings.delay,{isValid:e&&n.mainFormData.isValid,form:g.a.merge({},n.mainFormData.form,t)}})),eM(JL(JL(n)),"onSubmit",zL(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._isSubmitting=!0,e.next=3,n.props.onSubmit(n.getFormData());case 3:case"end":return e.stop()}}),e,this)})))),eM(JL(JL(n)),"getActivityData",(function(){var e=n.props,t=e.activityData,r=e.qaConfiguration;return r?r.activityData:t})),eM(JL(JL(n)),"getMainFormState",(function(){var e=n.props.qaConfiguration;return e?e.mainFormState:null})),eM(JL(JL(n)),"onDualStreamMediaDialogClose",(function(){n.setState({dualStreamMediaDialogMessage:""})})),n.state=n.mapActivityDataToState(),n.mainFormData=null,n._isSubmitting=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZL(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){if(!this._isSubmitting){var e,t,n=this.props,r=n.dispatch,a=n.match,o=n.activityData;if(o&&+o.dbId!==+a.params.activityId)r(yI.h(null));else{var i=(e=this.getFormData().form,t=this.mainFormState,vI(e,t));r(yI.h({activityData:i,mainFormState:this.mainFormState,state:this.state}))}}}},{key:"componentDidMount",value:function(){this.onRecordingModeChange(this.state.recordingMode.value)}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._isSubmitting=!1}},{key:"mapActivityDataToState",value:function(){var e=this.props.qaConfiguration,t=g.a.merge({},nM),n=this.getActivityData();if(!n)return t;if(e&&e.state)return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){eM(e,t,n[t])}))}return e}({},t,e.state);t.isStartedImmediately.value=n.qaSettings.isStartedImmediately,t.delay.value=n.qaSettings.delay,t.answerMinLength.value=n.qaSettings.answerMinLength,t.answerMaxLength.value=n.qaSettings.answerMaxLength,t.amountOfRandomQuestionsPerStudent.value=n.qaSettings.amountOfRandomQuestionsPerStudent,t.isRandomQuestionsModeEnabled.value=n.qaSettings.isRandomQuestionsModeEnabled,t.isStudentRetakeAllowed.value=n.qaSettings.isStudentRetakeAllowed,t.recordingMode.value=n.qaSettings.recordingMode,t.isQaQuestionsLocked=n.isQaQuestionsLocked;var r=g.a.merge([],n.qaQuestions);return r.sort((function(e,t){return e.orderNumber-t.orderNumber})),t.qaQuestions=r.map((function(e){var t=g.a.merge({},tM);return t.dbId=e.dbId,t.isUsed.value=e.isUsed,t.media=e.media,t.questionText.value=e.questionText,t})),t.isQaQuestionsLocked&&(t.isRandomQuestionsModeEnabled.disabled=!0,t.recordingMode.disabled=!0,t.recordingMode.tooltip=this.getUnableToEditTooltipLabel()),this.props.disableEditing&&(t.isQaQuestionsLocked=!0,t.addQuestionLocked=!0,t.isStartedImmediately.disabled=!0,t.delay.disabled=!0,t.answerMinLength.disabled=!0,t.answerMaxLength.disabled=!0,t.amountOfRandomQuestionsPerStudent.disabled=!0,t.isRandomQuestionsModeEnabled.disabled=!0,t.isStudentRetakeAllowed.disabled=!0,t.recordingMode.disabled=!0),this.props.isEditingLocked&&(t.isQaQuestionsLocked=!0,t.addQuestionLocked=!0,t.recordingMode.disabled=!0),t}},{key:"getActiveQuestionsCount",value:function(){var e=0;return this.state.qaQuestions.forEach((function(t){t.isUsed.value&&e++})),e}},{key:"getStateWithoutErrors",value:function(){var e=g.a.merge({},this.state);return e.answerMinLength.error="",e.answerMaxLength.error="",e.delay.error="",e.amountOfRandomQuestionsPerStudent.error="",e.qaQuestions.map((function(e){return e.questionText.error="",null})),e}},{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.showClientErrors,r=e.serverErrors,a=this.state,i=a.isStartedImmediately,c=a.delay,s=a.answerMinLength,u=a.answerMaxLength,l=a.amountOfRandomQuestionsPerStudent,d=a.isRandomQuestionsModeEnabled,f=a.isStudentRetakeAllowed,p=a.qaQuestions,m=a.showAdvanced,b=a.isQaQuestionsLocked,y=a.dualStreamMediaDialogMessage,v=a.recordingMode;return o.a.createElement("div",null,o.a.createElement(QL,{rubrics:t,showAdvanced:m,activityData:this.getActivityData(),mainFormState:this.getMainFormState(),isStartedImmediately:i,delay:c,answerMinLength:s,answerMaxLength:u,amountOfRandomQuestionsPerStudent:l,isRandomQuestionsModeEnabled:d,recordingMode:v,isStudentRetakeAllowed:f,qaQuestions:p,serverErrors:r,showClientErrors:n,isQaQuestionsLocked:b,disableEditing:this.props.disableEditing,isEditingLocked:this.props.isEditingLocked,onShowAdvanced:this.onShowAdvanced,addQuestionMedia:this.addQuestionMedia,setQuestionMedia:this.setQuestionMedia,moveQuestion:this.moveQuestion,onIsUsedChange:this.onIsUsedChange,onQuestionTextChange:this.onQuestionTextChange,onRemoveQuestion:this.onRemoveQuestion,onAddQuestion:this.onAddQuestion,onAnswerMaxLengthChange:this.onAnswerMaxLengthChange,onAnswerMinLengthChange:this.onAnswerMinLengthChange,onDelayChange:this.onDelayChange,onAmountOfRandomQuestionsPerStudentChange:this.onAmountOfRandomQuestionsPerStudentChange,onIsRandomQuestionsModeEnabledChange:this.onIsRandomQuestionsModeEnabledChange,onIsStartedImmediatelyChange:this.onIsStartedImmediatelyChange,onIsStudentRetakeAllowedChange:this.onIsStudentRetakeAllowedChange,onRecordingModeChange:this.onRecordingModeChange,onSubmit:this.onSubmit,onMainFormChange:this.onMainFormChange}),o.a.createElement(ll.a,{id:"dual-stream-media-dialog",message:y,onClose:this.onDualStreamMediaDialogClose}))}}])&&XL(n.prototype,r),a&&XL(n,a),t}(a.Component);aM.defaultProps={onChange:function(){},onSubmit:function(){},showClientErrors:!1,disableEditing:!1,isEditingLocked:!1};var oM=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),qaConfiguration:mI(e)}}))(aM)));function iM(e){return(iM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sM(e,t){return!t||"object"!==iM(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uM(e){return(uM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lM(e,t){return(lM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dM=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sM(this,uM(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lM(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.activityData,r=e.onSubmit,a=e.showClientErrors,i=e.serverErrors,c=e.i18n,s=e.disableEditing,u=e.isEditingLocked;return o.a.createElement(z.a,{title:c._("Configure Question & Answer Assignment")},o.a.createElement(iO.a,null),o.a.createElement(mA,{activityData:n}),o.a.createElement(un.a,null,o.a.createElement(oM,{rubrics:t,showClientErrors:a,serverErrors:i,disableEditing:s,isEditingLocked:u,onSubmit:r,activityData:n})))}}])&&cM(n.prototype,r),a&&cM(n,a),t}(a.Component),fM=Object(x.withI18n)()(dM);function pM(e){return(pM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){EM(e,t,n[t])}))}return e}function bM(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function yM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vM(e){return(vM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hM(e,t){return(hM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vM(t).call(this,e),n=!a||"object"!==pM(a)&&"function"!==typeof a?gM(r):a,EM(gM(gM(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match,o=r.history,i=r.dispatch,FT(),t.isValid){e.next=5;break}return GT(),e.abrupt("return");case 5:return e.next=7,sn.a.editQaProject(n.props.activityId,t.form).then((function(){t.form.lmsSync.ltiGradeIdentifier===jT.c()&&jT.a(),VT(),_A(n.props.activityId),i(yI.h(null)),i(kO.ab(null,OA.a.CONFIGURATION)),i(kO.Z(null));var e=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(mM({},a.params));o.push(e)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){bM(o,r,a,i,c,"next",e)}function c(e){bM(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hM(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.rubrics,r=e.disableEditing,a=e.isEditingLocked,i=this.state.serverErrors;return o.a.createElement(fM,{rubrics:n,disableEditing:r,isEditingLocked:a,showClientErrors:!0,serverErrors:i,onSubmit:this.onSubmit,activityData:t})}}])&&yM(n.prototype,r),a&&yM(n,a),t}(a.Component);wM.propTypes={activityId:M.a.number.isRequired,activityData:M.a.object,rubrics:M.a.arrayOf(M.a.object)};var SM=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(wM)),OM=n("uvcT"),CM=n("09Br");function _M(){var e=RM(["\n    mutation editRubric($input: EditRubricInput!){\n        editRubric(input: $input){\n            rubric {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return _M=function(){return e},e}function TM(){var e=RM(["\n    mutation createRubric($input: CreateRubricInput!){\n        createRubric(input: $input){\n            rubric {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return TM=function(){return e},e}function IM(){var e=RM(["\n    mutation deleteRubric($input: DeleteRubricInput!){\n        deleteRubric(input: $input){\n            removedId\n        }\n    }\n"]);return IM=function(){return e},e}function PM(){var e=RM(["\n    query getRubrics ($classId: Int!) {\n        termClass(dbId: $classId) {\n          rubrics {\n            ...Rubric\n            owner {\n                dbId\n                firstName\n                lastName\n            }\n            createdAt\n            isUsed\n            cengageSettings {\n                locked\n            }\n          }\n        }\n    }\n    ","\n"]);return PM=function(){return e},e}function RM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function AM(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function jM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kM=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getRubrics",value:function(e){return Lt.a.query({query:NM,variables:{classId:e},fetchPolicy:"network-only"}).then((function(e){return Promise.resolve(e.data.termClass.rubrics)}))}},{key:"getRubricById",value:function(e,t){var n=this;return new Promise(function(){var r,a=(r=regeneratorRuntime.mark((function r(a,o){var i,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.getRubrics(t);case 3:if(i=r.sent,c=null,i.forEach((function(t){t.dbId===e&&(c=t)})),c){r.next=8;break}return r.abrupt("return",o());case 8:return r.abrupt("return",a(c));case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",o(r.t0));case 14:case"end":return r.stop()}}),r,this,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){AM(o,n,a,i,c,"next",e)}function c(e){AM(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},{key:"createRubric",value:function(e){return Lt.a.mutate({mutation:LM,variables:{input:{rubric:e}}}).then((function(e){var t=e.data.createRubric.errors;return t&&t.length>0?Promise.reject(t):Promise.resolve(e.data.createRubric.rubric.dbId)}))}},{key:"editRubric",value:function(e,t){return Lt.a.mutate({mutation:MM,variables:{input:{rubric:t,dbId:e}}}).then((function(e){var t=e.data.editRubric.errors;return t&&t.length>0?Promise.reject(t):Promise.resolve(e.data.editRubric.rubric.dbId)}))}},{key:"removeRubric",value:function(e){return Lt.a.mutate({mutation:DM,variables:{input:{dbId:e}}}).then((function(e){var t=e.errors;return t&&t.length>0?Promise.reject(t):Promise.resolve(e.data.deleteRubric.removedId)}))}}])&&jM(t.prototype,n),r&&jM(t,r),e}()),NM=xt()(PM(),CM.d),DM=xt()(IM()),LM=xt()(TM()),MM=xt()(_M());function xM(e){return(xM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VM(e){return(VM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GM(e,t){return(GM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=VM(t).call(this,e),n=!a||"object"!==xM(a)&&"function"!==typeof a?UM(r):a,qM(UM(UM(n)),"loadActivityData",(function(){var e=n.props.match.params,t=e.activityId,r=e.classId;t&&sn.a.getActivitySettingsData(+t).then((function(){gr.a.isEducatorGlobalNavVisible()&&g.a.isNumber(r)&&OM.a.getActivityNavigationItems(+r,+t)})),kM.getRubrics(+r).then((function(e){n.setState({rubrics:e})}))})),qM(UM(UM(n)),"isEditingLocked",(function(){var e=n.props,t=e.activityData,r=e.currentUser;return t.cengageSettings&&t.cengageSettings.locked&&!ar.g(r)})),qM(UM(UM(n)),"canUserEditActivity",(function(){var e=n.props,t=e.activityData,r=e.currentUser,a=e.ltiScope,o=!0;return t.cengageSettings&&t.cengageSettings.inPath&&t.dataForAllStudents&&t.dataForAllStudents.length>0&&t.dataForAllStudents.forEach((function(e){e.result&&e.result.submitter&&!ar.h(r)&&(o=!1)})),t.cengageSettings&&t.cengageSettings.inPath&&a===cA.a.CENGAGE_EDUCATOR_DOCK&&(o=!1),o})),n.state={rubrics:null},e.dispatch(kO.Z(null)),e.dispatch(kO.ab(null,OA.a.CONFIGURATION)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GM(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.loadActivityData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.dispatch,n=e.match.params.activityId;this.props.activityData?this.props.activityData.dbId!==+n&&(t(kO.Z(null)),t(kO.ab(null,OA.a.CONFIGURATION)),this.loadActivityData()):this.props.isLoading||this.loadActivityData()}},{key:"render",value:function(){var e=this.props,t=e.match.params.activityId,n=e.activityData,r=e.isLoading;if(r)return o.a.createElement(At.b,{loading:r});var a=window.localStorage.getItem("useLegacyIndividualActivitySettingsForm")||!1;if(!n||!n.type)return null;n=g.a.merge({},n);var i=this.state.rubrics,c=!this.canUserEditActivity(),s=this.isEditingLocked();switch(n.type){case pc.b.GROUP_PRESENTATION:return o.a.createElement("span",null,n&&n.termClass?o.a.createElement(iO.a,{classId:n.termClass.dbId}):null,o.a.createElement(LA,{activityData:n,activityId:+t,rubrics:i,disableEditing:c,isEditingLocked:s}));case pc.b.INDIVIDUAL_PROJECT:return o.a.createElement(o.a.Fragment,null,n&&n.termClass?o.a.createElement(iO.a,{classId:n.termClass.dbId}):null,a?o.a.createElement(Nj,{activityData:n,activityId:+t,rubrics:i,disableEditing:c,isEditingLocked:s}):o.a.createElement(qN,{activityData:n,activityId:+t,rubrics:i,isReadOnly:c,isEditingLimited:s}));case pc.b.QA_ENHANCED:return o.a.createElement("span",null,n&&n.termClass?o.a.createElement(iO.a,{classId:n.termClass.dbId}):null,o.a.createElement(SM,{activityData:n,activityId:+t,rubrics:i,disableEditing:c,isEditingLocked:s}));case pc.b.INTERACTIVE_VIDEO:return o.a.createElement("span",null,n&&n.termClass?o.a.createElement(iO.a,{classId:n.termClass.dbId}):null,o.a.createElement(_L,{activityData:n,activityId:+t,rubrics:i,disableEditing:c,isEditingLocked:s}));default:return o.a.createElement(x.Trans,{id:"Assignment type not supported"})}}}])&&FM(n.prototype,r),a&&FM(n,a),t}(a.Component),BM=Object(s.a)(Object(c.b)((function(e){return{activityData:hv(e)[OA.a.CONFIGURATION],isLoading:by(e),currentUser:wt.h(e),ltiScope:bb.j(e)}}))(WM));n("SfRD");function QM(e){return(QM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$M(e,t,n[t])}))}return e}function HM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zM(e){return(zM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KM(e,t){return(KM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=zM(t).call(this,e),n=!a||"object"!==QM(a)&&"function"!==typeof a?XM(r):a,$M(XM(XM(n)),"onMessageChange",(function(e){n.setState({message:e})})),$M(XM(XM(n)),"onMessageSubmit",(function(){var e=n.state.message;uy.a.addPresetComment(e).then((function(){n.setState({message:""})}))})),$M(XM(XM(n)),"onEditClick",(function(e){n.setState({selectedEditComment:g.a.clone(e)})})),$M(XM(XM(n)),"onEditChange",(function(e){var t=n.state.selectedEditComment;n.setState({selectedEditComment:YM({},t,{commentText:e})})})),$M(XM(XM(n)),"onEditSubmit",(function(){var e=n.state.selectedEditComment;uy.a.editPresetComment(e).then((function(){n.setState({selectedEditComment:null})}))})),$M(XM(XM(n)),"onEditCancel",(function(){n.setState({selectedEditComment:null})})),$M(XM(XM(n)),"onDeleteComment",(function(e){n.setState({selectedDeleteComment:e})})),$M(XM(XM(n)),"onDeleteSubmit",(function(){var e=n.state.selectedDeleteComment;uy.a.deletePresetComment(e.dbId)})),$M(XM(XM(n)),"onDeleteCancel",(function(){n.setState({selectedDeleteComment:null})})),$M(XM(XM(n)),"getSubmitSection",(function(){var e=n.state.message,t=n.props,r=t.i18n,a=t.isCommentPresetLoading,i=Object(lt.f)(e);return o.a.createElement("div",{className:"review-submit-section"},o.a.createElement(ut.i,{ariaLabel:r._("Add preset"),id:"comment-preset-input",className:"feedback-text-dropdown",enabled:!a,errorText:i.exceedsLimit?r._("Exceeds {0} characters.",{0:i.maxLength}):"",maxLength:i.maxLength,maxRows:2,placeholder:r._("Add preset..."),onChange:n.onMessageChange,required:!0,rows:1,value:e}),o.a.createElement(Ue.c,{id:"button-grading-comment-send",enabled:!a&&i.isValid,className:"message-send-button",onClick:n.onMessageSubmit,isLoading:a},Je.a.SEND))})),n.state={message:"",selectedEditComment:null,selectedDeleteComment:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KM(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.commentPresets,r=t.i18n,a=t.onClose,i=t.isCommentPresetLoading,c=this.state,s=c.selectedEditComment,u=c.selectedDeleteComment;n&&(n=g.a.orderBy(n,["commentText"],["asc"]));var l=s?s.commentText:"",d=Object(lt.f)(l);return o.a.createElement(Fr.a,{id:"comment-presets-dialog",dialogClassName:"comment-presets-dialog",contentClassName:"comment-presets-content",modal:!0,visible:!0,title:r._("Comment Presets"),actions:[o.a.createElement(Ue.a,{id:"button-grading-comment-presets-dialog-close",onClick:a},o.a.createElement(x.Trans,{id:"Close"}))]},o.a.createElement("div",{className:"comment-wrapper"},o.a.createElement("div",{className:"comment-items-container"},n&&n.length>0?n.map((function(t){return s&&s.dbId===t.dbId?o.a.createElement("div",{className:"comment-item",key:"comment-"+t.dbId},o.a.createElement(ut.i,{id:"edit-comment-"+t.dbId,enabled:!i,onChange:e.onEditChange,errorText:d.exceedsLimit?r._("Exceeds {0} characters.",{0:d.maxLength}):"",maxLength:d.maxLength,maxRows:3,rows:1,required:!0,value:s.commentText}),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-edit-submit",enabled:!i&&d.isValid,isLoading:i,onClick:function(){e.onEditSubmit(t)}},Je.a.CHECK),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-edit-cancel",enabled:!i,onClick:function(){e.onEditCancel()}},Je.a.CLOSE)):u&&u.dbId===t.dbId?o.a.createElement("div",{className:"comment-item delete-message",key:"comment-"+t.dbId},o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Delete?"})),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-delete-submit",enabled:!i,isLoading:i,onClick:function(){e.onDeleteSubmit(t)}},Je.a.CHECK),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-delete-cancel",enabled:!i,onClick:function(){e.onDeleteCancel()}},Je.a.CLOSE)):o.a.createElement("div",{className:"comment-item",key:"comment-"+t.dbId},o.a.createElement("span",null,t.commentText),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-edit-submit",enabled:!i,onClick:function(){e.onEditClick(t)}},Je.a.EDIT),o.a.createElement(Ue.c,{id:"button-grading-comment-dialog-edit-cancel",enabled:!i,onClick:function(){e.onDeleteComment(t)}},Je.a.DELETE))})):o.a.createElement("div",{className:"empty-comments"}))),this.getSubmitSection())}}])&&HM(n.prototype,r),a&&HM(n,a),t}(a.Component);ZM.propTypes={onClose:M.a.func};var JM=Object(x.withI18n)()(Object(c.b)((function(e){return{commentPresets:wt.a(e),isCommentPresetLoading:wt.j(e)}}))(ZM));function ex(e){return(ex="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nx(e){return(nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rx(e,t){return(rx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ax(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ox(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ix=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nx(t).call(this,e),n=!a||"object"!==ex(a)&&"function"!==typeof a?ax(r):a,ox(ax(ax(n)),"removeSubmission",(function(){n.props.onResetSubmission?n.props.onResetSubmission():n.setState({resetDialogVisible:!0})})),ox(ax(ax(n)),"onDialogSubmit",(function(){if(n.props.onResetSubmission)n.props.onResetSubmission();else{var e=n.props,t=e.activityId,r=e.submitter;sn.a.deleteActivityResult(+t,+r.dbId).then((function(){n.setState({resetDialogVisible:!1})}))}})),ox(ax(ax(n)),"onDialogCancel",(function(){n.setState({resetDialogVisible:!1})})),ox(ax(ax(n)),"showPresetDialog",(function(){n.setState({showCommentPresetDialog:!0})})),ox(ax(ax(n)),"onPresetDialogClose",(function(){n.setState({showCommentPresetDialog:!1})})),n.state={resetDialogVisible:!1,showCommentPresetDialog:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rx(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.showGroupMembers,a=t.deleteResultIsLoading,i=t.submitter,c=t.activityType,s=t.activityData,u=t.i18n,l=this.state,d=l.resetDialogVisible,f=l.showCommentPresetDialog,p=!!i,m=[{primaryText:u._("Edit comment presets"),onClick:function(){e.showPresetDialog()},leftIcon:o.a.createElement(zt.a,{ariaLabel:u._("Edit comment presets, icon")},Je.a.COMMENT)}];return r||c!==pc.b.GROUP_PRESENTATION||m.push({primaryText:u._("Show group members"),onClick:function(){n(kO.ob(!0))},leftIcon:o.a.createElement(zt.a,{ariaLabel:u._("Show group members, icon")},Je.a.PEOPLE)}),gr.a.isResetSubmissionVisible()&&m.push({primaryText:u._("Reset submission"),disabled:!p,onClick:this.removeSubmission,leftIcon:o.a.createElement(zt.a,{ariaLabel:u._("Reset submission, icon")},Je.a.REPLAY)}),o.a.createElement("div",null,o.a.createElement(iA,{activityId:+s.dbId,activityName:s.name,activityType:s.type,classId:s.termClass.dbId,context:VO.a.GRADING,menuActions:m}),f&&o.a.createElement(JM,{onClose:this.onPresetDialogClose}),o.a.createElement(Fr.a,{id:"remove-submission-dialog",title:u._("Reset Submission"),visible:d,actions:[o.a.createElement(Ue.a,{id:"button-reset-submission-dialog-cancel",secondary:!0,enabled:!a,onClick:this.onDialogCancel,ariaLabel:u._("Cancel")},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-reset-submission-dialog-reset",primary:!0,isLoading:a,enabled:!a,onClick:this.onDialogSubmit,ariaLabel:u._("Reset")},o.a.createElement(x.Trans,{id:"Reset"}))]},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to reset this submission?"}))))}}])&&tx(n.prototype,r),a&&tx(n,a),t}(a.Component);ix.propTypes={onResetSubmission:M.a.func};var cx=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:By(e),activityData:my(e),activityType:qy(e),submitter:Jy(e),showGroupMembers:Uy(e),deleteResultIsLoading:uv(e),institution:bb.h(e)}}))(ix))),sx=function(e){return Number.isInteger(e)&&0<=e&&e<=100},ux=function(e,t){return g.a.filter(t,(function(t){return g.a.some(e,(function(e){return t.student.dbId===e.dbId}))}))},lx=function(e){var t=g.a.omit(e,["myRubricEvaluation"]),n=g.a.get(e,["myRubricEvaluation"]),r=g.a.pick(n,["cells","points"]);return g.a.merge(t,r)},dx=function(e,t){if(!e||e.length<=1)return!0;var n=ux(e,t),r=n[0].educatorGrade;return g.a.every(n,(function(e){return t=e.educatorGrade,n=r,g.a.isEqual(lx(t),lx(n));var t,n}))};n("nuEN");function fx(e){var t=e.dataForAllStudents,n=e.i18n,r=e.isGradeDraftAllowed,a=e.isGroupProject,i=e.group,c=e.saveButtonLabel,s=e.saveAsDraftButtonLabel,u=e.finalizeDraftsButtonLabel,l=e.allowSaveButton,d=e.allowSaveAsDraftButton,f=e.allowFinalDraftsButton,p=!0;a&&(p=dx(i.members,t));var m=l&&p,b=d&&p&&r,y=f&&!p&&r&&a,v=e.onSaveGrade.bind(e,!1),h=e.onSaveGrade.bind(e,!0),g=c||n._("Save"),E=s||n._("Save As Draft"),w=u||n._("Finalize Drafts");return o.a.createElement("div",{className:"grade-container"},p?e.children:n._("Group members have different grades"),o.a.createElement("div",{className:"grade-card-buttons"},m&&o.a.createElement(Ue.a,{id:"button-grade-card-save",onClick:v,enabled:e.enableSave(!1),ariaLabel:g,primary:!0},g),b&&o.a.createElement(Ue.a,{id:"button-grade-card-save-draft",className:"save-draft-button",onClick:h,enabled:e.enableSave(!0),ariaLabel:E,primary:!0},E),y&&o.a.createElement(Ue.a,{id:"button-grade-card-finalize-drafts",className:"finalize-drafts-button",onClick:function(){return function(e){var t=e.dbId;sn.a.convertDraftToFinalGroupGrade(t)}(i)},ariaLabel:w,primary:!0},w)))}fx.propTypes={enableSave:M.a.func.isRequired,onSaveGrade:M.a.func.isRequired,saveAsDraftButtonLabel:M.a.string,saveButtonLabel:M.a.string,finalizeDraftsButtonLabel:M.a.string,allowSaveButton:M.a.bool,allowSaveAsDraftButton:M.a.bool,allowFinalDraftsButton:M.a.bool},fx.defaultProps={allowSaveButton:!0,allowSaveAsDraftButton:!0,allowFinalDraftsButton:!0};var px=Object(x.withI18n)()(Object(c.b)((function(e){return{dataForAllStudents:vy(e),isGradeDraftAllowed:Qv(e),isGroupProject:qy(e)===pc.b.GROUP_PRESENTATION,group:My(e)}}))(fx));function mx(e){return(mx="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yx(e){return(yx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vx(e,t){return(vx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ex=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=yx(t).call(this,e),n=!a||"object"!==mx(a)&&"function"!==typeof a?hx(r):a,gx(hx(hx(n)),"createState",(function(e){return{dirty:!1,fiveStarRating:e.savedRating,savedGrade:e.savedRating}})),gx(hx(hx(n)),"onFiveStarRatingChange",(function(e){n.setState({fiveStarRating:e,dirty:!0})})),gx(hx(hx(n)),"onSaveGrade",(function(e){var t=n.state.fiveStarRating,r=n.props,a=r.activityId,o=r.group,i=r.submitterId;o?sn.a.saveGroupGradeFiveStar(+o.dbId,+t,e).then((function(){return n.setState({dirty:!1})})):sn.a.saveGradeFiveStar(+a,+i,+t,e).then((function(){return n.setState({dirty:!1})}))})),gx(hx(hx(n)),"enableSave",(function(e){var t=n.state,r=t.fiveStarRating,a=t.dirty,o=!g.a.isUndefined(r);return e||(a=a||n.props.isDraft),o&&a})),n.state=n.createState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vx(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.activityId,r=t.submitterId,a=this.state.savedGrade;n===e.activityId&&r===e.submitterId&&a===e.savedRating||this.setState(this.createState(e))}},{key:"render",value:function(){var e=this.state.fiveStarRating;return o.a.createElement(px,{enableSave:this.enableSave,onSaveGrade:this.onSaveGrade},o.a.createElement(Dn.a,{id:"fivestar-grade-rating",name:"fivestar-grade-rating",onChange:this.onFiveStarRatingChange,value:+e}))}}])&&bx(n.prototype,r),a&&bx(n,a),t}(a.Component),wx=Object(c.b)((function(e){var t=Vv(e);return{savedRating:g.a.get(t,"fiveStarValue",null),isDraft:g.a.get(t,"isDraft",null),activityId:By(e),submitterId:ev(e),group:My(e)}}))(Ex);n("SuLN");function Sx(e){return(Sx="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cx(e){return(Cx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ix(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Px=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Cx(t).call(this,e),n=!a||"object"!==Sx(a)&&"function"!==typeof a?Tx(r):a,Ix(Tx(Tx(n)),"createState",(function(e){return{dirty:!1,percentage:e.savedPercentage,savedGrade:e.savedPercentage}})),Ix(Tx(Tx(n)),"onGradeChange",(function(e){n.setState({percentage:+e,dirty:!0})})),Ix(Tx(Tx(n)),"onSaveGrade",(function(e){var t=n.state.percentage,r=n.props,a=r.activityId,o=r.group,i=r.submitterId;o?sn.a.saveGroupGradePercentage(+o.dbId,t,e).then((function(){return n.setState({dirty:!1})})):sn.a.saveGradePercentage(+a,+i,t,e).then((function(){return n.setState({dirty:!1})}))})),Ix(Tx(Tx(n)),"enableSave",(function(e){var t=n.state,r=t.percentage,a=t.dirty;return e||(a=a||n.props.isDraft),!g.a.isUndefined(r)&&sx(r)&&a})),n.state=n.createState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.activityId,r=t.submitterId,a=this.state.savedGrade;n===e.activityId&&r===e.submitterId&&a===e.savedPercentage||this.setState(this.createState(e))}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.canEdit,r=e.tooltip,a=this.state,i=a.dirty,c=a.percentage,s=null;return i&&!sx(c)&&(s=t._("Percentage must be a number between 0 and 100")),o.a.createElement(px,{enableSave:this.enableSave,onSaveGrade:this.onSaveGrade},o.a.createElement(ut.c,{id:"freeform-grade-textfield",className:"grade-form-percentage-textfield",ariaLabel:t._("Percentage"),label:t._("Percentage"),enabled:n,errorText:s,onChange:this.onGradeChange,tooltip:r,value:c}))}}])&&Ox(n.prototype,r),a&&Ox(n,a),t}(a.Component);Px.propTypes={canEdit:M.a.bool,tooltip:M.a.any},Px.defaultProps={canEdit:!0,tooltip:null};var Rx=Object(x.withI18n)()(Object(c.b)((function(e){var t=Vv(e);return{savedPercentage:g.a.get(t,"gradeValue",null),isDraft:g.a.get(t,"isDraft",null),activityId:By(e),submitterId:ev(e),group:My(e)}}))(Px));function Ax(e){return(Ax="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kx(e){return(kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nx(e,t){return(Nx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mx="pass",xx=function(e){if(!g.a.isUndefined(e)&&!g.a.isNull(e))return e?Mx:"fail"},Fx=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=kx(t).call(this,e),n=!a||"object"!==Ax(a)&&"function"!==typeof a?Dx(r):a,Lx(Dx(Dx(n)),"createState",(function(e){return{dirty:!1,passFail:xx(e.savedPassFail),savedPassFail:e.savedPassFail}})),Lx(Dx(Dx(n)),"onGradeChange",(function(e){n.setState({passFail:e,dirty:!0})})),Lx(Dx(Dx(n)),"enableSave",(function(e){var t=n.state,r=t.passFail,a=t.dirty;return e||(a=a||n.props.isDraft),!g.a.isUndefined(r)&&a})),Lx(Dx(Dx(n)),"saveGroupGrade",(function(e){var t=n.props,r=t.auto,a=t.group,o=n.state.passFail===Mx;r?sn.a.saveGroupGradeAutoPassFail(a.dbId,o,e).then((function(){return n.setState({dirty:!1})})):sn.a.saveGroupGradePassFail(a.dbId,o,e).then((function(){return n.setState({dirty:!1})}))})),Lx(Dx(Dx(n)),"saveStudentGrade",(function(e){var t=n.props,r=t.auto,a=t.activityId,o=t.submitterId,i=n.state.passFail===Mx;r?sn.a.saveGradeAutoPassFail(a,o,i,e).then((function(){return n.setState({dirty:!1})})):sn.a.saveGradePassFail(a,o,i,e).then((function(){return n.setState({dirty:!1})}))})),Lx(Dx(Dx(n)),"onSaveGrade",(function(e){n.props.group?n.saveGroupGrade(e):n.saveStudentGrade(e)})),n.state=n.createState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nx(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.activityId,r=t.submitterId,a=this.state.savedPassFail;n===e.activityId&&r===e.submitterId&&a===e.savedPassFail||this.setState(this.createState(e))}},{key:"getPassFailSelectLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Pass Fail Score Select"):e._("Pass Fail Grade Select")}},{key:"render",value:function(){var e=this.props.i18n,t=this.state.passFail,n=[{label:e._("Pass"),value:Mx},{label:e._("Fail"),value:"fail"}];return o.a.createElement(px,{enableSave:this.enableSave,onSaveGrade:this.onSaveGrade},o.a.createElement(ut.e,{id:"passfail-grade-select",value:t,ariaLabel:this.getPassFailSelectLabel(),onChange:this.onGradeChange,menuItems:n,required:!0}))}}])&&jx(n.prototype,r),a&&jx(n,a),t}(a.Component);Fx.propTypes={auto:M.a.bool.isRequired};var Vx=Object(x.withI18n)()(Object(c.b)((function(e,t){var n=Vv(e),r=t.auto?"completion":"passFail";return{savedPassFail:g.a.get(n,r,null),isDraft:g.a.get(n,"isDraft",null),activityId:By(e),submitterId:ev(e),group:My(e)}}))(Fx)),Gx=n("EZsn");n("a9g0");function Ux(e){return(Ux="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wx(e){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bx(e,t){return(Bx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hx="composite-grade-form",zx=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Wx(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Ux(a)&&"function"!==typeof a?Qx(r):a,Yx(Qx(Qx(n)),"onGradeChange",(function(e,t){(0,n.props.onGradeChange)(e,t)})),Yx(Qx(Qx(n)),"getGradeValueInput",(function(e,t){switch(e.evaluationType){case nc.a.FIVESTAR:return n.getRatingValueInput(e,t);case nc.a.RUBRIC:return n.getRubricValueInput(e,t);case nc.a.PASS_FAIL:case nc.a.COMPLETION:return n.getPassFailValueInput(e,t);case nc.a.GRADE:default:return n.getPercentageValueInput(e,t)}})),Yx(Qx(Qx(n)),"getPassFailValueInput",(function(e,t){var r=n.props.i18n,a=e.points,i=e.tooltip,c=e.weight,s=a;return null===s&&(s=Gx.a.value),o.a.createElement("div",{className:Ie()(Hx+"-row-value-container",Hx+"-passfail-container")},o.a.createElement("div",{className:Hx+"-row-value-input"},o.a.createElement(ut.f,{id:Hx+"-row-value["+t+"]",ariaLabelledby:Hx+"-row-label["+t+"]",name:"passfail-grade-dropdown",onChange:function(t){n.onGradeChange(t,e.key)},tooltip:i,value:s})),o.a.createElement("div",{className:Ie()(Hx+"-row-value-footer")},o.a.createElement("i",null,r._("Weight: {weight}%",{weight:c}))))})),Yx(Qx(Qx(n)),"getRatingValueInput",(function(e,t){var r=n.props.i18n,a=e.points,i=e.tooltip,c=e.weight;return o.a.createElement("div",{className:Ie()(Hx+"-row-value-container",Hx+"-fivestar-container")},o.a.createElement("div",{className:Hx+"-row-value-input"},o.a.createElement(Dn.a,{id:Hx+"-row-value["+t+"]",ariaLabelledby:Hx+"-row-label["+t+"]",className:Hx+"-row-value",name:"fivestar-grade-rating",onChange:function(t){n.onGradeChange(t,e.key)},tooltip:i,value:+a})),o.a.createElement("div",{className:Ie()(Hx+"-row-value-footer")},o.a.createElement("i",null,r._("Weight: {weight}%",{weight:c}))))})),Yx(Qx(Qx(n)),"getRubricValueInput",(function(e){var t=n.props.i18n,r=e.points,a=e.maxPoints,i=e.weight,c="\u2014";return null!==r&&(c=t._("{points}/{maxPoints}",{points:r,maxPoints:a})),o.a.createElement("div",{className:Ie()(Hx+"-row-value-container",Hx+"-rubric-container")},o.a.createElement("div",{className:Hx+"-row-value-input"},o.a.createElement("h5",null,c)),o.a.createElement("div",{className:Ie()(Hx+"-row-value-footer")},o.a.createElement("i",null,t._("Weight: {weight}%",{weight:i}))))})),Yx(Qx(Qx(n)),"getPercentageValueInput",(function(e,t){var r=n.props.i18n,a=e.editable,i=e.points,c=e.tooltip,s=e.weight;return o.a.createElement("div",{className:Hx+"-row-value-container"},o.a.createElement("div",{className:Hx+"-row-value-input"},o.a.createElement(ut.c,{id:Hx+"-row-value["+t+"]",ariaLabelledby:Hx+"-row-label["+t+"]",enabled:a,onChange:function(t){n.onGradeChange(t,e.key)},tooltip:c,value:i,onValidate:function(e){return Boolean(e<=100)}})),o.a.createElement("div",{className:Ie()(Hx+"-row-value-footer")},o.a.createElement("i",null,r._("Weight: {weight}%",{weight:s}))))})),Yx(Qx(Qx(n)),"getGradePartRow",(function(e,t){var r=e.label;return o.a.createElement("div",{key:Hx+"-row-container["+t+"]",className:Hx+"-row-container"},o.a.createElement("div",{className:Hx+"-row-label"},o.a.createElement("h6",{id:Hx+"-row-label["+t+"]"},r)),n.getGradeValueInput(e,t))})),Yx(Qx(Qx(n)),"getOverallGradeRow",(function(e){var t=n.props.i18n,r=e.maxPoints,a=e.points,i=e.label,c=Math.floor(100*a/r);return o.a.createElement("div",{className:Hx+"-row-container"},o.a.createElement("div",{className:Hx+"-row-label"},o.a.createElement("h4",null,i)),o.a.createElement("div",{className:Hx+"-row-value-container"},o.a.createElement("h3",{className:Hx+"-row-value"},null==a?o.a.createElement("span",null,"\u2014"):t._("{percentage}%",{percentage:c}))))})),Yx(Qx(Qx(n)),"getInputs",(function(){var e=n.props,t=e.gradeParts,r=e.overallGrade;return o.a.createElement("div",{className:Hx+"-container"},o.a.createElement("div",{className:Hx},t.map(n.getGradePartRow),o.a.createElement("div",{className:Ie()(Hx+"-row-container",Hx+"-row-separator")}),n.getOverallGradeRow(r)))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bx(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.gradeParts,r=e.isFinalizable,a=e.isSaveButtonEnabled,i=e.onSave,c=e.saveAsDraftButtonLabel,s=e.saveButtonLabel;if(!n||!n.length)return null;var u=c||t._("Save As Draft"),l=s||t._("Finalize");return o.a.createElement(px,{enableSave:a,onSaveGrade:i,saveAsDraftButtonLabel:u,saveButtonLabel:l,allowSaveButton:r},this.getInputs())}}])&&qx(n.prototype,r),a&&qx(n,a),t}(a.Component);zx.propTypes={isFinalizable:M.a.bool,isSaveButtonEnabled:M.a.func,gradeParts:M.a.array.isRequired,onChange:M.a.func,onSave:M.a.func,overallGrade:M.a.object.isRequired,saveButtonLabel:M.a.string},zx.defaultProps={isFinalizable:!0,isSaveButtonEnabled:function(){return!0},onGradeChange:function(){},onSave:function(){}};var Kx,Xx=Object(x.withI18n)()(zx);n("3dGR");function $x(e){return($x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rF(e,t,n[t])}))}return e}function Jx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eF(e){return(eF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tF(e,t){return(tF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aF="GRADE_PART__MC",oF="GRADE_PART__VR",iF=(rF(Kx={isDirty:!1},aF,null),rF(Kx,oF,null),Kx),cF=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=eF(t).call(this,e),n=!a||"object"!==$x(a)&&"function"!==typeof a?nF(r):a,rF(nF(nF(n)),"processProps",(function(e){var t=(n.state||!1).isDirty;if(!e||t)return{};var r=e.multipleChoiceGradePart,a=e.videoResponseGradePart,o={};return r&&(o[aF]=r.partValue),a&&(o[oF]=a.partValue),o})),rF(nF(nF(n)),"onChange",(function(e,t){var r;n.setState((rF(r={},t,e),rF(r,"isDirty",!0),r))})),rF(nF(nF(n)),"onSaveGrade",(function(e){var t=n.props,r=t.activityId,a=t.submitterId,o=n.state[oF];sn.a.saveGradePercentage(+r,+a,o,e).then((function(){return n.setState({isDirty:!1})}))})),rF(nF(nF(n)),"isSaveButtonEnabled",(function(){return n.state.isDirty})),rF(nF(nF(n)),"getGradePartPercentage",(function(e){var t=e.points;return null===t&&(t=0),t/100})),rF(nF(nF(n)),"getGradePartWeightedPercentage",(function(e){var t=n.getGradePartPercentage(e);return e.weight*t})),rF(nF(nF(n)),"getGradeParts",(function(){var e=n.props,t=e.gradeType,r=e.data.multipleChoiceWeight,a=n.state[oF],o={key:oF,label:n.getVideoResponseGradeLabel(),points:a,maxPoints:100,weight:100-r,evaluationType:t,editable:!0},i=n.state[aF];return[o,{key:aF,label:n.getMultipleChoiceGradeLabel(),points:i,maxPoints:100,tooltip:{label:n.getGradeAutomaticallyCalculatedLabel()},weight:r,evaluationType:nc.a.GRADE,editable:!1}]})),rF(nF(nF(n)),"getOverallGrade",(function(e){var t=0;return e.map((function(e){return t+=n.getGradePartWeightedPercentage(e),!0})),t=Math.floor(t),{label:n.getOverallGradeLabel(),points:t,maxPoints:100}})),n.state=Zx({},iF,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tF(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.isDirty||this.setState(Zx({},this.processProps(e)))}},{key:"getVideoResponseGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Video Response Score:"):e._("Video Response Grade:")}},{key:"getMultipleChoiceGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Multiple Choice Score:"):e._("Multiple Choice Grade:")}},{key:"getGradeAutomaticallyCalculatedLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This score is automatically calculated based on multiple choice answers and cannot be modified"):e._("This grade is automatically calculated based on multiple choice answers and cannot be modified")}},{key:"getOverallGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Overall Score:"):e._("Overall Grade:")}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.data;if(!n.hasMultipleChoiceQuestions||!n.hasVideoResponseQuestions)return null;var r=this.getGradeParts(),a=this.getOverallGrade(r);return o.a.createElement(Xx,{gradeParts:r,isFinalizable:!0,isSaveButtonEnabled:this.isSaveButtonEnabled,onGradeChange:this.onChange,onSave:this.onSaveGrade,overallGrade:a,saveButtonLabel:t._("Save")})}}])&&Jx(n.prototype,r),a&&Jx(n,a),t}(a.Component);cF.propTypes={data:M.a.object.isRequired};var sF,uF=Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:By(e),gradeType:Yv(e),videoResponseGradePart:qv(e),multipleChoiceGradePart:Bv(e),studentData:yy(e),submitterId:ev(e)}}))(cF));n("5LeV");function lF(e){return(lF="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yF(e,t,n[t])}))}return e}function fF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pF(e){return(pF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mF(e,t){return(mF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vF="GRADE_PART__PEER",hF="GRADE_PART__MAIN",gF=(yF(sF={isDirty:!1,isSaving:!1},vF,null),yF(sF,hF,null),sF),EF=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=pF(t).call(this,e),n=!a||"object"!==lF(a)&&"function"!==typeof a?bF(r):a,yF(bF(bF(n)),"processProps",(function(e){var t=(n.state||!1).isDirty;if(!e)return{};var r=e.peerReviewGradePart,a={};return r&&(a[vF]=r.partValue),e.gradeType!==nc.a.RUBRIC&&t?a:(a[hF]=n.getMainGradePoints(e),a)})),yF(bF(bF(n)),"getMainGradePoints",(function(e){var t=e.educatorGrade,n=e.gradeType,r=e.rubricPoints;if(!t&&null===r)return null;switch(n){case nc.a.COMPLETION:return null===t.completion?null:t.completion?1:0;case nc.a.FIVESTAR:return t.fiveStarValue;case nc.a.GRADE:return t.gradeValue;case nc.a.PASS_FAIL:return null===t.passFail?null:t.passFail?1:0;case nc.a.RUBRIC:return r;default:return 0}})),yF(bF(bF(n)),"getGradeMaxPoints",(function(e){var t=n.props.rubricMaxPoints;switch(e){case nc.a.COMPLETION:case nc.a.PASS_FAIL:return 1;case nc.a.FIVESTAR:return 5;case nc.a.GRADE:return 100;case nc.a.RUBRIC:return t;default:return 0}})),yF(bF(bF(n)),"getGradeParts",(function(){var e=n.props,t=e.educatorGrade,r=e.gradedPeerReviewWeight,a=e.gradeType,i=e.studentPeerReviews,c=e.isFiveStarEnabled,s=e.isRubricReviewEnabled,u=e.peerReviewRequiredCount,l=n.state[hF],d={key:hF,label:n.getSubmissionGradeLabel(),points:l,maxPoints:n.getGradeMaxPoints(a),weight:100-r,evaluationType:a,editable:!0},f=!1,p=t&&!t.isDraft,m=null,b=n.state[vF];null===b?(b=uc(i,u,c,s),m=n.getPeerReviewToolTipLabel()):(f=!0,p||(m=n.getPeerReviewOverriddenToolTipLabel()));var y=o.a.createElement("div",{className:"peer-review-grade-form-peer"},f&&!p&&o.a.createElement(rf.b,{ariaLabel:m,className:"peer-review-grade-form-peer-status-icon",tooltip:{label:m},type:rf.a.WARNING}),n.getPeerReviewGradeLabel());return[d,{key:vF,label:y,points:b,maxPoints:100,tooltip:{label:m},weight:r,evaluationType:nc.a.GRADE,editable:!1}]})),yF(bF(bF(n)),"getGradePartPercentage",(function(e){var t=n.getGradeMaxPoints(e.evaluationType),r=e.points;return null===r&&(r=0),Math.floor(r/t*1e4)/1e4})),yF(bF(bF(n)),"getOtherEducatorEvaluations",(function(e){var t=n.props.currentUser,r=[];return e&&e.evaluations&&(r=g.a.filter(e.evaluations,(function(e){var n=e.user;return ar.b(n)&&n.dbId!==t.dbId}))),r})),yF(bF(bF(n)),"hasOtherEducatorEvaluations",(function(e){return Boolean(n.getOtherEducatorEvaluations(e).length>0)})),yF(bF(bF(n)),"getGradePartWeightedPercentage",(function(e){var t=n.props.mainGradePart,r=0;if(e.key===hF){var a=0,o=0;g.a.isNumber(e.points)&&(a=1,o=e.points),n.getOtherEducatorEvaluations(t).map((function(e){return e&&e.user&&g.a.isNumber(e.value)&&(o+=+e.value,a++),!0}));var i=a?o/a:0,c={evaluationType:e.evaluationType,points:i};r=n.getGradePartPercentage(c)}else r=n.getGradePartPercentage(e);return e.weight*r})),yF(bF(bF(n)),"getOverallGrade",(function(e){var t=n.props.mainGradePart,r=0;e.map((function(e){return r+=n.getGradePartWeightedPercentage(e),!0})),r=Math.floor(r);var a=n.getOverallGradeWarningLabel();return{label:o.a.createElement("div",{className:"peer-review-grade-form-overall"},n.hasOtherEducatorEvaluations(t)&&o.a.createElement(rf.b,{ariaLabel:a,className:"peer-review-grade-form-overall-status-icon",tooltip:{label:a},type:rf.a.WARNING}),n.getOverallGradeLabel()),points:r,maxPoints:100}})),yF(bF(bF(n)),"transformPassFailGrade",(function(e){return 1===e})),yF(bF(bF(n)),"getTransformedGradeObject",(function(e){var t=n.props,r=t.gradeType,a=t.studentPeerReviews,o=t.isFiveStarEnabled,i=t.isRubricReviewEnabled,c=t.peerReviewRequiredCount,s=t.rubricEvaluation,u={isDraft:e},l=n.state[vF];return u.peerReviewGradeValue=e?l:null!==l?l:uc(a,c,o,i),r===nc.a.COMPLETION?u.completion=n.transformPassFailGrade(n.state[hF]):r===nc.a.PASS_FAIL?u.passFail=n.transformPassFailGrade(n.state[hF]):r===nc.a.FIVESTAR?u.fiveStarValue=n.state[hF]:r===nc.a.GRADE?u.gradeValue=n.state[hF]:r===nc.a.RUBRIC&&(u.rubricEvaluation=s),u})),yF(bF(bF(n)),"onChange",(function(e,t){var r;n.setState((yF(r={},t,e),yF(r,"isDirty",!0),r))})),yF(bF(bF(n)),"onSave",(function(e){var t=n.props,r=t.activityId,a=t.activityType,o=t.studentGroup,i=t.submitterId;n.setState({isSaving:!0}),a===pc.b.GROUP_PRESENTATION?sn.a.saveGroupGradePercentage(+o.dbId,n.state[hF],e).then(n.onGradeSaveSuccess).catch(n.onGradeSaveError):sn.a.saveGrade(+r,+i,n.getTransformedGradeObject(e)).then(n.onGradeSaveSuccess).catch(n.onGradeSaveError)})),yF(bF(bF(n)),"onGradeSaveSuccess",(function(e){var t=n.props,r=t.i18n,a=t.gradeType,i=t.onSaveSuccess,c=e.isDraft,s=e.overallValue,u=n.getMainGradePoints(g.a.merge({},n.props,{educatorGrade:e})),l=n.getGradeMaxPoints(a),d=g.a.round(u/l*100,2),f=null;switch(a){case nc.a.PASS_FAIL:case nc.a.COMPLETION:var p=u?r._("Pass"):r._("Fail");f=n.getCompletionGradeSaveSuccessLabel(p,d);break;case nc.a.RUBRIC:case nc.a.GRADE:case nc.a.FIVESTAR:default:f=n.getDefaultGradeSaveSuccessLabel(u,l,d)}var m=o.a.createElement("div",null,o.a.createElement("div",null,f),!c&&o.a.createElement("div",null,n.getOverallGradeFinalizedLabel(s)));yc.a.addSuccess(m),i&&i(),n.setState({isDirty:!1,isSaving:!1})})),yF(bF(bF(n)),"onGradeSaveError",(function(){yc.a.addError(n.getGradeSaveErrorLabel()),n.setState({isDirty:!1,isSaving:!1})})),yF(bF(bF(n)),"isSaveButtonEnabled",(function(e){var t=n.state,r=t.isSaving,a=t.isDirty,o=n.props,i=o.educatorGrade,c=o.isRubricDirty,s=o.isRubricComplete,u=o.gradeType;if(r)return!1;var l=u!==nc.a.RUBRIC||s,d=u===nc.a.RUBRIC?c:a;return e?d:i?l&&(i.isDraft||d):l&&d})),yF(bF(bF(n)),"hasMainGrade",(function(){var e=n.props,t=e.educatorGrade,r=e.mainGradePart;return Boolean(t&&r&&null!=r.partValue)})),yF(bF(bF(n)),"isFinalizable",(function(){var e=n.state.isDirty,t=n.props,r=t.educatorGrade,a=t.isRubricDirty,o=t.isRubricComplete,i=t.gradeType;if(!n.hasMainGrade())return!1;if(!(i!==nc.a.RUBRIC||o))return!1;var c=i===nc.a.RUBRIC?a:e;return!r.isDraft||!c})),yF(bF(bF(n)),"getStatusMessage",(function(){var e=n.props.educatorGrade;if(!n.hasMainGrade())return null;var t="";return t=e.isDraft?n.getDraftGradeLabel():n.getFinalizedGradeLabel(),o.a.createElement(ya.b,{className:"peer-review-grade-form-message",type:ya.a.INFO,message:t})})),n.state=dF({},gF,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mF(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(dF({},this.state,this.processProps(e)))}},{key:"getSubmissionGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Submission Score:"):e._("Submission Grade:")}},{key:"getPeerReviewToolTipLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This score is automatically calculated but can be overridden in the Peer Review card below"):e._("This grade is automatically calculated but can be overridden in the Peer Review card below")}},{key:"getPeerReviewOverriddenToolTipLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("The Peer Review score has been overridden and will not be automatically updated"):e._("The Peer Review grade has been overridden and will not be automatically updated")}},{key:"getPeerReviewGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Peer Review Score:"):e._("Peer Review Grade:")}},{key:"getOverallGradeWarningLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This overall score is calculated using an average of all evaluations completed for this submission"):e._("This overall grade is calculated using an average of all evaluations completed for this submission")}},{key:"getOverallGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Overall Score:"):e._("Overall Grade:")}},{key:"getCompletionGradeSaveSuccessLabel",value:function(e,t){var n=this.props.i18n;return Object(UO.a)()?n._("Submission score saved: {passFailLabel} ({mainGradePartPercentage}%)",{passFailLabel:e,mainGradePartPercentage:t}):n._("Submission grade saved: {passFailLabel} ({mainGradePartPercentage}%)",{passFailLabel:e,mainGradePartPercentage:t})}},{key:"getDefaultGradeSaveSuccessLabel",value:function(e,t,n){var r=this.props.i18n;return Object(UO.a)()?r._("Submission score saved: {mainGradePoints} / {mainGradePointsMax} ({mainGradePartPercentage}%)",{mainGradePoints:e,mainGradePointsMax:t,mainGradePartPercentage:n}):r._("Submission grade saved: {mainGradePoints} / {mainGradePointsMax} ({mainGradePartPercentage}%)",{mainGradePoints:e,mainGradePointsMax:t,mainGradePartPercentage:n})}},{key:"getOverallGradeFinalizedLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("Overall score finalized: {overallValue}%",{overallValue:e}):t._("Overall grade finalized: {overallValue}%",{overallValue:e})}},{key:"getGradeSaveErrorLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Unable to save score"):e._("Unable to save grade")}},{key:"getDraftGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This score is currently a draft and is not visible to the student. Finalize this score to make it visible to the student. After finalizing, the Peer Review score will no longer be automatically updated."):e._("This grade is currently a draft and is not visible to the student. Finalize this grade to make it visible to the student. After finalizing, the Peer Review grade will no longer be automatically updated.")}},{key:"getFinalizedGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This score has been finalized and is visible to the student. The Peer Review score will no longer be automatically updated."):e._("This grade has been finalized and is visible to the student. The Peer Review grade will no longer be automatically updated.")}},{key:"render",value:function(){if(!this.props.isPeerReviewGradingEnabled)return null;var e=this.getGradeParts(),t=this.getOverallGrade(e);return o.a.createElement("div",null,this.getStatusMessage(),o.a.createElement(Xx,{gradeParts:e,isFinalizable:this.isFinalizable(),isSaveButtonEnabled:this.isSaveButtonEnabled,onGradeChange:this.onChange,onSave:this.onSave,overallGrade:t}))}}])&&fF(n.prototype,r),a&&fF(n,a),t}(a.Component);EF.propTypes={isRubricDirty:M.a.bool,isRubricComplete:M.a.bool,rubricEvaluation:M.a.object,rubricMaxPoints:M.a.number,rubricPoints:M.a.number,onSaveSuccess:M.a.func},EF.defaultProps={isRubricDirty:!1,isRubricComplete:!1,rubricMaxPoints:0,rubricPoints:null};var wF=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:By(e),activityType:qy(e),currentUser:wt.h(e),educatorGrade:Vv(e),gradeType:Yv(e),isFiveStarEnabled:ov(e),isPeerReviewGradingEnabled:Dv(e),isRubricReviewEnabled:rv(e),gradedPeerReviewWeight:Lv(e),peerReviewGradePart:Wv(e),mainGradePart:qv(e),peerReviewRequiredCount:Av(e),rubricEvaluations:fv(e),submitterId:ev(e),studentData:yy(e),studentGroup:My(e),studentPeerReviews:Nv(e)}}))(EF)));function SF(e){return(SF="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OF(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function CF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){RF(e,t,n[t])}))}return e}function _F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TF(e){return(TF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IF(e,t){return(IF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AF="ALL",jF="student-selection",kF={selectedPeerReview:null},NF=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=TF(t).call(this,e),n=!a||"object"!==SF(a)&&"function"!==typeof a?PF(r):a,RF(PF(PF(n)),"processProps",(function(e){return n.state&&n.state.selectedPeerReview?{}:{selectedPeerReview:e.selectedPeerReview}})),RF(PF(PF(n)),"onClose",(function(){var e=n.props.onClose;n.setState(CF({},kF)),e&&e()})),RF(PF(PF(n)),"onStudentReviewChange",(function(e){var t=n.props.reviews;if(e!==AF){var r=g.a.find(t,(function(t){return t.result.submitter.dbId===e}));r&&n.setState({selectedPeerReview:r})}else n.setState({selectedPeerReview:AF})})),RF(PF(PF(n)),"getSortedReviews",(function(e){var t=OF(e);return t.sort((function(e,t){return n.getPeerLabel(e)>n.getPeerLabel(t)})),t})),RF(PF(PF(n)),"getPeerSelectField",(function(){var e=n.props,t=e.i18n,r=e.reviews,a=n.state.selectedPeerReview,i=[];if(r){i.push({className:"has-review",label:t._("All"),value:AF}),i.push(o.a.createElement(so.a,{key:"peer-comments-all-divider"}));var c=n.getSortedReviews(r).map((function(e){var t={value:e.result.submitter.dbId,className:"has-review"};return t.label=n.getPeerLabel(e),t}));i=i.concat(c)}var s=null;return s=a&&a===AF?AF:a.result.submitter.dbId,i.length>0?o.a.createElement("div",{className:jF+"-container"},o.a.createElement(Xt.a,{zDepth:1,className:jF+"-paper"},o.a.createElement(us.b,{ariaLabel:t._("Select student for peer review comments"),className:jF+"-select-field",id:jF+"-select-field",label:"",menuItems:i,onChange:n.onStudentReviewChange,position:us.a.BELOW,sameWidth:!0,value:s}))):null})),RF(PF(PF(n)),"getPeerLabel",(function(e){return e.result.activityStudentGroup?e.result.activityStudentGroup.name:e.result.submitter.firstName+" "+e.result.submitter.lastName})),RF(PF(PF(n)),"getComments",(function(e,t){return o.a.createElement("div",{key:"peer-review["+t+"]",className:"peer-review-comments-container"},o.a.createElement("h5",{className:"peer-review-label"},n.getPeerLabel(e)),e.comments&&e.comments.map(n.getComment))})),RF(PF(PF(n)),"getComment",(function(e){return o.a.createElement(Jf,{key:"review-comment"+e.dbId,canEdit:!1,canDelete:!1,termClassId:n.props.termClassId,activityId:n.props.activityId,usageContext:kd.a.COMMENT,onSyncTimeClick:function(){},comment:e,onDeleteComment:function(){},onEditComment:function(){},showCommenterName:!1,showSyncTime:!1})})),RF(PF(PF(n)),"getAllComments",(function(){var e=n.props.reviews;return n.getSortedReviews(e).map(n.getComments)})),RF(PF(PF(n)),"getPeerComments",(function(){var e=n.state.selectedPeerReview,t=null;return t=e===AF?n.getAllComments():e.comments.map(n.getComment),o.a.createElement("div",{className:"comments-container"},t)})),RF(PF(PF(n)),"getDialogComponent",(function(e){var t=n.props,r=t.i18n,a=t.visible;if(!n.state.selectedPeerReview)return null;var i={ariaLabel:r._("Comments"),contentClassName:"review-comments-dialog-content",dialogClassName:Ie()("review-comments-dialog",e?"mobile-view":null),fullPage:e,hasCloseButton:!0,id:"review-comments-dialog",modal:!0,visible:a,onClose:n.onClose,title:r._("Comments")};return o.a.createElement(pi.a,i,n.getPeerSelectField(),n.getPeerComments())})),n.state=CF({},kF,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IF(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(CF({},this.processProps(e)))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 550px)"},(function(t){return e.getDialogComponent(t)})))}}])&&_F(n.prototype,r),a&&_F(n,a),t}(a.Component);NF.propTypes={onClose:M.a.func,reviews:M.a.array,selectedPeerReview:M.a.object,visible:M.a.bool},NF.defaultProps={onClose:function(){},reviews:[],selectedPeerReview:null,visible:!1};var DF=Object(x.withI18n)()(NF);function LF(e){return(LF="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){UF(e,t,n[t])}))}return e}function xF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FF(e){return(FF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VF(e,t){return(VF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qF="peer-review-summary",WF="peer-review-summary-list-item",BF={isOverridingGrade:!1,isGradeOverrideDirty:!1,isSaving:!1,gradeValueOverride:null,commentsDialogVisible:!1,selectedPeerReview:null},QF=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=FF(t).call(this,e),n=!a||"object"!==LF(a)&&"function"!==typeof a?GF(r):a,UF(GF(GF(n)),"processProps",(function(e){var t=n.state||{},r=t.isOverridingGrade,a=t.isGradeOverrideDirty,o={};return e&&(r||a||(o.gradeValueOverride=n.getPeerReviewGradeOverride(e))),o})),UF(GF(GF(n)),"onCommentsClick",(function(e){n.setState({commentsDialogVisible:!0,selectedPeerReview:e})})),UF(GF(GF(n)),"onRubricEvaluationClick",(function(e){n.setState({rubricEvaluationDialogVisible:!0,selectedPeerReview:e})})),UF(GF(GF(n)),"getComments",(function(e,t){var r=n.props.i18n,a=e.comments,i=a?a.length:0,c=Boolean(i>0),s=r._("No comments"),u=null;if(c){s=r._("View comments");var l=i<10?i:r._("9+");u=o.a.createElement("div",{className:WF+"-comments-badge"},l)}return o.a.createElement("div",{className:WF+"-comments"},o.a.createElement(Ue.c,{id:"button-grading-peer-review-summary-comments["+t+"]",className:WF+"-comments-icon",tooltip:{label:s},enabled:c,onClick:function(t){n.onCommentsClick(e,t)}},Je.a.COMMENT,u))})),UF(GF(GF(n)),"getEvaluation",(function(e,t){var r=n.props,a=r.i18n,i=r.isFiveStarEnabled,c=r.isRubricReviewEnabled,s=r.rubric,u=null,l=[WF+"-evaluation"];if(i)l.push(WF+"-evaluation-fivestar"),u=e&&e.fivestarEvaluation?o.a.createElement(Dn.a,{name:WF+"-evaluation-fivestar",value:e.fivestarEvaluation.value,enabled:!1}):o.a.createElement("div",{className:WF+"-evaluation-placeholder"},a._("(No rating)"));else if(c)if(l.push(WF+"-evaluation-rubric"),e&&e.rubricEvaluation){var d=e.rubricEvaluation.points,f=s.maxValue;u=o.a.createElement(Ue.a,{id:"button-grading-peer-review-rubric-evaluation["+t+"]",primary:!0,ariaLabel:a._("Rubric score: {points} of {maxPoints}",{points:d,maxPoints:f}),onClick:function(t){return n.onRubricEvaluationClick(e,t)}},o.a.createElement(Bn.c,{points:d,max:f}))}else u=o.a.createElement("div",{className:WF+"-evaluation-placeholder"},a._("(No evaluation)"));return o.a.createElement("div",{className:Ie()(l)},u)})),UF(GF(GF(n)),"getItemStatus",(function(e){var t=n.props,r=t.isFiveStarEnabled,a=t.isRubricReviewEnabled,i=t.i18n,c=cc(e,r,a),s="",u=[WF+"-status-icon"];return c?(s=i._("Review is complete"),u.push("status-icon--complete")):(s=i._("Review not complete"),u.push("status-icon--incomplete")),o.a.createElement("div",{className:WF+"-status"},o.a.createElement(zt.a,{className:Ie()(u),tooltip:{label:s}},c?Je.a.STATUS_COMPLETE:Je.a.STATUS_INCOMPLETE))})),UF(GF(GF(n)),"getItemLabel",(function(e){var t=n.props.i18n,r=e.result.submitter,a=t._("Unknown");if(r){var i=r.firstName,c=r.lastName;a=t._("{firstName} {lastName}",{firstName:i,lastName:c})}return o.a.createElement("div",{className:WF+"-label"},a)})),UF(GF(GF(n)),"getReviewItem",(function(e,t){var r=n.props.i18n,a=t+1;return o.a.createElement("div",{key:WF+"["+t+"]",className:WF},o.a.createElement("div",{className:WF+"-number"},r._("{itemNumber}.",{itemNumber:a})),n.getItemStatus(e),o.a.createElement("div",{className:WF+"-content"},n.getItemLabel(e),o.a.createElement("div",{className:WF+"-content-right"},n.getEvaluation(e,t),n.getComments(e,t))))})),UF(GF(GF(n)),"getReviewList",(function(e){var t=n.props.i18n;return e&&e.length>0?o.a.createElement("div",{className:qF+"-list"},e.map(n.getReviewItem)):o.a.createElement("div",{className:qF+"-list-placeholder"},t._("No reviews available"))})),UF(GF(GF(n)),"getPeerReviewDueDate",(function(){var e=n.props,t=e.i18n,r=e.peerReviewDueDate;return r?o.a.createElement("div",{className:"peer-review-due-date-container"},o.a.createElement(zt.a,{iconClassName:vr.a.CALENDAR}),o.a.createElement("p",null,t._("Due Date:")," ",o.a.createElement(Qe.b,{unixTime:r}))):null})),UF(GF(GF(n)),"getPeerReviewGradingInfo",(function(){var e=n.props,t=e.isPeerReviewGradingEnabled,r=e.gradedPeerReviewWeight;return t?o.a.createElement("div",{className:"peer-review-grading-info"},o.a.createElement(ya.b,{className:"peer-review-grading-message",type:ya.a.INFO,message:n.getPeerReviewDescriptionLabel(r)})):null})),UF(GF(GF(n)),"getTitleInfo",(function(e){var t=n.props,r=t.i18n,a=t.peerReviewRequiredCount,i=sc(e,t.isFiveStarEnabled,t.isRubricReviewEnabled);return o.a.createElement("div",{className:qF+"-title-info"},o.a.createElement("span",null,r._("Reviews Completed: {completedCount}",{completedCount:i})),o.a.createElement("span",null,r._("Reviews Required: {peerReviewRequiredCount}",{peerReviewRequiredCount:a})))})),UF(GF(GF(n)),"onOverrideGrade",(function(e){n.setState({gradeValueOverride:e,isGradeOverrideDirty:!1,isOverridingGrade:!0})})),UF(GF(GF(n)),"onOverrideGradeChange",(function(e){n.setState({gradeValueOverride:e,isGradeOverrideDirty:!0})})),UF(GF(GF(n)),"onOverrideGradeCancel",(function(){n.setState({gradeValueOverride:n.getPeerReviewGradeOverride(n.props),isGradeOverrideDirty:!1,isOverridingGrade:!1})})),UF(GF(GF(n)),"onOverrideGradeSave",(function(){var e=n.props,t=e.activityId,r=e.activityType,a=e.educatorGrade,o=e.gradeType,i=e.studentGroup,c=e.submitterId,s=n.state.gradeValueOverride;n.setState({isSaving:!0});var u=MF({},function(e,t){switch(t){case nc.a.COMPLETION:return{completion:e?e.completion:null};case nc.a.FIVESTAR:return{fiveStarValue:e?e.fiveStarValue:null};case nc.a.GRADE:return{gradeValue:e?e.gradeValue:null};case nc.a.PASS_FAIL:return{passFail:e?e.passFail:null};case nc.a.RUBRIC:return e&&e.myRubricEvaluation?{rubricEvaluation:{rows:e.myRubricEvaluation.cells.map((function(e){return{evaluationCell:e.dbId}}))}}:{rubricEvaluation:null};default:return{}}}(a,o),{peerReviewGradeValue:s,isDraft:!a||a.isDraft});r===pc.b.GROUP_PRESENTATION?sn.a.saveGroupGradePeerReviewOverride(+i.dbId,s).then(n.onOverrideGradeSaveSuccess).catch(n.onOverrideGradeSaveError):sn.a.saveGrade(+t,+c,u).then(n.onOverrideGradeSaveSuccess).catch(n.onOverrideGradeSaveError)})),UF(GF(GF(n)),"onOverrideGradeSaveSuccess",(function(e){var t=n.state.gradeValueOverride,r=e.isDraft,a=e.overallValue,i=o.a.createElement("div",null,o.a.createElement("div",null,n.getPeerReviewGradeSavedLabel(t)),!r&&o.a.createElement("div",null,n.getGradeFinalizedLabel(a)));yc.a.addSuccess(i),n.setState({gradeValueOverride:n.getPeerReviewGradeOverride(n.props),isGradeOverrideDirty:!1,isOverridingGrade:!1,isSaving:!1})})),UF(GF(GF(n)),"onOverrideGradeSaveError",(function(){var e=n.state.gradeValueOverride;yc.a.addError(n.getUnableToSaveOverideLabel(e)),n.setState({gradeValueOverride:n.getPeerReviewGradeOverride(n.props),isGradeOverrideDirty:!0,isOverridingGrade:!0,isSaving:!1})})),UF(GF(GF(n)),"getPeerReviewGradingOverride",(function(e){var t=n.props.i18n,r=n.state,a=r.gradeValueOverride,i=r.isGradeOverrideDirty,c=r.isOverridingGrade,s=r.isSaving,u=!s&&(c||i),l=!s&&(c||i);return null!==a?o.a.createElement("div",{className:qF+"-grading-override"},o.a.createElement("div",{className:qF+"-grading-form"},o.a.createElement("span",{className:qF+"-grading-label"},n.getActualGradeLabel()),o.a.createElement(ut.c,{id:qF+"-grading-percent",className:qF+"-grading-percent",onChange:n.onOverrideGradeChange,onValidate:function(e){return e<=100},value:a})),o.a.createElement("div",{className:qF+"-grading-actions"},o.a.createElement(Ue.a,{id:"button-peer-review-grade-override-cancel",secondary:!0,ariaLabel:t._("Cancel"),className:"peer-review-grade-override-cancel",enabled:u,onClick:n.onOverrideGradeCancel},t._("Cancel")),o.a.createElement(Ue.a,{id:"button-peer-review-grade-override-save",primary:!0,ariaLabel:t._("Save"),className:"peer-review-grade-override-save",enabled:l,onClick:n.onOverrideGradeSave},t._("Save")))):o.a.createElement("div",{className:qF+"-grading-override"},o.a.createElement(Ue.a,{id:"button-peer-review-grade-override",primary:!0,ariaLabel:n.getOverrideSuggestedLabel(),className:"peer-review-grade-override",onClick:function(){n.onOverrideGrade(e)},tooltip:{label:n.getAfterOverridingLabel()}},n.getOverrideGradeLabel()))})),UF(GF(GF(n)),"getPeerReviewGradeOverride",(function(e){var t=e.peerReviewGradePart;return t?t.partValue:null})),UF(GF(GF(n)),"getPeerReviewGrading",(function(e){var t=n.props,r=t.isPeerReviewGradingEnabled,a=t.isFiveStarEnabled,i=t.isRubricReviewEnabled,c=t.peerReviewRequiredCount,s=t.i18n,u=n.state,l=u.isOverridingGrade,d=u.gradeValueOverride;if(!r)return null;var f=uc(e,c,a,i),p=Boolean(l||null!==d);return o.a.createElement(Xt.a,{zDepth:1,className:qF+"-grading"},o.a.createElement("h3",null,n.getPeerReviewGradeLabel()),o.a.createElement("span",{className:qF+"-grading-label"},n.getSuggestedGradeLabel(),o.a.createElement("span",{style:p?{textDecoration:"line-through"}:{},className:qF+"-grading-value"},s._("{suggestedPercent}%",{suggestedPercent:f}))),n.getPeerReviewGradingOverride(f))})),UF(GF(GF(n)),"onCommentsDialogClose",(function(){n.setState({commentsDialogVisible:!1,selectedPeerReview:null})})),UF(GF(GF(n)),"getCommentsPreviewDialog",(function(e){var t=n.state,r=t.commentsDialogVisible,a=t.selectedPeerReview,i=n.props,c=i.termClassId,s=i.activityId;return o.a.createElement(DF,{termClassId:c,activityId:s,onClose:n.onCommentsDialogClose,selectedPeerReview:a,reviews:e,visible:r})})),UF(GF(GF(n)),"onRubricEvaluationPreviewDialogClose",(function(){n.setState({rubricEvaluationDialogVisible:!1,selectedPeerReview:null})})),UF(GF(GF(n)),"getRubricEvaluationPreviewDialog",(function(){var e=n.state,t=e.rubricEvaluationDialogVisible,r=e.selectedPeerReview;if(!t||!r)return null;var a=r.rubricEvaluation;return o.a.createElement(Bn.b,{rubric:a.rubric,rubricPoints:a.points,grade:a.cells.map((function(e){return e.dbId})),mode:Qn.a.VIEW,onCancel:n.onRubricEvaluationPreviewDialogClose})})),n.state=MF({},BF,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VF(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.processProps(e))}},{key:"getPeerReviewDescriptionLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("This assignment is configured with a peer review score weight of {gradedPeerReviewWeight}% towards the overall assignment score. A suggested score is automatically calculated based on number of completed peer reviews and can be manually overridden.",{gradedPeerReviewWeight:e}):t._("This assignment is configured with a peer review grade weight of {gradedPeerReviewWeight}% towards the overall assignment grade. A suggested grade is automatically calculated based on number of completed peer reviews and can be manually overridden.",{gradedPeerReviewWeight:e})}},{key:"getPeerReviewGradeSavedLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("Peer review score override saved: {gradeValueOverride} / 100 ({gradeValueOverride}%)",{gradeValueOverride:e}):t._("Peer review grade override saved: {gradeValueOverride} / 100 ({gradeValueOverride}%)",{gradeValueOverride:e})}},{key:"getGradeFinalizedLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("Overall score finalized: {overallValue}%",{overallValue:e}):t._("Overall grade finalized: {overallValue}%",{overallValue:e})}},{key:"getUnableToSaveOverideLabel",value:function(e){var t=this.props.i18n;return Object(UO.a)()?t._("Unable to save peer review score override: {gradeValueOverride}%",{gradeValueOverride:e}):t._("Unable to save peer review grade override: {gradeValueOverride}%",{gradeValueOverride:e})}},{key:"getActualGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Actual Score:"):e._("Actual Grade:")}},{key:"getOverrideSuggestedLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Override Suggested Score"):e._("Override Suggested Grade")}},{key:"getAfterOverridingLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("After overriding, this score will no longer be automatically updated"):e._("After overriding, this grade will no longer be automatically updated")}},{key:"getOverrideGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Override Score"):e._("Override Grade")}},{key:"getPeerReviewGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Peer Review Score"):e._("Peer Review Grade")}},{key:"getSuggestedGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Suggested Score:"):e._("Suggested Grade:")}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.studentPeerReviews,r=g.a.sortBy(n,["submitter.lastName"]);return o.a.createElement(K.a,{className:qF+"-card"},o.a.createElement(K.d,{title:t._("Peer Review"),className:qF+"-title"},this.getTitleInfo(r)),o.a.createElement(K.c,{className:qF+"-card-body"},this.getPeerReviewDueDate(),this.getPeerReviewGradingInfo(),this.getReviewList(r),this.getPeerReviewGrading(r)),this.getCommentsPreviewDialog(r),this.getRubricEvaluationPreviewDialog())}}])&&xF(n.prototype,r),a&&xF(n,a),t}(a.Component),YF=Object(s.a)(Object(x.withI18n)()(Object(c.b)((function(e){return{activityId:By(e),activityType:qy(e),educatorGrade:Vv(e),gradeType:Yv(e),gradedPeerReviewWeight:Lv(e),studentGroup:My(e),isFiveStarEnabled:ov(e),isPeerReviewGradingEnabled:Dv(e),isRubricReviewEnabled:rv(e),peerReviewGradePart:Wv(e),peerReviewRequiredCount:Av(e),rubric:tv(e),studentPeerReviews:Nv(e),submitterId:ev(e),peerReviewDueDate:jv(e),termClassId:dv(e)}}))(QF)));n("ctUe");function HF(e){return(HF="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KF(e){return(KF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XF(e,t){return(XF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JF=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=KF(t).call(this,e),n=!a||"object"!==HF(a)&&"function"!==typeof a?$F(r):a,ZF($F($F(n)),"onEditRubric",(function(){var e=n.props,t=e.rubric,r=e.isGradeDraftAllowed,a=o.a.createElement(Bn.b,{rubric:t,grade:n.getRubricCells(),rubricPoints:n.getRubricPoints(),mode:Qn.a.GRADE,allowInvalid:r,onCancel:Hn.a.closeModal,onSubmit:n.onDialogSubmit});Hn.a.showModal(a)})),ZF($F($F(n)),"onDialogSubmit",(function(e,t,r){n.setState({dirty:!0,valid:r,cells:e,points:t}),Hn.a.closeModal()})),ZF($F($F(n)),"saveGrade",(function(e){var t=n.props.match.params.studentId,r=n.props.activityId;sn.a.saveEducatorGradeRubric(r,+t,n.getRubricCells(),e).then(n.onSubmitSuccess)})),ZF($F($F(n)),"onSubmitSuccess",(function(){n.setState({dirty:!1,cells:void 0,points:void 0})})),ZF($F($F(n)),"getRubricPoints",(function(){var e=n.props.savedRubric,t=n.state.points,r=0;return e&&(r=e.points),g.a.isUndefined(t)||(r=t),r})),ZF($F($F(n)),"getRubricCells",(function(){var e=n.props.savedRubric,t=n.state.cells,r=null;return e&&(r=e.cells.map((function(e){return e.dbId}))),t&&(r=t),r})),ZF($F($F(n)),"enableSave",(function(e){var t=n.state,r=t.valid,a=t.dirty;return e||(a=a||n.props.isDraft),r&&a})),n.state={valid:!1,dirty:!1,cells:void 0,points:void 0},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XF(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubric,n=e.i18n;return o.a.createElement("div",null,o.a.createElement(px,{enableSave:this.enableSave,onSaveGrade:this.saveGrade},o.a.createElement("div",null,o.a.createElement("div",{className:"eval-rubric-result-container"},o.a.createElement(x.Trans,{id:"Rubric Score"}),o.a.createElement(Ue.a,{id:"button-rubric-evaluation",onClick:this.onEditRubric,className:"eval-rubric-result-button",ariaLabel:n._("Rubric Score"),primary:!0},o.a.createElement(Bn.c,{points:this.getRubricPoints(),max:t.maxValue}))))))}}])&&zF(n.prototype,r),a&&zF(n,a),t}(a.Component),eV=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){var t=Vv(e);return{savedRubric:g.a.get(t,"myRubricEvaluation",null),isDraft:g.a.get(t,"isDraft",null),activityId:By(e),submitterId:ev(e),rubric:tv(e),isGradeDraftAllowed:Qv(e)}}))(JF)));function tV(e){return(tV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rV(e){return(rV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aV(e,t){return(aV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cV=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=rV(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==tV(a)&&"function"!==typeof a?oV(r):a,iV(oV(oV(n)),"isGroupProject",(function(){return pc.b.GROUP_PRESENTATION===n.props.activityType})),iV(oV(oV(n)),"isInteractiveVideo",(function(){return pc.b.INTERACTIVE_VIDEO===n.props.activityType})),iV(oV(oV(n)),"processInteractiveVideoAnswers",(function(){for(var e={hasVideoResponseQuestions:!1,hasMultipleChoiceQuestions:!1,multipleChoiceWeight:0,multipleChoiceCorrectWeight:0,videoResponseWeight:0},t=n.props.studentData.interactiveAnswers,r=0;t&&r<t.length;r++){var a=t[r],o=a.question;if(o.__typename===BE.o)e.hasVideoResponseQuestions=!0;else if(o.__typename===BE.n){e.hasMultipleChoiceQuestions=!0;var i=+o[BE.b.QUESTION.WEIGHT];a.option[BE.b.OPTION.IS_CORRECT]&&(e.multipleChoiceCorrectWeight+=i),e.multipleChoiceWeight+=i}}return e.videoResponseWeight=100-e.multipleChoiceWeight,e})),iV(oV(oV(n)),"getGradeInput",(function(e){var t=n.props.isPeerReviewGradingEnabled,r=n.isInteractiveVideo(),a=null;if(r&&e===nc.a.GRADE&&((a=n.processInteractiveVideoAnswers()).hasMultipleChoiceQuestions&&a.hasVideoResponseQuestions))return o.a.createElement(uF,{data:a});if(t)return o.a.createElement(wF,null);var i=!r||a&&a.hasVideoResponseQuestions;switch(e){case nc.a.COMPLETION:return o.a.createElement(Vx,{auto:!0});case nc.a.FIVESTAR:return o.a.createElement(wx,null);case nc.a.GRADE:return o.a.createElement(Rx,{canEdit:i,tooltip:{label:i?"":n.getGradeAutomaticallyCalculatedLabel()}});case nc.a.PASS_FAIL:return o.a.createElement(Vx,{auto:!1});case nc.a.RUBRIC:return o.a.createElement(eV,null);default:return n.getUnexpectedGradeTypeLabel(e)}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aV(e,t)}(t,e),n=t,(r=[{key:"getGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score"):e._("Grade")}},{key:"getGroupGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Group Score"):e._("Group Grade")}},{key:"getGradeAutomaticallyCalculatedLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("This score is automatically calculated based on multiple choice answers and cannot be modified"):e._("This grade is automatically calculated based on multiple choice answers and cannot be modified")}},{key:"getUnexpectedGradeTypeLabel",value:function(e){return Object(UO.a)()?"Unexpected score type: "+e:"Unexpected grade type: "+e}},{key:"render",value:function(){var e=this.props,t=e.gradeType,n=e.submitterId;return o.a.createElement(yr.a,{title:this.isGroupProject()?this.getGroupGradeLabel():this.getGradeLabel(),contentsClassName:"grade-card-contents"},n?this.getGradeInput(t):o.a.createElement("div",{className:"info-dashboard-card-contents"},o.a.createElement("div",{className:"info-content-section"},o.a.createElement("span",{className:"info-contents-label"},o.a.createElement(x.Trans,{id:"Assignment not submitted"})))))}}])&&nV(n.prototype,r),a&&nV(n,a),t}(a.Component),sV=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityType:qy(e),gradeType:Yv(e),isPeerReviewGradingEnabled:Dv(e),gradedPeerReviewWeight:Lv(e),submitterId:ev(e),studentData:yy(e)}}))(cV)));function uV(e){return(uV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dV(e){return(dV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fV(e,t){return(fV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bV="submission-summary",yV=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=dV(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==uV(a)&&"function"!==typeof a?pV(r):a,mV(pV(pV(n)),"getCounts",(function(){var e=n.props,t=e.result,r=e.resultPartials,a=e.resultPartialsCreatedCount,o=g.a.map(t.links,(function(e){return e.dbId})),i=g.a.map(t.documents,(function(e){return e.dbId})),c=[],s=[];t.media&&(t.media.meetingAssets?c.push(t.media.dbId):s.push(t.media.dbId));var u=g.a.filter(r,(function(e){switch(e.__typename){case hr.a.MEETING:var t=g.a.get(e,"recordedMedia.dbId");return!!t&&!g.a.includes(c,t);case hr.a.MEDIA:var n=g.a.get(e,"media.dbId");return!g.a.includes(s,n);case hr.a.LINK:return!g.a.includes(o,e.dbId);case hr.a.DOCUMENT:return!g.a.includes(i,e.dbId);default:return!0}})),l=g.a.groupBy(u,"__typename"),d={videos:s.length,meetings:c.length,documents:t.documents?t.documents.length:0,links:t.links?t.links.length:0};d.total=g.a.sum(g.a.toArray(d));var f={videos:n.getCountForPartialType(l,hr.a.MEDIA),documents:n.getCountForPartialType(l,hr.a.DOCUMENT),links:n.getCountForPartialType(l,hr.a.LINK),meetings:n.getCountForPartialType(l,hr.a.MEETING)};f.total=g.a.sum(g.a.toArray(f));var p=d.total+f.total,m=null;return a&&a>p&&(m=a-p),{submitted:d,unsubmitted:f,total:p,deletedTotal:m}})),mV(pV(pV(n)),"renderSubmissionContentDetailsTooltip",(function(e){var t=n.props.i18n,r=e.submitted,a=e.unsubmitted,i=e.deletedTotal,c=[];r.videos&&c.push(t._("{0, plural, one {# Video} other {# Videos}}",{0:r.videos})),r.meetings&&c.push(t._("{0, plural, one {# Meeting} other {# Meetings}}",{0:r.meetings})),r.documents&&c.push(t._("{0, plural, one {# File} other {# Files}}",{0:r.documents})),r.links&&c.push(t._("{0, plural, one {# Link} other {# Links}}",{0:r.links})),c.length||c.push(t._("(no items)"));var s=[];return a.videos&&s.push(t._("{0, plural, one {# Video} other {# Videos}}",{0:a.videos})),a.meetings&&s.push(t._("{0, plural, one {# Meeting} other {# Meetings}}",{0:a.meetings})),a.documents&&s.push(t._("{0, plural, one {# File} other {# Files}}",{0:a.documents})),a.links&&s.push(t._("{0, plural, one {# Link} other {# Links}}",{0:a.links})),i&&s.push(t._("{deletedTotal, plural, one {(# deleted item)} other {(# deleted items)}}",{deletedTotal:i})),s.length||s.push(t._("(no items)")),o.a.createElement("div",{className:"".concat(bV,"-tooltip")},o.a.createElement("div",{className:"".concat(bV,"-tooltip-column")},o.a.createElement("div",{className:"".concat(bV,"-tooltip-column--header")},t._("Submitted:")),o.a.createElement("div",{className:"".concat(bV,"-tooltip-column--content")},g.a.map(c,(function(e,t){return o.a.createElement("div",{key:"submission-contents-tooltip-label[".concat(t,"]")},e)})))),o.a.createElement("div",{className:"".concat(bV,"-tooltip-column")},o.a.createElement("div",{className:"".concat(bV,"-tooltip-column--header")},t._("Not Submitted:")),o.a.createElement("div",{className:"".concat(bV,"-tooltip-column--content")},g.a.map(s,(function(e,t){return o.a.createElement("div",{key:"submission-contents-tooltip-label[".concat(t,"]")},e)})))))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fV(e,t)}(t,e),n=t,(r=[{key:"getCountForPartialType",value:function(e,t){return e&&e[t]&&e[t].length||0}},{key:"renderSubmissionContentTypeItem",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n&&(!t||t<1)?null:o.a.createElement("div",{className:"".concat(bV,"--item")},o.a.createElement(zt.a,{className:"".concat(bV,"--item-icon")},e),o.a.createElement("div",{className:"".concat(bV,"--item-count")},t))}},{key:"render",value:function(){var e=this.props,t=e.className;if(!e.result)return null;var n=this.getCounts();return o.a.createElement(Ec.b,{className:Ie()("".concat(bV),t),html:this.renderSubmissionContentDetailsTooltip(n),position:"bottom",tabIndex:0},this.renderSubmissionContentTypeItem(Je.a.EVENT,n.submitted.meetings),this.renderSubmissionContentTypeItem(Je.a.VIDEOCAM,n.submitted.videos),this.renderSubmissionContentTypeItem(Je.a.DESCRIPTION,n.submitted.documents),this.renderSubmissionContentTypeItem(Je.a.LINK,n.submitted.links),o.a.createElement("div",{className:"".concat(bV,"--item-separator")}),this.renderSubmissionContentTypeItem(Je.a.LIBRARY_BOOKS,n.unsubmitted.total,!1))}}])&&lV(n.prototype,r),a&&lV(n,a),t}(o.a.PureComponent);yV.propTypes={className:M.a.string,result:M.a.any,resultPartials:M.a.any,resultPartialsCreatedCount:M.a.number};var vV=Object(x.withI18n)()(yV);function hV(e){return(hV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EV(e){return(EV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wV(e,t){return(wV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var OV=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=EV(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==hV(a)&&"function"!==typeof a?SV(r):a,i=SV(SV(n)),s=function(){var e=n.props,t=e.activityType,r=e.result,a=e.resultPartials,i=e.resultPartialsCreatedCount;return[pc.b.GROUP_PRESENTATION,pc.b.INDIVIDUAL_PROJECT].includes(t)?o.a.createElement(vV,{result:r,resultPartials:a,resultPartialsCreatedCount:i}):null},(c="renderSubmissionContentDetails")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wV(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.studentData,n=e.result,r=e.i18n,a=t.student,i="".concat(a.firstName," ").concat(a.lastName);return o.a.createElement(yr.a,{title:r._("Student"),icon:Je.a.PERSON},o.a.createElement("div",{className:"student-dashboard-card-contents"},o.a.createElement("div",{className:"student-avatar-container"},o.a.createElement(Be.a,{value:i})),o.a.createElement("div",{className:"student-details-container"},o.a.createElement("div",{className:"student-details-name"},i),n?o.a.createElement("span",{className:"submitted-details-date"},r._("Submitted at:"),o.a.createElement(Qe.a,{unixTime:n.submittedAt})):null,this.renderSubmissionContentDetails())))}}])&&gV(n.prototype,r),a&&gV(n,a),t}(a.Component);OV.propTypes={activityType:M.a.string,result:M.a.any,resultPartials:M.a.any,resultPartialsCreatedCount:M.a.number};var CV=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityType:qy(e),studentData:yy(e)}}))(OV)));function _V(e){return(_V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IV(e){return(IV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PV(e,t){return(PV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jV=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=IV(t).call(this,e),n=!a||"object"!==_V(a)&&"function"!==typeof a?RV(r):a,AV(RV(RV(n)),"mostRecentEvaluationByUser",(function(e,t){if(null==e)return null;var n=e.filter((function(e){return e.user.dbId===t}));return 0===n.length?null:n.sort((function(e,t){return e.date-t.date}))[0]})),AV(RV(RV(n)),"showSelfAssessment",(function(){n.setState({showSelfAssessmentDialog:!0})})),AV(RV(RV(n)),"closeSelfAssessment",(function(){n.setState({showSelfAssessmentDialog:!1})})),AV(RV(RV(n)),"getRubricComponent",(function(e){var t=n.props.i18n;return null==e?o.a.createElement(x.Trans,{id:"Not Completed"}):o.a.createElement("div",{className:"student-self-assessment-container"},o.a.createElement(x.Trans,{id:"Completed Rubric:"}),o.a.createElement(Ue.a,{id:"button-grading-rubric-self-assessment",onClick:n.showSelfAssessment,className:"student-self-assessment-rubric-button",ariaLabel:t._("Show Rubric Self Assessment"),primary:!0},o.a.createElement(Bn.c,{points:e.points,max:e.rubric.maxValue})))})),n.state={showSelfAssessmentDialog:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PV(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e,t){return!(g.a.isEqual(this.props.rubricEvals,e.rubricEvals)&&g.a.isEqual(this.props.studentData,e.studentData)&&this.state.showSelfAssessmentDialog===t.showSelfAssessmentDialog)}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.rubricEvals,r=e.studentData,a=this.state.showSelfAssessmentDialog,i=r.student,c=this.mostRecentEvaluationByUser(n,i.dbId);return o.a.createElement(yr.a,{title:t._("Student Self Assessment"),icon:Je.a.PERSON},o.a.createElement("div",{className:"student-self-assessment-card-contents"},this.getRubricComponent(c)),c&&a&&o.a.createElement(Bn.b,{rubric:c.rubric,rubricPoints:c.points,grade:c.cells.map((function(e){return e.dbId})),mode:Qn.a.VIEW,onCancel:this.closeSelfAssessment}))}}])&&TV(n.prototype,r),a&&TV(n,a),t}(a.Component),kV=Object(c.b)((function(e){return{studentData:yy(e),rubricEvals:fv(e)}}))(Object(x.withI18n)()(jV));function NV(e){return(NV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LV(e){return(LV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MV(e,t){return(MV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var FV=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=LV(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==NV(a)&&"function"!==typeof a?xV(r):a,i=xV(xV(n)),s=function(){var e=n.props,t=e.activityType,r=e.gradeType,a=e.isRubricSelfReviewEnabled;return nc.a.RUBRIC===r?t!==pc.b.GROUP_PRESENTATION&&a?o.a.createElement(kV,{key:"self_assessment_card"}):null:o.a.createElement(sV,{key:"activity_grade_card"})},(c="buildGradeOrSelfAssessmentCard")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MV(e,t)}(t,e),n=t,(r=[{key:"getDashboardChildren",value:function(){var e=this.props,t=e.result,n=e.resultPartials,r=e.resultPartialsCreatedCount,a=e.showStudentCard,i=[],c=this.buildGradeOrSelfAssessmentCard();return c&&i.push(c),a&&i.push(o.a.createElement(CV,{key:"student_dashboard_card",result:t,resultPartials:n,resultPartialsCreatedCount:r})),i}},{key:"render",value:function(){if(!this.props.activityId)return null;var e=this.getDashboardChildren();return 0===e.length?null:o.a.createElement("div",{className:"grading-dashboard-container"},e)}}])&&DV(n.prototype,r),a&&DV(n,a),t}(a.Component);FV.propTypes={showStudentCard:M.a.bool},FV.defaultProps={showStudentCard:!0};var VV=Object(c.b)((function(e){return{activityId:By(e),activityType:qy(e),gradeType:Yv(e),isRubricSelfReviewEnabled:av(e),result:Zy(e),resultPartials:Xy(e),resultPartialsCreatedCount:$y(e)}}))(FV);function GV(e){return(GV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qV(e,t){return!t||"object"!==GV(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WV(e){return(WV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BV(e,t){return(BV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QV=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qV(this,WV(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BV(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.i18n,r=t?t.submitDueAt:null;return o.a.createElement(yr.a,{title:n._("Information"),icon:Je.a.INFO_OUTLINE},o.a.createElement("div",{className:"info-dashboard-card-contents"},r&&o.a.createElement("div",{className:"info-content-section"},o.a.createElement("span",{className:"info-contents-label","aria-label":n._("Due Date")},o.a.createElement(x.Trans,{id:"Due Date:"})," ",o.a.createElement(Qe.b,{unixTime:r}))),o.a.createElement("div",{className:"info-content-section"},o.a.createElement("span",{className:"info-contents-label","aria-label":n._("Assignment")},o.a.createElement(x.Trans,{id:"Assignment:"})),o.a.createElement("span",null,t.name)),o.a.createElement("div",{className:"info-content-section","aria-label":n._("Class")},o.a.createElement("span",{className:"info-contents-label"},o.a.createElement(x.Trans,{id:"Class:"})),o.a.createElement("span",null,t.className))))}}])&&UV(n.prototype,r),a&&UV(n,a),t}(a.Component);Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityData:my(e)}}))(QV)));function YV(e){return(YV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zV(e,t){return!t||"object"!==YV(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KV(e){return(KV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XV(e,t){return(XV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zV(this,KV(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XV(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(yr.a,{title:e._("Not Submitted"),icon:Je.a.INFO_OUTLINE},o.a.createElement("div",{className:"info-dashboard-card-contents"},o.a.createElement("div",{className:"info-content-section"},o.a.createElement("span",{className:"info-contents-label","aria-label":e._("Assignment not submitted")},o.a.createElement(x.Trans,{id:"Assignment not submitted"})))))}}])&&HV(n.prototype,r),a&&HV(n,a),t}(a.Component);Object(x.withI18n)()(Object(s.a)($V));function ZV(e){return(ZV="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eG(e){return(eG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tG(e,t){return(tG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rG=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=eG(t).call(this,e),n=!a||"object"!==ZV(a)&&"function"!==typeof a?nG(r):a,o=nG(nG(n)),c=function(e){n.setState({isReviewAnonymous:e})},(i="onAnonymousChange")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={isReviewAnonymous:!!e.isReviewAnonymous},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tG(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.onSubmit,t=this.state.isReviewAnonymous,n=this.props.i18n,r=[];return r.push(o.a.createElement(Ue.a,{id:"button-grading-group-release-dialog-cancel",secondary:!0,ariaLabel:n._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"}))),r.push(o.a.createElement(Ue.a,{id:"button-grading-group-release-dialog-ok",primary:!0,ariaLabel:n._("Ok"),onClick:e.bind(null,t)},o.a.createElement(x.Trans,{id:"Ok"}))),o.a.createElement(pi.a,{actions:r,visible:!0,id:"release dialog",title:n._("Release Team Evaluations")},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to release team member reviews for this group?"})),o.a.createElement(GO.a,{name:"anonymous_review",id:"anonymous_review",label:n._("Anonymous Review"),ariaLabel:n._("Anonymous Review"),onChange:this.onAnonymousChange,checked:t}))}}])&&JV(n.prototype,r),a&&JV(n,a),t}(a.Component);rG.propTypes={isReviewAnonymous:M.a.bool,onSubmit:M.a.func};var aG=Object(x.withI18n)()(rG);function oG(e){return(oG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cG(e){return(cG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sG(e,t){return(sG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dG=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=cG(t).call(this,e),n=!a||"object"!==oG(a)&&"function"!==typeof a?uG(r):a,lG(uG(uG(n)),"onStudentSelect",(function(e){var t=g.a.findIndex(n.props.rubricEvaluations,(function(t){return t.user.dbId===e.user.dbId}));n.setState({selectedEvaluation:e,selectedEvaluationIndex:t})})),lG(uG(uG(n)),"createColumns",(function(){var e=n.props.i18n;return[{accessor:"user",className:"member-name",label:e._("User"),renderer:function(e){return o.a.createElement("div",{className:"member-avatar-container"},o.a.createElement(Be.a,{value:e.user.firstName+" "+e.user.lastName}),o.a.createElement("span",{className:"member-name-label"},e.user.firstName+" "+e.user.lastName))}},{accessor:"",className:"rating-column",label:e._("Rubric Score"),renderer:function(t,r){return o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Ue.a,{id:"button-grading-group-member-dialog-evaluation["+r+"]",ariaLabel:e._("Rubric Score"),onClick:function(){return n.onStudentSelect(t)},className:"eval-rubric-result-button",primary:!0},o.a.createElement(Bn.c,{points:t.points,max:t.rubric.maxValue})))}},{accessor:"comment",grow:!0,className:"rating-comment-column",label:e._("Comment")}]})),lG(uG(uG(n)),"onLeftNavClick",(function(){var e=n.state.selectedEvaluationIndex,t=n.props.rubricEvaluations,r=++e;r<0?n.setState({selectedEvaluation:null}):n.setState({selectedEvaluationIndex:r,selectedEvaluation:t[r]})})),lG(uG(uG(n)),"onRightNavClick",(function(){var e=n.state.selectedEvaluationIndex,t=n.props.rubricEvaluations,r=--e;r>t.length-1?n.setState({selectedEvaluation:null}):n.setState({selectedEvaluationIndex:r,selectedEvaluation:t[r]})})),n.state={selectedEvaluation:null,selectedEvaluationIndex:0},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sG(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubricEvaluations,n=e.i18n,r=this.state.selectedEvaluation,a=[o.a.createElement(Ue.a,{id:"button-grading-group-member-dialog-close",secondary:!0,ariaLabel:n._("Close"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Close"}))];return o.a.createElement(Fr.a,{actions:a,contentStyle:{width:"100%"},dialogClassName:"rating-summary-dialog",id:"rating-summary-dialog",modal:!0,title:n._("Team Evaluations"),visible:!0},o.a.createElement("div",null,r?o.a.createElement("div",null,o.a.createElement("div",{className:"rubric-eval-nav-container"},o.a.createElement(Ue.c,{id:"button-grading-group-member-left",ariaLabel:n._("Left Arrow"),onClick:this.onLeftNavClick,className:"eval-left-icon"},Je.a.LEFT),o.a.createElement("div",{className:"rubric-eval-contents"},o.a.createElement("div",{className:"rubric-eval-user-info"},o.a.createElement("div",{className:"rubric-eval-user-avatar"},o.a.createElement(Be.a,{value:r.user.firstName+" "+r.user.lastName})),o.a.createElement("div",{className:"rubric-eval-user-details"},o.a.createElement("div",null,r.user.firstName+" "+r.user.lastName))),o.a.createElement("div",{className:"rubric-eval-comment-container"},o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Comment:"})),o.a.createElement("p",null,r.comment))),o.a.createElement(Ue.c,{id:"button-grading-group-member-right",ariaLabel:n._("Right Arrow"),onClick:this.onRightNavClick,className:"eval-right-icon"},Je.a.RIGHT)),o.a.createElement(Bn.a,{rubric:r.rubric,rubricPoints:r.points,grade:r.cells.map((function(e){return e.dbId})),mode:Qn.a.VIEW,onCancel:this.closeSelfAssessment})):o.a.createElement(Zt.a,{columns:this.createColumns(),className:"rating-summary-table",data:t||[],listAccessor:"title"})))}}])&&iG(n.prototype,r),a&&iG(n,a),t}(a.Component);dG.propTypes={rubricEvaluations:M.a.array};var fG=Object(x.withI18n)()(dG),pG=n("P+BV"),mG=n.n(pG),bG=n("smWs"),yG=n.n(bG);function vG(e){return(vG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hG(){return(hG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EG(e){return(EG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wG(e,t){return(wG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CG=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=EG(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==vG(a)&&"function"!==typeof a?SG(r):a,OG(SG(SG(n)),"getComponentProps",(function(){return g.a.pick(n.props,Object.keys(t.componentProps))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wG(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onRatingChange,r=e.value;return o.a.createElement(mG.a,hG({},this.getComponentProps(),{className:Ie()("rating-column",t)}),o.a.createElement(Dn.a,{onChange:n,value:r,name:this.props.id}))}}])&&gG(n.prototype,r),a&&gG(n,a),t}(a.Component);CG.defaultProps={header:!1,value:0},CG.componentProps={id:M.a.oneOfType([M.a.number,M.a.string]),style:M.a.object,className:M.a.string,fixedStyle:M.a.object,fixedClassName:M.a.string,children:M.a.node,sorted:M.a.bool,sortIcon:M.a.element,sortIconBefore:M.a.bool,numeric:M.a.bool,adjusted:M.a.bool,grow:M.a.bool,selectColumnHeader:M.a.bool,header:M.a.bool.isRequired,tooltipLabel:M.a.node,tooltipDelay:M.a.number,tooltipPosition:M.a.oneOf(["top","right","bottom","left"]),tooltip:M.a.node,plain:M.a.bool,scope:M.a.oneOf(["row","col"])},CG.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){OG(e,t,n[t])}))}return e}({},CG.componentProps,{onRatingChange:M.a.func.isRequired,value:M.a.number});var _G=yG()(CG,"rating-field"),TG=function(e,t){var n=e.rows.length-1;return!!t&&(t.length===n&&t.every((function(e){return!!e})))};function IG(e){return(IG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RG(e){return(RG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AG(e,t){return(AG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NG="pass",DG="fail",LG=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=RG(t).call(this,e),n=!a||"object"!==IG(a)&&"function"!==typeof a?jG(r):a,kG(jG(jG(n)),"getGradeValue",(function(e,t){if(t)switch(e){case nc.a.COMPLETION:return t.completion;case nc.a.FIVESTAR:return t.fiveStarValue;case nc.a.GRADE:return t.gradeValue;case nc.a.PASS_FAIL:return t.passFail;case nc.a.RUBRIC:return t.myRubricEvaluation;default:return null}})),kG(jG(jG(n)),"saveGrade",(function(e){var t=n.props,r=t.activityId,a=t.data.dbId,o=n.state.workingGrade;e.isDraft=!!o&&o.isDraft,sn.a.saveGrade(+r,+a,e),n.setState({workingGrade:e})})),kG(jG(jG(n)),"onPercentageGradeChange",(function(e){var t=n.state.workingGrade.isDraft;n.setState({workingGrade:{gradeValue:+e,isDraft:t}})})),kG(jG(jG(n)),"onPercentageGradeCancel",(function(e){var t=n.state.workingGrade.isDraft;n.setState({workingGrade:{gradeValue:+e,isDraft:t}})})),kG(jG(jG(n)),"onPercentageGradeSave",(function(){var e=+n.state.workingGrade.gradeValue;if(sx(e)){var t={gradeValue:e};n.saveGrade(t)}else{var r=+n.state.savedGrade.gradeValue,a=n.state.workingGrade.isDraft;n.setState({workingGrade:{gradeValue:+r,isDraft:a}})}})),kG(jG(jG(n)),"onAutoPassFailChange",(function(e){var t={completion:e===NG};n.saveGrade(t)})),kG(jG(jG(n)),"onPassFailChange",(function(e){var t={passFail:e===NG};n.saveGrade(t)})),kG(jG(jG(n)),"onFiveStarChange",(function(e){var t={fiveStarValue:+e};n.saveGrade(t)})),kG(jG(jG(n)),"onShowRubricDialog",(function(){var e=n.state.workingGrade,t=e.myRubricEvaluation;Hn.a.showModal(o.a.createElement(Bn.b,{rubric:t.rubric,rubricPoints:t.points,mode:Qn.a.GRADE,onCancel:function(){return Hn.a.closeModal()},onSubmit:n.onRubricSave,grade:t.cells.map((function(e){return e.dbId})),allowInvalid:e.isDraft}))})),kG(jG(jG(n)),"onRubricSave",(function(e,t){var r=n.props,a=r.activityId,o=r.data.dbId,i=n.state.workingGrade,c=!!i&&i.isDraft;sn.a.saveGradeRubric(+a,+o,e,c),i.myRubricEvaluation.points=t,n.setState({workingGrade:i}),Hn.a.closeModal()})),kG(jG(jG(n)),"getPassFailMenuItems",(function(e){return[{label:e._("Pass"),value:NG},{label:e._("Fail"),value:DG}]})),n.state=n.createState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AG(e,t)}(t,e),n=t,(r=[{key:"createState",value:function(e){var t=e.activityId,n=e.data,r=n.dbId,a=n.educatorGrade;return{activityId:t,studentId:r,workingGrade:g.a.cloneDeep(a),savedGrade:g.a.cloneDeep(a)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.state,n=t.activityId,r=t.studentId,a=t.savedGrade;n===e.activityId&&r===e.data.dbId&&g.a.isEqual(a,e.data.educatorGrade)||this.setState(this.createState(e))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.gradeType,r=e.i18n,a=this.state.workingGrade;if(!a)return null;var i=this.getGradeValue(n,a);switch(n){case nc.a.COMPLETION:return o.a.createElement(da.G,{menuItems:this.getPassFailMenuItems(r),value:i?NG:DG,onChange:this.onAutoPassFailChange});case nc.a.FIVESTAR:return o.a.createElement(_G,{onRatingChange:this.onFiveStarChange,value:+i});case nc.a.GRADE:var c=t.firstName,s=t.lastName,u=!1,l=null;return sx(i)||(l=r._("Percentage must be a number between 0 and 100"),u=!0),o.a.createElement(da.s,{large:!0,title:r._("Percentage"),label:r._("Percentage"),cancelLabel:r._("Cancel"),helpText:r._("Percentage for {firstName} {lastName}",{firstName:c,lastName:s}),errorText:l,error:u,okLabel:r._("Save"),onChange:this.onPercentageGradeChange,onCancelClick:this.onPercentageGradeCancel,onOkClick:this.onPercentageGradeSave,okOnOutsideClick:!1,value:i});case nc.a.PASS_FAIL:return o.a.createElement(da.G,{menuItems:this.getPassFailMenuItems(r),value:i?NG:DG,onChange:this.onPassFailChange});case nc.a.RUBRIC:if(!i)return o.a.createElement("td",null,r._("None"));var d=!TG(i.rubric,i.cells);return o.a.createElement("td",null,d?o.a.createElement(Ue.a,{id:"button-grading-group-member-rubric-incomplete",primary:!0,onClick:this.onShowRubricDialog,ariaLabel:r._("Show Rubric"),iconBefore:!1,iconChildren:Je.a.RUBRIC_INCOMPLETE_WARNING,tooltip:{label:r._("Partially complete"),position:"left"}},o.a.createElement(Bn.c,{points:i.points,max:i.rubric.maxValue})):o.a.createElement(Ue.a,{id:"button-grading-group-member-rubric",primary:!0,onClick:this.onShowRubricDialog,ariaLabel:r._("Show Rubric")},o.a.createElement(Bn.c,{points:i.points,max:i.rubric.maxValue})));default:return"ERROR: grade type "+n}}}])&&PG(n.prototype,r),a&&PG(n,a),t}(a.Component);LG.propTypes={activityId:M.a.number.isRequired,gradeType:M.a.string.isRequired,data:M.a.object.isRequired};var MG=Object(x.withI18n)()(LG);function xG(e){return(xG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VG(e,t){return!t||"object"!==xG(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GG(e){return(GG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UG(e,t){return(UG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),VG(this,GG(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UG(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.i18n,r=[];return r.push(o.a.createElement(Ue.a,{id:"button-grading-group-withdraw-dialog-cancel",ariaLabel:n._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Close"}))),r.push(o.a.createElement(Ue.a,{id:"button-grading-group-withdraw-dialog-ok",primary:!0,ariaLabel:n._("Ok"),onClick:t},o.a.createElement(x.Trans,{id:"Ok"}))),o.a.createElement(pi.a,{actions:r,visible:!0,id:"release dialog",title:n._("Withdraw Team Evaluations")},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Please confirm that you want to withdraw team member evaluations for this group"})))}}])&&FG(n.prototype,r),a&&FG(n,a),t}(a.Component);qG.propTypes={onSubmit:M.a.func};var WG=Object(x.withI18n)()(qG);n("RP9J");function BG(e){return(BG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YG(e){return(YG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HG(e,t){return(HG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XG=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=YG(t).call(this,e),n=!a||"object"!==BG(a)&&"function"!==typeof a?zG(r):a,KG(zG(zG(n)),"getRubricRatingFromMember",(function(e){var t=0;if(e.rubricEvaluations){for(var n=0,r=0;r<e.rubricEvaluations.length;r++)n+=e.rubricEvaluations[r].points;n>0&&(t=n/e.rubricEvaluations.length)}return t})),KG(zG(zG(n)),"getSelfAssessmentPointsForMember",(function(e){var t=n.props.rubricEvaluations,r=0;if(t&&e){var a=g.a.find(t,(function(t){return t.user.dbId===e.dbId}));a&&(r=a.points)}return r})),KG(zG(zG(n)),"onShowEvalResults",(function(e){var t=e.rubricEvaluations;t&&t.length&&Hn.a.showModal(o.a.createElement(fG,{rubricEvaluations:t}))})),KG(zG(zG(n)),"onShowSelfAssessment",(function(e){var t=n.props.rubricEvaluations;if(t&&e){var r=g.a.find(t,(function(t){return t.user.dbId===e.dbId}));r&&Hn.a.showModal(o.a.createElement(Bn.b,{rubric:r.rubric,rubricPoints:r.points,grade:r.cells.map((function(e){return e.dbId})),mode:Qn.a.VIEW,onCancel:function(){return Hn.a.closeModal()}}))}})),KG(zG(zG(n)),"createColumns",(function(e){var t=e.activityId,r=e.isDraft,a=e.rubric,i=e.groupReviewRubric,c=e.gradeType,s=e.groupReviewType,u=e.selfAssessmentEnabled,l=e.i18n,d=s!==or.DISABLED,f=[{accessor:"name",grow:!0,className:"member-name",label:l._("Name"),renderer:function(e){return o.a.createElement(Ht.a,{showValue:!0,value:e.firstName+" "+e.lastName})}}];return d&&(s===or.RATING?f.push({accessor:"",className:"rating-column",label:l._("Team Evaluation"),renderer:function(e){return o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Dn.a,{name:"rating-column-item",ratingSummaryItems:e.fiveStarRatings,viewType:"summary"}))}}):s===or.RUBRIC&&f.push({accessor:"",className:"rating-column",label:l._("Team Evaluation"),renderer:function(e,t){var r=0;e.rubricEvaluations&&(r=e.rubricEvaluations.length);var a=n.getRubricRatingFromMember(e),c=i.maxValue;return o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Bn.c,{points:a,max:c}),o.a.createElement(Ue.a,{id:"button-group-rubric-evaluation["+t+"]",primary:!0,enabled:r>0,onClick:function(){return n.onShowEvalResults(e)}},"(",r,")"))}})),u&&f.push({accessor:"",className:"self-assessment-column",label:l._("Rubric Self Assessment"),renderer:function(e,t){var r=n.getSelfAssessmentPointsForMember(e);return o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Ue.a,{id:"button-group-rubric-self-evaluation["+t+"]",primary:!0,enabled:r>0,onClick:function(){n.onShowSelfAssessment(e)}},o.a.createElement(Bn.c,{points:r,max:a.maxValue})))}}),f.push(n.getInlineGradeEditColumn(t,c,r)),f})),KG(zG(zG(n)),"getInlineGradeEditColumn",(function(e,t,r){return{accessor:"",className:"grade-column",label:r?n.getDraftGradeLabel():n.getGradeLabel(),isCustomColumn:!0,renderer:function(n,r){return o.a.createElement(MG,{key:"inline-grade-edit["+r+"]",name:"inline-grade-edit["+r+"]",activityId:e,gradeType:t,data:n})}}})),KG(zG(zG(n)),"onRowEdit",(function(e){n.setState({selectedMember:e,showMemberDialog:!0})})),KG(zG(zG(n)),"onEditCancel",(function(){n.setState({selectedMember:null,showMemberDialog:!1})})),KG(zG(zG(n)),"onEditSubmit",(function(){})),KG(zG(zG(n)),"onListRowSelect",(function(e){var t=n.props.match;n.props.history.push(t.url+"/member/"+e.dbId)})),KG(zG(zG(n)),"handleReleaseMemberReviews",(function(){var e=n.props.isReviewAnonymous;Hn.a.showModal(o.a.createElement(aG,{isReviewAnonymous:e,onSubmit:n.releaseMemberReviews}))})),KG(zG(zG(n)),"releaseMemberReviews",(function(e){var t=n.props.studentGroup;sn.a.releaseGroupEvaluations(t.dbId,e),Hn.a.closeModal()})),KG(zG(zG(n)),"handleUnreleaseMemberReviews",(function(){Hn.a.showModal(o.a.createElement(WG,{onSubmit:n.unreleaseMemberReviews}))})),KG(zG(zG(n)),"unreleaseMemberReviews",(function(){var e=n.props.studentGroup;sn.a.unreleaseGroupEvaluations(e.dbId),Hn.a.closeModal()})),KG(zG(zG(n)),"dismissCard",(function(){(0,n.props.dispatch)(kO.ob(!1))})),n.state={columns:n.createColumns(e)},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HG(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.isDraft!==e.isDraft&&this.setState({columns:this.createColumns(e)})}},{key:"getDraftGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Draft Score"):e._("Draft Grade")}},{key:"getGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score"):e._("Grade")}},{key:"render",value:function(){var e=this.state.columns,t=this.props,n=t.dismissable,r=t.i18n,a=t.members,i=t.reviewReleasedAt,c=t.groupReviewType,s=t.groupName,u=c!==or.DISABLED;if(!a||0===a.length)return null;var l=[];!i&&u?l.push({key:"release-team-evals-menu-item",primaryText:o.a.createElement(x.Trans,{id:"Release Team Evaluations"}),onClick:this.handleReleaseMemberReviews}):i&&u&&l.push({key:"withdraw-team-evals-menu-item",primaryText:o.a.createElement(x.Trans,{id:"Withdraw Team Evaluations"}),onClick:this.handleUnreleaseMemberReviews}),n&&(l.length>0&&l.push(o.a.createElement(so.a,{key:"menu_item_divider[dismiss-group-members]"})),l.push({key:"dismiss-menu-item",primaryText:r._("Dismiss"),onClick:this.dismissCard}));var d=null;return l.length>0&&(d=[o.a.createElement(Ue.e,{id:"grading-toolbar",key:"actions-menu",icon:!0,className:"group-member-card-menu",menuItems:l,ariaLabel:r._("Group Members")},Je.a.MENU_VERT)]),o.a.createElement(K.a,null,o.a.createElement(K.d,{title:r._("Group: {groupName}",{groupName:s}),actions:d}),o.a.createElement(K.c,null,o.a.createElement(Zt.a,{columns:e,hasMobileListView:!1,className:"group-member-table",data:a,listAccessor:"name",onListRowSelect:this.onListRowSelect,tableSummary:r._("Inside a table, a list of the group members")})))}}])&&QG(n.prototype,r),a&&QG(n,a),t}(a.Component),$G=function(e,t){return g.a.map(e,(function(e){var n=t.filter((function(t){return t.student.dbId===e.dbId}));return g.a.merge({educatorGrade:n[0].educatorGrade},e)}))};XG.propTypes={dismissable:M.a.bool},XG.defaultProps={dismissable:!0};var ZG=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){var t=Ry(e),n=vy(e),r=Vv(e),a=!!r&&r.isDraft;return{activityId:By(e),members:$G(t,n),rubric:tv(e),groupReviewRubric:nv(e),isDraft:a,isFiveStarEnabled:ov(e),isRubricReviewEnabled:rv(e),reviewReleasedAt:pv(e),groupReviewType:bv(e),studentGroup:My(e),selfAssessmentEnabled:av(e),rubricEvaluations:fv(e),gradeType:Yv(e),groupName:xy(e)}}))(XG)));n("YHQS");function JG(e){return(JG="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tU(e){return(tU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nU(e,t){return(nU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oU=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=tU(t).call(this,e),n=!a||"object"!==JG(a)&&"function"!==typeof a?rU(r):a,aU(rU(rU(n)),"onGradeChange",(function(e){n.setState({cells:e.cellIds,points:e.points,dirty:!0})})),aU(rU(rU(n)),"getRubricCells",(function(){var e=n.props.savedRubric,t=n.state.cells,r=null;return e&&(r=e.cells.map((function(e){return e.dbId}))),t&&(r=t),r})),aU(rU(rU(n)),"getRubricPoints",(function(){var e=n.props.savedRubric,t=n.state.points,r=null;return e&&(r=e.points),g.a.isUndefined(t)||(r=t),r})),aU(rU(rU(n)),"onSubmitSuccess",(function(){n.setState({dirty:!1,cells:void 0,points:void 0})})),aU(rU(rU(n)),"isRubricComplete",(function(){var e=n.props,t=e.rubric,r=e.savedRubric,a=n.state.cells;return a?TG(t,a):!!r&&TG(t,r.cells)})),aU(rU(rU(n)),"enableSave",(function(e){var t=n.state.dirty;if(e)return t;var r=n.isRubricComplete(),a=n.props.isDraft;return r&&(t||a)})),aU(rU(rU(n)),"areGradesHomogeneous",(function(){var e=n.props,t=e.dataForAllStudents,r=e.group,a=r?r.members:null;return dx(a,t)})),aU(rU(rU(n)),"allRubricsComplete",(function(){var e=n.props,t=e.dataForAllStudents,r=e.dataForOneStudent,a=e.group,o=e.rubric,i=function(e,t){return!(!t||!t.myRubricEvaluation)&&TG(e,t.myRubricEvaluation.cells)};return a?ux(a.members,t).every((function(e){return i(o,e.educatorGrade)})):i(o,r.educatorGrade)})),aU(rU(rU(n)),"onFinalizeDrafts",(function(){var e=n.props.group.dbId;sn.a.convertDraftToFinalGroupGrade(e)})),aU(rU(rU(n)),"saveGrade",(function(e){var t=n.props.match.params.studentId,r=n.props,a=r.activityId,o=r.group;o?sn.a.saveGroupGradeRubric(o.dbId,n.getRubricCells(),e).then(n.onSubmitSuccess):sn.a.saveGradeRubric(a,+t,n.getRubricCells(),e).then(n.onSubmitSuccess)})),aU(rU(rU(n)),"showEducatorsGrades",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Grades"),rubricEvaluations:e}))})),aU(rU(rU(n)),"buildTitleActionMenu",(function(e){var t=n.props.i18n,r=[];return e&&e.length>0&&r.push({key:"show-educators-grades",primaryText:t._("Show Grades"),onClick:n.showEducatorsGrades.bind(rU(rU(n)),e)}),0===r.length?null:o.a.createElement(Ue.e,{id:"rubric-card-title-action-button",key:"actions-menu",icon:!0,menuItems:r,ariaLabel:t._("Menu")},Je.a.MENU_VERT)})),aU(rU(rU(n)),"getRubricEvaluationForMutation",(function(){var e=n.getRubricCells();return e?{rows:e.map((function(e){return{evaluationCell:e}}))}:null})),n.state={dirty:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nU(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.activityId,r=t.studentId;n===e.activityId&&r===e.studentId||this.setState({dirty:!1})}},{key:"getNotSubmittedLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Rubric Score: assignment not submitted"):e._("Rubric Grade: assignment not submitted")}},{key:"getGroupOneGradeLabel",value:function(e,t){var n=this.props.i18n;return Object(UO.a)()?n._("Group Rubric Score: {earnedRubricPointsLabel}/{maxRubricPoints}",{earnedRubricPointsLabel:e,maxRubricPoints:t}):n._("Group Rubric Grade: {earnedRubricPointsLabel}/{maxRubricPoints}",{earnedRubricPointsLabel:e,maxRubricPoints:t})}},{key:"getGroupGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Group Rubric Score"):e._("Group Rubric Grade")}},{key:"getGroupNotSubmittedLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Group Rubric Score: assignment not submitted"):e._("Group Rubric Grade: assignment not submitted")}},{key:"getIndividualGradeLabel",value:function(e,t){var n=this.props.i18n;return Object(UO.a)()?n._("Rubric Score: {earnedRubricPointsLabel}/{maxRubricPoints}",{earnedRubricPointsLabel:e,maxRubricPoints:t}):n._("Rubric Grade: {earnedRubricPointsLabel}/{maxRubricPoints}",{earnedRubricPointsLabel:e,maxRubricPoints:t})}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isGradeDraftAllowed,r=e.isGroupProject,a=e.rubric,i=e.rubricEvaluations,c=e.studentId,s=e.isPeerReviewGradingEnabled,u=this.state.dirty,l=this.getRubricPoints(),d=l||0,f=a.maxValue,p=this.saveGrade.bind(this,!1),m=this.saveGrade.bind(this,!0),b=!!c;i&&i.length&&(i=i.filter((function(e){return ar.b(e.user)})));var y=!0;r&&(y=this.areGradesHomogeneous());var v=this.allRubricsComplete(),h=y,g=y&&n,E=!y&&n&&r&&v,w=this.getNotSubmittedLabel();return r&&b&&y?w=this.getGroupOneGradeLabel(d,f):r&&b&&!y?w=this.getGroupGradeLabel():r&&!b?w=this.getGroupNotSubmittedLabel():!r&&b&&(w=this.getIndividualGradeLabel(d,f)),o.a.createElement("div",null,o.a.createElement(K.a,null,o.a.createElement(K.d,{title:w,className:"rubric-card-title",actions:[this.buildTitleActionMenu(i)]}),b&&o.a.createElement("div",null,o.a.createElement(K.c,null,y?o.a.createElement(Bn.a,{rubric:a,grade:this.getRubricCells(),mode:Qn.a.GRADE,onGradeChange:this.onGradeChange}):o.a.createElement(x.Trans,{id:"Group members have different grades"}),s&&o.a.createElement(wF,{isRubricDirty:u,isRubricComplete:this.isRubricComplete(),onSaveSuccess:this.onSubmitSuccess,rubricPoints:l,rubricEvaluation:this.getRubricEvaluationForMutation(),rubricMaxPoints:a.maxValue})),!s&&o.a.createElement(K.b,{className:"rubric-card-actions"},o.a.createElement("div",{className:"u-mr-5px"},h&&o.a.createElement(Ue.a,{id:"button-rubric-card-save",onClick:p,enabled:this.enableSave(!1),ariaLabel:t._("Save"),primary:!0},o.a.createElement(x.Trans,{id:"Save"})),g&&o.a.createElement(Ue.a,{id:"button-rubric-card-save-draft",className:"rubric-save-draft-button",onClick:m,enabled:this.enableSave(!0),ariaLabel:t._("Save As Draft"),primary:!0},o.a.createElement(x.Trans,{id:"Save As Draft"})),E&&o.a.createElement(Ue.a,{id:"button-rubric-card-finalize-drafts",className:"rubric-finalize-drafts-button",onClick:this.onFinalizeDrafts,ariaLabel:t._("Finalize Drafts"),primary:!0},o.a.createElement(x.Trans,{id:"Finalize Drafts"})))))))}}])&&eU(n.prototype,r),a&&eU(n,a),t}(a.Component),iU=Object(s.a)(Object(x.withI18n)()(Object(c.b)((function(e){var t=Vv(e);return{activityId:By(e),activityType:qy(e),dataForAllStudents:vy(e),dataForOneStudent:yy(e),group:My(e),isDraft:g.a.get(t,"isDraft",null),isGradeDraftAllowed:Qv(e),isGroupProject:qy(e)===pc.b.GROUP_PRESENTATION,isPeerReviewGradingEnabled:Dv(e),savedRubric:g.a.get(t,"myRubricEvaluation",null),studentId:ev(e),rubric:tv(e),rubricEvaluations:fv(e)}}))(oU))),cU={fields:["student.firstName","student.lastName"],directions:["asc","asc"]},sU={fields:["user.firstName","user.lastName"],directions:["asc","asc"]},uU={fields:["studentGroup.name","studentGroup.dbId"],directions:["asc","asc"]},lU=n("q2J1");n("269D");function dU(e){return(dU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pU(e){return(pU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mU(e,t){return(mU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vU={nextStudentId:null,previousStudentId:null},hU=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=pU(t).call(this,e),n=!a||"object"!==dU(a)&&"function"!==typeof a?bU(r):a,yU(bU(bU(n)),"getNextPreviousStudentIds",(function(){var e=n.props,t=e.allStudentsData,r=e.studentGroup,a=e.match.params.studentId,o=null,i=null,c=-1,s=r.dbId,u=Object(lU.b)(t,uU.fields,uU.directions);if(u)for(var l=0;l<u.length;l++){var d=u[l];if(+d.student.dbId!==+a?d.studentGroup&&+d.studentGroup.dbId!==+s&&(c<0?o=d.student.dbId:i=d.student.dbId):c=l,i)break}return{previousStudentId:o,nextStudentId:i}})),yU(bU(bU(n)),"onPreviousClick",(function(e){e&&n.navigateNewStudent(e)})),yU(bU(bU(n)),"onNextClick",(function(e){e&&n.navigateNewStudent(e)})),yU(bU(bU(n)),"navigateNewStudent",(function(e){var t=n.props,r=t.match,a=t.history;if(e){var o=V.a.compile(r.path)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yU(e,t,n[t])}))}return e}({},r.params,{studentId:e}));a.push(o)}})),yU(bU(bU(n)),"getActions",(function(){var e=n.getNextPreviousStudentIds(),t=n.props.i18n;return o.a.createElement("div",{className:"grading-student-actions"},o.a.createElement(Ue.c,{id:"button-grading-student-previous",enabled:!!e.previousStudentId,ariaLabel:t._("Previous Student"),onClick:function(){return n.onPreviousClick(e.previousStudentId)}},Je.a.BACK),o.a.createElement(Ue.c,{id:"button-grading-student-next",enabled:!!e.nextStudentId,ariaLabel:t._("Next Student"),onClick:function(){return n.onNextClick(e.nextStudentId)}},Je.a.FORWARD))})),yU(bU(bU(n)),"getDescription",(function(){var e=n.props,t=e.i18n,r=e.dueDate,a=e.locale,i=e.result,c=e.resultPartials,s=e.resultPartialsCreatedCount,u=null;if(i){var l=i.submitter,d=i.submittedAt,f="".concat(l.firstName," ").concat(l.lastName),p=new Date(1e3*d),m=Object(Er.e)(p,dt.a.SHORT,Object(sy.d)(a));u=o.a.createElement("div",null,t._("Submitted by: {submittedBy} ({submittedAtString})",{submittedBy:f,submittedAtString:m}))}return o.a.createElement("div",{className:"group-submission-summary-container"},o.a.createElement("div",{className:"group-submission-summary-left"},o.a.createElement(vV,{className:"submission-summary--group",result:i,resultPartials:c,resultPartialsCreatedCount:s})),o.a.createElement("div",{className:"group-submission-summary-right"},gr.a.isDueDateVisible()&&r?o.a.createElement("div",null,o.a.createElement(x.Trans,{id:"Due date:"})," ",o.a.createElement(Qe.a,{unixTime:r})):null,u))})),yU(bU(bU(n)),"haveIndividualOverrides",(function(){var e=n.props,t=e.allStudentsData,r=e.studentGroup;return!dx(r.members,t)})),n.state=vU,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mU(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.groupName,n=e.gradeType,r=e.showGroupMembers;if(!e.studentGroup)return null;var a=!0;this.haveIndividualOverrides()&&(r=!0,a=!1);var i=nc.a.RUBRIC===n;return o.a.createElement(z.a,{title:t,description:this.getDescription(),headerContentRight:this.getActions()},o.a.createElement("div",null,o.a.createElement(cx,null),o.a.createElement(VV,{showStudentCard:!1}),i&&o.a.createElement(iU,null),r&&o.a.createElement(ZG,{dismissable:a}),o.a.createElement(kh,{viewContext:kh.SUBMISSION_VIEW_CONTEXT.EDUCATOR})))}}])&&fU(n.prototype,r),a&&fU(n,a),t}(a.Component),gU=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityData:my(e),activityName:Qy(e),dueDate:zy(e),gradeType:Yv(e),groupName:xy(e),locale:cy.a(e),showGroupMembers:Uy(e),studentGroupName:xy(e),studentGroup:My(e),allStudentsData:vy(e),result:Zy(e),resultPartials:Xy(e),resultPartialsCreatedCount:$y(e)}}))(hU)));function EU(e){return(EU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wU(e){return(wU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SU(e,t){return(SU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var CU=function(e){function t(){var e,n,r,a,c,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return r=this,n=!(a=(e=wU(t)).call.apply(e,[this].concat(d)))||"object"!==EU(a)&&"function"!==typeof a?OU(r):a,c=OU(OU(n)),u=function(){var e=o.a.createElement(gU,null);return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},e),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{component:gU}))))},(s="render")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SU(e,t)}(t,e),t}(a.Component),_U=Object(s.a)(Object(c.b)((function(e){return{isLoading:by(e)}}))(CU));n("RtWw");function TU(e){return(TU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PU(e){return(PU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RU(e,t){return(RU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kU=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=PU(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==TU(a)&&"function"!==typeof a?AU(r):a,jU(AU(AU(n)),"getDescription",(function(){var e=n.props,t=e.i18n,r=e.dueDate;return r&&gr.a.isDueDateVisible()?o.a.createElement("div",null,t._("Due Date:")," ",o.a.createElement(Qe.b,{unixTime:r})):null})),jU(AU(AU(n)),"getNextAndPreviousSubmissions",(function(){var e=n.props,t=e.allStudentsData,r=e.gradebookStudentData,a=e.match.params.studentId,o=null,i=null;if(t){var c=g.a.get(r,"students");(!c||c.length<=0)&&(c=Object(lU.b)(t,cU.fields,cU.directions));var s=g.a.findIndex(c,(function(e){return g.a.get(e,"student.dbId")===+a}));s-1>=0&&(o=g.a.get(c[s-1],"student.dbId")),s+1<c.length&&(i=g.a.get(c[s+1],"student.dbId"))}return{previousId:o,nextId:i}})),jU(AU(AU(n)),"onPreviousClick",(function(e){e&&n.navigateNewStudent(e)})),jU(AU(AU(n)),"onNextClick",(function(e){e&&n.navigateNewStudent(e)})),jU(AU(AU(n)),"navigateNewStudent",(function(e){var t=n.props,r=t.match,a=t.history;if(e){var o=V.a.compile(r.path)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jU(e,t,n[t])}))}return e}({},r.params,{studentId:e}));a.push(o)}})),jU(AU(AU(n)),"getActions",(function(){var e=n.getNextAndPreviousSubmissions(),t=n.props.i18n;return o.a.createElement("div",{className:"grading-student-actions"},o.a.createElement(Ue.c,{id:"button-grading-student-previous",ariaLabel:t._("Previous Student"),enabled:!!e.previousId,onClick:function(){return n.onPreviousClick(e.previousId)}},Je.a.BACK),o.a.createElement(Ue.c,{id:"button-grading-student-next",ariaLabel:t._("Next Student"),enabled:!!e.nextId,onClick:function(){return n.onNextClick(e.nextId)}},Je.a.FORWARD))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RU(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.activityName;return o.a.createElement(z.a,{title:e,description:this.getDescription(),headerContentRight:this.getActions()},this.props.children)}}])&&IU(n.prototype,r),a&&IU(n,a),t}(a.Component),NU=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:Qy(e),dueDate:zy(e),gradeType:Yv(e),result:Fy(e),allStudentsData:vy(e),gradebookStudentData:hy(e)}}))(kU)));function DU(e){return(DU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MU(e,t){return!t||"object"!==DU(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xU(e){return(xU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FU(e,t){return(FU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var VU=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MU(this,xU(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FU(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.gradeType,n=e.isPeerReviewEnabled,r=e.result,a=nc.a.RUBRIC===t;return o.a.createElement(NU,null,o.a.createElement("div",null,o.a.createElement(cx,null),o.a.createElement(VV,null),a&&r&&o.a.createElement(iU,null),r&&o.a.createElement(kh,{viewContext:kh.SUBMISSION_VIEW_CONTEXT.EDUCATOR}),n&&o.a.createElement(YF,null)))}}])&&LU(n.prototype,r),a&&LU(n,a),t}(a.Component),GU=Object(s.a)(Object(c.b)((function(e){return{gradeType:Yv(e),isPeerReviewEnabled:Pv(e),result:Fy(e)}}))(VU));function UU(e){return(UU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qU(e){return(qU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WU(e,t){return(WU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var QU=function(e){function t(){var e,n,r,a,c,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return r=this,n=!(a=(e=qU(t)).call.apply(e,[this].concat(d)))||"object"!==UU(a)&&"function"!==typeof a?BU(r):a,c=BU(BU(n)),u=function(){var e=o.a.createElement(GU,null);return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},e),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{component:GU}))))},(s="render")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WU(e,t)}(t,e),t}(a.Component),YU=Object(s.a)(Object(c.b)((function(e){return{isLoading:by(e)}}))(QU));n("TsH0");function HU(e){return(HU="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zU(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function KU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){eq(e,t,n[t])}))}return e}function XU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $U(e){return($U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZU(e,t){return(ZU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tq={resumeVideoAfterMessageSubmit:!1,selectedStudent:null,selectedAvailableResult:null,selectedDeleteComment:null,selectedEditComment:null,showDeleteCommentDialog:!1,showDocuments:!1,showEditCommentDialog:!1,message:"",showReflectionAnswersDialog:!1,showRubricDialog:!1,showSelfAssessmentDialog:!1,showAddPresetDialog:!1},nq="Grading results video player",rq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=$U(t).call(this,e),n=!a||"object"!==HU(a)&&"function"!==typeof a?JU(r):a,eq(JU(JU(n)),"componentDidMount",(function(){n.scrollToBottom()})),eq(JU(JU(n)),"UNSAFE_componentWillUpdate",(function(){})),eq(JU(JU(n)),"scrollToBottom",(function(){var e=We.a.findDOMNode(n.feedContainer);e&&(e.scrollTop=e.scrollHeight)})),eq(JU(JU(n)),"getPlayerTime",(function(){var e=fc.c(n.getVideoPlayerId(),Ft.a.getState());return null===e?null:+e.toFixed(1)-.1})),eq(JU(JU(n)),"getVideoPlayerId",(function(){var e=n.props,t=e.result,r=e.activityId;return t?nq+"_"+r+"_"+t.submitter.dbId:nq})),eq(JU(JU(n)),"onMessageChange",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit,a=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),o=r;if(o||(o=a),a){var i=n.getPlayerTime(),c=n.getVideoPlayerId();t(dc.r(c)),n.globalPlayerEmitter.pause({playerId:c,startTime:i})}n.setState({message:e,resumeVideoAfterMessageSubmit:o})})),eq(JU(JU(n)),"onPresetMessageChange",(function(e){var t=n.props.dispatch;n.globalPlayerEmitter.pause({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),t(dc.r(n.getVideoPlayerId())),n.setState({message:e},(function(){n.onMessageSubmit()}))})),eq(JU(JU(n)),"onMessageSubmit",(function(){var e=n.props,t=e.activityId,r=e.submitter,a=e.dispatch,o=n.state,i=o.message,c=o.resumeVideoAfterMessageSubmit;sn.a.createActivityCommentText(+t,r.dbId,i,n.getPlayerTime()).then((function(){n.setState({message:"",resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),c&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),a(dc.s(n.getVideoPlayerId())))}))})),eq(JU(JU(n)),"onVideoAdd",(function(){var e=n.props,t=e.dispatch,r=e.activityId,a=n.state.resumeVideoAfterMessageSubmit,i=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying"),c=a;c||(c=i),i&&(n.globalPlayerEmitter.pause({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),t(dc.r(n.getVideoPlayerId()))),n.setState({resumeVideoAfterMessageSubmit:c}),Di.a.isRecorderSupported()&&!lc.b()?Hn.a.showModal(o.a.createElement(Qi,{mediaType:Hi.a.COMMENT,id:"FeedbackCommentRecorder",onComplete:function(e){e&&e.masterMediaId&&n.onAddVideoComplete(e.masterMediaId)},activityId:+r})):Hn.a.showModal(o.a.createElement(ec,{mediaType:Hi.a.COMMENT,showImportFromCloud:!1,onComplete:function(e){e&&e[0]&&n.onAddVideoComplete(e[0])},activityId:+r}))})),eq(JU(JU(n)),"onAddVideoComplete",(function(e){var t=n.props,r=t.dispatch,a=t.activityId,o=t.result,i=n.state.resumeVideoAfterMessageSubmit;e&&sn.a.createActivityCommentMedia(+a,o.submitter.dbId,e,n.getPlayerTime()).then((function(){n.setState({resumeVideoAfterMessageSubmit:!1}),n.scrollToBottom(),i&&(n.isVideoPaused()&&n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),r(dc.s(n.getVideoPlayerId())))}))})),eq(JU(JU(n)),"onAddPreset",(function(e){n.setState({selectedEditComment:g.a.clone(e),showAddPresetDialog:!0})})),eq(JU(JU(n)),"onAddPresetCancel",(function(){n.setState({selectedEditComment:null,showAddPresetDialog:!1})})),eq(JU(JU(n)),"onAddPresetSubmit",(function(){var e=n.state.selectedEditComment;uy.a.addPresetComment(e.commentText).then((function(){n.setState({showAddPresetDialog:!1,selectedEditComment:null})}))})),eq(JU(JU(n)),"onEditComment",(function(e){n.setState({selectedEditComment:g.a.clone(e),showEditCommentDialog:!0})})),eq(JU(JU(n)),"onEditCancel",(function(){n.setState({selectedEditComment:null,showEditCommentDialog:!1})})),eq(JU(JU(n)),"onEditSubmit",(function(){var e=n.state.selectedEditComment;sn.a.editFeedbackComment(e.dbId,e).then((function(){n.setState({showEditCommentDialog:!1,selectedEditComment:null})}))})),eq(JU(JU(n)),"onEditCommentChange",(function(e){n.setState({selectedEditComment:KU({},n.state.selectedEditComment,{commentText:e})})})),eq(JU(JU(n)),"onDeleteComment",(function(e){n.setState({showDeleteCommentDialog:!0,selectedDeleteComment:e})})),eq(JU(JU(n)),"onDeleteCancel",(function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})})),eq(JU(JU(n)),"onDeleteSubmit",(function(){var e=n.state.selectedDeleteComment,t=n.props.activityId;t=+t,sn.a.deleteActivityComment(t,e.dbId).then((function(){n.setState({showDeleteCommentDialog:!1,selectedDeleteComment:null})}))})),eq(JU(JU(n)),"onSyncTimeClick",(function(e){var t=n.props.dispatch,r=n.getPlayerTime(),a=e,o=n.getVideoPlayerId();t(dc.B(o,a)),n.globalPlayerEmitter.seek({playerId:o,startTime:r,endTime:a})})),eq(JU(JU(n)),"getFeedMenuActions",(function(e){var t=n.props,r=t.i18n,a=t.commentPresets,i=[],c=g.a.find(a,(function(t){return t.commentText===e.commentText}));return i.push({primaryText:r._("Add as Preset"),disabled:Boolean(c),onClick:function(){n.onAddPreset(e)},leftIcon:o.a.createElement(zt.a,{ariaLabel:r._("Add as Preset, icon")},Je.a.ADD)},{primaryText:r._("Edit"),onClick:function(){n.onEditComment(e)},leftIcon:o.a.createElement(zt.a,{ariaLabel:r._("Edit, icon")},Je.a.EDIT)},{primaryText:r._("Delete"),onClick:function(){n.onDeleteComment(e)},leftIcon:o.a.createElement(zt.a,{ariaLabel:r._("Delete, icon")},Je.a.DELETE)}),i})),eq(JU(JU(n)),"getFeedSection",(function(){var e=n.props,t=e.result,r=e.userId,a=e.i18n,i=e.termClassId,c=e.activityId,s=t.comments;return s&&s.length>0?(s=g.a.orderBy(s,["syncTime","updatedAt"],["asc","asc"]),o.a.createElement("div",{className:"review-feed"},s&&s.map((function(e){var t=e.commenter&&e.commenter.dbId===r,s=!t&&e.commenter&&ar.b(e.commenter);return o.a.createElement(Jf,{key:"review-comment"+e.dbId,comment:e,showCommenterName:!0,canEdit:!s,canDelete:!s,termClassId:i,activityId:c,usageContext:kd.a.COMMENT,onSyncTimeClick:n.onSyncTimeClick,onDeleteComment:n.onDeleteComment,onEditComment:n.onEditComment,customActions:t?o.a.createElement(Ue.e,{id:"review-comment-menu-button-"+e.dbId,icon:!0,className:"review-edit-comment-button",menuItems:n.getFeedMenuActions(e),ariaLabel:a._("Comment options")},Je.a.MENU_VERT):null})})))):o.a.createElement("div",{className:"review-feed no-comments"},o.a.createElement("span",{className:"card-placeholder-text"},o.a.createElement(x.Trans,{id:"No comments"})))})),eq(JU(JU(n)),"getCommentPresetItems",(function(){var e=n.props.commentPresets,t=g.a.clone(e),r=n.state.message,a=[];if(r&&(t=g.a.filter(t,(function(e){return-1!==e.commentText.toLowerCase().indexOf(r.toLowerCase())}))),t)for(var o=function(e){a.push({className:"feedback-text-dropdown-item",contentClassName:"feedback-text-dropdown-item-text",tileClassName:"feedback-text-dropdown-item-tile",primaryText:t[e].commentText,onClick:function(){return n.onPresetMessageChange(t[e].commentText)}})},i=0;i<t.length;i++)o(i);return a})),eq(JU(JU(n)),"onPresetDropdownVisibilityChange",(function(e){var t=n.props.dispatch,r=n.state.resumeVideoAfterMessageSubmit;if(e){var a=fc.b(n.getVideoPlayerId(),Ft.a.getState(),"isPlaying");if(a){var o=n.getPlayerTime(),i=n.getVideoPlayerId();t(dc.r(i)),n.globalPlayerEmitter.pause({playerId:i,startTime:o})}n.setState({resumeVideoAfterMessageSubmit:a})}else r&&(n.globalPlayerEmitter.play({playerId:n.getVideoPlayerId(),startTime:n.getPlayerTime()}),t(dc.s(n.getVideoPlayerId())))})),eq(JU(JU(n)),"getSubmitSection",(function(){var e=n.state.message,t=n.props,r=t.activityCommentIsLoading,a=t.i18n,i=Object(lt.f)(e);r&&n._previousActivityCommentIsLoading&&requestAnimationFrame((function(){n.feedbackTextFieldRef.current.focus()})),n._previousActivityCommentIsLoading=r;var c=null;return lc.f()||(c=lc.d()?a._("(\\u2318 + Enter) to Submit"):a._("(Ctrl + Enter) to Submit")),o.a.createElement("div",{className:"review-submit-section"},o.a.createElement(Ue.c,{id:"button-grading-feedback-video-add",enabled:!r,className:"review-add-video-button",ariaLabel:a._("Add Video"),onClick:n.onVideoAdd},Je.a.VIDEO_ADD),o.a.createElement(ut.j,{ref:n.feedbackTextFieldRef,id:"feedback-text-dropdown",className:"feedback-text-dropdown",listClassName:"feedback-text-dropdown-list",ariaLabel:a._("Comment"),enabled:!r,errorText:i.exceedsLimit?a._("Exceeds {0} characters.",{0:i.maxLength}):"",helpText:c,helpOnFocus:!0,maxLength:i.maxLength,maxRows:2,menuItems:n.getCommentPresetItems(),onDropdownVisibilityChange:n.onPresetDropdownVisibilityChange,onTextChange:n.onMessageChange,onSubmit:n.onMessageSubmit,placeholder:a._("Comment..."),required:!i.isEmpty,rows:1,toggleQuery:".md-text-field-container",value:e}),o.a.createElement(Ue.c,{id:"button-grading-feedback-message-send",enabled:!r&&i.isValid,className:"message-send-button",onClick:n.onMessageSubmit,isLoading:r},Je.a.SEND))})),eq(JU(JU(n)),"onViewDocuments",(function(){n.setState({showDocuments:!0})})),eq(JU(JU(n)),"onDocumentDialogClose",(function(){n.setState({showDocuments:!1})})),eq(JU(JU(n)),"onShowAutoAnalysis",(function(e){var t=n.props.isAutoAnalysisScoreVisible;Hn.a.showModal(o.a.createElement(qu,{isScoreVisible:t,media:e}))})),eq(JU(JU(n)),"getVideoTopToolbar",(function(){var e=[],t=n.props,r=t.result,a=t.hasReflectionAnswers,i=t.i18n,c=t.activityType,s=t.isAutoAnalysisEnabled;if(!r)return null;(a||r.documents&&r.documents.length>0||r.links&&r.links.length>0)&&(e.push(o.a.createElement(Kt.c,{key:"document_view_item",onClick:n.onViewDocuments,leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Documents, icon"),iconClassName:vr.a.FILE}),primaryText:i._("Documents")})),e.push(o.a.createElement(so.a,{key:"feedback_divider[0]"})));var u=r.media;if(!u&&r.requiredMedia&&(u=r.requiredMedia),u){var l=Boolean(u.meetingAssets||u.meetingDownloadUrl);u.slaveMedia?e.push(o.a.createElement(Kt.c,{key:"download_camera_item",enabled:Boolean(u.downloadUrl),onClick:function(){return Object(pl.a)(u.downloadUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download camera recording")}),o.a.createElement(Kt.c,{key:"download_desktop_item",enabled:Boolean(u.slaveMedia.downloadUrl),onClick:function(){return Object(pl.a)(u.slaveMedia.downloadUrl)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download screen recording")})):e.push(o.a.createElement(Kt.c,{key:"download_item",enabled:Boolean(u.downloadUrl),onClick:function(){return po.a.downloadPartial(u)},leftIcon:o.a.createElement(zt.a,{ariaLabel:i._("Download, icon")},Je.a.DOWNLOAD),primaryText:i._("Download")}));var d=Jc.isActivityTypeSupported(c);s&&d&&!l&&e.push(o.a.createElement(Dw,{id:"auto-analysis",onClick:function(){n.onShowAutoAnalysis(u)}}))}return 0===(e=g.a.compact(e)).length?null:o.a.createElement("div",{className:"video-top-toolbar-container"},o.a.createElement(Ue.e,{id:"video-actions-menu-button",className:"video-actions-menu-button",menuItems:e},Je.a.MENU_VERT))})),eq(JU(JU(n)),"getFilteredRubricEvaluations",(function(){var e=n.props,t=e.activityType,r=e.rubricEvaluations,a=e.studentData,o=[];if(r){var i=a.student;o=r.filter((function(e){if(ar.e(i,e.user))return!1;if(ar.d(i,e.user)){if(t===pc.b.GROUP_PRESENTATION){var n=a.studentGroup.members;return!ar.c(i,e.user,n)}return!0}}))}return o})),eq(JU(JU(n)),"getRatingComponent",(function(){var e=n.props,t=e.rubric,r=e.isFiveStarEnabled,a=e.isRubricReviewEnabled,i=e.studentData,c=e.i18n;if(r){var s=0;return i&&i.peerReview&&(s=i.peerReview.fiveStarValue),o.a.createElement("div",{className:"peer-review-fivestar-container"},o.a.createElement(Dn.a,{name:"feedback-review-rating",enabled:!1,value:s,onChange:n.onRatingChange}),o.a.createElement("span",null,"(",i.peerReview.fiveStarRatesAmount,")"))}if(a){var u=g.a.get(i,"peerReview.rubricGrade",0),l=n.getFilteredRubricEvaluations();return o.a.createElement("div",{className:"eval-rubric-result-container"},o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Peer Review"})),o.a.createElement(Ue.a,{id:"button-grading-feedback-peer-review-rubric",enabled:!!l.length,onClick:n.showPeerReviewReport.bind(null,l),className:"eval-rubric-result-button",ariaLabel:c._("Peer Review"),primary:!0},o.a.createElement(Bn.c,{points:u,max:t.maxValue})))}})),eq(JU(JU(n)),"showPeerReviewReport",(function(e){var t=n.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Peer Reviews"),rubricEvaluations:e}))})),eq(JU(JU(n)),"getCardHeader",(function(){return o.a.createElement("div",{className:"md-card-title md-card-title--primary card-title feedback-card-header"},o.a.createElement("h2",{className:"section-header"},o.a.createElement(x.Trans,{id:"Submission"})),o.a.createElement("div",{className:"feedback-rating-container"},n.getRatingComponent()))})),eq(JU(JU(n)),"getDeleteDialogActions",(function(){var e=n.props,t=e.activityCommentIsLoading,r=e.i18n;return[o.a.createElement(Ue.a,{id:"button-grading-feedback-delete-dialog-cancel",secondary:!0,ariaLabel:r._("Cancel"),enabled:!t,onClick:n.onDeleteCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-grading-feedback-delete-dialog-delete",primary:!0,ariaLabel:r._("Delete"),isLoading:t,enabled:!t,onClick:n.onDeleteSubmit},o.a.createElement(x.Trans,{id:"Delete"}))]})),eq(JU(JU(n)),"getAddPresetDialogActions",(function(){var e=n.props,t=e.isCommentPresetLoading,r=e.i18n;return[o.a.createElement(Ue.a,{id:"button-grading-feedback-add-preset-dialog-no",secondary:!0,ariaLabel:r._("No"),enabled:!t,onClick:n.onAddPresetCancel},o.a.createElement(x.Trans,{id:"No"})),o.a.createElement(Ue.a,{id:"button-grading-feedback-add-preset-dialog-yes",primary:!0,ariaLabel:r._("Yes"),isLoading:t,enabled:!t,onClick:n.onAddPresetSubmit},o.a.createElement(x.Trans,{id:"Yes"}))]})),eq(JU(JU(n)),"getEditDialogActions",(function(e){var t=n.props,r=t.activityCommentIsLoading,a=t.i18n;return[o.a.createElement(Ue.a,{id:"button-grading-feedback-edit-dialog-cancel",secondary:!0,ariaLabel:a._("Cancel"),enabled:!r,onClick:n.onEditCancel},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-grading-feedback-edit-dialog-submit",primary:!0,ariaLabel:a._("Submit"),isLoading:r,enabled:!r&&e.isValid,onClick:n.onEditSubmit},o.a.createElement(x.Trans,{id:"Submit"}))]})),eq(JU(JU(n)),"onPreviewReflectionAnswers",(function(){n.setState({showReflectionAnswersDialog:!0})})),eq(JU(JU(n)),"onPreviewReflectionAnswersClose",(function(){n.setState({showReflectionAnswersDialog:!1})})),n.globalPlayerEmitter=new tc.a,n.state=tq,n.feedbackTextFieldRef=o.a.createRef(),n._previousActivityCommentIsLoading=!1,n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZU(e,t)}(t,e),n=t,(r=[{key:"isVideoPaused",value:function(){return fc.b(this.getVideoPlayerId(),Ft.a.getState(),"isPaused")}},{key:"render",value:function(){var e=this,t=this.props,n=t.result,r=t.rubric,a=t.reflectionAnswers,i=t.needReflectionAnswers,c=t.activityCommentIsLoading,s=t.i18n,u=this.state,l=u.selectedEditComment,d=u.showDocuments,f=u.showDeleteCommentDialog,p=u.showEditCommentDialog,m=u.showRubricDialog,b=u.showAddPresetDialog,y=u.showReflectionAnswersDialog;if(!n)return null;var v=[],h=n.comments,E=null,w=n.media;!w&&n.requiredMedia&&(w=n.requiredMedia),n.myRubricEvaluation&&(E=n.myRubricEvaluation.points),h&&h.forEach((function(e){e&&null!==e.syncTime&&v.push({timestamp:e.syncTime})}));var S=l?l.commentText:"",O=Object(lt.f)(S),C=[];return C.push(po.a.createReflectionAnswersPartial(s._("Reflection Answers"),a,this.onPreviewReflectionAnswers)),C=g.a.concat.apply(g.a,[C].concat(zU(n.documents||[]))),C=g.a.compact(C),o.a.createElement("div",null,o.a.createElement(K.a,{className:"review-card"},this.getCardHeader(),o.a.createElement("div",{className:"review-wrapper"},w?o.a.createElement("div",{className:Ie()("review-video-container",C&&C.length>0?null:"no-documents")},w&&this.getVideoTopToolbar(),w&&o.a.createElement(mf.a,{id:"review-media",media:w,activityId:this.props.activityId,termClassId:this.props.termClassId,usageContext:kd.a.STUDENT_RESULT,marks:v,playerId:this.getVideoPlayerId()})):o.a.createElement("div",{className:Ie()("review-document-container",w?null:"no-media")},C?o.a.createElement(oE,{documents:C,links:n.links}):o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"No documents found"}))),o.a.createElement("div",{className:Ie()("review-comments-container",w?null:"no-media")},o.a.createElement("div",{className:"review-feed-container",ref:function(t){e.feedContainer=t}},this.getFeedSection()),o.a.createElement("div",{className:"review-submit-container"},this.getSubmitSection())),o.a.createElement(fE,{visible:d,documents:C,links:n.links,onClose:this.onDocumentDialogClose}),o.a.createElement(Fr.a,{id:"delete-review-item-dialog",title:s._("Delete Comment"),visible:f,actions:this.getDeleteDialogActions()},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to delete this comment?"}))),l&&o.a.createElement(Fr.a,{id:"edit-review-item-dialog",className:"edit-review-item-dialog",title:s._("Edit Comment"),visible:p,actions:this.getEditDialogActions(O)},o.a.createElement(ut.i,{id:"review-edit-textfield",className:"review-edit-textfield",enabled:!c,placeholder:s._("Comment..."),onChange:this.onEditCommentChange,value:l.commentText,rows:1,errorText:O.exceedsLimit?s._("Exceeds {0} characters.",{0:O.maxLength}):"",maxLength:O.maxLength,required:!0,maxRows:4,ariaLabel:s._("Comment")})),b&&o.a.createElement(Fr.a,{id:"add-comment-preset-dialog",title:s._("Add Preset"),visible:b,actions:this.getAddPresetDialogActions()},o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Are you sure you want to add this comment as a preset?"}))),m&&o.a.createElement(Bn.b,{rubric:r,rubricPoints:E,mode:Qn.a.VIEW,onCancel:this.onDialogCancel,onSubmit:this.onDialogSubmit}),o.a.createElement(jd,{visible:y,onClose:this.onPreviewReflectionAnswersClose,answers:a,needAnswers:i}))))}}])&&XU(n.prototype,r),a&&XU(n,a),t}(a.Component),aq=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:By(e),activityType:qy(e),result:Zy(e),reflectionAnswers:_v(e),hasReflectionAnswers:Tv(e),needReflectionAnswers:Iv(e),activityData:my(e),rubric:tv(e),isRubricReviewEnabled:rv(e),isRubricSelfReviewEnabled:av(e),isFiveStarEnabled:ov(e),activityCommentIsLoading:cv(e),submitter:Jy(e),userId:wt.i(e),commentPresets:wt.a(e),isCommentPresetLoading:wt.j(e),rubricEvaluations:fv(e),studentData:yy(e),termClassId:dv(e),isAutoAnalysisEnabled:Ev(e),isAutoAnalysisScoreVisible:gv(e)}}))(rq)));n("jUYD");function oq(e){return(oq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cq(e){return(cq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sq(e,t){return(sq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dq="qa-answer-player-",fq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=cq(t).call(this,e),n=!a||"object"!==oq(a)&&"function"!==typeof a?uq(r):a,lq(uq(uq(n)),"getVideoContainer",(function(){var e=n.props,t=e.answer,r=e.i18n,a=t.isCrashed,i=t.isWithdrawn,c=t.media;return a||i?o.a.createElement("div",{className:"qa-answer-video-placeholder"},o.a.createElement(zt.a,{className:Ie()(a?"crashed":"withdrawn")},a?Je.a.VIDEO_WARNING:Je.a.VIDEO_WITHDRAW)):c&&c.processingStatus===ml.a.PROGRESS?o.a.createElement("div",{className:"qa-answer-video-placeholder"},o.a.createElement(zt.a,{ariaLabel:r._("Video Processing, icon")},Je.a.HOURGLASS_EMPTY),o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Processing..."}))):o.a.createElement("div",{className:"qa-answer-media-player"},o.a.createElement(mf.a,{id:"qa-answer-media",playerId:dq+t.dbId,activityId:n.props.activityId,termClassId:n.props.termClassId,usageContext:kd.a.STUDENT_RESULT_PARTIAL,media:t.media}))})),lq(uq(uq(n)),"getInformationContainer",(function(){var e=n.props.answer,t=e.isCrashed,r=e.isWithdrawn,a=e.withdrawComment;return o.a.createElement("div",{className:"qa-answer-info-container"},o.a.createElement("div",{className:"qa-answer-info-item"},o.a.createElement(x.Trans,{id:"<0>Started at:</0><1/>",components:[o.a.createElement("span",{className:"info-label"}),o.a.createElement(Qe.a,{unixTime:e.startedAt,dateTimeFormat:dt.a.MEDIUM})]})),r?o.a.createElement("div",null,o.a.createElement("div",{className:"qa-answer-info-item"},o.a.createElement(x.Trans,{id:"<0>Status: </0>Withdrawn",components:[o.a.createElement("span",{className:"info-label"})]})),o.a.createElement("div",{className:"qa-answer-info-item"},o.a.createElement(x.Trans,{id:"<0>Reason: </0><1>{withdrawComment}</1>",values:{withdrawComment:a},components:[o.a.createElement("span",{className:"info-label"}),o.a.createElement("p",{className:"withdrawn-comment"})]}))):null,t?o.a.createElement("div",null,o.a.createElement("div",{className:"qa-answer-info-item"},o.a.createElement(x.Trans,{id:"<0>Status: </0>Failed",components:[o.a.createElement("span",{className:"info-label"})]}))):null)})),n.state={resetEnabled:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sq(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.answer,r=e.i18n;return o.a.createElement("div",{className:"qa-answer-container"},o.a.createElement(ut.a,{id:"answer-selection-"+n.dbId,name:"answer-selection[]",label:"",ariaLabel:r._("Answer Selection"),onChange:t}),this.getVideoContainer(),this.getInformationContainer())}}])&&iq(n.prototype,r),a&&iq(n,a),t}(a.Component);fq.propTypes={answer:M.a.object.isRequired,onChange:M.a.func,activityId:M.a.number,termClassId:M.a.number};var pq=Object(x.withI18n)()(fq);function mq(e){return(mq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bq(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vq(e){return(vq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hq(e,t){return(hq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vq(t).call(this,e),n=!a||"object"!==mq(a)&&"function"!==typeof a?gq(r):a,Eq(gq(gq(n)),"onSubmit",(function(){if(n.props.onSubmit){var e=n.state.selectedAnswers;n.props.onSubmit(e)}})),Eq(gq(gq(n)),"onSelectionChange",(function(e,t){var r=n.state.selectedAnswers;if(e)n.setState({selectedAnswers:[].concat(bq(r),[t.dbId])});else{var a=bq(r);g.a.remove(a,(function(e){return+e===+t.dbId})),n.setState({selectedAnswers:a})}})),n.state={resetEnabled:!1,selectedAnswers:[]},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hq(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.onCancel,r=t.className,a=t.visible,i=t.answers,c=t.isLoading,s=t.i18n,u=t.match.params,l=u.activityId,d=u.classId,f=this.state.selectedAnswers,p=[o.a.createElement(Ue.a,{id:"button-qa-reset-dialog-cancel",secondary:!0,ariaLabel:s._("Cancel"),enabled:!c,onClick:n},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-qa-reset-dialog-reset",primary:!0,ariaLabel:s._("Reset"),enabled:!c&&f.length>0,isLoading:c,onClick:this.onSubmit},o.a.createElement(x.Trans,{id:"Reset"}))];return o.a.createElement(pi.a,{actions:p,dialogClassName:Ie()("qa-answer-dialog",r),id:"qa-answer-dialog",title:s._("Reset Submission Answers"),modal:!0,visible:a},o.a.createElement("div",{className:"qa-answer-dialog-contents"},i.map((function(t){return o.a.createElement(pq,{activityId:+l,termClassId:+d,key:"qa-answer-"+t.dbId,onChange:function(n){e.onSelectionChange(n,t)},answer:t})}))))}}])&&yq(n.prototype,r),a&&yq(n,a),t}(a.Component);wq.defaultProps={isLoading:!1,visible:!1},wq.propTypes={answers:M.a.array.isRequired,isLoading:M.a.bool,onCancel:M.a.func,onSubmit:M.a.func,visible:M.a.bool};var Sq=Object(s.a)(Object(x.withI18n)()(wq));function Oq(e){return(Oq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _q(e){return(_q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tq(e,t){return(Tq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_q(t).call(this,e),n=!a||"object"!==Oq(a)&&"function"!==typeof a?Iq(r):a,Pq(Iq(Iq(n)),"onResetSubmission",(function(){n.setState({showResetDialog:!0})})),Pq(Iq(Iq(n)),"onResetSubmit",(function(e){var t=n.props,r=t.activityId,a=t.qaAnswers,o=t.submitter;n.setState({inServiceCall:!0},(function(){sn.a.deleteActivityResult(r,o.dbId).then((function(){for(var t=[],o=function(n){var o=g.a.find(a,(function(t){return+t.dbId===+e[n]}));o&&t.push(sn.a.deleteQAAnswer(o.qaQuestion.dbId,o.submitter.dbId,r))},i=0;i<e.length;i++)o(i);Promise.all(t).then((function(){n.setState({showResetDialog:!1,inServiceCall:!1})}))}))}))})),Pq(Iq(Iq(n)),"onResetCancel",(function(){n.setState({showResetDialog:!1})})),n.state={showResetDialog:!1,inServiceCall:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tq(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityType,n=e.gradeType,r=e.isPeerReviewEnabled,a=e.result,i=e.qaAnswers,c=this.state,s=c.showResetDialog,u=c.inServiceCall,l=nc.a.RUBRIC===n;return o.a.createElement(NU,null,o.a.createElement(cx,{onResetSubmission:t===pc.b.QA_ENHANCED?this.onResetSubmission:null}),o.a.createElement(VV,null),l&&o.a.createElement(iU,null),a&&o.a.createElement(aq,null),r&&o.a.createElement(YF,null),s&&o.a.createElement(Sq,{visible:s,answers:i,onSubmit:this.onResetSubmit,onCancel:this.onResetCancel,isLoading:u}))}}])&&Cq(n.prototype,r),a&&Cq(n,a),t}(a.Component),Aq=Object(s.a)(Object(c.b)((function(e){return{activityId:By(e),activityType:qy(e),gradeType:Yv(e),isPeerReviewEnabled:Pv(e),qaAnswers:yv(e),result:Fy(e),submitter:Jy(e)}}))(Rq));function jq(e){return(jq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kq(e){return(kq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nq(e,t){return(Nq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Lq=function(e){function t(){var e,n,r,a,c,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return r=this,n=!(a=(e=kq(t)).call.apply(e,[this].concat(d)))||"object"!==jq(a)&&"function"!==typeof a?Dq(r):a,c=Dq(Dq(n)),u=function(){var e=o.a.createElement(Aq,null);return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},e),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{component:Aq}))))},(s="render")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nq(e,t)}(t,e),t}(a.Component),Mq=Object(s.a)(Object(c.b)((function(e){return{isLoading:by(e)}}))(Lq));function xq(e){return(xq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vq(e,t){return!t||"object"!==xq(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gq(e){return(Gq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uq(e,t){return(Uq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qq=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vq(this,Gq(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uq(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.gradeType,n=e.isPeerReviewEnabled,r=e.result,a=e.studentData,i=nc.a.RUBRIC===t,c=r&&r.media&&r.media.processingStatus===ml.a.READY,s=a&&a.interactiveAnswers?a.interactiveAnswers:[];return o.a.createElement(NU,null,o.a.createElement(cx,null),o.a.createElement(VV,null),i&&o.a.createElement(iU,null),c&&o.a.createElement(aq,null),o.a.createElement(nw,{interactiveAnswers:s,isEducator:!0}),n&&o.a.createElement(YF,null))}}])&&Fq(n.prototype,r),a&&Fq(n,a),t}(a.Component),Wq=Object(s.a)(Object(c.b)((function(e){return{gradeType:Yv(e),isPeerReviewEnabled:Pv(e),result:Fy(e),studentData:yy(e)}}))(qq));function Bq(e){return(Bq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qq(e){return(Qq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yq(e,t){return(Yq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var zq=function(e){function t(){var e,n,r,a,c,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return r=this,n=!(a=(e=Qq(t)).call.apply(e,[this].concat(d)))||"object"!==Bq(a)&&"function"!==typeof a?Hq(r):a,c=Hq(Hq(n)),u=function(){var e=o.a.createElement(Wq,null);return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},e),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{component:Wq}))))},(s="render")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yq(e,t)}(t,e),t}(a.Component),Kq=Object(s.a)(Object(c.b)((function(e){return{isLoading:by(e)}}))(zq));function Xq(e){return(Xq="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zq(e){return(Zq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jq(e,t){return(Jq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nW=2e4,rW=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Zq(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Xq(a)&&"function"!==typeof a?eW(r):a,tW(eW(eW(n)),"loadActivityData",(function(){clearTimeout(n.pollingTimer);var e=n.props.match.params,t=e.activityId,r=e.studentId;sn.a.getActivityGradingData(+t,+r).then((function(){n.startPolling()}))})),tW(eW(eW(n)),"startPolling",(function(){clearTimeout(n.pollingTimer),n._ismounted&&(n.pollingTimer=setTimeout((function(){var e=n.props,t=e.match.params,r=t.activityId,a=t.studentId,o=e.activityType;sn.a.refreshActivityGradingData(+r,o,+a).then((function(){n.startPolling()}))}),nW))})),tW(eW(eW(n)),"getActivityComponent",(function(){var e=n.props.activityData;if(!e)return null;switch(e.type){case pc.b.GROUP_PRESENTATION:return o.a.createElement(_U,null);case pc.b.INDIVIDUAL_PROJECT:return o.a.createElement(YU,null);case pc.b.QA_ENHANCED:return o.a.createElement(Mq,null);case pc.b.INTERACTIVE_VIDEO:return o.a.createElement(Kq,null);default:return o.a.createElement(x.Trans,{id:"Assignment type not supported"})}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jq(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._ismounted=!0,uy.a.getUserPresetComments(),this.props.dispatch(kO.Z(null)),this.loadActivityData()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.loadActivityData()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,clearTimeout(this.pollingTimer)}},{key:"render",value:function(){var e=this.props,t=e.activityData,n=e.isLoading;return n||!t?o.a.createElement(At.b,{loading:n}):o.a.createElement("span",null,o.a.createElement(iO.a,{classId:t.termClass.dbId}),this.getActivityComponent())}}])&&$q(n.prototype,r),a&&$q(n,a),t}(a.Component),aW=Object(s.a)(Object(c.b)((function(e){return{activityData:my(e),activityType:qy(e),isLoading:by(e)}}))(rW));function oW(e){return(oW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cW(e,t){return!t||"object"!==oW(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sW(e){return(sW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uW(e,t){return(uW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lW=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cW(this,sW(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uW(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.match.params.activityId;sn.a.getActivityData(+e)}},{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(z.a,{title:e._("Group Formation")},o.a.createElement(un.a,null,o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Group Formation"}))))}}])&&iW(n.prototype,r),a&&iW(n,a),t}(a.Component),dW=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isLoading:by(e)}}))(lW)));function fW(e){return(fW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mW(e){return(mW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bW(e,t){return(bW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hW=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=mW(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==fW(a)&&"function"!==typeof a?yW(r):a,vW(yW(yW(n)),"onGradeLinkClick",(function(){var e=n.props,t=e.match,r=e.history,a=V.a.compile(xee.EDUCATOR_ACTIVITY_GRADING)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vW(e,t,n[t])}))}return e}({},t.params));r.push(a)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bW(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.termClass,n=e.actions,r=e.activityName,a=e.activityType;return o.a.createElement("div",null,o.a.createElement(iA,{activityName:r,activityType:a,context:VO.a.PROGRESS,classId:t.dbId,actions:n}))}}])&&pW(n.prototype,r),a&&pW(n,a),t}(a.Component),gW=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityId:et.getActivityId(e),activityName:et.getActivityName(e),activityType:et.getActivityType(e),termClass:et.getTermClass(e)}}))(hW))),EW=n("2iEm");function wW(e){return(wW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OW(e){return(OW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CW(e,t){return(CW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var IW=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=OW(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==wW(a)&&"function"!==typeof a?_W(r):a,TW(_W(_W(n)),"onChatSubmit",(function(e){var t=n.props.studentGroup;Et.a.addGroupComment(e,t.dbId)})),TW(_W(_W(n)),"onChatDelete",(function(e){Et.a.deleteGroupComment(e.dbId)})),TW(_W(_W(n)),"getDesktopActions",(function(){var e=n.props,t=e.userId,r=e.studentGroup,a=e.i18n,i=o.a.createElement(Ze,{messages:r.comments}),c=o.a.createElement(gt,{canDelete:!0,messages:r.comments,onDelete:n.onChatDelete,onSubmit:n.onChatSubmit,studentId:t,messagesLoading:n.props.commentsLoading});return[o.a.createElement(Ue.d,{id:"chat-notification-button",key:"chat-notification-button",dialogClassName:"chat-notification-dialog",dialogContent:c,dialogTitle:a._("Chat"),ariaLabel:a._("Chat Messages"),tooltip:{label:a._("Chat")}},Je.a.CHAT),o.a.createElement(Ue.d,{id:"activity-log-notification-button",key:"activity-log-notification-button",dialogContent:i,dialogClassName:"activity-log-notification-dialog",dialogTitle:a._("Activity Log"),ariaLabel:a._("Activity Log"),tooltip:{label:a._("Activity Log")}},Je.a.ACTIVITY)]})),TW(_W(_W(n)),"getMobileActions",(function(){var e=n.props,t=e.match,r=e.i18n;return[o.a.createElement(EW.a,{to:t.url+"/chat"},o.a.createElement(Ue.c,{id:"button-progress-chat",ariaLabel:r._("Chat")},Je.a.CHAT)),o.a.createElement(EW.a,{to:t.url+"/activity-log"},o.a.createElement(Ue.c,{id:"button-progress-activity",ariaLabel:r._("Activity Log")},Je.a.ACTIVITY))]})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CW(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},o.a.createElement(gW,{actions:this.getDesktopActions()})),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(gW,{actions:this.getMobileActions()})))}}])&&SW(n.prototype,r),a&&SW(n,a),t}(a.Component),PW=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityData:et.getActivityData(e),activityId:et.getActivityId(e),activityResult:et.getStudentActivityResult(e),commentsLoading:et.getGroupCommentsIsLoading(e),studentGroup:et.getStudentGroup(e),submitter:et.getActivityResultSubmitter(e),userId:wt.i(e),termClass:et.getTermClass(e)}}))(IW)));function RW(e){return(RW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AW(e){return(AW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jW(e,t){return(jW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DW=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return r=this,a=(e=AW(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==RW(a)&&"function"!==typeof a?kW(r):a,NW(kW(kW(n)),"getProgressPage",(function(){var e=n.props,t=e.instructionsText,r=e.instructionsMedia,a=e.resultPartials,i=e.activityName;return o.a.createElement($t.a,{title:i},o.a.createElement(PW,null),o.a.createElement(Rr,{resultPartials:a}),o.a.createElement(Zr.a,{media:r,text:t}),o.a.createElement(la,{readOnly:!0}),o.a.createElement(So,{readOnly:!0}),o.a.createElement(Jb,{readOnly:!0}))})),NW(kW(kW(n)),"render",(function(){var e=n.props.match;return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(min-width: 701px)"},n.getProgressPage()),o.a.createElement(Gr.a,{query:"(max-width: 700px)"},o.a.createElement(v.a,null,o.a.createElement(i.a,{path:"".concat(e.path,"/activity-log"),render:function(){return o.a.createElement(ct,{parentUrl:e.url})}}),o.a.createElement(i.a,{path:"".concat(e.path,"/chat"),render:function(){return o.a.createElement(Rt,{canDelete:!0,parentUrl:e.url})}}),o.a.createElement(i.a,{path:"".concat(e.path,"/meeting/:meetingId"),render:function(){return o.a.createElement(fi,{readOnly:!0,parentUrl:e.url})}}),o.a.createElement(i.a,{path:"".concat(e.path,"/milestone/:milestoneId"),render:function(){return o.a.createElement(co,{readOnly:!0,parentUrl:e.url})}}),n.getProgressPage())))})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jW(e,t)}(t,e),t}(a.Component),LW=Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),resultPartials:et.getResultPartials(e)}}))(DW));function MW(e){return(MW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xW(e){return(xW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FW(e,t){return(FW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UW=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return r=this,a=(e=xW(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==MW(a)&&"function"!==typeof a?VW(r):a,GW(VW(VW(n)),"getProgressPage",(function(){var e=n.props,t=e.instructionsText,r=e.instructionsMedia,a=e.resultPartials,i=e.activityName;return o.a.createElement($t.a,{title:i},o.a.createElement(gW,null),o.a.createElement(gg.a,{resultPartials:a}),o.a.createElement(Zr.a,{media:r,text:t}),o.a.createElement(kg,{readOnly:!0}),o.a.createElement(So,{readOnly:!0}),o.a.createElement(Jb,{readOnly:!0}))})),GW(VW(VW(n)),"render",(function(){var e=n.props.match;return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 700px)"},(function(t){return o.a.createElement(v.a,null,t&&o.a.createElement(i.a,{path:"".concat(e.path,"/meeting/:meetingId"),render:function(){return o.a.createElement(fi,{readOnly:!0,parentUrl:e.url})}}),n.getProgressPage())})))})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FW(e,t)}(t,e),t}(a.Component),qW=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),resultPartials:et.getResultPartials(e),isVideoToolEnabled:et.isVideoToolEnabled(e),isDocumentToolEnabled:et.isDocumentToolEnabled(e),institution:bb.h(e)}}))(UW)));function WW(e){return(WW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BW(e){return(BW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QW(e,t){return(QW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var HW=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=BW(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==WW(a)&&"function"!==typeof a?YW(r):a,i=YW(YW(n)),s=function(){var e=n.props,t=e.instructionsText,r=e.instructionsMedia,a=e.activityName;return o.a.createElement($t.a,{title:a},o.a.createElement(gW,null),o.a.createElement(TS,null),o.a.createElement(Zr.a,{media:r,text:t}),o.a.createElement(kg,{readOnly:!0}),o.a.createElement(oS.a,{readOnly:!0}))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QW(e,t)}(t,e),t}(a.Component),zW=Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e)}}))(HW));function KW(e){return(KW="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XW(e){return(XW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $W(e,t){return($W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var JW=function(e){function t(){var e,n,r,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return r=this,a=(e=XW(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==KW(a)&&"function"!==typeof a?ZW(r):a,i=ZW(ZW(n)),s=function(){var e=n.props,t=e.instructionsText,r=e.instructionsMedia,a=e.activityName,i=e.studentData;return o.a.createElement($t.a,{title:a},o.a.createElement(gW,null),o.a.createElement(NE,null),o.a.createElement(Zr.a,{media:r,text:t}),o.a.createElement(nw,{interactiveAnswers:i.interactiveAnswers,isEducator:!0}))},(c="render")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$W(e,t)}(t,e),t}(a.Component),eB=Object(s.a)(Object(c.b)((function(e){return{activityName:et.getActivityName(e),instructionsText:et.getActivityInstructionsText(e),instructionsMedia:et.getActivityInstructionsMedia(e),studentData:et.getMyData(e)}}))(JW));function tB(e){return(tB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rB(e){return(rB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aB(e,t){return(aB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cB=2e4,sB=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=rB(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==tB(a)&&"function"!==typeof a?oB(r):a,iB(oB(oB(n)),"loadActivityData",(function(){var e=n.props.match.params,t=e.activityId,r=e.studentId;Et.a.getEducatorProgressActivityData(+t,+r).then((function(){n.startPolling()}))})),iB(oB(oB(n)),"startPolling",(function(){clearTimeout(n.pollingTimer),n._ismounted&&(n.pollingTimer=setTimeout((function(){var e=n.props,t=e.match.params,r=t.activityId,a=t.studentId,o=e.activityType;Et.a.refreshEducatorProgressActivityData(+r,o,+a).then((function(){n.startPolling()}))}),cB))})),iB(oB(oB(n)),"getActivityView",(function(e){switch(e){case pc.b.GROUP_PRESENTATION:return o.a.createElement(LW,null);case pc.b.INDIVIDUAL_PROJECT:return o.a.createElement(qW,null);case pc.b.QA_ENHANCED:return o.a.createElement(zW,null);case pc.b.INTERACTIVE_VIDEO:return o.a.createElement(eB,null);default:return o.a.createElement(x.Trans,{id:"Assignment type not supported"})}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aB(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._ismounted=!0,this.loadActivityData()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.loadActivityData()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,clearTimeout(this.pollingTimer)}},{key:"render",value:function(){var e=this.props,t=e.activityType,n=e.activityData;return e.isLoading?null:t?o.a.createElement("span",null,o.a.createElement(iO.a,{classId:n.termClass.dbId}),this.getActivityView(t)):null}}])&&nB(n.prototype,r),a&&nB(n,a),t}(a.Component),uB=Object(s.a)(Object(c.b)((function(e){return{activityData:et.getActivityData(e),activityType:et.getActivityType(e),isLoading:et.getIsLoading(e)}}))(sB));var lB=Object(x.withI18n)()((function(e){var t=e.rubrics,n=e.activityData,r=e.onFormChange,a=e.onSubmit,i=e.showClientErrors,c=e.serverErrors,s=e.i18n;return o.a.createElement(z.a,{title:s._("Create Group Assignment")},o.a.createElement(iO.a,null),o.a.createElement(iA,{context:VO.a.CONFIGURATION_NEW}),o.a.createElement(un.a,null,o.a.createElement(RI,{rubrics:t,activityData:n,serverErrors:c,onSubmit:a,showClientErrors:i,onChange:r})))})),dB=n("nuPF");function fB(e){return(fB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gB(e,t,n[t])}))}return e}function mB(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function bB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yB(e){return(yB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vB(e,t){return(vB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EB=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=yB(t).call(this,e),n=!a||"object"!==fB(a)&&"function"!==typeof a?hB(r):a,gB(hB(hB(n)),"onFormChange",(function(e){n.formData=e})),gB(hB(hB(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isValid,a=t.form,FT(),r){e.next=6;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 6:return o=n.props,i=o.match.params.classId,c=o.match,s=o.history,u=o.navigation,l=o.dispatch,e.next=9,sn.a.createGroupProject(+i,a).then((function(e){var t=e.dbId,n=Object(dB.a)(u,VO.a.D2L_QUICK_LINK_ACTIVITY_LIST);if(jT.a(),l(yI.e(null)),l(kO.ab(null,OA.a.CONFIGURATION)),l(kO.Z(null)),VT(),Object(Yh.b)()&&n)return window.location.href=n;var r=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(pB({},c.params,{activityId:t}));s.push(r)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 9:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){mB(o,r,a,i,c,"next",e)}function c(e){mB(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={rubrics:null,showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vB(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.classId;kM.getRubrics(+t).then((function(t){e.setState({rubrics:t})})),OM.a.getNavigationItems(+t)}},{key:"render",value:function(){return o.a.createElement(lB,{rubrics:this.state.rubrics,showClientErrors:this.state.showClientErrors,serverErrors:this.state.serverErrors,onSubmit:this.onSubmit,onFormChange:this.onFormChange})}}])&&bB(n.prototype,r),a&&bB(n,a),t}(a.Component),wB=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(EB));var SB=Object(x.withI18n)()((function(e){var t=e.rubrics,n=e.onSubmit,r=e.showClientErrors,a=e.serverErrors,i=e.i18n;return o.a.createElement(z.a,{title:i._("Create Individual Assignment")},o.a.createElement(iO.a,null),o.a.createElement(iA,{context:VO.a.CONFIGURATION_NEW}),o.a.createElement(un.a,null,o.a.createElement(yj,{rubrics:t,showClientErrors:r,serverErrors:a,onSubmit:n})))}));function OB(e){return(OB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){AB(e,t,n[t])}))}return e}function _B(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function TB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IB(e){return(IB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PB(e,t){return(PB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jB=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=IB(t).call(this,e),n=!a||"object"!==OB(a)&&"function"!==typeof a?RB(r):a,AB(RB(RB(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FT(),t.isValid){e.next=5;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 5:return r=n.props,a=r.match.params.classId,o=r.match,i=r.history,c=r.navigation,s=r.dispatch,e.next=8,sn.a.createIndividualProject(+a,t.form).then((function(e){var t=e.dbId,n=Object(dB.a)(c,VO.a.D2L_QUICK_LINK_ACTIVITY_LIST);if(jT.a(),s(yI.f(null)),s(kO.ab(null,OA.a.CONFIGURATION)),s(kO.Z(null)),VT(),Object(Yh.b)()&&n)return window.location.href=n;var r=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(CB({},o.params,{activityId:t}));i.push(r)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_B(o,r,a,i,c,"next",e)}function c(e){_B(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={rubrics:null,showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PB(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.classId;kM.getRubrics(+t).then((function(t){e.setState({rubrics:t})})),OM.a.getNavigationItems(+t)}},{key:"render",value:function(){return o.a.createElement(SB,{rubrics:this.state.rubrics,serverErrors:this.state.serverErrors,showClientErrors:this.state.showClientErrors,onSubmit:this.onSubmit})}}])&&TB(n.prototype,r),a&&TB(n,a),t}(a.Component),kB=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(jB));function NB(e){return(NB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){GB(e,t,n[t])}))}return e}function LB(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function MB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xB(e){return(xB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FB(e,t){return(FB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UB=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=xB(t).call(this,e),n=!a||"object"!==NB(a)&&"function"!==typeof a?VB(r):a,GB(VB(VB(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FT(),t.isValid){e.next=5;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 5:return r=n.props,a=r.match.params.classId,o=r.match,i=r.history,c=r.navigation,s=r.dispatch,e.next=8,sn.a.createIndividualProject(+a,t.form).then((function(e){var t=e.dbId,n=Object(dB.a)(c,VO.a.D2L_QUICK_LINK_ACTIVITY_LIST);if(jT.a(),s(yI.f(null)),s(kO.ab(null,OA.a.CONFIGURATION)),s(kO.Z(null)),VT(),Object(Yh.b)()&&n)return window.location.href=n;var r=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(DB({},o.params,{activityId:t}));i.push(r)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){LB(o,r,a,i,c,"next",e)}function c(e){LB(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={rubrics:null,showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FB(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.classId;kM.getRubrics(+t).then((function(t){e.setState({rubrics:t})})),OM.a.getNavigationItems(+t)}},{key:"render",value:function(){var e=this.props.i18n,t=this.state,n=t.rubrics,r=t.showClientErrors,a=t.serverErrors;return o.a.createElement(z.a,{title:e._("Create Individual Activity")},o.a.createElement(iA,{context:VO.a.CONFIGURATION_NEW}),o.a.createElement(un.a,null,o.a.createElement(kN,{rubrics:n,showClientErrors:r,serverErrors:a,onSubmit:this.onSubmit})))}}])&&MB(n.prototype,r),a&&MB(n,a),t}(o.a.PureComponent);UB.propTypes={navigation:M.a.array,dispatch:M.a.func.isRequired,match:M.a.object.isRequired,history:M.a.object.isRequired,i18n:M.a.object.isRequired};var qB=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(Object(x.withI18n)()(UB)));var WB=Object(x.withI18n)()((function(e){var t=e.i18n,n=e.onSubmit,r=e.rubrics,a=e.showClientErrors,i=e.serverErrors;return o.a.createElement(z.a,{title:t._("Create Interactive Video Assignment")},o.a.createElement(iA,{context:VO.a.CONFIGURATION_NEW}),o.a.createElement(un.a,null,o.a.createElement(sL,{rubrics:r,showClientErrors:a,serverErrors:i,onSubmit:n})))}));function BB(e){return(BB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$B(e,t,n[t])}))}return e}function YB(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function HB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zB(e){return(zB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KB(e,t){return(KB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZB=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=zB(t).call(this,e),n=!a||"object"!==BB(a)&&"function"!==typeof a?XB(r):a,$B(XB(XB(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FT(),t.isValid){e.next=5;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 5:return r=n.props,a=r.match.params.classId,o=r.navigation,i=r.dispatch,c=r.match,s=r.history,e.next=8,sn.a.createInteractiveVideoProject(+a,t.form).then((function(e){var t=e.dbId,n=Object(dB.a)(o,VO.a.D2L_QUICK_LINK_ACTIVITY_LIST);if(jT.a(),i(yI.g(null)),i(kO.ab(null,OA.a.CONFIGURATION)),i(kO.Z(null)),VT(),Object(Yh.b)()&&n)return window.location.href=n;var r=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(QB({},c.params,{activityId:t}));s.push(r)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){YB(o,r,a,i,c,"next",e)}function c(e){YB(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={rubrics:null,showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KB(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.classId;kM.getRubrics(+t).then((function(t){e.setState({rubrics:t})})),OM.a.getNavigationItems(+t)}},{key:"render",value:function(){return gr.a.isInteractiveVideoAssignmentEnabled()?o.a.createElement(WB,{rubrics:this.state.rubrics,serverErrors:this.state.serverErrors,showClientErrors:this.state.showClientErrors,onSubmit:this.onSubmit}):o.a.createElement(Ve,null)}}])&&HB(n.prototype,r),a&&HB(n,a),t}(a.Component),JB=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(ZB));function eQ(e){return(eQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nQ(e,t){return!t||"object"!==eQ(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rQ(e){return(rQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aQ(e,t){return(aQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nQ(this,rQ(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aQ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.rubrics,n=e.onSubmit,r=e.showClientErrors,a=e.serverErrors,i=e.i18n;return o.a.createElement(z.a,{title:i._("Create Question & Answer Assignment")},o.a.createElement(iO.a,null),o.a.createElement(iA,{context:VO.a.CONFIGURATION_NEW}),o.a.createElement(un.a,null,o.a.createElement(oM,{rubrics:t,showClientErrors:r,serverErrors:a,onSubmit:n})))}}])&&tQ(n.prototype,r),a&&tQ(n,a),t}(a.Component),iQ=Object(x.withI18n)()(oQ);function cQ(e){return(cQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mQ(e,t,n[t])}))}return e}function uQ(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function lQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dQ(e){return(dQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fQ(e,t){return(fQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bQ=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=dQ(t).call(this,e),n=!a||"object"!==cQ(a)&&"function"!==typeof a?pQ(r):a,mQ(pQ(pQ(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match.params.classId,o=r.match,i=r.history,c=r.navigation,s=r.dispatch,FT(),t.isValid){e.next=6;break}return GT(),n.setState({showClientErrors:!0}),e.abrupt("return");case 6:return e.next=8,sn.a.createQaProject(+a,t.form).then((function(e){var t=e.dbId,n=Object(dB.a)(c,VO.a.D2L_QUICK_LINK_ACTIVITY_LIST);if(jT.a(),s(yI.h(null)),s(kO.ab(null,OA.a.CONFIGURATION)),s(kO.Z(null)),VT(),Object(Yh.b)()&&n)return window.location.href=n;var r=V.a.compile(gr.a.getNavigationPathAfterConfiguration())(sQ({},o.params,{activityId:t}));i.push(r)})).catch((function(e){GT(),e.length?n.setState({serverErrors:Ll(e)}):n.setState({serverErrors:[]})}));case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){uQ(o,r,a,i,c,"next",e)}function c(e){uQ(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={rubrics:null,showClientErrors:!1,serverErrors:null},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fQ(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.classId;kM.getRubrics(+t).then((function(t){e.setState({rubrics:t})})),OM.a.getNavigationItems(+t)}},{key:"render",value:function(){return o.a.createElement(iQ,{rubrics:this.state.rubrics,serverErrors:this.state.serverErrors,showClientErrors:this.state.showClientErrors,onSubmit:this.onSubmit})}}])&&lQ(n.prototype,r),a&&lQ(n,a),t}(a.Component),yQ=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e)}}))(bQ)),vQ=n("T1zh"),hQ=n("Qyje"),gQ=n.n(hQ);n("5F5Z");function EQ(e){return(EQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SQ(e,t){return!t||"object"!==EQ(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OQ(e){return(OQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CQ(e,t){return(CQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _Q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),SQ(this,OQ(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CQ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=gQ.a.parse(window.location.search.replace(/^\?/,""));return o.a.createElement("div",{className:"c-standalone-double-player"},o.a.createElement(vQ.a,{playerId:"Standalone double player",webcamSrc:e.mainStreamSrc,deskshareSrc:e.secondStreamSrc}))}}])&&wQ(n.prototype,r),a&&wQ(n,a),t}(a.Component),TQ=Object(s.a)(_Q);n("34Bc");function IQ(e){return(IQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RQ(e){return(RQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AQ(e,t){return(AQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NQ=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=RQ(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==IQ(a)&&"function"!==typeof a?jQ(r):a,kQ(jQ(jQ(n)),"onBackClick",(function(){var e=n.props,t=e.match,r=e.history,a=V.a.compile(xee.EDUCATOR_ACTIVITY_LIST)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kQ(e,t,n[t])}))}return e}({},t.params));r.push(a)})),kQ(jQ(jQ(n)),"getGradebookLabel",(function(){var e=n.props.i18n;return Object(UO.a)()?e._("Scorebook"):e._("Gradebook")})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AQ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activityId,n=e.activityData,r=e.activityName,a=e.activityType,i=e.classId,c=e.message;return o.a.createElement($t.a,{title:this.getGradebookLabel()},o.a.createElement(iA,{activityId:t,activityData:n,activityName:r,activityType:a,classId:i,context:VO.a.GRADEBOOK}),o.a.createElement(yr.a,{title:"",icon:Je.a.INFO_OUTLINE,className:"gradebook-error-card"},o.a.createElement(K.c,null,o.a.createElement("div",{className:"gradebook-error"},c))))}}])&&PQ(n.prototype,r),a&&PQ(n,a),t}(a.Component);NQ.propTypes={activityData:M.a.object.isRequired,activityId:M.a.number,activityName:M.a.string,activityType:M.a.string.isRequired,classId:M.a.number,message:M.a.any.isRequired};var DQ=Object(x.withI18n)()(Object(s.a)(NQ)),LQ=(n("dJJi"),n("1mi+"));function MQ(e){return(MQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FQ(e,t){return!t||"object"!==MQ(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VQ(e){return(VQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GQ(e,t){return(GQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UQ="c-grade-table__default-cell",qQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),FQ(this,VQ(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GQ(e,t)}(t,e),n=t,(r=[{key:"getGradeLabel",value:function(){var e=this.props.i18n;return Object(UO.a)()?e._("Score"):e._("Grade")}},{key:"getColumns",value:function(){var e=this,t=this.props,n=t.gradeType,r=t.isRubricReviewEnabled,a=t.isFiveStarEnabled,i=t.i18n,c=t.onProgressLinkClick,s=t.onGradeLinkClick,u=t.useOverallGradeValue,l=n===nc.a.RUBRIC,d=n===nc.a.FIVESTAR,f=n===nc.a.GRADE,p=n===nc.a.PASS_FAIL,m=n===nc.a.COMPLETION,b=o.a.createElement("p",{className:"c-grade-table__is-draft"},i._("(draft)")),y=[{label:i._("Name"),sortable:!0,accessor:sU.fields,allowProgressiveSort:!0,renderer:function(e){var t=e.user;return o.a.createElement(Ht.a,{showValue:!0,value:t.firstName+" "+t.lastName})}}];return r&&y.push({label:i._("Peer review"),className:UQ,renderer:function(t,n){var r=t.user,a=(t.rubricEvaluations||[]).filter((function(e){return ar.d(r,e.user)}));if(0===a.length)return o.a.createElement(WQ,null);var i=t.peerReview?t.peerReview.rubricGrade:null;return o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Bn.c,{points:i,max:a[0].rubric.maxValue}),o.a.createElement(Ue.a,{id:"button-gradebook-manage-groups["+n+"]",primary:!0,enabled:a.length>0,onClick:function(){return e.showRubricReport(a)}},"(",a.length,")"))}}),a&&y.push({label:i._("Peer review"),className:UQ,sortable:!0,accessor:"peerReview.fiveStarValue",renderer:function(e){var t=e.peerReview||{},n=t.fiveStarValue,r=t.fiveStarRatesAmount;return n?o.a.createElement("div",{className:"c-grade-table__peer-review-fivestar"},o.a.createElement(LQ.a,{enabled:!1,name:"peer-review-rate",value:n}),o.a.createElement("span",{className:"c-grade-table__peer-review-fivestar-count"},"(",r,")")):o.a.createElement(WQ,null)}}),u?y.push({label:this.getGradeLabel(),className:UQ,sortable:!0,accessor:"grade.overallValue",renderer:function(e){var t=e.grade,n=!1,r=null,a=!1;if(t){n=t.isDraft,r=t.overallValue;var c=g.a.find(t.gradeParts,{type:rc.a.ACTIVITY_RESULT});c&&g.a.isNumber(c.partValue)&&(a=!0)}return a&&g.a.isNumber(r)?o.a.createElement("div",null,o.a.createElement("span",null,i._("{value}%",{value:r})),n&&b):o.a.createElement(WQ,null)}}):(l&&y.push({label:this.getGradeLabel(),className:UQ,renderer:function(t,n){var r=t.rubricEvaluations,a=t.grade&&t.grade.isDraft;if(0===(r=(r=r||[]).filter((function(e){return ar.b(e.user)}))).length)return o.a.createElement(WQ,null);var i=r.map((function(e){return e.points}));return i=i.reduce((function(e,t){return e+t}),0)/i.length,o.a.createElement("div",null,o.a.createElement("div",{className:"rating-column-renderer"},o.a.createElement(Bn.c,{points:i,max:r[0].rubric.maxValue}),o.a.createElement(Ue.a,{id:"button-gradebook-manage-groups["+n+"]",primary:!0,enabled:r.length>0,onClick:function(){return e.showRubricReport(r)}},"(",r.length,")")),a&&b)}}),d&&y.push({label:this.getGradeLabel(),className:UQ,sortable:!0,accessor:"grade.fiveStarValue",renderer:function(e){var t=e.grade&&e.grade.isDraft,n=e.grade&&e.grade.fiveStarValue?e.grade.fiveStarValue:void 0;return n?o.a.createElement("div",null,o.a.createElement(LQ.a,{enabled:!1,name:"grade-rate",value:n}),t&&b):o.a.createElement(WQ,null)}}),f&&y.push({label:this.getGradeLabel(),className:UQ,sortable:!0,accessor:"grade.gradeValue",renderer:function(e){var t=e.grade&&e.grade.isDraft,n=e.grade&&g.a.isNumber(e.grade.gradeValue)?e.grade.gradeValue:void 0;return g.a.isNumber(n)?o.a.createElement("div",null,o.a.createElement("span",null,n,"%"),t&&b):o.a.createElement(WQ,null)}}),p&&y.push({label:this.getGradeLabel(),className:UQ,sortable:!0,accessor:"grade.passFail",renderer:function(e){var t=e.grade&&e.grade.isDraft,n=e.grade&&g.a.isBoolean(e.grade.passFail)?e.grade.passFail:void 0;return g.a.isBoolean(n)&&(n=n?i._("Pass"):i._("Fail")),n?o.a.createElement("div",null,o.a.createElement("span",null,n),t&&b):o.a.createElement(WQ,null)}}),m&&y.push({label:this.getGradeLabel(),className:UQ,sortable:!0,accessor:"grade.completion",renderer:function(e){var t=e.grade&&e.grade.isDraft,n=e.grade&&g.a.isBoolean(e.grade.completion)?e.grade.completion:void 0;return g.a.isBoolean(n)&&(n=n?i._("Pass"):i._("Fail")),n?o.a.createElement("div",null,o.a.createElement("span",null,n),t&&b):o.a.createElement(WQ,null)}})),y.push({label:i._("Actions"),className:UQ,sortable:!0,accessor:"hasSubmission",renderer:function(e){var t=e.hasSubmission,n=e.user;return o.a.createElement("div",null,t&&o.a.createElement(da.a,{className:"c-grade-table__fake-button",onClick:function(){s(n)}},o.a.createElement("a",null,Object(UO.a)()?o.a.createElement(x.Trans,{id:"Score student submission"}):o.a.createElement(x.Trans,{id:"Grade student submission"}))),!t&&o.a.createElement(da.a,{className:"c-grade-table__fake-button",onClick:function(){c(n)}},o.a.createElement("a",null,o.a.createElement(x.Trans,{id:"View progress"}))))}}),y}},{key:"showRubricReport",value:function(e){var t=this.props.i18n;Hn.a.showModal(o.a.createElement(zn.a,{title:t._("Educator evaluations"),rubricEvaluations:e}))}},{key:"render",value:function(){var e=this.props,t=e.defaultSort,n=e.grades,r=e.i18n,a=t||sU;return o.a.createElement("div",null,o.a.createElement(Zt.b,{className:"c-grade-table",columns:this.getColumns(),listAccessor:"dbId",hasMobileListView:!1,data:n,onListRowSelect:this.onListRowSelect,tableSummary:r._("Inside a table, a list of submitted assignments, ready to be graded"),defaultSort:{accessor:a.fields,direction:a.directions[0]},fallbackSort:{accessor:"user.dbId",direction:"asc"},onSortChange:this.props.onSortChange}))}}])&&xQ(n.prototype,r),a&&xQ(n,a),t}(a.Component),WQ=function(){return o.a.createElement("span",null,"\u2014")};qQ.propTypes={grades:M.a.arrayOf(M.a.shape({user:M.a.shape({dbId:M.a.any,firstName:M.a.string,lastName:M.a.string}).isRequired,grade:M.a.any,rubricEvaluations:M.a.any,hasSubmission:M.a.bool})).isRequired,gradeType:M.a.oneOf([nc.a.RUBRIC,nc.a.GRADE,nc.a.COMPLETION,nc.a.FIVESTAR,nc.a.PASS_FAIL]).isRequired,activityId:M.a.number,activityType:M.a.string,isRubricReviewEnabled:M.a.bool,isFiveStarEnabled:M.a.bool,onGradeLinkClick:M.a.func,onProgressLinkClick:M.a.func,useOverallGradeValue:M.a.bool,defaultSort:M.a.any};var BQ=Object(x.withI18n)()(qQ);function QQ(e){return(QQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HQ(e){return(HQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zQ(e,t){return(zQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $Q="c-gradebook-page__group-name",ZQ=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=HQ(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==QQ(a)&&"function"!==typeof a?KQ(r):a,XQ(KQ(KQ(n)),"getMenuActions",(function(){var e=n.props,t=e.i18n,r=e.gradeReportUrl,a=e.commentsReportUrl,i=e.finalizeAllDrafts,c=n.doWeHaveDrafts();return g.a.compact([c&&o.a.createElement(ol.a,{key:"finalize-all-drafts",primaryText:t._("Finalize all drafts"),enabled:!0,onClick:i,leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Finalize all drafts, icon")},Je.a.DONE_ALL)}),o.a.createElement(ol.a,{key:"download-grade-report",primaryText:t._("Download grade report"),enabled:!!r,onClick:function(){window.open(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Download grade report, icon")},Je.a.FILE_DOWNLOAD)}),o.a.createElement(ol.a,{key:"download_comments_report",primaryText:t._("Download comments report"),enabled:!!a,onClick:function(){window.open(a)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Download comments report, icon")},Je.a.FILE_DOWNLOAD)})])})),XQ(KQ(KQ(n)),"getDataTable",(function(){var e=n.props,t=e.gradeType,r=e.isRubricReviewEnabled,a=e.isFiveStarEnabled,i=e.activityId,c=e.i18n,s=e.groups,u=e.activityData,l=e.activityType,d=e.onGradeLinkClick,f=e.onProgressLinkClick,p=e.useOverallGradeValue,m=e.onSortChange,b=e.tableSort,y=!1;if(l===pc.b.INTERACTIVE_VIDEO){for(var v=!1,h=!1,g=0;u.interactiveQuestions&&g<u.interactiveQuestions.length;g++){var E=u.interactiveQuestions[g];E&&E.__typename&&(E.__typename===BE.o?h=!0:E.__typename===BE.n&&(v=!0))}y=v&&h}return s&&s.length>0?s.map((function(e){return o.a.createElement("div",{key:e.dbId,className:"group-container"},e.name&&o.a.createElement("h3",{className:$Q},c._('Group: "{0}"',{0:e.name})),o.a.createElement(BQ,{grades:e.grades,onGradeLinkClick:d,onProgressLinkClick:f,onSortChange:m,gradeType:t,activityId:i,activityType:l,useOverallGradeValue:p||y,isRubricReviewEnabled:r,isFiveStarEnabled:a,defaultSort:b}))})):o.a.createElement("div",{className:"no-search-results-container"},o.a.createElement("h4",null,c._("No students found")))})),XQ(KQ(KQ(n)),"getSearchInput",(function(){var e=n.props,t=e.i18n,r=e.searchValue,a=e.onSearchChange,i=o.a.createElement(Uf.a,{ariaLabel:t._("Search students, icon")},Je.a.SEARCH);return o.a.createElement(Xt.a,{zDepth:1,className:"gradebook-search-container"},o.a.createElement(ut.i,{id:"gradebook-search-input",className:"gradebook-search-input",inlineIndicator:n.getSearchInputClearButton(),leftIcon:i,onChange:a,placeholder:t._("Search students..."),value:r}))})),XQ(KQ(KQ(n)),"getSearchInputClearButton",(function(){var e=n.props,t=e.i18n,r=e.onSearchClear,a=e.searchValue;return g.a.trim(a)?o.a.createElement(Ue.c,{id:"button-gradebook-search-clear",ariaLabel:t._("Clear input, icon"),className:"gradebook-search-input-clear-button",onClick:r},Je.a.CLOSE):null})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zQ(e,t)}(t,e),n=t,(r=[{key:"doWeHaveDrafts",value:function(){var e=this.props.activityData,t=!1;return e&&e.dataForAllStudents&&e.dataForAllStudents.forEach((function(e){var n=e.educatorGrade;n&&n.isDraft&&(n.myRubricEvaluation?n.myRubricEvaluation.cells.length===n.myRubricEvaluation.rubric.rows.length-1&&(t=!0):t=!0)})),t}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.hasError,r=e.reloadData,a=e.activityData,i=e.activityName,c=e.activityId,s=e.i18n,u=e.termClass,l=e.activityType,d=e.studentGroups,f=l===pc.b.GROUP_PRESENTATION,p=(!d||0===d.length)&&f;return t?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(z.a,{title:i,className:"c-gradebook-page"},!a&&o.a.createElement(un.a,null,n&&o.a.createElement("div",null,o.a.createElement("span",{className:"u-mr-5px"},s._("Failed to load assignment data")),o.a.createElement(Ue.f,{id:"button-assignment-error-reload",onClick:r},s._("Try again")))),a&&o.a.createElement(iA,{activityData:a,activityName:i,activityType:l,context:VO.a.GRADEBOOK,classId:u.dbId,menuActions:this.getMenuActions()}),a&&!p&&o.a.createElement(un.a,{className:"c-gradebook-page__group-card"},o.a.createElement("div",{className:"gradebook-card-top-container"},this.getSearchInput()),this.getDataTable()),p&&o.a.createElement(yr.a,{className:"gradebook-card groups-not-formed",icon:Je.a.INFO_OUTLINE},o.a.createElement("div",{className:"info-dashboard-card-contents"},o.a.createElement("div",{className:"info-message"},o.a.createElement("span",null,s._("The gradebook will be available once groups have been created."))),o.a.createElement(Ue.a,{id:"button-gradebook-manage-groups",primary:!0,iconEl:o.a.createElement(Uf.a,{ariaLabel:s._("Manage groups, icon")},Je.a.GROUP),onClick:function(){var e="".concat(window.location.origin,"/educator/activity/").concat(c,"/student-groups/");window.location.href=e}},s._("Manage groups")))))}}])&&YQ(n.prototype,r),a&&YQ(n,a),t}(a.Component),JQ=Object(x.withI18n)()(ZQ),eY=n("svEP");function tY(){var e=iY(["\n    mutation finalizeAllGradeDrafts($input: FinalizeAllDraftsInput!) {\n        finalizeAllGradeDrafts(input: $input) {\n            activity {\n                dbId\n            }\n        }\n    }\n"]);return tY=function(){return e},e}function nY(){var e=iY(["\n    query getGradebookData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            name\n            dbId\n            gradeType\n            autoGradeScoreSource\n            peerReviewType\n            peerReviewGradeEnabled\n            rubricPeerAllowed\n            studentFivestarValuationEnabled\n            gradeReportUrl\n            commentsReportUrl\n            type\n            executorsType\n            studentGroups {\n                dbId\n            }\n            termClass {\n                dbId\n            }\n            dataForAllStudents {\n                result {\n                    submittedAt\n                }\n                student {\n                    dbId\n                    firstName\n                    lastName\n                    roles\n                }\n                peerReview {\n                    fiveStarValue\n                    fiveStarRatesAmount\n                    rubricGrade\n                }\n                studentGroup {\n                    dbId\n                    name\n                }\n                rubricEvaluations {\n                    ...RubricEvaluation\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n            }\n        }\n    }\n    ","\n    ","\n"]);return nY=function(){return e},e}function rY(){var e=iY(["\n    query getGradebookData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            name\n            dbId\n            gradeType\n            autoGradeScoreSource\n            peerReviewType\n            peerReviewGradeEnabled\n            rubricPeerAllowed\n            studentFivestarValuationEnabled\n            gradeReportUrl\n            commentsReportUrl\n            type\n            termClass {\n                dbId\n            }\n            interactiveQuestions {\n                __typename\n            }\n            dataForAllStudents {\n                result {\n                    submittedAt\n                }\n                student {\n                    dbId\n                    firstName\n                    lastName\n                    roles\n                }\n                peerReview {\n                    fiveStarValue\n                    fiveStarRatesAmount\n                    rubricGrade\n                }\n                studentGroup {\n                    dbId\n                    name\n                }\n                rubricEvaluations {\n                    ...RubricEvaluation\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n            }\n        }\n    }\n    ","\n    ","\n"]);return rY=function(){return e},e}function aY(){var e=iY(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            submitDueAt\n            type\n            allowGroupsForming\n            deletable\n            groupsFormedAt\n            groupsFormationFinalizeAt\n            executorsType\n            termClass {\n                dbId\n            }\n        }\n    }\n"]);return aY=function(){return e},e}function oY(){var e=iY(["\n    query getActivityType($activityId: Int!) {\n        activity(dbId: $activityId) {\n            type\n        }\n    }\n"]);return oY=function(){return e},e}function iY(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function cY(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function sY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var uY=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getBasicActivityData",value:function(e){return Lt.a.query({query:dY,variables:{activityId:e}}).then((function(e){var t=e.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.activity)}))}},{key:"getActivityType",value:function(e){return Lt.a.query({query:lY,variables:{activityId:e}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.activity.type;return Promise.resolve(n)}))}},{key:"getGradebookData",value:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActivityType(t);case 2:return n=e.sent,r=fY,n===pc.b.GROUP_PRESENTATION&&(r=pY),e.abrupt("return",Lt.a.query({query:r,variables:{activityId:t}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.activity;return n?(Ft.a.dispatch(kO.ab(e.data.activity,OA.a.GRADEBOOK)),Promise.resolve(n)):Promise.reject(["Activity data is null"])})));case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cY(o,r,a,i,c,"next",e)}function c(e){cY(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:"finalizeAllDrafts",value:function(e){return Lt.a.mutate({mutation:mY,variables:{input:{activityDbId:e}}}).then((function(e){return Promise.resolve(e.data.finalizeAllGradeDrafts.activity.dbId)}))}}])&&sY(t.prototype,n),r&&sY(t,r),e}()),lY=xt()(oY()),dY=xt()(aY()),fY=xt()(rY(),CM.c,eY.a),pY=xt()(nY(),CM.c,eY.a),mY=xt()(tY());function bY(e){return(bY="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yY(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){CY(e,t,n[t])}))}return e}function hY(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function gY(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){hY(o,r,a,i,c,"next",e)}function c(e){hY(o,r,a,i,c,"throw",e)}i(void 0)}))}}function EY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wY(e){return(wY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SY(e,t){return(SY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OY(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _Y=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=wY(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==bY(a)&&"function"!==typeof a?OY(r):a,CY(OY(OY(n)),"state",{activityName:null,activityType:null,isLoading:!0,hasError:!1,showGroupsFormingMessage:!1,groupsFinalizedAt:null,termClassId:null,searchValue:null,sortConfig:null}),CY(OY(OY(n)),"getData",gY(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.activityId,n.setHasError(!1),n.setIsLoading(!0),e.prev=3,e.next=6,uY.getGradebookData(+t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),n.setHasError(!0);case 11:return e.prev=11,n.setIsLoading(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[3,8,11,14]])})))),CY(OY(OY(n)),"finalizeAllDrafts",gY(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.match.params.activityId,a=t.i18n,e.prev=1,e.next=4,uY.finalizeAllDrafts(+r);case 4:yc.a.addSuccess(a._("All drafts have been finalized")),n.getData().catch(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),yc.a.addSuccess(a._("Failed to finalize drafts")),H.b.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})))),CY(OY(OY(n)),"hasStudents",(function(){var e=n.props.activityDataFromContext;return Boolean(e&&e.dataForAllStudents&&e.dataForAllStudents.length>0)})),CY(OY(OY(n)),"onProgressLinkClick",(function(e){var t=n.props,r=t.history,a=t.match,o=V.a.compile(xee.EDUCATOR_ACTIVITY_STUDENT_PROGRESS)(vY({},a.params,{studentId:e.dbId}));r.push(o)})),CY(OY(OY(n)),"onGradeLinkClick",(function(e){var t=n.props,r=t.history,a=t.match,o=t.dispatch,i=V.a.compile(xee.EDUCATOR_ACTIVITY_GRADING)(vY({},a.params,{studentId:e.dbId}));o(kO.X()),setTimeout((function(){r.push(i)}),0)})),CY(OY(OY(n)),"getGroupsNotReadyMessage",(function(){var e=n.props,t=e.i18n,r=e.locale,a=n.state.groupsFinalizedAt,i=Object(Er.e)(new Date(1e3*a),dt.a.SHORT,Object(sy.d)(r)),c=Object(UO.a)()?t._("Scorebook will be available once groups are finalized."):t._("Gradebook will be available once groups are finalized.");return o.a.createElement("div",{className:"gradebook-not-ready"},o.a.createElement("span",null,c),o.a.createElement("span",null,t._("Groups will be finalized at: {formattedDate}.",{formattedDate:i})))})),CY(OY(OY(n)),"getNoStudentsInClassMessage",(function(){var e=n.props.i18n;return o.a.createElement("div",{className:"gradebook-not-ready"},o.a.createElement("span",null,e._("You will see a list of students here once they have accessed a video assignment.")))})),CY(OY(OY(n)),"educatorGroupFormationIsRequired",(function(){var e=n.props.activityDataFromContext;if(!e)return!1;var t=e.type===pc.b.GROUP_PRESENTATION,r=e.studentGroups&&e.studentGroups.length>0,a=e.executorsType===vn.a.EDUCATOR_FORMED;return t&&a&&!r})),CY(OY(OY(n)),"renderInfoMessage",(function(e){var t=n.state,r=t.activityName,a=t.activityType,i=t.termClassId,c=n.props,s=c.match.params.activityId,u=c.activityDataFromContext;return o.a.createElement("div",null,o.a.createElement(iO.a,{classId:i}),o.a.createElement(DQ,{activityData:u,activityName:r,activityId:+s,activityType:a,classId:i,message:e}))})),CY(OY(OY(n)),"onSearchClear",(function(){n.setState({searchValue:null})})),CY(OY(OY(n)),"onSearchChange",(function(e){var t=n.props.dispatch;n.setState({searchValue:e});var r=hy(Ft.a.getState());t(kO.gb(vY({},r,{searchValue:e})))})),CY(OY(OY(n)),"onSortChange",(function(e,t,r){var a=n.props,o=a.activityDataFromContext,i=a.dispatch,c=g.a.map(e,(function(e){return vY({},g.a.omit(e,["user"]),{student:e.user})})),s=vY({},hy(Ft.a.getState()));o.type===pc.b.GROUP_PRESENTATION?s=vY({},g.a.omit(s,["sortConfig"]),{searchValue:n.state.searchValue}):(s.activityId=o.dbId,s.sortConfig={fields:t,directions:r},s.searchValue=n.state.searchValue,s.students=c),i(kO.gb(s))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SY(e,t)}(t,e),n=t,(r=[{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.match.params.activityId,n=hy(Ft.a.getState());uY.getBasicActivityData(+t).then((function(t){var r=t.type===pc.b.GROUP_PRESENTATION,a=t.groupsFormedAt,o=t.executorsType===vn.a.EDUCATOR_FORMED;e.getData(),e.setState({activityName:t.name,activityType:t.type,termClassId:t.termClass.dbId}),!r||o||a||e.setState({showGroupsFormingMessage:!0,groupsFinalizedAt:t.groupsFormationFinalizeAt}),g.a.get(n,"activityId",-1)===+t.dbId&&(n.sortConfig&&e.setState({sortConfig:{fields:n.sortConfig.fields,directions:n.sortConfig.directions}}),n.searchValue&&e.setState({searchValue:n.searchValue}))}))}},{key:"getGroupsData",value:function(){var e=this.state.searchValue,t=this.props.activityDataFromContext,n={};if(!t&&!t.dataForAllStudents)return[];var r=yY(t.dataForAllStudents),a=e?g.a.trim(e):null;a&&(r=g.a.filter(r,(function(e){var t=e.student.firstName+" "+e.student.lastName;return Boolean(t.toLowerCase().indexOf(a.toLowerCase())>=0)}))),r.forEach((function(e){var t=e.studentGroup;t||(t={dbId:"none"});var r=n[t.dbId];r||(n[t.dbId]={},(r=n[t.dbId]).dbId=t.dbId,r.name=t.name),r.grades||(r.grades=[]);var a={};a.user=e.student,a.grade=e.educatorGrade,e.rubricEvaluations&&(a.rubricEvaluations=e.rubricEvaluations),e.peerReview&&(a.peerReview=e.peerReview),a.hasSubmission=!!e.result,r.grades.push(a)})),g.a.values(n).length>1&&n.none&&delete n.none;var o=g.a.values(n);return t.type===pc.b.GROUP_PRESENTATION&&(o=Object(lU.b)(o,["name"],["asc"])),o}},{key:"isDraftsExists",value:function(){var e=this.props.activityDataFromContext;if(!e.dataForAllStudents)return!1;var t=!1;return e.dataForAllStudents.forEach((function(e){e.educatorGrade&&e.educatorGrade.isDraft&&(t=!0)})),t}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.hasError,r=e.showGroupsFormingMessage,a=e.searchValue,i=e.sortConfig,c=this.props,s=c.match.params.activityId,u=c.activityDataFromContext,l=c.i18n;if(t)return o.a.createElement(At.b,{loading:t});if(!this.hasStudents())return this.renderInfoMessage(this.getNoStudentsInClassMessage());if(r)return this.renderInfoMessage(this.getGroupsNotReadyMessage());if(this.educatorGroupFormationIsRequired())return this.renderInfoMessage(o.a.createElement("div",{className:"gradebook-not-ready"},o.a.createElement("span",null,l._("Groups have not been setup yet. Groups can be setup by selecting the menu above. Advanced group configuration options are available on the Configure screen"))));var d=Boolean(u.peerReviewType)&&Boolean(u[fy.b.SETTINGS_ENABLED]);return o.a.createElement("div",null,o.a.createElement(iO.a,{classId:u.termClass.dbId}),o.a.createElement(JQ,{isLoading:t,groups:this.getGroupsData(),reloadData:this.getData,onProgressLinkClick:this.onProgressLinkClick,onGradeLinkClick:this.onGradeLinkClick,onSortChange:this.onSortChange,hasError:n,hasDrafts:this.isDraftsExists(),finalizeAllDrafts:this.finalizeAllDrafts,gradeReportUrl:u.gradeReportUrl,commentsReportUrl:u.commentsReportUrl,useOverallGradeValue:d,isRubricReviewEnabled:u.isRubricReviewEnabled,isFiveStarEnabled:u.studentFivestarValuationEnabled,gradeType:u.gradeType,activityId:+s,termClass:u.termClass,studentGroups:u.dataForAllStudents,activityData:u,activityType:u.type,activityName:u.name,searchValue:a,onSearchChange:this.onSearchChange,onSearchClear:this.onSearchClear,tableSort:i}))}}])&&EY(n.prototype,r),a&&EY(n,a),t}(a.Component),TY=Object(x.withI18n)()(Object(c.b)((function(e){return{activityDataFromContext:hv(e)[OA.a.GRADEBOOK],locale:cy.a(e)}}))(_Y)),IY=n("RWpT");n("8L3I");function PY(e){return(PY="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AY(e,t){return!t||"object"!==PY(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jY(e){return(jY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kY(e,t){return(kY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var NY=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),AY(this,jY(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kY(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onCancel,r=e.onSave,a=e.onChange,i=e.isProcessing,c=e.title,s=e.errors,u=[o.a.createElement(Ue.a,{id:"button-library-edit-dialog-cancel",secondary:!0,enabled:!i,onClick:n,ariaLabel:t._("Cancel")},t._("Cancel")),o.a.createElement(Ue.a,{id:"button-library-edit-dialog-save",primary:!0,isLoading:i,enabled:!i&&c.trim().length>0,onClick:r,ariaLabel:t._("Save")},t._("Save"))];return o.a.createElement(pi.a,{actions:u,dialogClassName:"c-library-edit-modal",mobileFullScreen:!0,id:"library-edit-modal",title:t._("Edit"),modal:!0,visible:!0},o.a.createElement(ut.i,{id:"library-title-textfield",label:t._("Title"),onChange:a,value:c,ariaLabel:t._("Title"),errorText:s&&s.length?o.a.createElement("div",null,g.a.map(s,(function(e){return o.a.createElement("div",null,e)}))):""}))}}])&&RY(n.prototype,r),a&&RY(n,a),t}(a.Component);NY.propTypes={onCancel:M.a.func,onSave:M.a.func,onChange:M.a.func,title:M.a.string,isProcessing:M.a.bool};var DY=Object(x.withI18n)()(NY);function LY(e){return(LY="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xY(e){return(xY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FY(e,t){return(FY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VY(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var GY=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=xY(t).call(this,e),n=!a||"object"!==LY(a)&&"function"!==typeof a?VY(r):a,o=VY(VY(n)),c=function(e){K_.editItemTitle(e.dbId,n.state.title).then((function(){Hn.a.closeModal()})).catch((function(e){n.setState({errors:g.a.values(Ml(e))})}))},(i="onEditTitle")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={title:e.media.title,errors:[]},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FY(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.media!==this.props.media&&this.setState({title:e.media.title})}},{key:"render",value:function(){var e=this,t=this.props,n=t.media,r=t.isItemProcessing;return o.a.createElement(DY,{onCancel:Hn.a.closeModal,onSave:function(){e.onEditTitle(n)},onChange:function(t){e.setState({title:t})},title:this.state.title,errors:this.state.errors,isProcessing:r})}}])&&MY(n.prototype,r),a&&MY(n,a),t}(a.Component),UY=Object(c.b)((function(e){return{isItemProcessing:F_(e)}}))(GY);n("6vFL");function qY(e){return(qY="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BY(e,t){return!t||"object"!==qY(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QY(e){return(QY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YY(e,t){return(YY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HY=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),BY(this,QY(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YY(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onCancel,r=e.onDelete,a=e.isProcessing,i=[o.a.createElement(Ue.a,{id:"button-library-delete-dialog-cancel",secondary:!0,enabled:!a,onClick:n,ariaLabel:t._("Cancel")},t._("Cancel")),o.a.createElement(Ue.a,{id:"button-library-delete-dialog-delete",primary:!0,isLoading:a,enabled:!a,onClick:r,ariaLabel:t._("Delete")},t._("Delete"))];return o.a.createElement(pi.a,{actions:i,dialogClassName:"c-library-delete-modal",mobileFullScreen:!0,id:"library-delete-modal",title:t._("Delete"),modal:!0,visible:!0},o.a.createElement("p",null,t._("Are you sure you want to delete the selected media?")))}}])&&WY(n.prototype,r),a&&WY(n,a),t}(a.Component);HY.propTypes={onCancel:M.a.func,onDelete:M.a.func};var zY=Object(x.withI18n)()(HY);function KY(e){return(KY="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $Y(e,t){return!t||"object"!==KY(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZY(e){return(ZY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JY(e,t){return(JY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$Y(this,ZY(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JY(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.media,n=e.isItemProcessing;return o.a.createElement(zY,{onCancel:Hn.a.closeModal,onDelete:function(){K_.deleteItem(t.dbId).then((function(){Hn.a.closeModal()}))},isProcessing:n})}}])&&XY(n.prototype,r),a&&XY(n,a),t}(a.Component),tH=Object(c.b)((function(e){return{isItemProcessing:F_(e)}}))(eH),nH=n("Md0H");function rH(e){return(rH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oH(e){return(oH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iH(e,t){return(iH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uH=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=oH(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==rH(a)&&"function"!==typeof a?cH(r):a,sH(cH(cH(n)),"previewFile",(function(e){var t=e.media;return e.link?window.open(e.link,"_blank"):e.previewUrl?window.open(e.previewUrl,"_blank"):e.previewFunction?e.previewFunction(e):void Hn.a.showModal(o.a.createElement(od.a,{onCancel:Hn.a.closeModal,usageContext:n.props.usageContext,termClassId:n.props.termClassId,activityId:n.props.activityId,media:t}))})),sH(cH(cH(n)),"onDownload",(function(e){(e.meetingDownloadUrl||(e.media?e.media.meetingDownloadUrl:void 0))&&n.props.onMeetingDownload?n.props.onMeetingDownload(e):po.a.downloadPartial(e)})),sH(cH(cH(n)),"onAutoAnalysisClick",(function(e){n.props.onShowAutoAnalysis&&n.props.onShowAutoAnalysis(e)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iH(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.partial,a=t.id,i=t.canEdit,c=t.onEdit,s=t.canDelete,u=t.onDelete,l=t.menuItems,d=t.deleteTooltip,f=this.props.isAutoAnalysisAllowed,p=!1,m=!1,b=!1,y=!1,v=!1,h=!1;po.a.isVideoPartial(r)?(h=!0,r.recordedMedia&&((r=g.a.merge({},r)).media=r.recordedMedia),y=!!r.meetingDownloadUrl,v=!!r.media.meetingDownloadUrl,b=!!r.media.slaveMedia&&!v,m=!!(r.media&&(r.media.downloadUrl||v)||y),p=!(!r.media||!r.media.srcUrl)):(m=!!r.downloadUrl,p=!!(r.previewUrl||r.link||r.previewFunction));var E=(y||v)&&gr.a.isMeetingDownloadAllowed(),w=!y&&!v&&!b;return o.a.createElement("span",null,l,po.a.isLink(r)?o.a.createElement(ol.a,{key:a+"_open_link",data:r,enabled:p,onClick:function(){e.previewFile(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Open link, icon")},Je.a.OPEN_IN_NEW),primaryText:n._("Open Link")}):o.a.createElement(ol.a,{key:a+"_preview",data:r,enabled:p,onClick:function(){e.previewFile(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Preview, icon")},Je.a.PREVIEW),primaryText:n._("Preview")}),b&&!v&&o.a.createElement(ol.a,{key:a+"_download_camera",enabled:!!r.media.downloadUrl,data:r,onClick:function(){return Object(pl.a)(r.media.downloadUrl)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Download, icon")},Je.a.DOWNLOAD),primaryText:n._("Download camera recording")}),b&&!v&&o.a.createElement(ol.a,{key:a+"_download_desktop",enabled:!!r.media.slaveMedia.downloadUrl,data:r,onClick:function(){return Object(pl.a)(r.media.slaveMedia.downloadUrl)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Download, icon")},Je.a.DOWNLOAD),primaryText:n._("Download screen recording")}),(w||E)&&o.a.createElement(ol.a,{key:a+"_download",data:r,enabled:m,onClick:function(){e.onDownload(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Download, icon")},Je.a.DOWNLOAD),primaryText:n._("Download")}),f&&h&&!y&&o.a.createElement(Dw,{id:"auto-analysis",enabled:m,onClick:function(){e.onAutoAnalysisClick(r.media)}}),o.a.createElement(so.a,{key:a+"_divider[0]"}),o.a.createElement(ol.a,{key:a+"_edit",enabled:i,data:r,onClick:function(){c(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Edit, icon")},Je.a.EDIT),primaryText:n._("Edit")}),o.a.createElement(ol.a,{key:a+"_delete",enabled:s,data:r,onClick:function(){u(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:n._("Delete, icon")},Je.a.DELETE),primaryText:n._("Delete"),tooltip:d}))}}])&&aH(n.prototype,r),a&&aH(n,a),t}(a.Component),lH=Object(x.withI18n)()(uH);function dH(e){return(dH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pH(e){return(pH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mH(e,t){return(mH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uH.defaultProps={canEdit:!0,canDelete:!0,deleteTooltip:null,isAutoAnalysisAllowed:!1},uH.propTypes={partial:M.a.object,id:M.a.any,canEdit:M.a.bool,onEdit:M.a.func,canDelete:M.a.bool,onDelete:M.a.func,onMeetingDownload:M.a.func,onShowAutoAnalysis:M.a.func,menuItems:M.a.array,deleteTooltip:M.a.object,usageContext:M.a.oneOf([kd.a.ACTIVITY_COMMENTARY,kd.a.ACTIVITY_OVERVIEW,kd.a.COMMENT,kd.a.DIRECT_LIBRARY,kd.a.FEEDBACK,kd.a.INTERACTIVE_VIDEO,kd.a.PROFILE,kd.a.QA_QUESTION,kd.a.STUDENT_RESULT,kd.a.STUDENT_RESULT_PARTIAL]),termClassId:M.a.number,activityId:M.a.number,isAutoAnalysisAllowed:M.a.bool};var vH=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=pH(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==dH(a)&&"function"!==typeof a?bH(r):a,yH(bH(bH(n)),"onEditClick",(function(e){Hn.a.showModal(o.a.createElement(UY,{media:e}))})),yH(bH(bH(n)),"onDeleteClick",(function(e){Hn.a.showModal(o.a.createElement(tH,{media:e}))})),yH(bH(bH(n)),"onMeetingDownload",(function(e){var t=n.props.i18n,r=e.media;fl.download(t,r.meetingDownloadUrl,r.title)})),yH(bH(bH(n)),"createActionsMenu",(function(e,t){return o.a.createElement(lH,{id:t,usageContext:kd.a.DIRECT_LIBRARY,termClassId:n.props.termClassId,partial:po.a.createVideoPartial(e),onMeetingDownload:n.onMeetingDownload,canDelete:e.deletable,onEdit:function(){return n.onEditClick(e)},onDelete:function(){return n.onDeleteClick(e)}})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mH(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this,t=this.props.i18n;return[{accessor:"title",grow:!0,label:t._("Title"),sortable:!0},{accessor:"createdAt",label:t._("Date added"),sortable:!0,renderer:function(e){return o.a.createElement("div",null,o.a.createElement(IY.a,{value:e[this.accessor]}))}},{accessor:"processingStatus",label:t._("Status"),sortable:!0,renderer:function(e){switch(e[this.accessor]){case ml.a.ERROR:return o.a.createElement(Uf.a,{ariaLabel:t._("Error, icon")},Je.a.VIDEO_WARNING);case ml.a.READY:return o.a.createElement(Uf.a,{ariaLabel:t._("Ready, icon")},Je.a.VIDEO_READY);default:return o.a.createElement(Uf.a,{ariaLabel:t._("Processing, icon")},Je.a.VIDEO_PROCESSING)}}},{label:t._("Actions"),isCustomColumn:!0,renderer:function(t,n){return o.a.createElement(nH.a,{key:n,menuItems:e.createActionsMenu(t,n)})}}]}},{key:"render",value:function(){var e=this.props.list;return o.a.createElement("div",null,o.a.createElement(Zt.c,{id:"educator-library-table",columns:this.getColumns(),hasMobileListView:!1,data:e,listAccessor:"title",defaultSort:{accessor:"createdAt",direction:"desc"},fallbackSort:{accessor:"title",direction:"asc"}}))}}])&&fH(n.prototype,r),a&&fH(n,a),t}(a.Component),hH=Object(x.withI18n)()(vH);function gH(e){var t=e.reloadData,n=e.message,r=e.buttonTitle;return o.a.createElement(un.a,null,o.a.createElement("span",{className:"u-mr-5px"},n),o.a.createElement(Ue.f,{id:"button-error-reload-data",onClick:t},r))}gH.propTypes={reloadData:M.a.func.isRequired,message:M.a.string.isRequired,buttonTitle:M.a.string.isRequired};var EH=gH;function wH(e){return(wH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OH(e,t){return!t||"object"!==wH(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CH(e){return(CH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _H(e,t){return(_H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var TH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),OH(this,CH(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_H(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.list,r=e.isLoading,a=e.onAddVideoClick,i=e.onCombineVideoClick,c=e.hasError,s=e.reloadData,u=e.termClassId,l={label:t._("Add...")};return r?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(z.a,{title:t._("Library")},c&&o.a.createElement(EH,{reloadData:s,message:t._("Failed to load library"),buttonTitle:t._("Try again")}),o.a.createElement(iA,{context:VO.a.LIBRARY}),o.a.createElement(un.a,null,o.a.createElement(hH,{list:n,termClassId:u})),o.a.createElement(Ue.g,{id:"speed-dial-library-list",tooltip:l,ariaLabel:l.label},o.a.createElement(Ue.h,{ariaLabel:t._("Add Video"),icon:Je.a.VIDEOCAM,id:"speed-dial-item-library-add-video",onClick:a,tooltip:{label:t._("Add Video")}}),o.a.createElement(Ue.h,{ariaLabel:t._("Combine Videos"),icon:Je.a.MERGE,id:"speed-dial-item-library-combine-video",onClick:i,tooltip:{label:t._("Combine Videos")}})))}}])&&SH(n.prototype,r),a&&SH(n,a),t}(a.Component),IH=Object(x.withI18n)()(TH);function PH(e){return(PH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AH(e){return(AH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jH(e,t){return(jH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DH=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=AH(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==PH(a)&&"function"!==typeof a?kH(r):a,NH(kH(kH(n)),"state",{hasError:!1}),NH(kH(kH(n)),"getData",(function(){n.setHasError(!1),K_.getLibraryData().catch((function(){n.setHasError(!0)}))})),NH(kH(kH(n)),"onAddVideoClick",(function(){lc.f()?Hn.a.showModal(o.a.createElement(ec,{mediaType:Hi.a.LIBRARY,onCancel:n.onUploadCancel,onComplete:n.onUploadComplete})):Hn.a.showModal(o.a.createElement(AT,{onComplete:n.onAddVideoComplete,selectFromLibrary:!1}))})),NH(kH(kH(n)),"onUploadComplete",(function(e){if(e.dbId)return n.onAddVideoComplete([e]);if("undefined"!==typeof e[0]){var t=[],r=e.map((function(e){return new Promise((function(n){K_.getItem(e).then((function(e){t.push(e),n()}))}))}));Promise.all(r).then((function(){n.onAddVideoComplete(t)}))}})),NH(kH(kH(n)),"onUploadCancel",(function(){Hn.a.closeModal()})),NH(kH(kH(n)),"onAddVideoComplete",(function(e){Hn.a.closeModal(),e.forEach((function(e){K_.addItemToList(e)}))})),NH(kH(kH(n)),"onCombineVideoClick",(function(){Hn.a.showModal(o.a.createElement(Xm,{videos:n.getMediasToCombine(),onCancel:n.cancelCombine,onSubmit:n.submitCombine}))})),NH(kH(kH(n)),"cancelCombine",(function(){Hn.a.closeModal()})),NH(kH(kH(n)),"submitCombine",(function(e){return K_.combineItems(e)})),NH(kH(kH(n)),"getMediasToCombine",(function(){return n.props.list.filter((function(e){return e.processingStatus===ml.a.READY})).map((function(e){return{media:e,title:e.title,dbId:e.dbId}}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jH(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.match.params.classId;OM.a.getNavigationItems(+e),this.getData()}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"render",value:function(){var e=this.props.match.params.classId,t=this.props,n=t.list,r=t.isLoading;return o.a.createElement(IH,{list:n,termClassId:+e,isLoading:r,onAddVideoClick:this.onAddVideoClick,onCombineVideoClick:this.onCombineVideoClick,reloadData:this.getData,hasError:this.state.hasError})}}])&&RH(n.prototype,r),a&&RH(n,a),t}(a.Component),LH=Object(s.a)(Object(c.b)((function(e){return{navigation:SA.a(e),list:x_(e),isLoading:M_(e)}}))(DH)),MH=n("PrLO"),xH=n("g3iL");n("tY0J");function FH(e){return(FH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GH(e,t){return!t||"object"!==FH(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UH(e){return(UH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qH(e,t){return(qH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var WH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),GH(this,UH(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qH(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onLmsCodeChange,r=e.lmsCode,a=e.loading,i=e.onCopy,c=[o.a.createElement(mi.a,{id:"button-copy-assignment-dialog-close",onClick:Hn.a.closeModal},t._("Close")),o.a.createElement(mi.a,{id:"button-copy-assignment-dialog-copy",isLoading:a,primary:!0,onClick:i},t._("Copy"))];return o.a.createElement(pi.a,{id:"c-copy-assignment-dialog",title:"Please provide class NBID",actions:c,visible:!0,dialogClassName:"c-copy-assignment-dialog"},o.a.createElement(Tl.b,{id:"lms-code",value:r,onChange:n,label:"NBID"}))}}])&&VH(n.prototype,r),a&&VH(n,a),t}(a.Component),BH=Object(x.withI18n)()(WH);function QH(){var e=HH(["\n    mutation cengageCopyActivitiesFromAnotherClass($input: CengageCopyActivitiesFromAnotherClassInput!){\n        cengageCopyActivitiesFromAnotherClass(input: $input) {\n            success\n        }\n    }\n"]);return QH=function(){return e},e}function YH(){var e=HH(["\n    mutation cengageSelectClassForActivitiesCopy($input: CengageSelectClassForActivitiesCopyInput!){\n        cengageSelectClassForActivitiesCopy(input:$input) {\n            termClassDbId\n        }\n    }\n"]);return YH=function(){return e},e}function HH(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function zH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var KH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getTermClassId",value:function(e){return Lt.a.mutate({mutation:XH,variables:{input:{termClassLmsCode:e}}}).then((function(e){var t=e.data.cengageSelectClassForActivitiesCopy.termClassDbId;return Promise.resolve(t)}))}},{key:"copyTermClassAssignments",value:function(e,t){return Lt.a.mutate({mutation:$H,variables:{input:{currentClassDbId:e,sourceClassDbId:t}}}).then((function(e){return Promise.resolve(e.data.cengageCopyActivitiesFromAnotherClass.success)}))}}],(n=null)&&zH(t.prototype,n),r&&zH(t,r),e}(),XH=xt()(YH()),$H=xt()(QH());function ZH(e){return(ZH="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JH(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ez(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){JH(o,r,a,i,c,"next",e)}function c(e){JH(o,r,a,i,c,"throw",e)}i(void 0)}))}}function tz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nz(e){return(nz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rz(e,t){return(rz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function az(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iz=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=nz(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==ZH(a)&&"function"!==typeof a?az(r):a,oz(az(az(n)),"state",{lmsCode:""}),oz(az(az(n)),"onLmsCodeChange",(function(e){n.setState({lmsCode:e,loading:!1})})),oz(az(az(n)),"onCopy",ez(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.termClass,a=t.i18n,e.prev=1,n.setState({loading:!0}),e.next=5,KH.getTermClassId(n.state.lmsCode);case 5:return o=e.sent,e.next=8,KH.copyTermClassAssignments(r.dbId,o);case 8:e.sent?yc.a.addSuccess(a._("Assignments was copied successfully")):yc.a.addError(a._("Failed to copy assignments")),n.props.reloadData(),Hn.a.closeModal(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),H.b.error(e.t0),n.setState({loading:!1}),yc.a.addError(a._("Failed to copy assignments"));case 19:case"end":return e.stop()}}),e,this,[[1,14]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rz(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(BH,{lmsCode:this.state.lmsCode,loading:this.state.loading,onCopy:this.onCopy,onLmsCodeChange:this.onLmsCodeChange})}}])&&tz(n.prototype,r),a&&tz(n,a),t}(a.Component),cz=Object(c.b)((function(e){return{termClass:bb.k(e)}}))(Object(x.withI18n)()(iz));function sz(e){return(sz="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lz(e){return(lz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dz(e,t){return(dz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mz=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=lz(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==sz(a)&&"function"!==typeof a?fz(r):a,pz(fz(fz(n)),"getColumns",(function(){var e=n.props,t=e.i18n,r=e.locale,a=e.institution,i=yb.a(a);return g.a.compact([{accessor:"name",sortable:!0,label:t._("Name"),key:"name",grow:!0,renderer:function(e){return o.a.createElement("span",null,e.name)}},{accessor:"type",sortable:!0,label:t._("Type"),key:"type",renderer:function(e){var n="";switch(e.type){case pc.b.GROUP_PRESENTATION:n=t._("Group project");break;case pc.b.INDIVIDUAL_PROJECT:n=t._("Individual project");break;case pc.b.QA_ENHANCED:n=t._("Question and Answer");break;case pc.b.INTERACTIVE_VIDEO:n=t._("Interactive Video");break;case pc.b.CONVERSATION:n=t._("Conversation");break;case pc.b.IN_CLASSROOM:n=t._("In-Class Video");break;case pc.b.TEXT_DISCUSSION:n=t._("Text discussion");break;case pc.b.ROLE_PLAY:n=t._("Role Play");break;default:n=null}return o.a.createElement("span",null,n)}},i&&{accessor:"cengageSettings.inPath",sortable:!0,label:t._("In Learning Path"),key:"in_learning_path",renderer:function(e){var n=e.cengageSettings&&e.cengageSettings.inPath;return o.a.createElement("span",null,n?t._("Yes"):t._("No"))}},i&&{accessor:"cengageSettings.locked",sortable:!0,label:"CL",key:"cl",renderer:function(e){var n=e.cengageSettings&&e.cengageSettings.locked;return o.a.createElement("span",null,n?t._("Yes"):t._("No"))}},i&&{accessor:"cengageSettings.score",sortable:!0,label:t._("Points"),key:"points",renderer:function(e){var t=e.cengageSettings&&e.cengageSettings.score?e.cengageSettings.score:"";return o.a.createElement("span",null,t)}},!i&&{accessor:"submitDueAt",sortable:!0,label:t._("Due (Optional)"),key:"due",renderer:function(e){return e.submitDueAt?o.a.createElement(IY.a,{value:e.submitDueAt}):o.a.createElement("span",null,"\u2014")}},{label:t._("Actions"),key:"actions",isCustomColumn:!0,renderer:function(e){var t=n.props,a=t.i18n,c=t.ltiScope,s=e.allowGroupsForming,u=i&&c===cA.a.CENGAGE_EDUCATOR_DOCK,l=e.type===pc.b.IN_CLASSROOM,d=[gr.a.isInclassEnabled()&&l&&o.a.createElement(ol.a,{primaryText:a._("Start In Class"),key:"open-activity",leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Start In Class, icon")},Je.a.OPEN_IN_BROWSER),onClick:function(){var t="/educator/activity/".concat(e.dbId,"/inclassroom-start");window.location.href=Object(Yh.a)(t)}}),u&&o.a.createElement(ol.a,{primaryText:a._("Open as student"),key:"open-as-student",leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Open as student, icon")},Je.a.OPEN_IN_BROWSER),onClick:function(){var t="/educator/activity/".concat(e.dbId,"/cengage/student-view");window.location.href=Object(Yh.a)(t)}}),!i&&o.a.createElement(OP,{key:"gradebook-menu-action",activityData:e,locale:r})];return s&&d.push(o.a.createElement(cR,{key:"manage-groups-menu-action",activityData:e})),d.push(o.a.createElement(bP,{key:"edit-assignment-menu-action",activityData:e}),o.a.createElement(FI,{key:"copy-assignment-menu-action",activityData:e}),o.a.createElement(cP,{key:"delete-assignment-menu-action",activityData:e,onDeleteSuccess:n.onDeleteSuccess})),d=g.a.compact(d),o.a.createElement(nH.a,{key:e.dbId,menuItems:d})}}])})),pz(fz(fz(n)),"onDeleteSuccess",(function(){n.props.reloadData&&n.props.reloadData()})),pz(fz(fz(n)),"onCreateOldActivities",(function(){var e=n.props.navigation,t=Object(dB.a)(e,VO.a.ACTIVITY_CREATE);t&&(t=Object(Yh.a)(t),window.location.href=t)})),pz(fz(fz(n)),"getSpeedDialItems",(function(){var e=n.props,t=e.i18n,r=e.isD2LFreemium,a=[o.a.createElement(xH.a,{id:"speed-dial-item-assignment-individual",key:"create_individual_assignment",icon:Je.a.PERSON,onClick:n.props.onCreateIndividualProject,ariaLabel:t._("Create individual assignment"),tooltip:{label:t._("Create individual assignment")}}),o.a.createElement(xH.a,{id:"speed-dial-item-assignment-group",key:"create_group_assignment",enabled:gr.a.isGroupAssignmentEnabled(),icon:Je.a.GROUP,onClick:n.props.onCreateGroupProject,ariaLabel:t._("Create group assignment"),tooltip:{label:t._("Create group assignment")+(r?" ("+t._(qf.a.FREEMIUM_CONFIG_OPTION)+")":"")}}),o.a.createElement(xH.a,{id:"speed-dial-item-assignment-qa",key:"create_qa_assignment",enabled:gr.a.isQuestionAndAnswerAssignmentEnabled(),icon:Je.a.QUESTION_ANSWER,onClick:n.props.onCreateQA,ariaLabel:t._("Create question & answer assignment"),tooltip:{label:t._("Create question & answer assignment")+(r?" ("+t._(qf.a.FREEMIUM_CONFIG_OPTION)+")":"")}}),o.a.createElement(xH.a,{id:"speed-dial-item-assignment-interactive-video",key:"create_interactive_video_assignment",enabled:gr.a.isInteractiveVideoAssignmentEnabled(),iconClassName:vr.a.INTERACTIVE_VIDEO,onClick:n.props.onCreateInteractiveVideoProject,ariaLabel:t._("Create interactive video assignment"),tooltip:{label:t._("Create interactive video assignment")+(r?" ("+t._(qf.a.FREEMIUM_CONFIG_OPTION)+")":"")}})];return(gr.a.canCreateOldActivities()||gr.a.isInclassEnabled())&&a.push(o.a.createElement(xH.a,{id:"speed-dial-item-assignment-old-type",key:"create_old_activity_type",icon:Je.a.COLLECTIONS_BOOKMARK,onClick:n.onCreateOldActivities,tooltip:{label:t._("Create legacy assignment")},ariaLabel:t._("Create legacy assignment")})),a})),pz(fz(fz(n)),"getMenuActions",(function(){var e=n.props.i18n,t=[];return gr.a.isCopyAssignmentFromTermClasAllowed()&&t.push({primaryText:e._("Copy assignment from class"),onClick:function(){return Hn.a.showModal(o.a.createElement(cz,{reloadData:n.props.reloadData}))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:e._("Copy assignment from class, icon")},Je.a.CONTENT_COPY)}),t})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dz(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.isLoading,a=e.hasError,i=e.activityList,c=e.reloadData;if(r)return o.a.createElement(bc.a,{loading:!0});var s={label:t._("Add...")};return o.a.createElement(z.a,{title:t._("Assignments")},o.a.createElement(iO.a,{classId:n}),a&&o.a.createElement(EH,{reloadData:c,message:t._("Failed to load assignment data"),buttonTitle:t._("Try again")}),o.a.createElement(iA,{classId:n,menuActions:this.getMenuActions(),context:VO.a.ASSIGNMENTS}),i&&o.a.createElement(un.a,null,i.length>0&&o.a.createElement(Zt.c,{className:"",id:"educator-activity-table",columns:this.getColumns(),listAccessor:"name",hasMobileListView:!1,data:i,onListRowSelect:function(){},defaultSort:{accessor:"submitDueAt",direction:"asc"},fallbackSort:{accessor:"name",direction:"asc"}}),0===i.length&&o.a.createElement("p",{className:"no-assignments"},t._("No assignments yet"))),o.a.createElement(MH.a,{id:"speed-dial-assignment-list",tooltip:s,ariaLabel:s.label},this.getSpeedDialItems()))}}])&&uz(n.prototype,r),a&&uz(n,a),t}(a.Component),bz=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{isD2LFreemium:bb.s(e),locale:cy.a(e),institution:bb.h(e),navigation:SA.a(e),ltiScope:bb.j(e)}}))(mz))),yz=n("FxcE");function vz(){var e=gz(["\n    mutation deleteActivity($input: ActivityInput!) {\n        deleteActivity(input: $input) {\n            removedId\n        }\n    }\n"]);return vz=function(){return e},e}function hz(){var e=gz(["\n    mutation copyActivity($input: ActivityInput!) {\n        copyActivity(input: $input) {\n            activity {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return hz=function(){return e},e}function gz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ez(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function wz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sz=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getActivityListData",value:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lt.a.query({query:yz.a,variables:{dbId:t}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.termClass.activities;return Promise.resolve(n)})));case 1:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ez(o,r,a,i,c,"next",e)}function c(e){Ez(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:"copyActivity",value:function(e){return Lt.a.mutate({mutation:Oz,variables:{input:{dbId:e}}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.copyActivity.activity;return Promise.resolve(n)}))}},{key:"deleteActivity",value:function(e){return Lt.a.mutate({mutation:Cz,variables:{input:{dbId:e}}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.deleteActivity.removedId;return Promise.resolve(n)}))}}])&&wz(t.prototype,n),r&&wz(t,r),e}()),Oz=xt()(hz()),Cz=xt()(vz());function _z(e){return(_z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tz(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Iz(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tz(o,r,a,i,c,"next",e)}function c(e){Tz(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Pz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rz(e){return(Rz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Az(e,t){return(Az=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nz=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Rz(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==_z(a)&&"function"!==typeof a?jz(r):a,kz(jz(jz(n)),"state",{isLoading:!0,hasError:!1,activityList:null}),kz(jz(jz(n)),"getData",Iz(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setHasError(!1),n.setIsLoading(!0),e.prev=3,e.next=6,Sz.getActivityListData(+t);case 6:r=e.sent,n.setState({activityList:r}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),H.b.error(e.t0),n.setHasError(!0);case 14:return e.prev=14,n.setIsLoading(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,10,14,17]])})))),kz(jz(jz(n)),"gradeActivity",(function(e){var t=n.props.history,r=xee.EDUCATOR_GRADEBOOK.replace(Lee,e.dbId);t.push(r)})),kz(jz(jz(n)),"onCreateIndividualProject",(function(){var e=n.props,t=e.match.params.classId,r=e.history;(0,e.dispatch)(yI.f(null));var a=xee.EDUCATOR_CREATE_INDIVIDUAL_ACTIVITY.replace(Mee,+t);r.push(a)})),kz(jz(jz(n)),"onCreateGroupProject",(function(){var e=n.props,t=e.match.params.classId,r=e.history;(0,e.dispatch)(yI.e(null));var a=xee.EDUCATOR_CREATE_GROUP_ACTIVITY.replace(Mee,+t);r.push(a)})),kz(jz(jz(n)),"onCreateQA",(function(){var e=n.props,t=e.match.params.classId,r=e.history;(0,e.dispatch)(yI.h(null));var a=xee.EDUCATOR_CREATE_QA_ACTIVITY.replace(Mee,+t);r.push(a)})),kz(jz(jz(n)),"onCreateInteractiveVideoProject",(function(){var e=n.props,t=e.match.params.classId,r=e.history;(0,e.dispatch)(yI.g(null));var a=xee.EDUCATOR_CREATE_INTERACTIVE_VIDEO_ACTIVITY.replace(Mee,+t);r.push(a)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Az(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getData()}},{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"render",value:function(){var e=this.props.match.params.classId,t=this.state,n=t.isLoading,r=t.hasError,a=t.activityList;return o.a.createElement(bz,{classId:+e,reloadData:this.getData,onCreateIndividualProject:this.onCreateIndividualProject,onCreateInteractiveVideoProject:this.onCreateInteractiveVideoProject,onCreateGroupProject:this.onCreateGroupProject,onCreateQA:this.onCreateQA,isLoading:n,hasError:r,activityList:a})}}])&&Pz(n.prototype,r),a&&Pz(n,a),t}(a.Component),Dz=Object(s.a)(Object(c.b)()(Nz)),Lz=n("wpyS");function Mz(e){return(Mz="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fz(e,t){return!t||"object"!==Mz(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vz(e){return(Vz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gz(e,t){return(Gz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uz=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fz(this,Vz(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gz(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onConfirm,r=e.onCancel,a=e.rubricName,i=e.isLoading,c=e.hasError,s=[o.a.createElement(Ue.a,{id:"button-rubric-delete-confirmation-dialog-cancel",onClick:r,enabled:!i},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(Ue.a,{id:"button-rubric-delete-confirmation-dialog-remove",onClick:n,primary:!0,isLoading:i},o.a.createElement(x.Trans,{id:"Remove"}))];return o.a.createElement(Fr.a,{id:"confirm-remove-rubric",modal:!0,actions:s,visible:!0,title:t._("Delete Rubric?"),onClose:r},c&&o.a.createElement("p",{className:"u-error"},t._("Deletion error. Please try again.")),o.a.createElement("p",null,t._('Are you sure you want to delete rubric "{rubricName}"?',{rubricName:a})))}}])&&xz(n.prototype,r),a&&xz(n,a),t}(a.Component);Uz.propTypes={onCancel:M.a.func,onConfirm:M.a.func,rubricName:M.a.string};var qz=Object(x.withI18n)()(Uz);function Wz(e){return(Wz="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bz(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qz(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bz(o,r,a,i,c,"next",e)}function c(e){Bz(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Yz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hz(e){return(Hz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zz(e,t){return(zz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $z=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Hz(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Wz(a)&&"function"!==typeof a?Kz(r):a,Xz(Kz(Kz(n)),"state",{hasError:!1,isLoading:!1}),Xz(Kz(Kz(n)),"removeRubric",Qz(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.rubric,n.setLoading(!0),n.setHasError(!1),e.prev=3,e.next=6,kM.removeRubric(t.dbId);case 6:n.props.onSuccess(t.dbId),n.setLoading(!1,Hn.a.closeModal),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),n.setHasError(!0),n.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zz(e,t)}(t,e),n=t,(r=[{key:"setLoading",value:function(e,t){this.setState({isLoading:e},t)}},{key:"setHasError",value:function(e,t){this.setState({hasError:e},t)}},{key:"render",value:function(){var e=this.props.rubric,t=this.state,n=t.hasError,r=t.isLoading;return o.a.createElement(qz,{rubricName:e.name,onCancel:Hn.a.closeModal,hasError:n,isLoading:r,onConfirm:this.removeRubric})}}])&&Yz(n.prototype,r),a&&Yz(n,a),t}(a.Component);$z.propTypes={rubric:M.a.object,onSuccess:M.a.func};var Zz=$z;n("tE7O");function Jz(e){return(Jz="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tK(e,t){return!t||"object"!==Jz(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nK(e){return(nK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rK(e,t){return(rK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aK=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tK(this,nK(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rK(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.quickNavItems,n=e.context,r=e.match.params.classId;return o.a.createElement(z.a,{title:this.props.title},o.a.createElement(iA,{classId:+r,existingQuickNavItems:t,context:n}),o.a.createElement("div",{className:"c-rubric-page"},o.a.createElement(un.a,{className:"c-rubric-page__container"},this.props.children)))}}])&&eK(n.prototype,r),a&&eK(n,a),t}(a.Component);aK.propTypes={quickNavItems:M.a.array,context:M.a.object},aK.defaultProps={quickNavItems:[]};var oK=Object(s.a)(aK);function iK(e){return(iK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sK(e){return(sK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uK(e,t){return(uK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fK=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=sK(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==iK(a)&&"function"!==typeof a?lK(r):a,dK(lK(lK(n)),"getTableData",(function(){return n.props.list.map((function(e){return(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dK(e,t,n[t])}))}return e}({},e)).ownerName=e.owner.firstName+" "+e.owner.lastName,e}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uK(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this,t=this.props,n=t.i18n,r=t.institution,a=Object(yb.a)(r);return g.a.compact([{accessor:"name",grow:!0,className:"",label:n._("Rubric name"),sortable:!0,renderer:function(e){return o.a.createElement("div",null,e.name)}},{accessor:"createdAt",className:"",label:n._("Date added"),sortable:!0,renderer:function(e){return o.a.createElement(IY.a,{value:e.createdAt})}},{className:"",label:n._("Owner"),accessor:"ownerName",sortable:!0,renderer:function(e){return o.a.createElement(Ht.a,{value:e.ownerName})}},a&&{className:"",label:"CL",renderer:function(e){var t=e.cengageSettings&&e.cengageSettings.locked;return o.a.createElement("span",null,t?n._("Yes"):n._("No"))}},{isCustomColumn:!0,className:"",label:"",renderer:function(t,n){return o.a.createElement(nH.a,{key:n,menuItems:e.createActionsMenu(t,n)})}}])}},{key:"createActionsMenu",value:function(e,t){var n=e.isUsed,r=this.props,a=r.i18n,i=r.currentUserId,c=e.owner.dbId!==i;return[o.a.createElement(ol.a,{key:t+"_view",enabled:!0,onClick:this.props.onShow.bind(null,e),leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("View, icon")},Je.a.PREVIEW),primaryText:a._("View")}),o.a.createElement(ol.a,{key:t+"_edit",enabled:!c,onClick:this.props.onEdit.bind(null,e),leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Edit, icon")},Je.a.EDIT),primaryText:a._("Edit")}),o.a.createElement(ol.a,{key:t+"_copy",enabled:!0,onClick:this.props.onCopy.bind(null,e),leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Copy, icon")},Je.a.CONTENT_COPY),primaryText:a._("Copy")}),o.a.createElement(ol.a,{key:t+"_delete",enabled:!n&&!c,onClick:this.props.onDelete.bind(null,e),leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Delete, icon")},Je.a.DELETE),primaryText:a._("Delete")})]}},{key:"getSpeedDialItems",value:function(){var e=this.props.i18n;return[o.a.createElement(Ue.h,{key:"create rubruc",icon:Je.a.ADD,id:"speed-dial-item-rubric-create",onClick:this.props.onCreate,ariaLabel:e._("Create rubric"),tooltip:{label:e._("Create rubric")}}),o.a.createElement(Ue.h,{key:"import rubruc",icon:Je.a.FILE_UPLOAD,id:"speed-dial-item-rubric-import",onClick:this.props.onImport,ariaLabel:e._("Import rubric"),tooltip:{label:e._("Import rubric")}})]}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.isLoading,r=e.isError,a=e.reload,i=e.quickNavItems,c=e.i18n,s={label:c._("Add...")};return o.a.createElement(oK,{title:c._("Rubrics"),context:VO.a.RUBRICS,quickNavItems:i},t.length>0&&o.a.createElement(Zt.c,{columns:this.getColumns(),className:"rubrics-list",id:"educator-rubrics-table",data:this.getTableData(),listAccessor:"dbId",hasMobileListView:!1,onListRowSelect:function(){},defaultSort:{accessor:"createdAt",direction:"desc"},fallbackSort:{accessor:"name",direction:"asc"}}),0===t.length&&!n&&!r&&o.a.createElement("p",null,c._("No rubrics yet")),r&&o.a.createElement("div",null,o.a.createElement("p",null,c._("Failed to load rubrics")),o.a.createElement(Ue.f,{id:"button-rubric-list-error-reload",onClick:a},c._("Reload"))),o.a.createElement(bc.a,{loading:n}),o.a.createElement(Ue.g,{id:"speed-dial-rubric-list",tooltip:s,ariaLabel:s.label},this.getSpeedDialItems()))}}])&&cK(n.prototype,r),a&&cK(n,a),t}(a.Component);fK.propTypes={quickNavItems:M.a.array,institution:M.a.object},fK.defaultProps={quickNavItems:[]};var pK=Object(x.withI18n)()(fK);function mK(e){return(mK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){OK(e,t,n[t])}))}return e}function yK(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vK(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function hK(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){vK(o,r,a,i,c,"next",e)}function c(e){vK(o,r,a,i,c,"throw",e)}i(void 0)}))}}function gK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EK(e){return(EK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wK(e,t){return(wK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CK=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=EK(t).call(this,e),n=!a||"object"!==mK(a)&&"function"!==typeof a?SK(r):a,OK(SK(SK(n)),"getLibraryList",hK(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setLoading(!0),n.setError(!1),e.prev=3,e.next=6,kM.getRubrics(+t);case 6:r=e.sent,n.setState({list:r}),n.setLoading(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),n.setLoading(!1),n.setError(!0),H.b.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,11]])})))),OK(SK(SK(n)),"onShow",(function(e){Hn.a.showModal(o.a.createElement(Lz.a,{mode:Qn.a.VIEW,rubricPoints:0,rubric:e}))})),OK(SK(SK(n)),"onEdit",(function(e){n.navigateToSubRoute(Qh.f.EDUCATOR_RUBRIC_EDIT,{rubricId:e.dbId})})),OK(SK(SK(n)),"onCopy",(function(e){n.navigateToSubRoute(Qh.f.EDUCATOR_RUBRIC_COPY,{rubricId:e.dbId})})),OK(SK(SK(n)),"onDelete",(function(e){Hn.a.showModal(o.a.createElement(Zz,{rubric:e,onSuccess:n.onDeleteRubricSuccess}))})),OK(SK(SK(n)),"onDeleteRubricSuccess",(function(e){var t=n.state.list.filter((function(t){return t.dbId!==e}));n.setState({list:t})})),OK(SK(SK(n)),"onCreate",(function(){n.navigateToSubRoute(Qh.f.EDUCATOR_RUBRIC_CREATE)})),OK(SK(SK(n)),"onImport",(function(){n.navigateToSubRoute(Qh.f.EDUCATOR_RUBRIC_IMPORT)})),OK(SK(SK(n)),"navigateToSubRoute",(function(e,t){var r=n.props,a=r.history,o=r.match,i=r.location,c=V.a.compile(e),s=[].concat(yK(Object(dB.b)(i,VO.a.RUBRICS)),[{context:VO.a.RUBRICS,location:i}]);a.push({pathname:c(bK({},o.params,t)),state:{quickNavItems:yK(s)}})})),n.state={list:[],isLoading:!1,isError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wK(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getLibraryList()}},{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"setError",value:function(e){this.setState({isError:e})}},{key:"render",value:function(){var e=this.state,t=e.list,n=e.isLoading,r=e.isError,a=this.props,i=a.location,c=a.institution;return o.a.createElement(pK,{list:t,quickNavItems:Object(dB.b)(i,VO.a.RUBRICS),isLoading:n,isError:r,institution:c,currentUserId:this.props.currentUserId,reload:this.getLibraryList,onImport:this.onImport,onCreate:this.onCreate,onDelete:this.onDelete,onCopy:this.onCopy,onEdit:this.onEdit,onShow:this.onShow})}}])&&gK(n.prototype,r),a&&gK(n,a),t}(a.Component),_K=Object(x.withI18n)()(Object(s.a)(Object(c.b)((function(e){return{currentUserId:wt.i(e),institution:bb.h(e)}}))(CK))),TK=n("yBPd");function IK(e){return(IK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PK(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function RK(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){PK(o,r,a,i,c,"next",e)}function c(e){PK(o,r,a,i,c,"throw",e)}i(void 0)}))}}function AK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jK(e){return(jK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kK(e,t){return(kK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LK=64,MK=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=jK(t).call(this,e),n=!a||"object"!==IK(a)&&"function"!==typeof a?NK(r):a,DK(NK(NK(n)),"onRubricChange",(function(e){n.setState({maxValue:e.maxValue}),n.rubricData=e,n.onChange()})),DK(NK(NK(n)),"onRubricNameChange",(function(e){e.length>LK&&(e=e.substring(0,LK)),n.setState({rubricName:e},n.onChange)})),DK(NK(NK(n)),"onChange",(function(){n.props.onChange(n.getRubric())})),DK(NK(NK(n)),"onSubmit",RK(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isSaving:!0}),e.next=3,n.props.onSubmit(n.getRubric());case 3:n.setState({isSaving:!1});case 4:case"end":return e.stop()}}),e,this)})))),n.state={isSaving:!1,maxValue:0,rubricName:n.props.rubric?n.props.rubric.name:"",rubric:n.props.rubric?n.props.rubric:null,rubricNameError:""},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kK(e,t)}(t,e),n=t,(r=[{key:"validate",value:function(){var e=!0,t="";return this.state.rubricName||(t="Required",e=!1),this.setState({rubricNameError:t}),e}},{key:"getRubric",value:function(){var e=g.a.clone(this.rubricData);e||(e={}),e.name=this.state.rubricName;var t=this.validate();return t||(e.isValid=t),e}},{key:"render",value:function(){var e=this.props,t=e.rubric,n=e.showClientErrors,r=e.i18n,a=this.state,i=a.isSaving,c=a.maxValue,s=a.rubricNameError,u=a.rubricName,l=Qn.a.CREATE;return t&&(l=Qn.a.EDIT),o.a.createElement("div",null,o.a.createElement("div",{className:"u-mb-10px"},o.a.createElement(Tl.b,{id:"rubric-name",label:r._("Rubric name"),errorText:n?s:"",value:u,onChange:this.onRubricNameChange})),o.a.createElement("div",{className:"c-rubric-page__rubric-holder"},o.a.createElement(TK.a,{onRubricChange:this.onRubricChange,rubric:t,mode:l,showClientErrors:n})),o.a.createElement("p",null,r._("Max value: {maxValue}",{maxValue:c})),o.a.createElement(Ue.f,{id:"button-rubric-settings-save",primary:!0,onClick:this.onSubmit,enabled:!i&&c>0},i?r._("Saving..."):r._("Save")))}}])&&AK(n.prototype,r),a&&AK(n,a),t}(a.Component);MK.propTypes={rubric:M.a.any,onSubmit:M.a.func,onRubricChange:M.a.func,showClientErrors:M.a.bool};var xK=Object(x.withI18n)()(MK);function FK(e){return(FK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VK(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function GK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){YK(e,t,n[t])}))}return e}function UK(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function qK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WK(e){return(WK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BK(e,t){return(BK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HK=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=WK(t).call(this,e),n=!a||"object"!==FK(a)&&"function"!==typeof a?QK(r):a,YK(QK(QK(n)),"onRubricChange",(function(){})),YK(QK(QK(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.history,i=r.match,t.isValid){e.next=4;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 4:return e.prev=4,n.setHasSubmissionError(!1),n.setLoading(!0),delete t.maxValue,delete t.dbId,delete t.isValid,e.next=12,kM.createRubric(t);case 12:n.setLoading(!1),c=V.a.compile(xee.EDUCATOR_RUBRICS_LIST),a&&a.state&&a.state.quickNavItems?o.push({pathname:c(GK({},i.params)),state:{quickNavItems:VK(a.state.quickNavItems)}}):o.push(c(GK({},i.params))),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),n.setHasSubmissionError(!0),n.setLoading(!1);case 21:case"end":return e.stop()}}),e,this,[[4,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){UK(o,r,a,i,c,"next",e)}function c(e){UK(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n.state={showClientErrors:!1,isLoading:!1,hasSubmissionError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BK(e,t)}(t,e),n=t,(r=[{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasSubmissionError",value:function(e){this.setState({hasSubmissionError:e})}},{key:"render",value:function(){var e=this.state,t=e.showClientErrors,n=e.isLoading,r=e.hasSubmissionError,a=this.props,i=a.i18n,c=a.location,s=null;return c&&c.state&&(s=c.state.quickNavItems),o.a.createElement(oK,{title:i._("Create Rubric"),context:VO.a.RUBRICS_CREATE,quickNavItems:s},r&&o.a.createElement("p",{className:"u-error"},i._("Failed to save rubric. Please try again.")),o.a.createElement(xK,{onChange:this.onRubricChange,showClientErrors:t,onSubmit:this.onSubmit}),o.a.createElement(bc.a,{loading:n}))}}])&&qK(n.prototype,r),a&&qK(n,a),t}(a.Component);HK.propTypes={quickNavItems:M.a.array},HK.defaultProps={quickNavItems:[]};var zK=Object(x.withI18n)()(HK);function KK(e){return(KK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XK(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){aX(e,t,n[t])}))}return e}function ZK(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function JK(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ZK(o,r,a,i,c,"next",e)}function c(e){ZK(o,r,a,i,c,"throw",e)}i(void 0)}))}}function eX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tX(e){return(tX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nX(e,t){return(nX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oX=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=tX(t).call(this,e),n=!a||"object"!==KK(a)&&"function"!==typeof a?rX(r):a,aX(rX(rX(n)),"onRubricChange",(function(){})),aX(rX(rX(n)),"onSubmit",function(){var e=JK(regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.history,i=r.match,t.isValid){e.next=4;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 4:return e.prev=4,n.setHasSubmissionError(!1),n.setLoading(!0),c=t.dbId,delete t.maxValue,delete t.dbId,delete t.isValid,e.next=13,kM.editRubric(c,t);case 13:n.setLoading(!1),s=V.a.compile(xee.EDUCATOR_RUBRICS_LIST),a&&a.state&&a.state.quickNavItems?o.push({pathname:s($K({},i.params)),state:{quickNavItems:XK(a.state.quickNavItems)}}):o.push(s($K({},i.params))),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),n.setHasSubmissionError(!0),n.setLoading(!1);case 22:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t){return e.apply(this,arguments)}}()),n.state={showClientErrors:!1,rubric:null,isLoading:!1,hasLoadingError:!1,hasSubmissionError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nX(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getRubric()}},{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasLoadingError",value:function(e){this.setState({hasLoadingError:e})}},{key:"setHasSubmissionError",value:function(e){this.setState({hasSubmissionError:e})}},{key:"getRubric",value:function(){var e=JK(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,n=t.classId,r=t.rubricId,e.prev=1,this.setHasLoadingError(!1),this.setLoading(!0),e.next=6,kM.getRubricById(+r,+n);case 6:a=e.sent,this.setLoading(!1),this.setState({rubric:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.setLoading(!1),this.setHasLoadingError(!0);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.showClientErrors,n=e.rubric,r=e.hasLoadingError,a=e.isLoading,i=e.hasSubmissionError,c=this.props,s=c.i18n,u=c.location,l=null;return u&&u.state&&(l=u.state.quickNavItems),o.a.createElement(oK,{title:s._("Edit Rubric"),context:VO.a.RUBRICS_EDIT,quickNavItems:l},i&&o.a.createElement("p",{className:"u-error"},s._("Failed to edit rubric. Please try again")),r&&o.a.createElement("div",null,o.a.createElement("p",null,s._("Can't get rubric")),o.a.createElement(Ue.f,{id:"button-rubric-edit-error-reload",onClick:this.getRubric.bind(this)},s._("Try again"))),n&&o.a.createElement(xK,{onChange:this.onRubricChange,rubric:n,showClientErrors:t,onSubmit:this.onSubmit}),a&&o.a.createElement(bc.a,{loading:a}))}}])&&eX(n.prototype,r),a&&eX(n,a),t}(a.Component),iX=Object(s.a)(Object(x.withI18n)()(oX));function cX(e){return(cX="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sX(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function uX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yX(e,t,n[t])}))}return e}function lX(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function dX(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){lX(o,r,a,i,c,"next",e)}function c(e){lX(o,r,a,i,c,"throw",e)}i(void 0)}))}}function fX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pX(e){return(pX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mX(e,t){return(mX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vX=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=pX(t).call(this,e),n=!a||"object"!==cX(a)&&"function"!==typeof a?bX(r):a,yX(bX(bX(n)),"onRubricChange",(function(){})),yX(bX(bX(n)),"onSubmit",function(){var e=dX(regeneratorRuntime.mark((function e(t){var r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.history,i=r.match,t.isValid){e.next=4;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 4:return e.prev=4,n.setHasSubmissionError(!1),n.setLoading(!0),delete t.maxValue,delete t.dbId,delete t.isValid,e.next=12,kM.createRubric(t);case 12:n.setLoading(!1),c=V.a.compile(xee.EDUCATOR_RUBRICS_LIST),a&&a.state&&a.state.quickNavItems?o.push({pathname:c(uX({},i.params)),state:{quickNavItems:sX(a.state.quickNavItems)}}):o.push(c(uX({},i.params))),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),n.setHasSubmissionError(!0),n.setLoading(!1);case 21:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(t){return e.apply(this,arguments)}}()),n.state={showClientErrors:!1,rubric:null,isLoading:!1,hasLoadingError:!1,hasSubmissionError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mX(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getRubric()}},{key:"setHasSubmissionError",value:function(e){this.setState({hasSubmissionError:e})}},{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasLoadingError",value:function(e){this.setState({hasLoadingError:e})}},{key:"getRubric",value:function(){var e=dX(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.i18n,r=t.match.params,a=r.classId,o=r.rubricId,e.prev=1,this.setHasLoadingError(!1),this.setLoading(!0),e.next=6,kM.getRubricById(+o,+a);case 6:i=e.sent,this.setLoading(!1),c=g.a.merge({},i,{name:n._("{0} (copy)",{0:i.name}),isUsed:!1}),this.setState({rubric:c}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),this.setLoading(!1),this.setHasLoadingError(!0);case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.showClientErrors,n=e.rubric,r=e.hasLoadingError,a=e.isLoading,i=e.hasSubmissionError,c=this.props,s=c.location,u=c.i18n,l=null;return s&&s.state&&(l=s.state.quickNavItems),o.a.createElement(oK,{title:u._("Copy Rubric"),context:VO.a.RUBRICS_COPY,quickNavItems:l},i&&o.a.createElement("p",{className:"u-error"},u._("Failed to copy rubric. Please try again")),r&&o.a.createElement("div",null,o.a.createElement("p",null,u._("Can't get rubric")),o.a.createElement(Ue.f,{id:"button-rubric-copy-error-reload",onClick:this.getRubric.bind(this)},u._("Try again"))),n&&o.a.createElement(xK,{onChange:this.onRubricChange,rubric:n,showClientErrors:t,onSubmit:this.onSubmit}),a&&o.a.createElement(bc.a,{loading:a}))}}])&&fX(n.prototype,r),a&&fX(n,a),t}(a.Component),hX=Object(s.a)(Object(x.withI18n)()(vX)),gX=n("P/HN"),EX=n("NpuA"),wX=n.n(EX),SX=n("Jxis"),OX=n.n(SX),CX=n("8Qij"),_X=n.n(CX),TX=n("8uzE"),IX=n.n(TX);n("LsJI");function PX(e){return(PX="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function AX(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xX(e,t,n[t])}))}return e}function kX(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function NX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DX(e){return(DX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LX(e,t){return(LX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FX=255,VX="validators.rubric_cell.description.max",GX=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=DX(t).call(this,e),n=!a||"object"!==PX(a)&&"function"!==typeof a?MX(r):a,xX(MX(MX(n)),"onRubricChange",(function(){})),xX(MX(MX(n)),"onSubmit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.history,i=r.match,c=r.i18n,(t=g.a.clone(t)).isValid){e.next=5;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 5:return e.prev=5,n.setSubmissionErrors(null),n.setLoading(!0),delete t.maxValue,delete t.dbId,delete t.isValid,e.next=13,kM.createRubric(t);case 13:n.setLoading(!1),s=V.a.compile(xee.EDUCATOR_RUBRICS_LIST),a&&a.state&&a.state.quickNavItems?o.push({pathname:s(jX({},i.params)),state:{quickNavItems:AX(a.state.quickNavItems)}}):o.push(s(jX({},i.params))),e.next=25;break;case 18:e.prev=18,e.t0=e.catch(5),u=g.a.map(e.t0,(function(e){return e&&e.message&&g.a.startsWith(e.message,VX)?c._("Maximum description length is {MAX_DESCRIPTION_LENGTH}.",{MAX_DESCRIPTION_LENGTH:FX}):null})),(u=g.a.compact(u)).length<1&&u.push(c._("Failed to save import rubric. Please try again.")),n.setSubmissionErrors(u),n.setLoading(!1);case 25:case"end":return e.stop()}}),e,this,[[5,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kX(o,r,a,i,c,"next",e)}function c(e){kX(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),xX(MX(MX(n)),"onFile",(function(e){var t=RX(e,1)[0],r=new FileReader;r.onloadend=function(){var e=r.result;e=e.trim(),n.convertCsvToRubric(e,t.name)},r.readAsText(t)})),n.state={rubric:null,showClientErrors:!1,hasError:!1,isLoading:!1,submissionErrors:[],truncatedDescriptions:[]},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LX(e,t)}(t,e),n=t,(r=[{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"setSubmissionErrors",value:function(e){e&&e.length>0?this.setState({submissionErrors:e}):this.setState({submissionErrors:[]})}},{key:"generateNumericId",value:function(){return+(1e6*Math.random()).toFixed(0)}},{key:"parsePoints",value:function(e){var t=e.match(/^(\d*\.?\d{0,2})(\d*)$/);return t?parseFloat(t[1]):null}},{key:"convertCsvToRubric",value:function(e,t){var n=this;this.setState({hasError:!1});try{var r=[],a=wX.a.parse(e).data;a.shift(),a.forEach((function(e){e.shift()}));var o=!0,i=a[0].length;if(a.forEach((function(e){e.length!==i&&(o=!1)})),!o)throw new Error("Invalid file");var c={dbId:this.generateNumericId(),rows:[]};a[0].forEach((function(e,t){if(0!==t&&(1===t||t%3===1)){c.rows[0]||(c.rows[0]=n.createRow(),c.rows[0].cells.push(n.createCell("")));var o=n.parsePoints(a[0][t+1]),i=e||"";i.length>FX&&(r.push(i),i=i.substring(0,FX)),c.rows[0].cells.push(n.createCell(i,o))}})),a.forEach((function(e,t){c.rows[t+1]||(c.rows[t+1]=n.createRow()),e.forEach((function(e,o){if(0===o)return c.rows[t+1].cells.push(n.createCell(e||""));if(o%3===0){var i=n.parsePoints(a[t][o-1]),s=e||"";s.length>FX&&(r.push(s),s=s.substring(0,FX)),c.rows[t+1].cells.push(n.createCell(s,i))}}))})),c.name=t,this.setState({rubric:c,truncatedDescriptions:r})}catch(s){this.setState({hasError:!0})}}},{key:"createCell",value:function(e,t){return{dbId:this.generateNumericId(),description:e,points:t}}},{key:"createRow",value:function(){return{dbId:this.generateNumericId(),cells:[]}}},{key:"render",value:function(){var e=this.state,t=e.showClientErrors,n=e.rubric,r=e.hasError,a=e.isLoading,i=e.submissionErrors,c=e.truncatedDescriptions,s=this.props,u=s.location,l=s.i18n,d=c&&c.length>0,f=l._("The following descriptions were truncated during import:")+"\n\n"+g.a.join(c,"\n\n"),p=null;return u&&u.state&&(p=u.state.quickNavItems),o.a.createElement(oK,{title:l._("Import Rubric"),context:VO.a.RUBRICS_IMPORT,quickNavItems:p},!n&&o.a.createElement("div",null,o.a.createElement("p",null,l._("Upload your correctly formatted csv spreadsheet to create your rubric.")),o.a.createElement("p",null,l._("Download the rubric template, modify the template, and save the file. Then upload the file to create your rubric.")),o.a.createElement("p",null,l._("Click the links below to download the files to your computer")),o.a.createElement("p",null,o.a.createElement("a",{href:OX.a,download:"examplerubric.csv"},"examplerubric.csv")),o.a.createElement("p",null,o.a.createElement("a",{href:_X.a,download:"rubrictemplate.csv"},"rubrictemplate.csv")),o.a.createElement("p",null,o.a.createElement("a",{href:IX.a,download:"rubricinstructions.pdf"},"rubricinstructions.pdf"))),i&&i.length>0&&g.a.map(i,(function(e){return o.a.createElement("p",{className:"u-error"},e)})),r&&o.a.createElement("p",{className:"u-error"},l._("Failed to parse rubric. File is invalid")),!n&&o.a.createElement("div",{className:"u-pt-10px"},o.a.createElement(gX.a,{onFile:this.onFile})),n&&o.a.createElement(xK,{rubric:n,onChange:this.onRubricChange,showClientErrors:t,onSubmit:this.onSubmit}),o.a.createElement(bc.a,{loading:a}),d&&o.a.createElement(ll.a,{id:"rubric-import-warning-message-dialog",dialogClassName:"rubric-import-warning-message-dialog",message:f}))}}])&&NX(n.prototype,r),a&&NX(n,a),t}(a.Component),UX=Object(s.a)(Object(x.withI18n)()(GX));n("SXUj");function qX(e){return(qX="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BX(e){return(BX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QX(e,t){return(QX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zX=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=BX(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==qX(a)&&"function"!==typeof a?YX(r):a,HX(YX(YX(n)),"getLockedIcon",(function(e){var t=n.props,r=t.classId,a=t.i18n;if(+e.ownedBy.dbId!==+r)return o.a.createElement(Uf.a,{className:"meeting-title-icon--locked",tooltip:{label:a._("This meeting recording cannot be managed because it belongs to a different course")}},Je.a.STATUS_RESTRICTED)})),HX(YX(YX(n)),"titleRenderer",(function(e){return o.a.createElement("div",{className:"meeting-title-container"},e.title,n.getLockedIcon(e))})),HX(YX(YX(n)),"isProcessed",(function(e){return e&&e.processingStatus===ml.a.READY})),HX(YX(YX(n)),"performFreemiumCheck",(function(e){var t=n.props.i18n,r=e&&e.recordingAvailability===fo.D2L_FREEMIUM_EXPIRED;return{expired:r,tooltipLabel:r?t._("This meeting is no longer available. Upgrade to premium to get access to this meeting."):""}})),HX(YX(YX(n)),"getPreviewItem",(function(e){var t=n.props,r=t.i18n,a=t.previewMedia,i=n.performFreemiumCheck(e),c=i.expired,s=i.tooltipLabel,u=n.isProcessed(e)&&!c;return o.a.createElement(ol.a,{key:"preview",onClick:function(){a(e)},enabled:u,tooltip:{label:s},leftIcon:o.a.createElement(Uf.a,null,Je.a.PREVIEW),primaryText:r._("Preview")})})),HX(YX(YX(n)),"getCopyURLItem",(function(e){var t=n.props.i18n,r=n.performFreemiumCheck(e),a=r.expired,i=r.tooltipLabel,c=Boolean(e&&e.externalPlayUrl),s=n.isProcessed(e)&&c&&!a;return o.a.createElement(ol.a,{key:"copy-url",enabled:s,tooltip:{label:i},onClick:function(){Object(uo.a)(e.externalPlayUrl)},leftIcon:o.a.createElement(Uf.a,null,Je.a.LINK),primaryText:t._("Copy Public Url")})})),HX(YX(YX(n)),"getDownloadItem",(function(e,t,r){var a=n.props.i18n,i=n.performFreemiumCheck(t),c=i.expired,s=i.tooltipLabel;if(!gr.a.isMeetingDownloadAllowed()||!e)return null;var u=!c;return o.a.createElement(ol.a,{key:"download",enabled:u,tooltip:{label:s},onClick:function(){n.onDownload(e,r)},leftIcon:o.a.createElement(Uf.a,null,Je.a.DOWNLOAD),primaryText:a._("Download")})})),HX(YX(YX(n)),"getAttendanceItem",(function(e){var t=n.props.i18n,r=gr.a.isMeetingAttendanceAllowed(),a=r?"":t._("Upgrade to premium to get access to this feature.");return o.a.createElement(ol.a,{key:"attendance",tooltip:{label:a},onClick:function(){n.onViewAttendance(e)},enabled:r,leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Attendance, icon")},Je.a.PEOPLE),primaryText:t._("Attendance")})})),HX(YX(YX(n)),"getDeleteItem",(function(e,t){var r=n.props,a=r.i18n,i=r.classId,c=r.onProcessedMeetingDelete,s=+e.ownedBy.dbId===+i&&n.isProcessed(t);return o.a.createElement(ol.a,{key:"delete",enabled:s,onClick:function(){c(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:a._("Delete, icon")},Je.a.DELETE),primaryText:a._("Delete")})})),HX(YX(YX(n)),"actionsRenderer",(function(e,t){var r=e.media,a=[];return a.push(n.getPreviewItem(r)),a.push(n.getCopyURLItem(r)),a.push(n.getDownloadItem(e.downloadUrl,r,e.title)),a.push(o.a.createElement(so.a,{key:"divider-1"})),a.push(n.getAttendanceItem(e)),a.push(n.getDeleteItem(e,r)),o.a.createElement(nH.a,{key:t,menuItems:g.a.compact(a)})})),HX(YX(YX(n)),"onDownload",(function(e,t){var r=n.props.i18n;fl.download(r,e,t)})),HX(YX(YX(n)),"onViewAttendance",(function(e){(0,n.props.viewAttendance)(e)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QX(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this.props.i18n;return[{label:e._("Title"),key:"title",accessor:"title",grow:!0,sortable:!0,renderer:this.titleRenderer},{label:e._("Actual Start Time"),key:"startTime",accessor:"startedAt",sortable:!0,renderer:function(e){return o.a.createElement(IY.a,{value:e.startedAt})}},{label:e._("End Time"),key:"endTime",accessor:"finishedAt",sortable:!0,renderer:function(e){return o.a.createElement(IY.a,{value:e.finishedAt})}},{label:e._("Status"),key:"status",accessor:"status",sortable:!0,renderer:function(t){return t.status===lo.FINISHED?t.media&&t.media.processingStatus===ml.a.ERROR?o.a.createElement(Uf.a,{ariaLabel:e._("Error, icon")},Je.a.ERROR):o.a.createElement(Uf.a,{ariaLabel:e._("Media Processing, icon")},Je.a.VIDEO_PROCESSING):t.status===lo.PROCESSED?t.media&&t.media.processingStatus!==ml.a.ERROR?o.a.createElement(Uf.a,{ariaLabel:e._("Media Ready, icon")},Je.a.DONE):o.a.createElement(Uf.a,{ariaLabel:e._("Error, icon")},Je.a.ERROR):void 0}},{label:e._("Actions"),key:"actions",isCustomColumn:!0,renderer:this.actionsRenderer}]}},{key:"render",value:function(){var e=this.props.meetings;return o.a.createElement("div",null,o.a.createElement(Zt.c,{className:"",id:"educator-recorded-meetings-table",columns:this.getColumns(),listAccessor:"dbId",hasMobileListView:!1,data:e,onListRowSelect:function(){},defaultSort:{accessor:"scheduledAt",direction:"desc"},fallbackSort:{accessor:"title",direction:"asc"}}))}}])&&WX(n.prototype,r),a&&WX(n,a),t}(a.Component);zX.propTypes={classId:M.a.number,i18n:M.a.object,previewMedia:M.a.func,viewAttendance:M.a.func,onProcessedMeetingDelete:M.a.func,meetings:M.a.array};var KX=Object(x.withI18n)()(zX);n("cNTu");function XX(e){return(XX="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZX(e){return(ZX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JX(e,t){return(JX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function e$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n$=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=ZX(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==XX(a)&&"function"!==typeof a?e$(r):a,t$(e$(e$(n)),"getLockedIcon",(function(e){var t=n.props,r=t.classId,a=t.i18n;if(+e.ownedBy.dbId!==+r)return o.a.createElement(Uf.a,{className:"meeting-title-icon--locked",tooltip:{label:a._("This meeting cannot be managed because it belongs to a different course")}},Je.a.STATUS_RESTRICTED)})),t$(e$(e$(n)),"titleRenderer",(function(e){return o.a.createElement("div",{className:"meeting-title-container"},e.title,n.getLockedIcon(e))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JX(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.isMeetingCohortingAllowed,a=e.openInviteSettings,i=e.openCohortSettings,c=e.onEditMeeting,s=e.onLaunchMeeting,u=e.onCancelMeeting;return[{label:t._("Title"),key:"title",accessor:"title",grow:!0,sortable:!0,renderer:this.titleRenderer},{label:t._("Scheduled At"),key:"date",accessor:"scheduledAt",sortable:!0,renderer:function(e){return o.a.createElement(IY.a,{value:e.scheduledAt})}},{label:t._("Actions"),key:"actions",isCustomColumn:!0,renderer:function(e,l){var d=+e.ownedBy.dbId===+n,f=[lo.SCHEDULED,lo.STARTED,lo.READY].includes(e.status),p=Boolean(e.anonymousInvitationUrl),m=Boolean(e.wholeClassAssigned),b=!1,y=!1,v=!1,h=!1,E="",w="";d&&(h=v=[lo.SCHEDULED,lo.NOT_HELD].includes(e.status),f&&(m?(E=t._("This action is not available because this is a whole class meeting"),y=!0):(w=t._("This action is only available for whole class meetings"),b=!0)));var S=[o.a.createElement(ol.a,{key:"launch",itemProps:{id:"meeting-menu-action-launch"},enabled:f,data:e,onClick:function(){s(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Launch, icon")},Je.a.EXIT),primaryText:t._("Launch")}),e.anonymousParticipantsAllowed&&o.a.createElement(ol.a,{key:"externalLink",itemProps:{id:"meeting-menu-action-external-link"},enabled:p,data:e,onClick:function(){Object(uo.a)(e.anonymousInvitationUrl)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Copy External Link, icon")},Je.a.LINK),primaryText:t._("Copy External Link")}),o.a.createElement(so.a,{key:"menu_item_divider[invite-meeting-0]"}),o.a.createElement(ol.a,{key:"invite",itemProps:{id:"meeting-menu-action-manage-invites"},enabled:b,primaryText:t._("Manage Invites"),onClick:function(){a(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Manage Invites, icon")},Je.a.ADD_PERSON),tooltip:{label:E}}),r&&o.a.createElement(ol.a,{key:"cohort",itemProps:{id:"meeting-menu-action-manage-cohorts"},enabled:y,primaryText:t._("Manage Cohorts"),onClick:function(){i(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Manage Cohorts, icon")},Je.a.ADD_GROUP),tooltip:{label:w}}),o.a.createElement(so.a,{key:"menu_item_divider[invite-meeting-1]"}),o.a.createElement(ol.a,{key:"edit",itemProps:{id:"meeting-menu-action-edit"},enabled:v,data:e,onClick:function(){c(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Edit, icon")},Je.a.EDIT),primaryText:t._("Edit")}),o.a.createElement(ol.a,{key:"cancel",itemProps:{id:"meeting-menu-action-cancel"},enabled:h,data:e,onClick:function(){u(e)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Cancel, icon")},Je.a.CANCEL),primaryText:t._("Cancel")})];return S=g.a.compact(S),o.a.createElement(nH.a,{key:l,menuItems:S})}}]}},{key:"render",value:function(){var e=this.props.meetings;return o.a.createElement(Zt.c,{columns:this.getColumns(),listAccessor:"dbId",id:"educator-scheduled-meetings-table",hasMobileListView:!1,data:e,onListRowSelect:function(){},defaultSort:{accessor:"scheduledAt",direction:"asc"},fallbackSort:{accessor:"title",direction:"asc"}})}}])&&$X(n.prototype,r),a&&$X(n,a),t}(a.Component),r$=Object(x.withI18n)()(n$);function a$(e){return(a$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i$(e,t){return!t||"object"!==a$(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c$(e){return(c$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s$(e,t){return(s$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i$(this,c$(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s$(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.onCreateMeeting,a=e.isLoading,i=e.hasError,c=e.scheduledMeetings,s=e.recordedMeetings,u=e.previewMedia,l=e.viewAttendance,d=e.openInviteSettings,f=e.openCohortSettings,p=e.onEditMeeting,m=e.onLaunchMeeting,b=e.onCancelMeeting,y=e.reloadData,v=e.onProcessedMeetingDelete,h=e.isMeetingCohortingAllowed;return a?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(z.a,{title:t._("Meetings")},o.a.createElement(iA,{classId:n,context:VO.a.MEETINGS}),i&&o.a.createElement(EH,{reloadData:y,buttonTitle:t._("Try again"),message:t._("Failed to load meetings data")}),!i&&o.a.createElement(un.a,null,o.a.createElement("h3",null,t._("Active Meetings")),!!c.length&&o.a.createElement(r$,{classId:n,isMeetingCohortingAllowed:h,meetings:c,openInviteSettings:d,openCohortSettings:f,onEditMeeting:p,onCancelMeeting:b,onLaunchMeeting:m}),!c.length&&o.a.createElement("p",null,t._("No active meetings yet"))),!i&&o.a.createElement(un.a,null,o.a.createElement("h3",null,t._("Recorded Meetings")),!!s.length&&o.a.createElement(KX,{classId:n,meetings:s,previewMedia:u,viewAttendance:l,onProcessedMeetingDelete:v}),!s.length&&o.a.createElement("p",null,t._("No recorded meetings yet"))),!i&&o.a.createElement(MH.a,{id:"speed-dial-meeting-list"},o.a.createElement(xH.a,{iconClassName:vr.a.CALENDAR,id:"speed-dial-item-meeting-create",onClick:r,ariaLabel:t._("Schedule meeting"),tooltip:{label:t._("Schedule meeting")}})),this.props.children)}}])&&o$(n.prototype,r),a&&o$(n,a),t}(a.Component);u$.propTypes={i18n:M.a.object,classId:M.a.number,onCreateMeeting:M.a.func,isLoading:M.a.bool,hasError:M.a.bool,scheduledMeetings:M.a.array,recordedMeetings:M.a.array,previewMedia:M.a.func,viewAttendance:M.a.func,openInviteSettings:M.a.func,onEditMeeting:M.a.func,onLaunchMeeting:M.a.func,onCancelMeeting:M.a.func,reloadData:M.a.func,onProcessedMeetingDelete:M.a.func,children:M.a.node};var l$=Object(x.withI18n)()(u$),d$=n("x1nL");function f$(){var e=E$(["\n    mutation editCohortingForTermClassMeeting($input: EditCohortingForTermClassMeetingInput!){\n        editCohortingForTermClassMeeting(input: $input) {\n            meeting {\n                ...Meeting\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n    ","\n"]);return f$=function(){return e},e}function p$(){var e=E$(["\n    mutation manageParticipantsForTermClassMeeting($input: ManageParticipantsForTermClassMeetingInput!) {\n        manageParticipantsForTermClassMeeting(input:$input) {\n            meeting {\n                ...Meeting\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n    ","\n"]);return p$=function(){return e},e}function m$(){var e=E$(["\n    mutation syncRosterForTermClass($input: SyncRosterForTermClassInput!) {\n        syncRosterForTermClass(input:$input) {\n            unmappedRoleUsersCount\n            termClass {\n                students {\n                    dbId\n                    firstName\n                    lastName\n                    roles\n                }\n                educators {\n                    dbId\n                    firstName\n                    lastName\n                    roles\n                }\n            }\n            errors {\n              path\n              message\n            }\n        }\n    }\n"]);return m$=function(){return e},e}function b$(){var e=E$(["\n    mutation cancelTermClassMeeting($input: CancelTermClassMeetingInput!){\n        cancelTermClassMeeting(input: $input) {\n            meeting {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return b$=function(){return e},e}function y$(){var e=E$(["\n    query getUsers($dbId: Int!){\n        termClass(dbId: $dbId) {\n            dbId\n            isRosterSyncAvailable\n            institution {\n                externalTrackingUuid\n                integrationType\n                trialExpireAt\n                featureToggles {\n                    isLegacyFreemium\n                }\n            }\n            students {\n                dbId\n                firstName\n                lastName\n                roles\n            }\n            educators {\n                dbId\n                firstName\n                lastName\n                roles\n            }\n            isCohortManagementAllowed\n            cohortableD2lCourses {\n                ...D2lCourse\n            }\n            meetings {\n                ...Meeting\n            }\n        }\n    }\n    ","\n    ","\n"]);return y$=function(){return e},e}function v$(){var e=E$(["\nquery getMeetingParticipants($termClassId: Int!, $meetingId: Int!) {\n  termClass(dbId: $termClassId) {\n    meeting(dbId: $meetingId) {\n      participants {\n        dbId\n        firstName\n        lastName\n        roles\n      }\n    }\n  }\n}\n"]);return v$=function(){return e},e}function h$(){var e=E$(["\n    fragment Meeting on TermClassMeeting {\n        dbId\n        title\n        media {\n            ...MediaFull\n        }\n        owner {\n            dbId\n            firstName\n            lastName\n            roles\n        }\n        scheduledAt\n        lobbyPageUrl\n        status\n        anonymousInvitationUrl\n        wholeClassAssigned\n        maxDuration\n        startRecordingAutomatically\n        recordingLinkEnabled\n        anonymousParticipantsAllowed\n        startedAt\n        finishedAt\n        downloadUrl\n        ownedBy {\n            # TermClass\n            dbId\n        }\n        cohorts { \n            # [TermClass]\n            dbId\n            name\n        }\n    }\n    ","\n"]);return h$=function(){return e},e}function g$(){var e=E$(["\nmutation deleteMeeting($input: DeleteRecordedTermClassMeetingInput!) {\n deleteRecordedTermClassMeeting(input: $input){\n   removedId\n }\n}\n"]);return g$=function(){return e},e}function E$(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function w$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S$,O$,C$,_$=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMeetingsAndUsers",value:function(e){return Lt.a.query({query:R$,variables:{dbId:e}}).then((function(e){return Promise.resolve(e.data.termClass)}))}},{key:"getMeetingParticipants",value:function(e,t){return Lt.a.query({query:P$,variables:{termClassId:e,meetingId:t}}).then((function(e){return Promise.resolve(e.data.termClass.meeting.participants)}))}},{key:"syncRoster",value:function(e){return Lt.a.mutate({mutation:j$,variables:{input:{dbId:e}}}).then((function(e){var t=[];e.errors&&e.errors.length&&(t=g.a.concat(t,e.errors)),e.data.syncRosterForTermClass.errors&&e.data.syncRosterForTermClass.errors.length&&(t=g.a.concat(t,e.data.syncRosterForTermClass.errors));var n=g.a.get(e,"data.syncRosterForTermClass.termClass");if(n){var r=g.a.get(e,"data.syncRosterForTermClass.unmappedRoleUsersCount");return Promise.resolve({termClass:n,unmappedRoleUsersCount:r,errors:t})}return Promise.reject(t)}))}},{key:"cancelMeeting",value:function(e){return Lt.a.mutate({mutation:A$,variables:{input:{dbId:e}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.cancelTermClassMeeting.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.cancelTermClassMeeting.meeting)}))}},{key:"changeMeetingParticipants",value:function(e,t){return Lt.a.mutate({mutation:k$,variables:{input:{dbId:e,meeting:{participants:t}}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.manageParticipantsForTermClassMeeting.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.manageParticipantsForTermClassMeeting.meeting)}))}},{key:"setMeetingCohorts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Lt.a.mutate({mutation:N$,variables:{input:{dbId:e,d2lCoursesToCohort:t}}}).then((function(e){try{return Promise.resolve(e.data.editCohortingForTermClassMeeting.meeting)}catch(n){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.editCohortingForTermClassMeeting.errors;if(t&&t.length)return Promise.reject(t)}}))}}],(n=null)&&w$(t.prototype,n),r&&w$(t,r),e}();C$=function(e,t){return new Promise((function(n,r){Lt.a.mutate({mutation:T$,variables:{input:{dbId:e,termClassDbId:t}}}).then((function(e){if(e&&e.data){var t=e.data.deleteRecordedTermClassMeeting.removedId;n(t)}else r(e)})).catch((function(e){r(e)}))}))},(O$="deleteMeeting")in(S$=_$)?Object.defineProperty(S$,O$,{value:C$,enumerable:!0,configurable:!0,writable:!0}):S$[O$]=C$;var T$=xt()(g$()),I$=xt()(h$(),G_.d),P$=xt()(v$()),R$=xt()(y$(),d$.a,I$),A$=xt()(b$()),j$=xt()(m$()),k$=xt()(p$(),I$),N$=xt()(f$(),I$),D$=n("BJep"),L$=n("Goub"),M$=n("NQgo");n("rchA");function x$(e){return(x$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V$(e,t){return!t||"object"!==x$(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G$(e){return(G$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U$(e,t){return(U$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V$(this,G$(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U$(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.user,n=e.onClick,r=e.showAvatar,a=t.firstName+" "+t.lastName;return o.a.createElement(ol.a,{onClick:function(){n(t)},primaryText:a,className:"list-item-user",leftAvatar:r?o.a.createElement(M$.a,{value:a}):null})}}])&&F$(n.prototype,r),a&&F$(n,a),t}(a.Component),W$=n("T0hT");n("djeZ");function B$(e){return(B$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y$(e){return(Y$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H$(e,t){return(H$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X$="c-meeting-invite-dialog__invite-section",$$="c-meeting-invite-dialog__invite-sections-holder",Z$=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=Y$(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==B$(a)&&"function"!==typeof a?z$(r):a,K$(z$(z$(n)),"getParticipantsListComponent",(function(e){var t=n.props,r=t.i18n,a=t.students,i=t.educators,c=t.addParticipant,s=t.removeParticipant,u=t.allowEducators,l=t.participants;a=a.filter((function(e){return-1===g.a.findIndex(l,{dbId:e.dbId})})),i=i.filter((function(e){return-1===g.a.findIndex(l,{dbId:e.dbId})}));var d=l.filter((function(e){return ar.f(e)})),f=l.filter((function(e){return ar.b(e)}));return o.a.createElement("div",{className:$$},o.a.createElement("div",{className:X$},o.a.createElement("h5",null,o.a.createElement(x.Trans,{id:"Available"})),o.a.createElement(D$.a,null,o.a.createElement(L$.a,{primaryText:u?r._("Students"):r._("All")}),a.map((function(t){return o.a.createElement(q$,{user:t,showAvatar:!e,key:t.dbId,onClick:c})})),u&&o.a.createElement(L$.a,{primaryText:r._("Educators")}),u&&i.map((function(t){return o.a.createElement(q$,{user:t,showAvatar:!e,key:t.dbId,onClick:c})})))),o.a.createElement("div",{className:X$},o.a.createElement("h5",null,o.a.createElement(x.Trans,{id:"Invited"})),o.a.createElement(D$.a,null,o.a.createElement(L$.a,{primaryText:u?r._("Students"):r._("All")}),d.map((function(t){return o.a.createElement(q$,{key:t.dbId,showAvatar:!e,user:t,onClick:s})})),u&&o.a.createElement(L$.a,{primaryText:r._("Educators")}),u&&f.map((function(t){return o.a.createElement(q$,{key:t.dbId,showAvatar:!e,user:t,onClick:s})})))))})),K$(z$(z$(n)),"renderUnsyncedUsersMessage",(function(){var e=n.props,t=e.i18n,r=e.unsyncedUsersCount;if(!r)return null;var a=t._({id:"{unsyncedUsersCount, plural, one {{unsyncedUsersCount} user was not synchronized because they are assigned an unsupported role.} other {{unsyncedUsersCount} users were not synchronized because they are assigned an unsupported role.}}",values:{unsyncedUsersCount:r}});return o.a.createElement(ya.b,{className:"meeting-invite-sync-warning-message",type:ya.a.WARNING,message:a,contentInheritsStatusColor:!0})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H$(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=e.onSave,a=e.showSyncRoster,i=e.onSyncRoster,c=e.onCancel,s=e.rosterIsLoading,u=e.hasSyncRosterError,l=e.errors,d=e.participantsIsLoading,f=e.syncRosterErrors,p=g.a.compact([a&&o.a.createElement(Ue.a,{id:"button-meeting-invite-dialog-sync",key:"sync-roster",isLoading:s,enabled:!s&&!n,primary:!0,ariaLabel:t._("Sync Roster"),onClick:i},o.a.createElement(x.Trans,{id:"Sync Roster"})),o.a.createElement(Ue.a,{id:"button-meeting-invite-dialog-save",key:"save",isLoading:n,enabled:!s&&!n,primary:!0,ariaLabel:t._("Confirm"),onClick:r},o.a.createElement(x.Trans,{id:"Save"}))]),m=t._("Manage Meeting Invites"),b=d?[]:p;return o.a.createElement(gc.a,{id:"meeting-invite-settings",title:m,dialogClassName:Ie()("c-meeting-invite-dialog"),onHide:c,footerActions:b},!d&&o.a.createElement(o.a.Fragment,null,u&&0===f.length&&o.a.createElement("p",{className:"u-error"},t._("Error of roster sync. Please try again.")),u&&0!==f.length&&o.a.createElement("ul",null,f.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},e)}))),o.a.createElement("ul",null,l.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},e)}))),o.a.createElement(Gr.a,{query:"(max-width: 550px)"},this.getParticipantsListComponent(!0)),o.a.createElement(Gr.a,{query:"(min-width: 551px)"},this.getParticipantsListComponent(!1)),this.renderUnsyncedUsersMessage()),d&&o.a.createElement(W$.a,{id:"meeting-participants-loader"}))}}])&&Q$(n.prototype,r),a&&Q$(n,a),t}(a.Component),J$=Object(x.withI18n)()(Z$);function eZ(e){return(eZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tZ(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nZ(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function rZ(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){nZ(o,r,a,i,c,"next",e)}function c(e){nZ(o,r,a,i,c,"throw",e)}i(void 0)}))}}function aZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oZ(e){return(oZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iZ(e,t){return(iZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uZ=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=oZ(t).call(this,e),n=!a||"object"!==eZ(a)&&"function"!==typeof a?cZ(r):a,sZ(cZ(cZ(n)),"loadParticipants",rZ(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({participantsIsLoading:!0}),e.next=4,_$.getMeetingParticipants(n.props.classId,n.props.meetingId);case 4:t=e.sent,n.setState({participants:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H.b.error(e.t0);case 11:return e.prev=11,n.setState({participantsIsLoading:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})))),sZ(cZ(cZ(n)),"addParticipant",(function(e){var t=[].concat(tZ(n.state.participants),[e]);n.setState({participants:t})})),sZ(cZ(cZ(n)),"removeParticipant",(function(e){var t=n.state.participants.filter((function(t){return t.dbId!==e.dbId}));n.setState({participants:t})})),sZ(cZ(cZ(n)),"onSave",(function(){n.props.onSave(n.state.participants.map((function(e){return e.dbId})))})),n.state={participants:[],participantsIsLoading:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iZ(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.loadParticipants().catch()}},{key:"render",value:function(){var e=this.props,t=e.students,n=e.educators,r=e.allowEducators,a=e.showSyncRoster,i=e.onSyncRoster,c=e.isLoading,s=e.onCancel,u=e.rosterIsLoading,l=e.hasSyncRosterError,d=e.errors,f=e.syncRosterErrors,p=e.unsyncedUsersCount,m=this.state,b=m.participants,y=m.participantsIsLoading;return o.a.createElement(J$,{onSave:this.onSave,participantsIsLoading:y,addParticipant:this.addParticipant,removeParticipant:this.removeParticipant,onCancel:s,onSyncRoster:i,isLoading:c,rosterIsLoading:u,showSyncRoster:a,hasSyncRosterError:l,errors:d,students:t,educators:n,syncRosterErrors:f,unsyncedUsersCount:p,allowEducators:r,participants:b})}}])&&aZ(n.prototype,r),a&&aZ(n,a),t}(a.Component);uZ.defaultProps={participants:[]},uZ.propTypes={participants:M.a.array};var lZ=uZ;n("aFXm");function dZ(e){return(dZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vZ(e,t,n[t])}))}return e}function pZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mZ(e){return(mZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bZ(e,t){return(bZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hZ=["name","code"],gZ="COHORT_COMPLETE",EZ="COHORT_PENDING_ADD",wZ="COHORT_PENDING_REMOVE",SZ="COHORT_NONE",OZ={courses:[],isDirty:!1},CZ=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=mZ(t).call(this,e),n=!a||"object"!==dZ(a)&&"function"!==typeof a?yZ(r):a,vZ(yZ(yZ(n)),"processProps",(function(e){var t=g.a.orderBy(e.cohortableD2lCourses,hZ);return{courses:t=g.a.map(t,(function(t){return n.isCourseCohorted(e.meeting.cohorts,t)?fZ({},t,{status:gZ}):fZ({},t,{status:SZ})}))}})),vZ(yZ(yZ(n)),"isCourseCohorted",(function(e,t){return g.a.findIndex(e,(function(e){return e.dbId===t.termClassDbId}))>=0})),vZ(yZ(yZ(n)),"addCourse",(function(e){var t=n.props.meeting,r=n.state.courses,a=EZ;n.isCourseCohorted(t.cohorts,e)&&(a=gZ);var o=fZ({},e,{status:a}),i=n.replaceCourse(r,e,o);n.setState({courses:i,isDirty:!0})})),vZ(yZ(yZ(n)),"removeCourse",(function(e){var t=n.props.meeting,r=n.state.courses,a=wZ;n.isCourseCohorted(t.cohorts,e)||(a=SZ);var o=fZ({},e,{status:a}),i=n.replaceCourse(r,e,o);n.setState({courses:i,isDirty:!0})})),vZ(yZ(yZ(n)),"replaceCourse",(function(e,t,n){return g.a.map(e,(function(e){return e===t?n:e}))})),vZ(yZ(yZ(n)),"getStatusLabel",(function(e){var t=n.props.i18n;switch(e){case gZ:return t._("Invited");case EZ:return t._("Pending Invite");case wZ:return t._("Pending Uninvite");case SZ:default:return t._("Not Invited")}})),vZ(yZ(yZ(n)),"getStatusAction",(function(e){var t=n.props,r=t.i18n,a=t.isLoading;switch(e.status){case gZ:case EZ:return o.a.createElement(Ue.c,{id:"button-cohort-uninvite-course",ariaLabel:r._("Uninvite entire course, icon"),className:Ie()("meeting-cohort-action-icon","meeting-cohort-action-icon--remove"),enabled:!a,onClick:function(){n.removeCourse(e)},tooltip:{label:r._("Uninvite entire course")}},Je.a.REMOVE);case wZ:case SZ:default:return o.a.createElement(Ue.c,{id:"button-cohort-invite-course",ariaLabel:r._("Invite entire course, icon"),className:Ie()("meeting-cohort-action-icon","meeting-cohort-action-icon--add"),enabled:!a,onClick:function(){n.addCourse(e)},tooltip:{label:r._("Invite entire course")}},Je.a.ADD)}})),vZ(yZ(yZ(n)),"actionsRenderer",(function(e){return o.a.createElement("div",{className:"meeting-cohort-actions-container"},n.getStatusAction(e))})),vZ(yZ(yZ(n)),"statusRenderer",(function(e){var t=e.status;return o.a.createElement("div",{className:"meeting-cohort-status-container"},n.getStatusLabel(t))})),vZ(yZ(yZ(n)),"onSave",(function(){var e=n.props,t=e.meeting,r=e.onSave,a=n.state.courses,o=g.a.map(a,(function(e){switch(e.status){case gZ:case EZ:return e;case wZ:case SZ:default:return null}}));r(t,o=g.a.compact(o))})),vZ(yZ(yZ(n)),"onCancel",(function(){(0,n.props.onCancel)()})),vZ(yZ(yZ(n)),"getMeetingInfo",(function(){var e=n.props.meeting,t=e.title,r=e.scheduledAt;return o.a.createElement("div",{className:"meeting-cohort-info-container"},o.a.createElement("h3",{className:"meeting-cohort-title"},t),o.a.createElement("p",null,o.a.createElement(Qe.b,{unixTime:r})))})),vZ(yZ(yZ(n)),"getMessage",(function(){var e=n.props.i18n,t=n.state.courses,r=null,a=!1;return t&&t.length>0?r=e._("Courses available for inviting are listed below. It is not recommended to exceed 150 participants for a single meeting."):(r=e._("There are no courses available to invite."),a=!0),o.a.createElement("div",{className:Ie()("meeting-cohort-message-container",{"meeting-cohort-message-container--centered":a})},o.a.createElement(ya.b,{className:"meeting-cohort-message",type:ya.a.INFO,message:r,contentInheritsStatusColor:!1}))})),vZ(yZ(yZ(n)),"getErrors",(function(){var e=n.props.errors;if(e&&e.length>0)return o.a.createElement("div",{className:"meeting-cohort-errors-container"},g.a.map(e,(function(e,t){return o.a.createElement(ya.b,{key:"meeting-cohort-error["+t+"]",className:"meeting-cohort-error-message",type:ya.a.ERROR,message:e,contentInheritsStatusColor:!0})})))})),vZ(yZ(yZ(n)),"getCourses",(function(){var e=n.props.i18n,t=n.state.courses;if(t&&t.length>0)return o.a.createElement("div",{className:"meeting-cohort-table-container"},o.a.createElement(Zt.b,{className:"meeting-cohort-table",columns:n.getColumns(),listAccessor:"name",hasMobileListView:!1,data:t,tableSummary:e._("Inside a table, a list of courses, ready to be invited"),defaultSort:{accessor:hZ,direction:"asc"},fallbackSort:{accessor:"lmsCode",direction:"asc"}}))})),n.state=fZ({},OZ,n.processProps(e)),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bZ(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.isDirty||this.setState(this.processProps(e))}},{key:"getColumns",value:function(){var e=this.props.i18n;return[{key:"actions",sortable:!1,headerClassName:Ie()("meeting-cohort-column-header","meeting-cohort-column-header--centered"),className:Ie()("meeting-cohort-column","meeting-cohort-column--centered"),renderer:this.actionsRenderer},{label:e._("Name"),sortable:!0,accessor:hZ,grow:!0,headerClassName:Ie()("meeting-cohort-column-header"),className:Ie()("meeting-cohort-column"),renderer:function(e){return o.a.createElement("span",null,e.name)}},{label:e._("Course Code"),sortable:!0,accessor:"code",headerClassName:Ie()("meeting-cohort-column-header"),className:Ie()("meeting-cohort-column"),renderer:function(e){return o.a.createElement("span",null,e.code)}},{label:e._("Status"),sortable:!1,accessor:"status",headerClassName:Ie()("meeting-cohort-column-header","meeting-cohort-column-header--centered"),className:Ie()("meeting-cohort-column","meeting-cohort-column--centered"),renderer:this.statusRenderer}]}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=this.state,a=r.courses,i=r.isDirty,c=a&&a.length>0,s=g.a.compact([o.a.createElement(Ue.a,{id:"button-meeting-cohort-dialog-cancel",key:"cancel",enabled:!n,secondary:!0,ariaLabel:t._("Cancel"),onClick:this.onCancel},t._("Cancel")),o.a.createElement(Ue.a,{id:"button-meeting-cohort-dialog-apply",key:"apply",isLoading:n,enabled:!n&&i,primary:!0,ariaLabel:t._("Apply"),onClick:this.onSave},t._("Apply"))]);return o.a.createElement(pi.a,{actions:s,id:"meeting-cohort-settings",title:t._("Manage Meeting Cohorts"),dialogClassName:Ie()("meeting-cohort-dialog",{"meeting-cohort-dialog--empty":!c}),modal:!0,visible:!0},this.getMeetingInfo(),this.getMessage(),this.getCourses(),this.getErrors())}}])&&pZ(n.prototype,r),a&&pZ(n,a),t}(a.Component);CZ.propTypes={i18n:M.a.any.isRequired,cohortableD2lCourses:M.a.array.isRequired,errors:M.a.array,isLoading:M.a.bool,meeting:M.a.any.isRequired,onSave:M.a.func.isRequired,onCancel:M.a.func.isRequired},CZ.defaultProps={isLoading:!1,errors:[]};var _Z=Object(x.withI18n)()(CZ),TZ={TITLE:"title",DATE:"date",TIME:"time",NOW:"now",MAX_DURATION:"maxDuration",START_RECORDING_AUTO:"startRecordingAutomatically",AUTO_LINK_RECORDING:"automaticLinkToRecording",ALLOW_EXTERNAL:"allowExternalParticipants",WHOLE_CLASS:"wholeClass",RECURRING:"recurring"},IZ={CREATE:"create",EDIT:"edit"};n("UPJx");function PZ(e){return(PZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AZ(e){return(AZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jZ(e,t){return(jZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var NZ=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=AZ(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==PZ(a)&&"function"!==typeof a?kZ(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kZ(kZ(n)),"getRecurringChoices",(function(){for(var e=n.props.i18n,t=[{value:0,label:e._("Does not repeat")}],r=2;r<=15;r++)t.push({value:r,label:e._("{i} weeks",{i:r})});return t})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jZ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onChange,r=e.serverErrors,a=e.isLoading,i=e.configuration,c=e.meeting,s=c.title,u=c.date,l=c.time,d=c.maxDuration,f=c.startRecordingAutomatically,p=c.automaticLinkToRecording,m=c.allowExternalParticipants,b=c.wholeClass,y=c.recurring,v=c.now,h=g.a.get(i,"infoMessage"),E=g.a.get(i,"advanced.visible"),w=g.a.get(i,"advanced.duration.options"),S=g.a.get(i,"advanced.duration.tooltipLabel"),O=g.a.get(i,"advanced.recurring.visible"),C=g.a.get(i,"showWholeClassOption"),_=t._("Meeting Date"),T=t._("Meeting Time");return v.value||(_=o.a.createElement(o.a.Fragment,null,_," ",o.a.createElement(HO,null)),T=o.a.createElement(o.a.Fragment,null,T," ",o.a.createElement(HO,null))),o.a.createElement("div",{className:"meeting-config-form-content-container"},o.a.createElement("ul",null,r.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},e)}))),o.a.createElement(ut.i,{id:"meeting-title",ariaLabel:t._("Title"),label:o.a.createElement(o.a.Fragment,null,t._("Title"),o.a.createElement(HO,null)),className:"meeting-config-input-item",onChange:function(e){n(e,TZ.TITLE)},value:s.value,enabled:!a&&!s.disabled,errorText:s.errorMessage}),o.a.createElement(ut.b,{id:"meeting-date-input",className:"meeting-config-input-item",label:_,onChange:function(e,t){n(t,TZ.DATE)},value:u.value,enabled:!a&&!u.disabled,errorText:u.errorMessage,textFieldStyle:{width:"100%"},showIcon:!1,inDialog:!0}),o.a.createElement(ut.k,{id:"meeting-time-input",className:"meeting-config-input-item",label:T,onChange:function(e,t){n(t,TZ.TIME)},value:l.value,enabled:!a&&!l.disabled,errorText:l.errorMessage,textFieldStyle:{width:"100%"},showIcon:!1,inDialog:!0}),o.a.createElement("div",{id:"checkbox-meeting-form-now"},o.a.createElement(ut.a,{id:"time-now",name:"time-now",label:t._("Now"),ariaLabel:t._("Now"),onChange:function(e){n(e,TZ.NOW)},checked:v.value,enabled:!a&&!v.disabled})),E&&o.a.createElement("div",null,o.a.createElement(ut.e,{id:"max-duration",label:t._("Max duration"),ariaLabel:t._("Max duration"),onChange:function(e){n(e,TZ.MAX_DURATION)},value:d.value,enabled:!a&&!d.disabled,menuItems:w,tooltip:{label:S,position:ff.a.BOTTOM,className:"meeting-duration-select-field"}}),o.a.createElement("div",null,O&&b.value&&o.a.createElement(ut.e,{id:"recurring",className:"meeting-config-form-recurring",label:t._("Repeat weekly for:"),ariaLabel:t._("Repeat weekly for:"),onChange:function(e){n(e,TZ.RECURRING)},value:y.value,enabled:!a&&!y.disabled,menuItems:this.getRecurringChoices()})),o.a.createElement("div",{className:"meeting-config-form-selection-options-container"},o.a.createElement("div",{id:"checkbox-meeting-form-auto-record"},o.a.createElement(ut.a,{id:"record-automatically",name:"record-automatically",ariaLabel:t._("Automatically record meeting"),label:t._("Automatically record meeting"),checked:f.value,enabled:!a&&!f.disabled,tooltip:{label:t._("Recording will automatically begin when the meeting starts. The moderator can still start/stop recording during the meeting.")},onChange:function(e){n(e,TZ.START_RECORDING_AUTO)}})),o.a.createElement("div",{id:"checkbox-meeting-form-auto-link-recording"},o.a.createElement(ut.a,{id:"automatic-link-to-recording",name:"automatic-link-to-recording",ariaLabel:t._("Publish recorded meeting"),label:t._("Publish recorded meeting"),enabled:!a&&!p.disabled,checked:p.value,tooltip:{label:t._("If the meeting is recorded, all participants will have access to the published recording (You will have access to the recording regardless of this setting).")},onChange:function(e){n(e,TZ.AUTO_LINK_RECORDING)}})),o.a.createElement("div",{id:"checkbox-meeting-form-allow-external"},o.a.createElement(ut.a,{id:"allow-external-participants",name:"allow-external-participants",label:t._("Allow external participants"),ariaLabel:t._("Allow external participants"),tooltip:{label:t._("This will generate an invite link that you can provide to external participants.")},onChange:function(e){n(e,TZ.ALLOW_EXTERNAL)},checked:m.value,enabled:!a&&!m.disabled})))),C&&o.a.createElement("div",{id:"checkbox-meeting-form-whole-class"},o.a.createElement(ut.a,{id:"whole-class",name:"whole-class",label:t._("Invite entire class"),ariaLabel:t._("Invite entire class"),tooltip:{label:t._("This will invite all class members to this meeting.")},onChange:function(e){n(e,TZ.WHOLE_CLASS)},checked:b.value,enabled:!a&&!b.disabled})),o.a.createElement(ya.b,{className:"meeting-config-form-message",type:ya.a.INFO,message:h,contentInheritsStatusColor:!0}))}}])&&RZ(n.prototype,r),a&&RZ(n,a),t}(o.a.PureComponent);NZ.defaultProps={isLoading:!0,meeting:{},onChange:function(){},serverErrors:[]},NZ.propTypes={isLoading:M.a.bool,meeting:M.a.object,onChange:M.a.func,configuration:M.a.shape({advanced:M.a.shape({visible:M.a.bool,duration:M.a.shape({options:M.a.array,tooltipLabel:M.a.string})}),infoMessage:M.a.string,showWholeClassOption:M.a.bool}).isRequired,serverErrors:M.a.array};var DZ=Object(x.withI18n)()(NZ);function LZ(e){return(LZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){UZ(e,t,n[t])}))}return e}function xZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FZ(e){return(FZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VZ(e,t){return(VZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qZ={meeting:{title:{value:"",disabled:!1,errorMessage:null},date:{value:null,disabled:!1,errorMessage:null},time:{value:null,disabled:!1,errorMessage:null},now:{value:!1,disabled:!1},maxDuration:{value:60,disabled:!1},startRecordingAutomatically:{value:!1,disabled:!1},automaticLinkToRecording:{value:!1,disabled:!1},allowExternalParticipants:{value:!1,disabled:!1},wholeClass:{value:!0,disabled:!1},recurring:{value:0,disabled:!1}}},WZ=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=FZ(t).call(this,e),n=!a||"object"!==LZ(a)&&"function"!==typeof a?GZ(r):a,UZ(GZ(GZ(n)),"onInputChange",(function(e,t){t===TZ.NOW?n.onNowChange(e):n.updatePropertyValue(t,e)})),UZ(GZ(GZ(n)),"onNowChange",(function(e){var t=n.state.meeting,r=t.now,a=t.date,o=t.time;a.disabled=e,o.disabled=e,r.value=e,n.setState({meeting:MZ({},t,{now:r,date:a,time:o})},n.onChange)})),UZ(GZ(GZ(n)),"updatePropertyValue",(function(e,t){var r=n.state.meeting,a=r[e],o={meeting:MZ({},r)};o.meeting[e]=MZ({},a,{value:t}),n.setState(o,n.onChange)})),UZ(GZ(GZ(n)),"onChange",(function(){var e=null,t=n.state.meeting;t.date.value&&t.time.value&&(e=+((e=Object(Er.b)(t.date.value,t.time.value).getTime())/1e3).toFixed(0));var r=n.validate(),a={isValid:r.valid,invalidMessage:r.invalidMessage,data:{title:t.title.value,date:t.date.value,time:t.time.value,scheduledAt:e,now:t.now.value,customMaxDuration:t.maxDuration.value,startRecordingAutomatically:t.startRecordingAutomatically.value,recordingLinkEnabled:t.automaticLinkToRecording.value,anonymousParticipantsAllowed:t.allowExternalParticipants.value,wholeClassAssigned:t.wholeClass.value,recurring:t.recurring.value}};n.props.onChange(a)})),n.state=n.mapPropsToState(e),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VZ(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.onChange()}},{key:"mapPropsToState",value:function(e){var t=e.configuration,n=g.a.merge({},qZ),r=g.a.get(t,"advanced.visible");if(!e.meeting)return r&&(n.meeting.automaticLinkToRecording.value=!0),n;var a=e.meeting,o=a.title,i=a.scheduledAt,c=a.wholeClassAssigned,s=a.maxDuration,u=a.startRecordingAutomatically,l=a.recordingLinkEnabled,d=a.anonymousParticipantsAllowed;if(o&&(n.meeting.title.value=o),i){var f=new Date(1e3*i);n.meeting.date.value=f,n.meeting.time.value=f}return g.a.isBoolean(c)&&(n.meeting.wholeClass.value=c,n.meeting.wholeClass.disabled=!0),g.a.isNumber(s)&&(n.meeting.maxDuration.value=s),g.a.isBoolean(u)&&(n.meeting.startRecordingAutomatically.value=u),g.a.isBoolean(l)&&(n.meeting.automaticLinkToRecording.value=l),g.a.isBoolean(d)&&(n.meeting.allowExternalParticipants.value=d),n}},{key:"getStateWithoutErrors",value:function(){var e=g.a.merge({},this.state);return e.meeting.title.errorMessage=null,e.meeting.date.errorMessage=null,e.meeting.time.errorMessage=null,e}},{key:"validate",value:function(){var e=this.props.i18n._("All required fields must be completed and valid before saving"),t=this.getStateWithoutErrors(),n="",r=!0;return t.meeting.title.value||(r=!1,n=e),this.state.meeting.now.value||t.meeting.date.value||(r=!1,n=e),this.state.meeting.now.value||t.meeting.time.value||(r=!1,n=e),{valid:r,invalidMessage:n}}},{key:"render",value:function(){var e=this.state.meeting,t=this.props,n=t.serverErrors,r=t.isLoading,a=t.configuration;return o.a.createElement(DZ,{configuration:a,meeting:e,isLoading:r,serverErrors:n,onChange:this.onInputChange})}}])&&xZ(n.prototype,r),a&&xZ(n,a),t}(o.a.PureComponent);WZ.defaultProps={isEditView:!1,isLoading:!0,meeting:null,onChange:function(){},serverErrors:[]},WZ.propTypes={isLoading:M.a.bool,meeting:M.a.object,configuration:M.a.shape({advanced:M.a.shape({visible:M.a.bool,duration:M.a.shape({options:M.a.array,tooltipLabel:M.a.string})}),infoMessage:M.a.string,showWholeClassOption:M.a.bool}).isRequired,serverErrors:M.a.array};var BZ=Object(x.withI18n)()(WZ);function QZ(e){return(QZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HZ(e){return(HZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zZ(e,t){return(zZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $Z=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=HZ(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==QZ(a)&&"function"!==typeof a?KZ(r):a,XZ(KZ(KZ(n)),"state",{valid:!1,invalidMessage:""}),XZ(KZ(KZ(n)),"onChange",(function(e){var t=n.props.onChange;n.setState({valid:e.isValid,invalidMessage:e.invalidMessage}),t(e)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zZ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.configuration,r=e.isLoading,a=e.meeting,i=e.onSave,c=e.onHide,s=e.serverErrors,u=e.title,l=this.state,d=l.valid,f=l.invalidMessage,p=[o.a.createElement(Ue.f,{id:"button-meeting-dialog-save",key:"button-meeting-dialog-save",tooltip:{label:f},enabled:!r&&d,isLoading:r,primary:!0,onClick:i},t._("Save"))];return o.a.createElement(gc.a,{id:"meeting-schedule",title:u,dialogClassName:"meeting-dialog",onHide:c,footerActions:p},o.a.createElement(BZ,{configuration:n,isLoading:r,meeting:a,onChange:this.onChange,serverErrors:s}))}}])&&YZ(n.prototype,r),a&&YZ(n,a),t}(o.a.PureComponent);$Z.defaultProps={isLoading:!1,meeting:null,serverErrors:[]},$Z.propTypes={configuration:M.a.object.isRequired,isLoading:M.a.bool,meeting:M.a.object,onHide:M.a.func.isRequired,onChange:M.a.func.isRequired,onSave:M.a.func.isRequired,serverErrors:M.a.array,title:M.a.string.isRequired};var ZZ=Object(x.withI18n)()($Z);function JZ(){var e=aJ(["\n  mutation editTermClassMeetingD2L($input: EditTermClassMeetingD2LInput!) {\n    editTermClassMeetingD2L(input: $input) {\n      meeting {\n        ...Meeting\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n  ","\n"]);return JZ=function(){return e},e}function eJ(){var e=aJ(["\n  mutation editTermClassMeeting($input: EditTermClassMeetingInput!) {\n    editTermClassMeeting(input: $input) {\n      meeting {\n        ...Meeting\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n  ","\n"]);return eJ=function(){return e},e}function tJ(){var e=aJ(["\n  mutation createTermClassMeetingD2L($input: CreateTermClassMeetingD2LInput!) {\n    createTermClassMeetingD2L(input: $input) {\n      meeting {\n        ...Meeting\n      }\n      recurringMeetings {\n        ...Meeting\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n  ","\n"]);return tJ=function(){return e},e}function nJ(){var e=aJ(["\n  mutation createTermClassMeeting($input: CreateTermClassMeetingInput!) {\n    createTermClassMeeting(input: $input) {\n      meeting {\n        ...Meeting\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n  ","\n"]);return nJ=function(){return e},e}function rJ(){var e=aJ(["\n  fragment Meeting on TermClassMeeting {\n    dbId\n    title\n    media {\n      ...MediaFull\n    }\n    owner {\n      dbId\n      firstName\n      lastName\n      roles\n    }\n    scheduledAt\n    lobbyPageUrl\n    status\n    anonymousInvitationUrl\n    wholeClassAssigned\n    maxDuration\n    startRecordingAutomatically\n    recordingLinkEnabled\n    anonymousParticipantsAllowed\n    startedAt\n    finishedAt\n    downloadUrl\n    ownedBy {\n      # TermClass\n      dbId\n    }\n    cohorts {\n      # [TermClass]\n      dbId\n      name\n    }\n  }\n  ","\n"]);return rJ=function(){return e},e}function aJ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function oJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var iJ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createMeeting",value:function(e,t){return Lt.a.mutate({mutation:sJ,variables:{input:{termClassDbId:e,meeting:t}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.createTermClassMeeting.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.createTermClassMeeting.meeting)}))}},{key:"createAdvancedMeeting",value:function(e,t){var n=t.scheduledAt,r=t.title,a=t.now,o=t.customMaxDuration,i=t.startRecordingAutomatically,c=t.recordingLinkEnabled,s=t.anonymousParticipantsAllowed,u=t.wholeClassAssigned,l=t.recurring;return Lt.a.mutate({mutation:uJ,variables:{input:{termClassDbId:e,meeting:{scheduledAt:n,title:r,now:a,customMaxDuration:o,startRecordingAutomatically:i,recordingLinkEnabled:c,anonymousParticipantsAllowed:s,wholeClassAssigned:u,recurring:l}}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.createTermClassMeetingD2L.errors;return t&&t.length?Promise.reject(t):Promise.resolve({meeting:e.data.createTermClassMeetingD2L.meeting,recurringMeetings:e.data.createTermClassMeetingD2L.recurringMeetings})}))}},{key:"editMeeting",value:function(e,t){var n=t.scheduledAt,r=t.title,a=t.now;return Lt.a.mutate({mutation:lJ,variables:{input:{dbId:e,meeting:{scheduledAt:n,title:r,now:a}}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.editTermClassMeeting.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.editTermClassMeeting.meeting)}))}},{key:"editAdvancedMeeting",value:function(e,t){var n=t.scheduledAt,r=t.title,a=t.now,o=t.customMaxDuration,i=t.startRecordingAutomatically,c=t.recordingLinkEnabled,s=t.anonymousParticipantsAllowed;return Lt.a.mutate({mutation:dJ,variables:{input:{dbId:e,meeting:{scheduledAt:n,title:r,now:a,customMaxDuration:o,startRecordingAutomatically:i,recordingLinkEnabled:c,anonymousParticipantsAllowed:s}}}}).then((function(e){if(e.errors&&e.errors.length)return Promise.reject(e.errors);var t=e.data.editTermClassMeetingD2L.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.editTermClassMeetingD2L.meeting)}))}}],(n=null)&&oJ(t.prototype,n),r&&oJ(t,r),e}(),cJ=xt()(rJ(),G_.d),sJ=xt()(nJ(),cJ),uJ=xt()(tJ(),cJ),lJ=xt()(eJ(),cJ),dJ=xt()(JZ(),cJ),fJ={ACCESS_DENIED:"CaseStudyFoundationBundle.access_denied"};function pJ(e){return(pJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mJ(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function bJ(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){mJ(o,r,a,i,c,"next",e)}function c(e){mJ(o,r,a,i,c,"throw",e)}i(void 0)}))}}function yJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){wJ(e,t,n[t])}))}return e}function vJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hJ(e){return(hJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gJ(e,t){return(gJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SJ=150,OJ=50,CJ=100,_J=[15,30,60,75,90,120,180,240],TJ=60,IJ=90,PJ=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=hJ(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==pJ(a)&&"function"!==typeof a?EJ(r):a,wJ(EJ(EJ(n)),"state",{isLoading:!1,serverErrors:[],mode:IZ.CREATE}),wJ(EJ(EJ(n)),"onHide",(function(){Hn.a.closeModal()})),wJ(EJ(EJ(n)),"onChange",(function(e){n.formData=e})),wJ(EJ(EJ(n)),"getBasicMeetingPayload",(function(){var e=n.state.wholeClassOptionAvailable,t=n.formData.data,r={scheduledAt:t.scheduledAt,title:t.title,now:t.now};return e&&(r.wholeClassAssigned=n.formData.data.wholeClassAssigned),r})),wJ(EJ(EJ(n)),"getAdvancedMeetingPayload",(function(){var e=n.formData.data,t=e.customMaxDuration,r=e.startRecordingAutomatically,a=e.recordingLinkEnabled,o=e.anonymousParticipantsAllowed,i=e.wholeClassAssigned,c=e.recurring;return yJ({},n.getBasicMeetingPayload(),{customMaxDuration:t,startRecordingAutomatically:r,recordingLinkEnabled:a,anonymousParticipantsAllowed:o,wholeClassAssigned:i,recurring:c})})),wJ(EJ(EJ(n)),"onSave",(function(){var e=n.state.mode;switch(n.setState({serverErrors:[],isLoading:!0}),e){case IZ.CREATE:n.createMeeting();break;case IZ.EDIT:n.editMeeting();break;default:throw new Error("Unknown meeting mode")}})),wJ(EJ(EJ(n)),"getServerErrors",(function(e){var t=n.props.i18n,r=[t._("Error during save of meeting")];try{r=xl(e,fJ.ACCESS_DENIED)?[t._("Something went wrong editing this meeting. This can occur if the meeting has already started.")]:g.a.values(Ll(e))}catch(a){H.b.error(a)}return r})),wJ(EJ(EJ(n)),"createMeeting",bJ(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.onSuccess,a=t.termClass,o=n.state.isAdvanced,e.prev=2,!o){e.next=12;break}return e.next=6,iJ.createAdvancedMeeting(a.dbId,n.getAdvancedMeetingPayload());case 6:i=e.sent,c=i.meeting,s=i.recurringMeetings,r(c,s),e.next=16;break;case 12:return e.next=14,iJ.createMeeting(a.dbId,n.getBasicMeetingPayload());case 14:u=e.sent,r(u);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),n.setState({serverErrors:n.getServerErrors(e.t0),isLoading:!1});case 21:case"end":return e.stop()}}),e,this,[[2,18]])})))),wJ(EJ(EJ(n)),"editMeeting",bJ(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.isAdvanced,r=n.props,a=r.onSuccess,o=r.meeting.dbId,e.prev=2,!t){e.next=10;break}return e.next=6,iJ.editAdvancedMeeting(o,n.getAdvancedMeetingPayload());case 6:i=e.sent,a(i),e.next=14;break;case 10:return e.next=12,iJ.editMeeting(o,n.getBasicMeetingPayload());case 12:c=e.sent,a(c);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n.setState({serverErrors:n.getServerErrors(e.t0),isLoading:!1});case 19:case"end":return e.stop()}}),e,this,[[2,16]])})))),wJ(EJ(EJ(n)),"getDurationConfiguration",(function(){var e=n.props,t=e.i18n,r=e.isD2LFreemium,a=e.isD2LLegacyFreemium,o=Number.POSITIVE_INFINITY;r&&(o=TJ),a&&(o=IJ);var i=_J.map((function(e){return{key:"meeting-duration-option[".concat(e,"]"),label:e,value:e,disabled:e>o}})),c="";return r&&(c=t._("Some meeting durations are only available in the Premium version")),{options:i,tooltipLabel:c}})),wJ(EJ(EJ(n)),"getInfoMessage",(function(){var e=n.props,t=e.i18n,r=e.isD2L,a=e.isD2LPremium,o=e.isD2LLegacyFreemium;if(r){var i=a?SJ:OJ;return o&&(i=CJ),t._("Please note that maximum possible amount of users in this meeting is {maximumUsersCount}",{maximumUsersCount:i})}return""})),wJ(EJ(EJ(n)),"getMeetingConfiguration",(function(){var e=n.state,t=e.isAdvanced,r=e.mode,a=e.wholeClassOptionAvailable;return{advanced:{visible:t,duration:yJ({},n.getDurationConfiguration()),recurring:{visible:r===IZ.CREATE}},infoMessage:n.getInfoMessage(),showWholeClassOption:a}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gJ(e,t)}(t,e),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.isD2L,r=e.isPlainLti;return{isAdvanced:n,wholeClassOptionAvailable:n||r,mode:g.a.get(e.meeting,"dbId",null)?IZ.EDIT:IZ.CREATE}}}],(r=[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.mode,r=e.serverErrors,a=this.props,i=a.i18n,c=a.meeting;return o.a.createElement(ZZ,{configuration:this.getMeetingConfiguration(),isLoading:t,meeting:c,onHide:this.onHide,onChange:this.onChange,onSave:this.onSave,serverErrors:r,title:n===IZ.CREATE?i._("Schedule Meeting"):i._("Edit Meeting")})}}])&&vJ(n.prototype,r),a&&vJ(n,a),t}(o.a.PureComponent);PJ.defaultProps={meeting:null,onSuccess:function(){}},PJ.propTypes={meeting:M.a.object,onSuccess:M.a.func};var RJ=Object(x.withI18n)()(Object(c.b)((function(e){return{isD2L:bb.r(e),isD2LFreemium:bb.s(e),isD2LPremium:bb.u(e),isD2LLegacyFreemium:bb.t(e),isPlainLti:bb.w(e),termClass:bb.k(e)}}))(PJ));function AJ(e){return(AJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kJ(e,t){return!t||"object"!==AJ(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NJ(e){return(NJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DJ(e,t){return(DJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LJ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kJ(this,NJ(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DJ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=e.onConfirm,a=e.errors,i=[o.a.createElement(Ue.a,{id:"button-meeting-cancel-dialog-no",key:"cancel-meeting-dialog-no",enabled:!n,secondary:!0,ariaLabel:t._("No"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"No"})),o.a.createElement(Ue.a,{id:"button-meeting-cancel-dialog-yes",key:"cancel-meeting-dialog-yes",isLoading:n,primary:!0,ariaLabel:t._("Yes, Cancel Meeting"),onClick:r},o.a.createElement(x.Trans,{id:"Yes, Cancel Meeting"}))];return o.a.createElement(pi.a,{actions:i,id:"meeting-cancel",title:t._("Confirm Meeting Cancel"),modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement("ul",null,a.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},e)}))),o.a.createElement("p",null,t._("Are you sure you want to cancel this meeting?"))))}}])&&jJ(n.prototype,r),a&&jJ(n,a),t}(a.Component),MJ=Object(x.withI18n)()(LJ);function xJ(e){return(xJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FJ(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function VJ(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){FJ(o,r,a,i,c,"next",e)}function c(e){FJ(o,r,a,i,c,"throw",e)}i(void 0)}))}}function GJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UJ(e){return(UJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qJ(e,t){return(qJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QJ=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=UJ(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==xJ(a)&&"function"!==typeof a?WJ(r):a,BJ(WJ(WJ(n)),"state",{errors:[],isLoading:!1}),BJ(WJ(WJ(n)),"cancelMeeting",VJ(regeneratorRuntime.mark((function e(){var t,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.i18n,a=t.meeting,o=t.onSuccess,n.setState({errors:[],isLoading:!0}),e.prev=2,e.next=5,_$.cancelMeeting(a.dbId);case 5:o(a),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),i=[];try{i=xl(e.t0,fJ.ACCESS_DENIED)?[r._("Something went wrong editing this meeting. This can occur if the meeting has already started.")]:g.a.values(Ll(e.t0))}catch(c){i=[r._("Error during edit of meeting")]}n.setState({errors:i,isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[2,8]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qJ(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.errors;return o.a.createElement(MJ,{isLoading:t,errors:n,onConfirm:this.cancelMeeting})}}])&&GJ(n.prototype,r),a&&GJ(n,a),t}(a.Component),YJ=Object(x.withI18n)()(QJ);function HJ(e){return(HJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KJ(e,t){return!t||"object"!==HJ(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XJ(e){return(XJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $J(e,t){return($J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZJ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KJ(this,XJ(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$J(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=e.onConfirm,a=e.errors,i=[o.a.createElement(Ue.a,{id:"button-meeting-delete-dialog-no",key:"delete-meeting-dialog-no",enabled:!n,secondary:!0,ariaLabel:t._("No"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"No"})),o.a.createElement(Ue.a,{id:"button-meeting-delete-dialog-yes",key:"delete-meeting-dialog-yes",isLoading:n,primary:!0,ariaLabel:t._("Delete"),onClick:r},o.a.createElement(x.Trans,{id:"Yes, Delete Meeting"}))];return o.a.createElement(pi.a,{actions:i,id:"meeting-delete",title:t._("Confirm Recorded Meeting Delete"),modal:!0,visible:!0},o.a.createElement("div",null,o.a.createElement("ul",null,a.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},e)}))),o.a.createElement("p",null,t._("Are you sure you want to delete this recorded meeting?"))))}}])&&zJ(n.prototype,r),a&&zJ(n,a),t}(a.Component),JJ=Object(x.withI18n)()(ZJ);function e0(e){return(e0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t0(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function n0(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){t0(o,r,a,i,c,"next",e)}function c(e){t0(o,r,a,i,c,"throw",e)}i(void 0)}))}}function r0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a0(e){return(a0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o0(e,t){return(o0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s0=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=a0(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==e0(a)&&"function"!==typeof a?i0(r):a,c0(i0(i0(n)),"state",{errors:[],isLoading:!1}),c0(i0(i0(n)),"deleteMeeting",n0(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.i18n,a=t.meeting,o=t.onSuccess,i=t.classId,n.setState({errors:[],isLoading:!0}),e.prev=2,e.next=5,_$.deleteMeeting(a.dbId,i);case 5:o(a),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),c=[];try{c=g.a.values(Ll(e.t0))}catch(u){s=r._("Failed to delete recorded meeting"),c=[s],yc.a.addError(s)}n.setState({errors:c,isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[2,8]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o0(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.errors;return o.a.createElement(JJ,{isLoading:t,errors:n,onConfirm:this.deleteMeeting})}}])&&r0(n.prototype,r),a&&r0(n,a),t}(a.Component),u0=Object(x.withI18n)()(s0),l0=function(e){return o.a.createElement("span",null,e.label)};l0.propTypes={label:M.a.string.isRequired,tooltip:M.a.shape({label:M.a.string.isRequired,distance:M.a.number})};var d0=Object(Ec.c)(l0);n("k709");function f0(e){return(f0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m0(e){return(m0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b0(e,t){return(b0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h0=["name","id"],g0=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=m0(t).call(this,e),n=!a||"object"!==f0(a)&&"function"!==typeof a?y0(r):a,v0(y0(y0(n)),"onSearchClear",(function(){n.setState({searchValue:null,filteredAttendanceData:n.state.attendanceData})})),v0(y0(y0(n)),"onSearchChange",(function(e){var t=n.state.attendanceData.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}));n.setState({searchValue:e,filteredAttendanceData:t})})),v0(y0(y0(n)),"getSearchInput",(function(){var e=n.props.i18n,t=n.state.searchValue,r=o.a.createElement(Uf.a,{ariaLabel:e._("Search icon")},Je.a.SEARCH);return o.a.createElement(Xt.a,{zDepth:1,className:"search-container"},o.a.createElement(ut.i,{id:"search-input",className:"search-input",inlineIndicator:n.getSearchInputClearButton(),leftIcon:r,onChange:n.onSearchChange,placeholder:e._("Search..."),value:t}))})),v0(y0(y0(n)),"getSearchInputClearButton",(function(){var e=n.props.i18n,t=n.state.searchValue;return g.a.trim(t)?o.a.createElement(Ue.c,{id:"button-meeting-attendance-search-clear",ariaLabel:e._("Clear input, icon"),className:"search-input-clear-button",onClick:n.onSearchClear},Je.a.CLOSE):null})),v0(y0(y0(n)),"renderLoading",(function(){return o.a.createElement(W$.a,{id:"attendance-loading-progress"})})),v0(y0(y0(n)),"renderReport",(function(){var e=n.props.i18n,t=n.state.filteredAttendanceData;return o.a.createElement("div",null,o.a.createElement("div",{className:"card-top-container"},n.getSearchInput()),o.a.createElement(Zt.b,{className:"data-table",columns:n.getColumns(),listAccessor:"name",hasMobileListView:!1,data:t,tableSummary:e._("Inside a table, a list of meeting attendance records"),defaultSort:{accessor:h0,direction:"asc"},fallbackSort:{accessor:"name",direction:"asc"}}))})),v0(y0(y0(n)),"renderCommunicationError",(function(){var e=n.props.i18n._("Communication error. Unable to contact Attendance Service.");return o.a.createElement("div",null,o.a.createElement(ya.b,{type:ya.a.ERROR,message:e}))})),v0(y0(y0(n)),"renderNoDataMessage",(function(){var e=n.props.i18n._("Attendance data was not collected for this meeting.");return o.a.createElement("div",null,o.a.createElement(ya.b,{type:ya.a.INFO,message:e}))})),v0(y0(y0(n)),"renderContent",(function(){var e=n.props,t=e.isLoading,r=e.isCommunicationError,a=e.participantAttendanceData;return t?n.renderLoading():r?n.renderCommunicationError():0===a.length?n.renderNoDataMessage():n.renderReport()})),n.state={searchValue:null,attendanceData:e.participantAttendanceData,filteredAttendanceData:e.participantAttendanceData},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b0(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({searchValue:null,attendanceData:e.participantAttendanceData,filteredAttendanceData:e.participantAttendanceData})}},{key:"getColumns",value:function(){var e=this.props.i18n;return[{label:e._("Name"),sortable:!0,accessor:h0,renderer:function(t){if(t.d2lOrgDefinedId){var n={label:e._("User id")+" "+t.d2lOrgDefinedId,distance:10};return o.a.createElement(d0,{label:t.name,tooltip:n})}return o.a.createElement("span",null,t.name)}},{label:e._("Role"),sortable:!1,accessor:"",renderer:function(t){var n=e._("Anonymous");return t.role&&"student"===t.role?n=e._("Student"):t.role&&"educator"===t.role&&(n=e._("Educator")),o.a.createElement("span",null,n)}},{label:e._("Minutes Attended"),sortable:!0,accessor:"minutesAttended",renderer:function(e){return o.a.createElement("span",null,e.minutesAttended)}},{label:e._("Chat Count"),sortable:!0,accessor:"chatEvents.length",renderer:function(e){return o.a.createElement("span",null,e.chatEvents.length)}}]}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onCancel,r=e.meetingName,a=this.renderContent(),i=g.a.compact([o.a.createElement(Ue.a,{key:"close",enabled:!0,secondary:!0,ariaLabel:t._("Close"),onClick:n},o.a.createElement(x.Trans,{id:"Close"}))]);return o.a.createElement(pi.a,{actions:i,id:"attendance-dialog",title:t._("Attendance for meeting: {meetingName}",{meetingName:r}),dialogClassName:"attendance-dialog",modal:!0,visible:!0},a)}}])&&p0(n.prototype,r),a&&p0(n,a),t}(a.Component);g0.propTypes={i18n:M.a.object.isRequired,meetingName:M.a.string.isRequired,isLoading:M.a.bool,isCommunicationError:M.a.bool,participantAttendanceData:M.a.arrayOf(M.a.shape({name:M.a.string.isRequired,role:M.a.string,minutesAttended:M.a.number.isRequired,d2lOrgDefinedId:M.a.string,chatEvents:M.a.array.isRequired})),onCancel:M.a.func.isRequired};var E0=Object(x.withI18n)()(g0),w0=iu.b(),S0=iu.c("meetings"),O0=Object(ou.a)(S0,w0,!1);function C0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _0(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nquery getAttendance($meetingId: Int!){\n  meetingAttendance(meetingId: $meetingId){\n    meetingId\n    attendance{\n      name\n      role\n      minutesAttended\n      d2lOrgDefinedId\n      chatEvents{\n          message\n      }\n    }\n  }\n}\n"]);return _0=function(){return e},e}var T0=xt()(_0()),I0=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getAttendance",value:function(e){return O0.query({query:T0,variables:{meetingId:e},fetchPolicy:"network-only"}).then((function(e){return e.data?Promise.resolve(e.data.meetingAttendance):Promise.resolve([])}))}}],(n=null)&&C0(t.prototype,n),r&&C0(t,r),e}();function P0(e){return(P0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A0(e,t){return!t||"object"!==P0(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j0(e){return(j0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k0(e,t){return(k0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N0=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A0(this,j0(t).call(this,e))).state={participantAttendanceData:[],isLoading:!1,isCommunicationError:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k0(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.meetingId;this.setState({isLoading:!0,isCommunicationError:!1}),I0.getAttendance(t).then((function(t){var n=[];t&&t.attendance&&(n=t.attendance),e.setState({participantAttendanceData:n,isLoading:!1})})).catch((function(n){H.b.error("Error fetching attendance for meeting ",t,n),e.setState({isCommunicationError:!0,isLoading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.meetingName,r=this.state,a=r.participantAttendanceData,i=r.isLoading,c=r.isCommunicationError;return o.a.createElement(E0,{meetingName:n,isLoading:i,isCommunicationError:c,participantAttendanceData:a,onCancel:t})}}])&&R0(n.prototype,r),a&&R0(n,a),t}(a.Component);N0.propTypes={meetingId:M.a.number,meetingName:M.a.string,onCancel:M.a.func};var D0=N0;n("BPUB");function L0(e){return(L0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M0(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x0(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function F0(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x0(o,r,a,i,c,"next",e)}function c(e){x0(o,r,a,i,c,"throw",e)}i(void 0)}))}}function V0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G0(e){return(G0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U0(e,t){return(U0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B0=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=G0(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==L0(a)&&"function"!==typeof a?q0(r):a,W0(q0(q0(n)),"state",{isLoading:!1,hasError:!1,meetingsList:[],students:[],educators:[],selectedMeeting:null,showManageCohortsDialog:!1,manageCohortsIsLoading:!1,manageCohortsErrors:[],showMeetingInviteSettings:!1,inviteSettingsIsLoading:!1,inviteSettingsRosterIsLoading:!1,inviteSettingsErrors:[],hasSyncRosterError:!1,isRosterSyncAvailable:!1,isCohortManagementAllowed:!1,cohortableD2lCourses:[],syncRosterErrors:[],unsyncedUsersCount:null}),W0(q0(q0(n)),"getMeetingList",F0(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setIsLoading(!0),n.setHasError(!1),e.prev=3,e.next=6,_$.getMeetingsAndUsers(+t);case 6:r=e.sent,a=r.students,o=r.educators,i=r.meetings,c=r.isRosterSyncAvailable,s=r.cohortableD2lCourses,u=r.isCohortManagementAllowed,n.setState({meetingsList:i}),n.setUsers(a,o),n.setState({isRosterSyncAvailable:c,cohortableD2lCourses:s,isCohortManagementAllowed:Boolean(u)}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),n.setHasError(!0);case 21:return e.prev=21,n.setIsLoading(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[3,18,21,24]])})))),W0(q0(q0(n)),"showMeetingNotification",(function(e,t){var n=o.a.createElement("div",null,o.a.createElement("div",null,e),o.a.createElement("div",{className:"meetings-page-notification-meeting-title"},t));yc.a.addSuccess(n)})),W0(q0(q0(n)),"onCreateMeeting",(function(){Hn.a.showModal(o.a.createElement(RJ,{onSuccess:n.addMeeting}))})),W0(q0(q0(n)),"addMeeting",(function(e,t){var r=[].concat(M0(n.state.meetingsList),[e],M0(t||[]));n.setState({meetingsList:r}),Hn.a.closeModal(),n.showCreatedMeetingNotification(e)})),W0(q0(q0(n)),"showCreatedMeetingNotification",(function(e){var t=n.props.i18n,r=e.title;n.showMeetingNotification(t._("Meeting created:"),r)})),W0(q0(q0(n)),"onEditMeeting",(function(e){Hn.a.showModal(o.a.createElement(RJ,{meeting:e,onSuccess:n.editMeeting}))})),W0(q0(q0(n)),"onCancelMeeting",(function(e){Hn.a.showModal(o.a.createElement(YJ,{meeting:e,onSuccess:n.removeMeeting}))})),W0(q0(q0(n)),"onProcessedMeetingDelete",(function(e){var t=n.props.match.params.classId;Hn.a.showModal(o.a.createElement(u0,{meeting:e,classId:+t,onSuccess:n.removeMeeting}))})),W0(q0(q0(n)),"removeMeeting",(function(e){H.b.debug(e);var t=M0(n.state.meetingsList);t=t.filter((function(t){return e.dbId!==t.dbId})),n.setState({meetingsList:t}),Hn.a.closeModal(),n.showCancelledMeetingNotification(e)})),W0(q0(q0(n)),"showCancelledMeetingNotification",(function(e){var t=n.props.i18n,r=e.title;n.showMeetingNotification(t._("Meeting cancelled:"),r)})),W0(q0(q0(n)),"editMeeting",(function(e){var t=M0(n.state.meetingsList);t=t.map((function(t){return e.dbId===t.dbId?e:t})),n.setState({meetingsList:t}),Hn.a.closeModal(),n.showSavedMeetingNotification(e)})),W0(q0(q0(n)),"showSavedMeetingNotification",(function(e){var t=n.props.i18n,r=e.title;n.showMeetingNotification(t._("Meeting saved:"),r)})),W0(q0(q0(n)),"openInviteSettings",(function(e){n.setState({showMeetingInviteSettings:!0,selectedMeeting:e})})),W0(q0(q0(n)),"closeInviteSettings",(function(){n.setState({showMeetingInviteSettings:!1,selectedMeeting:null,inviteSettingsIsLoading:!1,inviteSettingsRosterIsLoading:!1,inviteSettingsErrors:[],hasSyncRosterError:!1,unsyncedUsersCount:null})})),W0(q0(q0(n)),"onSyncRoster",F0(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setState({inviteSettingsRosterIsLoading:!0,hasSyncRosterError:!1,syncRosterErrors:[]}),e.prev=2,e.next=5,_$.syncRoster(+t);case 5:r=e.sent,a=r.termClass,o=r.unmappedRoleUsersCount,i=a.students,c=a.educators,n.setUsers(i,c),n.setState({unsyncedUsersCount:o}),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(2),s=[];try{s=g.a.values(Ll(e.t0))}catch(u){H.b.error(u)}H.b.info(s),n.setState({hasSyncRosterError:!0,syncRosterErrors:s});case 19:return e.prev=19,n.setState({inviteSettingsRosterIsLoading:!1}),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[2,13,19,22]])})))),W0(q0(q0(n)),"onSaveInviteSettings",function(){var e=F0(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.selectedMeeting.dbId,a=n.props.i18n,n.setState({inviteSettingsIsLoading:!0,inviteSettingsErrors:[]}),e.prev=3,e.next=6,_$.changeMeetingParticipants(r,t);case 6:o=e.sent,n.editMeeting(o),n.closeInviteSettings(),e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(3),i=[a._("Error during manage of participants")],e.t0.length)try{i=g.a.values(Ll(e.t0))}catch(c){H.b.warn(c)}n.setState({inviteSettingsErrors:i});case 16:return e.prev=16,n.setState({inviteSettingsIsLoading:!1,unsyncedUsersCount:null}),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,11,16,19]])})));return function(t){return e.apply(this,arguments)}}()),W0(q0(q0(n)),"openCohortSettings",(function(e){n.setState({showManageCohortsDialog:!0,selectedMeeting:e})})),W0(q0(q0(n)),"closeCohortSettings",(function(){n.setState({showManageCohortsDialog:!1,manageCohortsIsLoading:!1,manageCohortsErrors:[],selectedMeeting:null})})),W0(q0(q0(n)),"onCohortSettingsSave",function(){var e=F0(regeneratorRuntime.mark((function e(t,r){var a,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.i18n,e.prev=1,n.setState({manageCohortsIsLoading:!0,manageCohortsErrors:[]}),i=g.a.map(r,(function(e){return e.lmsCode})),e.next=6,_$.setMeetingCohorts(t.dbId,g.a.compact(i));case 6:c=e.sent,n.editMeeting(c),n.closeCohortSettings(),s=t.title,u=o.a.createElement("div",null,a._('Cohort settings saved for meeting "{meetingTitle}"',{meetingTitle:s})),yc.a.addSuccess(u),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),H.b.error("Unable to save cohort settings",e.t0),n.setState({manageCohortsErrors:[a._("Unable to save cohort settings.")],manageCohortsIsLoading:!1});case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()),W0(q0(q0(n)),"onCohortSettingsCancel",(function(){n.closeCohortSettings()})),W0(q0(q0(n)),"onLaunchMeeting",(function(e){window.open(e.lobbyPageUrl,"_blank")})),W0(q0(q0(n)),"previewMedia",(function(e){var t=n.props.match.params.classId;Hn.a.showModal(o.a.createElement(od.a,{media:e,termClassId:+t,usageContext:kd.a.DIRECT_LIBRARY,onCancel:Hn.a.closeModal}))})),W0(q0(q0(n)),"viewAttendance",(function(e){Hn.a.showModal(o.a.createElement(D0,{meetingId:e.dbId,meetingName:e.title,onCancel:Hn.a.closeModal}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U0(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getMeetingList()}},{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"setUsers",value:function(e,t){var n=this;t=t.filter((function(e){return e.dbId!==n.props.currentUserId})),this.setState({students:e,educators:t})}},{key:"getScheduledMeetings",value:function(){return this.state.meetingsList.filter((function(e){return e.status===lo.SCHEDULED||e.status===lo.NOT_HELD||e.status===lo.READY||e.status===lo.STARTED||e.status===lo.FINISHED&&!e.media}))}},{key:"getRecordedMeetings",value:function(){return this.state.meetingsList.filter((function(e){return e.media&&(e.status===lo.PROCESSED||e.status===lo.FINISHED)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.hasError,r=e.selectedMeeting,a=e.showMeetingInviteSettings,i=e.showManageCohortsDialog,c=e.inviteSettingsIsLoading,s=e.inviteSettingsRosterIsLoading,u=e.hasSyncRosterError,l=e.inviteSettingsErrors,d=e.cohortableD2lCourses,f=e.manageCohortsIsLoading,p=e.manageCohortsErrors,m=e.isCohortManagementAllowed,b=e.syncRosterErrors,y=this.props.match.params.classId;return o.a.createElement(l$,{classId:+y,isLoading:t,hasError:n,scheduledMeetings:this.getScheduledMeetings(),recordedMeetings:this.getRecordedMeetings(),onCancelMeeting:this.onCancelMeeting,sheduleMeeting:this.sheduleMeeting,onLaunchMeeting:this.onLaunchMeeting,reloadData:this.getMeetingList,previewMedia:this.previewMedia,viewAttendance:this.viewAttendance,onEditMeeting:this.onEditMeeting,onProcessedMeetingDelete:this.onProcessedMeetingDelete,openInviteSettings:this.openInviteSettings,openCohortSettings:this.openCohortSettings,isMeetingCohortingAllowed:gr.a.isMeetingCohortingAllowed()&&m,onCreateMeeting:this.onCreateMeeting},a&&o.a.createElement(lZ,{onSave:this.onSaveInviteSettings,classId:+y,students:this.state.students,onCancel:this.closeInviteSettings,allowEducators:!1,showSyncRoster:this.state.isRosterSyncAvailable,onSyncRoster:this.onSyncRoster,errors:l,hasSyncRosterError:u,syncRosterErrors:b,rosterIsLoading:s,isLoading:c,educators:this.state.educators,unsyncedUsersCount:this.state.unsyncedUsersCount,meetingId:r.dbId}),i&&o.a.createElement(_Z,{cohortableD2lCourses:d,errors:p,isLoading:f,meeting:r,onSave:this.onCohortSettingsSave,onCancel:this.onCohortSettingsCancel}))}}])&&V0(n.prototype,r),a&&V0(n,a),t}(a.Component);B0.propTypes={match:M.a.object};var Q0=Object(c.b)((function(e){return{currentUserId:wt.i(e)}}))(Object(x.withI18n)()(Object(s.a)(B0)));function Y0(e){return(Y0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z0(e,t){return!t||"object"!==Y0(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K0(e){return(K0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X0(e,t){return(X0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $0=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z0(this,K0(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X0(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this.props,t=e.i18n,n=e.openActivity;return[{accessor:"name",label:t._("Name"),key:"name",grow:!0,sortable:!0,renderer:function(e){return o.a.createElement("a",{onClick:function(){n(e)},"aria-label":t._("Open assignment")},e.name)}},{accessor:"submitDueAt",label:t._("Due"),key:"due",sortable:!0,renderer:function(e){return e.submitDueAt?o.a.createElement(IY.a,{value:e.submitDueAt}):o.a.createElement("span",null,"\u2014")}}]}},{key:"render",value:function(){var e=this.props.activityList;return o.a.createElement(Zt.c,{id:"student-activity-table",className:"",columns:this.getColumns(),listAccessor:"name",hasMobileListView:!1,data:e,onListRowSelect:function(){},defaultSort:{accessor:"submitDueAt",direction:"asc"},fallbackSort:{accessor:"name",direction:"asc"}})}}])&&H0(n.prototype,r),a&&H0(n,a),t}(a.Component),Z0=Object(x.withI18n)()($0);function J0(e){return(J0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e){return(e1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t1(e,t){return(t1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r1=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=e1(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==J0(a)&&"function"!==typeof a?n1(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(n1(n1(n)),"render",(function(){var e=n.props,t=e.i18n,r=e.classId,a=e.activityList,i=e.openActivity,c=e.isLoading,s=e.hasError,u=e.reloadData,l=e.institution;return c?o.a.createElement(bc.a,{loading:!0}):o.a.createElement($t.a,{title:t._("Assignments")},o.a.createElement(iO.a,{classId:r}),!s&&o.a.createElement(Ge.b,{hideNavigation:yb.b(l),classId:r,navigationDrawerType:AI.b.STUDENT}),s&&o.a.createElement(EH,{message:t._("Failed to load assignment list"),buttonTitle:t._("Try again"),reloadData:u}),!s&&o.a.createElement(un.a,null,a.length>0&&o.a.createElement(Z0,{activityList:a,openActivity:i}),0===a.length&&o.a.createElement("h3",null,t._("No assignments yet"))))})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&t1(e,t)}(t,e),t}(a.Component),a1=Object(x.withI18n)()(Object(c.b)((function(e){return{institution:bb.h(e)}}))(r1));function o1(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getActivityList($classId: Int!) {\n        termClass(dbId: $classId) {\n            activities {\n                dbId\n                name\n                submitDueAt\n                type\n            }\n        }\n    }\n"]);return o1=function(){return e},e}function i1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c1=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getActivityList",value:function(e){return Lt.a.query({query:s1,variables:{classId:e}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.termClass.activities;return Promise.resolve(n)}))}}],(n=null)&&i1(t.prototype,n),r&&i1(t,r),e}(),s1=xt()(o1());function u1(e){return(u1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l1(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function d1(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){l1(o,r,a,i,c,"next",e)}function c(e){l1(o,r,a,i,c,"throw",e)}i(void 0)}))}}function f1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p1(e){return(p1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m1(e,t){return(m1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v1=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=p1(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==u1(a)&&"function"!==typeof a?b1(r):a,y1(b1(b1(n)),"state",{activityList:[],isLoading:!1,hasError:!1}),y1(b1(b1(n)),"getData",d1(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setIsLoading(!0),n.setHasError(!1),e.prev=3,e.next=6,c1.getActivityList(+t);case 6:r=e.sent,n._ismounted&&n.setActivityList(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n._ismounted&&n.setHasError(!0);case 13:return e.prev=13,n._ismounted&&n.setIsLoading(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])})))),y1(b1(b1(n)),"openActivity",(function(e){var t=e.dbId,r=e.type,a=n.props,o=a.history,i=a.match;if(r!==pc.b.IN_CLASSROOM){var c=V.a.compile(Qh.j.STUDENT_ACTIVITY)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y1(e,t,n[t])}))}return e}({},i.params,{activityId:t}));o.push(c)}else{var s=V.a.compile(Qh.g.STUDENT_INCLASS_ACTIVITY)({activityId:t});window.location.href=Object(Yh.a)(s)}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m1(e,t)}(t,e),n=t,(r=[{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"setHasError",value:function(e){this.setState({hasError:e})}},{key:"setActivityList",value:function(e){this.setState({activityList:e})}},{key:"componentDidMount",value:function(){this._ismounted=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this.props.match.params.classId,t=this.state,n=t.activityList,r=t.isLoading,a=t.hasError;return o.a.createElement(a1,{classId:+e,activityList:n,isLoading:r,reloadData:this.getData,openActivity:this.openActivity,hasError:a})}}])&&f1(n.prototype,r),a&&f1(n,a),t}(a.Component),h1=Object(s.a)(v1);function g1(e){return(g1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w1(e){return(w1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S1(e,t){return(S1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C1=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=w1(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==g1(a)&&"function"!==typeof a?O1(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(O1(O1(n)),"actionsRenderer",(function(e,t){var r=n.props,a=r.i18n,i=r.onOpenLobby,c=r.onPreview,s=e.media&&e.media.processingStatus===ml.a.READY,u=!!e.lobbyPageUrl,l=!!e.downloadUrl,d=gr.a.isMeetingDownloadAllowed();return o.a.createElement("span",null,s&&o.a.createElement(Ue.c,{id:"button-meeting-preview["+t+"]",onClick:function(){c(e)},title:a._("Preview Recording")},Je.a.PREVIEW),u&&o.a.createElement(Ue.c,{id:"button-meeting-enter["+t+"]",onClick:function(){i(e)},title:a._("Enter Meeting")},Je.a.EXIT),d&&l&&o.a.createElement(Ue.c,{id:"button-meeting-download["+t+"]",onClick:function(){window.open(e.downloadUrl)},title:a._("Download Meeting")},Je.a.DOWNLOAD))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S1(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this.props.i18n;return[{accessor:"title",label:e._("Title"),key:"title",grow:!0,sortable:!0,renderer:function(e){return o.a.createElement("span",null,e.title)}},{accessor:"scheduledAt",label:e._("Scheduled At"),key:"due",sortable:!0,renderer:function(e){return e.scheduledAt?o.a.createElement(IY.a,{value:e.scheduledAt}):o.a.createElement("span",null,"\u2014")}},{accessor:"status",label:e._("Status"),key:"status",sortable:!0,renderer:function(t){var n,r;switch(t.status){case lo.STARTED:n=Je.a.PLAY_ARROW,r=e._("Started");break;case lo.SCHEDULED:n=Je.a.EVENT,r=e._("Scheduled");break;case lo.READY:n=Je.a.DONE,r=e._("Ready to start");break;case lo.NOT_HELD:n=Je.a.ALARM_OFF,r=e._("Was not held");break;case lo.FINISHED:n=Je.a.HOURGLASS_EMPTY,r=e._("Processing"),t.media&&t.media.processingStatus===ml.a.ERROR&&(n=Je.a.ERROR,r=e._("Processing error"));break;case lo.PROCESSED:n=Je.a.DONE,r=e._("Processed"),t.media&&t.media.processingStatus===ml.a.ERROR&&(n=Je.a.ERROR,r=e._("Processing error"))}return o.a.createElement(Uf.a,{title:r},n)}},{label:e._("Action"),key:"actions",grow:!0,renderer:this.actionsRenderer}]}},{key:"render",value:function(){var e=this.props.meetingsList;return o.a.createElement(Zt.c,{id:"student-meetings-table",className:"",columns:this.getColumns(),listAccessor:"title",hasMobileListView:!1,data:e,onListRowSelect:function(){},defaultSort:{accessor:"scheduledAt",direction:"desc"},fallbackSort:{accessor:"title",direction:"asc"}})}}])&&E1(n.prototype,r),a&&E1(n,a),t}(a.Component),_1=Object(x.withI18n)()(C1);function T1(e){return(T1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P1(e,t){return!t||"object"!==T1(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R1(e){return(R1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A1(e,t){return(A1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j1=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P1(this,R1(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A1(e,t)}(t,e),n=t,(r=[{key:"getColumns",value:function(){var e=this.props,t=e.i18n,n=e.onOpenLobby;return[{accessor:"title",label:t._("Title"),key:"title",sortable:!0},{accessor:"activity.name",label:t._("Assignment Name"),key:"activityName",grow:!0,sortable:!0,renderer:function(e){return o.a.createElement("span",null,e.activity.name)}},{accessor:"scheduledAt",label:t._("Scheduled At"),key:"due",sortable:!0,renderer:function(e){return e.scheduledAt?o.a.createElement(IY.a,{value:e.scheduledAt}):o.a.createElement("span",null,"\u2014")}},{accessor:"moderator",label:t._("Moderator"),key:"owner",sortable:!0,renderer:function(e){var t=e.owner;return o.a.createElement(Ht.a,{value:t.firstName+" "+t.lastName})}},{label:t._("Action"),key:"actions",grow:!0,renderer:function(e,r){return o.a.createElement("span",null,o.a.createElement(r_.a,{id:"button-meeting-enter["+r+"]",onClick:function(){n(e)},title:t._("Enter meeting")},Je.a.EXIT))}}]}},{key:"render",value:function(){var e=this.props.meetingsList;return o.a.createElement(Zt.c,{id:"student-activity-meetings-table",className:"",columns:this.getColumns(),listAccessor:"title",hasMobileListView:!1,data:e,onListRowSelect:function(){},defaultSort:{accessor:"scheduledAt",direction:"desc"},fallbackSort:{accessor:"title",direction:"asc"}})}}])&&I1(n.prototype,r),a&&I1(n,a),t}(a.Component),k1=Object(x.withI18n)()(j1);function N1(e){return(N1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L1(e,t){return!t||"object"!==N1(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M1(e){return(M1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x1(e,t){return(x1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F1=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L1(this,M1(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x1(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.meetingsList,a=e.isLoading,i=e.hasError,c=e.reloadData,s=e.onOpenLobby,u=e.onPreview,l=e.institution,d=e.activityMeetingsList;return a?o.a.createElement(bc.a,{loading:!0}):o.a.createElement($t.a,{title:t._("Meetings")},!i&&o.a.createElement(Ge.b,{hideNavigation:yb.b(l),classId:n,navigationDrawerType:AI.b.STUDENT}),i&&o.a.createElement(EH,{message:t._("Failed to load meetings list"),buttonTitle:t._("Try again"),reloadData:c}),!i&&o.a.createElement(un.a,null,o.a.createElement("h2",null,t._("Class Meetings")),r.length>0&&o.a.createElement(_1,{meetingsList:r,onOpenLobby:s,onPreview:u}),0===r.length&&o.a.createElement("h5",null,t._("No class meetings scheduled yet"))),!i&&o.a.createElement(un.a,null,o.a.createElement("h2",null,t._("Assignment Meetings")),d.length>0&&o.a.createElement(k1,{meetingsList:d,onOpenLobby:s}),0===d.length&&o.a.createElement("h5",null,t._("No assignment meetings yet"))))}}])&&D1(n.prototype,r),a&&D1(n,a),t}(a.Component),V1=Object(x.withI18n)()(Object(c.b)((function(e){return{institution:bb.h(e)}}))(F1));function G1(){var e=q1(["\nquery getActivityMeetings($dbId: Int!){\n  termClass(dbId: $dbId) {\n    activityMeetings {\n      dbId\n      title\n      owner {\n        dbId\n        firstName\n        lastName\n      }\n      lobbyPageUrl\n      scheduledAt\n      status\n      activity {\n        name\n      }\n    }\n  }\n}\n"]);return G1=function(){return e},e}function U1(){var e=q1(["\n    query getActivityList($classId: Int!) {\n        termClass(dbId: $classId) {\n            meetings {\n                dbId\n                title\n                lobbyPageUrl\n                scheduledAt\n                status\n                media {\n                    ...MediaFull\n                }\n                downloadUrl\n            }\n        }\n    }\n    ","\n"]);return U1=function(){return e},e}function q1(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function W1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B1=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMeetingsList",value:function(e){return Lt.a.query({query:Q1,variables:{classId:e}}).then((function(e){var t=e.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.termClass.meetings;return Promise.resolve(n)}))}},{key:"getActivityMeetingsList",value:function(e){return Lt.a.query({query:Y1,variables:{dbId:e}}).then((function(e){return Promise.resolve(e.data.termClass.activityMeetings)}))}}],(n=null)&&W1(t.prototype,n),r&&W1(t,r),e}(),Q1=xt()(U1(),G_.d),Y1=xt()(G1());function H1(e){return(H1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z1(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function K1(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z1(o,r,a,i,c,"next",e)}function c(e){z1(o,r,a,i,c,"throw",e)}i(void 0)}))}}function X1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $1(e){return($1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z1(e,t){return(Z1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t8=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=$1(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==H1(a)&&"function"!==typeof a?J1(r):a,e8(J1(J1(n)),"state",{meetingsList:[],meetingsListIsLoading:!1,meetingsListHasError:!1,activityMeetingsList:[],activityMeetingsListIsLoading:!1,activityMeetingsListHasError:!1}),e8(J1(J1(n)),"loadData",(function(){n.getMeetingsList(),n.getActivityMeetingsList()})),e8(J1(J1(n)),"getActivityMeetingsList",K1(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setState({activityMeetingsListIsLoading:!0,activityMeetingsListHasError:!1}),e.prev=2,e.next=5,B1.getActivityMeetingsList(+t);case 5:r=e.sent,n.setState({activityMeetingsListIsLoading:!1,activityMeetingsList:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),H.b.error("Failed to load activity meetings list.",e.t0),n.setState({activityMeetingsListIsLoading:!1,activityMeetingsListHasError:!0});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})))),e8(J1(J1(n)),"getMeetingsList",K1(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setState({meetingsListIsLoading:!0,meetingsListHasError:!1}),e.prev=2,e.next=5,B1.getMeetingsList(+t);case 5:r=e.sent,n.setState({meetingsListIsLoading:!1,meetingsList:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),H.b.error("Failed to load meetings list.",e.t0),n.setState({meetingsListIsLoading:!1,meetingsListHasError:!0});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})))),e8(J1(J1(n)),"getActiveActivityMeetings",(function(){return n.state.activityMeetingsList.filter((function(e){return e.status===lo.SCHEDULED||e.status===lo.READY||e.status===lo.STARTED}))})),e8(J1(J1(n)),"onOpenLobby",(function(e){window.open(e.lobbyPageUrl,"__blank")})),e8(J1(J1(n)),"onPreview",(function(e){var t=n.props.match.params.classId;Hn.a.showModal(o.a.createElement(od.a,{media:e.media,termClassId:+t,usageContext:kd.a.DIRECT_LIBRARY,onCancel:Hn.a.closeModal}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z1(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.props.match.params.classId,t=this.state,n=t.meetingsListIsLoading,r=t.meetingsListHasError,a=t.meetingsList,i=t.activityMeetingsListIsLoading,c=t.activityMeetingsListHasError;return o.a.createElement(V1,{classId:+e,meetingsList:a,activityMeetingsList:this.getActiveActivityMeetings(),isLoading:n||i,onOpenLobby:this.onOpenLobby,onPreview:this.onPreview,reloadData:this.loadData,hasError:r||c})}}])&&X1(n.prototype,r),a&&X1(n,a),t}(a.Component),n8=Object(c.b)((function(e){return{currentUserId:wt.i(e)}}))(t8),r8=n("wR0W"),a8=n("f2lN");function o8(e){return(o8="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i8(){return(i8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s8(e){return(s8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u8(e,t){return(u8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f8=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=s8(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==o8(a)&&"function"!==typeof a?l8(r):a,d8(l8(l8(n)),"state",{showRecorder:!1,recorderParams:{},s3Settings:{}}),d8(l8(l8(n)),"setShowRecordButton",(function(e){(0,n.props.dispatch)(rw.N(n.state.recorderParams.recorderId,e))})),d8(l8(l8(n)),"setAutoSubmit",(function(e){(0,n.props.dispatch)(rw.q(n.state.recorderParams.recorderId,e))})),d8(l8(l8(n)),"setParams",(function(e){var t=e.options;t.showSubmitButton=!0,n.setState({showRecorder:!0,recorderParams:t})})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u8(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){Object(a8.a)(window,r8.a.SET_PARAMS,this.setParams),Object(a8.a)(window,r8.a.SET_SHOW_RECORD_BUTTON,this.setShowRecordButton),Object(a8.a)(window,r8.a.SET_AUTO_SUBMIT,this.setAutoSubmit),Object(a8.b)(window,r8.a.WINDOWED_RECORDER_LOADED)}},{key:"render",value:function(){var e=this.state,t=e.showRecorder,n=e.recorderParams;return o.a.createElement("div",null,t&&o.a.createElement(Di.b,i8({isStandaloneMode:!0},n)),!t&&o.a.createElement(bc.a,{loading:!0}))}}])&&c8(n.prototype,r),a&&c8(n,a),t}(a.Component),p8=Object(c.b)()(f8);n("M+Ya"),n("+nBP");function m8(e){return(m8="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v8(e,t){return!t||"object"!==m8(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h8(e){return(h8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g8(e,t){return(g8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v8(this,h8(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g8(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.attachments,r=e.addAttachmentFile,a=e.removeAttachment;return o.a.createElement("div",{className:"c-help-form__attachments"},n.map((function(e,n){return o.a.createElement("div",{key:e.id,className:"c-help-form__attachment"},o.a.createElement(Ue.c,{id:"button-attachment-remove",ariaLabel:t._("Remove attachment number {index}",{index:n}),onClick:function(){a(n)}},Je.a.DELETE),o.a.createElement("span",{className:"c-help-form__delete-button-wrapper"},o.a.createElement(gX.a,{onFile:function(e){var t=b8(e,1)[0];r(n,t)}})))})))}}])&&y8(n.prototype,r),a&&y8(n,a),t}(a.Component);E8.propTypes={attachments:M.a.array,addAttachmentFile:M.a.func};var w8=Object(x.withI18n)()(E8);function S8(e){return(S8="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C8(e,t){return!t||"object"!==S8(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _8(e){return(_8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T8(e,t){return(T8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C8(this,_8(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T8(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onDescriptionChange,r=e.description,a=e.attachments,i=e.showAttachmentButton,c=e.handleAddAttachment,s=e.addAttachmentFile,u=e.removeAttachment,l=e.isLoading,d=e.showClientErrors,f=e.sumbit,p=e.reset,m=e.requestSent,b=e.serverErrors;return o.a.createElement("div",{className:"c-help-form"},!m&&o.a.createElement(un.a,null,b.length>0&&o.a.createElement("ul",{className:"u-pl-15px"},b.map((function(e){return o.a.createElement("li",{className:"u-error",key:e},e)}))),o.a.createElement(Tl.b,{type:"text",id:"description",name:"description",errorText:d&&r.error?r.error:"",value:r.value,onChange:n,label:t._("Please provide a detailed description of the issue"),rows:1,placeholder:t._("At least 50 characters required")}),o.a.createElement(w8,{attachments:a,removeAttachment:u,addAttachmentFile:s}),i&&o.a.createElement("div",{className:"u-pt-10px"},o.a.createElement(Ue.a,{id:"button-help-form-screenshot",onClick:c,ariaLabel:t._("Add a screenshot attachment")},o.a.createElement(Uf.a,{className:"c-help-form__add-screenshot-icon"},Je.a.ADD),o.a.createElement("span",{className:"c-help-form__add-screenshot-text"},o.a.createElement(x.Trans,{id:"Add a screenshot attachment"})))),o.a.createElement("div",{className:"c-help-form__help-form-actions"},o.a.createElement(Ue.f,{id:"button-help-form-send",enabled:!l,primary:!0,onClick:f,ariaLabel:t._("Send")},t._("Send")),o.a.createElement("span",{className:"u-mr-5px"}),o.a.createElement(Ue.a,{id:"button-help-form-reset",enabled:!l,onClick:p,secondary:!0,ariaLabel:t._("Reset")},t._("Reset")))),m&&o.a.createElement(un.a,null,o.a.createElement("p",null,o.a.createElement(x.Trans,{id:"Your help request was created and delivered to Bongo support. <0/>We will respond by email as soon as possible. <1/>Please visit our <2>Knowledge Base</2> for help in the meantime.",components:[o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("a",{href:"https://bongolearn.zendesk.com",target:"__blank"})]})),o.a.createElement(Ue.f,{id:"button-help-form-ok",primary:!0,onClick:p,ariaLabel:t._("OK")},t._("OK"))))}}])&&O8(n.prototype,r),a&&O8(n,a),t}(a.Component);I8.propTypes={onDescriptionChange:M.a.func,showAttachmentButton:M.a.bool,handleAddAttachment:M.a.func,addAttachmentFile:M.a.func,removeAttachment:M.a.func,description:M.a.object,attachments:M.a.array,isLoading:M.a.bool,hasError:M.a.bool,showClientErrors:M.a.bool,sumbit:M.a.func,reset:M.a.func,requestSent:M.a.bool,serverErrors:M.a.any};var P8=Object(x.withI18n)()(I8),R8=n("puQj"),A8=n.n(R8);function j8(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    mutation createHelpdeskTicket($input: CreateHelpdeskTicketInput!) {\n        createHelpdeskTicket (input: $input) {\n            ticketId\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return j8=function(){return e},e}function k8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.bowser=A8.a;var N8=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=A8.a.name+" "+A8.a.version,a=A8.a.osname+" "+A8.a.osversion,o=""+n,i={input:{description:e,additionalInfo:{browser:r,operationSystem:a,currentClass:o}}};return t.forEach((function(e,t){i.input["ticket[attachments]["+t+"][fileInfo][file]"]=e})),Lt.a.mutate({mutation:D8,variables:i}).then((function(e){var t=e.data.createHelpdeskTicket.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.createHelpdeskTicket.ticketId)}))}}],(n=null)&&k8(t.prototype,n),r&&k8(t,r),e}(),D8=xt()(j8());function L8(e){return(L8="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M8(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function x8(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){M8(o,r,a,i,c,"next",e)}function c(e){M8(o,r,a,i,c,"throw",e)}i(void 0)}))}}function F8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V8(e){return(V8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G8(e,t){return(G8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W8=5,B8=50,Q8=o.a.createElement(x.Trans,{id:"At least 50 characters required"}),Y8={description:{value:"",error:Q8},attachments:[],isLoading:!1,hasError:!1,showClientErrors:!1,requestSent:!1,serverErrors:[]},H8=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=V8(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==L8(a)&&"function"!==typeof a?U8(r):a,q8(U8(U8(n)),"state",g.a.merge({},Y8)),q8(U8(U8(n)),"onDescriptionChange",(function(e){var t=g.a.merge({},n.state.description);t.value=e,e.length<B8?t.error=Q8:t.error=!1,n.setState({description:t})})),q8(U8(U8(n)),"handleAddAttachment",(function(){if(n.state.attachments.length!==W8){var e=g.a.merge([],n.state.attachments);e.push({file:null,id:IL()(5)}),n.setState({attachments:e})}})),q8(U8(U8(n)),"addAttachmentFile",(function(e,t){if(n.state.attachments[e]){var r=g.a.merge([],n.state.attachments);r[e].file=t,n.setState({attachments:r})}})),q8(U8(U8(n)),"removeAttachment",(function(e){if(n.state.attachments[e]){var t=g.a.merge([],n.state.attachments);t=bm.d(t,e),n.setState({attachments:t})}})),q8(U8(U8(n)),"sumbit",x8(regeneratorRuntime.mark((function e(){var t,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.termClassId,a=t.i18n,n.isValid()){e.next=4;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 4:return o=n.state.attachments.map((function(e){return e.file})),o=g.a.compact(o),e.prev=6,n.setState({isLoading:!0,hasError:!1}),e.next=10,N8.sendRequest(n.state.description.value,o,r);case 10:n.setState({requestSent:!0}),e.next=19;break;case 13:if(e.prev=13,e.t0=e.catch(6),n.setState({hasError:!0}),i=[a._("Failed to send help request. Please try again.")],e.t0&&e.t0.length)try{i=g.a.values(Ll(e.t0))}catch(c){H.b.warn(c)}n.setState({serverErrors:i});case 19:return e.prev=19,n.setState({isLoading:!1}),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,13,19,22]])})))),q8(U8(U8(n)),"reset",(function(){n.setState(g.a.merge({},Y8))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G8(e,t)}(t,e),n=t,(r=[{key:"isValid",value:function(){return!this.state.description.error&&this.state.description.value.length>=B8}},{key:"render",value:function(){var e=this.state,t=e.description,n=e.attachments,r=e.isLoading,a=e.hasError,i=e.showClientErrors,c=e.requestSent,s=e.serverErrors;return o.a.createElement(P8,{onDescriptionChange:this.onDescriptionChange,handleAddAttachment:this.handleAddAttachment,addAttachmentFile:this.addAttachmentFile,removeAttachment:this.removeAttachment,sumbit:this.sumbit,reset:this.reset,serverErrors:s,showAttachmentButton:n.length<W8,attachments:n,isLoading:r,hasError:a,showClientErrors:i,requestSent:c,description:t})}}])&&F8(n.prototype,r),a&&F8(n,a),t}(a.Component);H8.propTypes={termClassId:M.a.number};var z8=Object(x.withI18n)()(H8);n("H+UZ");function K8(e){return(K8="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $8(e,t){return!t||"object"!==K8(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z8(e){return(Z8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J8(e,t){return(J8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var e2=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$8(this,Z8(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J8(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.createExportRequest,n=e.i18n,r=e.loading;H.b.warn(r);var a=[o.a.createElement(mi.a,{id:"button-export-user-data-dialog-cancel",secondary:!0,enabled:!r,ariaLabel:n._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(mi.a,{id:"button-export-user-data-dialog-export",primary:!0,ariaLabel:n._("Export"),isLoading:r,onClick:t},o.a.createElement(x.Trans,{id:"Export"}))];return o.a.createElement(pi.a,{actions:a,ariaLabel:n._("Export private data"),id:"export-user-data-dialog",title:n._("Export private data"),dialogClassName:"c-export-user-data-dialog ",modal:!0,visible:!0},o.a.createElement(x.Trans,{id:"<0>Select EXPORT to create request for exporting private data. Requests can take up to 30 days to process</0>",components:[o.a.createElement("p",null)]}))}}])&&X8(n.prototype,r),a&&X8(n,a),t}(a.Component),t2=Object(x.withI18n)()(e2),n2=n("2HZR");function r2(){var e=i2(["\n    mutation cancelExportDataRequest($input:  CancelExportDataRequestInput!){\n        cancelExportDataRequest(input: $input) {\n            exportDataRequest {\n                dbId\n                status\n                downloadUrl\n                createdAt\n            }\n        }\n    }\n"]);return r2=function(){return e},e}function a2(){var e=i2(["\n    mutation createExportDataRequest {\n        createExportDataRequest {\n            exportDataRequest {\n                dbId\n                status\n                downloadUrl\n                createdAt\n            }\n        }\n    }\n"]);return a2=function(){return e},e}function o2(){var e=i2(["\n    {\n        viewer {\n            exportDataRequests {\n                dbId\n                status\n                downloadUrl\n                createdAt\n            }\n        }\n    }\n"]);return o2=function(){return e},e}function i2(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s2=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getList",value:function(){return Ft.a.dispatch(n2.n(!0)),Ft.a.dispatch(n2.l(!1)),Lt.a.query({query:u2}).then((function(e){var t=e.data.viewer.exportDataRequests;return Ft.a.dispatch(n2.n(!1)),Ft.a.dispatch(n2.m(t)),Promise.resolve(t)})).catch((function(e){return H.b.error(e),Ft.a.dispatch(n2.n(!1)),Ft.a.dispatch(n2.l(!0)),Promise.reject(e)}))}},{key:"createExportRequest",value:function(){return Ft.a.dispatch(n2.k(!0)),Ft.a.dispatch(n2.j(!1)),Lt.a.mutate({mutation:l2}).then((function(e){var t=e.data.createExportDataRequest.exportDataRequest;return Ft.a.dispatch(n2.k(!1)),Ft.a.dispatch(n2.h(t)),Promise.resolve(t)})).catch((function(e){return H.b.error(e),Ft.a.dispatch(n2.k(!1)),Ft.a.dispatch(n2.j(!0)),Promise.reject(e)}))}},{key:"cancelRequest",value:function(e){return Lt.a.mutate({mutation:d2,variables:{input:{dbId:e}}}).then((function(e){var t=e.data.cancelExportDataRequest.exportDataRequest;return Ft.a.dispatch(n2.i(t)),Promise.resolve(t)}))}}],(n=null)&&c2(t.prototype,n),r&&c2(t,r),e}(),u2=xt()(o2()),l2=xt()(a2()),d2=xt()(r2()),f2={CREATED:"TYPE__CREATED",CANCELLED:"TYPE__CANCELLED",PROCESSING:"TYPE__PROCESSING",ERROR:"TYPE__ERROR",PROCESSED:"TYPE__PROCESSED"},p2=Object(U.a)(q.a,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.exportUserDataRequests})),m2=Object(U.a)(p2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.loading})),b2=Object(U.a)(p2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createLoading})),y2=(Object(U.a)(p2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hasError})),Object(U.a)(p2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.list}))),v2=Object(U.a)(y2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0;return e.forEach((function(e){[f2.PROCESSING,f2.CREATED].includes(e.status)&&(t=!1)})),t}));function h2(e){return(h2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g2(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function E2(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g2(o,r,a,i,c,"next",e)}function c(e){g2(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S2(e){return(S2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O2(e,t){return(O2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _2=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=S2(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==h2(a)&&"function"!==typeof a?C2(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(C2(C2(n)),"createExportRequest",E2(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,e.prev=1,e.next=4,s2.createExportRequest();case 4:yc.a.addSuccess(t._("Export request created successfully")),Hn.a.closeModal(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),H.b.error(e.t0),yc.a.addError(t._("Failed to create export request"));case 12:case"end":return e.stop()}}),e,this,[[1,8]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O2(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(t2,{createExportRequest:this.createExportRequest,loading:this.props.loading})}}])&&w2(n.prototype,r),a&&w2(n,a),t}(a.Component),T2=Object(c.b)((function(e){return{loading:b2(e)}}))(Object(x.withI18n)()(_2));n("Y3Gn"),n("hMkO");function I2(e){return(I2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R2(e,t){return!t||"object"!==I2(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A2(e){return(A2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j2(e,t){return(j2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k2=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R2(this,A2(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j2(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.loading,r=e.createDeleteRequest,a=[o.a.createElement(mi.a,{id:"button-delete-user-data-confirm-back",secondary:!0,ariaLabel:t._("Back"),enabled:!n,onClick:Hn.a.showPreviousModal},o.a.createElement(x.Trans,{id:"Back"})),o.a.createElement(mi.a,{id:"button-delete-user-data-confirm-cancel",secondary:!0,ariaLabel:t._("Cancel"),enabled:!n,onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(mi.a,{id:"button-delete-user-data-confirm-delete",primary:!0,ariaLabel:t._("Delete"),enabled:!n,isLoading:n,onClick:r},o.a.createElement(x.Trans,{id:"Confirm"}))];return o.a.createElement(pi.a,{actions:a,ariaLabel:t._("Delete my account"),id:"delete-user-data-dialog",title:t._("Delete user confirmation"),dialogClassName:"c-confirm-user-delete-dialog",modal:!0,visible:!0},o.a.createElement(x.Trans,{id:"<0>Are you sure you want to delete your account? When this request is processed you will not have access to your account or data. Select CONFIRM to proceed.</0>",components:[o.a.createElement("p",null)]}))}}])&&P2(n.prototype,r),a&&P2(n,a),t}(a.Component),N2=Object(x.withI18n)()(k2),D2=n("Q0J0");function L2(){var e=x2(["\n    mutation createExportDataRequest {\n        createUserDeletionRequest {\n            userDeletionRequest {\n                dbId\n                status\n                createdAt\n            }\n        }\n    }\n"]);return L2=function(){return e},e}function M2(){var e=x2(["\n    {\n        viewer {\n            userDeletionRequests {\n                dbId\n                status\n                createdAt\n            }\n        }\n    }\n"]);return M2=function(){return e},e}function x2(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function F2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V2=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getList",value:function(){return Ft.a.dispatch(D2.m(!0)),Ft.a.dispatch(D2.k(!1)),Lt.a.query({query:G2}).then((function(e){var t=e.data.viewer.userDeletionRequests;return Ft.a.dispatch(D2.m(!1)),Ft.a.dispatch(D2.l(t)),Promise.resolve(t)})).catch((function(e){return H.b.error(e),Ft.a.dispatch(D2.m(!1)),Ft.a.dispatch(D2.k(!0)),Promise.reject(e)}))}},{key:"createDeleteRequest",value:function(){return Ft.a.dispatch(D2.j(!0)),Ft.a.dispatch(D2.i(!1)),Lt.a.mutate({mutation:U2}).then((function(e){var t=e.data.createUserDeletionRequest.userDeletionRequest;return Ft.a.dispatch(D2.j(!1)),Ft.a.dispatch(D2.h(t)),Promise.resolve(t)})).catch((function(e){return H.b.error(e),Ft.a.dispatch(D2.j(!1)),Ft.a.dispatch(D2.i(!0)),Promise.reject(e)}))}}],(n=null)&&F2(t.prototype,n),r&&F2(t,r),e}(),G2=xt()(M2()),U2=xt()(L2()),q2=Object(U.a)(q.a,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.deleteUserRequests})),W2=Object(U.a)(q2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.loading})),B2=Object(U.a)(q2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createLoading})),Q2=(Object(U.a)(q2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hasError})),Object(U.a)(q2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.list}))),Y2=Object(U.a)(Q2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0;return e.forEach((function(e){[f2.PROCESSING,f2.CREATED].includes(e.status)&&(t=!1)})),t}));function H2(e){return(H2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z2(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function K2(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z2(o,r,a,i,c,"next",e)}function c(e){z2(o,r,a,i,c,"throw",e)}i(void 0)}))}}function X2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $2(e){return($2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z2(e,t){return(Z2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t5=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=$2(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==H2(a)&&"function"!==typeof a?J2(r):a,e5(J2(J2(n)),"state",{createDeleteRequestIsLoading:!1}),e5(J2(J2(n)),"createDeleteRequest",K2(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,e.prev=1,e.next=4,V2.createDeleteRequest();case 4:yc.a.addSuccess(t._("Delete request created successfully")),Hn.a.closeModal(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),H.b.error(e.t0),yc.a.addError(t._("Failed to create delete request"));case 12:case"end":return e.stop()}}),e,this,[[1,8]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z2(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(N2,{loading:this.props.loading,createDeleteRequest:this.createDeleteRequest})}}])&&X2(n.prototype,r),a&&X2(n,a),t}(a.Component),n5=Object(c.b)((function(e){return{loading:B2(e)}}))(Object(x.withI18n)()(t5));function r5(e){return(r5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o5(e,t){return!t||"object"!==r5(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i5(e){return(i5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c5(e,t){return(c5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o5(this,i5(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c5(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.i18n,t=[o.a.createElement(mi.a,{id:"button-delete-user-data-cancel",secondary:!0,ariaLabel:e._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(mi.a,{id:"button-delete-user-data-delete",primary:!0,ariaLabel:e._("Delete"),onClick:function(){return Hn.a.showNextModal(o.a.createElement(n5,null))}},o.a.createElement(x.Trans,{id:"Send delete request"}))];return o.a.createElement(pi.a,{actions:t,ariaLabel:e._("Delete my account"),id:"delete-user-data-dialog",title:e._("Delete user requests"),dialogClassName:"c-delete-user-data-dialog ",modal:!0,visible:!0},o.a.createElement(x.Trans,{id:"<0>Select SEND DELETE REQUEST to create a request to delete your account. When this request is processed you will not have access to your account or data. Request can take up to 30 days to process.</0>",components:[o.a.createElement("p",null)]}))}}])&&a5(n.prototype,r),a&&a5(n,a),t}(a.Component),u5=Object(x.withI18n)()(s5);function l5(e){return(l5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f5(e,t){return!t||"object"!==l5(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p5(e){return(p5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m5(e,t){return(m5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f5(this,p5(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m5(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(u5,null)}}])&&d5(n.prototype,r),a&&d5(n,a),t}(a.Component);n("UESQ");function y5(e){return(y5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h5(e,t){return!t||"object"!==y5(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g5(e){return(g5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E5(e,t){return(E5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h5(this,g5(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E5(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isLoading,r=e.submit,a=e.isMarketingCommunicationAccepted,i=e.onAcceptChange,c=[o.a.createElement(mi.a,{id:"button-marketing-dialog-cancel",secondary:!0,ariaLabel:t._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"})),o.a.createElement(mi.a,{id:"button-marketing-dialog-submit",primary:!0,ariaLabel:t._("Submit"),enabled:!n,isLoading:n,onClick:r},o.a.createElement(x.Trans,{id:"Submit"}))];return o.a.createElement(pi.a,{actions:c,ariaLabel:t._("Marketing Communications"),id:"marketing-communications-dialog",title:t._("Marketing Communications"),dialogClassName:"c-marketing-communications-dialog",modal:!0,visible:!0},o.a.createElement(GO.a,{id:"marketing-communications",name:"marketing-communications",label:t._("I agree to receive marketing communications regarding your products and services."),ariaLabel:t._("I agree to receive marketing communications regarding your products and services."),checked:a,onChange:i}))}}])&&v5(n.prototype,r),a&&v5(n,a),t}(a.Component),S5=Object(x.withI18n)()(w5),O5=n("lBBP");function C5(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation editUserMarketingCommunicationSettings ($input: EditUserMarketingCommunicationSettingsInput!) {\n  editUserMarketingCommunicationSettings(input: $input) {\n    user {\n      dbId\n    }\n    errors {\n      path\n      message\n    }\n  }\n}\n"]);return C5=function(){return e},e}function _5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T5=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"acceptMarketingCommunications",value:function(e){return Lt.a.mutate({mutation:I5,variables:{input:{marketingCommunicationAccepted:e}}}).then((function(t){var n=t.data.editUserMarketingCommunicationSettings.user.dbId;return Ft.a.dispatch(O5.s(e)),Promise.resolve(n)}))}}],(n=null)&&_5(t.prototype,n),r&&_5(t,r),e}(),I5=xt()(C5());function P5(e){return(P5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R5(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function A5(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){R5(o,r,a,i,c,"next",e)}function c(e){R5(o,r,a,i,c,"throw",e)}i(void 0)}))}}function j5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k5(e){return(k5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N5(e,t){return(N5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M5=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=k5(t).call(this,e),n=!a||"object"!==P5(a)&&"function"!==typeof a?D5(r):a,L5(D5(D5(n)),"onAcceptChange",(function(e){n.setState({isMarketingCommunicationAccepted:e})})),L5(D5(D5(n)),"submit",A5(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,e.prev=1,n.setState({isLoading:!0}),e.next=5,T5.acceptMarketingCommunications(n.state.isMarketingCommunicationAccepted);case 5:yc.a.addSuccess(t._("Marketing communication settings saved successfully")),n.setState({isLoading:!1}),Hn.a.closeModal(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),H.b.error(e.t0),yc.a.addError(t._("Failed to save marketing communication settings")),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,this,[[1,10]])})))),n.state={isMarketingCommunicationAccepted:!!n.props.isMarketingCommunicationAccepted,isLoading:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N5(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(S5,{isMarketingCommunicationAccepted:this.state.isMarketingCommunicationAccepted,isLoading:this.state.isLoading,submit:this.submit,onAcceptChange:this.onAcceptChange})}}])&&j5(n.prototype,r),a&&j5(n,a),t}(a.Component),x5=Object(c.b)((function(e){return{isMarketingCommunicationAccepted:wt.e(e)}}))(Object(x.withI18n)()(M5));function F5(e){return(F5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V5(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q5(e,t,n[t])}))}return e}function U5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q5(e){return(q5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W5(e,t){return(W5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y5=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=q5(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==F5(a)&&"function"!==typeof a?B5(r):a,Q5(B5(B5(n)),"getColumns",(function(){var e=n.props.i18n;return[{label:e._("Request Type"),key:"request-type",renderer:function(e){return o.a.createElement("span",null,e.type)}},{label:e._("Date"),key:"date",renderer:function(e){return o.a.createElement(IY.a,{value:e.createdAt})}},{label:e._("Status"),key:"status",renderer:function(t){var n=e._("Pending");return t.status===f2.PROCESSED&&(n=e._("Complete")),t.status===f2.CANCELLED&&(n=e._("Cancelled")),o.a.createElement("span",null,n)}},{key:"actions",className:"u-width-50px",renderer:function(t,n){var r=t.downloadUrl,a=g.a.isFunction(t.cancel)&&t.status===f2.CREATED,i=[r&&o.a.createElement(ol.a,{key:"download",onClick:function(){window.open(r)},leftIcon:o.a.createElement(Uf.a,{ariaLabel:e._("Download, icon")},Je.a.DOWNLOAD),primaryText:e._("Download")}),a&&o.a.createElement(ol.a,{key:"delete",onClick:function(){t.cancel()},leftIcon:o.a.createElement(Uf.a,{ariaLabel:e._("Delete, icon")},Je.a.DELETE),primaryText:e._("Delete")})];return i=g.a.compact(i),(a||r)&&o.a.createElement(nH.a,{key:n,menuItems:i})}}]})),Q5(B5(B5(n)),"getTableData",(function(){var e=n.props,t=e.exportRequests,r=e.deleteRequests,a=e.i18n,o=e.cancelExportRequest;t=t.map((function(e){return(e=G5({},e)).type=a._("Export Private Data"),e.cancel=o.bind(null,e.dbId),e})),r=r.map((function(e){return(e=G5({},e)).type=a._("Delete User"),e}));var i=[].concat(V5(t),V5(r));return g.a.orderBy(i,["createdAt"])})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W5(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(un.a,null,o.a.createElement(tT.a,{columns:this.getColumns(),listAccessor:"dbId",hasMobileListView:!1,data:this.getTableData(),onListRowSelect:function(){}}))}}])&&U5(n.prototype,r),a&&U5(n,a),t}(a.Component),H5=Object(x.withI18n)()(Y5);function z5(e){return(z5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K5(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function X5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $5(e){return($5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z5(e,t){return(Z5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var e3=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=$5(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==z5(a)&&"function"!==typeof a?J5(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(J5(J5(n)),"cancelExportRequest",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.i18n,e.prev=1,e.next=4,s2.cancelRequest(t);case 4:yc.a.addSuccess(r._("Export request cancelled successfully")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),H.b.error(e.t0),yc.a.addError(r._("Failed to cancel export request"));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){K5(o,r,a,i,c,"next",e)}function c(e){K5(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z5(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){s2.getList(),V2.getList()}},{key:"render",value:function(){var e=this.props,t=e.exportRequests,n=e.deleteRequests;return 0===t.length&&0===n.length?null:o.a.createElement(H5,{exportRequests:t,cancelExportRequest:this.cancelExportRequest,deleteRequests:n})}}])&&X5(n.prototype,r),a&&X5(n,a),t}(a.Component),t3=Object(x.withI18n)()(Object(c.b)((function(e){return{exportRequests:y2(e),deleteRequests:Q2(e)}}))(e3));function n3(e){return(n3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a3(e){return(a3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o3(e,t){return(o3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c3=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=a3(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==n3(a)&&"function"!==typeof a?i3(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i3(i3(n)),"getMenuActions",(function(){var e=n.props,t=e.i18n,r=e.canCreateDeleteRequest,a=e.canCreateExportRequest,i=e.deleteRequestsLoading,c=e.exportRequestsLoading;return[{primaryText:t._("Export private data"),disabled:!a||c,onClick:function(){return Hn.a.showModal(o.a.createElement(T2,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Export user data, icon")},Je.a.DOWNLOAD)},{primaryText:t._("Delete user data"),disabled:!r||i,onClick:function(){return Hn.a.showModal(o.a.createElement(b5,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Delete user data, icon")},Je.a.DELETE)},{primaryText:t._("Marketing Communications"),onClick:function(){return Hn.a.showModal(o.a.createElement(x5,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Marketing Communications, icon")},Je.a.EMAIL)}]})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o3(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.termClassId,r=e.isGdprSubject;return o.a.createElement(z.a,{title:t._("Helpdesk support information")},o.a.createElement(iA,{classId:n,context:VO.a.SUPPORT,menuActions:r?this.getMenuActions():[]}),o.a.createElement(z8,{termClassId:n}),o.a.createElement(t3,null))}}])&&r3(n.prototype,r),a&&r3(n,a),t}(a.Component);c3.propTypes={termClassId:M.a.number};var s3=Object(x.withI18n)()(c3);function u3(e){return(u3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d3(e,t){return!t||"object"!==u3(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f3(e){return(f3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p3(e,t){return(p3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d3(this,f3(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p3(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.match.params.classId,n=e.isGdprSubject,r=e.canCreateDeleteRequest,a=e.canCreateExportRequest,i=e.deleteRequestsLoading,c=e.exportRequestsLoading;return o.a.createElement(s3,{termClassId:+t,isGdprSubject:n,deleteRequestsLoading:i,exportRequestsLoading:c,canCreateDeleteRequest:r,canCreateExportRequest:a})}}])&&l3(n.prototype,r),a&&l3(n,a),t}(a.Component),b3=Object(c.b)((function(e){return{isGdprSubject:wt.c(e),canCreateDeleteRequest:Y2(e),canCreateExportRequest:v2(e),deleteRequestsLoading:W2(e),exportRequestsLoading:m2(e)}}))(m3),y3=n("sjRd"),v3=n("bFdo");function h3(e){return(h3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E3(e){return(E3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w3(e,t){return(w3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O3=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=E3(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==h3(a)&&"function"!==typeof a?S3(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(S3(S3(n)),"getMenuActions",(function(){var e=n.props,t=e.i18n,r=e.canCreateDeleteRequest,a=e.canCreateExportRequest,i=e.deleteRequestsLoading,c=e.exportRequestsLoading;return[{primaryText:t._("Export private data"),disabled:!a||c,onClick:function(){return Hn.a.showModal(o.a.createElement(T2,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Export user data, icon")},Je.a.DOWNLOAD)},{primaryText:t._("Delete user data"),disabled:!r||i,onClick:function(){return Hn.a.showModal(o.a.createElement(b5,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Delete user data, icon")},Je.a.DELETE)},{primaryText:t._("Marketing Communications"),onClick:function(){return Hn.a.showModal(o.a.createElement(x5,null))},leftIcon:o.a.createElement(Uf.a,{ariaLabel:t._("Marketing Communications, icon")},Je.a.EMAIL)}]})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w3(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.termClassId,r=e.institution,a=e.isGdprSubject;return o.a.createElement(z.a,{title:t._("Helpdesk support information")},o.a.createElement(y3.a,{menuOptions:a?this.getMenuActions():[],hideNavigation:yb.b(r),classId:n,navigationDrawerType:v3.a.STUDENT}),o.a.createElement(z8,{termClassId:n}),o.a.createElement(t3,null))}}])&&g3(n.prototype,r),a&&g3(n,a),t}(a.Component);O3.propTypes={termClassId:M.a.number,institution:M.a.object};var C3=Object(x.withI18n)()(O3);function _3(e){return(_3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I3(e,t){return!t||"object"!==_3(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P3(e){return(P3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R3(e,t){return(R3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I3(this,P3(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R3(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.match.params.classId,n=e.institution,r=e.isGdprSubject,a=e.canCreateDeleteRequest,i=e.canCreateExportRequest,c=e.deleteRequestsLoading,s=e.exportRequestsLoading;return o.a.createElement(C3,{termClassId:+t,institution:n,canCreateDeleteRequest:a,canCreateExportRequest:i,deleteRequestsLoading:c,exportRequestsLoading:s,isGdprSubject:r})}}])&&T3(n.prototype,r),a&&T3(n,a),t}(a.Component),j3=Object(c.b)((function(e){return{institution:bb.h(e),isGdprSubject:wt.c(e),canCreateDeleteRequest:Y2(e),canCreateExportRequest:v2(e),deleteRequestsLoading:W2(e),exportRequestsLoading:m2(e)}}))(A3);n("LlgI");function k3(e){return(k3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D3(e){return(D3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L3(e,t){return(L3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x3="meeting-preview-message",F3=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=D3(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==k3(a)&&"function"!==typeof a?M3(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(M3(M3(n)),"createMessageContent",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je.a.INFO_OUTLINE,r=arguments.length>2?arguments[2]:void 0,a=n.props.i18n;return o.a.createElement("div",{className:x3},o.a.createElement(zt.a,{className:"".concat(x3,"-icon--left")},t),o.a.createElement("div",{className:"".concat(x3,"-text")},o.a.createElement("h2",null,r||a._("Recording Not Available")),o.a.createElement("p",null,e),o.a.createElement("p",null)))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L3(e,t)}(t,e),n=t,(r=[{key:"getMeetingContent",value:function(){var e,t,n=this.props,r=n.i18n,a=n.meeting;return a?(a.startedAt&&(e=this.formatDate(a.startedAt)),a.finishedAt&&(t=this.formatDate(a.finishedAt)),a.status===lo.NOT_HELD?this.createMessageContent(r._("This meeting did not occur. Please contact the facilitator if you have any questions.")):a.status===lo.CANCELED?this.createMessageContent(r._("This meeting was cancelled.")):a.recordingLinkEnabled&&(a.media||a.status!==lo.PROCESSED&&a.status!==lo.FINISHED)?a.media?a.media.recordingAvailability&&a.media.recordingAvailability===fo.D2L_FREEMIUM_EXPIRED?this.createMessageContent(r._("This meeting is no longer available.")):a.media.processingStatus===ml.a.READY?o.a.createElement(mf.a,{id:"meeting-preview-player",playerId:"Standalone bbb meeting player #"+a.dbId,media:a.media,usageContext:kd.a.DIRECT_LIBRARY}):this.createMessageContent(r._("This meeting is currently processing. Please check back later.")):this.createMessageContent(r._("Unexpected error"),Je.a.ERROR):this.createMessageContent(r._("This meeting started at {startedAt} and finished at {finishedAt}. Please contact the facilitator if you have any questions.",{startedAt:e,finishedAt:t}))):this.createMessageContent("",Je.a.ERROR)}},{key:"formatDate",value:function(e){return Object(Er.e)(Object(Er.n)(e),dt.a.SHORT,Object(sy.d)(this.props.locale))}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.meeting,r=e.isLoading,a=e.hasError,i=e.reloadData;if(r)return o.a.createElement(bc.a,{loading:!0});var c=null;if(n){var s=n.title,u=this.formatDate(n.scheduledAt);c=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,t._("Title: {meetingTitle}",{meetingTitle:s})),o.a.createElement("div",null,t._("Scheduled at: {meetingDate}",{meetingDate:u})))}return o.a.createElement(z.a,{title:t._("Meeting Recording"),description:c},a&&o.a.createElement(EH,{message:t._("Failed to load recording"),buttonTitle:t._("Try again"),reloadData:i}),!a&&o.a.createElement(un.a,null,this.getMeetingContent()))}}])&&N3(n.prototype,r),a&&N3(n,a),t}(a.Component),V3=Object(x.withI18n)()(F3);function G3(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getMeeting($meetingId: Int!, $termClassId: Int!) {\n        termClass(dbId: $termClassId) {\n            meeting(dbId: $meetingId) {\n                dbId\n                title\n                lobbyPageUrl\n                recordingLinkEnabled\n                scheduledAt\n                startedAt\n                finishedAt\n                status\n                media {\n                    ...MediaFull\n                }\n                downloadUrl\n        }\n        }\n    }\n    ","\n"]);return G3=function(){return e},e}function U3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q3=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMeeting",value:function(e,t){return Lt.a.query({query:W3,variables:{meetingId:t,termClassId:e}}).then((function(e){var t=e.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.termClass.meeting)}))}}],(n=null)&&U3(t.prototype,n),r&&U3(t,r),e}(),W3=xt()(G3(),G_.d);function B3(e){return(B3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q3(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Y3(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Q3(o,r,a,i,c,"next",e)}function c(e){Q3(o,r,a,i,c,"throw",e)}i(void 0)}))}}function H3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z3(e){return(z3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K3(e,t){return(K3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z3=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=z3(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==B3(a)&&"function"!==typeof a?X3(r):a,$3(X3(X3(n)),"state",{meeting:null,isLoading:!1,hasError:!1}),$3(X3(X3(n)),"getData",Y3(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,r=t.classId,a=t.meetingId,n.setState({isLoading:!0,hasError:!1}),e.prev=2,e.next=5,q3.getMeeting(+r,+a);case 5:o=e.sent,n.setState({meeting:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setState({hasError:!0});case 12:return e.prev=12,n.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K3(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getData().catch((function(e){H.b.error(e)}))}},{key:"render",value:function(){var e=this.state,t=e.meeting,n=e.isLoading,r=e.hasError;return o.a.createElement(V3,{meeting:t,locale:this.props.locale,isLoading:n,reloadData:this.getData,hasError:r})}}])&&H3(n.prototype,r),a&&H3(n,a),t}(a.Component),J3=Object(c.b)((function(e){return{locale:cy.a(e)}}))(Z3),e7=n("ST1l"),t7=(n("Ezck"),n("e3lx")),n7=n.n(t7),r7=n("KpFV"),a7=n.n(r7);n("Uzro"),n("e5SK"),n("zeqS");function o7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i7(){return(i7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c7=n7.a.momentLocalizer(hR.a),s7=a7()(n7.a);function u7(e){return hR()(e).format("dddd hh:mm A")}var l7=function(e){var t=e.components,n=void 0===t?{}:t,r=e.i18n,a=function(t){var n=t.event,a=n.dbId,i=n.start,c=n.end,s=u7(i),u=u7(c),l=r._("Remove time range from {startTime} to {endTime}",{startTime:s,endTime:u});return o.a.createElement("span",{className:"c-calendar__delete-button",role:"button",tabIndex:0,onKeyDown:Object(gs.b)((function(){e.onEventDelete&&e.onEventDelete(a)})),"aria-label":l,title:l,onClick:function(){e.onEventDelete&&e.onEventDelete(a)}},o.a.createElement(Uf.a,null,Je.a.DELETE))};return a.displayName="EventCalendarComponent",o.a.createElement("div",{className:"c-calendar"},o.a.createElement(s7,i7({},function(e){return g.a.pick(e,Object.keys(l7.componentProps))}(e),{localizer:c7,components:Object.assign(n,{event:a})})))};l7.componentProps={defaultDate:M.a.object,date:M.a.object,formats:M.a.object,style:M.a.object,culture:M.a.string,defaultView:M.a.string,views:M.a.arrayOf(M.a.string),selectable:M.a.bool,resizable:M.a.bool,toolbar:M.a.bool,onSelectSlot:M.a.func,onEventDrop:M.a.func,onEventResize:M.a.func,components:M.a.object,onEventDelete:M.a.func,onNavigate:M.a.func,events:M.a.arrayOf(M.a.shape({dbId:M.a.any,start:M.a.object,end:M.a.object})),min:M.a.object},l7.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o7(e,t,n[t])}))}return e}({},l7.componentProps);var d7=Object(x.withI18n)()(l7);function f7(e){return(f7="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m7(e,t){return!t||"object"!==f7(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b7(e){return(b7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y7(e,t){return(y7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v7=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m7(this,b7(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y7(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.isMobileLayout,r=e.onPreviousDay,a=e.previousDayEnabled,i=e.onNextDay,c=e.nextDayEnabled,s=e.currentDay,u=e.onRangeDelete,l=e.locale,d=e.onSelectSlot,f=e.ranges,p=e.moveRange,m=e.resizeRange,b=[t._("Sunday"),t._("Monday"),t._("Tuesday"),t._("Wednesday"),t._("Thursday"),t._("Friday"),t._("Saturday")],y=n?"day":"week";return o.a.createElement("div",null,n&&o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(r_.a,{id:"button-group-formation-calendar-day-previous",onClick:r,enabled:a},Je.a.LEFT),o.a.createElement(r_.a,{id:"button-group-formation-calendar-day-next",onClick:i,enabled:c},Je.a.RIGHT)),o.a.createElement(d7,{defaultDate:new Date(1970,0,s),date:new Date(1970,0,s),formats:{dayFormat:function(e){return b[e.getDay()]}},onNavigate:function(){},onEventDelete:u,culture:l.frontend,onSelectSlot:d,selectable:!0,events:f,onEventDrop:p,resizable:!0,onEventResize:m,defaultView:y,views:[y],toolbar:!1,style:{height:"500px"}}))}}])&&p7(n.prototype,r),a&&p7(n,a),t}(a.Component);v7.propTypes={isMobileLayout:M.a.bool.isRequired,onPreviousDay:M.a.func.isRequired,previousDayEnabled:M.a.bool.isRequired,onNextDay:M.a.func.isRequired,nextDayEnabled:M.a.bool.isRequired,currentDay:M.a.number.isRequired,onRangeDelete:M.a.func.isRequired,locale:M.a.object.isRequired,onSelectSlot:M.a.func.isRequired,ranges:M.a.array.isRequired,moveRange:M.a.func.isRequired,resizeRange:M.a.func.isRequired};var h7=Object(x.withI18n)()(v7);function g7(e){return(g7="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w7(e,t){return!t||"object"!==g7(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S7(e){return(S7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O7(e,t){return(O7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C7=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w7(this,S7(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O7(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.totalTime,r=n.hours,a=n.minutes,i=e.locale,c=e.isMobileLayout,s=e.currentDay,u=e.previousDayEnabled,l=e.nextDayEnabled,d=e.isTotalTimeValid,f=e.errors,p=e.loading,m=e.institution,b=e.classId,y=e.groupInfo,v=y&&y.groupsFormedAt,h=y&&y.groupsFormationFinalizeAt<hR()().unix()&&!y.groupsFormedAt;return p?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(z.a,{title:t._("System Group Formation"),className:"c-system-groups"},o.a.createElement(Ge.b,{title:this.props.getQuickNav(),hideNavigation:yb.b(m),classId:b,navigationDrawerType:AI.b.STUDENT}),!v&&!h&&o.a.createElement(un.a,null,f.map((function(e){return o.a.createElement("p",{key:e,className:"u-error"},e)})),y&&o.a.createElement("p",{className:"u-display-flex u-align-items-center"},o.a.createElement(Uf.a,{ariaLabel:t._("Formation info, icon")},Je.a.INFO_OUTLINE),o.a.createElement("span",null,"\xa0\xa0"),o.a.createElement("span",null,o.a.createElement(x.Trans,{id:"Groups will be formed at <0><1/></0>. Provided schedule will be used across all assignments with same group forming type.",components:[o.a.createElement("b",null),o.a.createElement(IY.a,{value:y.groupsFormationFinalizeAt})]}))),o.a.createElement(h7,{currentDay:s,previousDayEnabled:u,nextDayEnabled:l,isMobileLayout:c,onEventDelete:this.props.onRangeDelete,locale:i,onSelectSlot:this.props.onSelectSlot,ranges:this.props.ranges,onEventDrop:this.props.moveRange,onEventResize:this.props.resizeRange,onNextDay:this.props.onNextDay,onPreviousDay:this.props.onPreviousDay,moveRange:this.props.moveRange,onRangeDelete:this.props.onRangeDelete,resizeRange:this.props.resizeRange}),o.a.createElement("div",{className:Ie()("c-system-groups__total-time",d?"c-system-groups__total-time--valid":"c-system-groups__total-time--invalid"),title:t._("Total time")},o.a.createElement(Uf.a,{ariaLabel:t._("Total time, icon")},Je.a.ACCESS_TIME),o.a.createElement("span",null,"\xa0"),o.a.createElement("span",null,t._("Total time selected:")),o.a.createElement("span",{className:"c-system-groups__total-time-text"},Object(Er.a)(r),":",Object(Er.a)(a),"."),o.a.createElement("span",null,"\xa0"),!d&&o.a.createElement("span",null,t._("At least {MIN_TOTAL_TIME_HOURS} hours must be selected.",{MIN_TOTAL_TIME_HOURS:6}))),o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(e7.a,{id:"button-system-group-formation-save",onClick:this.props.onSave,primary:!0,enabled:!this.props.submitting&&d},t._("Save"))),o.a.createElement(MH.a,{id:"speed-dial-group-formation",tooltip:{label:t._("Add new time range")}},o.a.createElement(xH.a,{key:"add_time_range",id:"speed-dial-item-add-range",onClick:this.props.showAddTimeRangeModal,ariaLabel:t._("Add new time range"),tooltip:{label:t._("Add new time range")}})),o.a.createElement(ng,null,(function(e){var n=e.loading,r=e.clickHandler;return o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(mi.a,{id:"button-group-formation-system-view-assignment",isLoading:n,primary:!0,onClick:r,ariaLabel:t._("View Assignment")},t._("View Assignment")))}))),v&&o.a.createElement(un.a,null,o.a.createElement(x.Trans,{id:"<0><1>{0}</1><2>\xa0\xa0</2><3>{1}</3></0>",values:{0:Je.a.INFO_OUTLINE,1:t._("Groups for provided activity are already formed")},components:[o.a.createElement("p",{className:"u-display-flex u-align-items-center"}),o.a.createElement(Uf.a,{ariaLabel:t._("Formation info, icon")}),o.a.createElement("span",null),o.a.createElement("span",null)]}),o.a.createElement(ng,null,(function(e){var n=e.loading,r=e.clickHandler;return o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(mi.a,{id:"button-group-formation-system-formed-view-assignment",primary:!0,isLoading:n,onClick:r,ariaLabel:t._("View Assignment")},t._("View Assignment")))}))),h&&o.a.createElement(un.a,null,o.a.createElement("p",{className:"u-display-flex u-align-items-center"},o.a.createElement(Uf.a,{ariaLabel:t._("Formation info, icon")},Je.a.INFO_OUTLINE),o.a.createElement("span",null,"\xa0\xa0"),o.a.createElement("span",null,t._("We are forming groups now, please visit this page later"))),o.a.createElement(ng,null,(function(e){var n=e.loading,r=e.clickHandler;return o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(mi.a,{id:"button-group-formation-system-forming-view-assignment",primary:!0,isLoading:n,onClick:r,ariaLabel:t._("View Assignment")},t._("View Assignment")))}))))}}])&&E7(n.prototype,r),a&&E7(n,a),t}(a.Component),_7=Object(x.withI18n)()(C7);function T7(){var e=R7(["\nquery getGroupInfo($activityId: Int!){\n  activity(dbId: $activityId) {\n    groupsFormationFinalizeAt\n    groupsFormedAt\n    name\n  }\n}\n"]);return T7=function(){return e},e}function I7(){var e=R7(["\n{\n  viewer {\n    availabilityDateRanges {\n      dbId\n      start\n      end\n    }\n  }\n}\n"]);return I7=function(){return e},e}function P7(){var e=R7(["\nmutation saveRanges($input: CreateStudentDateRangeInput!) {\n  createStudentDateRange(input:$input) {\n    ranges {\n      dbId\n      start\n      end\n    }\n    errors {\n      path\n      message\n    }\n  }\n}\n"]);return P7=function(){return e},e}function R7(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function A7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j7=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"saveRanges",value:function(e){return Lt.a.mutate({mutation:k7,variables:{input:{ranges:e}}}).then((function(e){var t=e.data.createStudentDateRange.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.createStudentDateRange.ranges)}))}},{key:"getRanges",value:function(){return Lt.a.query({query:N7}).then((function(e){var t=g.a.merge([],e.data.viewer.availabilityDateRanges);return Promise.resolve(t)}))}},{key:"getGroupInfo",value:function(e){return Lt.a.query({query:D7,variables:{activityId:e}}).then((function(e){return Promise.resolve(e.data.activity)}))}}],(n=null)&&A7(t.prototype,n),r&&A7(t,r),e}(),k7=xt()(P7()),N7=xt()(I7()),D7=xt()(T7()),L7=n("khwW"),M7=n("jztT");n("la5r");function x7(e){return(x7="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V7(e,t){return!t||"object"!==x7(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G7(e){return(G7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U7(e,t){return(U7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q7=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V7(this,G7(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U7(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.range,r=e.currentDay,a=[];return a.push(o.a.createElement(mi.a,{id:"button-group-formation-add-range-dialog-cancel",secondary:!0,ariaLabel:t._("Cancel"),onClick:Hn.a.closeModal},o.a.createElement(x.Trans,{id:"Cancel"}))),a.push(o.a.createElement(mi.a,{id:"button-group-formation-add-range-dialog-add",secondary:!0,ariaLabel:t._("Add"),enabled:this.props.isFormValid(),onClick:this.props.onAdd},o.a.createElement(x.Trans,{id:"Add"}))),o.a.createElement(pi.a,{actions:a,dialogClassName:"c-add-time-range-dialog",id:"add-time-range-dialog",title:t._("Add time range"),modal:!0,autosizeContent:!1,visible:!0},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(us.b,{id:"add-range-day",placeholder:t._("Day of week"),value:r.getTime(),onChange:this.props.onDayChange,menuItems:this.props.getDaysList()})),o.a.createElement("div",null,o.a.createElement(us.b,{label:t._("From"),id:"add-range-start-time",value:n.start?n.start.getTime():"",onChange:this.props.onStartChange,menuItems:this.props.getStartTimeList(n,r)})),o.a.createElement("div",null,o.a.createElement(us.b,{label:t._("To"),id:"add-range-end-time",value:n.end?n.end.getTime():"",onChange:this.props.onEndChange,menuItems:this.props.getEndTimeList(n,r)}))))}}])&&F7(n.prototype,r),a&&F7(n,a),t}(a.Component),W7=Object(x.withI18n)()(q7);function B7(e){return(B7="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){X7(e,t,n[t])}))}return e}function Y7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H7(e){return(H7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z7(e,t){return(z7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $7=36e5,Z7=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=H7(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==B7(a)&&"function"!==typeof a?K7(r):a,X7(K7(K7(n)),"state",{currentDay:new Date(1970,0,4),range:{start:null,end:null}}),X7(K7(K7(n)),"onDayChange",(function(e){n.setState({currentDay:new Date(e),range:{start:null,end:null}})})),X7(K7(K7(n)),"onStartChange",(function(e){var t=Q7({},n.state.range);t.start=new Date(e),n.setState({range:t})})),X7(K7(K7(n)),"onEndChange",(function(e){var t=Q7({},n.state.range);t.end=new Date(e),n.setState({range:t})})),X7(K7(K7(n)),"onAdd",(function(){n.isFormValid()&&(n.props.addRange(n.state.range.start,n.state.range.end),Hn.a.closeModal())})),X7(K7(K7(n)),"isFormValid",(function(){return!!n.state.range.start&&!!n.state.range.end})),X7(K7(K7(n)),"getTimeList",(function(e){for(var t=[],n=0;n<24;n++){var r=hR()(e.getTime()).hour(n);t.push({label:r.minutes(0).format("hh:mm A"),value:+r.minutes(0)}),t.push({label:r.minutes(30).format("hh:mm A"),value:+r.minutes(30)})}return t})),X7(K7(K7(n)),"getStartTimeList",(function(e,t){var r=e.start,a=e.end,o=n.props.isRangeOverlapped,i=n.getTimeList(r||t);return i=i.map((function(e){var t=new Date(e.value),n=o({start:t,end:a||t});return Q7({},e,{disabled:a&&(t>a||a-t<$7)||n})}))})),X7(K7(K7(n)),"getEndTimeList",(function(e,t){var r=e.start,a=e.end,o=n.props.isRangeOverlapped,i=n.getTimeList(a||t);return i=i.map((function(e){var t=new Date(e.value),n=o({end:t,start:r||t});return Q7({},e,{disabled:r&&(t<r||t-r<$7)||n})}))})),X7(K7(K7(n)),"getDaysList",(function(){var e=n.props.i18n;return[e._("Sunday"),e._("Monday"),e._("Tuesday"),e._("Wednesday"),e._("Thursday"),e._("Friday"),e._("Saturday")].map((function(e,t){return{label:e,value:+new Date(1970,0,t+4)}}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z7(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.currentDay,n=e.range;return o.a.createElement(W7,{currentDay:t,range:n,getDaysList:this.getDaysList,getEndTimeList:this.getEndTimeList,getStartTimeList:this.getStartTimeList,isFormValid:this.isFormValid,onAdd:this.onAdd,onEndChange:this.onEndChange,onStartChange:this.onStartChange,onDayChange:this.onDayChange})}}])&&Y7(n.prototype,r),a&&Y7(n,a),t}(a.Component),J7=Object(x.withI18n)()(Z7);function e4(e){return(e4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u4(e,t,n[t])}))}return e}function n4(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r4(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function a4(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){r4(o,r,a,i,c,"next",e)}function c(e){r4(o,r,a,i,c,"throw",e)}i(void 0)}))}}function o4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i4(e){return(i4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c4(e,t){return(c4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l4={SUNDAY:4,MONDAY:5,TUESDAY:6,WEDNESDAY:7,THURSDAY:8,FRIDAY:9,SATURDAY:10},d4=6,f4=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=i4(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==e4(a)&&"function"!==typeof a?s4(r):a,u4(s4(s4(n)),"state",{ranges:[],loading:!1,submitting:!1,errors:[],currentDay:l4.SUNDAY,previousDayEnabled:!1,nextDayEnabled:!0,groupInfo:null}),u4(s4(s4(n)),"onNextDay",(function(){if(n.state.currentDay!==l4.SATURDAY){var e=n.state.currentDay+1;n.setState({currentDay:e,previousDayEnabled:e!==l4.SUNDAY,nextDayEnabled:e!==l4.SATURDAY})}})),u4(s4(s4(n)),"onPreviousDay",(function(){if(n.state.currentDay!==l4.SUNDAY){var e=n.state.currentDay-1;n.setState({currentDay:e,previousDayEnabled:e!==l4.SUNDAY,nextDayEnabled:e!==l4.SATURDAY})}})),u4(s4(s4(n)),"getRanges",a4(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({loading:!0}),e.next=4,j7.getRanges();case 4:t=e.sent,t=n.normalizeRanges(t),n.setState({ranges:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),H.b.warn(e.t0);case 12:return e.prev=12,n.setState({loading:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])})))),u4(s4(s4(n)),"getGroupInfo",a4(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.activityId,e.prev=1,e.next=4,j7.getGroupInfo(+t);case 4:r=e.sent,n.setState({groupInfo:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),H.b.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))),u4(s4(s4(n)),"onRangeDelete",(function(e){var t=n.state.ranges.filter((function(t){return t.dbId!==e}));n.setState({ranges:t})})),u4(s4(s4(n)),"moveRange",(function(e){var t=e.event,r=e.start,a=e.end,o=n4(n.state.ranges),i=t4({},t);i.start=r,i.end=n.getEndTime(r,a),n.isRangeOverlapped(i)||(o=o.map((function(e){return e.dbId===i.dbId?i:e})),n.setState({ranges:o}))})),u4(s4(s4(n)),"resizeRange",(function(e,t){var r=t.event,a=t.start,o=t.end;n.changeRange(r,a,o)})),u4(s4(s4(n)),"changeRange",(function(e,t,r){var a=n.state.ranges,o=t4({},e);if(o.start=t,o.end=n.getEndTime(t,r),!n.isRangeOverlapped(o)){var i=a.map((function(t){return t.dbId===e.dbId?t4({},t,{start:o.start,end:o.end}):t}));n.setState({ranges:i})}})),u4(s4(s4(n)),"getEndTime",(function(e,t){return t.getTime()-e.getTime()<36e5?new Date(hR()(e.getTime()).add(1,"hours")):t})),u4(s4(s4(n)),"onSelectSlot",(function(e){n.addRange(e.start,e.end)})),u4(s4(s4(n)),"addRange",(function(e,t){var r=n4(n.state.ranges),a={start:e,end:t};a.end=n.getEndTime(a.start,a.end),a.dbId=IL()(5),n.isRangeOverlapped(a)||(r.push(a),n.setState({ranges:r}))})),u4(s4(s4(n)),"isRangeOverlapped",(function(e){var t=!1;return n.state.ranges.forEach((function(n){n.dbId!==e.dbId&&(e.start>=n.start&&e.start<n.end&&(t=!0),e.end>n.start&&e.end<=n.end&&(t=!0),n.start>=e.start&&n.start<e.end&&(t=!0),n.end>e.start&&n.end<=e.end&&(t=!0))})),t})),u4(s4(s4(n)),"onSave",a4(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,n.state.ranges.map((function(e){return g.a.pick(e,["start","end"])})),r=n.state.ranges.map((function(e){var t=e.start,n=e.end;return{start:hR()(t).utcOffset(0,!0).unix(),end:hR()(n).utcOffset(0,!0).unix()}})),e.prev=3,n.setState({submitting:!0,errors:[]}),e.next=7,j7.saveRanges(r);case 7:a=e.sent,a=n.normalizeRanges(a),n.setState({ranges:a}),yc.a.addSuccess(t._("Time ranges successfully saved")),e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(3),o=[t._("Error during save of time ranges. Please try again.")],e.t0.length)try{o=g.a.values(Ll(e.t0))}catch(i){H.b.warn(i)}n.setState({errors:o});case 18:return e.prev=18,n.setState({submitting:!1}),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,13,18,21]])})))),u4(s4(s4(n)),"getTotalTime",(function(){var e=0;return n.state.ranges.forEach((function(t){return e+=t.end.getTime()-t.start.getTime()})),Object(Er.c)(e/1e3)})),u4(s4(s4(n)),"getCompiledPath",(function(e,t){return V.a.compile(e)(t)})),u4(s4(s4(n)),"getQuickNav",(function(){var e=n.props,t=e.match,r=e.i18n,a=[];return a.push(o.a.createElement(L7.a,{key:"assignment-nav-item",text:n.state.groupInfo?n.state.groupInfo.name:r._("Assignment"),to:n.getCompiledPath(Qh.j.STUDENT_ACTIVITY,t4({},t.params))})),a.push(o.a.createElement(L7.a,{key:"activity-name-nav-item",text:r._("Group forming")})),o.a.createElement(M7.a,{navItems:a})})),u4(s4(s4(n)),"getSystemFormGroupPage",(function(e){var t=n.getTotalTime(),r=n.props.match.params.classId;return o.a.createElement(_7,{onSave:n.onSave,getQuickNav:n.getQuickNav,groupInfo:n.state.groupInfo,institution:n.props.institution,classId:+r,totalTime:t,onNextDay:n.onNextDay,onPreviousDay:n.onPreviousDay,addRange:n.addRange,changeRange:n.changeRange,ranges:n.state.ranges,loading:n.state.loading,submitting:n.state.submitting,errors:n.state.errors,locale:n.props.locale,previousDayEnabled:n.state.previousDayEnabled,nextDayEnabled:n.state.nextDayEnabled,currentDay:n.state.currentDay,showAddTimeRangeModal:n.showAddTimeRangeModal,isMobileLayout:e,isTotalTimeValid:t.hours>=d4,onSelectSlot:n.onSelectSlot,isRangeOverlapped:n.isRangeOverlapped,resizeRange:n.resizeRange,moveRange:n.moveRange,onRangeDelete:n.onRangeDelete})})),u4(s4(s4(n)),"showAddTimeRangeModal",(function(){Hn.a.showModal(o.a.createElement(J7,{isRangeOverlapped:n.isRangeOverlapped,addRange:n.addRange}))})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c4(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getRanges().catch(),this.getGroupInfo().catch()}},{key:"normalizeRanges",value:function(e){return e.map((function(e){return e.start=new Date(hR.a.unix(e.start).utc().format("LLL")),e.end=new Date(hR.a.unix(e.end).utc().format("LLL")),e}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Gr.a,{query:"(max-width: 930px)"},this.getSystemFormGroupPage(!0)),o.a.createElement(Gr.a,{query:"(min-width: 931px)"},this.getSystemFormGroupPage(!1)))}}])&&o4(n.prototype,r),a&&o4(n,a),t}(a.Component),p4=Object(x.withI18n)()(Object(c.b)((function(e){return{locale:cy.a(e),institution:bb.h(e)}}))(f4));n("l+gj");function m4(e){return(m4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v4(e,t){return!t||"object"!==m4(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h4(e){return(h4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g4(e,t){return(g4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E4=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v4(this,h4(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g4(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.data,n=e.readNotifications,r=t.messages.filter((function(e){return!e.viewedAt})).length,a=o.a.createElement("span",null,o.a.createElement("span",{className:"c-notification__title"},t.activityName),r>0&&o.a.createElement("span",{className:"c-notification__unread"}," (".concat(r," unread)")));return o.a.createElement(da.t,{label:a,onExpandToggle:function(e){return e&&n()},className:"c-notification",footer:null},t.messages.map((function(e){var t=!e.viewedAt;return o.a.createElement("div",{key:e.dbId,className:Ie()("c-notification__item",b4({},"c-notification__item--unread",t))},o.a.createElement("div",{className:"c-notification__item-date"},o.a.createElement(Gf.a,{unixTime:e.createdAt,dateTimeFormat:dt.a.SHORT})),o.a.createElement("div",{className:"c-notification__item-text"},e.text))})))}}])&&y4(n.prototype,r),a&&y4(n,a),t}(a.Component),w4=Object(x.withI18n)()(E4);function S4(e){return(S4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C4(e,t){return!t||"object"!==S4(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _4(e){return(_4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T4(e,t){return(T4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I4=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C4(this,_4(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T4(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.notifications,n=e.readNotifications;return o.a.createElement("div",{className:"c-notifications"},t.map((function(e){return o.a.createElement(w4,{key:e.activityId,readNotifications:n.bind(null,e.activityId),data:e})})))}}])&&O4(n.prototype,r),a&&O4(n,a),t}(a.Component);function P4(e){return(P4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A4(e,t){return!t||"object"!==P4(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j4(e){return(j4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k4(e,t){return(k4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N4=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A4(this,j4(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k4(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.notifications,a=e.loading,i=e.error,c=e.reloadData,s=e.readNotifications;if(a)return o.a.createElement(bc.a,{loading:!0});var u=r&&!!r.length;return o.a.createElement(z.a,{title:t._("Notifications")},i&&o.a.createElement(EH,{reloadData:c,buttonTitle:t._("Try again"),message:t._("Failed to load notifications data")}),o.a.createElement(iA,{classId:n,context:VO.a.NOTIFICATIONS}),u&&o.a.createElement(un.a,null,o.a.createElement(I4,{notifications:r,classId:n,readNotifications:s})),!i&&!u&&o.a.createElement(un.a,null,o.a.createElement("p",null,t._("No notifications yet"))))}}])&&R4(n.prototype,r),a&&R4(n,a),t}(a.Component),D4=Object(x.withI18n)()(N4);function L4(){var e=x4(["\nmutation viewNotifications($input: UserNotificationSetAsReadInput!){\n  setUserNotificationsStatusRead(input: $input) {\n    updatedIds\n  }\n}\n"]);return L4=function(){return e},e}function M4(){var e=x4(["\nquery getNotifications($termClassDbId: Int!){\n  viewer {\n    notifications(termClassDbId: $termClassDbId) {\n      id\n      activity {\n        dbId\n        name\n      }\n      message\n      createdAt\n      viewedAt\n    }\n  }\n}\n"]);return M4=function(){return e},e}function x4(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function F4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V4=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getNotifications",value:function(e){return Lt.a.query({query:G4,variables:{termClassDbId:e},fetchPolicy:"network-only"}).then((function(e){return Promise.resolve(e.data.viewer.notifications)}))}},{key:"normalizeNotifications",value:function(e){var t={};return e.forEach((function(e){var n=e.activity.dbId;t[n]||(t[n]={activityId:n,activityName:e.activity.name,messages:[]}),t[n].messages.push({dbId:e.id,text:e.message.split(":::")[1],createdAt:e.createdAt,viewedAt:e.viewedAt})})),g.a.values(t)}},{key:"viewNatifications",value:function(e,t){return Lt.a.mutate({mutation:U4,variables:{input:{termClassDbId:e,notifications:t}}}).then((function(e){return Promise.resolve(e.data.setUserNotificationsStatusRead.updatedIds)}))}}],(n=null)&&F4(t.prototype,n),r&&F4(t,r),e}(),G4=xt()(M4()),U4=xt()(L4());function q4(e){return(q4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W4(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function B4(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){W4(o,r,a,i,c,"next",e)}function c(e){W4(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Q4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y4(e){return(Y4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H4(e,t){return(H4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X4=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Y4(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==q4(a)&&"function"!==typeof a?z4(r):a,K4(z4(z4(n)),"state",{notifications:[],loading:!1,error:!1}),K4(z4(z4(n)),"readNotifications",function(){var e=B4(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.a.merge([],n.state.notifications),a=n.props.match.params.classId,-1!==(o=g.a.findIndex(r,{activityId:t}))){e.next=5;break}return e.abrupt("return");case 5:return i=(i=(i=r[o].messages).filter((function(e){return!e.viewedAt}))).map((function(e){return e.dbId})),e.prev=8,e.next=11,V4.viewNatifications(+a,i);case 11:r[o]=g.a.merge({},r[o]),r[o].messages=r[o].messages.map((function(e){return e.viewedAt||(e.viewedAt=hR()().unix()),e})),n.setState({notifications:r}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),H.b.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()),K4(z4(z4(n)),"getNotifications",B4(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setState({loading:!0,error:!1}),e.prev=2,e.next=5,V4.getNotifications(+t);case 5:r=e.sent,r=V4.normalizeNotifications(r),n.setState({notifications:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n.setState({error:!0});case 13:return e.prev=13,n.setState({loading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H4(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getNotifications().catch()}},{key:"render",value:function(){var e=this.props.match.params.classId,t=this.state,n=t.notifications,r=t.loading,a=t.error;return o.a.createElement(D4,{classId:+e,readNotifications:this.readNotifications,notifications:n,loading:r,error:a,reloadData:this.getNotifications})}}])&&Q4(n.prototype,r),a&&Q4(n,a),t}(a.Component);function $4(e){return($4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J4(e,t){return!t||"object"!==$4(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function e9(e){return(e9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t9(e,t){return(t9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var n9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J4(this,e9(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&t9(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId,r=e.notifications,a=e.loading,i=e.error,c=e.reloadData,s=e.institution,u=e.readNotifications;if(a)return o.a.createElement(bc.a,{loading:!0});var l=r&&!!r.length;return o.a.createElement(z.a,{title:t._("Notifications")},i&&o.a.createElement(EH,{reloadData:c,buttonTitle:t._("Try again"),message:t._("Failed to load notifications data")}),!i&&o.a.createElement(y3.a,{hideNavigation:yb.b(s),classId:n,navigationDrawerType:AI.b.STUDENT}),l&&o.a.createElement(un.a,null,o.a.createElement(I4,{notifications:r,readNotifications:u})),!i&&!l&&o.a.createElement(un.a,null,o.a.createElement("p",null,t._("No notifications yet"))))}}])&&Z4(n.prototype,r),a&&Z4(n,a),t}(a.Component),r9=Object(x.withI18n)()(n9);function a9(e){return(a9="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o9(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i9(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){o9(o,r,a,i,c,"next",e)}function c(e){o9(o,r,a,i,c,"throw",e)}i(void 0)}))}}function c9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s9(e){return(s9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u9(e,t){return(u9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l9(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f9=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=s9(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==a9(a)&&"function"!==typeof a?l9(r):a,d9(l9(l9(n)),"state",{notifications:[],loading:!1,error:!1}),d9(l9(l9(n)),"readNotifications",function(){var e=i9(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.a.merge([],n.state.notifications),a=n.props.match.params.classId,-1!==(o=g.a.findIndex(r,{activityId:t}))){e.next=5;break}return e.abrupt("return");case 5:return i=(i=(i=r[o].messages).filter((function(e){return!e.viewedAt}))).map((function(e){return e.dbId})),e.prev=8,e.next=11,V4.viewNatifications(+a,i);case 11:r[o]=g.a.merge({},r[o]),r[o].messages=r[o].messages.map((function(e){return e.viewedAt||(e.viewedAt=hR()().unix()),e})),n.setState({notifications:r}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),H.b.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()),d9(l9(l9(n)),"getNotifications",i9(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,n.setState({loading:!0,error:!1}),e.prev=2,e.next=5,V4.getNotifications(+t);case 5:r=e.sent,r=V4.normalizeNotifications(r),n.setState({notifications:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n.setState({error:!0});case 13:return e.prev=13,n.setState({loading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])})))),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u9(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getNotifications().catch()}},{key:"render",value:function(){var e=this.props,t=e.match.params.classId,n=e.institution,r=this.state,a=r.notifications,i=r.loading,c=r.error;return o.a.createElement(r9,{classId:+t,institution:n,notifications:a,loading:i,error:c,readNotifications:this.readNotifications,reloadData:this.getNotifications})}}])&&c9(n.prototype,r),a&&c9(n,a),t}(a.Component),p9=Object(c.b)((function(e){return{institution:bb.h(e)}}))(f9);function m9(e){return(m9="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y9(e,t){return!t||"object"!==m9(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v9(e){return(v9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h9(e,t){return(h9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y9(this,v9(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h9(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.verificationIsLoading,r=e.verifyEmail,a=e.settingsIsLoading,i=e.settings,c=e.getChangeStateHandler,s=e.user,u=e.saveIsLoading,l=e.onSave,d=e.is508on,f=e.onContactEmailChange,p=e.emailIsValid,m=e.initialEmailChanged;if(a)return o.a.createElement(un.a,null,o.a.createElement(W$.a,{id:"settings-loading-progress"}));var b=Object(ar.f)(s),y=(b&&p||!b)&&!u;return o.a.createElement(un.a,null,o.a.createElement("div",{className:"u-pb-40px"},o.a.createElement("h2",null,t._("Accessibility")),o.a.createElement(GO.a,{id:"accessibility",name:"accessibility",checked:d,onChange:c("is508on"),enabled:!u,label:t._("Use this if you have impaired vision and use a screen reader or high contrast settings"),ariaLabel:t._("Enable accessibility features")})),b&&o.a.createElement("div",{className:"u-pb-40px"},o.a.createElement("h2",null,t._("Contact email")),o.a.createElement("div",{className:"u-pb-5px"},o.a.createElement(Tl.b,{id:"contact-email",type:"email",errorText:p?"":t._("Email is invalid"),onChange:f,enabled:!u,value:i.contactEmail,label:t._("Contact email"),ariaLabel:t._("Contact email")})),!m()&&o.a.createElement("div",null,!i.contactEmailVerified&&o.a.createElement(mi.a,{id:"button-settings-card-email-send",onClick:r,primary:!0,enabled:!n&&!u,isLoading:n},t._("Send verification email")),i.contactEmailVerified&&o.a.createElement(mi.a,{id:"button-settings-card-email-verified",primary:!0,enabled:!1},t._("Email is verified")))),b&&o.a.createElement("div",{className:"u-pb-40px"},o.a.createElement("h2",null,t._("Email notifications")),o.a.createElement("p",null,t._("Emails will be sent based on your selections below")),o.a.createElement(GO.a,{id:"group-project",name:"group-project",enabled:!u,checked:i.notifications.groupProjectActions,onChange:c("settings.notifications.groupProjectActions"),label:t._("When new actions related to your group project activities are available"),ariaLabel:t._("When new actions related to your group project activities are available")}),o.a.createElement(GO.a,{id:"role-play",name:"role-play",enabled:!u,checked:i.notifications.rolePlayActions,onChange:c("settings.notifications.rolePlayActions"),label:t._("When new actions related to your role play activities are available"),ariaLabel:t._("When new actions related to your role play activities are available")}),o.a.createElement(GO.a,{id:"conversation",name:"conversation",enabled:!u,checked:i.notifications.conversationActions,onChange:c("settings.notifications.conversationActions"),label:t._("When new actions related to your conversation activities are available"),ariaLabel:t._("When new actions related to your conversation activities are available")}),o.a.createElement(GO.a,{id:"conversation-respond",name:"conversation-respond",enabled:!u,checked:i.notifications.conversationResponseExpected,onChange:c("settings.notifications.conversationResponseExpected"),label:t._("When you are expected to respond to the conversation activity"),ariaLabel:t._("When you are expected to respond to the conversation activity")})),o.a.createElement("div",{className:"u-display-flex u-justify-end"},o.a.createElement(e7.a,{id:"button-settings-card-save",enabled:y,onClick:l,primary:!0},t._("Save"))))}}])&&b9(n.prototype,r),a&&b9(n,a),t}(a.Component),E9=Object(x.withI18n)()(g9);function w9(){var e=T9(["\n    mutation edit508($input: Boolean!){\n        edit508(input:$input) {\n            user {\n                is508on\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return w9=function(){return e},e}function S9(){var e=T9(["\n    {\n        viewer {\n            notificationSettings {\n                contactEmailVerified\n            }\n        }\n    }\n"]);return S9=function(){return e},e}function O9(){var e=T9(["\n    mutation sendEmailVerificationLetter {\n        sendEmailVerificationLetter {\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return O9=function(){return e},e}function C9(){var e=T9(["\n    mutation editNotificationSettings($input: NotificationSettingsInput!) {\n        editNotificationSettings(input: $input) {\n            user {\n                notificationSettings {\n                    contactEmail\n                    contactEmailVerified\n                    notifications {\n                        groupProjectActions\n                        rolePlayActions\n                        conversationActions\n                        conversationResponseExpected\n                    }\n                }\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return C9=function(){return e},e}function _9(){var e=T9(["\n    {\n        viewer {\n            notificationSettings {\n                contactEmail\n                contactEmailVerified\n                notifications {\n                    groupProjectActions\n                    rolePlayActions\n                    conversationActions\n                    conversationResponseExpected\n                }\n            }\n        }\n    }\n"]);return _9=function(){return e},e}function T9(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function I9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P9=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getSettings",value:function(){return Lt.a.query({query:R9}).then((function(e){return Promise.resolve(e.data.viewer.notificationSettings)}))}},{key:"sendVerificationRequest",value:function(){return Lt.a.mutate({mutation:j9}).then((function(e){var t=e.data.sendEmailVerificationLetter.errors;return t&&t.length?Promise.reject(t):Promise.resolve()}))}},{key:"saveSettings",value:function(e){return Lt.a.mutate({mutation:A9,variables:{input:e}}).then((function(t){var n=t.data.editNotificationSettings.errors;if(n&&n.length)return Promise.reject(n);var r=t.data.editNotificationSettings.user.notificationSettings;return Ft.a.dispatch(O5.q(e.is508on)),Promise.resolve(r)}))}},{key:"getContactEmailVerified",value:function(){return Lt.a.query({query:k9}).then((function(e){return Promise.resolve(e.data.viewer.notificationSettings.contactEmailVerified)}))}},{key:"edit508",value:function(e){return Lt.a.mutate({mutation:N9,variables:{input:e}}).then((function(e){var t=e.data.edit508.errors;if(t&&t.length)return Promise.reject(t);var n=e.data.edit508.user.is508on;return Ft.a.dispatch(O5.q(n)),Promise.resolve(n)}))}}],(n=null)&&I9(t.prototype,n),r&&I9(t,r),e}(),R9=xt()(_9()),A9=xt()(C9()),j9=xt()(O9()),k9=xt()(S9()),N9=xt()(w9());function D9(e){return(D9="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L9(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function M9(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L9(o,r,a,i,c,"next",e)}function c(e){L9(o,r,a,i,c,"throw",e)}i(void 0)}))}}function x9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F9(e){return(F9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V9(e,t){return(V9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G9(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q9=1e4,W9=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=F9(t).call(this,e),n=!a||"object"!==D9(a)&&"function"!==typeof a?G9(r):a,U9(G9(G9(n)),"getSettings",M9(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.user,e.prev=1,n.setState({settingsIsLoading:!0}),e.next=5,P9.getSettings();case 5:r=e.sent,r=g.a.merge({},r),n.initialEmail=r.contactEmail,n.setState({settingsIsLoading:!1,settings:r}),Object(ar.f)(t)&&n.checkEmailVerification(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),H.b.error(e.t0),n.setState({settingsIsLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[1,12]])})))),U9(G9(G9(n)),"initialEmailChanged",(function(){return n.initialEmail!==n.state.settings.contactEmail})),U9(G9(G9(n)),"verifyEmail",M9(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,e.prev=1,n.setState({verificationIsLoading:!0}),e.next=5,P9.sendVerificationRequest();case 5:n.setState({verificationIsLoading:!1}),yc.a.addSuccess(t._("Verification email is successfully sent")),n.checkEmailVerification(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),H.b.error(e.t0),yc.a.addError(t._("Failed to send verification email")),n.setState({verificationIsLoading:!1});case 15:case"end":return e.stop()}}),e,this,[[1,10]])})))),U9(G9(G9(n)),"checkEmailVerification",M9(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopCheckEmailVerification(),e.prev=1,e.next=4,P9.getContactEmailVerified();case 4:(t=e.sent)||(n.checkEmailVerificationTimeout=setTimeout(n.checkEmailVerification,q9)),n.getChangeStateHandler("settings.contactEmailVerified")(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),H.b.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))),U9(G9(G9(n)),"stopCheckEmailVerification",(function(){clearTimeout(n.checkEmailVerificationTimeout)})),U9(G9(G9(n)),"getChangeStateHandler",(function(e){return function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U9(e,t,n[t])}))}return e}({},n.state);g.a.set(r,e,t),n.setState(r)}})),U9(G9(G9(n)),"onSave",M9(regeneratorRuntime.mark((function e(){var t,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.i18n,a=t.user,o=Object(ar.f)(a),i=Object(ar.b)(a),e.prev=3,n.setState({saveIsLoading:!0}),!o){e.next=9;break}return e.next=8,n.saveForStudent();case 8:n.checkEmailVerification();case 9:if(!i){e.next=12;break}return e.next=12,n.saveForEducator();case 12:n.setState({saveIsLoading:!1}),yc.a.addSuccess(r._("Settings are successfully saved")),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),H.b.error(e.t0),yc.a.addError(r._("Failed to save settings")),n.setState({saveIsLoading:!1});case 21:case"end":return e.stop()}}),e,this,[[3,16]])})))),U9(G9(G9(n)),"validateEmail",(function(){var e=/\S+@\S+\.\S+/.test(n.state.settings.contactEmail);n.setState({emailIsValid:e})})),U9(G9(G9(n)),"saveForStudent",M9(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.i18n,r={contactEmail:n.state.settings.contactEmail,is508on:n.state.is508on,groupProjectActions:n.state.settings.notifications.groupProjectActions,rolePlayActions:n.state.settings.notifications.rolePlayActions,conversationActions:n.state.settings.notifications.conversationActions,conversationResponseExpected:n.state.settings.notifications.conversationResponseExpected},e.next=4,P9.saveSettings(r);case 4:a=e.sent,a=g.a.merge({},a),n.initialEmail!==a.contactEmail&&(yc.a.addSuccess(t._("Verification email is successfully sent")),n.initialEmail=a.contactEmail),n.setState({settings:a});case 8:case"end":return e.stop()}}),e,this)})))),U9(G9(G9(n)),"saveForEducator",M9(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P9.edit508(n.state.is508on);case 2:t=e.sent,n.setState({is508on:t});case 4:case"end":return e.stop()}}),e,this)})))),U9(G9(G9(n)),"onContactEmailChange",(function(e){var t=g.a.merge({},n.state);t.settings.contactEmail=e,n.setState(t,n.validateEmail)})),n.state={is508on:!!e.is508on,verificationIsLoading:!1,settingsIsLoading:!1,saveIsLoading:!1,emailIsValid:!0,settings:{contactEmail:"",contactEmailVerified:!1,notifications:{groupProjectActions:!1,rolePlayActions:!1,conversationActions:!1,conversationResponseExpected:!1}}},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V9(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){Object(ar.f)(this.props.user)&&this.getSettings().catch()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.is508on!==e.is508on&&this.setState({is508on:e.is508on})}},{key:"componentWillUnmount",value:function(){this.stopCheckEmailVerification()}},{key:"render",value:function(){var e=this.state,t=e.verificationIsLoading,n=e.settingsIsLoading,r=e.settings,a=e.is508on;return o.a.createElement(E9,{verificationIsLoading:t,user:this.props.user,saveIsLoading:this.state.saveIsLoading,emailIsValid:this.state.emailIsValid,onSave:this.onSave,initialEmailChanged:this.initialEmailChanged,is508on:a,verifyEmail:this.verifyEmail,onContactEmailChange:this.onContactEmailChange,getChangeStateHandler:this.getChangeStateHandler,settingsIsLoading:n,settings:r})}}])&&x9(n.prototype,r),a&&x9(n,a),t}(a.Component),B9=Object(c.b)((function(e){return{user:wt.h(e),is508on:wt.b(e)}}))(Object(x.withI18n)()(W9));function Q9(e){return(Q9="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H9(e,t){return!t||"object"!==Q9(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z9(e){return(z9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K9(e,t){return(K9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H9(this,z9(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K9(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId;return o.a.createElement(z.a,{title:t._("Settings")},o.a.createElement(y3.a,{classId:n,navigationDrawerType:v3.a.STUDENT}),o.a.createElement(B9,null))}}])&&Y9(n.prototype,r),a&&Y9(n,a),t}(a.Component),$9=Object(x.withI18n)()(X9);function Z9(e){return(Z9="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e6(e,t){return!t||"object"!==Z9(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function t6(e){return(t6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n6(e,t){return(n6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e6(this,t6(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n6(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.classId;return o.a.createElement($9,{classId:+e})}}])&&J9(n.prototype,r),a&&J9(n,a),t}(a.Component);function a6(e){return(a6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i6(e,t){return!t||"object"!==a6(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c6(e){return(c6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s6(e,t){return(s6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i6(this,c6(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s6(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.classId;return o.a.createElement(z.a,{title:t._("Settings")},o.a.createElement(y3.a,{classId:n,navigationDrawerType:v3.a.EDUCATOR}),o.a.createElement(B9,null))}}])&&o6(n.prototype,r),a&&o6(n,a),t}(a.Component),l6=Object(x.withI18n)()(u6);function d6(e){return(d6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p6(e,t){return!t||"object"!==d6(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m6(e){return(m6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b6(e,t){return(b6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p6(this,m6(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b6(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.classId;return o.a.createElement(l6,{classId:+e})}}])&&f6(n.prototype,r),a&&f6(n,a),t}(a.Component);function v6(e){return(v6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g6(e,t){return!t||"object"!==v6(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E6(e){return(E6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w6(e,t){return(w6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g6(this,E6(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w6(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.media,n=e.isLoading,r=e.hasError,a=e.reloadData,i=e.i18n,c=e.isEmbeded;if(n||!t&&!r)return o.a.createElement(bc.a,{loading:!0});var s=t&&o.a.createElement(mf.a,{media:t,logMediaWatching:!1,playerId:"External player #"+t.dbId}),u=o.a.createElement(EH,{reloadData:a,message:i._("Failed to load media"),buttonTitle:i._("Try again")}),l=t&&t.recordingAvailability&&t.recordingAvailability===fo.D2L_FREEMIUM_EXPIRED,d=i._("This meeting is no longer available.");return c?r?u:l?o.a.createElement("p",null,d):s:o.a.createElement(z.a,{title:t?t.title:""},r&&u,t&&o.a.createElement(un.a,null,l?o.a.createElement("p",null,d):s))}}])&&h6(n.prototype,r),a&&h6(n,a),t}(a.Component),O6=Object(x.withI18n)()(S6);function C6(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query getMedia ($dbId: Int!, $signature: String!){\n        mediaForPlayExternally(dbId: $dbId, signature: $signature) {\n            dbId\n            srcUrl\n            title\n            recordingAvailability\n            caption {\n                ...MediaCaption\n            }\n            transcript {\n                src\n                fileSizeBytes\n            }\n            slaveMedia {\n                dbId\n                srcUrl\n            }\n            meetingAssets {\n                svgUrl\n                cursorUrl\n                zoomsUrl\n                chatMessagesUrl\n                eventsUrl\n            }\n        }\n    }\n    ","\n"]);return C6=function(){return e},e}function _6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T6=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMedia",value:function(e,t){return Lt.a.query({query:I6,variables:{dbId:e,signature:t}}).then((function(e){return e.errors&&e.errors.length>0?Promise.reject(e.errors):Promise.resolve(e.data.mediaForPlayExternally)}))}}],(n=null)&&_6(t.prototype,n),r&&_6(t,r),e}(),I6=xt()(C6(),G_.c);function P6(e){return(P6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R6(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function A6(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){R6(o,r,a,i,c,"next",e)}function c(e){R6(o,r,a,i,c,"throw",e)}i(void 0)}))}}function j6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k6(e){return(k6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N6(e,t){return(N6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D6(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M6=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=k6(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==P6(a)&&"function"!==typeof a?D6(r):a,L6(D6(D6(n)),"state",{media:void 0,isLoading:!1,hasError:!1}),L6(D6(D6(n)),"getMedia",A6(regeneratorRuntime.mark((function e(){var t,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.match.params,r=t.mediaId,a=t.signature,e.prev=1,n.setState({isLoading:!0,hasError:!1}),o=null,!(i=n.getMediaOverride())){e.next=9;break}o=i,e.next=12;break;case 9:return e.next=11,T6.getMedia(+r,a);case 11:o=e.sent;case 12:n.setState({isLoading:!1,hasError:!1,media:o}),H.b.info(o),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),n.setState({isLoading:!1,hasError:!0}),H.b.error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,16]])})))),L6(D6(D6(n)),"getMediaOverride",(function(){var e=new URLSearchParams(window.location.search).get("mediaOverride");if(e&&sessionStorage[e])try{return JSON.parse(sessionStorage[e]).data.mediaForPlayExternally}catch(t){H.b.debug("Found mediaOverride of '".concat(e,"' but could not parse content:"),sessionStorage[e],t)}return null})),L6(D6(D6(n)),"isEmbeded",(function(){return"1"===new URLSearchParams(window.location.search).get("embedded")})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N6(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getMedia().catch()}},{key:"render",value:function(){var e=this.state,t=e.media,n=e.isLoading,r=e.hasError;return o.a.createElement(O6,{media:t,reloadData:this.getMedia,isEmbeded:this.isEmbeded(),isLoading:n,hasError:r})}}])&&j6(n.prototype,r),a&&j6(n,a),t}(a.Component);function x6(e){return(x6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V6(e,t){return!t||"object"!==x6(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G6(e){return(G6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U6(e,t){return(U6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V6(this,G6(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U6(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.classId,n=e.i18n,r=e.isLoading,a=e.hasLoadError,i=e.lmsCode,c=e.onLmsCodeChange,s=e.isSubmitting,u=e.reloadData,l=e.submit,d=e.classIsTemplate,f=e.onClassIsTemplateChange,p=e.showClientErrors,m=e.serverErrors;return r?o.a.createElement(bc.a,{loading:!0}):o.a.createElement(z.a,{title:n._("Template Settings")},o.a.createElement(iA,{classId:t,context:VO.a.TEMPLATE_SETTINGS}),!a&&o.a.createElement(un.a,null,m&&m.length>0&&o.a.createElement("ul",{className:"u-pb-20px u-pl-15px"},m.map((function(e){return o.a.createElement("li",{key:e,className:"u-error"},o.a.createElement("p",null,e))}))),o.a.createElement("div",null,o.a.createElement(nC.a,{ariaLabel:n._("Class is a Template"),id:"class-is-template-toggle",checked:d,label:n._("Class is a Template"),name:"class-is-template-toggle",onChange:f})),d&&o.a.createElement(Tl.b,{name:"lti-code",id:"lti-code",errorText:p&&i.error?i.error:"",onChange:c,value:i.value,label:n._("Template Identifier"),ariaLabel:n._("Template Identifier")}),o.a.createElement("div",{className:"u-display-flex u-justify-end u-pt-20px"},o.a.createElement(mi.a,{id:"button-template-settings-submit",primary:!0,onClick:l,isLoading:s},n._("Submit")))),a&&o.a.createElement(EH,{reloadData:u,message:n._("Unable to load LMS Template identifier"),buttonTitle:n._("Try again")}))}}])&&F6(n.prototype,r),a&&F6(n,a),t}(a.Component),W6=Object(x.withI18n)()(q6);function B6(){var e=Y6(["\n    mutation modifyTermClassLmsTemplateCode($input: TermClassModifyLmsTemplateCodeInput!) {\n        modifyTermClassLmsTemplateCode(input: $input) {\n            termClass {\n                lmsTemplateCode\n            }\n        }\n    }\n"]);return B6=function(){return e},e}function Q6(){var e=Y6(["\n    query lmsTemplateCode($dbId: Int!) {\n        termClass(dbId: $dbId) {\n            lmsTemplateCode\n        }\n    }\n\n"]);return Q6=function(){return e},e}function Y6(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function H6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z6=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getLmsCode",value:function(e){return Lt.a.query({query:K6,variables:{dbId:e}}).then((function(e){return e.errors&&e.errors.length?Promise.reject(e.errors):Promise.resolve(e.data.termClass.lmsTemplateCode)}))}},{key:"setLmsCode",value:function(e){var t=e.classId,n=e.lmsCode;return Lt.a.mutate({mutation:X6,variables:{input:{dbId:t,lmsTemplateCode:n}}}).then((function(e){return e.errors&&e.errors.length?Promise.reject(e.errors):Promise.resolve(e.data.modifyTermClassLmsTemplateCode.termClass.lmsTemplateCode)}))}}],(n=null)&&H6(t.prototype,n),r&&H6(t,r),e}(),K6=xt()(Q6()),X6=xt()(B6());function $6(e){return($6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oee(e,t,n[t])}))}return e}function J6(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function eee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){J6(o,r,a,i,c,"next",e)}function c(e){J6(o,r,a,i,c,"throw",e)}i(void 0)}))}}function tee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nee(e){return(nee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ree(e,t){return(ree=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iee=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=nee(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==$6(a)&&"function"!==typeof a?aee(r):a,oee(aee(aee(n)),"state",{isLoading:!1,isSubmitting:!1,hasLoadError:!1,lmsCode:{value:null,error:null},classIsTemplate:!1,showClientErrors:!1,serverErrors:[]}),oee(aee(aee(n)),"getLmsCode",eee(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.classId,e.prev=1,n.setState({isLoading:!0,hasLoadError:!1}),e.next=5,z6.getLmsCode(+t);case 5:r=e.sent,n.setState({isLoading:!1,hasLoadError:!1}),n.setLmsCode(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.setState({isLoading:!1,hasLoadError:!0});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})))),oee(aee(aee(n)),"setLmsCode",(function(e){n.setState({lmsCode:Z6({},n.state.lmsCode,{value:e}),classIsTemplate:Boolean(e)})})),oee(aee(aee(n)),"onClassIsTemplateChange",(function(e){n.setState({classIsTemplate:e})})),oee(aee(aee(n)),"validate",(function(){var e=n.props.i18n,t=!0;return n.state.classIsTemplate&&!n.state.lmsCode.value?(t=!1,n.setState({lmsCode:Z6({},n.state.lmsCode,{error:e._("Required")})})):n.setState({lmsCode:Z6({},n.state.lmsCode,{error:null})}),t})),oee(aee(aee(n)),"submit",eee(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.match.params.classId,a=t.i18n,n.validate()){e.next=5;break}return n.setState({showClientErrors:!0}),e.abrupt("return");case 5:return e.prev=5,n.setState({isSubmitting:!0,serverErrors:[]}),o=g.a.trim(n.state.lmsCode.value),n.state.classIsTemplate||(o=null),e.next=11,z6.setLmsCode({classId:+r,lmsCode:o});case 11:i=e.sent,n.setLmsCode(i),n.setState({isSubmitting:!1}),yc.a.addSuccess(a._("Successfully updated LMS Template identifier.")),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(5),n.setState({isSubmitting:!1}),yc.a.addError(a._("Unable to update LMS Template identifier."));try{c=g.a.compact(g.a.values(Ll(e.t0)))}catch(s){H.b.error(e.t0)}c&&c.length&&n.setState({serverErrors:c});case 23:case"end":return e.stop()}}),e,this,[[5,17]])})))),oee(aee(aee(n)),"onLmsCodeChange",(function(e){var t=g.a.trimStart(e);n.setState({lmsCode:Z6({},n.state.lmsCode,{value:t})},n.validate)})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ree(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getLmsCode().catch()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.hasLoadError,r=e.lmsCode,a=e.isSubmitting,i=e.classIsTemplate,c=e.showClientErrors,s=e.serverErrors,u=this.props.match.params.classId;return o.a.createElement(W6,{classId:+u,isLoading:t,hasLoadError:n,showClientErrors:c,isSubmitting:a,classIsTemplate:i,serverErrors:s,onClassIsTemplateChange:this.onClassIsTemplateChange,reloadData:this.getLmsCode,submit:this.submit,onLmsCodeChange:this.onLmsCodeChange,lmsCode:r})}}])&&tee(n.prototype,r),a&&tee(n,a),t}(a.Component),cee=Object(x.withI18n)()(iee);function see(e){return(see="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lee(e,t){return!t||"object"!==see(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dee(e){return(dee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fee(e,t){return(fee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lee(this,dee(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.termClassId;return o.a.createElement(z.a,null,o.a.createElement(iA,{classId:e,context:VO.a.TRIAL,showQuickNav:!1}),o.a.createElement(XR,null))}}])&&uee(n.prototype,r),a&&uee(n,a),t}(a.Component);pee.propTypes={termClassId:M.a.number,i18n:M.a.any};var mee=Object(x.withI18n)()(pee);function bee(e){return(bee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vee(e,t){return!t||"object"!==bee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hee(e){return(hee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gee(e,t){return(gee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Eee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vee(this,hee(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.classId;return o.a.createElement(mee,{termClassId:+e})}}])&&yee(n.prototype,r),a&&yee(n,a),t}(a.Component);function wee(e){return(wee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function See(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oee(e,t){return!t||"object"!==wee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cee(e){return(Cee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _ee(e,t){return(_ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oee(this,Cee(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.termClassId,n=e.institution;return o.a.createElement(z.a,null,o.a.createElement(Ge.b,{hideNavigation:yb.b(n),classId:t,navigationDrawerType:AI.b.STUDENT}),o.a.createElement(XR,null))}}])&&See(n.prototype,r),a&&See(n,a),t}(a.Component);Tee.propTypes={termClassId:M.a.number,i18n:M.a.any};var Iee=Object(x.withI18n)()(Object(c.b)((function(e){return{institution:bb.h(e)}}))(Tee));function Pee(e){return(Pee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ree(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aee(e,t){return!t||"object"!==Pee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jee(e){return(jee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kee(e,t){return(kee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Aee(this,jee(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.classId;return o.a.createElement(Iee,{termClassId:+e})}}])&&Ree(n.prototype,r),a&&Ree(n,a),t}(a.Component),Dee=Object(c.b)((function(){return{}}))(Nee);n.d(t,"a",(function(){return Lee})),n.d(t,"b",(function(){return Mee})),n.d(t,"e",(function(){return xee})),n.d(t,"d",(function(){return Fee}));var Lee=":activityId",Mee=":classId",xee=Qh.h,Fee=Qh.d,Vee=window.localStorage.getItem("useLegacyIndividualActivitySettingsForm")||!1?kB:qB;t.c=o.a.createElement("div",null,o.a.createElement(i.a,{exact:!0,path:xee.LAUNCH,component:be}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_LAUNCH,component:be}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_LAUNCH,component:be}),o.a.createElement(i.a,{path:Qh.d.STUDENT_ACTIVITY,component:pO}),o.a.createElement(i.a,{path:Qh.d.STUDENT_ACTIVITY_LIST,component:h1}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_ACTIVITY_SETTINGS,component:BM}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_ACTIVITY_GRADING,component:aW}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_ACTIVITY_STUDENT_PROGRESS,component:uB}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_ACTIVITY_GROUP_FORMATION,component:dW}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_CREATE_GROUP_ACTIVITY,component:wB}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_CREATE_INDIVIDUAL_ACTIVITY,component:Vee}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_CREATE_QA_ACTIVITY,component:yQ}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_ACTIVITY_LIST,component:Dz}),o.a.createElement(i.a,{exact:!0,path:Qh.d.EDUCATOR_GRADEBOOK,component:TY}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_STUDENT_ACTIVITY,component:pO}),o.a.createElement(i.a,{path:xee.STUDENT_RESOURCE_ERROR,component:Se}),o.a.createElement(i.a,{path:xee.STUDENT_ACTIVITY,component:pO}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_ACTIVITY_LIST,component:h1}),o.a.createElement(i.a,{path:xee.STUDENT_MEETINGS_LIST,component:n8}),o.a.createElement(i.a,{path:xee.ONEDRIVE_PROXY,component:mO.b}),o.a.createElement(i.a,{exact:!0,path:xee.GROUP_FORMATION_NOT_IN_GROUP,component:lg}),o.a.createElement(i.a,{exact:!0,path:xee.GROUP_FORMATION_SYSTEM,component:p4}),o.a.createElement(i.a,{path:xee.STUDENT_STANDALONE_RECORDER,component:p8}),o.a.createElement(i.a,{path:xee.EDUCATOR_STANDALONE_RECORDER,component:p8}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_ACTIVITY_SETTINGS,component:BM}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_ACTIVITY_GRADING,component:aW}),o.a.createElement(i.a,{path:xee.EDUCATOR_ACTIVITY_STUDENT_PROGRESS,component:uB}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_ACTIVITY_GROUP_FORMATION,component:dW}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_CREATE_GROUP_ACTIVITY,component:wB}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_CREATE_INDIVIDUAL_ACTIVITY,component:Vee}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_CREATE_QA_ACTIVITY,component:yQ}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_CREATE_INTERACTIVE_VIDEO_ACTIVITY,component:JB}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_LIBRARY,component:LH}),o.a.createElement(i.a,{exact:!0,path:xee.STANDALONE_DOUBLE_PLAYER,component:TQ}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_ACTIVITY_LIST,component:Dz}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_GRADEBOOK,component:TY}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_RUBRICS_LIST,component:_K}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_RUBRIC_CREATE,component:zK}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_RUBRIC_EDIT,component:iX}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_RUBRIC_COPY,component:hX}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_RUBRIC_IMPORT,component:UX}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_MEETINGS,component:Q0}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_HELP,component:b3}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_HELP,component:j3}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_MEETING_PREVIEW,component:J3}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_MEETING_PREVIEW,component:J3}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_SETTINGS,component:r6}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_SETTINGS,component:y6}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_NOTIFICATIONS,component:X4}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_TEMPLATE_SETTINGS,component:cee}),o.a.createElement(i.a,{exact:!0,path:xee.EDUCATOR_TRIAL,component:Eee}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_TRIAL,component:Dee}),o.a.createElement(i.a,{exact:!0,path:xee.STUDENT_NOTIFICATIONS,component:p9}),o.a.createElement(i.a,{path:xee.EXTERNAL_PLAYER,component:M6}),o.a.createElement(i.a,{path:"/student/recorder-stand",component:CO}),o.a.createElement(i.a,{path:"/student/bbb-player-stand",component:jO}),o.a.createElement(i.a,{path:"/educator/class/:classId",component:D}),o.a.createElement(i.a,{path:"/student/class/:classId",component:D}),o.a.createElement(i.a,{path:"/dev",component:T}),o.a.createElement(i.a,{path:"/",component:y}))},Vy55:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ZD0w");var a,o,i,c=Object(r.i18nMark)("Try again"),s=function e(t){var n=t.id,r=t.message,a=t.fixText,o=t.clickHandler,i=t.type,s=void 0===i?e.TYPES.ERROR:i,u=t.showDelay,l=void 0===u?0:u,d=t.i18n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.message=r,this.fixText=a||d._(c),this.type=s,this.clickHandler=o,this.showDelay=l};i={ERROR:"ERROR",WARN:"WARN",INFO:"INFO"},(o="TYPES")in(a=s)?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i},W5Bm:function(e,t,n){"use strict";(function(e){var r=n("q1tI"),a=n.n(r),o=n("vRGJ"),i=n.n(o),c=n("17x9"),s=n.n(c),u=n("/MKj"),l=n("VmXB"),d=n("9C/b"),f=n("ZD0w"),p=n("LvDl"),m=n.n(p),b=n("TSYQ"),y=n.n(b),v=n("nbG6"),h=n("QMWu"),g=n("7dPE"),E=n("hHKf"),w=n("kbsL"),S=n("8For"),O=n("8bCP"),C=n("Y7ox"),_=n("A2tp"),T=n("ERI2"),I=n("0TIy"),P=n("+y5T"),R=n("k/UH"),A=n("/iAH"),j=n("hFGE"),k=n("4XMt"),N=n("ZUBI"),D=n("Wtf/"),L=n("e33A"),M=n("RMfM"),x=n("h15y"),F=n("TDYo"),V=n("0zen"),G=n("TVp9"),U=n("2Gxn"),q=n("fcFR"),W=n("3Tiu"),B=n("pElA"),Q=n("rnBV"),Y=n("szwm"),H=n("LFYD"),z=n("v6po"),K=n("8eDJ"),X=n("V+cX"),$=n("K2Ti"),Z=n("LMP5"),J=n("PwM7");n("212x");function ee(e){return(ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ce(e,t,n[t])}))}return e}function ne(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se={inPractice:!1,inQuestion:!1,inAnswer:!1,inWithdraw:!1,isRecording:!1,inRecorderDelay:!1,recoderDelayText:null,inQuestionVideoPlayback:!1,isRecordingSubmitting:!1,destroyRecorder:!0,showWithdrawConfirmDialog:!1,showWithdrawCommentDialog:!1,withdrawComment:"",iosSettings:null,showUserReadyMessage:!1,recorderOpenedInWindow:!1,isRecorderSupported:!0,recordingWindowIsClosed:!1,mediaIsLoading:!1,mediaLoadingProgress:0,isRecorderActivated:!1},ue="QA recorder",le="QA question player",de="bongo-qa-standalone-recorder-window",fe=2e4,pe="full-screen-question",me=U.b(),be=U.a(),ye=U.f(),ve=function(t){function n(t){var r,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,c=ae(n).call(this,t),r=!c||"object"!==ee(c)&&"function"!==typeof c?ie(o):c,ce(ie(ie(r)),"handleVisibilityChange",(function(){var e=r.props,t=e.dispatch,n=e.stopRecordingOnDocumentHide,a=r.state,o=a.isRecording,i=a.inRecorderDelay;n&&(document.hidden?o?t(F.i(ue)):i||r.setState({destroyRecorder:!0}):(r.closeStandaloneRecorderWindow(),location.reload()))})),ce(ie(ie(r)),"componentWillUnmount",(function(){var e=r.props,t=e.dispatch,n=e.stopRecordingOnDocumentHide;r._ismounted=!1,r.closeStandaloneRecorderWindow(),clearTimeout(r.pollingTimer),window.removeEventListener("beforeunload",r.onUnload),t(F.k(ue)),n&&document.removeEventListener("visibilitychange",r.handleVisibilityChange)})),ce(ie(ie(r)),"onUnload",(function(e){var t=r.props.i18n,n=r.state,a=n.inQuestion,o=n.inAnswer,i=n.inWithdraw;if(r.closeStandaloneRecorderWindow(),a||o||i){var c=t._("Are you sure you want to leave this page? Any unsaved changes will be lost.");return e.returnValue=c,c}})),ce(ie(ie(r)),"closeStandaloneRecorderWindow",(function(){r.recorderWindow&&!r.recorderWindow.closed&&r.recorderWindow.close()})),ce(ie(ie(r)),"startPolling",(function(){clearTimeout(r.pollingTimer),r._ismounted&&(r.pollingTimer=setTimeout(r.fetchProgressData,fe))})),ce(ie(ie(r)),"fetchProgressData",(function(){var e=r.props,t=e.match.params.activityId,n=e.allowPeerReviewBeforeSubmission,a=e.inWithdraw,o=e.currentActivityState,i=r.state,c=i.inQuestion,s=i.inAnswer;o===Q.a.PROGRESS&&(c||s||a?r.startPolling():T.a.refreshProgressData(+t,n).then((function(){r.startPolling()})))})),ce(ie(ie(r)),"onPracticeChange",(function(e){var t=r.props,n=t.practiceData;(0,t.dispatch)(F.q(ue,!e)),e&&!n&&T.a.loadPracticeRecorderSettings(),r.setState({inPractice:e})})),ce(ie(ie(r)),"startDelayTimer",(function(e){e?r.delayTimer=setTimeout(function(){var t=e-1;this.setState({recoderDelayText:Object(Z.k)(t)}),this.startDelayTimer(t)}.bind(ie(ie(r))),1e3):(r.startRecording(),r.setState({inRecorderDelay:!1}))})),ce(ie(ie(r)),"startQuestionAnswer",(function(){var e=r.props.qaSettings.delay;e?r.setState({inRecorderDelay:!0,recoderDelayText:Object(Z.k)(e)},(function(){r.startDelayTimer(e)})):r.startRecording()})),ce(ie(ie(r)),"onQuestionVideoPlaybackEnded",(function(){var e=r.props,t=e.dispatch,n=e.qaSettings,a=e.question,o=r.state.inPractice;r.setState({inQuestionVideoPlayback:!1,inQuestion:!1,inAnswer:!0},(function(){t(M.o(le)),o?n.isStartedImmediately||(t(F.N(ue,!0)),r.startQuestionAnswer()):T.a.setQuestionIsIdling(a.dbId).then((function(){n.isStartedImmediately||(t(F.N(ue,!0)),r.startQuestionAnswer())}))}))})),ce(ie(ie(r)),"onWithdraw",(function(){r.setState({showWithdrawConfirmDialog:!0})})),ce(ie(ie(r)),"onWithdrawConfirmCancel",(function(){r.setState({showWithdrawConfirmDialog:!1,inWithdraw:!1})})),ce(ie(ie(r)),"onWithdrawConfirmSubmit",(function(){var e=r.props.dispatch;clearTimeout(r.delayTimer),e(M.o(le)),r.setState({showWithdrawConfirmDialog:!1,showWithdrawCommentDialog:!0,inWithdraw:!0,inQuestionVideoPlayback:!1})})),ce(ie(ie(r)),"onWithdrawCommentSubmit",(function(){var e=r.state,t=e.inPractice,n=e.withdrawComment,a=r.props.question;t?(r.setState({showWithdrawCommentDialog:!1,withdrawComment:"",inWithdraw:!1}),r.refreshQuestionState()):T.a.withdrawAnswer(a.dbId,n).then((function(){r.setState({showWithdrawCommentDialog:!1,withdrawComment:"",inWithdraw:!1}),r.refreshQuestionState()}))})),ce(ie(ie(r)),"withdrawCommentChanged",(function(e){r.setState({withdrawComment:e})})),ce(ie(ie(r)),"startRecording",(function(){var e=r.props,t=e.dispatch,n=e.question;r.state.inPractice?t(F.h(ue)):T.a.setAnswerIsRecording(n.dbId).then((function(){t(F.h(ue))}))})),ce(ie(ie(r)),"refreshQuestionState",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=r.props,n=t.activityId,a=t.stopRecordingOnDocumentHide;T.a.getUpdatedState(n).then((function(){r.setState({destroyRecorder:!0,isRecordingSubmitting:!1},(function(){var t=r.props.questionCount,n=r.state.isRecorderActivated&&!(r.getAnsweredQuestionsCount()===t);r.reloadPageIfNeeded(),r.setState({destroyRecorder:!!a&&document.hidden,inQuestion:!1,inAnswer:!1,inRecorderDelay:!1,recoderDelayText:null,inQuestionVideoPlayback:!1,isRecordingSubmitting:!1,isRecorderActivated:n},(function(){e&&r.scrollToQuestionContainer()}))}))}))})),ce(ie(ie(r)),"reloadPageIfNeeded",(function(){var e=r.props,t=e.refreshPageOnAnswerSubmission,n=e.questionCount;t&&r.getAnsweredQuestionsCount()!==n&&location.reload()})),ce(ie(ie(r)),"onRecordComplete",(function(){r.refreshQuestionState()})),ce(ie(ie(r)),"onRecordingFinished",(function(){var e=r.props.question,t=r.state.inPractice;r.setState({isRecording:!1}),t?r.refreshQuestionState():T.a.finishQuestion(e.dbId).then((function(){r.setState({isRecordingSubmitting:!0},(function(){r.scrollToQuestionContainer()}))}))})),ce(ie(ie(r)),"onStartQuestion",(function(){var e=r.props,t=e.webcamFileName,n=e.question,a=e.practiceData,o=r.state.inPractice;r.setState({showUserReadyMessage:!0,inQuestion:!0}),o?r.setupQuestionState(a):T.a.startQuestion(n.dbId,t).then((function(e){r.setupQuestionState(e)}))})),ce(ie(ie(r)),"setupQuestionState",function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,o,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.props,o=a.dispatch,i=a.qaSettings,c=r.state.showUserReadyMessage,s=r.userInteractionRequiredForPlayback(),u={inQuestion:!0,inQuestionVideoPlayback:!1,inAnswer:!1},o(F.N(ue,!1)),!n||!n.qaQuestion){t.next=30;break}if(!i.isStartedImmediately){t.next=29;break}if(l=null,!n.qaQuestion.media||!n.qaQuestion.media.srcUrl){t.next=23;break}return l=n.qaQuestion.media.dbId,t.prev=10,o(W.q(!0)),t.next=14,r.getMediaBlobUrl(n.qaQuestion.media.srcUrl);case 14:d=t.sent,o(W.l(d)),o(W.q(!1)),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(10),o(W.q(!1)),O.b.error(t.t0);case 23:(!(s&&c)||!l)&&e(r.startQuestionAnswer),u.inAnswer=!0,n.qaQuestion.media&&(u.inQuestionVideoPlayback=!0),t.next=30;break;case 29:n.qaQuestion.media?u.inQuestionVideoPlayback=!0:(u.inAnswer=!0,r.startQuestionAnswer(),o(F.N(ue,!0)));case 30:r.setState(u,(function(){r.scrollToQuestionContainer()}));case 31:case"end":return t.stop()}}),t,this,[[10,19]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){ne(o,r,a,i,c,"next",e)}function c(e){ne(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),ce(ie(ie(r)),"scrollToQuestionContainer",(function(){var e=document.querySelectorAll("header.toolbar");if(e&&e[0]&&r.recorderContainer&&r.recorderContainer.offsetParent){var t=document.querySelectorAll("header.toolbar")[0].offsetHeight;Object(J.c)(r.recorderContainer.offsetParent.offsetTop-t,1e3)}})),ce(ie(ie(r)),"onRecordStarted",(function(){r.delayTimer&&(clearTimeout(r.delayTimer),r.setState({inRecorderDelay:!1})),r.setState({isRecording:!0})})),ce(ie(ie(r)),"onStartVideoPlayback",(function(){var t=r.props,n=t.dispatch,a=t.activeQuestion,o=t.qaSettings,i=r.state.showUserReadyMessage,c=r.userInteractionRequiredForPlayback();if(n(M.s(le)),o.isStartedImmediately&&c&&i){e(r.startQuestionAnswer);var s={inAnswer:!0};a&&a.question&&a.question.qaQuestion.media&&(s.inQuestionVideoPlayback=!0),r.setState(s)}r.setState({showUserReadyMessage:!1})})),ce(ie(ie(r)),"onRecordingIsNotSupported",(function(){var e=r.props.i18n;r.setState({isRecorderSupported:!1,isRecorderActivated:!1});var t=a.a.createElement(w.f,{id:"button-qa-not-supported-launch-window",primary:!0,onClick:function(){C.a.closeModal(),r.openWindowedQaRecorder()},iconEl:a.a.createElement(S.a,null,H.a.OPEN_IN_BROWSER)},e._("Open in New Window")),n=a.a.createElement(g.a,{id:"confirm-open-recorder",dialogClassName:"confirm-open-new-window-dialog",title:e._("Open in New Window"),footerActions:t,onHide:function(){C.a.closeModal()},fullPage:!1},a.a.createElement("p",null,r.getRecorderNotSupportedMessage()));C.a.showModal(n)})),ce(ie(ie(r)),"openWindowedQaRecorder",(function(){var e=r.props.match,t=i.a.compile(l.e.STANDALONE_QA_RECORDER)(te({},e.params));r.setState({recorderOpenedInWindow:!0,recordingWindowIsClosed:!1,isRecorderActivated:!1},(function(){r.recorderWindow=window.open(q.b(t),"".concat(de,"[").concat((new Date).getTime(),"]"),"width=1165,height=730"),r.recorderWindow&&!r.recorderWindow.closed?(r.props.dispatch(B.Wb(null)),r.recorderWindow.onbeforeunload=function(){r.setState({recorderOpenedInWindow:!1,recordingWindowIsClosed:!0}),r.refreshQuestionState()}):(r.setState({recorderOpenedInWindow:!1,recordingWindowIsClosed:!0}),r.refreshQuestionState())}))})),ce(ie(ie(r)),"onActivateRecorder",(function(){r.setState({isRecorderActivated:!0})})),ce(ie(ie(r)),"canStartQuestion",(function(){return r.props.isSubmittable})),ce(ie(ie(r)),"renderActivateRecorderContainer",(function(){var e=r.state,t=e.isRecorderActivated,n=e.isRecorderSupported,o=e.recorderOpenedInWindow,i=r.props,c=i.i18n,s=i.questionIsLoading,u=r.canStartQuestion(),l={label:r.getQuestionCannotBeStartedMessage()};if(r.isDeviceSupported()||(u=!1,l={label:r.getRecordingNotSupportedMessage()},r.isScreenRecordingRequired()&&!I.a.isScreenCapturingSupported()&&(l={label:r.getScreenRecordingNotSupportedMessage()})),n||(u=!1,l={label:r.getRecordingNotSupportedMessage()}),Boolean(o)&&(u=!1,l={label:r.getNewWindowAlreadyOpenedMessage()}),s&&(u=!1,l={label:r.getLoadingMessage()}),!t)return a.a.createElement("div",{className:"qa-activate-recorder-container"},a.a.createElement("div",{className:"qa-activate-recorder-contents"},a.a.createElement(S.a,{className:"init-video-icon"},H.a.PERSON),a.a.createElement(w.f,{id:"button-qa-activate-recorder",className:"activate-recorder-button",primary:!0,enabled:u,tooltip:l,onClick:r.onActivateRecorder},c._("Activate Recorder"))))})),ce(ie(ie(r)),"checkFullScreenRecorderHeight",(function(){var e=r.props.isLandscape;if(me&&r.showingFullScreenQuestionAnswer()&&!e){var t=document.querySelector(".qa-recorder-container video");if(t){var n=t.getBoundingClientRect(),a=document.documentElement.clientHeight;n.y<48&&(t.style.maxHeight="calc(".concat(a/2,"px - 72px)"))}}})),ce(ie(ie(r)),"isScreenRecordingRequired",(function(){return r.props.qaSettings.recordingMode===K.a.CAMERA_AND_SCREENSHARE})),ce(ie(ie(r)),"getRecorderType",(function(){return r.props.qaSettings.recordingMode===K.a.CAMERA_AND_SCREENSHARE?P.a.CAMERA_WITH_DESKTOP:P.a.CAMERA_ONLY})),ce(ie(ie(r)),"getRecorderContainer",(function(){var e,t=r.props,n=t.activityId,o=t.question,i=t.activeQuestion,c=t.isQuestionVideoPlaying,s=t.practiceData,u=t.i18n,l=t.isLandscape,d=t.qaSettings,f=r.state,p=f.inQuestion,b=f.inAnswer,v=f.inQuestionVideoPlayback,h=f.inRecorderDelay,g=f.recoderDelayText,E=f.destroyRecorder,w=f.inPractice,S=f.showUserReadyMessage,O=f.isRecorderActivated,C=f.mediaIsLoading,T=null,P=!1,R=r.userInteractionRequiredForPlayback();if(p){w&&(i=m.a.merge({},s,{qaQuestion:{media:{dbId:0}}}));var A=m.a.get(i,"qaQuestion.media");i&&A&&(e=A.dbId,T={autoplay:!R,controls:!1,sources:[{src:A.srcUrl,type:"video/mp4"}]},A.caption&&(T.tracks=[te({},A.caption,{mode:"showing"})]),P=Boolean(c))}r.checkFullScreenRecorderHeight();var j=r.getRecorderType(),k=p||P||v&&R&&S?"qa-question-playing":null;return a.a.createElement("div",{ref:function(e){return r.recorderContainer=e},className:y()("qa-recorder-container",l&&"landscape",r.showingFullScreenQuestionAnswer()&&pe,e||w?"has-playback-media":"no-playback-media",d.isStartedImmediately&&"record-reaction")},r.renderActivateRecorderContainer(),v?a.a.createElement("div",{className:"qa-player-container"},a.a.createElement(_.a,{id:"assignment-qa-question-video-player",options:T,onEnded:r.onQuestionVideoPlaybackEnded,termClassId:r.props.termClassId,activityId:r.props.activityId,usageContext:z.a.QA_QUESTION,showControlsBar:!1,mediaId:e,playerId:le})):null,!E&&O&&o?a.a.createElement("div",{className:y()(k,e||w?"has-playback-media":"no-playback-media",d.isStartedImmediately&&"record-reaction",C&&"media-loading")},a.a.createElement(I.b,{mediaType:Y.a.ACTIVITY_RESULT,recorderType:j,isStandaloneModeAllowed:!1,canOpenInWindow:!1,onRecordingIsNotSupported:r.onRecordingIsNotSupported,overlay:h?u._("Recording starting in {recoderDelayText}",{recoderDelayText:g}):null,isChooseScreenContentAllowed:!b,isMaxRecordingLengthVisible:!v,activityId:n,autoSubmit:!w,recorderId:ue,showControls:!0,showRecordButton:b,questionId:o.dbId,onStop:r.onRecordingFinished,onRecord:r.onRecordStarted,onFinish:function(e){r.onRecordComplete(e)}})):null)})),ce(ie(ie(r)),"isOpenNewWindowEnabled",(function(){var e=r.state,t=e.recorderOpenedInWindow,n=e.recordingWindowIsClosed;return!t||n})),ce(ie(ie(r)),"renderActionButton",(function(){var e=r.props,t=e.i18n,n=e.questionIsLoading,o=e.recorderInIntialState,i=r.state.isRecorderSupported,c=!0,s=null,u=null;if(r.canStartQuestion()?r.isRecorderInitialized()?o&&!n||(c=!1):(c=!1,s=t._("This question cannot be started until your recorder is activated")):(c=!1,s=r.getQuestionCannotBeStartedMessage()),!i){var l=t._("Open in New Window"),d=!0;return r.isOpenNewWindowEnabled()||(d=!1,u=r.getNewWindowAlreadyOpenedMessage()),a.a.createElement(w.f,{id:"button-qa-not-supported-launch-window",primary:!0,onClick:r.openWindowedQaRecorder,enabled:d,iconEl:a.a.createElement(S.a,null,H.a.OPEN_IN_BROWSER),tooltip:{label:u}},l)}return a.a.createElement(w.f,{id:"button-qa-start",className:"qa-button-start-question",primary:!0,onClick:r.onStartQuestion,enabled:c,tooltip:{label:s}},t._("Start Question"))})),ce(ie(ie(r)),"renderStartQuestion",(function(){return a.a.createElement("div",{className:"qa-start-question-action-container"},r.renderRecorderStatus(),r.renderStatusMessage(),r.renderActionButton())})),ce(ie(ie(r)),"renderQuestionLoader",(function(){var e=r.props.i18n,t=r.state,n=t.mediaIsLoading,o=t.mediaLoadingProgress;return a.a.createElement("div",null,a.a.createElement(h.a,{id:"loading-question-progress"}),n&&a.a.createElement("p",null,e._("Loading Question: {mediaLoadingProgress}%",{mediaLoadingProgress:o})))})),ce(ie(ie(r)),"getQuestionContainer",(function(){var e=r.props,t=e.questionIsLoading,n=e.isLandscape,o=r.state.isRecordingSubmitting,i=null;return i=t||o?r.renderQuestionLoader():r.isQuestionAnswerActive()?r.renderQuestionContents():r.renderStartQuestion(),a.a.createElement("div",{className:y()("qa-progress-container-contents",n&&"landscape",r.showingFullScreenQuestionAnswer()&&pe)},i)})),ce(ie(ie(r)),"getRecordingOnlySupportedWithIOSSafariMessage",(function(){return r.props.i18n._("Recording for this assignment on iOS devices is only supported when using Safari. Please access this assignment using Safari on your iOS device.")})),ce(ie(ie(r)),"getRecordingNotSupportedMessage",(function(){return r.props.i18n._("Recording is not supported on your device or browser")})),ce(ie(ie(r)),"getScreenRecordingNotSupportedMessage",(function(){return r.props.i18n._("Screen recording is not supported on your device or browser")})),ce(ie(ie(r)),"getRecorderNotSupportedMessage",(function(){return r.props.i18n._("Unable to access your camera or microphone, please try opening this page in a new window")})),ce(ie(ie(r)),"getQuestionCannotBeStartedMessage",(function(){var e=r.props.i18n;return r.canStartQuestion()?null:e._("This question is not available at this time")})),ce(ie(ie(r)),"getNewWindowAlreadyOpenedMessage",(function(){return r.props.i18n._("A new window was opened (check your browsers pop-up blocker if the new window did not open)")})),ce(ie(ie(r)),"getLoadingMessage",(function(){return r.props.i18n._("Loading...")})),ce(ie(ie(r)),"isRecorderInitialized",(function(){var e=r.props,t=e.qaSettings,n=e.recorderAudioInitialized,a=e.recorderCameraStream,o=e.recorderDesktopStream,i=!0,c=!0;return t.recordingMode===K.a.CAMERA_AND_SCREENSHARE?(i=!a,c=!o):(i=!a,c=!1),Boolean(n&&!i&&!c)})),ce(ie(ie(r)),"renderStatusMessage",(function(){var e=r.props.i18n,t=r.state.isRecorderSupported;if(!r.canStartQuestion()){var n=r.getQuestionCannotBeStartedMessage();return a.a.createElement(A.a,{className:"qa-note-warning",type:A.a.NOTE_TYPES.WARNING,message:n})}if(!r.isDeviceSupported()){var o="";return o=r.isScreenRecordingRequired()&&!I.a.isScreenCapturingSupported()?r.getScreenRecordingNotSupportedMessage():me?r.getRecordingOnlySupportedWithIOSSafariMessage():r.getRecordingNotSupportedMessage(),a.a.createElement(A.a,{className:"qa-note-error",type:A.a.NOTE_TYPES.ERROR,title:e._("Unsupported"),message:o})}if(!t){var i=r.getRecorderNotSupportedMessage();return a.a.createElement(A.a,{className:"qa-note-warning",type:A.a.NOTE_TYPES.WARNING,message:i})}if(ye&&me)return a.a.createElement(A.a,{className:"qa-note-info",type:A.a.NOTE_TYPES.INFO,message:e._("Please do not rotate your device while you record your answer")})})),ce(ie(ie(r)),"renderRecorderStatus",(function(){var e=r.props,t=e.i18n,n=e.recorderAudioInitialized,o=e.recorderCameraStream,i=e.recorderDesktopStream,c=r.state.isRecorderActivated,s={title:t._("Mic"),icon:H.a.MIC,isPending:c,isInitialized:n},u={title:t._("Camera"),icon:H.a.VIDEOCAM,isPending:c,isInitialized:Boolean(o)},l={title:t._("Screen"),icon:H.a.APP_WINDOW,isPending:c,isInitialized:Boolean(i)},d=[s,u];return r.isScreenRecordingRequired()&&d.push(l),a.a.createElement("div",{className:"qa-start-question-recorder-status-container"},a.a.createElement("p",{className:"qa-start-question-recorder-status-message"},t._("Answering this question requires access to the following:")),a.a.createElement("div",{className:"qa-start-question-recorder-status-items"},m.a.map(d,(function(e,t){return a.a.createElement("div",{key:"recorder-status-item[".concat(t,"]"),className:"qa-start-question-recorder-status-item"},r.renderRecorderStatusItem(e))}))))})),ce(ie(ie(r)),"renderRecorderStatusItem",(function(e){var t=e.title,n=e.icon,r=e.isPending,o=e.isInitialized;return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"qa-start-question-recorder-status-item-title"},t),a.a.createElement("div",{className:"status-item-icon-container"},a.a.createElement(S.a,{className:y()("status-item-icon","status-item-icon-type",{"status-item-icon--pending":r,"status-item-icon--hidden":o})},n),a.a.createElement(S.a,{className:y()("status-item-icon","status-item-icon-state",{"status-item-icon--hidden":!o})},H.a.STATUS_SUCCESS)))})),ce(ie(ie(r)),"renderQuestionContents",(function(){var e=r.props,t=e.activeQuestion,n=e.practiceData,o=e.i18n,i=r.state,c=i.inPractice,s=i.inQuestionVideoPlayback,u=i.showUserReadyMessage,l=null,d=r.userInteractionRequiredForPlayback();return s&&d&&u?a.a.createElement("div",{className:"qa-ready-msg-container"},a.a.createElement("p",null,o._("The question will begin when you are ready. Please do not rotate your device while you record your answer.")),a.a.createElement(w.f,{id:"button-assignment-qa-start-dialog-ok",key:"qa-android-dialog-btn",primary:!0,ariaLabel:o._("I'm ready"),onClick:r.onStartVideoPlayback},o._("I'm ready"))):(c&&(t=n),t&&t.qaQuestion&&t.qaQuestion.questionText&&(l=t.qaQuestion.questionText),a.a.createElement("div",{className:"qa-question-contents"},a.a.createElement("p",null,l)))})),ce(ie(ie(r)),"getCurrentQuestionNumber",(function(){var e=r.props.questionCount,t=r.getAnsweredQuestionsCount()+1;return t>e&&(t=e),t})),ce(ie(ie(r)),"getCardTitle",(function(){var e=r.props,t=e.questionCount,n=e.i18n;return r.state.inPractice?n._("Practice Question"):n._("Question {0} of {questionCount}",{0:r.getCurrentQuestionNumber(),questionCount:t})})),ce(ie(ie(r)),"getCardTitleActions",(function(){var e=r.props,t=e.i18n,n=e.isStandaloneMode,o=r.state,i=o.inPractice,c=o.isRecordingSubmitting,s=o.inQuestion,u=o.inAnswer,l=o.inQuestionVideoPlayback,d=o.isRecorderActivated,f=o.showUserReadyMessage,p=o.isRecorderSupported,m=o.mediaIsLoading;if(r.userInteractionRequiredForPlayback()&&f&&s&&l||!p)return null;if(r.isQuestionAnswerActive())return a.a.createElement(w.a,{id:"button-qa-withdraw",secondary:!0,ariaLabel:t._("Withdraw"),enabled:!c&&!m,className:"qa-withdraw-button",onClick:r.onWithdraw},t._("Withdraw"));var b=null;if(!n){var y=r.isOpenNewWindowEnabled(),v=t._("Open in new window");y||(v=r.getNewWindowAlreadyOpenedMessage()),b=a.a.createElement(w.c,{id:"qa-open-new-window",className:"qa-open-new-window",enabled:y,tooltip:{label:v,position:k.a.BOTTOM},onClick:r.openWindowedQaRecorder},H.a.OPEN_IN_BROWSER)}return a.a.createElement(a.a.Fragment,null,a.a.createElement(R.a,{id:"qa-practice-switch",className:"qa-practice-switch",name:"qa-practice-switch",enabled:!s&&!u&&d,label:t._("Practice"),ariaLabel:t._("Practice"),labelBefore:!0,onChange:r.onPracticeChange,checked:i}),b)})),ce(ie(ie(r)),"isQuestionAnswerActive",(function(){var e=r.state,t=e.inQuestion,n=e.inAnswer;return t||n})),ce(ie(ie(r)),"showingFullScreenQuestionAnswer",(function(){var e=r.isQuestionAnswerActive()&&(me||be);return document.body.style.height=e?"100%":"unset",document.body.style.width=e?"100%":"unset",document.body.style.position=e?"fixed":"unset",document.body.style.overflow=e?"hidden":"unset",e})),ce(ie(ie(r)),"userInteractionRequiredForPlayback",(function(){return U.a()&&U.e()||me})),ce(ie(ie(r)),"getWorkToSubmitCard",(function(){var e=r.props.readOnly;return r.showingFullScreenQuestionAnswer()?null:a.a.createElement(N.a,{readOnly:e,onDelete:function(){return r.refreshQuestionState(!1)},allowActions:!r.isQuestionAnswerActive()})})),ce(ie(ie(r)),"isDeviceSupported",(function(){return!!I.a.isRecorderSupported()&&!(r.isScreenRecordingRequired()&&!I.a.isScreenCapturingSupported())})),r.state=se,r.onUnload=r.onUnload.bind(ie(ie(r))),r.playerUserInteractionsEmitter=new $.a,r}var r,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(n,t),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props.stopRecordingOnDocumentHide;this._ismounted=!0,this.startPolling(),window.addEventListener("beforeunload",this.onUnload),this.setState({destroyRecorder:!1,isRecorderActivated:Boolean(this.props.bypassActivateCameraPrompt)}),e&&document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"getAnsweredQuestionsCount",value:function(){var e=this.props,t=e.qaAnswers,n=e.question;return t?t.filter((function(e){return!n||e.qaQuestion.dbId!==n.dbId})).length:0}},{key:"getMediaBlobUrl",value:function(e){var t=this;return new Promise((function(n,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(e){if(200===e.srcElement.status){var r=e.srcElement.response;t.setState({mediaIsLoading:!1,mediaLoadingProgress:0}),n(URL.createObjectURL(r))}},a.onerror=function(e){t.setState({mediaIsLoading:!1,mediaLoadingProgress:0}),r(e)},a.onprogress=function(e){var n=Math.floor(e.loaded/e.total*100);t.setState({mediaLoadingProgress:n})},a.send(),t.setState({mediaIsLoading:!0,mediaLoadingProgress:0})}))}},{key:"render",value:function(){var e,t=this.props,n=t.questionCount,r=t.questionIsBeingWithdrawn,o=t.i18n,i=t.readOnly,c=t.needReflectionAnswers,s=t.isLandscape,u=t.isStandaloneMode,l=this.state,d=l.showWithdrawConfirmDialog,f=l.showWithdrawCommentDialog,p=l.withdrawComment,m=l.isRecorderActivated,b=[a.a.createElement(w.a,{id:"button-assignment-qa-withdraw-dialog-no",secondary:!0,ariaLabel:o._("No"),onClick:this.onWithdrawConfirmCancel},o._("No")),a.a.createElement(w.a,{id:"button-assignment-qa-withdraw-dialog-yes",primary:!0,ariaLabel:o._("Yes"),onClick:this.onWithdrawConfirmSubmit},o._("Yes"))],h=[a.a.createElement(w.a,{id:"button-assignment-qa-withdraw-comment-dialog-submit",primary:!0,ariaLabel:o._("Submit"),isLoading:r,enabled:p.trim().length>0&&!r,onClick:this.onWithdrawCommentSubmit},o._("Submit"))];return this.checkFullScreenRecorderHeight(),a.a.createElement("div",{className:y()("qa-work-in-progress-container",(e={landscape:s},ce(e,pe,this.showingFullScreenQuestionAnswer()),ce(e,"qa-work-in-progress--standalone",u),e))},this.getAnsweredQuestionsCount()===n||i||this.props.lmsLocked||c?null:a.a.createElement(v.a,{className:"qa-progress-card"},a.a.createElement(v.d,{className:"qa-question-card-title",title:this.getCardTitle(),actions:this.getCardTitleActions()}),a.a.createElement(v.c,{className:y()("qa-progress-card-body",{landscape:s,"activate-camera":!m})},this.getRecorderContainer(),this.getQuestionContainer()),a.a.createElement(E.a,{id:"qa-withdraw-config-dialog",title:o._("Withdraw"),visible:d,actions:b},a.a.createElement("p",null,o._("Are you sure you want to withdraw from this question and end this recording now? The recording will be discarded."))),a.a.createElement(E.a,{id:"qa-withdraw-comment-dialog",title:o._("Withdraw Reason"),visible:f,actions:h},a.a.createElement(j.i,{id:"withdraw-reason-textfield",rows:1,maxRows:4,placeholder:o._("Provide a reason for withdrawal"),onChange:this.withdrawCommentChanged,value:p,ariaLabel:o._("Provide a reason for withdrawal")}))),this.getWorkToSubmitCard())}}])&&re(r.prototype,o),c&&re(r,c),n}(r.Component);ve.propTypes={bypassActivateCameraPrompt:s.a.bool,readOnly:s.a.bool,refreshPageOnAnswerSubmission:s.a.bool,stopRecordingOnDocumentHide:s.a.bool,isStandaloneMode:s.a.bool},ve.defaultProps={bypassActivateCameraPrompt:!1,readOnly:!1,refreshPageOnAnswerSubmission:!1,stopRecordingOnDocumentHide:!1,isStandaloneMode:!1};t.a=Object(f.withI18n)()(Object(d.a)(Object(u.b)((function(e){var t=x.a(le,e);return{activityId:D.getActivityId(e),lmsLocked:D.getLmsLocked(e),termClassId:D.getTermClassId(e),webcamFileName:V.K(e,ue),qaSettings:G.g(e),qaAnswers:G.d(e),question:G.e(e),recorderInIntialState:V.J(e,ue)===X.a.INITIAL,questionIsLoading:G.h(e),questionCount:G.f(e),activeQuestion:G.a(e),isQuestionVideoPlaying:t&&t.state.isPlaying,questionIsBeingWithdrawn:G.j(e),practiceData:G.c(e),allowPeerReviewBeforeSubmission:D.isPeerReviewAllowedBeforeSubmission(e),currentActivityState:G.b(e),isSubmittable:D.isSubmittable(e),needReflectionAnswers:D.needReflectionAnswers(e),isLandscape:L.e(e),recorderAudioInitialized:V.c(e,ue),recorderCameraStream:V.f(e,ue),recorderDesktopStream:V.j(e,ue)}}))(ve)))}).call(this,n("URgk").setImmediate)},W8hI:function(e,t,n){},WLvO:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAACxxJREFUeJztWnt0lNUR/818u8EkUkUhWLXa41HwAdkEQ6tWi7YqkN3QWh6e4tFq5ZHsBoIPhAI2gkhBETEkuwTxrUWDSCXZSPGBKGI9BrIJKKK2tipiiICAJIT9vpn+AcGQbJL9Nrt6esrvv71z78zvzt773TszFziO4ziO4ziO/19QVxW4/bXnKHQhQ5ocVrfcv024cFc8iHVgrwdglRC4h5I1MZg34OOu6IvZASMe3JDcmJw6lSBTAO4GABDsAOPWCq/r5a6Qag9uf+3VJPoEGGcAgIgcYsL8pgaa88rkjAOx6LTvAFXKKakdJsBCYvw0UhcBFocP6J2xkmoNT2lVCiznXAATItoT/QyE2yq9rpUgUju6bTkgp3jLuYJwETEP7ayvQD8xQDeWe13/sGOjNTwlmwaq0tPE3Ldzm1jjACau8rq2Ras/Kgd4SqtS1HJMU9HJzJwUrXKBCCnN+cphzto4Pisc7TgAGFS41tE9rcc0UfozM4yoBwrCYF2QLI7Zy/P7fdtZ944doErZ/prroHiImc6KmkQbTrLJQXrjqrwBH0TTf+iiUB+D6GkwfharTUC+UBi3B/P6v9DRtmjXAcP8NX1NoIiBa2MncQyhJgVPzapLL5o5kyRiF1XyBGq9AjzAQHJcrEJegzomVPr6b40kb+OAkcVbTmxkcwaEbgfDGQ8SLaGC18lp3FIxvt9nLdvdgeozVPmx+Dn8GJiq+pDRrdu9q8ZcsL+l4DsHqFLO4tBIVTwI8JkJIPEdBHuFJL/Sm/EsiNRTEroeqgEw90isWXxJ0DuCea7nm7cFA0B2yeYLsgOhV1T5+YRPHoCw1htE3xz9rdgrhLpE22XgdAIt8wRqX8sprr4IAMjjDxUCNAOAI9EERGQ/E81K7uUoWj6q36GWsotLq5ynWU4fCe4B46REc8HhbTGXcoqrLxJgRTTnbMwQURA/Tkk0rXxseof/9JCHN/VyGDwb0LFg7vJVvX1O+NhSDCcAGLZ0a3c51PQoQCPjb0k3WMwFL+emV9kZlV1cncGMhwH+Zfw54cWDRviPr47P2nvMR9AdqC0g4AHEYzsIthMwudyX/pzd6+mxnDaPUJH5XbmHHKUksIh1SjDPtaCZU5sllhOo/oWlXMbA6TFaOQjiB5oadF5cYwHTcacQTY39fiBfifD1lfmuN1u2Rtxj1/lDaYeElhHjV/aM6HKD9K6X8jL/HRvJjvGbks0/McmcR+Df2xspb4o4r6/M7/dVa0m7H5mRZWVGY/15s0A8rVP9qjUAF1T40tfZIxYbPMWhy4X1YQYP6Ly33r+/bs/0dTOvMiNJO/3KekpCOUL0FAMnt5YJZBcTpief+vHS5aNGWdGQjxdGlpUZB+v73CxKc4iRFqHLPiW5OZiXubIjPVEdM25/7TkQfYEYmUeaTKgWK/GsoDd9j13y8cTVpVUndbOcM0hQ0Hx1F0gtkY6IJlsU9Tk76PFPT+jeuLdIQGdDeVJ7wcUPhaGLQn2Y6UFS3QWn6a0Yn9XwQ3M6jv8FRL0FCguVq3rXziORPqbFvtUFri8SScwuBi9+78cOK2kRgO1ZO9Nvazfn0ApROWBk2ZakxnrzMRDdABwOaohpSladqzRaQwnD4STKrRDMbw6iVFFmmck3rS7o09TZ8E4dMGzp1u5WU9MKIrqmrW28TQ4aUzE+/cPY2HcNQxeF+pCBJQwaFEG89qARvu7V8Vl7O9LRoQNyHqntbYWtyo4uHCJyiJhmp/R0zGsd4iYKF5dWOU8zHXcSaeHRmkQkqNaEjfDQv+cO3NFel3Yd4A5sOo8sWg3mc6IhJcD7BjCmq2nwzuAp2TRQiJYyOD3KIf9hYHB7qfKIDvCUbBoIMoIAetliJ6JKvChFjenRpKTt4JoHQqnOVJoFyCQGsy1akF0QclfmZ7zbWtbGAdnFoSEArWBGSqxkRfQzZsqNV4nM7Q8NhtDi9ipRUXECGqEystKXGWzZfowD3CWhm4joUcQpPaaif7UsmbS6YEB9LOM9pVU91XQuIMKN8eBzJB8wLujNeKy57fBSUiWPPzSViJ5EHHODxDSanbTV4w/dCNXo01uq5PHXjJawc2u8Jg8AzDAI9KinpGZ6Mx8qLFTe2Lt2IdopPMYLAqwxTM0tn5jxaUf9sos3nk3gQDT1x65Aof6sOtcEAoDskmo3iBYy6NxEGhVBAwMzktO2FbUOn0eWlRkN9X3ziXAfgNRE8oDIv0A0qcLrqmAAqPRlBiWc0g/QPwGISxorEpiRAsaCxq/7PtZaduDrPo8QYSESOHkRNCgwfX/qyRdV+DLKQdR2X7oD1WfAovuJaXRCWCjeUKLfkZrnJvf6ZNPyUaOs7OLQz51h3WY6eYX9NFy0ZmWZFea7Wscwbc7TYF7m9mB+xg0QvQJAKM48njHN5CGAXiFqvLHz/V4EAMz0mtnNuCYlzRgK0SfjaVAgtSIYFPRmjo4UwLV7oajIz1if3HNbFlTzILK7q0QUmFWRl36Tw9F4q0JWtrxniOAEgpY11FuTKnyuW6Ba2FV7ENkDhe9A3TcXt84Et0RUR9O1j2w5xRk271Vort1bGACTBGMH1Kc/VZVWM5eIJjcL9tftdq6beZWZXVxjHn0EIbpkf/0e34lpPUaT0lLbFWoRFebSJMs5I5oHW1Gd+WvG9tsNwOcObF4CNYuirtYI9gIYvi/1R29XUe0yIhrV6Rimcd17n3IWJyWNMpsOfs7CK6OtFQqw3sE0scLrqo6KH2xeeoJ5/WugeqU7UHM9Cc1vfq0VkYzoZwY0u6mbc0dq475XiHC5DVNDpKnpLTHZ40iyLhM1KgGc3a4t4EsGJlfmpS+zW4Wyu5zh8deusMK0PhnG+VCZIyIRQmDZaDnClwgbjc6m8AaGrckfBpGLnXjXtChJxLhEgPfaWBE5pIq5qWL0NZTfyg7UvDiocK2tP9W2A0QxjA35oJGtP1y8M+NucTguFKD8qBwobzpAg5yWcSZE3+lK1ZmB08F4i9nKZCN8pUJfapapooIM7fftzt13N5I5ziLZyqDfxmAjBmLM3QEUv5dWs95pmidUel3DAGSr6uzUntuuS0qlXwsZ69opWNgkyCeKoBym46aUnh8NV2CWErmDPlcOq3Fq97QeVSB6EDFeoGJywNHBRJcquNpTUjPLDCe/HvRl3N34dd9chayM1yMn4HAQA6JAQ32fv2TVpc+E4p1sf01ARTaAyNUl3XYHGMBwCLa30OAE4W7DOFDjLql+BEBxDEdlVCCiyVVpNash+iEDucc8oBDsAHTEunuutFWis020PN/1kmk1XghgEUSOfnGJuS8Rj7Grzy6I6Jo2W0sROOgMX1DhzVhh9xSIKfZfXXDJPgATs4tDzwKyxEZ+Lq5QwQdsyLhyb+bbsero0lKtzM94t86wslQxBSIHu6LLHqQJihkpaUZmeV7skwfikP058gb4/iGLN68wLCsQqX4QZ6y1LMp9eYLro3goi1v6a3Vu/39CdXC2P3QDlB9iRs946QYAiOwm8B3lvvQnY35zFAHx/VoTaaUv85kkdZ6v0Cfiplf1WSfTBeX5rifiOXkgQY8jj0Rht+T4Q09bQGmsqTYBPmWV3Apf5po4UzyKhJzXzSj3Zrye0tiQrtD7AER8oxMJIrAAvZ+NcL9ETh74Hp7HvnDHZY0AZrj9oedUsYSJLu2o/+GgR8ZVeDPjnY2KiISugJYIejO2DNzpulyhXgD7WssF8i2gBak9t11amf/9TB74HlZASxx5SxBwB6pXkXJRczsTVhnqKHjJ1//z75PPcRwH8F9INp/0ZClYWAAAAABJRU5ErkJggg=="},WWkf:function(e,t,n){},Wexe:function(e,t,n){},Wme0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.locale}},Wqtl:function(e,t,n){"use strict";t.a={VIEW:"view",GRADE:"grade",CREATE:"create",EDIT:"edit"}},"Wtf/":function(e,t,n){"use strict";n.r(t),n.d(t,"getActivityState",(function(){return f})),n.d(t,"getActivityData",(function(){return p})),n.d(t,"getMyData",(function(){return m})),n.d(t,"getLmsLocked",(function(){return b})),n.d(t,"getStudentGroup",(function(){return y})),n.d(t,"getIsReviewAnonymous",(function(){return v})),n.d(t,"getGroupId",(function(){return h})),n.d(t,"getStudentGroupName",(function(){return g})),n.d(t,"getGroupMembers",(function(){return E})),n.d(t,"getMilestones",(function(){return w})),n.d(t,"getMembers",(function(){return S})),n.d(t,"getActivityLog",(function(){return O})),n.d(t,"getReviewReleasedAt",(function(){return C})),n.d(t,"getGroupReviewRubric",(function(){return _})),n.d(t,"getIsLoading",(function(){return T})),n.d(t,"getIsMilestoneFormShowing",(function(){return I})),n.d(t,"getIsMilestoneLoading",(function(){return P})),n.d(t,"getIsMeetingLoading",(function(){return R})),n.d(t,"getIsResultsPartialsLoading",(function(){return A})),n.d(t,"getGroupCommentsIsLoading",(function(){return j})),n.d(t,"getTeamEvalIsLoading",(function(){return k})),n.d(t,"getRemoveSubmissionIsLoading",(function(){return N})),n.d(t,"getPeerReviewCommentIsLoading",(function(){return D})),n.d(t,"getFeedbackCommentIsLoading",(function(){return L})),n.d(t,"getIsPreviewLoading",(function(){return M})),n.d(t,"getResultPartials",(function(){return x})),n.d(t,"getSelectedInProgressPartials",(function(){return F})),n.d(t,"getSelectedReadyToSubmitPartials",(function(){return V})),n.d(t,"getStudentGroupReviewType",(function(){return G})),n.d(t,"getPostSubmissionMedia",(function(){return U})),n.d(t,"getPostSubmissionText",(function(){return q})),n.d(t,"getActivityResult",(function(){return W})),n.d(t,"getQASettings",(function(){return B})),n.d(t,"isRubricSelfReviewEnabled",(function(){return Q})),n.d(t,"getRubric",(function(){return Y})),n.d(t,"getActivityId",(function(){return H})),n.d(t,"getActivityName",(function(){return z})),n.d(t,"getActivityInstructionsText",(function(){return K})),n.d(t,"getActivityInstructionsMedia",(function(){return X})),n.d(t,"getDueDate",(function(){return $})),n.d(t,"getGroupFormationType",(function(){return Z})),n.d(t,"getActivityType",(function(){return J})),n.d(t,"isVideoToolEnabled",(function(){return ee})),n.d(t,"isDocumentToolEnabled",(function(){return te})),n.d(t,"isMeetingToolEnabled",(function(){return ne})),n.d(t,"isAutoAnalysisScoreEnabled",(function(){return re})),n.d(t,"isAutoAnalysisEnabled",(function(){return ae})),n.d(t,"getRubricEvaluations",(function(){return oe})),n.d(t,"getOthersRubricEvaluations",(function(){return ie})),n.d(t,"getTermClass",(function(){return ce})),n.d(t,"getTermClassId",(function(){return se})),n.d(t,"getStudentActivityResult",(function(){return ue})),n.d(t,"getActivityResultSubmitter",(function(){return le})),n.d(t,"isActivitySubmitting",(function(){return de})),n.d(t,"isGroupNameEditing",(function(){return fe})),n.d(t,"isInteractiveAnswerLoading",(function(){return pe})),n.d(t,"isSubmittable",(function(){return me})),n.d(t,"getReflectionSettings",(function(){return be})),n.d(t,"isReflectionQuestionsEnabled",(function(){return ye})),n.d(t,"getReflectionQuestions",(function(){return ve})),n.d(t,"hasReflectionQuestions",(function(){return he})),n.d(t,"getReflectionAnswers",(function(){return ge})),n.d(t,"hasReflectionAnswers",(function(){return Ee})),n.d(t,"needReflectionAnswers",(function(){return we})),n.d(t,"getPeerReviewType",(function(){return Se})),n.d(t,"isPeerReviewEnabled",(function(){return Oe})),n.d(t,"isFiveStarEnabled",(function(){return Ce})),n.d(t,"isRubricReviewEnabled",(function(){return _e})),n.d(t,"getPeerReviewRequiredCount",(function(){return Te})),n.d(t,"getPeerReviewDueDate",(function(){return Ie})),n.d(t,"isPeerReviewAllowedBeforeSubmission",(function(){return Pe})),n.d(t,"isCommentingAnonymous",(function(){return Re})),n.d(t,"isReviewerAnonymous",(function(){return Ae})),n.d(t,"isSubmitterAnonymous",(function(){return je})),n.d(t,"getAvailablePeerReviews",(function(){return ke})),n.d(t,"getReviewedPeerReviews",(function(){return Ne})),n.d(t,"isPeerReviewGradingEnabled",(function(){return De})),n.d(t,"getGradedPeerReviewWeight",(function(){return Le})),n.d(t,"getEducatorGrade",(function(){return Me})),n.d(t,"getGradeType",(function(){return xe})),n.d(t,"getOverallGrade",(function(){return Fe})),n.d(t,"getGradeParts",(function(){return Ve})),n.d(t,"getMainGradePart",(function(){return Ge})),n.d(t,"getPeerReviewGradePart",(function(){return Ue}));var r=n("G4qV"),a=n("hf66"),o=n("HNnK"),i=n("HCbP"),c=n("28FC"),s=n("csv8"),u=n("dFPr"),l=n("LvDl"),d=n.n(l),f=Object(r.a)(a.a,(function(e){return e.activity})),p=Object(r.a)(f,(function(e){return e.activityData})),m=Object(r.a)(p,(function(e){return e.myData})),b=Object(r.a)(p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.lmsLocked})),y=Object(r.a)(m,(function(e){return e.studentGroup})),v=Object(r.a)(y,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.isReviewAnonymous})),h=Object(r.a)(y,(function(e){return e.dbId})),g=Object(r.a)(y,(function(e){return e.name})),E=Object(r.a)(y,(function(e){return e.members})),w=Object(r.a)(y,(function(e){return e.milestones})),S=Object(r.a)(y,(function(e){return e.members})),O=Object(r.a)(y,(function(e){return e.comments})),C=Object(r.a)(y,(function(e){return e.reviewReleasedAt})),_=Object(r.a)(p,(function(e){return e.groupReviewRubric})),T=Object(r.a)(f,(function(e){return e.isLoading})),I=Object(r.a)(f,(function(e){return e.milestoneFormIsShowing})),P=Object(r.a)(f,(function(e){return e.milestoneIsLoading})),R=Object(r.a)(f,(function(e){return e.meetingIsLoading})),A=Object(r.a)(f,(function(e){return e.resultsPartialsIsLoading})),j=Object(r.a)(f,(function(e){return e.groupCommentsIsLoading})),k=Object(r.a)(f,(function(e){return e.teamEvalIsLoading})),N=Object(r.a)(f,(function(e){return e.removeSubmissionIsLoading})),D=Object(r.a)(f,(function(e){return e.peerReviewCommentIsLoading})),L=Object(r.a)(f,(function(e){return e.feedbackCommentIsLoading})),M=Object(r.a)(f,(function(e){return e.previewIsLoading})),x=Object(r.a)(m,(function(e){return e.resultPartials})),F=Object(r.a)(f,(function(e){return e.selectedInProgressPartials})),V=Object(r.a)(f,(function(e){return e.selectedReadyToSubmitPartials})),G=Object(r.a)(p,(function(e){return e.groupReviewType})),U=Object(r.a)(p,(function(e){return e.commentaryMedia})),q=Object(r.a)(p,(function(e){return e.commentaryText})),W=Object(r.a)(m,(function(e){return e.result})),B=Object(r.a)(p,(function(e){return e.qaSettings})),Q=Object(r.a)(p,(function(e){return e.rubricSelfAllowed})),Y=Object(r.a)(p,(function(e){return e.rubric})),H=Object(r.a)(p,(function(e){return e.dbId})),z=Object(r.a)(p,(function(e){return e.name})),K=Object(r.a)(p,(function(e){return e.instructionsText})),X=Object(r.a)(p,(function(e){return e.instructionsMedia})),$=Object(r.a)(p,(function(e){return e.submitDueAt})),Z=Object(r.a)(p,(function(e){return e?e.executorsType:null})),J=Object(r.a)(p,(function(e){return e?e.type:null})),ee=Object(r.a)(p,(function(e){return e.isVideoToolEnabled})),te=Object(r.a)(p,(function(e){return e.isDocumentToolEnabled})),ne=Object(r.a)(p,(function(e){return e.isMeetingToolEnabled})),re=Object(r.a)(p,(function(e){return e.isVideoAnalysisScoreEnabled})),ae=Object(r.a)(p,(function(e){return e.autoAnalysisEnabled===c.a.ENABLED})),oe=Object(r.a)(m,(function(e){return e.rubricEvaluations})),ie=Object(r.a)(oe,o.i,(function(e,t){return d.a.filter(e,(function(e){return e.user.dbId!==t}))})),ce=Object(r.a)(p,(function(e){return e?e.termClass:void 0})),se=Object(r.a)(ce,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.dbId})),ue=Object(r.a)(m,(function(e){return e.result})),le=Object(r.a)(ue,(function(e){return e?e.submitter:null})),de=Object(r.a)(f,(function(e){return e.isActivitySubmitting})),fe=Object(r.a)(f,(function(e){return e.isGroupNameEditing})),pe=Object(r.a)(f,(function(e){return e.interactiveAnswerIsLoading})),me=Object(r.a)(p,(function(e){return e.submittable})),be=Object(r.a)(p,(function(e){return i.a.isReflectionQuestionsAllowed()?e.reflectStageSettings:null})),ye=Object(r.a)(be,(function(e){return Boolean(e)&&e.reflectStageEnabled})),ve=Object(r.a)(ye,be,(function(e,t){return e?t.reflectQuestions:[]})),he=Object(r.a)(ve,(function(e){return Boolean(e)&&e.length>0})),ge=Object(r.a)(ye,m,(function(e,t){return e?t.reflectAnswers:[]})),Ee=Object(r.a)(ge,(function(e){return Boolean(e)&&e.length>0})),we=Object(r.a)(ye,he,Ee,(function(e,t,n){return e&&t&&!n})),Se=Object(r.a)(p,(function(e){return e.peerReviewType})),Oe=Object(r.a)(Se,(function(e){return Boolean(e)})),Ce=Object(r.a)(p,(function(e){return e.studentFivestarValuationEnabled})),_e=Object(r.a)(p,(function(e){return e.rubricPeerAllowed})),Te=Object(r.a)(p,(function(e){return e.peerReviewAmount})),Ie=Object(r.a)(p,(function(e){return e.peerReviewDueAt})),Pe=Object(r.a)(p,(function(e){return e.allowViewOthersResultsWithoutOwn})),Re=Object(r.a)(p,(function(e){return e.isCommentingAnonymous})),Ae=Re,je=Object(r.a)(p,(function(e){return e.peerReviewSubmitterAnonymous})),ke=Object(r.a)(p,(function(e){return e.availableResults})),Ne=Object(r.a)(p,(function(e){return e.reviewedResults})),De=Object(r.a)(p,Oe,(function(e,t){return!(!t||!i.a.isGradedPeerReviewAllowed())&&Boolean(e[s.b.SETTINGS_ENABLED])})),Le=Object(r.a)(De,p,(function(e,t){return e?t[s.b.SETTINGS_WEIGHT]:null})),Me=Object(r.a)(m,(function(e){return e.educatorGrade})),xe=Object(r.a)(p,(function(e){return e.gradeType})),Fe=Object(r.a)(Me,(function(e){return e?e.overallValue:null})),Ve=Object(r.a)(Me,(function(e){return e?e.gradeParts:null})),Ge=Object(r.a)(Ve,(function(e){return e?d.a.find(e,{type:u.a.ACTIVITY_RESULT}):null})),Ue=Object(r.a)(Ve,(function(e){return e?d.a.find(e,{type:u.a.PEER_REVIEW}):null}))},Xs32:function(e,t,n){},"Y+Fw":function(e,t,n){},Y3Gn:function(e,t,n){},Y7ox:function(e,t,n){"use strict";var r=n("wNa6"),a=n("OWj0");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"showModal",value:function(e){r.a.dispatch(a.f(e))}},{key:"closeModal",value:function(){r.a.dispatch(a.e())}},{key:"showNextModal",value:function(e){r.a.dispatch(a.g(e))}},{key:"showPreviousModal",value:function(){r.a.dispatch(a.h())}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}();t.a=i},YHQS:function(e,t,n){},YSsg:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("kbsL"),u=n("hu4m"),l=n("J/33"),d=n("LFYD"),f=n("TSYQ"),p=n.n(f),m=n("LvDl"),b=n.n(m);n("gnXi");function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h="dialog-header",g="dialog-title";function E(e){return b.a.pick(e,Object.keys(S.componentProps))}function w(e){var t=e.onClose,n=e.title,r=e.hasCloseButton;return a.a.createElement("div",{className:p()(h,r&&"with-close-button",n&&"with-text")},n&&a.a.createElement("div",{className:g},n),r&&a.a.createElement(s.c,{id:"button-dialog-top-close",onClick:t},d.a.CLOSE))}var S=function(e){var t=e.mobileFullScreen?"dialog-fullscreen":null,n=y({},E(e),{title:w(e),className:p()("dialog-overlay",e.className),contentClassName:p()("dialog-content",e.contentClassName),dialogClassName:p()("dialog",t,e.dialogClassName,e.fullPage?"full-page":null),"aria-label":e.ariaLabel||e.title});e.fullPage&&delete n.title;var r=[];return e.hasMobileCloseButton&&r.push(a.a.createElement(s.c,{id:"button-dialog-mobile-top-close",onClick:e.onClose},d.a.CLOSE)),a.a.createElement(c.n,n,e.fullPage?a.a.createElement("div",{className:p()("dialog-contents full-page md-toolbar-relative",e.actions&&e.actions.length>0?"has-actions":null)},a.a.createElement(l.a,{className:"page-toolbar",title:e.title,actions:r}),a.a.createElement("div",{className:"dialog-mobile-contents"},e.children),e.actions&&a.a.createElement(u.a,{zDepth:1,className:"dialog-mobile-actions"},e.actions)):a.a.createElement("div",{className:"dialog-contents"},e.children))};S.componentProps={actions:i.a.array,autosizeContent:i.a.bool,autopadContent:i.a.bool,className:i.a.string,containFocus:i.a.bool,contentClassName:i.a.string,contentStyle:i.a.any,dialogClassName:i.a.string,dialogStyle:i.a.any,disableScrollLocking:i.a.bool,fullPage:i.a.bool,height:i.a.oneOfType([i.a.string,i.a.number]),id:i.a.string.isRequired,lastChild:i.a.bool,modal:i.a.bool,onHide:i.a.func,portal:i.a.bool,renderNode:i.a.object,style:i.a.any,visible:i.a.bool.isRequired,width:i.a.oneOfType([i.a.string,i.a.number])},S.propTypes=y({},S.componentProps,{ariaLabel:i.a.any,hasCloseButton:i.a.bool,hasMobileCloseButton:i.a.bool,mobileFullScreen:i.a.bool,onClose:i.a.func,title:i.a.any}),S.defaultProps={autopadContent:!1,hasCloseButton:!1,hasMobileCloseButton:!0,mobileFullScreen:!1,modal:!0,visible:!1},t.a=S},Yo20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d}));var r="[Notification]",a=r+" Added",o=r+" Updated",i=r+" Removed",c=r+" Removed all";function s(e,t){return{type:a,payload:{itemId:e,itemType:t}}}function u(e,t){return{type:o,payload:{itemId:e,itemType:t}}}function l(e){return{type:i,payload:{itemIds:e}}}function d(){return{type:c,payload:{}}}},"Z+gg":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="[Session] Set unsupported browser message dismissed",a=function(){return{type:r}}},ZUBI:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/W66"),i=n("17x9"),c=n.n(i),s=n("/MKj"),u=n("9C/b"),l=n("fcFR"),d=n("nbG6"),f=n("7D+u"),p=n("hHKf"),m=n("giI2"),b=n("kbsL"),y=n("iGlQ"),v=n("r1K/"),h=n("TEiA"),g=n("ZD0w"),E=n("xHcp"),w=n("rKop"),S=n("Y7ox"),O=n("ERI2"),C=n("Wtf/"),_=n("TVp9"),T=n("LFYD"),I=n("J4sO"),P=(n("/DTu"),n("v6po"));function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={dialogVisible:!1,deleteDialogVisible:!1,educatorDeleteDialogVisible:!1,selectedDeleteRow:null},M=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=j(t).call(this,e),n=!i||"object"!==R(i)&&"function"!==typeof i?N(r):i,D(N(N(n)),"getIconForType",(function(e){var t=n.props.i18n;if(e&&e.__typename){var r,o=e.dbId,i=e.media,c=e.__typename,s=e.isCrashed,u=e.isWithdrawn;switch(o&&"QaAnswer"===c&&(s||u?r=u?"withdraw":"crashed":(r="processing",i&&e.media.dbId&&(r=e.media.processingStatus===I.a.READY?"ready":e.media.processingStatus===I.a.PROGRESS?"processing":"crashed"))),r){case"ready":return a.a.createElement(m.a,{ariaLabel:t._("Ready, icon"),tooltip:{label:t._("Completed")},className:"wip-type-icon"},T.a.VIDEO_READY);case"processing":return a.a.createElement(m.a,{ariaLabel:t._("Processing, icon"),tooltip:{label:t._("Processing")},className:"wip-type-icon"},T.a.VIDEO_PROCESSING);case"crashed":return a.a.createElement(m.a,{ariaLabel:t._("No answer provided, icon"),tooltip:{label:t._("Issue while processing")},className:"wip-type-icon status-crashed"},T.a.VIDEO_WARNING);case"withdraw":return a.a.createElement(m.a,{ariaLabel:t._("Withdrawn, icon"),tooltip:{label:t._("Withdrawn")},className:"wip-type-icon"},T.a.VIDEO_WITHDRAW);default:return a.a.createElement(m.a,{className:"wip-type-icon",ariaLabel:t._("Video, icon")},T.a.VIDEOCAM)}}})),D(N(N(n)),"onPreview",(function(e){var t=n.props.match.params,r=t.activityId,o=t.classId;e.media&&(e.media.srcUrl&&S.a.showModal(a.a.createElement(p.c,{media:e.media,termClassId:+o,activityId:+r,usageContext:P.a.STUDENT_RESULT_PARTIAL,onCancel:S.a.closeModal})))})),D(N(N(n)),"onDownload",(function(e){if(e.media){var t=e.media.downloadUrl;t&&window.open(t,"_blank")}else{var n=e.downloadUrl;n&&window.open(n,"_blank")}})),D(N(N(n)),"onRowDelete",(function(e){n.setState({deleteDialogVisible:!0,selectedDeleteRow:e})})),D(N(N(n)),"onEducatorRowDelete",(function(e){n.setState({educatorDeleteDialogVisible:!0,selectedDeleteRow:e})})),D(N(N(n)),"onDeleteCancel",(function(){n.setState({deleteDialogVisible:!1,educatorDeleteDialogVisible:!1,selectedDeleteRow:null})})),D(N(N(n)),"onDeleteSubmit",(function(){var e=n.state.selectedDeleteRow;e&&O.a.deleteAnswer(e.qaQuestion.dbId).then((function(){n.setState({deleteDialogVisible:!1,selectedDeleteRow:null}),n.props.onDelete&&n.props.onDelete()}))})),D(N(N(n)),"onDeleteAnswerFromEducator",(function(){var e=n.state.selectedDeleteRow,t=n.props.match.params,r=t.activityId,a=t.studentId;r=+r,a=+a,e&&w.a.deleteQAAnswer(e.qaQuestion.dbId,a,r,!0).then((function(){n.setState({deleteDialogVisible:!1,selectedDeleteRow:null}),E.a.getEducatorProgressActivityData(r,a)}))})),D(N(N(n)),"createActionsMenu",(function(e,t){var r=!1,i=!1,c=!1,s=n.props,u=s.qaSettings,d=s.i18n,f=s.submitRequestedAt,p=s.readOnly,b=s.allowActions;e.media?(r=!!e.media.externalPlayUrl,i=!!e.media.downloadUrl,c=Boolean(e.media.slaveMedia)):(i=!!e.downloadUrl,r=!!e.previewUrl);var v=[a.a.createElement(y.c,{key:t+"_preview",data:e,enabled:b&&r,onClick:function(){n.onPreview(e)},leftIcon:a.a.createElement(m.a,{ariaLabel:d._("Preview, icon")},T.a.PREVIEW),primaryText:d._("Preview")})],h=a.a.createElement(m.a,null,T.a.DOWNLOAD);return c?(v.push(a.a.createElement(y.c,{key:t+"_download_camera",enabled:!!e.media.downloadUrl,data:e,onClick:function(){return Object(l.a)(e.media.downloadUrl)},leftIcon:h,primaryText:d._("Download camera recording")})),v.push(a.a.createElement(y.c,{key:t+"_download_desktop",enabled:!!e.media.slaveMedia.downloadUrl,data:e,onClick:function(){return Object(l.a)(e.media.slaveMedia.downloadUrl)},leftIcon:h,primaryText:d._("Download screen recording")}))):v.push(a.a.createElement(y.c,{key:t+"_download",data:e,enabled:b&&i,onClick:function(){n.onDownload(e)},leftIcon:h,primaryText:d._("Download")})),u.isStudentRetakeAllowed&&!p?(v.push(a.a.createElement(o.a,{key:"menu_item_divider[retake]"})),v.push(a.a.createElement(y.c,{key:t+"_retake",data:e,enabled:b&&!f&&!n.props.lmsLocked,onClick:function(){n.onRowDelete(e)},leftIcon:a.a.createElement(m.a,{ariaLabel:d._("Retake, icon")},T.a.REPLAY),primaryText:d._("Retake")}))):p&&(v.push(a.a.createElement(o.a,{key:"menu_item_divider[retake]"})),v.push(a.a.createElement(y.c,{key:t+"_retake",data:e,enabled:b&&!f&&!n.props.lmsLocked,onClick:function(){n.onEducatorRowDelete(e)},leftIcon:a.a.createElement(m.a,{ariaLabel:d._("Retake, icon")},T.a.REPLAY),primaryText:d._("Retake")}))),v})),D(N(N(n)),"createColumns",(function(){var e=N(N(n));return[{accessor:"startedAt",grow:!0,className:"qa-started-at",label:n.props.i18n._("Started At"),renderer:function(t){return a.a.createElement("div",null,e.getIconForType(t),a.a.createElement(f.b,{className:"wip-name-label",value:t[this.accessor]}))}},{accessor:"",isCustomColumn:!0,className:"table-actions qa-actions",label:a.a.createElement("span",{style:{visibility:"hidden"}},a.a.createElement(g.Trans,{id:"Actions"})),renderer:function(t,n){return a.a.createElement(f.d,{key:n,menuItems:e.createActionsMenu(t,n)})}}]})),D(N(N(n)),"onSubmit",(function(){n.setState({dialogVisible:!0})})),D(N(N(n)),"onSubmitConfirm",(function(){var e=n.props.match.params.activityId;e=+e,E.a.submitQAActivity(e).then((function(){n.setState({dialogVisible:!1})}))})),D(N(N(n)),"onSubmitCancel",(function(){n.setState({dialogVisible:!1})})),D(N(N(n)),"hasCrashedAnswers",(function(){for(var e=n.props.qaAnswers,t=0;t<e.length;t++)if(e[t].isCrashed&&!e[t].isWithdrawn)return!0;return!1})),D(N(N(n)),"canSubmitAssignmemt",(function(){var e=n.props,t=e.isSubmitting,r=e.submitRequestedAt,a=e.readOnly,o=e.result;return Boolean(!t&&!r&&!a&&!o&&!n.hasCrashedAnswers())})),D(N(N(n)),"getSubmitButtonTooltip",(function(){var e=n.props.i18n;return n.hasCrashedAnswers()?{label:e._("You need to resolve all issues before you can submit")}:null})),D(N(N(n)),"getInfoMessage",(function(){var e=n.props,t=e.activityData,r=e.qaAnswers,o=e.i18n,i=e.qaSettings,c=e.questionCount,s=e.submitRequestedAt,u=e.result;if(i.isStudentRetakeAllowed&&n.hasCrashedAnswers())return a.a.createElement("div",{className:"submit-requested-info"},a.a.createElement(v.b,{className:"submit-requested-info",type:v.a.WARNING},a.a.createElement("p",null,o._("There was an issue with at least one of your answers."),i.isStudentRetakeAllowed&&" "+o._("You will need to retake those questions."))));var l=!1,d=u;return t&&t.dataForOneStudent&&t.dataForOneStudent.result&&(d=t.dataForOneStudent.result),d&&d.requiredMedia&&d.requiredMedia.processingStatus?l=d.requiredMedia.processingStatus===I.a.PROGRESS:!i.isStudentRetakeAllowed&&r&&r.length===c&&(l=!0),s||l?a.a.createElement(v.b,{className:"submit-requested-info",type:v.a.INFO,message:o._("Your assignment will be submitted once it's done processing.")}):null})),n.columns=n.createColumns(),n.state=L,n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state,n=t.dialogVisible,r=t.deleteDialogVisible,o=t.educatorDeleteDialogVisible,i=this.props,c=i.qaAnswers,s=i.answerIsDeleting,u=i.i18n,l=i.qaSettings,f=i.questionCount,m=i.isSubmitting,y=i.currentQuestion;return y&&(c=c.filter((function(e){return!(e.qaQuestion&&e.qaQuestion.dbId===y.dbId)}))),a.a.createElement("div",null,a.a.createElement(d.a,null,a.a.createElement(d.d,{title:u._("Recorded Answers")}),a.a.createElement(d.c,null,this.getInfoMessage(),c&&c.length>0?a.a.createElement(h.a,{columns:this.columns,className:"meeting-table",data:c,listAccessor:"startedAt",hasMobileListView:!1,tableSummary:u._("Inside a table, a list of any recorded answers"),onListRowSelect:function(){}}):a.a.createElement("p",{className:"card-placeholder-text"},a.a.createElement(g.Trans,{id:"There are currently no recorded answers"}))),!this.props.lmsLocked&&l.isStudentRetakeAllowed&&c.length===f?a.a.createElement(d.b,null,a.a.createElement(b.f,{id:"button-assignment-qa-submit",primary:!0,ariaLabel:u._("Submit Assignment"),enabled:this.canSubmitAssignmemt(),onClick:this.onSubmit,className:"card-submit-assignment-btn",tooltip:this.getSubmitButtonTooltip()},a.a.createElement(g.Trans,{id:"Submit Assignment"}))):null),a.a.createElement(p.a,{id:"delete-answer-dialog",title:u._("Retake Answer"),visible:r||o,actions:[a.a.createElement(b.a,{id:"button-assignment-qa-resource-delete-dialog-cancel",secondary:!0,enabled:!s,onClick:this.onDeleteCancel,ariaLabel:u._("Cancel")},a.a.createElement(g.Trans,{id:"Cancel"})),a.a.createElement(b.a,{id:"button-assignment-qa-resource-delete-dialog-retake",primary:!0,isLoading:s,enabled:!s,onClick:function(){o?e.onDeleteAnswerFromEducator():e.onDeleteSubmit()},ariaLabel:u._("Retake")},a.a.createElement(g.Trans,{id:"Retake"}))]},a.a.createElement("p",null,a.a.createElement(g.Trans,{id:"Are you sure you want to retake this question?"}))),a.a.createElement(p.a,{id:"submit-qa-activity-dialog",title:u._("Submit"),visible:n,actions:[a.a.createElement(b.a,{id:"button-assignment-qa-submit-dialog-cancel",secondary:!0,enabled:!m,onClick:this.onSubmitCancel,ariaLabel:u._("Cancel")},a.a.createElement(g.Trans,{id:"Cancel"})),a.a.createElement(b.a,{id:"button-assignment-qa-submit-dialog-submit",primary:!0,isLoading:m,enabled:!m,onClick:this.onSubmitConfirm,ariaLabel:u._("Submit")},a.a.createElement(g.Trans,{id:"Submit"}))]},a.a.createElement("p",null,a.a.createElement(g.Trans,{id:"Are you sure you want to submit?"}))))}}])&&A(n.prototype,r),i&&A(n,i),t}(r.Component);M.propTypes={allowActions:c.a.bool,readOnly:c.a.bool,currentQuestion:c.a.object},M.defaultProps={allowActions:!1,readOnly:!1};t.a=Object(g.withI18n)()(Object(u.a)(Object(s.b)((function(e){return{currentQuestion:_.e(e),activityData:C.getActivityData(e),lmsLocked:C.getLmsLocked(e),answerIsDeleting:_.i(e),isSubmitting:C.isActivitySubmitting(e),qaAnswers:_.d(e),qaSettings:_.g(e),questionCount:_.f(e),result:C.getActivityResult(e),submitRequestedAt:_.k(e)}}))(M)))},ZmiZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("4XMt"),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("1CkY");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return f.a.pick(e,Object.keys(w.componentProps))}var w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=y(t).call(this,e),n=!o||"object"!==p(o)&&"function"!==typeof o?h(r):o,g(h(h(n)),"onKeyDown",(function(e){var t=n.props,r=t.onSubmit,a=t.onSubmitKeystroke,o=t.value;if(r&&a){var i=a.modifiers,c=a.keyCode,s=n.isSubmitModifierPressed(i,e),u=n.isSubmitKeyPressed(c,e);s&&u&&r(o)}})),g(h(h(n)),"focus",(function(){n.textFieldMdRef.current.focus()})),n.textFieldMdRef=a.a.createRef(),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"isSubmitModifierPressed",value:function(e,t){if(!e||0===e.length)return!0;for(var n=0;n<e.length;n++){var r=e[n];if(f.a.get(t,r))return!0}return!1}},{key:"isSubmitKeyPressed",value:function(e,t){return(t.which||t.keyCode)===e}},{key:"render",value:function(){var e=f.a.clone(this.props);e.errorText&&(e.error=!0);var t="";return(f.a.isNumber(e.value)||e.value)&&(t=e.value),a.a.createElement(s.Q,m({ref:this.textFieldMdRef},E(e),{className:l()("input-text",e.className),disabled:!e.enabled,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,value:t,onKeyDown:this.onKeyDown}))}}])&&b(n.prototype,r),o&&b(n,o),t}(a.a.PureComponent);w.componentProps={className:i.a.string,error:i.a.bool,errorText:i.a.string,floating:i.a.bool,onBlur:i.a.func,onChange:i.a.func,onClick:i.a.func,onFocus:i.a.func,helpOnFocus:i.a.bool,helpText:i.a.string,id:i.a.string,inlineIndicator:i.a.element,label:i.a.node,leftIcon:i.a.element,onKeyDown:i.a.func,rightIcon:i.a.element,maxLength:i.a.number,maxRows:i.a.number,max:i.a.number,min:i.a.number,placeholder:i.a.string,required:i.a.bool,rows:i.a.number,step:i.a.number,style:i.a.object,value:i.a.oneOfType([i.a.string,i.a.number]),type:i.a.oneOf(["text","number","email","search","tel","url","password"])},w.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}({},w.componentProps,{enabled:i.a.bool,ariaLabel:i.a.string,ariaLabelledby:i.a.string,onSubmit:i.a.func,onSubmitKeystroke:i.a.shape({modifiers:i.a.arrayOf(i.a.oneOf(["ctrlKey","metaKey"])),keyCode:i.a.number}),tooltip:i.a.any}),w.defaultProps={enabled:!0,onSubmitKeystroke:{modifiers:["ctrlKey","metaKey"],keyCode:13},required:!1,value:""},t.b=Object(c.c)(w);var S=w},ZtzG:function(e,t,n){"use strict";var r=n("NQgo"),a=n("q1tI"),o=n.n(a),i=n("ZD0w"),c=n("17x9"),s=n.n(c),u=n("TSYQ"),l=n.n(u),d=n("xrVw"),f=n("giI2"),p=n("LFYD"),m=(n("n0/K"),"avatar-drop-down"),b="icon-container-label";function y(e){var t=e.i18n;return o.a.createElement(d.q,{id:"avatar-drop-down",key:e.key,menuItems:e.menuItems,className:l()(m,e.className),anchor:{x:d.q.HorizontalAnchors.CENTER,y:d.q.VerticalAnchors.OVERLAP},position:d.q.Positions.TOP_RIGHT,animationPosition:"below"},o.a.createElement(d.a,{component:d.w,iconBefore:!0,label:o.a.createElement(d.w,{className:"icon-container",labelClassName:l()(b,e.labelClassName),label:e.label},o.a.createElement(f.a,{ariaLabel:t._("Drop Down Arrow"),className:"drop-down-arrow-icon"},p.a.ARROW_DOWN))},null==e.selectedItem?"":o.a.createElement(r.a,{value:e.selectedItem.firstName+" "+e.selectedItem.lastName})))}y.propTypes={label:s.a.string,labelClassName:s.a.string};Object(i.withI18n)()(y);n.d(t,"a",(function(){return r.a}))},"Zv/t":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return h})),n.d(t,"b",(function(){return g}));var r=n("G4qV"),a=n("upk1"),o=n("LvDl"),i=n.n(o),c=Object(r.a)(a.a,(function(e){return e.fileUploader})),s=Object(r.a)(c,(function(e){return e.files}));function u(e,t){var n=c(e);return n?i.a.get(n,t):null}var l=function(e){return u(e,"isInitialState")},d=function(e){return u(e,"isUploadReadyState")},f=function(e){return u(e,"isUploadingState")},p=function(e){return u(e,"isPausedState")},m=function(e){return u(e,"uploadedFilesCount")},b=function(e){return u(e,"uploadedPercent")},y=function(e){return u(e,"uploadSpeedBps")},v=function(e){return u(e,"secondsLeft")},h=function(e){return u(e,"minutesLeft")},g=function(e){return u(e,"hoursLeft")}},"a/gg":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("YSsg"),u=n("6ZeI"),l=n("s/Ur"),d=n.n(l),f=n("TSYQ"),p=n.n(f),m=(n("gnXi"),n("v6po"));function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=1.333,O=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=h(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==b(o)&&"function"!==typeof o?E(r):o,w(E(E(n)),"getCalculatedWidth",(function(){var e=window.innerWidth,t=window.innerHeight;return e/t>S?.7*t*S:"70%"})),w(E(E(n)),"getDialogComponent",(function(e){var t=n.props,r=t.autoplay,o=t.onCancel,i=t.i18n,c=t.media,l=t.termClassId,d=t.activityId,f=t.usageContext,m=null;c&&c.title&&(m=c.title);var b={ariaLabel:i._("Preview dialog"),autosizeContent:!1,containFocus:!1,contentClassName:"dialog-content",dialogClassName:p()("preview-dialog",e?"mobile-preview":null),fullPage:e,hasCloseButton:!0,id:"preview-dialog",modal:!0,visible:!0,onClose:o,title:m};return a.a.createElement(s.a,y({dialogStyle:{height:"auto",width:e?"100%":n.getCalculatedWidth()}},b),a.a.createElement("div",{className:"preview-contents"},a.a.createElement("div",{className:"dialog-media"},c&&a.a.createElement(u.a,{id:"preview-dialog-media",autoplay:r,playerId:"Preview Video player #"+c.dbId,media:c,termClassId:l,activityId:d,usageContext:f}))))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d.a,{query:"(max-width: 550px)"},(function(t){return void 0===e._firstMediaQueryMatchResult&&(e._firstMediaQueryMatchResult=t),e.getDialogComponent(e._firstMediaQueryMatchResult)})))}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component);O.propTypes={autoplay:i.a.bool,onCancel:i.a.func,media:i.a.any,termClassId:i.a.number,activityId:i.a.number,usageContext:i.a.oneOf([m.a.ACTIVITY_COMMENTARY,m.a.ACTIVITY_OVERVIEW,m.a.COMMENT,m.a.DIRECT_LIBRARY,m.a.FEEDBACK,m.a.INTERACTIVE_VIDEO,m.a.PROFILE,m.a.QA_QUESTION,m.a.STUDENT_RESULT,m.a.STUDENT_RESULT_PARTIAL]).isRequired},O.defaultProps={autoplay:!1},t.a=Object(c.withI18n)()(O)},a2Z2:function(e,t,n){},a7RV:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n("DQM/"),a=n("TtRr"),o=n("vCeT"),i=n("r6t9"),c=n("cK1Q"),s=n("8bCP"),u=n("cRwh"),l=n("jpbM"),d=n.n(l),f=n("+y5T"),p=n("GkKD");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(t){function n(e){var t,r=e.settings,a=e.recorderType;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=v(this,h(n).call(this))).setNotifications({}),t.setActiveNotifications({}),t.chunkSources={},t.settings=r,t.recorderType=a,t}var a,l,m;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,t),a=n,(l=[{key:"init",value:function(){var t,r=(t=regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(){r.emit(n.EVENTS.INITIALIZED)}));case 1:case"end":return t.stop()}}),t,this)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}()},{key:"addStream",value:function(e){var t,r,a,o,c=(E(o={},f.a.CAMERA_ONLY,(E(t={},p.a.CAMERA,this.settings.webCamFileName),E(t,p.a.DESKTOP,this.settings.webCamFileName),t)),E(o,f.a.DESKTOP_ONLY,(E(r={},p.a.DESKTOP,this.settings.webCamFileName),E(r,p.a.MICROPHONE,this.settings.deskShareFileName),r)),E(o,f.a.CAMERA_WITH_DESKTOP,(E(a={},p.a.CAMERA,this.settings.webCamFileName),E(a,p.a.DESKTOP,this.settings.deskShareFileName),a)),o)[this.recorderType][e.streamName],s=new i.a({mediaStream:e.stream,uploadUrl:this.settings.uploadUrl,token:this.settings.token,fileName:c+"_".concat(d()(16)),resultKey:u.a[e.streamName],currentUser:this.currentUser});this.chunkSources[e.streamName]=s,this.emit(n.EVENTS.STREAM_ADDED,e),s.onProgress(this._onChunkUploadProgress.bind(this))}},{key:"startRecording",value:function(){Object.values(this.chunkSources).forEach((function(e){e.startCapturing()})),this.emit(n.EVENTS.RECORDING_STARTED)}},{key:"stopRecording",value:function(){var e=this,t=[];Object.values(this.chunkSources).forEach((function(e){t.push(e.stopCapturing())})),Promise.all(t).then((function(){var t={};Object.keys(e.chunkSources).forEach((function(n){var a=e.chunkSources[n],o=new Blob(a.getAllChunks(),{type:r.a}),i=URL.createObjectURL(o);t[n]=new c.a({streamName:n,streamUrl:i})})),e.emit(n.EVENTS.RECORDING_STOPPED),e.emit(n.EVENTS.PREVIEW_IS_READY,t)})).catch((function(e){s.b.error(e)}))}},{key:"getFinalizeOptions",value:function(){var e=this,t={};return Object.keys(this.chunkSources).forEach((function(n){var r,a,o=e.chunkSources[n].chunkUploader.fileName;n===p.a.CAMERA&&(r=o),n===p.a.MICROPHONE&&(a=o),n===p.a.DESKTOP&&e.recorderType===f.a.DESKTOP_ONLY&&(r=o),n===p.a.DESKTOP&&e.recorderType===f.a.CAMERA_WITH_DESKTOP&&(a=o),r&&(t.filename=r),a&&(t.slaveFilename=a)})),t}},{key:"destroy",value:function(){this.removeAllListeners(),Object.values(this.chunkSources).forEach((function(e){e.stopUpload()})),this.chunkSources={}}},{key:"_onChunkUploadProgress",value:function(){var e=this.getTotalUploadingProgress();if(this.emit(o.a.UPLOADING_PROGRESS,e),e>=100){var t=!0;Object.values(this.chunkSources).forEach((function(e){e.isUploadingFinished()||(t=!1)})),t&&(this.emit(o.a.UPLOAD_FINISHED),this.uploadFinished=!0)}}},{key:"isUploadFinished",value:function(){return this.uploadFinished}},{key:"getTotalUploadingProgress",value:function(){var e=Object.values(this.chunkSources);if(0===e.length)return 0;var t=0;return e.forEach((function(e){return t+=e.getUploadingProgress(),null})),t/e.length}}])&&y(a.prototype,l),m&&y(a,m),n}(a.a);E(w,"EVENTS",o.a)}).call(this,n("URgk").setImmediate)},a9g0:function(e,t,n){},aFXm:function(e,t,n){},aPJY:function(e,t,n){},"aU7/":function(e,t,n){"use strict";t.a={INITIALIZATION:"initialiation",INITED:"recorderInited",WINDOW_IS_BLOCKED:"windowIsBlocked",WINDOW_CLOSED:"windowClosed"}},aapZ:function(e,t,n){},amkF:function(e,t,n){},apGr:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("LvDl"),c=n.n(i),s=n("8bCP"),u=n("wd/R"),l=n.n(u);function d(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    mutation logMediaWatching($input: LogMediaWatchingInput!) {\n        logMediaWatching(input:$input) {\n            result\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return d=function(){return e},e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=Object(s.c)("video-tracking"),b=0,y=1e3,v=function(){function e(t){var n=this,r=t.mediaId,a=t.mediaSrc,o=t.usageContext,i=t.termClassId,s=t.activityId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"playStatement",c.a.debounce((function(e){n.sendRequest({statementType:h.PLAY,startingPoint:e})}),y)),p(this,"pauseStatement",c.a.debounce((function(e){n.sendRequest({statementType:h.PAUSE,endingPoint:e})}),y)),p(this,"watchStatement",c.a.debounce((function(e){var t=n.previousTime;e<=t||c.a.isNumber(t)&&c.a.isNumber(e)&&n.sendRequest({statementType:h.WATCH,startingPoint:t,endingPoint:e})}),y)),p(this,"skipStatement",c.a.debounce((function(e,t){t!==e&&c.a.isNumber(e)&&c.a.isNumber(t)&&n.sendRequest({statementType:h.SKIP,startingPoint:e,endingPoint:t})}),y)),p(this,"completeStatement",c.a.debounce((function(e){n.sendRequest({statementType:h.COMPLETE,endingPoint:e})}),y)),this.mediaId=r,this.mediaSrc=a,this.usageContext=o,this.termClassId=i,this.activityId=s,this.mediaDuration=b,this.statementsQueue=[]}var t,n,a;return t=e,(n=[{key:"setMediaDuration",value:function(e){var t=this;if(null!=e){var n=+e;c.a.isNumber(n)&&!c.a.isNaN(n)&&(this.mediaDuration=n,this.statementsQueue.forEach((function(e){e.mediaDuration=t.mediaDuration,t.sendRequest(e)})),this.statementsQueue=[])}}},{key:"setPreviousTime",value:function(e){this.previousTime=e}},{key:"getRequestParams",value:function(){var e={mediaId:this.mediaId,mediaDuration:this.mediaDuration,mediaSrc:this.mediaSrc,usageContext:this.usageContext,termClassId:+this.termClassId,activityId:+this.activityId,emittedAt:Math.floor(l.a.utc().valueOf()/1e3)};return e.activityId&&c.a.isNumber(e.activityId)||delete e.activityId,e.termClassId&&c.a.isNumber(e.termClassId)||delete e.termClassId,e}},{key:"sendRequest",value:function(e){var t=this.getRequestParams();t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},t,e),this.mediaDuration!==b?(m.info("sendRequest ".concat(JSON.stringify(e))),r.a.mutate({mutation:g,variables:{input:t}}).catch((function(e){m.warn(e)}))):this.statementsQueue.push(t)}}])&&f(t.prototype,n),a&&f(t,a),e}(),h={PLAY:"TYPE__PLAY",PAUSE:"TYPE__PAUSE",WATCH:"TYPE__WATCH",SKIP:"TYPE__SKIP",COMPLETE:"TYPE__COMPLETE"},g=o()(d())},aqn0:function(e,t,n){},"b+Px":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));var r="[Group-Formation] Set is loading",a="[Group-Formation] Set group formation data",o=function(e){return{type:r,payload:e}},i=function(e){return{type:a,payload:e}}},bFdo:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("/MKj"),u=n("9C/b"),l=n("w8M0"),d=n("oe1p"),f=n("kbsL"),p=n("J/33"),m=n("UyA7"),b=n("LFYD"),y=n("uvcT"),v=n("4pH6");function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=w(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==h(o)&&"function"!==typeof o?O(r):o,C(O(O(n)),"loadActivityData",(function(){var e=n.props,t=e.activityId,r=e.classId;r&&(t?y.a.getActivityNavigationItems(+r,+t):y.a.getNavigationItems(+r))})),C(O(O(n)),"getNavigationItems",(function(){var e=n.props,t=e.navigation,r=e.navigationItems,o=e.topNavigationItems,i=e.type,c=[];return o&&(c=g(o)),t&&(i===T.EDUCATOR?c.push(a.a.createElement(d.a,{key:"educator-external-links",navigationItems:t,displayedNavigationItems:r})):i===T.STUDENT&&c.push(a.a.createElement(d.a,{key:"student-external-links",navigationItems:t,displayedNavigationItems:r}))),c})),C(O(O(n)),"onVisibilityChange",(function(){})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.loadActivityData()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.loadActivityData()}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.i18n;return a.a.createElement("div",null,a.a.createElement(l.a,{id:"nav-drawer",type:l.a.DrawerTypes.TEMPORARY,visible:t,position:"left",navItems:this.getNavigationItems(),onVisibilityChange:this.onVisibilityChange,header:a.a.createElement(p.a,{fixed:!1,actions:[a.a.createElement(f.c,{id:"button-navigation-back",ariaLabel:n._("Go Back"),onClick:this.props.onClose},b.a.BACK)],className:"md-divider-border md-divider-border--bottom"})}))}}])&&E(n.prototype,r),o&&E(n,o),t}(r.Component);_.propTypes={activityId:i.a.number,classId:i.a.number,navigationItems:i.a.array,onClose:i.a.func,topNavigationItems:i.a.array,type:i.a.string.isRequired,visible:i.a.bool},_.defaultProps={navigationItems:[],topNavigationItems:[],visible:!1};var T={STUDENT:"student",EDUCATOR:"educator"};t.b=Object(c.withI18n)()(Object(u.a)(Object(s.b)((function(e){return{navigation:v.a(e),isLoading:v.b(e),ltiScope:m.j(e)}}))(_)))},bjo3:function(e,t,n){"use strict";var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return p}));var o="reflectQuestionsAllowed",i=1e3,c=1e3,s=1,u=10,l={QUESTION:{SORT:"orderNumber",TEXT:"questionText"},ANSWER:{TEXT:"answerText"}},d="NEW",f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},(a(r={},l.QUESTION.SORT,u),a(r,l.QUESTION.TEXT,""),a(r,"isDirty",!1),r),{isNew:!0});function p(){return d+"_"+(new Date).getTime()}},cK1Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fcFR"),a=n("8bCP");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n=this,r=t.stream,a=t.streamUrl,o=t.streamName;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stream=r,this.streamUrl=a,this.streamName=o,this.__streamClones=[],window.addEventListener("beforeunload",(function(){n.destroy()}))}var t,n,i;return t=e,(n=[{key:"__closeAllStreamClones",value:function(){try{this.__streamClones.forEach((function(e){e.getTracks().forEach((function(e){try{e.stop()}catch(t){a.b.error("Stream::__closeAllStreamClones Error during closing stream track",t)}}))}))}catch(e){a.b.error("Stream::__closeAllStreamClones Error during closing all streams",e)}}},{key:"getRawStream",value:function(){return this.stream}},{key:"getName",value:function(){return this.streamName}},{key:"attachToElement",value:function(e){this.stream&&e&&e.srcObject!==this.stream?e.srcObject=this.stream:this.streamUrl&&e&&e.src!==this.streamUrl&&(e.src=this.streamUrl)}},{key:"attachVideoToElement",value:function(e){var t;if(this.stream&&"function"===typeof this.stream.getVideoTracks&&(t=this.stream.getVideoTracks()[0]),this.stream&&t&&e&&(!e.srcObject||e.srcObject.getVideoTracks()[0]!==t)){var n=new MediaStream;n.addTrack(t.clone()),this.__streamClones.push(n),e.srcObject=n}}},{key:"getCameraId",value:function(e){var t=this.stream.getVideoTracks()[0];return this.cameraDeviceId=this.__findDeviceId(e,t),this.cameraDeviceId}},{key:"getMicrophoneId",value:function(e){var t=this.stream.getAudioTracks()[0];return this.microphoneDeviceId=this.__findDeviceId(e,t),this.microphoneDeviceId}},{key:"download",value:function(){if(this.streamUrl)return r.a(this.streamUrl)}},{key:"onVideoEnd",value:function(e){this.stream&&this.stream.getVideoTracks()[0]&&(this.stream.getVideoTracks()[0].onended=e)}},{key:"destroy",value:function(){this.onVideoEnd(null),this.__closeAllStreamClones(),this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()}))}},{key:"__findDeviceId",value:function(e,t){var n;return t&&e&&e.forEach((function(e){e.label===t.label&&(n=e.deviceId)})),n}}])&&o(t.prototype,n),i&&o(t,i),e}()},cMfo:function(e,t,n){"use strict";t.a={ASSIGNMENT:"activity",CENGAGE_EDUCATOR_DOCK:"cengage-educator-dock",CENGAGE_STUDENT_DOCK:"cengage-student-dock",CENGAGE_CREATE:"cengage-create",CENGAGE_EDIT:"cengage-edit",D2L_ACTIVITY_ADD_SCOPE:"d2l-activity-add",D2L_MEETING_LIST:"d2l-resource-syncmeeting-list",D2L_MEETING_ADD:"d2l-resource-syncmeeting-add",D2L_MEETING_OPEN:"d2l-resource-syncmeeting-open",D2L_ASSIGNMENT_LIST:"d2l-activity-list",D2L_ASSIGNMENT_ADD:"d2l-activity-add"}},cNTu:function(e,t,n){},cRwh:function(e,t,n){"use strict";var r,a=n("GkKD");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(o(r={},a.a.CAMERA,"webcamResult"),o(r,a.a.DESKTOP,"desktopResult"),o(r,a.a.MICROPHONE,"audioResult"),r);t.a=i},cq5E:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("yfwS"),a=n.n(r);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._emitter=new a.a,this.timeLeftArr=[],this.timeLeftSmoothCoef=20,this.uploadSpeedBps=0,this.secondsLeft=0,this.uploadStartTime=(new Date).getTime(),this.uploadFirstPass=!1}var t,n,r;return t=e,(n=[{key:"on",value:function(){var e;(e=this._emitter).on.apply(e,arguments)}},{key:"emit",value:function(){var e;(e=this._emitter).emit.apply(e,arguments)}},{key:"reset",value:function(){this.timeLeftArr=[],this.timeLeftSmoothCoef=20,this.uploadSpeedBps=0,this.secondsLeft=0,this.uploadStartTime=(new Date).getTime(),this.uploadFirstPass=!1}},{key:"start",value:function(){this.reset(),this.populateCurrentState(),this._startFakeTimer()}},{key:"pause",value:function(){this.reset(),clearInterval(this._timer)}},{key:"_startFakeTimer",value:function(){var e=this;this._timerLastTick=(new Date).getTime(),this._timer=setInterval((function(){0!==e.secondsLeft&&(new Date).getTime()-e._timerLastTick>=1e3&&(e.secondsLeft--,e.populateCurrentState(),e._timerLastTick=(new Date).getTime())}),300)}},{key:"progress",value:function(e,t){this.uploadedPercent=Math.round(e/t*100);var n=(new Date).getTime();this.uploadFirstPass||(this.uploadFirstPass=!0,this.uploadStartSize=e),this.uploadSpeedBps=(e-this.uploadStartSize)/(n-this.uploadStartTime)*1e3*8,isFinite(this.uploadSpeedBps)||(this.uploadSpeedBps=0),this.secondsLeft=this.getSecondsLeft(this.uploadSpeedBps,t-e),this.populateCurrentState()}},{key:"getSecondsLeft",value:function(e,t){var n=Math.round(t/(e/8));if(this.timeLeftArr.length){this.timeLeftArr.push(n),this.timeLeftArr.length>this.timeLeftSmoothCoef&&this.timeLeftArr.shift();var r=this.timeLeftArr.reduce((function(e,t){return e+t}));n=Math.round(r/this.timeLeftArr.length)}return n}},{key:"getTimeObject",value:function(){var e=Math.floor(this.secondsLeft%60),t=Math.floor(this.secondsLeft/60%60),n=Math.floor(this.secondsLeft/3600);return isFinite(e)||(e=0),isFinite(t)||(t=0),isFinite(n)||(n=0),{seconds:e,minutes:t,hours:n}}},{key:"populateCurrentState",value:function(){var t={time:this.getTimeObject(),uploadSpeedBps:this.uploadSpeedBps,uploadedPercent:this.uploadedPercent};this.emit(e.EVENTS.NEW_INFO,t)}}])&&o(t.prototype,n),r&&o(t,r),e}();i.EVENTS={NEW_INFO:"New info"}},csv8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c}));var r="peerReviewGradingAllowed",a=10,o=99,i=1,c={SETTINGS_ENABLED:"peerReviewGradeEnabled",SETTINGS_WEIGHT:"peerReviewGradeWeight"}},ctUe:function(e,t,n){},d98y:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("nbG6"),s=n("giI2"),u=n("TSYQ"),l=n.n(u);n("TGml");function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.bodyClassName,r=e.contentsClassName,o=e.icon,i=e.iconClassName,u=e.className,d=e.title,f=e.titleClassName,p=e.header,m=!!(t&&t.length>0);return a.a.createElement(c.a,{className:l()("dashboard-card",u,m?"dashboard-card-with-actions":"")},d?a.a.createElement("div",{className:l()("dashboard-card-title",f)},p||a.a.createElement("h2",{className:"card-header"},d)):null,a.a.createElement(s.a,{className:l()("dashboard-card-icon",i),role:"presentation"},o),a.a.createElement(c.c,{className:l()("dashboard-card-body",n)},a.a.createElement("div",{className:l()("dashboard-card-contents",r)},this.props.children)),m?a.a.createElement(c.b,{className:l()("dashboard-card-actions")},t):null)}}])&&f(n.prototype,r),o&&f(n,o),t}(r.Component);y.propTypes={actions:i.a.any,bodyClassName:i.a.string,contentsClassName:i.a.string,className:i.a.string,enabled:i.a.bool,icon:i.a.string,iconClassName:i.a.string,title:i.a.string,titleClassName:i.a.string};var v=y,h=n("ZD0w"),g=n("ZtzG"),E=n("MzIV"),w=n("LFYD");function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P={editingEvals:!1,evalIndex:0},R=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=C(t).call(this,e),n=!o||"object"!==S(o)&&"function"!==typeof o?T(r):o,I(T(T(n)),"getUserAvatar",(function(){var e=n.props.result.submitter;return a.a.createElement(g.a,{value:e.firstName+" "+e.lastName})})),I(T(T(n)),"onDialogCancel",(function(){n.setState({dialogVisible:!1})})),n.state=P,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.result,n=t.submitter,r=t.submittedAt,o=e.i18n;return n?a.a.createElement(v,{title:o._("Submitted By"),icon:w.a.PERSON,bodyClassName:l()("submitted-by-card-body")},a.a.createElement("div",{className:"submitted-by-user-container"},a.a.createElement("div",{className:"submitted-by-avatar-container"},a.a.createElement(g.a,{value:n.firstName+" "+n.lastName})),a.a.createElement("div",{className:"submitted-by-details-container"},a.a.createElement("div",null,n.firstName+" "+n.lastName),a.a.createElement("span",{className:"submitted-by-details-date"},a.a.createElement(E.a,{unixTime:r}))))):null}}])&&O(n.prototype,r),o&&O(n,o),t}(r.Component);R.propTypes={result:i.a.any.isRequired};var A=Object(h.withI18n)()(R);n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return A}))},dCfD:function(e,t,n){},dFPr:function(e,t,n){"use strict";t.a={ACTIVITY_RESULT:"TYPE_ACTIVITY_RESULT",PEER_REVIEW:"TYPE_PEER_REVIEW",INTERACTIVE_VIDEO:"TYPE_INTERACTIVE_VIDEO_CHOICES"}},dGj9:function(e,t,n){},dJJi:function(e,t,n){},"dUr/":function(e,t,n){},djeZ:function(e,t,n){},dp1i:function(e,t,n){},dufB:function(e,t,n){},"e+aV":function(e,t,n){},"e/6q":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));var r="[Avatar] Add user color entry",a="[Avatar] Reset current color index",o=function(e,t,n,a){return{type:r,payload:{name:e,initials:t,color:n,colorIndex:a}}},i=function(){return{type:a}}},e33A:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f}));var r=n("G4qV"),a=n("upk1"),o=n("hApM"),i=Object(r.a)(a.a,(function(e){return e.browser})),c=Object(r.a)(i,(function(e){return e.viewport})),s=Object(r.a)(c,(function(e){return e.size})),u=Object(r.a)(c,(function(e){return e.orientation})),l=Object(r.a)(c,(function(e){return e.dimensions})),d=Object(r.a)(l,(function(e){return e.width})),f=(Object(r.a)(l,(function(e){return e.height})),Object(r.a)(u,(function(e){return e===o.b.LANDSCAPE})));Object(r.a)(u,(function(e){return e===o.b.PORTRAIT}))},eCIM:function(e,t,n){},eDl9:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m}));var r=n("lTCR"),a=n.n(r),o=n("92Bf");function i(){var e=l(["\n    fragment MediaPartial on ActivityResultPartialMedia {\n        __typename\n        title\n        dbId\n        media {\n            dbId\n            allowExternalPlay\n            processingStatus\n            downloadUrl\n            externalPlayUrl\n            srcUrl\n            title\n            caption {\n                src\n                kind\n                label\n            }\n            transcript {\n                src\n                fileSizeBytes\n            }\n            slaveMedia {\n                dbId\n                allowExternalPlay\n                processingStatus\n                srcUrl\n                downloadUrl\n            }\n            meetingAssets {\n                svgUrl\n                cursorUrl\n                zoomsUrl\n                chatMessagesUrl\n                eventsUrl\n            }\n        }\n        owner {\n            dbId\n            firstName\n            lastName\n        }\n        finalizedAt\n    }\n"]);return i=function(){return e},e}function c(){var e=l(["\n    fragment Link on ActivityResultPartialLink {\n        __typename\n        dbId\n        title\n        link\n        owner {\n            dbId\n            firstName\n            lastName\n        }\n        finalizedAt\n    }\n"]);return c=function(){return e},e}function s(){var e=l(["\n    fragment Document on ActivityResultPartialDocument {\n        __typename\n        dbId\n        title\n        downloadUrl\n        previewUrl\n        owner {\n            dbId\n            firstName\n            lastName\n        }\n        finalizedAt\n        mimeType\n    }\n"]);return s=function(){return e},e}function u(){var e=l(["\n    fragment MeetingPartial on ActivityResultPartialMeeting {\n        __typename\n        dbId\n        title\n        recordedMedia: media {\n            ...MediaFull\n        }\n        owner {\n            dbId\n            firstName\n            lastName\n        }\n        lobbyPageUrl\n        scheduledAt\n        finalizedAt\n        anonymousInvitationUrl\n        status\n        meetingDownloadUrl: downloadUrl\n    }\n    ","\n"]);return u=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=a()(u(),o.d),f=a()(s()),p=a()(c()),m=a()(i())},etP2:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("LvDl"),u=n.n(s),l=n("TSYQ"),d=n.n(l);n("hpIK");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=.3,E=64;function w(e){return u.a.pick(e,Object.keys(S.componentProps))}var S=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=b(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==f(a)&&"function"!==typeof a?v(r):a,h(v(v(n)),"state",{scrollPosition:0}),h(v(v(n)),"scrollListener",(function(){n.setState({scrollPosition:window.scrollY})})),h(v(v(n)),"getOpacityFromScroll",(function(){var e=n.state.scrollPosition;return Math.min(e/E,1)*g})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.scrollListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollListener)}},{key:"render",value:function(){var e=this.getOpacityFromScroll();return a.a.createElement(c.S,p({},w(this.props),{className:d()("toolbar",this.props.className),colored:!1,style:{boxShadow:"0px 0px 3px 1px rgba(0,0,0,"+e+")"}}),this.props.children)}}])&&m(n.prototype,r),o&&m(n,o),t}(r.Component);S.componentProps={actions:i.a.array,className:i.a.string,colored:i.a.bool,fixed:i.a.bool,nav:i.a.any,title:i.a.any},S.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},S.componentProps),S.defaultProps={colored:!0,fixed:!0},t.a=S},evQ8:function(e,t,n){},f2lN:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e,t,n,r){e.postMessage({type:t,payload:n},r||window.location.origin)},a=function(e,t,n){return new Promise((function(r){e.addEventListener("message",(function(e){e&&e.data&&e.data.type&&e.data.type===t&&(r(e.data.payload),n instanceof Function&&n(e.data.payload))}))}))}},fIC4:function(e,t,n){},fbOa:function(e,t,n){"use strict";var r=n("wNa6"),a=n("yWXI"),o=n("3fhg"),i={SS_SETTINGS:"bongo-customization-settings",CAPABILITIES:"capabilities",PREFERENCES:"preferences",PREFERENCES_THEME:"theme"},c=n("G19t"),s=n("8bCP");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Object(s.c)("customizations"),f=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"onStorageChanged",(function(e){if(e.storageArea===window.sessionStorage)switch(d.debug("SessionStorage changed:",e),e.key){case i.SS_SETTINGS:var n=c.a.processCustomizationSettings(t.readCustomizationSettings());r.a.dispatch(a.d(n.capabilities)),r.a.dispatch(a.f(n.preferences))}}))}var t,n,s;return t=e,(n=[{key:"initialize",value:function(){if(this.isInitialized)return!0;this.isInitialized=!0,d.debug("Initializing CustomizationService...");try{var e=c.a.processLaunchpointSettings(this.readLaunchpointSettings());r.a.dispatch(a.e(e));var t=c.a.processCustomizationSettings(this.readCustomizationSettings());r.a.dispatch(a.d(t.capabilities)),r.a.dispatch(a.f(t.preferences))}catch(n){return d.error("There was an issue accessing sessionStorage. This application requires access to browser sessionStorage to operate.",n),!1}return window.addEventListener("storage",this.onStorageChanged),d.debug("... initialized."),!0}},{key:"getCustomizationSettings",value:function(){d.debug(">>> Checking for customization settings...");try{var e=this.readCustomizationSettings();return e?(d.debug("<<< Detected customization settings: ",e),e):(d.debug("<<< No customization settings detected."),null)}catch(t){throw d.error(t),new Error("CustomizationService:: Failure finding customization settings")}}},{key:"readCustomizationSettings",value:function(){try{var e=sessionStorage.getItem(i.SS_SETTINGS);if(e)return JSON.parse(e)}catch(t){d.debug("Unable to fetch and parse customization settings ('".concat(i.SS_SETTINGS,"') from sessionStorage"),t)}return null}},{key:"writeCustomizationSettings",value:function(e){try{sessionStorage.setItem(i.SS_SETTINGS,JSON.stringify(e))}catch(t){d.warn("Unable to persist customization settings ('".concat(i.SS_SETTINGS,"') to sessionStorage"),t)}}},{key:"getLaunchpointSettings",value:function(){d.debug(">>> Checking for launchpoint settings...");try{var e=this.readLaunchpointSettings();return e?(d.debug("<<< Detected launchpoint settings: ",e),e):(d.debug("<<< No launchpoint settings detected."),null)}catch(t){throw d.error(t),new Error("CustomizationService:: Failure finding launchpoint settings")}}},{key:"readLaunchpointSettings",value:function(){try{var e=sessionStorage.getItem(o.a.SS_LAUNCHPOINT_SETTINGS);if(e)return JSON.parse(e)}catch(t){d.debug("Unable to fetch and parse launchpoint settings ('".concat(o.a.SS_LAUNCHPOINT_SETTINGS,"') from sessionStorage"),t)}return null}},{key:"writeLaunchpointSettings",value:function(e){try{sessionStorage.setItem(o.a.SS_LAUNCHPOINT_SETTINGS,JSON.stringify(e))}catch(t){d.warn("Unable to persist launchpoint settings ('".concat(o.a.SS_LAUNCHPOINT_SETTINGS,"') to sessionStorage"),t)}}}])&&u(t.prototype,n),s&&u(t,s),e}();l(f,"isInitialized",!1);t.a=new f},fcFR:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(e){return(window.location.origin+a()).replace(/\/$/,"")+e},a=function(){return document.getElementById("root").dataset.basename},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");if(n.setAttribute("href",e),n.setAttribute("download",t),n.setAttribute("target","_blank"),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}},fpsG:function(e,t,n){"use strict";t.a={STUDENT:"TYPE__STUDENT",EDUCATOR:"TYPE__EDUCATOR",CONTENT_DEVELOPER:"TYPE__CONTENT_DEVELOPER",SUPER_EDUCATOR:"TYPE__SUPER_EDUCATOR",TEST_STUDENT:"TYPE__TEST_STUDENT"}},g3iL:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("qSfp"),s=n("4XMt"),u=n("TSYQ"),l=n.n(u);n("psRa");function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={none:function(e){return{display:e?"":"none"}},"fade-staggered":function(e,t){return{transition:e?"450ms":"300ms",transitionDelay:e?.025*t+"s":"",transform:"translateY("+(e?0:"5px")+")",opacity:e?1:0}},fade:function(e){return{transition:e?"450ms":"300ms",opacity:e?1:0}},slide:function(e,t){return{transition:e?"250ms":"300ms",transform:"translateY("+(e?0:h(t)+"px")+")",opacity:e?1:0}}};function h(e){return 81+56*e}var g=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=new Array(i),m=0;m<i;m++)u[m]=arguments[m];return r=this,o=(e=p(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==d(o)&&"function"!==typeof o?b(r):o,y(b(b(n)),"handleTouchTap",(function(e){n.props.onCloseRequest(),n.props.onClick(e)})),y(b(b(n)),"render",(function(){var e=n.props,t=e.id,r=e.index,o=e.visible,i={pointerEvents:o?"":"none",position:"absolute",whiteSpace:"nowrap",bottom:h(r)},u=v[n.props.effect];u||(u=v.none),i=f({},i,u(o,r));var d=f({},n.props.tooltip);return d.position=s.a.LEFT,d.className=l()(d.className,"speed-dial-item-tooltip"),a.a.createElement("div",{className:"speed-dial-button-option",style:i},a.a.createElement(c.b,{floating:!0,enabled:!!o&&n.props.enabled,tooltip:d,mini:!0,primary:!0,onClick:n.handleTouchTap,iconClassName:n.props.iconClassName,id:t,ariaLabel:n.props.ariaLabel},n.props.icon))})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),t}(r.Component);g.propTypes={ariaLabel:i.a.string.isRequired,enabled:i.a.bool,icon:i.a.string,iconClassName:i.a.string,id:i.a.string.isRequired,tooltip:i.a.any},g.defaultProps={enabled:!0,tooltip:{}}},gAqt:function(e,t,n){},gEnJ:function(e,t,n){},gRfE:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAABwxJREFUeJztW2tsXOURPTN3bYMfIbEJxk5CIQXSpuv1Q6oiqqoSdWlthx+gyog/qBVVJdTISmwDoTyaOi11WuQ4KdCoUiVEW4GagO3S+BFoiyiNwqMK9joQcA1yHZQmbeNYxjGsvXemP5IFP/Zx7+7YKK3Pv3vvzJlz587uzjffXWAZy1jG/zNoMUhDPVvvPFw63JxH2GjBJwJl0hu4oudVC77ZYGvCz72wpQjq/OzuM2uiVpzMICHaq2r/wMwTkD2TvQuEoiOR/NDodPYRK14GNunA5jus+GIwzWiwd+sN7DqHwed51wYiJ55bPXIFM3Is+AVy0nHyN1DwwKQFH2BYAfX76x0WZ1/s5gHg/WjOur9G8l6xisHgUnHP3W/Fd57TCG/nr20AoXz++fvGrqyKqv7HKo4KNWl483orPpMEVD5/TylBd8a7NoVAwa8nio5bxAEAZuSIaJsZnwVJNOq2A1yQ6PreydVfmhIdtogFAER0iwzcXG3BlXECgt1NNxFwWzIbApwd4yUTmcaaDYG7R/fXO5nyZJSAa3sackD6uBfbFz68rOq0BF7PJN5sMDioGybvypwnA+QisJ1B13m1b/jXmiIBzBokEd4px75emAlH2gkoO7htPUS/78dnyL1k/RvTuYfTjTkfzCjUaFbcL1/PHOk6EtNjYL7Er1/zv0vKXMh4unHnQ0nukv7NwXT900pAqLvxmwDVpuM7jkDhMx+sGkjHNx4Y7KjqnnT9fbfCG1/8Xn7gXM5xMK1NN2iAotNHSt89mQVcnS7HfBDRrRQ62OXXz3cFOFM5OzK5eQCIaiD7J2eLT2fCMR+u67bJUI3vNYevBIT+0BxU1W1+g8RD59TKTeNCf7PgAgBmXo8pp8m3n2dLBQm5+5g54DdIAoxOIrBFRMSID6J6v7z+jRI/Pp4TUNbX9C1m/rJ/WQmg+tBVlV2vEfMTVpTMlK/Zzi5fPl6MNvY1FqrKI+nJigPFQPi1Fb8FAHb0QRE1W9+r0B3SX7fJq72nBARctDL48vRlLYi6HS0tAgAU7DnFDF9PLSm1z/FZygSEDjZvgtJ3M5d2AYo/hmt3H5p9ilacaxOVUasQfsZnSRNQv7/eEbhzpjwZQaAg3Dv/NF3z0kdMdJ9JjFgoklY9Vp+fyi5pAt4pWLuFmSvtZOlT4brdb8QVUt7ztAiWfHyWMAFVvdtK1KUfWQmCIEKOPJhUDLuNIlCrkF7GZwkTMC28mxgrzMSwPD5Qu3ckqZjyvleI5XdWMb2Mz+ImoKynqZoJt1sJEWDcZXrYiy07znYRfGQVO9X4bEECNu7fkU0CT1MezyIUrW/VtI95sg0eHCXobsv4ycZnCxLgFEzcC8YGu+hyYiK34Od+XDgrr1UEp6wkJBufzfl5Cx1qvkZcfZOBS62CK+Tbg3V7nvTrJ/113wHRr6x0iGCMs2au4+DzcypxTgVoVB61vHkoBgZfvew36bhS+RefEKDfSkqi8dnHFVDe03irgjqsAl5gr5nf9fmB9Nd+FcR/spIjEJeVK7ii+1jsHANA6FBznoLSHivFRZyW1y+4ovfPKvKclaR447PzHwFXfgDgKqtAEKiybLegIuW7BZix4AIAYqrW8M23xI65vHfbF0So0SrAeVY8PVi756gJVVX330nF9Gd59viMVekXzMgyYxdEiNwHzPgAMPNOEXjqIzzyfTw+YwWZtbuAt5bXLyjUfZZJf2jJGRufMSfY1k6L1EfL6xd09tw+EXnbii82PiMoqKy36SgBFZmSFpxa85crhyu+YiFwKSDQRgZBLapAXfrnFe+FPM/iPm2IyptjWc5jDAADte1dmmHXtfrEtaMsbPIy1FKAQA0vtdwY5QtHmVWBy8Mr37/+onn6qjjQ0fq1F4FZa4GB2vYuKNLatCweCk4vyiuniwHBlMszzbHDTxZDBAWT7yrg6ZzBFWfWmbwSuxRQQuvvH645ETuesxoM17R1+qoCgZYcr1xpqG+x8d7UZGTOBs/cgYjPKsj+sOBo7gdF64zELTpE0Nj3aF1k9rkFE6FwTVsnRMOp2RApfavK7IXFJUBf567qBSvLhUNRgoKQsgryxlYfy4rkrzISt6gQwbQrsjXetbhT4XBde0eyKlChieJ3K9N+L2epQYT2rl03DcW7Fn9fIEUVrDz1mRFnJutiaXpOOtn840QXE26MJKoCEj59+cjnQ1bqFhuquOdAy40Jt98T7w0mqILCkesnWMz/Z7EoEODljtbqp5LZJL2TcF17B4DB2DFNB/6x6uRnPb8Z+mlCABcuGlLZJX+UBFV80hcUD5dlXSwtL6n+svOn1SmbupS1PFjb9iyAwcBU7lDBWGmpibrFxxnOjj7kxTD1h5mgTuTSR0reqSzOWNYSgVQfeKalxmyGuIxlLON/F/8FBZuNswsSH9UAAAAASUVORK5CYII="},gVG2:function(e,t,n){},gZ03:function(e,t,n){},giI2:function(e,t,n){"use strict";n("/0q4");var r=n("8For"),a=(n("KhDq"),n("q1tI")),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("8+7o");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){return o.a.createElement(s.E,m({},function(e){return f.a.pick(e,Object.keys(b.componentProps))}(e),{className:l()("svg-icon",e.className),disabled:!e.enabled}),e.children)};b.componentProps={className:c.a.string,primary:c.a.bool,secondary:c.a.bool,use:c.a.string},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},b.componentProps,{enabled:c.a.bool}),b.defaultProps={enabled:!0};function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w,S,O,C={tooltipContainer:{position:"relative",display:"inline-block",margin:"1em"}},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,g(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.iconClassName,r=e.tooltip;return o.a.createElement("div",{style:C.tooltipContainer},r,o.a.createElement(s.v,{iconClassName:n},t))}}])&&v(n.prototype,r),a&&v(n,a),t}(a.PureComponent);w=_,S="propTypes",O={children:c.a.node,tooltip:c.a.node,iconClassName:c.a.string},S in w?Object.defineProperty(w,S,{value:O,enumerable:!0,configurable:!0,writable:!0}):w[S]=O;Object(s.U)(_);n.d(t,"a",(function(){return r.a}))},gnXi:function(e,t,n){},h15y:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=function(e,t){return t.common&&t.common.player?t.common.player[e]:null},a=function(e,t,n){var a=r(e,t);return a?a.state[n]:null},o=function(e,t){return a(e,t,"time")}},"h4t+":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n("p46w"),a=n.n(r),o=n("8bCP");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=/educator$/i,s=/student$/i,u=function(){return document.getElementById("root").dataset.apiEndpoint},l=function(){return document.getElementById("root").dataset.serverHostname},d=function(){var e=u(),t=c.test(e);return s.test(e)?a.a.get("user.student.jwt_token"):t?a.a.get("user.educator.jwt_token"):void 0},f=function(e){return p(l(),e)},p=function(e,t){try{if(e&&e.startsWith("/"))throw new Error("Not deriving microservice URL since hostname is relative path");var n=e.split(".");if(3!==n.length)throw new Error("Unable to derive microservice URL.");var r=i(n,3),a=r[0],c=r[1],s=r[2];return"https://".concat(a,"-").concat(t,".").concat(c,".").concat(s,"/graphql")}catch(u){o.b.error(u,e)}return e}},hApM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={XSMALL:{name:"XSMALL",max:480,min:0},SMALL:{name:"SMALL",max:700,min:481},MEDIUM:{name:"MEDIUM",max:1280,min:701},LARGE:{name:"LARGE",max:1600,min:1281},XLARGE:{name:"XLARGE",max:Number.POSITIVE_INFINITY,min:1601}},a={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE",NA:"N/A"}},hFGE:function(e,t,n){"use strict";var r=n("VQIj"),a=n("q1tI"),o=n.n(a),i=n("/MKj"),c=n("17x9"),s=n.n(c),u=n("xrVw"),l=n("ZD0w"),d=n("giI2"),f=n("2bAp"),p=n("Wme0"),m=n("45tj"),b=n("LMP5"),y=n("TSYQ"),v=n.n(y),h=n("LvDl"),g=n.n(h);n("1CkY");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=function(e){var t=(e=g.a.clone(e)).i18n;return e.showIcon||(e.icon=null),e.inDialog&&(e.portal=!0,e.lastChild=!0,e.renderNode=document.body,e.disableScrollLocking=!0),e.errorText&&(e.error=!0),e.value&&(e.value=b.g(e.value)),o.a.createElement(u.l,w({},function(e){return g.a.pick(e,Object.keys(S.componentProps))}(e),{cancelLabel:t._("Cancel"),className:v()("input-date-picker",e.className),disabled:!e.enabled,"aria-label":e.ariaLabel,locales:Object(m.d)(e.locale),okLabel:t._("Ok")}),e.children)};S.componentProps={className:s.a.string,disableScrollLocking:s.a.bool,displayMode:s.a.string,error:s.a.bool,errorText:s.a.string,icon:s.a.any,id:s.a.string.isRequired,label:s.a.node,lastChild:s.a.bool,onChange:s.a.func,portal:s.a.bool,renderNode:s.a.node,showIcon:s.a.bool,style:s.a.object,textFieldStyle:s.a.object,value:s.a.object},S.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({},S.componentProps,{enabled:s.a.bool,inDialog:s.a.bool,ariaLabel:s.a.string}),S.defaultProps={enabled:!0,displayMode:"portrait",disableScrollLocking:!1,icon:o.a.createElement(d.a,{iconClassName:f.a.CALENDAR}),inDialog:!1,showIcon:!0};var O=Object(i.b)((function(e){return{locale:p.a(e)}}))(Object(l.withI18n)()(S));n("tdQW");function C(e){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=/^(\d{0,3})(%?)$/,k=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=I(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==C(a)&&"function"!==typeof a?R(r):a,A(R(R(n)),"state",{isFocused:!1,tmpValue:""}),A(R(R(n)),"getValueFromString",(function(e){if(!e)return 0;var t=j.exec(e);return t&&t.length>=2?+t[1]:0})),A(R(R(n)),"isValidPattern",(function(e){var t=j.exec(e);return!(!t||t.length<2)})),A(R(R(n)),"onChange",(function(e,t){if(n.isValidPattern(e,t)){var r=+j.exec(e)[1];if(r||(r=0),n.props.onValidate)if(!n.props.onValidate(r,t))return;var a=e;a.length>1&&(a=g.a.trimStart(a,"0")),a||(a="0"),n.setState({tmpValue:a}),n.props.onChange&&n.props.onChange(r,t)}})),A(R(R(n)),"onFocus",(function(){n.setState({isFocused:!0,tmpValue:+n.props.value})})),A(R(R(n)),"onBlur",(function(){n.setState({isFocused:!1,tmpValue:n.getValue(n.props.value)})})),A(R(R(n)),"getFormattedValue",(function(){var e=n.props,t=e.i18n,r=e.value;if(n.props.formattedValueFunc)return n.props.formattedValueFunc(r);if(null===r)return"\u2014";var a=String(r);return n.props.isAuto?a:t._("{strValue}%",{strValue:a})})),A(R(R(n)),"getValue",(function(){return n.state.isFocused?String(n.state.tmpValue):n.getFormattedValue()})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props;return o.a.createElement(Z.b,_({},function(e){return g.a.pick(e,Object.keys(k.componentProps))}(e),{className:v()("input-percentage",e.className),onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,value:this.getValue(),tooltip:e.tooltip}))}}])&&T(n.prototype,r),a&&T(n,a),t}(a.Component);k.componentProps={ariaLabel:s.a.string,ariaLabelledby:s.a.string,className:s.a.string,error:s.a.bool,errorText:s.a.string,enabled:s.a.bool,onBlur:s.a.func,onChange:s.a.func,onFocus:s.a.func,id:s.a.string,label:s.a.string,maxRows:s.a.number,placeholder:s.a.string,required:s.a.bool,rows:s.a.number,style:s.a.object,value:s.a.oneOfType([s.a.string,s.a.number])},k.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({},k.componentProps,{formattedValueFunc:s.a.func,isAuto:s.a.bool,onValidate:s.a.func,tooltip:s.a.any}),k.defaultProps={enabled:!0,maxRows:1,rows:1,value:0,isAuto:!1};var N=Object(l.withI18n)()(k),D=n("4XMt"),L=n("PjZZ");function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var F=function(e){var t=!e.enabled;return g.a.has(e,"disabled")&&(t=e.disabled),o.a.createElement(u.D,x({},function(e){return g.a.pick(e,Object.keys(F.componentProps))}(e),{className:L.a(t,e,"selection-control-radio"),disabled:t,"aria-label":e.ariaLabel}))};F.componentProps={checked:s.a.bool,className:s.a.string,disabled:s.a.bool,id:s.a.string.isRequired,label:s.a.node,labelBefore:s.a.string,name:s.a.string.isRequired,onChange:s.a.func,style:s.a.object,value:s.a.string},F.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({},F.componentProps,{enabled:s.a.bool,ariaLabel:s.a.string,tooltip:s.a.any}),F.defaultProps={enabled:!0,label:"",value:""};var V=Object(D.c)(F),G=n("J3bt"),U=n("EZsn"),q=n("jUYa"),W=n("iGlQ"),B=n("kbsL"),Q=n("PJr8"),Y=n("LFYD"),H=n("Wqtl"),z=n("Y7ox"),K="select-rubric-container";function X(e){var t=e.i18n,n=e.onRubricChange,r=e.rubrics,a=e.selectedRubric,i=e.onConfigureRubrics,c=null;c=r&&r.length?r.map((function(e){return{label:e.name,value:e.dbId,disabled:!!e.disabled}})):[{label:t._("No rubrics"),disabled:!0}];var s=Boolean(a&&a.value),u=a.value?a.value:-1;return o.a.createElement("div",{className:v()(K,e.className)},o.a.createElement(G.b,{className:"select-rubric-selectfield",label:t._("Rubric"),ariaLabel:t._("Rubric"),id:"rubric",error:Boolean(a.error),errorText:a.error,value:u,enabled:!a.disabled,onChange:n,menuItems:c}),o.a.createElement(B.e,{id:"quick-nav-menu-button",menuItems:[o.a.createElement(W.c,{key:"preview_rubric",enabled:s,onClick:function(){if(a){var e=r.find((function(e){return e.dbId===a.value}));e&&z.a.showModal(o.a.createElement(Q.b,{rubric:e,mode:H.a.VIEW,onCancel:z.a.closeModal,submitting:!1,showCurrentScore:!1}))}},leftIcon:o.a.createElement(d.a,{ariaLabel:t._("Show rubric, icon")},Y.a.PREVIEW),primaryText:t._("Show rubric")}),o.a.createElement(W.c,{key:"config_rubrics",enabled:!0,onClick:i,leftIcon:o.a.createElement(d.a,{ariaLabel:t._("Configure rubrics, icon")},Y.a.SETTINGS),primaryText:t._("Configure rubrics")})]},Y.a.MENU_VERT))}X.propTypes={className:s.a.string,onRubricChange:s.a.func.isRequired,onConfigureRubrics:s.a.func.isRequired,selectedRubric:s.a.shape({value:s.a.number,error:s.a.string,disabled:s.a.bool}),rubrics:s.a.arrayOf(s.a.shape({dbId:s.a.number.isRequired,name:s.a.string.isRequired}))};var $=Object(l.withI18n)()(X),Z=n("ZmiZ");function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}function ee(e){return(ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=re(t).call(this,e),n=!a||"object"!==ee(a)&&"function"!==typeof a?oe(r):a,ie(oe(oe(n)),"focus",(function(){n.textFieldRef.current.focus()})),n.textFieldRef=o.a.createRef(),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.className,r=e.id,a=e.listClassName,i=e.menuItems,c=e.onDropdownVisibilityChange,s=e.onTextChange,l=e.toggleQuery,d=g.a.pick(this.props,Object.keys(Z.a.propTypes)),f=Boolean(i&&i.length>0);return o.a.createElement(u.q,{anchor:t,listStyle:{display:f?"block":"none"},id:r+"-dropdown",className:v()("dropdown-textfield-container",n),listClassName:a,fullWidth:!0,menuItems:i||[],repositionOnResize:!0,repositionOnScroll:!0,simplifiedMenu:!0,toggleQuery:l,onVisibilityChange:function(e){f&&c(e)}},o.a.createElement(Z.b,te({ref:this.textFieldRef},d,{id:r+"-textfield",onChange:s})))}}])&&ne(n.prototype,r),a&&ne(n,a),t}(o.a.PureComponent),se=J({},u.A.HorizontalAnchors),ue=J({},u.A.VerticalAnchors);ce.propTypes=J({},Z.a.propTypes,{anchor:s.a.any,listClassName:s.a.string,menuItems:s.a.array,onDropdownVisibilityChange:s.a.func,onTextChange:s.a.func,toggleQuery:s.a.string.isRequired}),ce.defaultProps={anchor:{x:se.INNER_LEFT,y:ue.TOP},enabled:!0,rows:1,maxRows:1,onDropdownVisibilityChange:function(){}};var le=ce;function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pe=function(e){var t=(e=g.a.clone(e)).i18n;return e.showIcon||(e.icon=null),e.inDialog&&(e.portal=!0,e.lastChild=!0,e.renderNode=document.body,e.disableScrollLocking=!0),e.errorText&&(e.error=!0),o.a.createElement(u.R,fe({},function(e){return g.a.pick(e,Object.keys(pe.componentProps))}(e),{cancelLabel:t._("Cancel"),className:v()("input-time-picker",e.className),disabled:!e.enabled,"aria-label":e.ariaLabel,locales:Object(m.e)(e.locale),okLabel:t._("Ok")}),e.children)};pe.componentProps={className:s.a.string,disableScrollLocking:s.a.bool,displayMode:s.a.string,error:s.a.bool,errorText:s.a.string,icon:s.a.any,id:s.a.string.isRequired,label:s.a.node,lastChild:s.a.bool,onChange:s.a.func,portal:s.a.bool,renderNode:s.a.node,showIcon:s.a.bool,style:s.a.object,textFieldStyle:s.a.object,value:s.a.object},pe.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){de(e,t,n[t])}))}return e}({},pe.componentProps,{enabled:s.a.bool,inDialog:s.a.bool,ariaLabel:s.a.string}),pe.defaultProps={enabled:!0,displayMode:"portrait",disableScrollLocking:!1,icon:o.a.createElement(d.a,null,Y.a.SCHEDULE),inDialog:!1,showIcon:!0};var me=Object(i.b)((function(e){return{locale:p.a(e)}}))(Object(l.withI18n)()(pe));n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return G.b})),n.d(t,"f",(function(){return U.b})),n.d(t,"h",(function(){return q.a})),n.d(t,"g",(function(){return $})),n.d(t,"i",(function(){return Z.b})),n.d(t,"j",(function(){return le})),n.d(t,"k",(function(){return me}))},hH2E:function(e,t,n){},hHKf:function(e,t,n){"use strict";var r=n("YSsg"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("/MKj"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d),p=n("kNkO"),m=n.n(p),b=n("kbsL"),y=n("hFGE"),v=n("PwM7"),h=n("HNnK"),g=n("UyA7"),E=n("8bCP"),w=n("Wme0");function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function C(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j="env-dialog",k={selectedTabIndex:0,stickyLogLevels:{},buildInfo:{}},N=!1,D=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=I(t).call(this,e),n=!a||"object"!==S(a)&&"function"!==typeof a?R(r):a,A(R(R(n)),"tabs",[]),A(R(R(n)),"fetchBuildInfo",_(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=2;break}return e.abrupt("return");case 2:return E.b.debug(">>> Fetching build info"),e.prev=3,e.next=6,fetch(m.a,{method:"GET",cache:"no-cache"});case 6:return t=e.sent,e.next=9,t.json();case 9:r=e.sent,N=!0,k.buildInfo=r,n.setState({buildInfo:r}),E.b.debug("<<< Fetched build info:",r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),E.b.warn("Failed to fetch build info",e.t0);case 19:case"end":return e.stop()}}),e,this,[[3,16]])})))),A(R(R(n)),"copyText",(function(e){for(var t="[Environment Info]",n=0;n<e.length;n++)t+="\n"+e[n][0]+": "+e[n][1];t+="\n==================",Object(v.a)(t)})),A(R(R(n)),"getEntry",(function(e,t,n){return o.a.createElement("div",{className:j+"-entry",key:"env-info-"+e},o.a.createElement("span",{className:j+"-entry-label"},t+":"),o.a.createElement("span",{className:j+"-entry-value"},n))})),A(R(R(n)),"onTabClick",(function(e){n.setState({selectedTabIndex:e})})),A(R(R(n)),"getTabs",(function(){var e=n.state.selectedTabIndex;return o.a.createElement("div",{className:j+"-tabs"},n.tabs.map((function(t,r){var a=e===r;return o.a.createElement(b.a,{id:"button-info-dialog-tab["+r+"]",swapTheming:a,primary:a,key:"tab-"+r,className:j+"-tab",onClick:function(){return n.onTabClick(r)}},t.label)})))})),A(R(R(n)),"getSelectedTabContent",(function(){var e=n.state.selectedTabIndex;return n.tabs[e].contentFunction()})),A(R(R(n)),"getDiagTabContent",(function(){return o.a.createElement("div",{className:j+"-tab-content"},o.a.createElement("div",{className:j+"-loglevels"},n.getModuleLoggers()))})),A(R(R(n)),"getInfoTabContent",(function(){var e=n.props,t=e.trialExpirationDate,r=e.userId,a=e.userLocale,i=e.userTimezone,c=n.state.buildInfo,s="Unknown";try{s=window.location!==window.parent.location?document.referrer:"N/A"}catch(h){E.b.warn("Could not get Parent URL:",h)}var u="Unknown";try{u=window.navigator.userAgent}catch(h){E.b.warn("Could not get User Agent:",h)}var l="Unknown";try{l="".concat(f.a.get(a,"frontend")," (frontend) / ").concat(f.a.get(a,"backend")," (backend)")}catch(h){E.b.warn("Could not get User Locale:",h)}var d="Unknown";try{d=window.innerWidth+"x"+window.innerHeight}catch(h){E.b.warn("Could not get Frame Viewport:",h)}var p="Unknown";try{p=100*window.devicePixelRatio+"%"}catch(h){E.b.warn("Could not get Display Scale:",h)}var m="N/A";try{t&&(m=new Date(t).toString())}catch(h){E.b.warn("Could not get Trial Expiration Date:",h)}var y=(new Date).toString(),v=[["Branch",c.branch],["Build Date",new Date(+c.buildDate).toLocaleString()],["Build SHA",c.buildSHA],["Build Number",c.buildNumber],["User ID",r],["Frame URL",window.location.href],["Parent URL",s],["Trial Exp",m],["Frame Viewport",d],["Display Scale",p],["User Agent",u],["User Locale",l],["User Clock",y],["User Timezone",i]];return o.a.createElement("div",{className:j+"-tab-content"},o.a.createElement("div",{className:j+"-entries"},v.map((function(e,t){return n.getEntry(t,e[0],e[1])}))),o.a.createElement("div",{className:j+"-actions"},o.a.createElement(b.a,{id:"button-info-dialog-copy",ariaLabel:"Copy to clipboard",onClick:function(){n.copyText(v)}},"Copy to clipboard")))})),A(R(R(n)),"onLogLevelChange",(function(e,t){var r=Object(E.d)();r&&r[e]&&r[e].setLevel(t),n.onStickyChange(e,null,!1)})),A(R(R(n)),"onStickyChange",(function(e,t,r){var a=O({},n.state.stickyLogLevels);r?a[e]=t:delete a[e],n.setState({stickyLogLevels:a},n.updateLocalStorage)})),A(R(R(n)),"updateLocalStorage",(function(){var e=n.state.stickyLogLevels;Object(E.f)(e)})),A(R(R(n)),"getLoggerSelectField",(function(e,t){var r=n.state.stickyLogLevels,a=e.name,i=f.a.has(r,e.name);return o.a.createElement("div",{className:j+"-loglevel",key:"loglevel-"+t},o.a.createElement(y.e,{label:a,ariaLabel:a,id:"loglevel-"+t,name:"loglevel-"+t,onChange:function(e){n.onLogLevelChange(a,e)},value:e.getLevel(),menuItems:E.a}),o.a.createElement(y.a,{id:"loglevel-checkbox-"+t,name:"loglevel-checkbox-"+t,label:"Sticky",ariaLabel:"Sticky",checked:i,onChange:function(t){n.onStickyChange(a,e.getLevel(),t)}}))})),A(R(R(n)),"getModuleLoggers",(function(){var e=Object(E.d)();if(e)return f.a.values(e).map(n.getLoggerSelectField)})),n.state=O({},k,{stickyLogLevels:Object(E.e)()}),n.tabs=[{label:"INFO",contentFunction:n.getInfoTabContent},{label:"DIAG",contentFunction:n.getDiagTabContent}],n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.visible,a=e.className;return n&&this.fetchBuildInfo(),o.a.createElement(r.a,{"aria-describedby":"env-dialog",actions:t,className:l()(j,a),id:"env-dialog",title:"Environment",visible:n},this.getTabs(),this.getSelectedTabContent())}}])&&T(n.prototype,a),i&&T(n,i),t}(a.Component);D.propTypes={actions:c.a.any,id:c.a.string.isRequired,className:c.a.string,title:c.a.string,titleClassName:c.a.string,userId:c.a.number,visible:c.a.bool};var L=Object(s.b)((function(e){return{trialExpirationDate:g.q(e),userId:h.i(e),userTimezone:h.g(e),userLocale:w.a(e)}}))(D),M=(n("xWUU"),n("a/gg")),x=n("MOhp"),F=n("Dl6w"),V=n("G19t");function G(e){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Q=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=q(t).call(this,e),n=!a||"object"!==G(a)&&"function"!==typeof a?B(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(B(B(n)),"onThemeChange",(function(e){var t=n.props.dispatch,r=F.a.find((function(t){return t.value===e}));n.setState({selectedTheme:r}),t(x.z(r)),V.a.applyTheme(r)}));var o=e.theme?e.theme:F.b.value;return n.state={selectedTheme:o},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.visible,a=this.state.selectedTheme;return o.a.createElement(r.a,{"aria-describedby":"theme-dialog",actions:t,id:"theme-dialog",title:"Theme",visible:n},o.a.createElement("div",null,o.a.createElement(y.e,{className:"grade-type-selectfield",label:"Theme",ariaLabel:"Theme",id:"theme-select",onChange:this.onThemeChange,value:a.value,menuItems:F.a})))}}])&&U(n.prototype,a),i&&U(n,i),t}(a.Component);Q.propTypes={actions:c.a.any,visible:c.a.bool};var Y=Object(s.b)((function(e){return{theme:g.l(e)}}))(Q);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return M.a})),n.d(t,"d",(function(){return Y}))},hIiU:function(e,t,n){"use strict";var r=n("wNa6"),a=n("LvDl"),o=n.n(a),i=n("SsKX"),c=n("vRGJ"),s=n.n(c),u=n("+Ft7"),l=n("LMP5"),d=n("45tj"),f=n("Wme0"),p=n("BulX");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"isTrial",value:function(e){return!!e&&o.a.isNumber(e.trialExpireAt)}},{key:"getTrialExpirationDate",value:function(e){return this.isTrial(e)?1e3*e.trialExpireAt:null}},{key:"isTrialExpired",value:function(e){return!!o.a.isNumber(e)&&e<=(new Date).getTime()}},{key:"shouldShowTrialNotice",value:function(){return this.getTimeSinceLastAckTrialNotice()>=288e5}},{key:"getTimeSinceLastAckTrialNotice",value:function(){var e=window.localStorage;if(e){var t=e.getItem("trialNoticeLastAckTime");return t?(new Date).getTime()-t:Number.POSITIVE_INFINITY}return Number.POSITIVE_INFINITY}},{key:"updateLastAckTime",value:function(){var e=window.localStorage;e&&e.setItem("trialNoticeLastAckTime",(new Date).getTime())}},{key:"getFormattedExpirationDateTime",value:function(e){var t=f.a(r.a.getState()),n=Object(d.d)(t);return Object(l.e)(e,u.a.SHORT,n)}},{key:"rerouteToTrialsPage",value:function(e,t){if(!this.isTrialPath(e)){var n=this.getTrialsPagePath(e);n&&t.replace(n)}}},{key:"getTrialsPagePath",value:function(e){var t=Object(i.a)(e,{path:p.e,exact:!1}),n=Object(i.a)(e,{path:p.i,exact:!1});if(!t&&!n)return null;var r=t?p.h.EDUCATOR_TRIAL:p.h.STUDENT_TRIAL,a=t||n;return s.a.compile(r)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},a.params))}},{key:"isTrialPath",value:function(e){return Object(i.a)(e,{path:p.h.EDUCATOR_TRIAL,exact:!0})||Object(i.a)(e,{path:p.h.STUDENT_TRIAL,exact:!0})}}])&&b(t.prototype,n),a&&b(t,a),e}();t.a=new y},hMkO:function(e,t,n){},hf66:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("G4qV"),a=Object(r.a)((function(e){return e.student}),(function(e){return e.pages}))},hpIK:function(e,t,n){},hu4m:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l);n("VaGi");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e){return a.a.createElement(c.C,p({},function(e){return d.a.pick(e,Object.keys(m.componentProps))}(e),{"aria-label":e.ariaLabel,className:u()("paper-container",e.className)}),e.children)};m.componentProps={className:i.a.string,id:i.a.string,onClick:i.a.func,raiseOnHover:i.a.bool,zDepth:i.a.number.isRequired},m.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},m.componentProps,{ariaLabel:i.a.string}),m.defaultProps={zDepth:2};var b=m;n.d(t,"a",(function(){return b}))},"hvs/":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c);n("slDY");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.isLoading;return a.a.createElement("div",{className:s()("embedded-loader",t)},this.props.children,n?a.a.createElement("div",{className:"embedded-loader-spinner"}):null)}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component);m.propTypes={children:i.a.node,className:i.a.string,isLoading:i.a.bool.isRequired};var b=n("u4EO"),y=n("LFYD"),v=n("giI2");function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,w(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(v.a,{className:s()("processing-spinner",this.props.className)},y.a.SETTINGS)}}])&&g(n.prototype,r),o&&g(n,o),t}(r.Component);O.propTypes={className:i.a.string},n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b.a})),n.d(t,"c",(function(){return O}))},i5n6:function(e,t,n){},iFdk:function(e,t,n){"use strict";var r=n("LFYD"),a=n("2bAp"),o=n("ZD0w"),i=n("BulX");t.a={ASSIGNMENTS:{identifier:"activities-list",label:Object(o.i18nMark)("Assignments"),icon:r.a.ASSIGNMENTS,ariaLabel:Object(o.i18nMark)("Assignments"),iconAriaLabel:Object(o.i18nMark)("Assignments, icon"),route:i.j.STUDENT_ACTIVITY_LIST},MEETINGS:{identifier:"meetings-list",label:Object(o.i18nMark)("Meetings"),iconClassName:a.a.CALENDAR,ariaLabel:Object(o.i18nMark)("Meetings"),iconAriaLabel:Object(o.i18nMark)("Meetings, icon"),route:i.j.STUDENT_MEETINGS_LIST},SUPPORT:{identifier:"help",label:Object(o.i18nMark)("Support"),icon:r.a.SUPPORT,ariaLabel:Object(o.i18nMark)("Support"),iconAriaLabel:Object(o.i18nMark)("Support, icon")},SETTINGS:{identifier:"settings",label:Object(o.i18nMark)("Settings"),icon:r.a.CONFIGURE,ariaLabel:Object(o.i18nMark)("Settings"),iconAriaLabel:Object(o.i18nMark)("Settings, icon"),route:i.j.STUDENT_SETTINGS},NOTIFICATIONS:{identifier:"notifications",label:Object(o.i18nMark)("Notifications"),icon:r.a.ANNOUNCEMENT,ariaLabel:Object(o.i18nMark)("Notifications"),iconAriaLabel:Object(o.i18nMark)("Notifications, icon"),route:i.j.STUDENT_NOTIFICATIONS}}},iGlQ:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("TSYQ"),c=n.n(i),s=n("giI2"),u=n("LFYD"),l=n("upoK"),d=(n("y54d"),function(){window.open("https://bongolearn.zendesk.com/")}),f=Object(o.withI18n)()((function(e){var t=e.i18n;return a.a.createElement(l.a,{key:"help_item",className:c()("help-list-item",e.className),onClick:d,leftIcon:a.a.createElement(s.a,{ariaLabel:t._("Help, icon")},u.a.HELP),primaryText:t._("Help")})})),p=n("BJep");n("Goub");n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p.a})),n.d(t,"c",(function(){return l.a}))},idEK:function(e,t,n){},io3D:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n("lTCR"),a=n.n(r),o=n("mxsA");function i(){var e=l(["\n  fragment ReflectionAnswersMinimal on ReflectAnswer {\n    __typename\n  }\n"]);return i=function(){return e},e}function c(){var e=l(["\n  fragment ReflectionAnswers on ReflectAnswer {\n    answerText\n    question {\n      ...ReflectionQuestion\n    }\n    submitter {\n      ...GeneralUser\n    }\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function s(){var e=l(["\n  fragment ReflectionSettings on ReflectStageSettings {\n    reflectStageEnabled\n    reflectQuestions {\n      ...ReflectionQuestion\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=l(["\n  fragment ReflectionQuestion on ReflectQuestion {\n    dbId\n    questionText\n    # orderNumber #TODO: this field is not returned?\n  }\n"]);return u=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=a()(u()),f=a()(s(),d),p=a()(c(),d,o.d),m=a()(i())},iqyR:function(e,t,n){},j15M:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/MKj"),s=n("mYpz"),u=n("mTCQ"),l=n("nOAq"),d=n("RKRe"),f=n("hHKf"),p=n("kbsL"),m=n("i8i4"),b=n.n(m);n("EiwA");function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=h(t).call(this,e),n=!o||"object"!==y(o)&&"function"!==typeof o?E(r):o,w(E(E(n)),"animateBubbles",(function(){for(var e=n.state,t=e.minBubbleSize,r=e.maxBubbleSize,a=b.a.findDOMNode(n.bubbleContainer).getElementsByClassName("bubble-ele-container"),o=0;o<a.length;o++){var i=a[o],c=Math.floor(90*Math.random()),s=t+Math.floor(Math.random()*(r+1)),u=Math.floor(10*Math.random()),l=Math.floor(6*Math.random()),d=Math.floor(3*Math.random());i.style.left=c+"%",i.style["animation-duration"]=l+"s",i.style["animation-delay"]=u+"s",i.style.filter="blur("+d+"px)";for(var f=0;f<i.children.length;f++)i.children[f].style.width=s+"px",i.children[f].style.height=s+"px",i.children[f].style["background-color"]="#"+(16777215*Math.random()<<0).toString(16)}})),w(E(E(n)),"render",(function(){for(var e=n.state.bubbleCount,t=[],r=0;r<e;r++)t.push(a.a.createElement("div",{key:"key_"+r,className:"bubble-ele-container"},a.a.createElement("div",{className:"bubble-ele"})));return a.a.createElement("div",{ref:function(e){n.bubbleContainer=e}},t)})),n.state={bubbleCount:30,minBubbleSize:4,maxBubbleSize:14},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.animateBubbles()}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component),O=n("Y7ox"),C=n("HCbP"),_=n("ZD0w"),T=n("YSsg"),I=n("s/Ur"),P=n.n(I),R=n("l+NT"),A=n.n(R),j=n("Ga2B"),k=n.n(j);n("gnXi");var N=Object(_.withI18n)()((function(e){var t=e.i18n,n=a.a.createElement("img",{className:"browser-logo",alt:t._("Google Chrome"),src:A.a}),r=a.a.createElement("img",{className:"browser-logo",alt:t._("Firefox"),src:k.a});return a.a.createElement("div",{className:"supported-browsers browser-options"},a.a.createElement(_.Trans,{id:"We recommend using the latest version of {chromeImage} Chrome, {firefoxImage} Firefox, or Edge (Chromium version).",values:{chromeImage:n,firefoxImage:r}}))})),D=n("TSYQ"),L=n.n(D);function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,o=(e=V(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==M(o)&&"function"!==typeof o?U(r):o,q(U(U(n)),"onClose",(function(){var e=n.props.onClose;e&&e()})),q(U(U(n)),"getDialogComponent",(function(e){var t=n.props.i18n,r=t._("Looks like your browser isn't fully supported."),o={ariaLabel:t._("Unsupported Browser"),autosizeContent:!1,containFocus:!1,contentClassName:"dialog-content",dialogClassName:L()("unsupported-browser-dialog",e?"mobile-preview":null),fullPage:e,hasCloseButton:!0,id:"unsupported-browser-dialog",modal:!0,visible:!0,onClose:n.onClose,title:e?"":r};return a.a.createElement(T.a,x({dialogStyle:{height:"auto",width:e?"100%":"70%"}},o),a.a.createElement("div",{className:"dialog-contents"},e?a.a.createElement("h3",{className:"mobile-title"},r):"",a.a.createElement("div",{className:"feature-restriction-msg"},t._("You won't be able to record audio/video.")),a.a.createElement(N,null)))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(P.a,{query:"(min-width: 551px)"},this.getDialogComponent(!1)),a.a.createElement(P.a,{query:"(max-width: 550px)"},this.getDialogComponent(!0)))}}])&&F(n.prototype,r),o&&F(n,o),t}(r.Component);W.propTypes={onClose:i.a.func};var B=Object(_.withI18n)()(W),Q=n("Z+gg"),Y=n("G4qV"),H=n("upk1"),z=Object(Y.a)(H.a,(function(e){return e.session})),K=Object(Y.a)(z,(function(e){return e.hasUnsupportedBrowserMessageBeenDismissed})),X=n("2Gxn"),$=(n("0l2v"),n("8bCP")),Z=n("0TIy");function J(e){return(J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe="page",ie={GLOBAL:{TOGGLE_BUBBLES:"command+ctrl+b",TOGGLE_ENVIRONMENT_INFO:["alt+`","alt+i"],TOGGLE_THEME_INFO:"alt+t",TOGGLE_DEBUG_OUTLINE:["alt+shift+`","alt+o"]}},ce=new s.ShortcutManager(ie);ce.setKeymap(ie);var se=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=te(t).call(this,e),n=!o||"object"!==J(o)&&"function"!==typeof o?re(r):o,ae(re(re(n)),"onEnvDialogCancel",(function(){n.setState({showEnvironmentDialog:!1})})),ae(re(re(n)),"onThemeDialogCancel",(function(){n.setState({showThemeDialog:!1})})),ae(re(re(n)),"handleShortcuts",(function(e){switch(e){case"TOGGLE_BUBBLES":n.setState({showBubbles:!n.state.showBubbles});break;case"TOGGLE_ENVIRONMENT_INFO":n.setState({showEnvironmentDialog:!n.state.showEnvironmentDialog});break;case"TOGGLE_DEBUG_OUTLINE":n.setState({showDebugOutline:!n.state.showDebugOutline});break;case"TOGGLE_THEME_INFO":n.setState({showThemeDialog:!n.state.showThemeDialog})}})),ae(re(re(n)),"closeUnsupportedDialog",(function(){(0,n.props.dispatch)(Q.b()),O.a.closeModal()})),ae(re(re(n)),"checkForUnsupportedDialogMessage",(function(){var e=n.props.hasUnsupportedBrowserMessageBeenDismissed;X.b()||e||Z.a.isRecorderSupported()||!C.a.canShowBrowserUnsupportedMessage()||O.a.showModal(a.a.createElement(B,{onClose:n.closeUnsupportedDialog}))})),ae(re(re(n)),"render",(function(){var e=n.state,t=e.showEnvironmentDialog,r=e.showThemeDialog,o=[a.a.createElement(p.a,{id:"button-info-dialog-close",primary:!0,onClick:n.onEnvDialogCancel},a.a.createElement(_.Trans,{id:"Close"}))],i=[a.a.createElement(p.a,{id:"button-theme-dialog-close",primary:!0,onClick:n.onThemeDialogCancel},a.a.createElement(_.Trans,{id:"Close"}))];return a.a.createElement("div",{className:L()(oe,n.props.className)},a.a.createElement(s.Shortcuts,{name:"GLOBAL",handler:n.handleShortcuts,global:!0,isolate:!0,className:L()("page-debug-outline",n.state.showDebugOutline&&"page-debug-outline--active")},a.a.createElement("div",{className:"page-heading"}),a.a.createElement(u.a,null,a.a.createElement("div",{className:"content-title-container md-toolbar-relative"},C.a.isPageTitleVisible()&&n.props.title?a.a.createElement("div",{className:L()("content-title",n.props.titleClassName)},a.a.createElement("div",{className:"content-header-info"},a.a.createElement("h1",{className:"content-title-header"},n.props.title),n.props.description&&a.a.createElement("div",{className:"content-title-description"},n.props.description)),a.a.createElement("div",{className:"content-header-content-right"},n.props.headerContentRight)):null),n.state.showBubbles&&a.a.createElement(S,null),a.a.createElement(l.a,null,n.props.children),a.a.createElement(d.a,null),a.a.createElement(f.b,{id:"env-dialog",actions:o,visible:t}),a.a.createElement(f.d,{id:"theme-dialog",actions:i,visible:r}))))})),n.state={showEnvironmentDialog:!1,showThemeDialog:!1,showBubbles:!1,showDebugOutline:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"unstable_handleError",value:function(e){$.b.error(e)}},{key:"componentDidMount",value:function(){this.checkForUnsupportedDialogMessage()}},{key:"getChildContext",value:function(){return{shortcuts:ce}}}])&&ee(n.prototype,r),o&&ee(n,o),t}(r.Component);se.childContextTypes={shortcuts:i.a.object.isRequired},se.defaultProps={showPoweredBy:!0},se.propTypes={className:i.a.string,description:i.a.element,header:i.a.element,headerContentRight:i.a.any,showPoweredBy:i.a.bool,title:i.a.string,titleClassName:i.a.string};t.a=Object(c.b)((function(e){return{hasUnsupportedBrowserMessageBeenDismissed:K(e)}}))(se)},jEQv:function(e,t,n){},jI2F:function(e,t,n){},jLiW:function(e,t,n){},jNk8:function(e,t,n){},jUYD:function(e,t,n){},jUYa:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l),f=n("4XMt"),p=n("hFGE");n("1CkY");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){return d.a.pick(e,Object.keys(v.componentProps))}var v=function(e){var t=e.controlComponent;if(!t)switch(e.type){case"checkbox":t=p.a;break;case"radio":t=p.d}return a.a.createElement(c.H,b({},y(e),{className:u()("input-selection-control-group",e.className),controlComponent:t,disabled:!e.enabled,"aria-label":e.ariaLabel}))};v.componentProps={className:i.a.string,onChange:i.a.func,style:i.a.object,label:i.a.string,labelClassName:i.a.string,controlComponent:i.a.oneOfType([i.a.string,i.a.func,i.a.object]),controls:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]),label:i.a.node.isRequired,value:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]).isRequired})),defaultValue:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]),type:i.a.oneOf(["checkbox","radio"]),value:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]),id:i.a.string,name:i.a.string},v.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},v.componentProps,{enabled:i.a.bool,ariaLabel:i.a.string,tooltip:i.a.any}),v.defaultProps={enabled:!0},t.a=Object(f.c)(v)},jlV6:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n("lTCR"),a=n.n(r);function o(){var e=s(["\n    fragment FiveStarRating on ActivityResultStudentReviewFiveStarRating {\n        value\n    }\n"]);return o=function(){return e},e}function i(){var e=s(["\n    fragment FiveStarRatingAnonymous on ActivityStudentGroupReviewFiveStarRatingAnonymous {\n        value\n        comment\n    }\n"]);return i=function(){return e},e}function c(){var e=s(["\n    fragment FiveStarRatingWithUser on ActivityStudentGroupReviewFiveStarRatingWithUser {\n        value\n        user {\n            dbId\n            firstName\n            lastName\n        }\n        comment\n    }\n"]);return c=function(){return e},e}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=a()(c()),l=a()(i()),d=a()(o())},jq4a:function(e,t,n){},jztT:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("8For"),s=n("LFYD"),u=n("TSYQ"),l=n.n(u);n("zgE9");var d=function(e){return a.a.createElement("div",{className:l()("quick-nav",e.className)},function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]),n!==e.length-1&&t.push(a.a.createElement(c.a,{key:"nav-sep-"+n,className:"quick-nav-separator"},s.a.RIGHT));return t}(e.navItems))};d.propTypes={className:i.a.string,navItems:i.a.array.isRequired},d.defaultProps={navItems:[]},t.a=d},"k/UH":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("4XMt"),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("3JS6");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){return a.a.createElement(s.K,m({},function(e){return f.a.pick(e,Object.keys(b.componentProps))}(e),{className:l()("input-switch",e.className),disabled:!e.enabled,"aria-label":e.ariaLabel}),e.children)};b.componentProps={className:i.a.string,checked:i.a.bool,id:i.a.string,label:i.a.string.isRequired,labelBefore:i.a.bool,name:i.a.string,onChange:i.a.func},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},b.componentProps,{enabled:i.a.bool,ariaLabel:i.a.string,tooltip:i.a.any}),b.defaultProps={enabled:!0};var y=Object(c.c)(b);n.d(t,"a",(function(){return y}))},k709:function(e,t,n){},kE32:function(e,t,n){},kJHI:function(e,t,n){},kKdm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={SINGLE:"single",SUMMARY:"summary"}},kNkO:function(e,t,n){e.exports=n.p+"static/config/build-info.json"},kbsL:function(e,t,n){"use strict";var r=n("5id7"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l),f=n("qSfp"),p=n("QMWu");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=v(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==m(a)&&"function"!==typeof a?g(r):a,E(g(g(n)),"onClick",(function(){if(n.props.enabled&&n.props.onClick){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.props.onClick(t)}})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=d.a.clone(this.props);return t.isToggle&&(t.checked||(t.primary=!1,t.secondary=!1)),o.a.createElement(f.b,b({},(e=t,d.a.pick(e,Object.keys(w.componentProps))),{className:u()(t.className),onClick:this.onClick,floating:!0}),t.isLoading?o.a.createElement(p.a,{id:"button-flat-progress",className:"button-flat-progress"}):t.children)}}])&&y(n.prototype,r),a&&y(n,a),t}(a.Component);w.componentProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({},f.b.propTypes),w.propTypes={checked:c.a.bool,isLoading:c.a.bool,isToggle:c.a.bool},w.defaultProps={checked:!1,enabled:!0,isLoading:!1,isToggle:!1};var S=w,O=n("ST1l"),C=n("Onr9"),_=n("xWUU");n("mFy2");function T(e){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=P(t).call(this,e),n=!a||"object"!==T(a)&&"function"!==typeof a?A(r):a,j(A(A(n)),"toggleDialog",(function(){n.setState({visible:!n.state.visible},(function(){n.dialog=document.getElementById(n.props.id+"-dialog")}))})),j(A(A(n)),"handleOutsideClick",(function(e){n.setState({visible:n.button.contains(e.target)||n.dialog.contains(e.target)})})),n.state={visible:!1},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.button=document.getElementById(this.props.id)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.visible;n!==t.visible&&window["".concat(n?"add":"remove","EventListener")]("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"render",value:function(){var e=this.state.visible,t=this.props,n=t.className,r=t.dialogContent,a=t.dialogClassName,i=t.dialogTitle,c=t.enabled,s=t.tooltip;return o.a.createElement("span",null,o.a.createElement(C.a,{id:this.props.id,key:this.props.id,ariaLabel:this.props.ariaLabel,className:u()("button-icon-notification-toggle",n),enabled:c,onClick:this.toggleDialog,tooltip:s},this.props.children),o.a.createElement(_.a,{id:this.props.id+"-dialog",visible:e,dialogContent:r,className:u()("notification-dialog",a),title:i}))}}])&&I(n.prototype,r),a&&I(n,a),t}(a.Component);k.propTypes={ariaLabel:c.a.string,id:c.a.string.isRequired,className:c.a.string,dialogContent:c.a.any.isRequired,dialogClassName:c.a.string,dialogTitle:c.a.string,enabled:c.a.bool,tooltip:c.a.any},k.defaultProps={enabled:!0};var N=k,D=n("xrVw");function L(e){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,V(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(D.A,M({},(e=this.props,d.a.pick(e,Object.keys(q.componentProps))),{className:Object(f.c)(this.props,"button-menu"),inkContainerClassName:u()(f.a.INK_OVERLAY,this.props.inkContainerClassName),"aria-label":this.props.ariaLabel,disabled:!this.props.enabled,icon:!0}),this.props.children);var e}}])&&x(n.prototype,r),a&&x(n,a),t}(a.Component);U(q,"HorizontalAnchors",D.A.HorizontalAnchors),U(q,"VerticalAnchors",D.A.VerticalAnchors),q.componentProps={anchor:c.a.any,className:c.a.string,icon:c.a.bool,flat:c.a.bool,floating:c.a.bool,id:c.a.string.isRequired,inkContainerClassName:c.a.string,listHeightRestricted:c.a.bool,menuItems:c.a.array.isRequired,onClick:c.a.func,primary:c.a.bool,raised:c.a.bool,secondary:c.a.bool,simplifiedMenu:c.a.bool},q.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}({},q.componentProps,{ariaLabel:c.a.string,enabled:c.a.bool}),q.defaultProps={enabled:!0,icon:!0,listHeightRestricted:!1,simplifiedMenu:!1,anchor:{x:D.A.HorizontalAnchors.INNER_RIGHT,y:D.A.VerticalAnchors.OVERLAP}};var W=q,B=n("PrLO"),Q=n("g3iL");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return C.a})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return O.a})),n.d(t,"g",(function(){return B.a})),n.d(t,"h",(function(){return Q.a}))},khwW:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("2iEm"),s=n("kbsL"),u=n("LFYD"),l=n("TSYQ"),d=n.n(l);n("zgE9");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return r=this,o=(e=m(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==f(o)&&"function"!==typeof o?y(r):o,v(y(y(n)),"getRouteLinkItem",(function(){var e=n.props,t=e.text,r=e.to;return r?a.a.createElement(c.a,{to:r},t):a.a.createElement("span",null,t)})),v(y(y(n)),"getMenuButton",(function(){var e=n.props,t=e.text,r=e.menuItems;return a.a.createElement("span",{className:"menu-button-container"},a.a.createElement("span",null,t),a.a.createElement(s.e,{id:"quick-nav-menu-button",className:"quick-nav-menu-button",menuItems:r,anchor:{x:s.e.HorizontalAnchors.INNER_RIGHT,y:s.e.VerticalAnchors.BOTTOM}},u.a.ARROW_DOWN))})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.menuItems,t=e&&e.length>0,n=d()("quick-nav-item",this.props.className);return t||(n=d()(n,this.props.to?"with-link":"plain-text")),a.a.createElement("div",{className:n},t?this.getMenuButton():this.getRouteLinkItem())}}])&&p(n.prototype,r),o&&p(n,o),t}(r.Component);h.propTypes={className:i.a.string,menuItems:i.a.array,text:i.a.string.isRequired,to:i.a.any},h.defaultProps={route:null,menuItems:[]},t.a=h},kwFD:function(e,t,n){},"l+NT":function(e,t,n){e.exports=n.p+"static/media/Google_Chrome_icon.d320793b.svg"},"l+gj":function(e,t,n){},lBBP:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"u",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"v",(function(){return v})),n.d(t,"o",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return w})),n.d(t,"s",(function(){return S})),n.d(t,"q",(function(){return O})),n.d(t,"t",(function(){return C}));var r="[Auth] Set user data",a="[Auth] Set has error",o="[Auth] Set is loading",i="[Auth] Set preset comments",c="[Auth] Set comment preset is loading",s="[Auth] Add comment preset",u="[Auth] Delete comment preset",l="[Auth] Edit comment preset",d="[Auth] Set isMarketingCommunicationAccepted",f="[Auth] Set is508on",p="[Auth] Set timezone";function m(e){return{type:r,payload:e}}function b(e){return{type:a,payload:e}}function y(e){return{type:o,payload:e}}function v(e){return{type:i,payload:e}}function h(e){return{type:c,payload:e}}function g(e){return{type:s,payload:e}}function E(e){return{type:u,payload:e}}function w(e){return{type:l,payload:e}}function S(e){return{type:d,payload:e}}function O(e){return{type:f,payload:e}}function C(e){return{type:p,payload:e}}},lDEH:function(e,t,n){},lXiE:function(e,t,n){},la5r:function(e,t,n){},leQN:function(e,t,n){},"ll/r":function(e,t,n){},lojD:function(e,t,n){},"lt1+":function(e,t,n){},"m3+W":function(e,t,n){},mFy2:function(e,t,n){},mGax:function(e,t,n){},mLCR:function(e,t,n){var r={"./ar":["jnO4",0],"./ar.js":["jnO4",0],"./de":["tGlX",0],"./de.js":["tGlX",0],"./es":["iYuL",0],"./es.js":["iYuL",0],"./fr":["nyYc",0],"./fr-ca":["2fjn",0],"./fr-ca.js":["2fjn",0],"./fr.js":["nyYc",0],"./nl":["+s0g",0],"./nl.js":["+s0g",0],"./pt-br":["0tRk",0],"./pt-br.js":["0tRk",0]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id="mLCR",e.exports=a},mTCQ:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=(n("0l2v"),function(e){return a.a.createElement("div",{className:s()("container",e.className)},e.children)});u.propTypes={className:i.a.string},t.a=u},mWtQ:function(e,t,n){},mqCC:function(e,t,n){var r={"./ar":["P55f",1],"./ar.js":["P55f",1],"./de":["2Eew",1],"./de.js":["2Eew",1],"./en":["x3V9",1],"./en.js":["x3V9",1],"./es":["ReGA",1],"./es.js":["ReGA",1],"./fr":["X5w2",1],"./fr.js":["X5w2",1],"./nl":["1Ehj",1],"./nl.js":["1Ehj",1],"./pt-BR":["5vXV",1],"./pt-BR.js":["5vXV",1]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id="mqCC",e.exports=a},mtWD:function(e,t,n){},mxsA:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n("lTCR"),a=n.n(r);function o(){var e=u(["\n    fragment AnonymousUser on AnonymousUser {\n        dbId\n    }\n"]);return o=function(){return e},e}function i(){var e=u(["\n    fragment GeneralUser on User {\n        dbId\n        firstName\n        lastName\n        roles\n    }\n"]);return i=function(){return e},e}function c(){var e=u(["\n    fragment EducatorUser on User {\n        dbId\n        firstName\n        lastName\n    }\n"]);return c=function(){return e},e}function s(){var e=u(["\n    fragment StudentUser on User {\n        dbId\n        firstName\n        lastName\n    }\n"]);return s=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=a()(s()),d=a()(c()),f=a()(i()),p=a()(o())},"n0/K":function(e,t,n){},nOAq:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=(n("0l2v"),function(e){return a.a.createElement("div",{className:s()("content",e.className)},e.children)});u.propTypes={className:i.a.string},t.a=u},na1x:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var a="oaocieklgnankpgmdbbepdkjpfheohgi",o={EXTENSION_LOADED:"rtcmulticonnection-extension-loaded",ERROR:"PermissionDeniedError",ARE_YOU_THERE:"are-you-there",GET_SOURCE_ID:"get-sourceId"},i={INSTALLED:"installed",NOT_INSTALLED:"not installed",INSTALLED_DISABLED:"installed disabled"},c=function(){};function s(e){return u.apply(this,arguments)}function u(){var e;return e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mozGetUserMedia){e.next=4;break}return e.next=3,t(null,"firefox",{video:{mozMediaSource:"window",mediaSource:"window"}});case 3:return e.abrupt("return",e.sent);case 4:return c=t,e.prev=5,e.next=8,l();case 8:window.addEventListener("message",d),n={command:o.GET_SOURCE_ID,requestURL:window.location.href},window.postMessage(n,window.location.origin),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(5),e.next=17,c(e.t0);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})),(u=function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)}))}).apply(this,arguments)}var l=function(){return new Promise((function(e,t){var n=document.createElement("img");n.src="chrome-extension://".concat(a,"/icon.png"),n.onload=function(){var n=null;window.addEventListener("message",(function t(r){r.data===o.EXTENSION_LOADED&&(window.removeEventListener("message",t),n&&clearTimeout(n),e())})),setTimeout((function(){t(i.INSTALLED_DISABLED)}),2e3),window.postMessage(o.ARE_YOU_THERE,window.location.origin)},n.onerror=function(){t(i.NOT_INSTALLED)}}))};function d(e){if(e.data&&(e.data===o.ERROR&&c(e.data,null,null),e.data.sourceId)){var t=function(e){var t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};e&&(t.video.mandatory.chromeMediaSourceId=e);return t}(e.data.sourceId);c(null,e.data.sourceId,t)}}},nbG6:function(e,t,n){"use strict";var r=n("VQZn"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("xrVw"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d);n("Luur");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){return o.a.createElement(s.e,m({},function(e){return f.a.pick(e,Object.keys(b.componentProps))}(e),{className:l()("card-actions",e.className)}),e.children)};b.componentProps={className:c.a.string,expander:c.a.bool},b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},b.componentProps),b.defaultProps={expander:!1};var y=b;function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e){return o.a.createElement(s.f,h({},function(e){return f.a.pick(e,Object.keys(g.componentProps))}(e),{className:l()("op-card-body",e.className)}),e.children)};g.componentProps={className:c.a.string,expandable:c.a.bool},g.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}({},g.componentProps),g.defaultProps={expandable:!1};var E=g;function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){return o.a.createElement("div",{className:l()("md-card-title md-card-title--primary card-title",e.className)},o.a.createElement("div",{className:"card-title-left-content"},e.title&&o.a.createElement("div",{className:"card-title-left-content-text"},o.a.createElement("h2",{className:"md-card-title--title md-card-title--large md-text card-header"},e.title)),e.children&&o.a.createElement("div",{className:"card-title-left-content-children"},e.children)),o.a.createElement("div",{className:"card-title-right-content"},e.actions&&o.a.createElement("div",{className:"card-title-actions"},e.actions)))};S.componentProps={className:c.a.string,expander:c.a.bool,title:c.a.string.isRequired},S.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}({},S.componentProps,{actions:c.a.oneOfType([c.a.array,c.a.element])}),S.defaultProps={expander:!1};var O=S;n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return O}))},nuEN:function(e,t,n){},nuPF:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t.identifier)return e[n].path;return null}function a(e,t){var n=[];if(e&&e.state&&(n=e.state.quickNavItems),n){for(var r=null,a=0;a<n.length;a++)if(n[a].context&&n[a].context.identifier===t.identifier){r=a;break}null!==r&&(n=n.slice(0,r))}return n}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},o41Y:function(e,t,n){"use strict";var r=n("BA0I"),a="Toolwire",o="TW-",i=n("LvDl"),c=n.n(i);n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"h",(function(){return y}));var s=function(e){return!(!e||!e.integrationType)&&c.a.includes(e.integrationType,r.b.D2L_PREMIUM)},u=function(e){return!(!e||!e.integrationType)&&c.a.includes(e.integrationType,r.b.D2L_FREEMIUM)},l=function(e){return c.a.get(e,"featureToggles.isLegacyFreemium",!1)},d=function(e){return u(e)||s(e)},f=function(e){return d(e)&&function(e){return!(!e||!e.integrationType)&&c.a.includes(e.integrationType,r.b.KAPLAN)}(e)},p=function(e){return!(!e||!e.integrationType)&&(e&&c.a.includes(e.integrationType,r.b.TOP_HAT))},m=function(e){return!(!e||!e.integrationType)&&(e&&c.a.includes(e.integrationType,r.b.STANDARD))},b=function(e){return e&&c.a.includes(e.integrationType,r.b.CENGAGE)},y=function(e){return e&&(e.name===a||c.a.startsWith(e.name,o))}},oRYB:function(e,t,n){},"oUO/":function(e,t,n){},oe1p:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("9C/b"),s=n("giI2"),u=n("iGlQ"),l=n("TSYQ"),d=n.n(l),f=n("nuPF"),p=n("vRGJ"),m=n.n(p);function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=v(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==b(a)&&"function"!==typeof a?g(r):a,E(g(g(n)),"clickHandler",(function(e){var t=n.props,r=t.history,a=t.match;if(e.route){var o=m.a.compile(e.route)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({},a.params));r.push(o)}else e.link&&(window.location=e.link)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,this.props.displayedNavigationItems.map((function(t){var n={route:null,link:null};if(t.route)n.route=t.route;else{var r=Object(f.a)(e.props.navigationItems,t);if(!r)return null;n.link=r}return a.a.createElement(u.c,{key:t.identifier,enabled:t.enabled,tooltip:{label:t.tooltipLabel,position:t.tooltipPosition},className:d()("external-nav-list",e.props.className),leftIcon:a.a.createElement(s.a,{iconClassName:t.iconClassName},t.icon),onClick:function(){return e.clickHandler(n)},primaryText:t.label,ariaLabel:t.ariaLabel})})))}}])&&y(n.prototype,r),o&&y(n,o),t}(r.Component);w.propTypes={displayedNavigationItems:i.a.array.isRequired,navigationItems:i.a.array.isRequired,className:i.a.string},w.defaultProps={navigationItems:[]};var S=Object(c.a)(w),O=n("jztT"),C=n("khwW"),_=n("bFdo");n("G57k");n.d(t,"a",(function(){return S})),n.d(t,"c",(function(){return _.b})),n.d(t,"b",(function(){return _.a})),n.d(t,"d",(function(){return O.a})),n.d(t,"e",(function(){return C.a}))},oo1z:function(e,t,n){},p7mv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));var r="[Nav] Navigation is loading",a="[Nav] Set navigation items";function o(e){return{type:r,payload:e}}function i(e){return{type:a,payload:e}}},pElA:function(e,t,n){"use strict";n.d(t,"S",(function(){return r})),n.d(t,"bb",(function(){return a})),n.d(t,"U",(function(){return o})),n.d(t,"jb",(function(){return i})),n.d(t,"db",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"E",(function(){return u})),n.d(t,"u",(function(){return l})),n.d(t,"cb",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"D",(function(){return p})),n.d(t,"t",(function(){return m})),n.d(t,"s",(function(){return b})),n.d(t,"hb",(function(){return y})),n.d(t,"ib",(function(){return v})),n.d(t,"Q",(function(){return h})),n.d(t,"A",(function(){return g})),n.d(t,"k",(function(){return E})),n.d(t,"y",(function(){return w})),n.d(t,"O",(function(){return S})),n.d(t,"R",(function(){return O})),n.d(t,"B",(function(){return C})),n.d(t,"z",(function(){return _})),n.d(t,"P",(function(){return T})),n.d(t,"j",(function(){return I})),n.d(t,"F",(function(){return P})),n.d(t,"b",(function(){return R})),n.d(t,"r",(function(){return A})),n.d(t,"X",(function(){return j})),n.d(t,"W",(function(){return k})),n.d(t,"n",(function(){return N})),n.d(t,"x",(function(){return D})),n.d(t,"kb",(function(){return L})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return x})),n.d(t,"c",(function(){return F})),n.d(t,"N",(function(){return V})),n.d(t,"K",(function(){return G})),n.d(t,"l",(function(){return U})),n.d(t,"w",(function(){return q})),n.d(t,"G",(function(){return W})),n.d(t,"g",(function(){return B})),n.d(t,"o",(function(){return Q})),n.d(t,"lb",(function(){return Y})),n.d(t,"H",(function(){return H})),n.d(t,"a",(function(){return z})),n.d(t,"q",(function(){return K})),n.d(t,"C",(function(){return X})),n.d(t,"M",(function(){return $})),n.d(t,"m",(function(){return Z})),n.d(t,"p",(function(){return J})),n.d(t,"v",(function(){return ee})),n.d(t,"mb",(function(){return te})),n.d(t,"gb",(function(){return ne})),n.d(t,"L",(function(){return re})),n.d(t,"eb",(function(){return ae})),n.d(t,"T",(function(){return oe})),n.d(t,"Z",(function(){return ie})),n.d(t,"Y",(function(){return ce})),n.d(t,"J",(function(){return se})),n.d(t,"I",(function(){return ue})),n.d(t,"f",(function(){return le})),n.d(t,"ab",(function(){return de})),n.d(t,"fb",(function(){return fe})),n.d(t,"V",(function(){return pe})),n.d(t,"Tb",(function(){return me})),n.d(t,"Rb",(function(){return be})),n.d(t,"dc",(function(){return ye})),n.d(t,"fc",(function(){return ve})),n.d(t,"vb",(function(){return he})),n.d(t,"Nb",(function(){return ge})),n.d(t,"Fb",(function(){return Ee})),n.d(t,"ub",(function(){return we})),n.d(t,"Mb",(function(){return Se})),n.d(t,"Eb",(function(){return Oe})),n.d(t,"ec",(function(){return Ce})),n.d(t,"lc",(function(){return _e})),n.d(t,"mc",(function(){return Te})),n.d(t,"xb",(function(){return Ie})),n.d(t,"Jb",(function(){return Pe})),n.d(t,"Kb",(function(){return Re})),n.d(t,"wb",(function(){return Ae})),n.d(t,"Ob",(function(){return je})),n.d(t,"ob",(function(){return ke})),n.d(t,"Cb",(function(){return Ne})),n.d(t,"Yb",(function(){return De})),n.d(t,"Db",(function(){return Le})),n.d(t,"Ib",(function(){return Me})),n.d(t,"nc",(function(){return xe})),n.d(t,"pb",(function(){return Fe})),n.d(t,"qb",(function(){return Ve})),n.d(t,"kc",(function(){return Ge})),n.d(t,"gc",(function(){return Ue})),n.d(t,"Hb",(function(){return qe})),n.d(t,"Pb",(function(){return We})),n.d(t,"oc",(function(){return Be})),n.d(t,"zb",(function(){return Qe})),n.d(t,"tb",(function(){return Ye})),n.d(t,"pc",(function(){return He})),n.d(t,"rb",(function(){return ze})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"Gb",(function(){return Xe})),n.d(t,"nb",(function(){return $e})),n.d(t,"Bb",(function(){return Ze})),n.d(t,"Lb",(function(){return Je})),n.d(t,"Sb",(function(){return et})),n.d(t,"yb",(function(){return tt})),n.d(t,"Ab",(function(){return nt})),n.d(t,"Vb",(function(){return rt})),n.d(t,"jc",(function(){return at})),n.d(t,"hc",(function(){return ot})),n.d(t,"Ub",(function(){return it})),n.d(t,"ac",(function(){return ct})),n.d(t,"Zb",(function(){return st})),n.d(t,"Qb",(function(){return ut})),n.d(t,"bc",(function(){return lt})),n.d(t,"sb",(function(){return dt})),n.d(t,"cc",(function(){return ft})),n.d(t,"ic",(function(){return pt})),n.d(t,"Wb",(function(){return mt}));var r="[Activity] Set data",a="[Activity] Set is loading",o="[Activity] Set background refresh is loading",i="[Activity] Show milestone form",c="[Activity] Set milestone is loading",s="[Activity] Add milestone",u="[Activity] Edit milestone",l="[Activity] Delete milestone",d="[Activity] Set meeting is loading",f="[Activity] Add meeting",p="[Activity] Edit meeting",m="[Activity] Delete meeting",b="[Activity] Delete media",y="[Activity] Set results partials",v="[Activity] Set results partials is loading",h="[Activity] Select in progress partial",g="[Activity] Deselect in progress partial",E="[Activity] Add partials to submit",w="[Activity] Deselect all progress partials",S="[Activity] Select all progress partials",O="[Activity] Select ready to submit partial",C="[Activity] Deselect ready to submit partial",_="[Activity] Deselect all ready to submit partials",T="[Activity] Select all ready to submit partials",I="[Activity] Add partials to progress",P="[Activity] Edit partial",R="[Activity] Add group comment",A="[Activity] Delete group comment",j="[Activity] Set group comments is loading",k="[Activity] Set group comments",N="[Activity] Add submitted results",D="[Activity] Delete submitted results",L="[Activity] Team eval is loading",M="[Activity] Add group team eval five star",x="[Activity] Add group team eval rubric points",F="[Activity] Add group team eval rubric comment",V="[Activity] Remove submission is loading",G="[Activity] Peer review comment is loading",U="[Activity] Peer review comment added",q="[Activity] Peer review comment deleted",W="[Activity] Peer review comment edited",B="[Activity] Add media partial",Q="[Activity] Create peer review five star",Y="[Activity] Update activity",H="[Activity] Feedback comment is loading",z="[Activity] Add feedback comment",K="[Activity] Delete feedback comment",X="[Activity] Edit feedback comment",$="[Activity] Refresh feedback comments",Z="[Activity] Add rubric self assessment",J="[Activity] Create peer review rubric",ee="[Activity] Delete result partial",te="[Activity-QA] Update question and results",ne="[Activity] Set educator progress view refresh is loading",re="[Activity] Set refreshed actvity data",ae="[QA-Activity] Submit requested at",oe="[Activity] Set activity is submitting",ie="[Activity] Set group name is editing",ce="[Activity] Set group name",se="[Activity Merge activity data",ue="[Interactive-Video-Activity] Set answer is loading",le="[Interactive-Video-Activity] Add interactive video answer",de="[Interactive-Video-Activity] Set interactive video finished watching",fe="[Reflection-Question-Answers] Set reflection question answers",pe="[Activity-QA] Set current question",me=function(e){return{type:r,payload:e}},be=function(e){return{type:re,payload:e}},ye=function(e){return{type:a,payload:e}},ve=function(e){return{type:c,payload:e}},he=function(e){return{type:s,payload:e}},ge=function(e){return{type:u,payload:e}},Ee=function(e){return{type:l,payload:e}},we=function(e){return{type:f,payload:e}},Se=function(e){return{type:p,payload:e}},Oe=function(e){return{type:m,payload:e}},Ce=function(e){return{type:d,payload:e}},_e=function(e){return{type:y,payload:e}},Te=function(e){return{type:v,payload:e}},Ie=function(e){return{type:E,payload:e}},Pe=function(){return{type:w}},Re=function(){return{type:_}},Ae=function(e){return{type:I,payload:e}},je=function(e){return{type:P,payload:e}},ke=function(e){return{type:R,payload:e}},Ne=function(e){return{type:A,payload:e}},De=function(e){return{type:j,payload:e}},Le=function(e){return{type:b,payload:e}},Me=function(){return{type:D}},xe=function(e){return{type:L,payload:e}},Fe=function(e){return{type:M,payload:e}},Ve=function(e){return{type:F,payload:e}},Ge=function(e){return{type:V,payload:e}},Ue=function(e){return{type:G,payload:e}},qe=function(e){return{type:q,payload:e}},We=function(e){return{type:W,payload:e}},Be=function(e){return{type:Y,payload:e}},Qe=function(e){return{type:Q,payload:e}},Ye=function(e){return{type:B,payload:e}},He=function(e){return{type:te,payload:e}},ze=function(e,t){return{type:x,payload:{rubricResult:e,peerDbId:t}}},Ke=function(e){return{type:H,payload:e}},Xe=function(e){return{type:ee,payload:e}},$e=function(e){return{type:z,payload:e}},Ze=function(e){return{type:K,payload:e}},Je=function(e){return{type:X,payload:e}},et=function(e){return{type:$,payload:e}},tt=function(e){return{type:Z,payload:e}},nt=function(e,t){return{type:J,payload:{review:e,submitterDbId:t}}},rt=function(e){return{type:o,payload:e}},at=function(e){return{type:ne,payload:e}},ot=function(e){return{type:ae,payload:e}},it=function(e){return{type:oe,payload:e}},ct=function(e){return{type:ie,payload:e}},st=function(e){return{type:ce,payload:e}},ut=function(e){return{type:se,payload:e}},lt=function(e){return{type:ue,payload:e}},dt=function(e){return{type:le,payload:e}},ft=function(e){return{type:de,payload:e}},pt=function(e){return{type:fe,payload:e}},mt=function(e){return{type:pe,payload:e}}},pGwi:function(e,t,n){},pX12:function(e,t,n){var r={"./ar/messages":["6JE8",3],"./de/messages":["pe+L",4],"./en/messages":["HS0P",5],"./es/messages":["H8xX",6],"./fr/messages":["P/Gs",7],"./fr_CA/messages":["9ylK",8],"./nl/messages":["8pyE",9],"./pt_BR/messages":["2Uxq",10]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id="pX12",e.exports=a},ppB1:function(e,t,n){"use strict";var r,a;function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"l",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"m",(function(){return S})),n.d(t,"p",(function(){return O}));var c="InteractiveQuestionOfTypeChoice",s="InteractiveQuestionOfTypeVideo",u="InteractiveAnswerOfTypeVideo",l=2048,d=2048,f=2048,p=2,m=5,b=1,y=20,v={SETTINGS:{IS_RETAKE:"isRetakeRequired",IS_SUMMARY_VISIBLE:"isSubmissionSummaryVisible",MEDIA:"media"},QUESTION_VIDEO:{SHOW_TIME:"showTime",SORT:"orderNumber",TEXT:"questionText"},QUESTION:{OPTIONS:"options",SHOW_TIME:"showTime",SORT:"orderNumber",TEXT:"questionText",WEIGHT:"score"},OPTION:{DESCRIPTION:"optionDescription",IS_CORRECT:"correct",TEXT:"optionText"}},h="NEW",g=(i(r={},v.OPTION.DESCRIPTION,""),i(r,v.OPTION.IS_CORRECT,!1),i(r,v.OPTION.TEXT,""),i(r,"isDirty",!1),r),E=o({},g,{isNew:!0}),w=(i(a={},v.QUESTION.OPTIONS,[]),i(a,v.QUESTION.SHOW_TIME,0),i(a,v.QUESTION.SORT,y),i(a,v.QUESTION.TEXT,""),i(a,v.QUESTION.WEIGHT,0),i(a,"type",c),a),S=o({},w,{isNew:!0});function O(){return h+"_"+(new Date).getTime()}},psRa:function(e,t,n){},q2J1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("LvDl"),a=n.n(r),o=function(e){if(!e)return null;for(var t=[],n=function(n){t.push((function(t){var r=a.a.get(t,e[n]);return a.a.isString(r)?r.toLowerCase():r}))},r=0;r<e.length;r++)n(r);return t},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a.a.orderBy(e.slice(),t,n)}},q8N1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o}));var r={ENTER:13,ARROW_DOWN:40,ARROW_UP:38,ARROW_LEFT:37,ARROW_RIGHT:39,PLUS:107,MINUS:109,SPACE:32},a=function(e,t){return function(n){var r=n.which===e,a=e.length&&-1!==e.indexOf(n.which);(r||a)&&(n.preventDefault(),t(n))}},o=function(e){return a(r.ENTER,e)}},"qBI/":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("VQZn"),s=n("ZD0w"),u=n("r1K/");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.i18n;return e.lmsLocked?a.a.createElement(c.a,null,a.a.createElement(u.b,{type:u.a.WARNING},a.a.createElement("p",{className:"u-fs-15px u-m-0"},t._("Assignment is locked. Please contact your educator for more details")))):null}}])&&d(n.prototype,r),o&&d(n,o),t}(r.Component);b.propTypes={i18n:i.a.object,lmsLocked:i.a.bool};var y=Object(s.withI18n)()(b),v=n("/MKj"),h=n("Wtf/");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,S(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(y,{lmsLocked:this.props.lmsLocked})}}])&&E(n.prototype,r),o&&E(n,o),t}(r.Component);C.propTypes={lmsLocked:i.a.bool};t.a=Object(v.b)((function(e){return{lmsLocked:h.getLmsLocked(e)}}))(C)},qJsM:function(e,t,n){},qSfp:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return S}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l),f=n("4XMt");n("/I3q");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={BUTTON:"button",INK_OVERLAY:"button-ink-overlay",TYPE_FLAT:"button-flat",TYPE_FLOATING:"button-floating",TYPE_ICON:"button-icon",TYPE_RAISED:"button-raised",SKIN_BASE:"button-base",SKIN_PRIMARY:"button-primary",SKIN_SECONDARY:"button-secondary"};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[w.BUTTON,t],r=e.primary,a=e.secondary;r?n.push(w.SKIN_PRIMARY):a?n.push(w.SKIN_SECONDARY):n.push(w.SKIN_BASE);var o=e.raised,i=e.flat,c=e.floating,s=e.icon;return o?n.push(w.TYPE_RAISED):i?n.push(w.TYPE_FLAT):c?(n.push(w.TYPE_RAISED),n.push(w.TYPE_FLOATING)):s&&(n.push(w.TYPE_FLAT),n.push(w.TYPE_ICON)),n.push(e.className),u()(n)}var O={isTooltipOpen:!1},C=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=v(t).call(this,e),n=!a||"object"!==p(a)&&"function"!==typeof a?g(r):a,E(g(g(n)),"getComponentProps",(function(){return d.a.pick(n.props,Object.keys(t.componentProps))})),E(g(g(n)),"onBlur",(function(){var e=n.props.onBlur;n.hideTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"onFocus",(function(){var e=n.props.onFocus;n.showTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"onMouseEnter",(function(){var e=n.props.onMouseEnter;n.showTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"onMouseLeave",(function(){var e=n.props.onMouseLeave;n.hideTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"onTouchStart",(function(){var e=n.props.onTouchStart;n.showTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"onTouchEnd",(function(){var e=n.props.onTouchEnd;n.hideTooltip();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),E(g(g(n)),"showTooltip",(function(){n.setState({isTooltipOpen:!0})})),E(g(g(n)),"hideTooltip",(function(){n.setState({isTooltipOpen:!1})})),n.state=b({},O),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.ariaLabel,r=t.children,o=t.enabled,i=t.inkContainerClassName,s=t.tooltip,l=this.state.isTooltipOpen,p=null;return s&&(p=d.a.merge({},s,{trigger:"manual",open:d.a.isBoolean(s.open)?s.open:l,onRequestClose:function(){if(e.hideTooltip(),s.onRequestClose){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];s.onRequestClose(n)}}})),a.a.createElement(f.b,m({},p,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd}),a.a.createElement(c.c,m({},this.getComponentProps(),{className:S(this.props),inkContainerClassName:u()(w.INK_OVERLAY,i),"aria-label":n,disabled:!o,onBlur:this.onBlur,onFocus:this.onFocus}),r))}}])&&y(n.prototype,r),o&&y(n,o),t}(r.Component);C.componentProps={className:i.a.string,flat:i.a.bool,floating:i.a.bool,forceIconFontSize:i.a.bool,forceIconSize:i.a.any,icon:i.a.bool,iconBefore:i.a.bool,iconClassName:i.a.string,iconEl:i.a.element,id:i.a.any,inkContainerClassName:i.a.string,mini:i.a.bool,onClick:i.a.func,primary:i.a.bool,raised:i.a.bool,secondary:i.a.bool,title:i.a.string},C.propTypes=b({},C.componentProps,{ariaLabel:i.a.string,enabled:i.a.bool,onBlur:i.a.func,onFocus:i.a.func,onMouseEnter:i.a.func,onMouseLeave:i.a.func,onTouchEnd:i.a.func,onTouchStart:i.a.func,tooltip:i.a.any}),C.defaultProps={enabled:!0,onBlur:function(){},onFocus:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onTouchEnd:function(){},onTouchStart:function(){}},t.b=C},"qea/":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return l}));var r="[Activity Configuration] Set group configuration",a="[Activity Configuration] Set individual configuration",o="[Activity Configuration] Set Q&A configuration",i="[Activity Configuration] Set interactive video configuration",c=function(e){return{type:r,payload:e}},s=function(e){return{type:a,payload:e}},u=function(e){return{type:o,payload:e}},l=function(e){return{type:i,payload:e}}},qisB:function(e,t,n){},"r1K/":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=n("KhDq");n.d(t,"a",(function(){return u.a}));n("pGwi");var l=function(e){var t=e.children,n=e.className,r=e.contentInheritsStatusColor,o=e.message,i=e.type,c=null;if(!(c=o?a.a.createElement("p",{className:"status-message-content-text"},o):t)||0===c.length)return null;var l=["status-message-content","status-message-content--"+i];return r&&l.push("status-message-content--"+i+"-color"),a.a.createElement("div",{className:s()("status-message",n)},a.a.createElement(u.b,{className:"status-message-icon",type:i,enableTooltip:!1}),a.a.createElement("div",{className:s()(l)},c))};l.propTypes={className:i.a.string,message:i.a.string,contentInheritsStatusColor:i.a.bool,type:i.a.oneOf(Object.values(u.a))},l.defaultProps={message:null,contentInheritsStatusColor:!1,type:u.a.INFO},t.b=l},r6t9:function(e,t,n){"use strict";var r=n("DQM/");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.uploadUrl,r=t.token,a=t.fileName;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uploadUrl=n,this.token=r,this.fileName=a,this.uploadQueue=[],this.uploadedChunksCount=0,this.uploading=!1,this.chunkGenerationComplete=!1,this.finished=!1,this.canceled=!1,this.requestController=new AbortController,this.signal=this.requestController.signal}var t,n,r;return t=e,(n=[{key:"addToUploadQueue",value:function(e){this.uploadQueue.push(e),this._uploadNextChunk()}},{key:"stopUpload",value:function(){this.uploading&&this.requestController.abort(),this.canceled=!0}},{key:"isUploadingFinished",value:function(){return this.finished}},{key:"stopWaitingForChunks",value:function(){this.chunkGenerationComplete=!0,this._isUploadingFinished()&&this.finish()}},{key:"onProgress",value:function(e){this.onProgressHandler=e}},{key:"finish",value:function(){this.finished=!0}},{key:"getUploadingProgress",value:function(){var e=this.uploadedChunksCount+this.uploadQueue.length;return this.uploading&&e++,this.uploadedChunksCount/e*100}},{key:"_isUploadingFinished",value:function(){return this.chunkGenerationComplete&&0===this.uploadQueue.length&&!this.uploading}},{key:"_uploadNextChunk",value:function(){if(this._isUploadingFinished())return this.finish();if(!this.uploading&&0!==this.uploadQueue.length&&!this.canceled){var e=this.uploadQueue.shift(),t=this._getRequestBody(e);this._upload(t)}}},{key:"_getRequestBody",value:function(e){var t=e.index,n=e.blob,r=new FormData;return 0===t&&(t="zero"),r.append("video-filename",this.fileName),r.append("video-index",t),r.append("token",this.token),r.append("video-blob",n,"blob"),r}},{key:"_upload",value:function(e){var t=this;this.uploading=!0,fetch(this.uploadUrl,{method:"POST",body:e,signal:this.signal}).then((function(){t.uploadedChunksCount++,t.uploading=!1,t._uploadNextChunk(),t.onProgressHandler instanceof Function&&t.onProgressHandler(t.getUploadingProgress())})).catch((function(){t.canceled||t.finished||setTimeout((function(){t._upload(e)}),1e3)}))}}])&&a(t.prototype,n),r&&a(t,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return c}));var c=function(){function e(t){var n=this,a=t.mediaStream,i=t.uploadUrl,c=t.token,s=t.fileName,u=t.resultKey;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkGenerator=new r.b(a),this.chunkUploader=new o({uploadUrl:i,token:c,fileName:s}),this.resultKey=u,this.chunkGenerator.onChunk((function(e){n.chunkUploader.addToUploadQueue(e)})),this.chunkGenerator.onStop((function(){n.chunkUploader.stopWaitingForChunks()}))}var t,n,a;return t=e,(n=[{key:"startCapturing",value:function(){this.chunkGenerator.startCapturing()}},{key:"stopCapturing",value:function(){return this.chunkGenerator.stopCapturing()}},{key:"getUploadingProgress",value:function(){return this.chunkUploader.getUploadingProgress()}},{key:"isUploadingFinished",value:function(){return this.chunkUploader.isUploadingFinished()}},{key:"onProgress",value:function(e){this.chunkUploader.onProgress(e)}},{key:"getAllChunks",value:function(){return this.chunkGenerator.getAllChunks()}},{key:"stopUpload",value:function(){this.chunkUploader.stopUpload()}}])&&i(t.prototype,n),a&&i(t,a),e}()},r9GM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s}));var r="[Browser] Set viewport dimensions",a="[Browser] Set viewport orientation",o="[Browser] Set viewport size",i=function(e){return{type:r,payload:e}},c=function(e){return{type:a,payload:e}},s=function(e){return{type:o,payload:e}}},rKop:function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("wNa6"),c=n("Ondw"),s=n("ChKr"),u=n("IwvU"),l=n("7n1V"),d=n("92Bf"),f=n("O+79"),p=n("svEP"),m=n("09Br"),b=n("FxcE"),y=n("AuRu"),v=n("8DtX"),h=n("sIVs"),g=n("ul3U"),E=n("LvDl"),w=n.n(E);function S(){var e=ne(["\n    mutation deleteActivity($input: ActivityInput!) {\n        deleteActivity(input: $input) {\n            removedId\n        }\n    }\n"]);return S=function(){return e},e}function O(){var e=ne(["\n    mutation copyActivity($input: ActivityInput!) {\n        copyActivity(input: $input) {\n            activity {\n                dbId\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n"]);return O=function(){return e},e}function C(){var e=ne(["\n    mutation hideGroupEvaluations($input: HideGroupEvaluationsInput!) {\n        hideGroupEvaluations(input: $input) {\n            studentGroup {\n                dbId\n            }\n        }\n    }\n"]);return C=function(){return e},e}function _(){var e=ne(["\n    mutation releaseGroupEvaluations($input: ReleaseGroupEvaluationsInput!) {\n        releaseGroupEvaluations(input: $input) {\n            studentGroup {\n                dbId\n            }\n        }\n    }\n"]);return _=function(){return e},e}function T(){var e=ne(["\n    mutation deleteQaAnswerForStudent($input: DeleteQaAnswerForStudentInput!) {\n        deleteQaAnswerForStudent(input: $input) {\n            removedId\n        }\n    }\n"]);return T=function(){return e},e}function I(){var e=ne(["\n    mutation editCommentPreset($input: EditCommentPresetInput!) {\n        editCommentPreset(input: $input) {\n            comment {\n                dbId\n                commentText\n                orderNumber\n            }\n        }\n    }\n"]);return I=function(){return e},e}function P(){var e=ne(["\n    mutation deleteCommentPreset($input: DeleteCommentPresetInput!) {\n        deleteCommentPreset(input: $input) {\n            removedId\n        }\n    }\n"]);return P=function(){return e},e}function R(){var e=ne(["\n    mutation createCommentPreset($input: CreateCommentPresetInput!) {\n        createCommentPreset(input: $input) {\n            comment {\n                dbId\n                commentText\n                orderNumber\n            }\n        }\n    }\n"]);return R=function(){return e},e}function A(){var e=ne(["\n    mutation removeStudentsFromGroup($input: RemoveStudentsFromGroupInput!) {\n        removeStudentsFromGroup(input: $input) {\n            studentDbIds\n        }\n    }\n"]);return A=function(){return e},e}function j(){var e=ne(["\n    mutation addStudentsToGroup($input: AddStudentsToGroupInput!) {\n        addStudentsToGroup(input: $input) {\n            studentGroup {\n                dbId\n            }\n        }\n    }\n"]);return j=function(){return e},e}function k(){var e=ne(["\n    mutation deleteStudentGroup($input: DeleteStudentGroupInput!) {\n        deleteStudentGroup(input: $input) {\n            removedId\n        }\n    }\n"]);return k=function(){return e},e}function N(){var e=ne(["\n    mutation createStudentGroups($input: CreateStudentGroupsInput!) {\n        createStudentGroups(input: $input) {\n            studentGroups {\n                dbId\n            }\n        }\n    }\n"]);return N=function(){return e},e}function D(){var e=ne(["\n    mutation deleteActivityResultComment($input: DeleteActivityResultCommentInput!) {\n        deleteActivityResultComment(input: $input) {\n            removedId\n        }\n    }\n"]);return D=function(){return e},e}function L(){var e=ne(["\n    mutation editActivityResultComment($input: EditActivityResultCommentInput!) {\n        editActivityResultComment(input: $input) {\n            comment {\n                ...Comment\n                ...AnonymousComment\n            }\n        }\n    }\n    ","\n    ","\n"]);return L=function(){return e},e}function M(){var e=ne(["\n    mutation createActivityResultComment($input: CreateActivityResultCommentInput!) {\n        createActivityResultComment(input: $input) {\n            comment {\n                ...Comment\n                ...AnonymousComment\n            }\n        }\n    }\n    ","\n    ","\n"]);return M=function(){return e},e}function x(){var e=ne(["\n    mutation editActivityStudentGroupTitle($input: EditActivityStudentGroupTitleInput!) {\n        createActivityStudentGroupComment(input: $input) {\n            group {\n                name\n            }\n        }\n    }\n"]);return x=function(){return e},e}function F(){var e=ne(["\n    mutation deleteActivityResultForStudent($input: DeleteActivityResultForStudentInput!) {\n        deleteActivityResultForStudent(input: $input) {\n            removedId\n        }\n    }\n"]);return F=function(){return e},e}function V(){var e=ne(["\n    mutation convertDraftToFinalGroupGrade($input: ConvertDraftToFinalGroupGradeInput!) {\n        convertDraftToFinalGroupGrade(input: $input) {\n            groupDbId\n        }\n    }\n"]);return V=function(){return e},e}function G(){var e=ne(["\n    mutation saveEducatorGradeForGroup($input: SaveEducatorGradeGroupInput!) {\n        saveEducatorGradeForGroup(input: $input) {\n            errors {\n                path\n                messages\n            }\n            grade {\n                ...EducatorGrade\n            }\n        }\n    }\n    ","\n    ","\n"]);return G=function(){return e},e}function U(){var e=ne(["\n    mutation saveEducatorGradeForIndividual($input: SaveEducatorGradeIndividualInput!) {\n        saveEducatorGradeForIndividual(input: $input) {\n            errors {\n                path\n                messages\n            }\n            grade {\n                ...EducatorGrade\n            }\n        }\n    }\n    ","\n    ","\n"]);return U=function(){return e},e}function q(){var e=ne(["\n    {\n        viewer {\n            commentPresets {\n                dbId\n                commentText\n                orderNumber\n            }\n        }\n    }\n    ","\n"]);return q=function(){return e},e}function W(){var e=ne(["\n    {\n        viewer {\n            myRubrics {\n                ...Rubric\n            }\n        }\n    }\n    ","\n"]);return W=function(){return e},e}function B(){var e=ne(["\n    mutation editQuestionAndAnswerActivity($input:  EditQuestionAndAnswerActivityInput!) {\n        editQuestionAndAnswerActivity(input:$input) {\n            errors {\n                path\n                message\n            }\n            activity {\n                dbId\n                name\n            }\n        }\n    }\n"]);return B=function(){return e},e}function Q(){var e=ne(["\n    mutation editInteractiveVideoActivity($input:  EditActivityInteractiveVideoInput!) {\n        editInteractiveVideoActivity(input:$input) {\n            errors {\n                path\n                message\n            }\n            activity {\n                dbId\n                name\n            }\n        }\n    }\n"]);return Q=function(){return e},e}function Y(){var e=ne(["\nmutation createInteractiveVideoActivity($input:  CreateActivityInteractiveVideoInput!) {\n    createInteractiveVideoActivity(input:$input) {\n        errors {\n            path\n            message\n        }\n        activity {\n            dbId\n            name\n        }\n    }\n}\n"]);return Y=function(){return e},e}function H(){var e=ne(["\nmutation createQuestionAndAnswerActivity($input:  CreateQuestionAndAnswerActivityInput!) {\n    createQuestionAndAnswerActivity(input:$input) {\n        errors {\n            path\n            message\n        }\n        activity {\n            dbId\n            name\n        }\n    }\n}\n"]);return H=function(){return e},e}function z(){var e=ne(["\nmutation createIndividualProjectActivity($input:  CreateActivityIndividualProjectInput!) {\n    createIndividualProjectActivity(input:$input) {\n        errors {\n            path\n            message\n        }\n        activity {\n            dbId\n            name\n        }\n    }\n}\n"]);return z=function(){return e},e}function K(){var e=ne(["\n    mutation editIndividualProjectActivity($input:  EditActivityIndividualProjectInput!) {\n        editIndividualProjectActivity(input:$input) {\n            errors {\n                path\n                message\n            }\n            activity {\n                dbId\n                name\n            }\n        }\n    }\n"]);return K=function(){return e},e}function X(){var e=ne(["\n    mutation createGroupProjectActivity($input: CreateGroupProjectActivityInput!) {\n        createGroupProjectActivity(input:$input) {\n            errors {\n                path\n                message\n            }\n            activity {\n                dbId\n                name\n            }\n        }\n    }\n"]);return X=function(){return e},e}function $(){var e=ne(["\n    mutation editGroupProjectActivity($input: EditGroupProjectActivityInput!) {\n        editGroupProjectActivity(input:$input) {\n            errors {\n                path\n                message\n            }\n            activity {\n                dbId\n                name\n            }\n        }\n    }\n"]);return $=function(){return e},e}function Z(){var e=ne(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dataForOneStudent(studentDbId: $studentId) {\n                isGradeDraftAllowed\n            }\n        }\n    }\n"]);return Z=function(){return e},e}function J(){var e=ne(["\n    mutation copyStudentGroups($sourceActivityDbId: Int!, $targetActivityDbId: Int!) {\n        copyStudentGroups(sourceActivityDbId: $sourceActivityDbId, targetActivityDbId: $targetActivityDbId) {\n            studentGroups {\n                dbId\n                name\n            }\n        }\n    }\n"]);return J=function(){return e},e}function ee(){var e=ne(["\n    query getActivityInfo($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            dataForOneStudent(studentDbId: $studentId) {\n                result {\n                    ... on ActivityResultIndividualProject {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultQa {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultGroupProject {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultInteractiveVideo {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment                            \n                        }\n                    }\n                }\n            }\n        }\n    }\n    ","\n    ","\n"]);return ee=function(){return e},e}function te(){var e=ne(["\n    query getActivityInfo($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            type\n        }\n    }\n"]);return te=function(){return e},e}function ne(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function re(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){re(o,r,a,i,c,"next",e)}function c(e){re(o,r,a,i,c,"throw",e)}i(void 0)}))}}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getActivities",value:function(){var e=ae(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.query({query:b.a,variables:{dbId:t}});case 2:if(!((n=e.sent).errors&&n.errors.length>0)){e.next=5;break}throw new Error(n.errors);case 5:return e.abrupt("return",w.a.get(n,"data.termClass.activities"));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchGroupActivities",value:function(){var e=ae(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.query({query:b.b,variables:{termClass:t,filter:[{column:"type",value:"group_presentation"}]}});case 2:if(!((n=e.sent).errors&&n.errors.length>0)){e.next=5;break}throw new Error(n.errors);case 5:return e.abrupt("return",w.a.get(n,"data.activities"));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getActivitySettingsData",value:function(e){var t=this;return new Promise((function(n,a){i.a.dispatch(c.kb(!0)),r.a.query({query:ce,variables:{activityId:e}}).then((function(r){r&&r.data?t.getActivitySettingsByType(e,r.data.activity.type).then((function(e){e&&e.data?(i.a.dispatch(c.ab(e.data.activity,u.a.CONFIGURATION)),n(e)):a(e),i.a.dispatch(c.kb(!1))})).catch((function(e){a(e),i.a.dispatch(c.kb(!1))})):(a(r),i.a.dispatch(c.kb(!1)))})).catch((function(e){a(e),i.a.dispatch(c.kb(!1))}))}))}},{key:"copyGroupsToAssignment",value:function(){var e=ae(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.mutate({mutation:ue,variables:{sourceActivityDbId:t,targetActivityDbId:n}});case 2:if(!((a=e.sent).errors&&a.errors.length>0)){e.next=5;break}throw new Error(a.errors);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getActivityGradingData",value:function(e,t){var n=this;return new Promise((function(a,o){i.a.dispatch(c.kb(!0)),r.a.query({query:ce,variables:{activityId:e}}).then((function(r){r&&r.data?n.getGradingActivityByType(e,r.data.activity.type,t).then((function(e){e&&e.data?(i.a.dispatch(c.Z(e.data.activity)),a(e)):o(e),i.a.dispatch(c.kb(!1))})).catch((function(e){o(e),i.a.dispatch(c.kb(!1))})):o(r)})).catch((function(e){o(e),i.a.dispatch(c.kb(!1))}))}))}},{key:"refreshActivityGradingData",value:function(e,t,n){var r=this;return new Promise((function(a,o){i.a.dispatch(c.mb(!0)),r.getGradingActivityByType(e,t,n).then((function(e){e&&e.data?(i.a.dispatch(c.Z(e.data.activity)),a(e)):o(e),i.a.dispatch(c.mb(!1))})).catch((function(e){o(e),i.a.dispatch(c.kb(!1))}))}))}},{key:"getGradingActivityByType",value:function(e,t,n){switch(t){case l.b.QA_ENHANCED:return this.getQAGradingActivity(e,n);case l.b.INDIVIDUAL_PROJECT:return this.getIndividualGradingActivity(e,n);case l.b.GROUP_PRESENTATION:return this.getGroupGradingActivity(e,n);case l.b.INTERACTIVE_VIDEO:return this.getInteractiveVideoGradingActivity(e,n);default:throw new Error("Unsupported activity type")}}},{key:"getActivitySettingsByType",value:function(e,t){switch(t){case l.b.QA_ENHANCED:return this.getQAActivitySettings(e);case l.b.INDIVIDUAL_PROJECT:return this.getIndividualActivitySettings(e);case l.b.GROUP_PRESENTATION:return this.getGroupActivitySettings(e);case l.b.INTERACTIVE_VIDEO:return this.getInteractiveVideoActivitySettings(e);default:throw new Error("Unsupported activity type")}}},{key:"getUserRubrics",value:function(){return new Promise((function(e,t){r.a.query({query:ge}).then((function(n){n&&n.data?e(n.data.viewer.myRubrics):t(n)})).catch((function(e){t(e)}))}))}},{key:"getGroupActivitySettings",value:function(e){return r.a.query({query:v.c,variables:{activityId:e}})}},{key:"getGroupGradingActivity",value:function(e,t){return r.a.query({query:v.a,variables:{activityId:e,studentId:t}})}},{key:"getIndividualActivitySettings",value:function(e){return r.a.query({query:h.c,variables:{activityId:e}})}},{key:"getIndividualGradingActivity",value:function(e,t){return r.a.query({query:h.a,variables:{activityId:e,studentId:t}})}},{key:"getQAGradingActivity",value:function(e,t){return r.a.query({query:y.a,variables:{activityId:e,studentId:t}})}},{key:"getQAActivitySettings",value:function(e){return r.a.query({query:y.c,variables:{activityId:e}})}},{key:"getInteractiveVideoActivitySettings",value:function(e){return r.a.query({query:g.c,variables:{activityId:e}})}},{key:"getInteractiveVideoGradingActivity",value:function(e,t){return r.a.query({query:g.a,variables:{activityId:e,studentId:t}})}},{key:"editGroupProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:de,variables:{input:{dbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.editGroupProjectActivity.errors;if(t.length)a(t);else{var r=e.data.editGroupProjectActivity.activity;s.a.addSuccess(s.a.getEditedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"createGroupProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:fe,variables:{input:{termClassDbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.createGroupProjectActivity.errors;if(t.length)a(t);else{var r=e.data.createGroupProjectActivity.activity;s.a.addSuccess(s.a.getCreatedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"editIndividualProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:pe,variables:{input:{dbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.editIndividualProjectActivity.errors;if(t.length)a(t);else{var r=e.data.editIndividualProjectActivity.activity;s.a.addSuccess(s.a.getEditedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"editQaProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:he,variables:{input:{dbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.editQuestionAndAnswerActivity.errors;if(t.length)a(t);else{var r=e.data.editQuestionAndAnswerActivity.activity;s.a.addSuccess(s.a.getEditedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"editInteractiveVideoProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:ve,variables:{input:{dbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.editInteractiveVideoActivity.errors;if(t.length)a(t);else{var r=e.data.editInteractiveVideoActivity.activity;s.a.addSuccess(s.a.getEditedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"createIndividualProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:me,variables:{input:{termClassDbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.createIndividualProjectActivity.errors;if(t.length)a(t);else{var r=e.data.createIndividualProjectActivity.activity;s.a.addSuccess(s.a.getCreatedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"createQaProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:be,variables:{input:{termClassDbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.createQuestionAndAnswerActivity.errors;if(t.length)a(t);else{var r=e.data.createQuestionAndAnswerActivity.activity;s.a.addSuccess(s.a.getCreatedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"createInteractiveVideoProject",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:ye,variables:{input:{termClassDbId:e,activity:t}}}).then((function(e){if(e&&e.data){var t=e.data.createInteractiveVideoActivity.errors;if(t.length)a(t);else{var r=e.data.createInteractiveVideoActivity.activity;s.a.addSuccess(s.a.getCreatedAssignmentNotificationContent(r.name)),n(r)}}else a(e)})).catch((function(e){a(e)}))}))}},{key:"getIsGradeDraftAllowed",value:function(e,t){return new Promise((function(n,a){r.a.query({query:le,variables:{activityId:e,studentId:t}}).then((function(e){if(e&&e.data){var t=w.a.get(e,"data.activity.dataForOneStudent.isGradeDraftAllowed",!1);i.a.dispatch(c.jb(t))}else a(e)})).catch((function(e){a(e)}))}))}},{key:"saveGrade",value:function(e,t,n){var a=this;return new Promise((function(o,s){r.a.mutate({mutation:we,variables:{input:{activityDbId:e,studentDbId:t,evaluation:n}}}).then((function(n){if(n&&n.data){var r=n.data.saveEducatorGradeForIndividual.errors;if(r.length)s(r);else{var u=n.data.saveEducatorGradeForIndividual.grade;i.a.dispatch(c.fb(e,t,u)),a.getIsGradeDraftAllowed(e,t),o(u)}}else s(n)})).catch((function(e){s(e)}))}))}},{key:"saveGradeAutoPassFail",value:function(e,t,n,r){var a={completion:n,isDraft:r};return this.saveGrade(e,t,a)}},{key:"saveGradeFiveStar",value:function(e,t,n,r){var a={fiveStarValue:n,isDraft:r};return this.saveGrade(e,t,a)}},{key:"saveGradePassFail",value:function(e,t,n,r){var a={passFail:n,isDraft:r};return this.saveGrade(e,t,a)}},{key:"saveGradePercentage",value:function(e,t,n,r){var a={gradeValue:n,isDraft:r};return this.saveGrade(e,t,a)}},{key:"saveGradeRubric",value:function(e,t,n,r){var a={rubricEvaluation:{rows:n.map((function(e){return{evaluationCell:e}}))},isDraft:r};return this.saveGrade(e,t,a)}},{key:"saveGroupGrade",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:Se,variables:{input:{groupDbId:e,evaluation:t}}}).then((function(t){if(t&&t.data){var r=t.data.saveEducatorGradeForGroup.errors;if(r.length)a(r);else{var o=t.data.saveEducatorGradeForGroup.grade;i.a.dispatch(c.eb(e,o)),n(o)}}else a(t)})).catch((function(e){a(e)}))}))}},{key:"saveGroupGradeAutoPassFail",value:function(e,t,n){var r={completion:t,isDraft:n};return this.saveGroupGrade(e,r)}},{key:"saveGroupGradeFiveStar",value:function(e,t,n){var r={fiveStarValue:t,isDraft:n};return this.saveGroupGrade(e,r)}},{key:"saveGroupGradePassFail",value:function(e,t,n){var r={passFail:t,isDraft:n};return this.saveGroupGrade(e,r)}},{key:"saveGroupGradePercentage",value:function(e,t,n){var r={gradeValue:t,isDraft:n};return this.saveGroupGrade(e,r)}},{key:"saveGroupGradeRubric",value:function(e,t,n){var r={rubricEvaluation:{rows:t.map((function(e){return{evaluationCell:e}}))},isDraft:n};return this.saveGroupGrade(e,r)}},{key:"saveGroupGradePeerReviewOverride",value:function(e,t){var n={peerReviewGradeValue:t};return this.saveGroupGrade(e,n)}},{key:"convertDraftToFinalGroupGrade",value:function(e){return r.a.mutate({mutation:Oe,variables:{input:{groupDbId:e}}}).then((function(e){var t=e.data.convertDraftToFinalGroupGrade.groupId;return i.a.dispatch(c.jb(!1)),i.a.dispatch(c.K(t)),Promise.resolve(t)}))}},{key:"createActivityCommentText",value:function(e,t,n,a){return new Promise((function(o,s){i.a.dispatch(c.Y(!0)),r.a.mutate({mutation:Te,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentText:n,syncTime:a}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityResultComment.comment;i.a.dispatch(c.H(t)),o(t)}else s(e);i.a.dispatch(c.Y(!1))})).catch((function(e){s(e),i.a.dispatch(c.Y(!1))}))}))}},{key:"createActivityCommentMedia",value:function(e,t,n,a){return new Promise((function(o,s){i.a.dispatch(c.Y(!0)),r.a.mutate({mutation:Te,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentMedia:n,syncTime:a}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityResultComment.comment;i.a.dispatch(c.H(t)),o(t)}else s(e);i.a.dispatch(c.Y(!1))})).catch((function(e){s(e),i.a.dispatch(c.Y(!1))}))}))}},{key:"deleteActivityComment",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.Y(!0)),r.a.mutate({mutation:Pe,variables:{input:{dbId:t}}}).then((function(t){if(t&&t.data){var r=t.data.deleteActivityResultComment;i.a.dispatch(c.M(r)),e(r)}else n(t);i.a.dispatch(c.Y(!1))})).catch((function(e){n(e),i.a.dispatch(c.Y(!1))}))}))}},{key:"editFeedbackComment",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.Y(!0)),r.a.mutate({mutation:Ie,variables:{input:{dbId:e,comment:{commentText:t.commentText,commentMedia:t.commentMedia,syncTime:t.syncTime}}}}).then((function(e){if(e&&e.data){var t=e.data.editActivityResultComment.comment;i.a.dispatch(c.S(t)),n(t)}else a(e);i.a.dispatch(c.Y(!1))})).catch((function(e){a(e),i.a.dispatch(c.Y(!1))}))}))}},{key:"deleteActivityResult",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.O(!0)),r.a.mutate({mutation:Ce,variables:{input:{activityDbId:e,submitterDbId:t}}}).then((function(e){e&&e.data?(i.a.dispatch(c.N()),n(e)):a(e),i.a.dispatch(c.O(!1))})).catch((function(e){a(e),i.a.dispatch(c.O(!1))}))}))}},{key:"editGroupName",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.ib(!0)),r.a.mutate({mutation:_e,variables:{input:{dbId:e,name:t}}}).then((function(e){if(e&&e.data){var t=e.data.editActivityStudentGroupTitle.group;i.a.dispatch(c.U(t)),n(t)}else a(e);i.a.dispatch(c.ib(!1))})).catch((function(e){a(e),i.a.dispatch(c.ib(!1))}))}))}},{key:"getCommentPresets",value:function(){return new Promise((function(e,t){i.a.dispatch(c.bb(!0)),r.a.query({query:Ee}).then((function(n){if(n&&n.data){var r=n.data.viewer.commentPresets;i.a.dispatch(c.cb(r)),e(r)}else t(n);i.a.dispatch(c.bb(!1))})).catch((function(e){t(e),i.a.dispatch(c.bb(!1))}))}))}},{key:"createCommentPreset",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.bb(!0)),r.a.mutate({mutation:Ne,variables:{input:{comment:{commentText:e}}}}).then((function(e){if(e&&e.data){var r=e.data.createCommentPreset.comment;i.a.dispatch(c.I(r)),t(r)}else n(e);i.a.dispatch(c.bb(!1))})).catch((function(e){n(e),i.a.dispatch(c.bb(!1))}))}))}},{key:"editCommentPreset",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.bb(!0)),r.a.mutate({mutation:Le,variables:{input:{dbId:e,comment:{commentText:t}}}}).then((function(e){if(e&&e.data){var t=e.data.editCommentPreset;i.a.dispatch(c.T(t)),n(t)}else a(e);i.a.dispatch(c.bb(!1))})).catch((function(e){a(e),i.a.dispatch(c.bb(!1))}))}))}},{key:"deleteCommentPreset",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.bb(!0)),r.a.mutate({mutation:De,variables:{input:{dbId:e}}}).then((function(e){if(e&&e.data){var r=e.data.editCommentPreset;i.a.dispatch(c.P(r)),t(r)}else n(e);i.a.dispatch(c.bb(!1))})).catch((function(e){n(e),i.a.dispatch(c.bb(!1))}))}))}},{key:"createStudentGroups",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.hb(!0)),r.a.mutate({mutation:Re,variables:{input:{activityDbId:e,amount:t}}}).then((function(e){if(e&&e.data){var t=e.data.createStudentGroups.studentGroups;i.a.dispatch(c.L(t)),n(t)}else a(e);i.a.dispatch(c.hb(!1))})).catch((function(e){a(e),i.a.dispatch(c.hb(!1))}))}))}},{key:"deleteStudentGroup",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.hb(!0)),r.a.mutate({mutation:Ae,variables:{input:{dbId:e}}}).then((function(e){if(e&&e.data){var r=e.data.deleteStudentGroup;i.a.dispatch(c.R(r)),t(r)}else n(e);i.a.dispatch(c.hb(!1))})).catch((function(e){n(e),i.a.dispatch(c.hb(!1))}))}))}},{key:"addStudentsToGroup",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.hb(!0)),r.a.mutate({mutation:je,variables:{input:{groupDbId:e,studentDbIds:t}}}).then((function(e){if(e&&e.data){var t=e.data.addStudentsToGroup;i.a.dispatch(c.J(t)),n(t)}else a(e);i.a.dispatch(c.hb(!1))})).catch((function(e){a(e),i.a.dispatch(c.hb(!1))}))}))}},{key:"removeStudentsFromGroup",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.hb(!0)),r.a.mutate({mutation:ke,variables:{input:{groupDbId:e,studentDbIds:t}}}).then((function(e){if(e&&e.data){var t=e.data.removeStudentsFromGroup;i.a.dispatch(c.W(t)),n(t)}else a(e);i.a.dispatch(c.hb(!1))})).catch((function(e){a(e),i.a.dispatch(c.hb(!1))}))}))}},{key:"deleteQAAnswer",value:function(e,t,n,a){return new Promise((function(n,o){i.a.dispatch(c.db(!0)),r.a.mutate({mutation:Me,variables:{input:{questionDbId:e,userDbId:t}}}).then((function(e){if(e&&e.data){var t=e.data.deleteQaAnswerForStudent;a||i.a.dispatch(c.Q(t)),n(t)}else o(e);i.a.dispatch(c.db(!1))})).catch((function(e){o(e),i.a.dispatch(c.db(!1))}))}))}},{key:"releaseGroupEvaluations",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:xe,variables:{input:{groupDbId:e,isReviewAnonymous:t}}}).then((function(e){e&&e.data?(i.a.dispatch(c.nb(Math.floor(+new Date/1e3))),i.a.dispatch(c.lb(t)),n(e)):a(e)})).catch((function(e){a(e)}))}))}},{key:"unreleaseGroupEvaluations",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Fe,variables:{input:{groupDbId:e}}}).then((function(e){e&&e.data?(i.a.dispatch(c.nb(null)),i.a.dispatch(c.lb(null)),t(e)):n(e)})).catch((function(e){n(e)}))}))}},{key:"getResultComments",value:function(e,t){return new Promise((function(n,a){r.a.query({query:se,variables:{activityId:e,studentId:t}}).then((function(e){if(e&&e.data){var t=e.data.activity.dataForOneStudent.result.comments;i.a.dispatch(c.V(t)),n(t)}else a(e)})).catch((function(e){a(e)}))}))}},{key:"copyActivity",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.kb(!0)),r.a.mutate({mutation:Ve,variables:{input:{dbId:e}}}).then((function(e){var r=e.errors;r&&r.length?n(r):e&&e.data?t(e.data.copyActivity.activity):n(e),i.a.dispatch(c.kb(!1))})).catch((function(e){n(e),i.a.dispatch(c.kb(!1))}))}))}},{key:"deleteActivity",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:Ge,variables:{input:{dbId:e}}}).then((function(e){var r=e.errors;r&&r.length?a(r):e&&e.data?(s.a.addSuccess(s.a.getDeletedAssignmentNotificationContent(t)),n(e.data.deleteActivity.removedId)):a(e)})).catch((function(e){a(e)}))}))}}])&&oe(t.prototype,n),a&&oe(t,a),e}();t.a=new ie;var ce=o()(te()),se=o()(ee(),f.b,f.a),ue=o()(J()),le=o()(Z()),de=o()($()),fe=o()(X()),pe=o()(K()),me=o()(z()),be=o()(H()),ye=o()(Y()),ve=o()(Q()),he=o()(B()),ge=o()(W(),m.d),Ee=o()(q(),d.b),we=o()(U(),m.c,p.a),Se=o()(G(),m.c,p.a),Oe=o()(V()),Ce=o()(F()),_e=o()(x()),Te=o()(M(),f.b,f.a),Ie=o()(L(),f.b,f.a),Pe=o()(D()),Re=o()(N()),Ae=o()(k()),je=o()(j()),ke=o()(A()),Ne=o()(R()),De=o()(P()),Le=o()(I()),Me=o()(T()),xe=o()(_()),Fe=o()(C()),Ve=o()(O()),Ge=o()(S())},rOOD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return b}));var r=n("G4qV"),a=n("upk1"),o=Object(r.a)(a.a,(function(e){return e.doublePlayer})),i=function(e,t){return o(e)[t]};function c(e,t,n){var r=i(e,t);return r?r[n]:null}var s=function(e,t){return c(e,t,"deskshareIsActive")},u=function(e,t){return c(e,t,"secondaryVideoX")},l=function(e,t){return c(e,t,"secondaryVideoY")},d=function(e,t){return c(e,t,"secondaryVideoWidth")},f=function(e,t){return c(e,t,"inited")},p=function(e,t){return c(e,t,"inFullScreen")},m=function(e,t){return c(e,t,"isSplitView")},b=function(e,t){return s(e,t)?function(e,t){return c(e,t,"desksharePlayerId")}(e,t):function(e,t){return c(e,t,"webcamPlayerId")}(e,t)}},rZyJ:function(e,t,n){},rchA:function(e,t,n){},rgW0:function(e,t,n){},rgrG:function(e,t,n){e.exports=n.p+"static/media/poweredby-bongo.d8543749.svg"},rklM:function(e,t,n){},rlsJ:function(e,t,n){},rnBV:function(e,t,n){"use strict";t.a={PROGRESS:"ACTIVITY_STATE_PROGRESS",SUBMITTED:"ACTIVITY_STATE_SUBMITTED"}},s6u6:function(e,t,n){},sFEX:function(e,t,n){},sIVs:function(e,t,n){"use strict";var r=n("lTCR"),a=n.n(r),o=n("svEP"),i=n("92Bf"),c=n("O+79"),s=n("eDl9"),u=n("mxsA"),l=n("09Br"),d=n("io3D"),f=n("/KNH");function p(){var e=h(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            gradeType\n            autoGradeScoreSource\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            isVideoAnalysisScoreEnabled\n            autoAnalysisEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorIndividualActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return p=function(){return e},e}function m(){var e=h(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            gradeType\n            autoGradeScoreSource\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubricPeerAllowed\n            studentFivestarValuationEnabled\n            isVideoAnalysisScoreEnabled\n            autoAnalysisEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            rubricSelfAllowed\n            dataForAllStudents {\n                student {\n                    dbId\n                    firstName\n                    lastName\n                }\n                activity {\n                    dbId\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorIndividualActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return m=function(){return e},e}function b(){var e=h(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            commentaryText\n            commentaryMedia {\n                ...MediaFull\n            }\n            gradeType\n            autoGradeScoreSource\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            videoAnalysisKeyTerms {\n                term\n                count\n            }\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            isVideoAnalysisScoreEnabled\n            autoAnalysisEnabled\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            reflectStageSettings {\n                ...ReflectionSettings\n            }\n            executorsType\n            minStudentsAmountInGroup\n            maxStudentsAmountInGroup\n            rubricPeerAllowed\n            rubricSelfAllowed\n            ltiDeepLinking\n            ltiGradeIdentifier\n            ltiGradeSyncEnabled\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            cengageSettings {\n                countTowardsFinalGrade\n                score\n                locked\n                inPath\n            }\n            dataForAllStudents {\n                student {\n                    dbId\n                }\n                result {\n                    submitter {\n                        roles\n                    }\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n                rubricEvaluations {\n                    user {\n                        ...GeneralUser\n                    }\n                    rubric {\n                        ...Rubric\n                    }\n                    points\n                }\n                reflectAnswers {\n                    ...ReflectionAnswersMinimal\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return b=function(){return e},e}function y(){var e=h(["\n    fragment EducatorIndividualActivityStudentData on ActivityStudentData {\n        student {\n            ...EducatorUser\n        }\n        educatorGrade {\n            ...EducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        resultPartialsCreatedCount\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n        reviewedResults {\n            ...ReviewedResult\n        }\n        result {\n            ...EducatorIndividualProjectResult\n        }\n        isGradeDraftAllowed\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return y=function(){return e},e}function v(){var e=h(["\n    fragment EducatorIndividualProjectResult on ActivityResultIndividualProject {\n        submitter {\n            ...EducatorUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        documents {\n            ...Document\n        }\n        links {\n            ...Link\n        }\n        deletable\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return v=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=a()(v(),c.b,c.a,i.d,s.b,s.a,u.b),E=a()(y(),s.b,s.a,s.c,s.d,g,u.b,o.a,l.c,d.b,f.a),w=a()(b(),u.d,o.a,l.d,d.c,i.d,d.a),S=a()(m(),l.d,d.c,o.a,E),O=a()(p(),i.d,l.d,d.c,E),C=n("x1nL");function _(){var e=A(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...IndividualActivity\n            availableResults {\n                ...StudentIndividualProjectResult      \n            }\n            reviewedResults {\n                ...StudentIndividualProjectResult\n            }\n        }\n    }\n    ","\n    ","\n"]);return _=function(){return e},e}function T(){var e=A(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...IndividualActivity\n            availableResults {\n                ...StudentIndividualProjectResult      \n            }\n            reviewedResults {\n                ...StudentIndividualProjectResult\n            }\n        }\n    }\n    ","\n    ","\n"]);return T=function(){return e},e}function I(){var e=A(["\n    fragment IndividualActivity on Activity {\n        dbId\n        name\n        lmsLocked\n        className\n        submitDueAt\n        type\n        deletable\n        allowViewOthersResultsWithoutOwn\n        termClass {\n            ...TermClassBasic\n        }\n        commentaryText\n        commentaryMedia {\n            ...MediaFull\n        }\n        gradeType\n        autoGradeScoreSource\n        instructionsText\n        instructionsMedia {\n            ...MediaFull\n        }\n        rubric {\n            ...Rubric\n        }\n        reflectStageSettings {\n            ...ReflectionSettings\n        }\n        isVideoToolEnabled\n        isDocumentToolEnabled\n        isMeetingToolEnabled\n        isVideoAnalysisScoreEnabled\n        autoAnalysisEnabled\n        isCommentingAnonymous\n        peerReviewSubmitterAnonymous\n        peerReviewType\n        peerReviewAmount\n        peerReviewGradeEnabled\n        peerReviewGradeWeight\n        peerReviewDueAt\n        studentFivestarValuationEnabled\n        rubricPeerAllowed\n        rubricSelfAllowed\n        submittable\n        myData {\n            ...StudentIndividualActivityStudentData\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return I=function(){return e},e}function P(){var e=A(["\n    fragment StudentIndividualActivityStudentData on ActivityStudentData {\n        student {\n            ...StudentUser\n        }\n        educatorGrade {\n            ...StudentEducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        resultPartials {\n            ... on ActivityResultPartialDocument {\n                ...Document\n            }\n            ... on ActivityResultPartialLink {\n                ...Link\n            }\n            ... on ActivityResultPartialMedia {\n                ...MediaPartial\n            }\n            ... on ActivityResultPartialMeeting {\n                ...MeetingPartial\n            }\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n        result {\n            ...StudentIndividualProjectResult\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return P=function(){return e},e}function R(){var e=A(["\n    fragment StudentIndividualProjectResult on ActivityResultIndividualProject {\n        submitter {\n            ...StudentUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        documents {\n            ...Document\n        }\n        links {\n            ...Link\n        }\n        deletable\n        isViewed {\n            value\n        }\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n        myFiveStarRating {\n            value\n        }\n        myRubricEvaluation{\n            ...StudentReviewRubric\n        }\n        reflectAnswers {\n            ...ReflectionAnswers\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return R=function(){return e},e}function A(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=a()(R(),c.b,c.a,i.d,l.e,s.b,s.a,u.c,d.b),k=a()(P(),j,s.b,s.a,s.c,s.d,u.c,o.b,d.b,l.c),N=a()(I(),k,i.d,l.d,d.c,C.b),D=a()(T(),N,j),L=a()(_(),N,j),M=L,x=L;n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return D})),n.d(t,"e",(function(){return M})),n.d(t,"g",(function(){return x}))},sJ7f:function(e,t,n){},sRqO:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("TSYQ"),c=n.n(i),s=n("LFYD"),u=n("8For"),l=n("q8N1"),d=(n("Nj73"),"".concat("video-player-play-button","--icon"));t.a=Object(o.withI18n)()((function(e){var t=e.i18n,n=e.className;return a.a.createElement("div",{id:e.id,className:c()("video-player-play-button",n),onClick:function(t){t.stopPropagation(),e.play()},onKeyDown:Object(l.b)(e.play),role:"button",tabIndex:0,"aria-label":t._("Play Video")},a.a.createElement(u.a,{className:d,ariaLabel:t._("Play Video, icon")},s.a.PLAY))}))},sZpB:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return b}));var r="[Educator library] ",a=r+"Set loading",o=r+"Set list",i=r+"Delete item",c=r+"Set item processing",s=r+"Edit item title",u=r+"Add item to list",l=function(e){return{type:a,payload:e}},d=function(e){return{type:o,payload:e}},f=function(e){return{type:i,payload:e}},p=function(e){return{type:c,payload:e}},m=function(e,t){return{type:s,payload:{id:e,title:t}}},b=function(e){return{type:u,payload:e}}},sjRd:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/W66"),s=n("/MKj"),u=n("ZD0w"),l=n("kbsL"),d=n("iGlQ"),f=n("etP2"),p=n("wRmV"),m=n("UyA7"),b=n("LFYD"),y=n("oe1p"),v=n("H9kt"),h=n("vnhF"),g=n("iFdk"),E=n("HCbP"),w=n("LvDl"),S=n.n(w),O=n("TSYQ"),C=n.n(O),_=(n("hpIK"),n("HNnK")),T=n("Rso3");function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return r=this,o=(e=A(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==I(o)&&"function"!==typeof o?k(r):o,N(k(k(n)),"state",{drawerVisible:!1}),N(k(k(n)),"onNavClick",(function(){n.setState({drawerVisible:!0})})),N(k(k(n)),"closeDrawer",(function(){n.setState({drawerVisible:!1})})),N(k(k(n)),"handleOutsideClick",(function(e){n.navContainer&&!n.navContainer.contains(e.target)&&n.setState({drawerVisible:!1})})),N(k(k(n)),"getNavMenu",(function(){var e=n.props,t=e.hideNavigation,r=e.topNavigationItems,o=e.i18n;return t?null:0===n.getNavDrawerItems().length&&0===r.length?null:a.a.createElement(l.c,{id:"button-navigation-menu",ariaLabel:o._("Menu"),onClick:n.onNavClick},b.a.MENU)})),N(k(k(n)),"getMenuButton",(function(){var e=n.props,t=e.menuOptions,r=e.i18n,o=[];return t&&(o=P(t)),E.a.isHelpVisible()&&(o.length>0&&o.push(a.a.createElement(c.a,{key:"menu_item_divider[help]"})),o.push(a.a.createElement(d.a,{key:"help_menu_item"}))),0===o.length?null:a.a.createElement(l.e,{id:"toolbar-menu-button",icon:!0,menuItems:o,ariaLabel:r._("Menu")},b.a.MENU_VERT)})),N(k(k(n)),"getEducatorNavItems",(function(){var e=n.props,t=e.isD2LFreemium,r=e.i18n;if(!E.a.isEducatorGlobalNavVisible())return[];var a=[];return E.a.isEducatorAssignmentNavigationVisible()&&a.push(h.a.ASSIGNMENTS),E.a.isEducatorMeetingNavigationVisible()&&a.push(h.a.MEETINGS),E.a.isEducatorRubricNavigationVisible()&&a.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}({},h.a.RUBRICS,{enabled:!t,tooltipLabel:t?r._(v.a.FREEMIUM_CONFIG_OPTION):null,tooltipPosition:p.a.RIGHT})),E.a.isEducatorLibraryAvailable()&&a.push(h.a.LIBRARY),E.a.isNotificationsNavigationVisible()&&a.push(h.a.NOTIFICATIONS),E.a.isSettingsNavigationVisible()&&a.push(h.a.SETTINGS),E.a.isTemplateSettingsNavigationVisible()&&a.push(h.a.TEMPLATE_SETTINGS),E.a.isSupportNavigationVisible()&&a.push(h.a.SUPPORT),a})),N(k(k(n)),"getStudentNavItems",(function(){if(!E.a.isStudentGlobalNavVisible())return[];var e=[];return E.a.isStudentAssignmentNavigationVisible()&&e.push(g.a.ASSIGNMENTS),E.a.isStudentMeetingNavigationVisible()&&e.push(g.a.MEETINGS),E.a.isNotificationsNavigationVisible()&&e.push(g.a.NOTIFICATIONS),E.a.isSettingsNavigationVisible()&&e.push(g.a.SETTINGS),E.a.isSupportNavigationVisible()&&e.push(g.a.SUPPORT),e})),N(k(k(n)),"localizeNavItems",(function(e){var t=n.props.i18n;return S.a.map(e,(function(e){return S.a.assign({},e,{label:t._(e.label)})}))})),N(k(k(n)),"getNavDrawerItems",(function(){var e=n.props.navigationDrawerType,t=[];return e===y.b.EDUCATOR?t=n.getEducatorNavItems():e===y.b.STUDENT&&(t=n.getStudentNavItems()),n.localizeNavItems(t)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"render",value:function(){var e=this,t=this.state.drawerVisible,n=this.props,r=n.actions,o=n.activityId,i=n.classId,c=n.navigationDrawerType,s=n.topNavigationItems,u=n.title,l=this.getNavDrawerItems(),d=[];return r&&(d=P(r)),d.push(this.getMenuButton()),d=S.a.compact(d),a.a.createElement("div",{ref:function(t){return e.navContainer=t}},a.a.createElement(T.a,null),a.a.createElement(f.a,{className:C()(this.props.className),nav:E.a.isHamburgerMenuAllowed()?this.getNavMenu():null,actions:d,title:u},this.props.children),a.a.createElement(y.c,{key:"nav_drawer",activityId:o,classId:i,onClose:this.closeDrawer,navigationItems:l,topNavigationItems:s,type:c,visible:t}))}}])&&R(n.prototype,r),o&&R(n,o),t}(r.Component);D.propTypes={activityId:i.a.number,actions:i.a.array,classId:i.a.number,hideNavigation:i.a.bool,menuOptions:i.a.array,navigationDrawerType:i.a.string,title:i.a.any,topNavigationItems:i.a.array},D.defaultProps={actions:[],hideNavigation:!1,menuOptions:[],topNavigationItems:[]};t.a=Object(u.withI18n)()(Object(s.b)((function(e){return{isD2LFreemium:m.s(e),ltiScope:m.j(e),currentUser:_.h(e),institution:m.h(e),termClass:m.k(e)}}))(D))},slDY:function(e,t,n){},svEP:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var r=n("lTCR"),a=n.n(r),o=n("09Br"),i=n("mxsA");function c(){var e=d(["\n    fragment StudentEducatorGrade on EducatorGrade {\n        passFail\n        completion\n        gradeValue\n        fiveStarValue\n        rubricGrade\n        overallValue\n        gradeParts {\n          ...GradePart\n        }\n    }\n    ","\n"]);return c=function(){return e},e}function s(){var e=d(["\n    fragment EducatorGrade on EducatorGrade {\n        passFail\n        completion\n        gradeValue\n        fiveStarValue\n        overallValue\n        gradeParts {\n          ...GradePart\n        }\n        myRubricEvaluation {\n          ...RubricEvaluation\n        }\n        isDraft\n    }\n    ","\n    ","\n"]);return s=function(){return e},e}function u(){var e=d(["\n    fragment GradePart on GradePart {\n        weight\n        partValue\n        autoValue\n        type\n        evaluationType\n        evaluations {\n            ...Evaluation\n        }\n    }\n    ","\n"]);return u=function(){return e},e}function l(){var e=d(["\n    fragment Evaluation on Evaluation {\n        value\n        user {\n            ...GeneralUser\n        }\n        # rubric {\n        #     ...RubricEvaluation\n        # }\n    }\n    ","\n    # ","\n"]);return l=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=a()(l(),i.d,o.c),p=a()(u(),f),m=a()(s(),o.c,p),b=a()(c(),p)},szwm:function(e,t,n){"use strict";t.a={ACTIVITY_RESULT:"TYPE__ACTIVITY_RESULT",ACTIVITY_FEEDBACK:"TYPE__ACTIVITY_RESULT_FEEDBACK",COMMENT:"TYPE__COMMENT",LIBRARY:"TYPE__LIBRARY",PROFILE:"TYPE__PROFILE"}},t4gB:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("iGlQ"),u=n("s/Ur"),l=n.n(u),d=n("TSYQ"),f=n.n(d),p=n("LvDl"),m=n.n(p);n("qisB");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v="data-table";function h(e){var t=e.id?"".concat(e.id,"--data-table"):"";return a.a.createElement(c.k,y({},function(e){return m.a.pick(e,Object.keys(g.componentProps))}(e),{id:t,className:f()(v,e.className),baseId:t||"data-table",summary:e.tableSummary}),function(e){var t=e.id?"".concat(e.id,"--data-table-header"):"";return a.a.createElement(c.N,{id:t},a.a.createElement(c.P,null,e.columns.map((function(e,t){var n={},r=!1;return e.grow&&(r=e.grow),e.width&&(n.width=e.width),a.a.createElement(c.M,{grow:r,key:t,style:n,className:e.headerClassName,sorted:e.sorted,onClick:e.onClick},e.label)}))))}(e),function(e){var t=e.id?"".concat(e.id,"--data-table-body"):"";return a.a.createElement(c.L,{id:t},e.data.map((function(t,n){return a.a.createElement(c.P,{key:n},e.columns.map((function(e,r){return e.width&&e.width,e.isCustomColumn?e.renderer(t,n+"_"+r):a.a.createElement(c.M,{key:r,className:e.className},e.renderer?e.renderer(t,n+"_"+r):t[e.accessor])})))})))}(e),e.footer)}var g=function(e){var t=e.className,n=e.hasMobileListView,r=e.id?"".concat(e.id,"--data-table-wrapper"):"";return a.a.createElement("div",{id:r},n?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{query:"(min-width: 701px)"},h(e)),a.a.createElement(l.a,{query:"(max-width: 700px)"},a.a.createElement("div",{className:f()(v,t)},function(e){var t=e.id?"".concat(e.id,"--data-table"):"",n=m.a.find(e.columns,(function(t){return t.accessor===e.listAccessor}));return a.a.createElement("div",null,a.a.createElement(s.b,{id:t,className:"table-column-list-wrap"},e.data.map((function(t,r){return a.a.createElement(s.c,{className:"table-column-list",key:r,leftIcon:n&&n.getListLeftIcon?n.getListLeftIcon(t):null,onClick:function(){e.onListRowSelect(t)},primaryText:t[e.listAccessor]})}))))}(e)))):h(e))};g.defaultProps={selectableRows:!1,hasMobileListView:!0,footer:null},g.componentProps={bodyClassName:i.a.string,className:i.a.string,selectableRows:i.a.bool},g.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},g.passThroughProps,{id:i.a.string,columns:i.a.array.isRequired,data:i.a.array.isRequired,headerClassName:i.a.string,listAccessor:i.a.string.isRequired,onListRowSelect:i.a.func,hasMobileListView:i.a.bool,tableSummary:i.a.string,footer:i.a.object}),t.a=g},t6et:function(e,t,n){},tE7O:function(e,t,n){},tPwa:function(e,t,n){},tS7S:function(e,t,n){},tY0J:function(e,t,n){},tdQW:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("ZD0w"),u=n("TSYQ"),l=n.n(u),d=n("LvDl"),f=n.n(d),p=n("qSfp");n("1CkY");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){return f.a.pick(e,Object.keys(v.componentProps))}var v=function(e){var t=e.i18n,n=f.a.merge({},e);return n.raised=!n.flat,a.a.createElement(c.u,b({},y(n),{className:l()("input-file",n.className),labelClassName:Object(p.c)(n,l()(n.labelClassName,"input-file-button")),disabled:!n.enabled,label:t._("Select a file")}),n.children)};v.componentProps={className:i.a.string,onChange:i.a.func,flat:i.a.bool,id:i.a.string,labelClassName:i.a.string,name:i.a.string,primary:i.a.bool,secondary:i.a.bool},v.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},v.componentProps,{enabled:i.a.bool}),v.defaultProps={enabled:!0},t.a=Object(s.withI18n)()(v)},tdhA:function(e,t,n){},te1l:function(e,t,n){e.exports=n.p+"static/media/poweredby-bongo-text.cafb77b1.svg"},tslA:function(e,t,n){e.exports=n.p+"static/config/features.json"},u3PK:function(e,t,n){},u4EO:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o);n("slDY");function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.loading;return a.a.createElement("div",{className:"loader"},this.props.children,e?a.a.createElement("div",{className:"loader-overlay"},a.a.createElement("div",{className:"loader-spinner"})):null)}}])&&s(n.prototype,r),o&&s(n,o),t}(r.Component);f.propTypes={loading:i.a.bool.isRequired}},"u90/":function(e,t,n){},uVrG:function(e,t,n){},uaEo:function(e,t,n){"use strict";var r=n("Wtf/"),a=2048,o=n("HNnK"),i=n("IF/7"),c=n("wNa6"),s=n("LvDl"),u=n.n(s);n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return w})),n.d(t,"f",(function(){return C}));var l="TYPE_REVIEWER_USER",d="TYPE_REVIEWEE_USER",f="TYPE_REVIEWEE_GROUP",p={},m={},b={};function y(e){var t=c.a.getState(),n=Object(o.h)(t);return!Object(i.b)(n)&&(!Object(i.b)(e)&&(Object(o.i)(t)!==e.dbId&&r.isReviewerAnonymous(t)))}var v=function(e,t,n){var r=e.completedBy;return E(n,r,t)},h=function(e,t){var n=e.completedBy;return E(t,n,y(n))},g=function(e,t){var n=e.commenter;return E(t,n,y(n))},E=function(e,t,n){var r=null;return t&&(r=n?O(t.dbId,l,e):S(t,e)),r||e._("Anonymous Reviewer")},w=function(e,t){var n=e.activityStudentGroup,a=e.submitter,s=function(){var e=c.a.getState(),t=Object(o.h)(e);return!Object(i.b)(t)&&r.isSubmitterAnonymous(e)}(),u=null;return n?u=s?O(n.dbId,f,t):function(e){if(e)return e.name;return null}(n):a&&(u=s?O(a.dbId,d,t):S(a,t)),u||t._("Anonymous Submission")};function S(e,t){if(e){var n=e.firstName,r=e.lastName;if(n||r)return t._("{firstName} {lastName}",{firstName:n,lastName:r})}return null}function O(e,t,n){if(e){var r={};switch(t){case l:r=p;break;case d:r=m;break;case f:r=b}var a=r[e];if(!a){var o=u.a.keys(r).length+1;switch(t){case l:a=n._("Reviewer {anonymousNumber}",{anonymousNumber:o});break;case d:case f:a=n._("Submission {anonymousNumber}",{anonymousNumber:o})}r[e]=a}return a}return null}function C(e){var t=u.a.trim(e).length<1,n=e.length>a;return{isEmpty:t,exceedsLimit:n,maxLength:a,isValid:!n&&!t}}},ul3U:function(e,t,n){"use strict";var r=n("lTCR"),a=n.n(r),o=n("svEP"),i=n("92Bf"),c=n("mxsA"),s=n("09Br"),u=n("O+79");function l(){var e=f(["\n    fragment InteractiveVideoQuestionVideo on InteractiveQuestionOfTypeVideo {\n        dbId\n        questionText\n        showTime\n        orderNumber\n    }\n"]);return l=function(){return e},e}function d(){var e=f(["\n    fragment InteractiveVideoQuestionMultipleChoice on InteractiveQuestionOfTypeChoice {\n        dbId\n        questionText\n        showTime\n        orderNumber\n        score\n        options {\n            dbId\n            optionText\n        }\n    }\n"]);return d=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p=a()(d()),m=a()(l()),b=n("/KNH");function y(){var e=C(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            groupReviewType\n            type\n            termClass {\n                dbId\n            }\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubricPeerAllowed\n            rubricSelfAllowed\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorInteractiveVideoActivityStudentData\n            }\n            interactiveVideoSettings {\n                isRetakeRequired\n                isSubmissionSummaryVisible\n                media {\n                    ...MediaBasic\n                }\n            }\n            interactiveQuestions {\n                __typename\n                dbId\n                orderNumber\n                questionText\n                showTime\n                ... on InteractiveQuestionOfTypeChoice {\n                    # rewindTime\n                    score\n                    options {\n                        __typename\n                        dbId\n                        optionText\n                        ... on InteractiveQuestionOptionFull {\n                            optionDescription\n                            correct\n                        }\n                    }\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return y=function(){return e},e}function v(){var e=C(["\n    query getActivityData($activityId: Int!, $studentId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            gradeType\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubricPeerAllowed\n            rubricSelfAllowed\n            studentFivestarValuationEnabled\n            rubric {\n                ...Rubric\n            }\n            dataForAllStudents {\n                student {\n                    dbId\n                    firstName\n                    lastName\n                }\n                activity {\n                    dbId\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n            }\n            dataForOneStudent(studentDbId: $studentId) {\n                ...EducatorInteractiveVideoActivityStudentData\n            }\n        }\n    }\n    ","\n    ","\n    ","\n"]);return v=function(){return e},e}function h(){var e=C(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            submitDueAt\n            type\n            termClass {\n                dbId\n            }\n            commentaryText\n            commentaryMedia {\n                ...MediaFull\n            }\n            gradeType\n            instructionsText\n            instructionsMedia {\n                ...MediaFull\n            }\n            isVideoToolEnabled\n            isDocumentToolEnabled\n            isMeetingToolEnabled\n            peerReviewType\n            peerReviewAmount\n            peerReviewGradeEnabled\n            peerReviewGradeWeight\n            peerReviewDueAt\n            rubric {\n                ...Rubric\n            }\n            executorsType\n            minStudentsAmountInGroup\n            maxStudentsAmountInGroup\n            rubricPeerAllowed\n            rubricSelfAllowed\n            studentFivestarValuationEnabled\n            ltiDeepLinking\n            ltiGradeIdentifier\n            ltiGradeSyncEnabled\n            allowViewOthersResultsWithoutOwn\n            isCommentingAnonymous\n            peerReviewSubmitterAnonymous\n            cengageSettings {\n                countTowardsFinalGrade\n                score\n                locked\n                inPath\n            }\n            dataForAllStudents {\n                student {\n                    dbId\n                }\n                result {\n                    submitter {\n                        roles\n                    }\n                }\n                educatorGrade {\n                    ...EducatorGrade\n                }\n                rubricEvaluations {\n                    user {\n                        ...GeneralUser\n                    }\n                    rubric {\n                        ...Rubric\n                    }\n                    points\n                }\n                interactiveAnswers {\n                    __typename\n                    # No need to get real data, just need to determine if an answer has been recorded\n                }\n            }\n            ...EducatorInteractiveVideoConfiguration\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return h=function(){return e},e}function g(){var e=C(["\n    fragment EducatorInteractiveVideoActivityStudentData on ActivityStudentData {\n        student {\n            ...EducatorUser\n        }\n        educatorGrade {\n            ...EducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        reviewedResults {\n            ...ReviewedResult\n        }\n        result {\n            ...EducatorInteractiveVideoProjectResult\n        }\n        isGradeDraftAllowed\n        interactiveAnswers {\n            ...EducatorInteractiveVideoAnswerMultipleChoice\n            ...EducatorInteractiveVideoAnswerVideo\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return g=function(){return e},e}function E(){var e=C(["\n    fragment EducatorInteractiveVideoProjectResult on ActivityResultInteractiveVideo {\n        submitter {\n            ...EducatorUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        deletable\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return E=function(){return e},e}function w(){var e=C(["\n    fragment EducatorInteractiveVideoConfiguration on Activity {\n        interactiveVideoSettings {\n            isRetakeRequired\n            isSubmissionSummaryVisible\n            media {\n                ...MediaBasic\n            }\n        }\n        interactiveQuestions {\n            __typename\n            dbId\n            orderNumber\n            questionText\n            showTime\n            ... on InteractiveQuestionOfTypeChoice {\n                # rewindTime\n                score\n                options {\n                    __typename\n                    dbId\n                    optionText\n                    ... on InteractiveQuestionOptionFull {\n                        optionDescription\n                        correct\n                    }\n                }\n            }\n        }\n    }\n    ","\n"]);return w=function(){return e},e}function S(){var e=C(["\n    fragment EducatorInteractiveVideoAnswerVideo on InteractiveAnswerOfTypeVideo {\n        question {\n            ...InteractiveVideoQuestionMultipleChoice\n            ...InteractiveVideoQuestionVideo\n        }\n        submitter {\n            ...EducatorUser\n        }\n        media {\n            ...MediaFull\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return S=function(){return e},e}function O(){var e=C(["\n    fragment EducatorInteractiveVideoAnswerMultipleChoice on InteractiveAnswerOfTypeChoice {\n        question {\n            ...InteractiveVideoQuestionMultipleChoice\n            ...InteractiveVideoQuestionVideo\n        }\n        submitter {\n            ...EducatorUser\n        }\n        option {\n            dbId\n            optionText\n            optionDescription\n            correct\n        }\n    }\n    ","    \n    ","\n    ","\n"]);return O=function(){return e},e}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=a()(O(),c.b,p,m),T=a()(S(),i.d,c.b,p,m),I=a()(w(),i.b),P=a()(E(),u.b,u.a,i.d,c.b),R=a()(g(),P,c.b,o.a,s.c,_,T,b.a),A=a()(h(),c.d,o.a,s.d,i.d,I),j=a()(v(),s.d,o.a,R),k=a()(y(),s.d,i.b,i.d,R),N=n("x1nL");function D(){var e=G(["\n    query getActivityData($activityId: Int!) {\n        activity(dbId: $activityId) {\n            ...InteractiveVideoActivity\n            availableResults {\n                ...StudentInteractiveVideoProjectResult\n            }\n            reviewedResults {\n                ...StudentInteractiveVideoProjectResult\n            }\n        }\n    }\n    ","\n    ","\n"]);return D=function(){return e},e}function L(){var e=G(["\n    fragment InteractiveVideoActivity on Activity {\n        dbId\n        name\n        lmsLocked\n        className\n        submitDueAt\n        type\n        allowViewOthersResultsWithoutOwn\n        termClass {\n            ...TermClassBasic\n        }\n        commentaryText\n        commentaryMedia {\n            ...MediaFull\n        }\n        gradeType\n        instructionsText\n        instructionsMedia {\n            ...MediaFull\n        }\n        rubric {\n            ...Rubric\n        }\n        peerReviewType\n        peerReviewAmount\n        peerReviewGradeEnabled\n        peerReviewGradeWeight\n        peerReviewDueAt\n        isCommentingAnonymous\n        peerReviewSubmitterAnonymous\n        studentFivestarValuationEnabled\n        rubricPeerAllowed\n        rubricSelfAllowed\n        interactiveVideoSettings {\n            isRetakeRequired\n            isSubmissionSummaryVisible\n            media {\n                ...MediaBasic\n            }\n        }\n        interactiveQuestions {\n            ...InteractiveVideoQuestionMultipleChoice\n            ...InteractiveVideoQuestionVideo\n        }\n        submittable\n        myData {\n            ...StudentInteractiveVideoActivityStudentData\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return L=function(){return e},e}function M(){var e=G(["\n    fragment StudentInteractiveVideoActivityStudentData on ActivityStudentData {\n        student {\n            ...StudentUser\n        }\n        educatorGrade {\n            ...StudentEducatorGrade\n        }\n        peerReview {\n            fiveStarValue\n            fiveStarRatesAmount\n            rubricGrade\n        }\n        interactiveVideoWatchingFinishedAt\n        interactiveAnswers {\n            ...StudentInteractiveVideoAnswerMultipleChoice\n            ...StudentInteractiveVideoAnswerVideo\n        }\n        rubricEvaluations {\n            ...RubricEvaluation\n        }\n        result {\n            ...StudentInteractiveVideoProjectResult\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return M=function(){return e},e}function x(){var e=G(["\n    fragment StudentInteractiveVideoProjectResult on ActivityResultInteractiveVideo {\n        submitter {\n            ...StudentUser\n        }\n        submittedAt\n        media {\n            ...MediaFull\n        }\n        deletable\n        isViewed {\n            value\n        }\n        comments {\n            ...Comment\n            ...AnonymousComment\n        }\n        myFiveStarRating {\n            value\n        }\n        myRubricEvaluation{\n            ...StudentReviewRubric\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return x=function(){return e},e}function F(){var e=G(["\n    fragment StudentInteractiveVideoAnswerVideo on InteractiveAnswerOfTypeVideo {\n        question {\n            ...InteractiveVideoQuestionMultipleChoice\n            ...InteractiveVideoQuestionVideo\n        }\n        submitter {\n            ...StudentUser\n        }\n        media {\n            ...MediaFull\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return F=function(){return e},e}function V(){var e=G(["\n    fragment StudentInteractiveVideoAnswerMultipleChoice on InteractiveAnswerOfTypeChoice {\n        question {\n            ...InteractiveVideoQuestionMultipleChoice\n            ...InteractiveVideoQuestionVideo\n        }\n        submitter {\n            ...StudentUser\n        }\n        option {\n            dbId\n            optionText\n            optionDescription\n            correct\n        }\n    }\n    ","    \n    ","\n    ","\n"]);return V=function(){return e},e}function G(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var U=a()(V(),c.c,p,m),q=a()(F(),i.d,c.c,p,m),W=a()(x(),u.b,u.a,i.d,c.c,s.e),B=a()(M(),W,c.c,o.b,s.c,U,q),Q=a()(L(),B,i.b,i.d,s.d,N.b,p,m),Y=a()(D(),Q,W),H=Y,z=Y;n.d(t,"c",(function(){return A})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return U})),n.d(t,"e",(function(){return q})),n.d(t,"h",(function(){return W})),n.d(t,"f",(function(){return Y})),n.d(t,"g",(function(){return H})),n.d(t,"i",(function(){return z}))},upk1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.common}},upoK:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("xrVw"),i=n("17x9"),c=n.n(i),s=n("4XMt"),u=n("LvDl"),l=n.n(u),d=n("TSYQ"),f=n.n(d);n("y54d");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){return l.a.pick(e,Object.keys(y.componentProps))}var y=function(e){return a.a.createElement(o.z,m({},b(e),{className:f()("list-item",e.className),"aria-label":e.ariaLabel,disabled:!e.enabled,onClick:function(t){return function(e,t){t.onClick&&t.onClick(t.data)}(0,e)},tileProps:{id:e.id}}),e.children)};y.componentProps={active:c.a.bool,className:c.a.string,headerClassName:c.a.string,itemProps:c.a.object,leftAvatar:c.a.element,leftIcon:c.a.object,onClick:c.a.func,primaryText:c.a.any,rightIcon:c.a.object,secondaryText:c.a.string},y.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},y.componentProps,{ariaLabel:c.a.string,data:c.a.object,enabled:c.a.bool,id:c.a.string}),y.defaultProps={enabled:!0,primaryText:"(unknown)",selectableRows:!1},t.a=Object(s.c)(y)},uqCR:function(e,t,n){},uvcT:function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("p7mv"),c=n("wNa6"),s=n("8bCP");function u(){var e=d(["\n    query getNavigation($termClassDbId: Int!, $activityDbId: Int!) {\n        navigation(termClassDbId: $termClassDbId, activityDbId: $activityDbId) {\n            identifier\n            path\n        }\n    }\n"]);return u=function(){return e},e}function l(){var e=d(["\n    query getNavigation($termClassDbId: Int!) {\n        navigation(termClassDbId: $termClassDbId) {\n            identifier\n            path\n        }\n    }\n"]);return l=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getNavigationItems",value:function(e){return c.a.dispatch(i.c(!0)),r.a.query({query:m,variables:{termClassDbId:e},fetchPolicy:"network-only"}).then((function(e){c.a.dispatch(i.c(!1)),c.a.dispatch(i.d(e.data.navigation))})).catch((function(e){c.a.dispatch(i.c(!1)),s.b.error(e)}))}},{key:"getActivityNavigationItems",value:function(e,t){return c.a.dispatch(i.c(!0)),r.a.query({query:b,variables:{termClassDbId:e,activityDbId:t},fetchPolicy:"network-only"}).then((function(e){c.a.dispatch(i.c(!1)),c.a.dispatch(i.d(e.data.navigation))})).catch((function(e){c.a.dispatch(i.c(!1)),s.b.error(e)}))}}])&&f(t.prototype,n),a&&f(t,a),e}(),m=o()(l()),b=o()(u());t.a=new p},uxn8:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n("LvDl"),a=n.n(r),o=n("8bCP");function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){return 0===t?e.slice(1):t===e.length-1?e.slice(0,-1):t>=e.length?(o.b.warn("ReduxHelpers -> removeFromArray::: Can't remove array item with index larger that array length"),e):t<0?(o.b.warn("ReduxHelpers -> removeFromArray::: Can't remove array item with index less that zero"),e):[].concat(i(e.slice(0,t)),i(e.slice(t+1)))}function s(e,t,n){var r=-1;return a.a.each(e,(function(e,o){a.a.get(e,n)===a.a.get(t,n)&&(r=o)})),r}function u(e,t,n){var r=s(e,n,t);return-1===r?(o.b.warn("ReduxHelpers -> removeFromArrayOfObjects::: Can't remove object that doesn't exist in array"),e):c(e,r)}function l(e,t,n){return[].concat(i(e.slice(0,n)),[t],i(e.slice(n)))}function d(e,t,n){var r=e[t];return l(e=c(e,t),r,n)}},v6po:function(e,t,n){"use strict";t.a={ACTIVITY_OVERVIEW:"ACTIVITY_OVERVIEW",ACTIVITY_COMMENTARY:"ACTIVITY_COMMENTARY",DIRECT_LIBRARY:"DIRECT_LIBRARY",STUDENT_RESULT:"STUDENT_RESULT",STUDENT_RESULT_PARTIAL:"STUDENT_RESULT_PARTIAL",QA_QUESTION:"QA_QUESTION",INTERACTIVE_VIDEO:"INTERACTIVE_VIDEO",COMMENT:"COMMENT"}},vCeT:function(e,t,n){"use strict";t.a={INITIALIZED:"INITIALIZED",STREAM_ADDED:"STREAM_ADDED",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPED:"RECORDING_STOPPED",RECORDING_PAUSED:"RECORDING_PAUSED",RECORDING_RESUMED:"RECORDING_RESUMED",PREVIEW_IS_READY:"PREVIEW_IS_READY",UPLOADING_PROGRESS:"UPLOADING_PROGRESS",UPLOAD_FINISHED:"UPLOAD_FINISHED",NOTIFICATION:"NOTIFICATION",REQUEST_NEW_STREAMS:"REQUEST_NEW_STREAMS",RESET_STREAMS:"RESET_STREAMS"}},vlAY:function(e,t,n){},vnhF:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n("LFYD"),a=n("2bAp"),o=n("ZD0w"),i=n("BulX"),c=n("LvDl"),s=n.n(c),u=["label","ariaLabel","iconAriaLabel","breadcrumbLabel"],l=!1;function d(e){if(!l){for(var t=s.a.keys(f),n=function(n){var r=t[n],a=f[r];a&&s.a.forEach(u,(function(t){a[t]&&(a[t]=e._(a[t]))}))},r=0;r<t.length;r++)n(r);l=!0}}var f={ASSIGNMENTS:{identifier:"activities-list",label:Object(o.i18nMark)("Assignments"),icon:r.a.ASSIGNMENTS,ariaLabel:Object(o.i18nMark)("Assignments"),iconAriaLabel:Object(o.i18nMark)("Assignments, icon"),route:i.f.EDUCATOR_ACTIVITY_LIST},CONFIGURATION:{identifier:"configuration",label:Object(o.i18nMark)("Configuration"),breadcrumbLabel:Object(o.i18nMark)("Configure Assignment"),icon:r.a.SETTINGS,ariaLabel:Object(o.i18nMark)("Configuration"),iconAriaLabel:Object(o.i18nMark)("Configuration, icon")},CONFIGURATION_NEW:{identifier:"configuration",label:Object(o.i18nMark)("Configuration"),breadcrumbLabel:Object(o.i18nMark)("Configure Assignment"),icon:r.a.SETTINGS,ariaLabel:Object(o.i18nMark)("Configuration"),iconAriaLabel:Object(o.i18nMark)("Configuration, icon")},D2L_QUICK_LINK_ACTIVITY_LIST:{identifier:"d2l_quick_link_activity_list"},GRADEBOOK:{identifier:"activity-gradebook",label:Object(o.i18nMark)("Gradebook"),icon:r.a.GRADEBOOK,ariaLabel:Object(o.i18nMark)("Gradebook"),iconAriaLabel:Object(o.i18nMark)("Gradebook, icon")},GRADING:{identifier:"grading",label:Object(o.i18nMark)("Grading"),icon:r.a.GRADE,ariaLabel:Object(o.i18nMark)("Grading"),iconAriaLabel:Object(o.i18nMark)("Grading, icon")},GROUPS:{identifier:"manage_groups",label:Object(o.i18nMark)("Manage groups"),icon:r.a.GROUP,ariaLabel:Object(o.i18nMark)("Manage groups"),iconAriaLabel:Object(o.i18nMark)("Manage groups, icon")},LIBRARY:{identifier:"library",label:Object(o.i18nMark)("Library"),icon:r.a.LIBRARY,ariaLabel:Object(o.i18nMark)("Library"),iconAriaLabel:Object(o.i18nMark)("Library, icon"),route:i.f.EDUCATOR_LIBRARY},LTI_IGNORE_LIST:{identifier:"lti-ignore-list",label:Object(o.i18nMark)("LTI Ignore List"),icon:"",ariaLabel:Object(o.i18nMark)("LTI Ignore List"),iconAriaLabel:Object(o.i18nMark)("LTI Ignore List, icon")},MEETINGS:{identifier:"meetings-list",label:Object(o.i18nMark)("Meetings"),iconClassName:a.a.CALENDAR,ariaLabel:Object(o.i18nMark)("Meetings"),iconAriaLabel:Object(o.i18nMark)("Meetings, icon"),route:i.f.EDUCATOR_MEETINGS},PROGRESS:{identifier:"student_progress",label:Object(o.i18nMark)("Progress"),iconClassName:r.a.PERSON,ariaLabel:Object(o.i18nMark)("Progress"),iconAriaLabel:Object(o.i18nMark)("Progress, icon")},RUBRICS:{identifier:"rubrics",label:Object(o.i18nMark)("Rubrics"),breadcrumbLabel:Object(o.i18nMark)("Rubrics"),icon:r.a.RUBRIC,ariaLabel:Object(o.i18nMark)("Rubrics"),iconAriaLabel:Object(o.i18nMark)("Rubrics, icon"),route:i.f.EDUCATOR_RUBRICS_LIST},RUBRICS_COPY:{identifier:"rubrics_copy",label:Object(o.i18nMark)("Copy rubric"),breadcrumbLabel:Object(o.i18nMark)("Copy Rubric"),iconClassName:r.a.RUBRIC,ariaLabel:Object(o.i18nMark)("Copy rubric"),iconAriaLabel:Object(o.i18nMark)("Copy rubric, icon")},RUBRICS_CREATE:{identifier:"rubrics_create",label:Object(o.i18nMark)("Create rubric"),breadcrumbLabel:Object(o.i18nMark)("Create Rubric"),iconClassName:r.a.RUBRIC,ariaLabel:Object(o.i18nMark)("Create rubric"),iconAriaLabel:Object(o.i18nMark)("Create rubric, icon")},RUBRICS_EDIT:{identifier:"rubrics_edit",label:Object(o.i18nMark)("Edit rubric"),breadcrumbLabel:Object(o.i18nMark)("Edit Rubric"),iconClassName:r.a.RUBRIC,ariaLabel:Object(o.i18nMark)("Edit rubric"),iconAriaLabel:Object(o.i18nMark)("Edit rubric, icon")},RUBRICS_IMPORT:{identifier:"rubrics_import",label:Object(o.i18nMark)("Import rubric"),breadcrumbLabel:Object(o.i18nMark)("Import Rubric"),iconClassName:r.a.RUBRIC,ariaLabel:Object(o.i18nMark)("Import rubric"),iconAriaLabel:Object(o.i18nMark)("Import rubric, icon")},SUPPORT:{identifier:"help",label:Object(o.i18nMark)("Support"),icon:r.a.SUPPORT,ariaLabel:Object(o.i18nMark)("Support"),iconAriaLabel:Object(o.i18nMark)("Support, icon")},ACTIVITY_CREATE:{identifier:"activity-create-old-ui"},SETTINGS:{identifier:"settings",label:Object(o.i18nMark)("Settings"),icon:r.a.CONFIGURE,ariaLabel:Object(o.i18nMark)("Settings"),iconAriaLabel:Object(o.i18nMark)("Settings, icon"),route:i.f.EDUCATOR_SETTINGS},NOTIFICATIONS:{identifier:"notifications",label:Object(o.i18nMark)("Notifications"),icon:r.a.ANNOUNCEMENT,ariaLabel:Object(o.i18nMark)("Notifications"),iconAriaLabel:Object(o.i18nMark)("Notifications, icon"),route:i.f.EDUCATOR_NOTIFICATIONS},TEMPLATE_SETTINGS:{identifier:"template-settings",label:Object(o.i18nMark)("Template settings"),icon:r.a.EDIT,ariaLabel:Object(o.i18nMark)("Template settings"),iconAriaLabel:Object(o.i18nMark)("Template settings, icon"),route:i.f.EDUCATOR_TEMPLATE_SETTINGS},TRIAL:{identifier:"trial",label:Object(o.i18nMark)("Trial"),icon:r.a.TIMER,ariaLabel:Object(o.i18nMark)("Trial"),iconAriaLabel:Object(o.i18nMark)("Trial, icon"),route:i.f.TRIAL}};t.a=f},w8M0:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=n("LvDl"),d=n.n(l);n("aapZ");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e){return a.a.createElement(c.p,p({},function(e){return d.a.pick(e,Object.keys(m.componentProps))}(e),{className:u()("drawer",e.className)}),e.children)};m.DrawerTypes=c.p.DrawerTypes,m.componentProps={className:i.a.string,header:i.a.any,navItems:i.a.any,onMediaTypeChange:i.a.func,onVisibilityChange:i.a.func,overlay:i.a.bool,position:i.a.string,transitionDuration:i.a.number,type:i.a.any,visible:i.a.bool},m.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},m.componentProps),m.defaultProps={visible:!1,overlay:!0,transitionDuration:0,type:c.p.DrawerTypes.TEMPORARY};var b=m;n.d(t,"a",(function(){return b}))},"wGj+":function(e,t,n){},wJfn:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("ZD0w"),i=n("yzbm"),c=n("LvDl"),s=n.n(c),u=n("LFYD"),l=n("hu4m"),d=n("kbsL"),f=n("8For"),p=n("2Gxn"),m=n("P/HN"),b=n("iGlQ"),y=n("/W66"),v=n("lLLA"),h=n.n(v),g=n("TSYQ"),E=n.n(g),w=n("giI2"),S=n("upoK");n("PcDh");function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C,_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addLeadingZero",value:function(e){return e<10?"0"+e:""+e}},{key:"getUploadSpeedString",value:function(e){(e<0||!isFinite(e))&&(e=0);var t=Math.round(e/1024);return isFinite(e)||(t=0),t<1e3?t+" Kb/s":(t/1024).toFixed(2)+" Mb/s"}},{key:"getTimeLeftString",value:function(t,n,r){return isFinite(r)||(r=0),isFinite(n)||(n=0),isFinite(t)||(t=0),t=t>=0?t:0,n=n>=0?n:0,r=r>=0?r:0,e.addLeadingZero(r)+":"+e.addLeadingZero(n)+":"+e.addLeadingZero(t)}},{key:"fileSizeToString",value:function(e){var t=(e/1024).toFixed(0);if(t<1e3)return t+" kb";var n=(t/1024).toFixed(0);return n<1e3?n+" mb":(n/1024).toFixed(2)+" gb"}}],(n=null)&&O(t.prototype,n),r&&O(t,r),e}(),T=n("PO6j"),I=n("q8N1");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==R(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,k(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"handleRemove",value:function(){this.props.removeFile(this.props.file)}},{key:"render",value:function(){var e=this.props.file,t=e.name,n=e.size,r=e.status,o=e.uploadingPercent,i=e.isProcessed,c=e.hasError,s=this.props.i18n,l=_.fileSizeToString(n),d=s._("Size - {fileSizeString} ({uploadingPercent}% uploaded)",{fileSizeString:l,uploadingPercent:o}),f=r===h.a.status.UPLOAD_SUCCESSFUL,p=a.a.createElement("span",null,c&&a.a.createElement("span",null,a.a.createElement(T.a,null,s._("Error during processing of file {name}",{name:t})),a.a.createElement(w.a,{title:s._("Error during file processing"),ariaLabel:s._("Error during file processing, icon"),className:"c-file-uploader__error-icon"},u.a.ERROR)),!i&&!f&&a.a.createElement("span",{onClick:this.handleRemove.bind(this),role:"button",onKeyDown:Object(I.b)(this.handleRemove.bind(this)),"aria-label":s._('Delete file "{name}"',{name:t}),tabIndex:0},a.a.createElement(w.a,{title:s._("Remove from list"),ariaLabel:s._("Remove from list, icon"),className:"c-file-uploader__remove-icon"},u.a.DELETE)),i&&a.a.createElement("span",null,a.a.createElement(T.a,null,s._("Successfully uploaded {name}",{name:t})),a.a.createElement(w.a,{title:s._("Processed successfully"),ariaLabel:s._("Processed successfully, icon"),className:"c-file-uploader__success-icon"},u.a.DONE)));return a.a.createElement(S.a,{className:E()("c-file-uploader__file",L[r]),leftIcon:a.a.createElement(w.a,{ariaLabel:s._("File, icon")},u.a.FILE),rightIcon:p,secondaryText:d,primaryText:t})}}])&&A(n.prototype,r),o&&A(n,o),t}(r.Component),L=(P(C={},h.a.status.QUEUED,"c-file-uploader__file--queued"),P(C,h.a.status.UPLOADING,"c-file-uploader__file--uploading"),P(C,h.a.status.UPLOAD_SUCCESSFUL,"c-file-uploader__file--success"),P(C,h.a.status.PAUSED,"c-file-uploader__file--paused"),P(C,h.a.status.UPLOAD_RETRYING,"c-file-uploader__file--retry"),C),M=Object(o.withI18n)()(D);n("dUr/");function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==x(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,G(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.files,r=t.i18n;return a.a.createElement("div",{"aria-label":r._("File list"),tabIndex:0},a.a.createElement(b.b,{className:"file-uploader-list--list"},n.map((function(t){return a.a.createElement(M,{key:t.id+t.name,file:t,removeFile:e.props.removeFile})}))),a.a.createElement(y.a,null))}}])&&F(n.prototype,r),o&&F(n,o),t}(r.Component),W=Object(o.withI18n)()(q);function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X="c-file-uploader__info-field",$="c-file-uploader__info-field-icon",Z="c-file-uploader__info-field-text",J=["video/*"],ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,z(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),n=t,(r=[{key:"onFilesSelect",value:function(e,t){var n=e.concat(t);0!==(n=s.a.compact(n)).length&&(n=n.map((function(e){return{name:e.name,blob:e}})),this.props.addFiles(n))}},{key:"render",value:function(){var e=this.props,t=e.isInitialState,n=e.isUploadReadyState,r=e.isUploadingState,o=e.isPausedState,c=e.startUpload,s=e.pauseUpload,b=e.resumeUpload,y=e.uploadedFilesCount,v=e.uploadedPercent,h=e.uploadSpeedBps,g=e.secondsLeft,E=e.minutesLeft,w=e.hoursLeft,S=e.files,O=e.multiSelection,C=e.allowedExtensions,T=e.allowedNumFiles,I=e.i18n,P=t||n,R=S?S.length:0,A=Boolean(R>0),j=0;S.forEach((function(e){j+=e.size}));var k=R<T,N={};if(!k)switch(T){case 1:N.label=I._("This context only supports a single video file for upload");break;default:N.label=I._("You've reached the maximum number of video files which can be uploaded in this batch")}var D=p.f(),L=!(A||D),M=n||r||o;return a.a.createElement("div",{className:"c-file-uploader"},a.a.createElement("div",{className:"file-uploader-choose-actions-container"},P&&!L&&a.a.createElement(m.a,{text:I._("Add Video"),accept:[].concat(Q(C),J),disabled:!k,tooltip:N,showFileName:!1,icon:u.a.ADD,multiple:O,onFile:this.onFilesSelect.bind(this)}),P&&D&&a.a.createElement(m.a,{text:I._("Record Video"),accept:J,showFileName:!1,icon:u.a.VIDEOCAM,inputProps:{capture:"user"},multiple:!1,onFile:this.onFilesSelect.bind(this)})),a.a.createElement("div",{className:"file-uploader-list--container"},A&&a.a.createElement(l.a,{zDepth:1,className:"file-uploader-list--paper"},a.a.createElement(W,{files:S,removeFile:this.props.removeFile})),L&&a.a.createElement(i.a,{onDrop:this.onFilesSelect.bind(this),accept:[].concat(Q(C),J),className:"c-file-uploader__drop-area",activeClassName:"c-file-uploader__drop-area--active",multiple:O},a.a.createElement("p",{className:"c-file-uploader__drop-area-text"},I._("Drop video or click here"))),r&&a.a.createElement("div",{className:"c-file-uploader__upload-progress",tabIndex:0,role:"progressbar","aria-label":I._("Total Uploading Progress"),"aria-valuenow":v,"aria-valuemin":"0","aria-valuemax":"100","aria-valuetext":"Uploading progress is ".concat(v,"%")},a.a.createElement("div",{className:"c-file-uploader__upload-progressbar"},a.a.createElement("div",{className:"c-file-uploader__upload-progress-strip",style:{width:v+"%"}}))),A&&a.a.createElement("div",{className:"c-file-uploader__info"},a.a.createElement("p",{className:X,title:I._("Total Files Size")},a.a.createElement(f.a,{ariaLabel:I._("Total Files Size, icon"),className:$},u.a.FILE_UPLOAD),a.a.createElement("span",{className:Z},_.fileSizeToString(j))),a.a.createElement("p",{className:X,title:I._("Uploaded File Count")},a.a.createElement(f.a,{ariaLabel:I._("Uploaded File Count, icon"),className:$},u.a.CHECK_CIRCLE),a.a.createElement("span",{className:Z},"".concat(y,"/").concat(S.length))),r&&a.a.createElement("p",{className:X,title:I._("Upload Speed")},a.a.createElement(f.a,{ariaLabel:I._("Upload Speed, icon"),className:$},u.a.WIFI),a.a.createElement("span",{className:Z},_.getUploadSpeedString(h))),r&&a.a.createElement("p",{className:X,title:I._("Time Left")},a.a.createElement(f.a,{ariaLabel:I._("Time Left, icon"),className:$},u.a.ACCESS_TIME),a.a.createElement("span",{className:Z},_.getTimeLeftString(g,E,w)))),M&&a.a.createElement("div",{className:"file-uploader-transfer-actions-container"},n&&a.a.createElement(d.f,{id:"button-file-begin-upload",ariaLabel:I._("Begin Upload"),primary:!0,onClick:c},I._("Begin Upload")),r&&a.a.createElement(d.f,{id:"button-file-pause-upload",ariaLabel:I._("Pause Upload"),primary:!0,onClick:s},I._("Pause Upload")),o&&a.a.createElement(d.f,{id:"button-file-resume-upload",ariaLabel:I._("Resume Upload"),primary:!0,onClick:b},I._("Resume Upload")))))}}])&&Y(n.prototype,r),o&&Y(n,o),t}(r.Component);t.a=Object(o.withI18n)()(ee)},wNa6:function(e,t,n){"use strict";var r=n("ANjH"),a=n("5HXA"),o=n("pElA"),i=n("LvDl"),c=n.n(i),s=n("uxn8"),u=n("zyHd");function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={isLoading:!1,activityData:null,milestoneFormIsShowing:!1,milestoneIsLoading:!1,meetingIsLoading:!1,resultsPartialsIsLoading:!1,selectedInProgressPartials:[],selectedReadyToSubmitPartials:[],groupCommentsIsLoading:!1,teamEvalIsLoading:!1,removeSubmissionIsLoading:!1,peerReviewCommentIsLoading:!1,feedbackCommentIsLoading:!1,backgroundRefreshIsLoading:!1,refreshEducatorProgressIsLoading:!1,isActivitySubmitting:!1,isGroupNameEditing:!1,interactiveAnswerIsLoading:!1};function m(e,t){if(c.a.isArray(e))return t}var b=n("3Tiu"),y={isQuestionLoading:!1,activeQuestion:null,isQuestionBeingWithdrawn:!1,isAnswerBeingDeleted:!1,isSubmitting:!1,practiceData:null,backgroundRefreshIsLoading:!1,currentActivityState:null},v=n("b+Px");function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={groupFormationData:null,isLoading:!1},w=Object(r.combineReducers)({activity:function(){var e,t,n,r,a,i,f,b,y,v,h,g,E,w,S,O,C,_,T,I,P,R,A,j,k,N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,D=arguments.length>1?arguments[1]:void 0;switch(D.type){case o.S:return c.a.assign({},N,{activityData:D.payload});case o.L:return d({},N,{activityData:d({},N.activityData,D.payload)});case o.bb:return c.a.assign({},N,{isLoading:D.payload});case o.db:return c.a.assign({},N,{milestoneIsLoading:D.payload});case o.jb:return c.a.assign({},N,{milestoneFormIsShowing:D.payload});case o.K:return c.a.assign({},N,{peerReviewCommentIsLoading:D.payload});case o.H:return c.a.assign({},N,{feedbackCommentIsLoading:D.payload});case o.I:return c.a.assign({},N,{interactiveAnswerIsLoading:D.payload});case o.U:return c.a.assign({},N,{backgroundRefreshIsLoading:D.payload});case o.gb:return c.a.assign({},N,{refreshEducatorProgressIsLoading:D.payload});case o.T:return c.a.assign({},N,{isActivitySubmitting:D.payload});case o.Z:return c.a.assign({},N,{isGroupNameEditing:D.payload});case o.J:return c.a.mergeWith({},N,{activityData:D.payload},m);case o.Y:return(y=c.a.clone(N.activityData.myData.studentGroup)).name=D.payload.name,c.a.merge({},N,{activityData:{myData:{studentGroup:y}}});case o.i:return(e=c.a.clone(N.activityData.myData.studentGroup.milestones)).push(D.payload),c.a.merge({},N,{activityData:{myData:{studentGroup:{milestones:e}}}});case o.E:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),y=c.a.clone(A.studentGroup),(k=c.a.clone(y.milestones))[c.a.findIndex(k,["dbId",+D.payload.dbId])]=D.payload,y.milestones=k,A.studentGroup=y,t.myData=A,c.a.assign({},N,{activityData:t});case o.u:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),y=c.a.clone(N.activityData.myData.studentGroup),k=c.a.clone(y.milestones),c.a.remove(k,(function(e){return+e.dbId===+D.payload.dbId})),y.milestones=k,A.studentGroup=y,t.myData=A,c.a.assign({},N,{activityData:t});case o.h:return(a=c.a.clone(N.activityData.myData.resultPartials)).push(D.payload),c.a.merge({},N,{activityData:{myData:{resultPartials:a}}});case o.t:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),a=c.a.clone(A.resultPartials),c.a.remove(a,(function(e){return!(!u.a.isMeeting(e)||e.dbId!==D.payload)})),A.resultPartials=a,t.myData=A,c.a.assign({},N,{activityData:t});case o.s:return t=c.a.clone(N.activityData),c.a.remove(t.myData.resultPartials,(function(e){return+e.dbId===+D.payload})),c.a.assign({},N,{activityData:t});case o.cb:return c.a.assign({},N,{meetingIsLoading:D.payload});case o.hb:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).resultPartials=D.payload,t.myData=A,c.a.assign({},N,{activityData:t});case o.ib:return c.a.assign({},N,{resultsPartialsIsLoading:D.payload});case o.n:return c.a.merge({},N,{activityData:{myData:{result:D.payload}}});case o.x:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).result=null,t.myData=A,c.a.assign({},N,{activityData:t});case o.Q:return-1!==(n=s.a(N.selectedInProgressPartials,D.payload,"dbId"))?N:u.a.containVideoPartial(N.selectedInProgressPartials)&&u.a.isVideoPartial(D.payload)?N:((r=c.a.clone(N.selectedInProgressPartials)).push(D.payload),c.a.assign({},N,{selectedInProgressPartials:r}));case o.A:return-1===(n=s.a(N.selectedInProgressPartials,D.payload,"dbId"))?N:(r=c.a.clone(N.selectedInProgressPartials),r=s.d(r,n),c.a.assign({},N,{selectedInProgressPartials:r}));case o.R:return-1!==(n=s.a(N.selectedReadyToSubmitPartials,D.payload,"dbId"))?N:((f=c.a.clone(N.selectedReadyToSubmitPartials)).push(D.payload),c.a.assign({},N,{selectedReadyToSubmitPartials:f}));case o.B:return-1===(n=s.a(N.selectedReadyToSubmitPartials,D.payload,"dbId"))?N:(f=c.a.clone(N.selectedReadyToSubmitPartials),f=s.d(f,n),c.a.assign({},N,{selectedReadyToSubmitPartials:f}));case o.y:return c.a.assign({},N,{selectedInProgressPartials:[]});case o.O:r=[];var L=!1,M=!1;return N.selectedInProgressPartials.forEach((function(e){u.a.isVideoPartial(e)&&(r.push(e),L=!0)})),u.a.getReadyToSubmitPartials(N.activityData.myData.resultPartials).forEach((function(e){u.a.isVideoPartial(e)&&(M=!0)})),i=u.a.getInProgressPartials(N.activityData.myData.resultPartials),(i=c.a.clone(i)).forEach((function(e){u.a.isVideoPartial(e)&&L||u.a.isVideoPartial(e)&&M||u.a.isMediaInProcessingProgress(e)||u.a.isUnprocessedMeeting(e)||(u.a.isVideoPartial(e)&&(L=!0),r.push(e))})),c.a.assign({},N,{selectedInProgressPartials:r});case o.z:return c.a.assign({},N,{selectedReadyToSubmitPartials:[]});case o.P:return f=c.a.clone(u.a.getReadyToSubmitPartials(N.activityData.myData.resultPartials)),c.a.assign({},N,{selectedReadyToSubmitPartials:f});case o.k:return a=c.a.merge([],N.activityData.myData.resultPartials),D.payload.forEach((function(e){var t=s.a(a,e,"dbId");-1!==t&&(a[t].finalizedAt=e.finalizedAt)})),c.a.merge({},N,{activityData:{myData:{resultPartials:a}}});case o.j:return a=c.a.merge([],N.activityData.myData.resultPartials),D.payload.forEach((function(e){var t=s.a(a,e,"dbId");-1!==t?a[t].finalizedAt=null:a.push(e)})),c.a.merge({},N,{activityData:{myData:{resultPartials:a}}});case o.F:return a=c.a.clone(N.activityData.myData.resultPartials),j=s.a(a,D.payload,"dbId"),a[j]=D.payload,c.a.merge({},N,{activityData:{myData:{resultPartials:a}}});case o.v:return a=l(N.activityData.myData.resultPartials),c.a.remove(a,(function(e){return+e.dbId===+D.payload})),d({},N,{activityData:d({},N.activityData,{myData:d({},N.activityData.myData,{resultPartials:a})})});case o.b:var x=D.payload;return(b=c.a.clone(N.activityData.myData.studentGroup.comments)).push(x),c.a.merge({},N,{activityData:{myData:{studentGroup:{comments:b}}}});case o.r:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),y=c.a.clone(A.studentGroup),b=c.a.clone(y.comments),c.a.remove(b,(function(e){return+e.dbId===+D.payload})),y.comments=b,A.studentGroup=y,t.myData=A,c.a.assign({},N,{activityData:t});case o.X:return c.a.assign({},N,{groupCommentsIsLoading:D.payload});case o.W:return b=D.payload,c.a.merge({},N,{activityData:{myData:{studentGroup:{comments:b}}}});case o.kb:return c.a.assign({},N,{teamEvalIsLoading:D.payload});case o.d:return v=c.a.clone(N.activityData.myData.studentGroup.members),S=D.payload,w=c.a.findIndex(v,["dbId",S.peerDbId]),(O=c.a.clone(v[w])).myFiveStarRating={value:S.value,comment:S.comment},v[w]=O,c.a.merge({},N,{activityData:{myData:{studentGroup:{members:v}}}});case o.e:return v=c.a.clone(N.activityData.myData.studentGroup.members),S=D.payload.rubricResult,T=D.payload.peerDbId,-1===(w=c.a.findIndex(v,["dbId",T]))?N:((O=c.a.clone(v[w])).myRubricEvaluation={points:S.points,comment:S.comment,cells:S.cells},v[w]=O,c.a.merge({},N,{activityData:{myData:{studentGroup:{members:v}}}}));case o.c:return v=c.a.clone(N.activityData.myData.studentGroup.members),S=D.payload,w=c.a.findIndex(v,["dbId",S.peerDbId]),(O=c.a.clone(v[w])).myRubricEvaluation=d({},O.myRubricEvaluation,{comment:S.comment}),v[w]=O,c.a.merge({},N,{activityData:{myData:{studentGroup:{members:v}}}});case o.N:return c.a.assign({},N,{removeSubmissionIsLoading:D.payload});case o.l:E=c.a.clone(N.activityData.reviewedResults),h=c.a.clone(N.activityData.availableResults);var F=c.a.findIndex(E,["submitter.dbId",D.payload.submitter.dbId]);if(-1!==F){var V=c.a.clone(E[F]);V.comments=s.b(V.comments,D.payload,0),E[F]=V}else{var G=c.a.findIndex(h,["submitter.dbId",D.payload.submitter.dbId]),U=c.a.clone(h[G]);U.comments=s.b(U.comments,D.payload,0),s.b(E,U,0)}return c.a.merge({},N,{activityData:{reviewedResults:E}});case o.G:E=c.a.clone(N.activityData.reviewedResults),g=c.a.findIndex(E,["submitter.dbId",D.payload.submitter.dbId]);var q=c.a.clone(E[g]),W=c.a.clone(q.comments);return W[_=c.a.findIndex(W,["dbId",D.payload.dbId])]=D.payload,q.comments=W,E[g]=q,c.a.merge({},N,{activityData:{reviewedResults:E}});case o.w:t=c.a.clone(N.activityData),E=c.a.clone(t.reviewedResults);for(var B=0;B<E.length;B++){var Q=c.a.clone(E[B]),Y=c.a.clone(Q.comments),H=c.a.findIndex(Y,(function(e){return+e.dbId===+D.payload.removedId}));H>=0&&(Y[H]=d({},Y[H],{isDeleted:!0,commentMedia:null}),Q.comments=Y,E[B]=Q)}return t.reviewedResults=E,c.a.assign({},N,{activityData:t});case o.o:return N;case o.lb:return N.activityData.dbId!==D.payload.dbId?N:(t=c.a.clone(N.activityData),Object.keys(D.payload).forEach((function(e){t[e]=D.payload[e]})),c.a.assign({},N,{activityData:t}));case o.g:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),(a=c.a.clone(A.resultPartials)).push(D.payload),A.resultPartials=a,t.myData=A,c.a.assign({},N,{activityData:t});case o.mb:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).qaAnswers=D.payload.myData.qaAnswers,t.qaQuestion=D.payload.qaQuestion,t.myData=A,t.result=D.payload.myData.result,c.a.assign({},N,{activityData:t});case o.a:return(C=c.a.clone(N.activityData.myData.result.comments)).push(D.payload),c.a.merge({},N,{activityData:{myData:{result:{comments:C}}}});case o.q:return t=c.a.clone(N.activityData),A=c.a.clone(t.myData),q=c.a.clone(A.result),W=c.a.clone(q.comments),(_=c.a.findIndex(W,["dbId",D.payload.removedId]))>=0&&(W[_]=d({},W[_],{isDeleted:!0,commentMedia:null}),q.comments=W,A.result=q),t.myData=A,c.a.assign({},N,{activityData:t});case o.C:return q=c.a.clone(N.activityData.myData.result),_=c.a.findIndex(q.comments,["dbId",D.payload.dbId]),(W=c.a.clone(q.comments))[_]=D.payload,q.comments=W,c.a.merge({},N,{activityData:{myData:{result:q}}});case o.M:return(q=c.a.clone(N.activityData.myData.result)).comments=D.payload,c.a.merge({},N,{activityData:{myData:{result:q}}});case o.m:return(q=c.a.clone(N.activityData.myData.result)).myRubricEvaluation=D.payload,c.a.merge({},N,{activityData:{myData:{result:q}}});case o.p:return q=c.a.clone(N.activityData),I=c.a.merge([],q.availableResults),P=c.a.merge([],q.reviewedResults),R=c.a.findIndex(I,["submitter.dbId",D.payload.submitterDbId]),F=c.a.findIndex(P,["submitter.dbId",D.payload.submitterDbId]),R>=0&&(I[R]=d({},I[R],{myRubricEvaluation:D.payload.review})),F>=0&&(P[F]=d({},P[F],{myRubricEvaluation:D.payload.review})),q.availableResults=I,q.reviewedResults=P,c.a.merge({},N,{activityData:q});case o.eb:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).qaSubmitRequestedAt=D.payload.requestedAt,t.myData=A,c.a.assign({},N,{activityData:t});case o.D:return a=c.a.clone(N.activityData.myData.resultPartials),j=s.a(a,D.payload,"dbId"),a[j]=D.payload,c.a.merge({},N,{activityData:{myData:{resultPartials:a}}});case o.f:t=c.a.clone(N.activityData),A=c.a.clone(t.myData);var z=c.a.clone(A.interactiveAnswers);return z.push(D.payload.answer),A.interactiveAnswers=z,t.myData=A,c.a.assign({},N,{activityData:t});case o.ab:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).interactiveVideoWatchingFinishedAt=D.payload.watchingFinishedAt,t.myData=A,c.a.assign({},N,{activityData:t});case o.fb:return t=c.a.clone(N.activityData),(A=c.a.clone(t.myData)).reflectAnswers=D.payload.answers,t.myData=A,c.a.assign({},N,{activityData:t});case o.V:return(t=c.a.merge({},N.activityData)).qaQuestion=D.payload,c.a.merge({},N,{activityData:t});default:return N}},qaActivity:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b.d:return c.a.assign({},t,{activeQuestion:n.payload});case b.a:return c.a.has(t,"activeQuestion.qaQuestion.media.srcUrl")?((e=c.a.merge({},t)).activeQuestion.qaQuestion.media.srcUrl=n.payload,e):t;case b.h:return c.a.assign({},t,{isQuestionLoading:n.payload});case b.g:return c.a.assign({},t,{isQuestionBeingWithdrawn:n.payload});case b.e:return c.a.assign({},t,{isAnswerBeingDeleted:n.payload});case b.f:return e=c.a.assign({},t,{practiceData:n.payload});case b.c:return c.a.assign({},t,{backgroundRefreshIsLoading:n.payload});case b.j:return c.a.merge({},t,{activityData:n.payload});case b.i:return c.a.assign({},t,{isSubmitting:n.payload});case b.b:return c.a.assign({},t,{currentActivityState:n.payload});default:return t}},groupFormation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.b:return h({},e,{isLoading:t.payload});case v.a:return h({},e,{groupFormationData:t.payload});default:return e}}}),S=Object(r.combineReducers)({pages:w}),O=n("Ondw");function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T={isLoading:!1,activityData:null,activityDataWithContext:{},showGroupMembers:!0,activityCommentIsLoading:!1,commentPresetIsLoading:!1,commentPresets:[],groupCreationIsLoading:!1,deleteQAAnswerIsLoading:!1,deleteResultIsLoading:!1,gradingRefreshIsLoading:!1,gradebookStudentData:{activityId:null,searchValue:null,sortConfig:null,students:null}},I=n("sZpB");function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={isLoading:!1,list:[],isItemProcessing:!1},k=n("qea/");function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={groupConfiguration:null,individualConfiguration:null,qaConfiguration:null,interactiveVideoConfiguration:null},M=Object(r.combineReducers)({activity:function(){var e,t,n,r,a,o,i,s,u,l,d,f,p,m,b,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,v=arguments.length>1?arguments[1]:void 0;switch(v.type){case O.s:return c.a.assign({},y,{activityData:v.payload});case O.C:return c.a.assign({},y,{isLoading:v.payload});case O.F:return c.a.assign({},y,{showGroupMembers:v.payload});case O.y:return p=v.payload.grade,b=v.payload.studentId,m=c.a.map(y.activityData.dataForAllStudents,(function(e){return e.student.dbId===b?c.a.assign({},e,{educatorGrade:p}):e})),t=c.a.merge({},y,{activityData:{dataForAllStudents:m}}),y.activityData.dataForOneStudent.student.dbId===b&&c.a.merge(t,{activityData:{dataForOneStudent:{educatorGrade:p}}}),t;case O.x:return p=v.payload.grade,m=c.a.map(y.activityData.dataForAllStudents,(function(e){return c.a.assign({},e,{educatorGrade:p})})),f=c.a.assign({},y.activityData.dataForOneStudent,{educatorGrade:p}),c.a.merge({},y,{activityData:{dataForAllStudents:m,dataForOneStudent:f}});case O.e:return m=c.a.map(y.activityData.dataForAllStudents,(function(e){return c.a.merge({},e,{educatorGrade:{isDraft:!1}})})),f=c.a.merge({},y.activityData.dataForOneStudent,{educatorGrade:{isDraft:!1}}),c.a.merge({},y,{activityData:{dataForAllStudents:m,dataForOneStudent:f}});case O.B:return c.a.merge({},y,{activityData:{dataForOneStudent:{isGradeDraftAllowed:v.payload}}});case O.r:return c.a.assign({},y,{activityCommentIsLoading:v.payload});case O.v:return c.a.assign({},y,{commentPresetIsLoading:v.payload});case O.A:return c.a.assign({},y,{groupCreationIsLoading:v.payload});case O.j:return c.a.assign({},y,{deleteQAAnswerIsLoading:v.payload});case O.u:return c.a.assign({},y,{commentPresets:v.payload});case O.w:return c.a.assign({},y,{deleteResultIsLoading:v.payload});case O.E:return c.a.assign({},y,{gradingRefreshIsLoading:v.payload});case O.a:return(e=c.a.clone(y.activityData.dataForOneStudent.result.comments)).push(v.payload),t=c.a.merge({},y,{activityData:{dataForOneStudent:{result:{comments:e}}}});case O.f:return o=c.a.clone(y.activityData),f=c.a.clone(o.dataForOneStudent),n=c.a.clone(f.result),r=c.a.clone(n.comments),(a=c.a.findIndex(n.comments,["dbId",v.payload.removedId]))>=0&&(r[a]=C({},r[a],{isDeleted:!0,commentMedia:null}),n.comments=r,f.result=n),o.dataForOneStudent=f,c.a.assign({},y,{activityData:o});case O.l:return n=c.a.clone(y.activityData.dataForOneStudent.result),a=c.a.findIndex(n.comments,["dbId",v.payload.dbId]),(r=c.a.clone(n.comments))[a]=v.payload,n.comments=r,c.a.merge({},y,{activityData:{dataForOneStudent:{result:n}}});case O.g:return o=c.a.clone(y.activityData),(f=c.a.clone(o.dataForOneStudent)).result=null,c.a.has(f,"interactiveAnswers")&&(f.interactiveAnswers=[]),c.a.has(f,"reflectAnswers")&&(f.reflectAnswers=[]),o.dataForOneStudent=f,c.a.assign({},y,{activityData:o});case O.n:return(i=c.a.clone(y.activityData.dataForOneStudent.studentGroup)).name=v.payload.name,c.a.merge({},y,{activityData:{dataForOneStudent:{studentGroup:i}}});case O.b:return(s=c.a.clone(y.commentPresets)).push(v.payload),c.a.assign({},y,{commentPresets:s});case O.m:return(u=(s=c.a.clone(y.commentPresets))[a=c.a.findIndex(s,["dbId",v.payload.dbId])]).commentText=v.comment.commentText,s[a]=u,c.a.assign({},y,{commentPresets:s});case O.h:return s=c.a.clone(y.commentPresets),c.a.remove(s,(function(e){return+e.dbId===+v.payload.removedId})),c.a.assign({},y,{commentPresets:s});case O.G:return(o=c.a.clone(y.activityData)).studentGroups=v.payload,c.a.assign({},y,{activityData:o});case O.d:return o=c.a.clone(y.activityData),(l=c.a.clone(o.studentGroups)).concat(v.payload),o.studentGroups=l,c.a.assign({},y,{activityData:o});case O.k:return o=c.a.clone(y.activityData),l=c.a.clone(o.studentGroups),c.a.remove(l,(function(e){return+e.dbId===+v.payload.removedId})),o.studentGroups=l,c.a.assign({},y,{activityData:o});case O.c:return o=c.a.clone(y.activityData),(l=c.a.clone(o.studentGroups))[c.a.findIndex(l,["dbId",v.payload.studentGroup.dbId])]=v.payload.studentGroup,o.studentGroups=l,c.a.assign({},y,{activityData:o});case O.p:return y;case O.i:return o=c.a.clone(y.activityData),d=c.a.clone(o.dataForOneStudent.qaAnswers),c.a.remove(d,(function(e){return+e.dbId===+v.payload.removedId})),o.dataForOneStudent.qaAnswers=d,c.a.merge({},y,{activityData:{dataForOneStudent:{qaAnswers:d}}});case O.o:return(n=c.a.clone(y.activityData.dataForOneStudent.result)).comments=v.payload,c.a.merge({},y,{activityData:{dataForOneStudent:{result:n}}});case O.D:return n=c.a.merge({},y),c.a.set(n,v.payload.propPath,v.payload.value),n;case O.q:return c.a.merge({},T,{gradebookStudentData:y.gradebookStudentData});case O.t:return C({},y,{activityDataWithContext:C({},y.activityDataWithContext,_({},v.context,v.payload))});case O.z:return C({},y,{gradebookStudentData:v.payload});default:return y}},library:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case I.f:return(e=c.a.merge({},t)).isLoading=n.payload,e;case I.e:return(e=c.a.merge({},t)).list=n.payload,e;case I.b:var r=t.list.filter((function(e){return e.dbId!==n.payload}));return R({},t,{list:r});case I.d:return R({},t,{isItemProcessing:n.payload});case I.c:return R({},t,{list:t.list.map((function(e){return e.dbId!==n.payload.id?e:R({},e,{title:n.payload.title})}))});case I.a:return R({},t,{list:[n.payload].concat(P(t.list))});default:return t}},configuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.a:return N({},e,{groupConfiguration:t.payload});case k.b:return N({},e,{individualConfiguration:t.payload});case k.d:return N({},e,{qaConfiguration:t.payload});case k.c:return N({},e,{interactiveVideoConfiguration:t.payload});default:return e}}}),x=n("AEU+"),F=n("lBBP");function V(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q={userData:null,hasError:!1,isLoading:!0,commentPresetIsLoading:!1,commentPresets:[]},W=n("r9GM");function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={viewport:{size:null,orientation:null,dimensions:{width:null,height:null}}},H=n("yWXI");function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){K(e,t,n[t])}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X={capabilities:{},preferences:{},launchpoint:{}},$=n("MOhp"),Z=n("o41Y");function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ee(e,t,n[t])}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te={environmentConfig:null,featureConfig:{},fileTransferConfig:null,fileTransferConfigIsLoading:!1,fileTransferConfigHasError:!1,fileUploadConfig:null,fileUploadConfigIsLoading:!1,fileUploadConfigHasError:!1,isD2L:!1,isD2LPremium:!1,isD2LFreemium:!1,isD2LLegacyFreemium:!1,isPlainLti:!1,institution:null,ltiScope:null,theme:n("Dl6w").b},ne=n("TDYo");function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe={errors:{noAudioDevices:!1,noVideoDevices:!1,failedToGetSettings:!1,failedToGetCameraStream:!1,failedToGetDesktopStream:!1,failedToGetAudioStream:!1,recorderIsNotSupported:!1,finalizeFailed:!1},settings:void 0,cameraStream:void 0,desktopStream:void 0,microphoneStream:void 0,recordedCameraStream:void 0,recordedDesktopStream:void 0,recordedMicrophoneStream:void 0,viewState:n("V+cX").a.INITIAL,audioDevices:[],videoDevices:[],currentCameraId:null,currentMicrophoneId:null,audioLevel:0,audioIsNormal:!1,recordingTime:0,playbackDuration:0,playbackTime:0,playbackPlaying:!1,submitting:!1,recordingPaused:!1,uploadingProgressPercent:0,audioAnalyzerState:void 0,showRecordButton:void 0,autoSubmit:void 0},ie=n("uy2z"),ce=n("DozO");function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ue(e,t,n[t])}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le={files:[],isInitialState:!0,isUploadReadyState:!1,isUploadingState:!1,isPausedState:!1,uploadedFilesCount:0,uploadedPercent:0,uploadSpeedBps:0,secondsLeft:0,minutesLeft:0,hoursLeft:0},de=n("zoNz");function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pe(e,t,n[t])}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me={deskshareIsActive:!1,secondaryVideoX:10,secondaryVideoY:10,secondaryVideoWidth:150,webcamPlayerId:null,desksharePlayerId:null,inited:!1,inFullScreen:!1,isSplitView:!1},be=n("OWj0"),ye={currentModal:null,previousModals:[]},ve=n("Yo20"),he={items:{}},ge=n("p7mv");function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){we(e,t,n[t])}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se={navigation:null,isLoading:!1},Oe=n("e/6q"),Ce={currentColorIndex:0,currentUsers:{},currentInitials:{}},_e=n("Q0J0");function Te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re={loading:!1,createLoading:!1,hasError:!1,createHasError:!1,list:[]},Ae=n("2HZR");function je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ne(e,t,n[t])}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De={loading:!1,createLoading:!1,hasError:!1,createHasError:!1,list:[]},Le=n("Z+gg");function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={hasUnsupportedBrowserMessageBeenDismissed:!1},Ve=Object(r.combineReducers)({player:x.a,auth:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F.k:return c.a.merge({},t,{userData:n.payload});case F.f:return c.a.merge({},t,{hasError:n.payload});case F.h:return c.a.merge({},t,{isLoading:n.payload});case F.d:return c.a.merge({},t,{commentPresets:n.payload});case F.e:return c.a.merge({},t,{commentPresetIsLoading:n.payload});case F.a:return G({},t,{commentPresets:[].concat(V(t.commentPresets),[n.payload])});case F.b:return e=V(t.commentPresets),c.a.remove(e,(function(e){return+e.dbId===+n.payload})),G({},t,{commentPresets:e});case F.c:e=V(t.commentPresets);var r=c.a.findIndex(e,(function(e){return e.dbId===n.payload.dbId}));return e[r]=n.payload,G({},t,{commentPresets:e});case F.i:return c.a.merge({},t,{userData:{isMarketingCommunicationAccepted:n.payload}});case F.g:return c.a.merge({},t,{userData:{is508on:n.payload}});case F.j:return c.a.merge({},t,{userData:{timezone:n.payload}});default:return t}},browser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.a:return B({},e,{viewport:B({},e.viewport,{dimensions:t.payload})});case W.b:return B({},e,{viewport:B({},e.viewport,{orientation:t.payload})});case W.c:return B({},e,{viewport:B({},e.viewport,{size:t.payload})});default:return e}},customization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.b:return z({},e,{launchpoint:t.payload});case H.a:return z({},e,{capabilities:t.payload});case H.c:return z({},e,{preferences:t.payload});default:return e}},config:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case $.a:return(e=c.a.clone(t)).fileTransferConfig=n.payload,e;case $.f:return(e=c.a.clone(t)).fileTransferConfigHasError=n.payload,e;case $.g:return(e=c.a.clone(t)).fileTransferConfigIsLoading=n.payload,e;case $.b:return(e=c.a.clone(t)).fileUploadConfig=n.payload,e;case $.h:return(e=c.a.clone(t)).fileUploadConfigHasError=n.payload,e;case $.i:return(e=c.a.clone(t)).fileUploadConfigIsLoading=n.payload,e;case $.c:return(e=c.a.clone(t)).fileUploadConfigIsLoading=te.fileUploadConfigIsLoading,e.fileUploadConfig=te.fileUploadConfig,e.fileUploadConfigHasError=te.fileUploadConfigHasError,e;case $.j:return J({},t,{institution:n.payload,isD2L:Object(Z.b)(n.payload),isD2LFreemium:Object(Z.c)(n.payload),isD2LPremium:Object(Z.f)(n.payload),isD2LLegacyFreemium:Object(Z.e)(n.payload),isPlainLti:Object(Z.g)(n.payload)});case $.k:return J({},t,{ltiScope:n.payload});case $.l:return J({},t,{termClass:n.payload});case $.m:return J({},t,{theme:n.payload});case $.d:return J({},t,{environmentConfig:n.payload});case $.e:return J({},t,{featureConfig:n.payload});default:return t}},fileUploader:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ce.a:return(e=c.a.merge({},n)).files.push(r.payload),e;case ce.c:return le;case ce.b:return(e=c.a.merge({},n)).files=s.e(e.files,"id",r.payload),e;case ce.g:return e=c.a.merge({},n),-1===(t=s.a(e.files,{id:r.payload.fileId},"id"))?n:(e.files[t].status=r.payload.status,e);case ce.h:return e=c.a.merge({},n),-1===(t=s.a(e.files,{id:r.payload.fileId},"id"))?n:(e.files[t].uploadingPercent=r.payload.uploadingPercent,e);case ce.f:return e=c.a.merge({},n),-1===(t=s.a(e.files,{id:r.payload.fileId},"id"))?n:(e.files[t].isProcessed=r.payload.isProcessed,e);case ce.e:return e=c.a.merge({},n),-1===(t=s.a(e.files,{id:r.payload.fileId},"id"))?n:(e.files[t].hasError=r.payload.hasError,e);case ce.d:return e=c.a.merge({},n),-1===(t=s.a(e.files,{id:r.payload.fileId},"id"))?n:(e.files[t].dbId=r.payload.dbId,e);case ce.i:var a=r.payload,o=a.prop,i=a.value;return e=se({},n),e=c.a.set(e,o,i);default:return n}},recorder:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ne.b:return e=JSON.parse(JSON.stringify(oe)),(t=re({},n))[r.payload.recorderId]=e,t;case ne.a:return c.a.omit(n,r.payload);case ne.c:var a=r.payload,o=a.recorderId,i=a.prop,s=a.value;return(t=re({},n))[o]=c.a.set(t[o],i,s),t;default:return n}},commands:ie.callReducer,doublePlayer:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case de.b:return e=fe({},me),(e=c.a.merge(e,r.payload.initialState)).inited=!0,(t=fe({},n))[r.payload.playerId]=e,t;case de.a:return c.a.omit(n,r.payload);case de.c:var a=r.payload,o=a.playerId,i=a.prop,s=a.value;return(t=fe({},n))[o]=c.a.set(t[o],i,s),t;default:return n}},modal:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case be.b:return(e=c.a.assign({},t)).currentModal=n.payload,e;case be.a:return(e=c.a.merge({},t)).currentModal=null,e;case be.c:return(e=c.a.merge({},t)).previousModals.push(e.currentModal),e.currentModal=n.payload,e;case be.d:return(e=c.a.merge({},t)).currentModal=e.previousModals.pop(),e;default:return t}},navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.a:return Ee({},e,{isLoading:t.payload});case ge.b:return Ee({},e,{navigation:t.payload});default:return e}},avatar:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Oe.a:if((e=c.a.clone(t)).currentColorIndex=++n.payload.colorIndex,e.currentUsers[n.payload.name]=n.payload.color,e.currentInitials[n.payload.initials]){var r=c.a.clone(e.currentInitials[n.payload.initials]);!r.indexOf(n.payload.colorIndex)>0&&(r.push(n.payload.colorIndex),e.currentInitials[n.payload.initials]=r)}else e.currentInitials[n.payload.initials]=[n.payload.colorIndex];return e;case Oe.b:return(e=c.a.clone(t)).currentColorIndex=0,e;default:return t}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve.a:var n=c.a.merge({},e);return n.items[t.payload.itemId]={type:t.payload.itemType},n;case ve.c:var r=c.a.merge({},e);return t.payload.itemIds&&t.payload.itemIds.forEach((function(e){delete r.items[e]})),r;case ve.d:return e;case ve.b:return he;default:return e}},deleteUserRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e.g:return Ie({},e,{loading:t.payload});case _e.d:return Ie({},e,{createLoading:t.payload});case _e.c:return Ie({},e,{createHasError:t.payload});case _e.e:return Ie({},e,{hasError:t.payload});case _e.f:return Ie({},e,{list:t.payload});case _e.a:return Ie({},e,{list:[].concat(Te(e.list),[t.payload])});case _e.b:var n=Te(e.list),r=c.a.findIndex(n,{dbId:t.payload.dbId});return-1===r?e:(n[r]=t.payload,Ie({},e,{list:n}));default:return e}},exportUserDataRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae.g:return ke({},e,{loading:t.payload});case Ae.e:return ke({},e,{hasError:t.payload});case Ae.d:return ke({},e,{createLoading:t.payload});case Ae.c:return ke({},e,{createHasError:t.payload});case Ae.f:return ke({},e,{list:t.payload});case Ae.a:return ke({},e,{list:[].concat(je(e.list),[t.payload])});case Ae.b:var n=je(e.list),r=c.a.findIndex(n,{dbId:t.payload.dbId});return-1===r?e:(n[r]=t.payload,ke({},e,{list:n}));default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le.a:return Me({},e,{hasUnsupportedBrowserMessageBeenDismissed:!0});default:return e}}}),Ge=n("7Yj1"),Ue={frontend:"en-US"},qe=Object(r.combineReducers)({common:Ve,educator:M,student:S,locale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge.a:return c.a.assign({},e,t.payload);default:return e}}}),We=Object(a.composeWithDevTools)({name:"Bongo[".concat(window.location.origin).concat(window.location.pathname,"]")});t.a=Object(r.createStore)(qe,We())},wR0W:function(e,t,n){"use strict";t.a={SET_PARAMS:"setParams",SET_SHOW_RECORD_BUTTON:"setShowRecordButton",SET_AUTO_SUBMIT:"setAutoSubmit",WINDOWED_RECORDER_LOADED:"windowedRecorderLoaded",RECORDING_FINISHED:"recordingFinished",RECORDING_STOPPED:"recordingStopped",RECORDING_RECORD:"recordingRecord",RECORDING_RESET:"recordingReset",SET_RECORDINGS_FILE_NAMES:"setRecordingsFileNames",SET_AUDIO_IS_NORMAL:"setAudioIsNormal",SET_VIEW_STATE:"setViewState",START_RECORD:"startRecord",STOP_RECORD:"stopRecord",RESET:"reset",SUBMIT:"submit",CLOSE_STANDALONE_WINDOW:"closeStandaloneWindow"}},wRmV:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("jAlv"),s=(n("l9hb"),n("LvDl")),u=n.n(s);n("lXiE");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={TOP:"top",LEFT:"left",BOTTOM:"bottom",RIGHT:"right"},h=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=p(t).call(this,e),n=!o||"object"!==l(o)&&"function"!==typeof o?b(r):o,y(b(b(n)),"setupEventListeners",(function(){var e=!1,t=u.a.get(n.tippyComponent,"current.tooltipDOM");if(t){var r=n.props.ariaLabel;r&&(t.removeAttribute("aria-describedby"),t.setAttribute("aria-label",r)),n.eventListenersSetup||(t.addEventListener("mouseenter",n.onNativeMouseEnter),t.addEventListener("mouseleave",n.onNativeMouseLeave),t.addEventListener("touchstart",n.onNativeTouchStart,{passive:!0}),t.addEventListener("touchend",n.onNativeTouchEnd),e=!0)}n.eventListenersSetup=e})),y(b(b(n)),"getComponentProps",(function(e){return u.a.pick(e,Object.keys(t.componentProps))})),y(b(b(n)),"onNativeMouseEnter",(function(){for(var e=n.props.onMouseEnter,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),y(b(b(n)),"onNativeMouseLeave",(function(){for(var e=n.props.onMouseLeave,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),y(b(b(n)),"onNativeTouchStart",(function(){for(var e=n.props.onTouchStart,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),y(b(b(n)),"onNativeTouchEnd",(function(){for(var e=n.props.onTouchEnd,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(r)})),n.tippyComponent=a.a.createRef(),n.eventListenersSetup=!1,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setupEventListeners()}},{key:"componentDidUpdate",value:function(){this.setupEventListeners()}},{key:"componentWillUnmount",value:function(){var e=u.a.get(this.tippyComponent,"current");e&&e.destroyTippy()}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.html,r=e.children;if(!t&&!n)return r;var o=u.a.clone(this.props);return o.label&&(o.title=o.label),a.a.createElement(c.Tooltip,d({},this.getComponentProps(o),{ref:this.tippyComponent}),o.children)}}])&&f(n.prototype,r),o&&f(n,o),t}(a.a.Component);h.componentProps={animation:i.a.string,arrow:i.a.bool,className:i.a.string,delay:i.a.number,disabled:i.a.bool,distance:i.a.number,duration:i.a.number,html:i.a.element,interactive:i.a.bool,onRequestClose:i.a.func,open:i.a.bool,position:i.a.string,sticky:i.a.bool,stickyDuration:i.a.number,style:i.a.object,tabIndex:i.a.number,title:i.a.any,touchHold:i.a.bool,trigger:i.a.string},h.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}({},h.componentProps,{ariaLabel:i.a.string,label:i.a.string,onMouseEnter:i.a.func,onMouseLeave:i.a.func,onTouchStart:i.a.func,onTouchEnd:i.a.func}),h.defaultProps={animation:"shift",arrow:!0,delay:250,disabled:!1,duration:250,interactive:!1,onMouseEnter:function(){},onMouseLeave:function(){},onTouchStart:function(){},onTouchEnd:function(){},position:v.TOP,sticky:!1,stickyDuration:200,style:{display:"inline-flex"},touchHold:!0,trigger:"mouseenter focus"},t.b=h},wpyS:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("kbsL"),s=n("YSsg"),u=n("TSYQ"),l=n.n(u),d=n("ZD0w"),f=n("yBPd"),p=n("Wqtl"),m=n("PJr8"),b=(n("NVgV"),n("Y7ox"));function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=h(t).call(this,e),n=!a||"object"!==y(a)&&"function"!==typeof a?E(r):a,w(E(E(n)),"getInitialStateFromProps",(function(e){return{saveEnabled:!1,currentPoints:e.rubricPoints}})),w(E(E(n)),"onGradeChange",(function(e){n.setState({saveEnabled:e.valid,currentPoints:e.points,cellIds:e.cellIds}),n.props.onGradeChange(e)})),w(E(E(n)),"onSubmit",(function(){if(n.props.onSubmit){var e=n.state,t=e.cellIds,r=e.currentPoints,a=e.saveEnabled;n.props.onSubmit(t,r,a)}})),n.state=n.getInitialStateFromProps(e),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.className,r=e.rubric,o=e.mode,i=e.isSubmitting,u=e.grade,b=e.allowInvalid,y=e.i18n,v=e.showCurrentScore,h=this.state,g=h.saveEnabled,E=h.currentPoints,w=[a.a.createElement(c.a,{id:"button-rubric-dialog-close",primary:!0,ariaLabel:y._("Close"),enabled:!i,isLoading:i,onClick:t},a.a.createElement(d.Trans,{id:"Close"}))],S=[a.a.createElement(c.a,{id:"button-rubric-dialog-cancel",secondary:!0,ariaLabel:y._("Cancel"),enabled:!i,onClick:t},a.a.createElement(d.Trans,{id:"Cancel"})),a.a.createElement(c.a,{id:"button-rubric-dialog-save",primary:!0,ariaLabel:y._("Save"),enabled:!i&&g||b,isLoading:i,onClick:this.onSubmit},a.a.createElement(d.Trans,{id:"Save"}))];return a.a.createElement(s.a,{actions:o===p.a.VIEW?w:S,ariaLabel:y._("Rubric"),dialogClassName:l()("rubric-dialog",n),contentClassName:"rubric-dialog__content",id:"rubric-dialog",title:a.a.createElement("div",{className:"rubric-dialog-title"},v?a.a.createElement("span",null,a.a.createElement(d.Trans,{id:"Rubric Points"})," ",a.a.createElement(m.c,{points:E,max:r.maxValue})):a.a.createElement(d.Trans,{id:"Rubric"})),modal:!0,visible:!0},a.a.createElement("div",{className:"rubric-dialog__rubric-wrapper"},a.a.createElement(f.a,{rubric:r,grade:u,mode:o,onGradeChange:this.onGradeChange})))}}])&&v(n.prototype,r),o&&v(n,o),t}(r.Component);S.defaultProps={onGradeChange:function(){},allowInvalid:!1,onCancel:b.a.closeModal,showCurrentScore:!0},S.propTypes={onCancel:i.a.func,onSubmit:i.a.func,onGradeChange:i.a.func,isSubmitting:i.a.bool,className:i.a.string,rubric:i.a.any.isRequired,rubricPoints:i.a.number,mode:i.a.oneOf([p.a.VIEW,p.a.GRADE]).isRequired,grade:i.a.arrayOf(i.a.number),allowInvalid:i.a.bool,showCurrentScore:i.a.bool},t.a=Object(d.withI18n)()(S)},x1nL:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n("lTCR"),a=n.n(r),o=n("mxsA");function i(){var e=l(["\n    fragment TermClassWithEducators on TermClass {\n        ...TermClassBasic\n        educators {\n            ...GeneralUser\n        }\n    }\n    ","\n    ","\n"]);return i=function(){return e},e}function c(){var e=l(["\n    fragment TermClassWithStudents on TermClass {\n        ...TermClassBasic\n        students {\n            ...GeneralUser\n        } \n    }\n    ","\n    ","\n"]);return c=function(){return e},e}function s(){var e=l(["\n    fragment TermClassBasic on TermClass {\n        dbId\n        name\n        institution {\n            externalTrackingUuid\n            name\n            integrationType\n            trialExpireAt\n        }      \n        isDeepLinkingEnabled\n        integrationMode\n    }\n"]);return s=function(){return e},e}function u(){var e=l(["\n    fragment D2lCourse on D2lCourse {\n        code\n        name\n        lmsCode\n        termClassDbId\n    }\n"]);return u=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=a()(u()),f=a()(s());a()(c(),f,o.d),a()(i(),f,o.d)},x6TD:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("giI2"),u=n("kbsL"),l=n("A2tp"),d=n("hHKf"),f=n("zyHd"),p=n("QccL"),m=n("TSYQ"),b=n.n(m),y=n("LvDl"),v=n.n(y),h=(n("L9xK"),n("LFYD")),g=n("9C/b"),E=n("v6po");function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I="c-video-container__deskshare-button",P=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=this,o=(e=O(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==w(o)&&"function"!==typeof o?_(r):o,T(_(_(n)),"state",{showVideoDialog:!1,showingToolbar:!1,containerWidth:0}),T(_(_(n)),"updateContainerSize",(function(){n.videoContainer&&n.setState({containerWidth:n.videoContainer.offsetWidth})})),T(_(_(n)),"componentDidMount",(function(){window.addEventListener("resize",n.updateContainerSize.bind(_(_(n)))),n.updateContainerSize()})),T(_(_(n)),"onPreviewClose",(function(){n.setState({showVideoDialog:!1})})),T(_(_(n)),"onContainerFocus",(function(){n.setState({showingToolbar:!0})})),T(_(_(n)),"onContainerBlur",(function(){n.setState({showingToolbar:!1})})),T(_(_(n)),"onDownload",(function(){Object(p.a)(n.props.media)})),T(_(_(n)),"getDesktopSharingIcon",(function(){var e=n.props,t=e.i18n,r=e.allowDesktopSharing,o=e.media,i={label:null,className:"deskshare-container"};return i.label=r?t._("This video includes screen recording"):t._("This video includes screen recording but only the camera recording will be visible during playback"),o&&o.slaveMedia&&a.a.createElement(s.a,{ariaLabel:t._("Deskshare"),tooltip:i,className:I},h.a.APP_WINDOW)})),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateContainerSize.bind(this))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.media,o=t.onAddMedia,i=t.onSetMedia,c=t.isLocked,p=t.showControls,m=t.i18n,y=t.id,g=t.match.params,E=g.activityId,w=g.classId,S=this.state,O=S.showVideoDialog,C=S.showingToolbar,_=S.containerWidth,T={media:r},I=null;return r&&f.a.isMediaProcessed(T)&&(I={autoplay:!1,controls:p,showPseudoPlayButton:!p,onPseudoPlayClick:function(){e.setState({showVideoDialog:!0})},sources:[{src:r.srcUrl,type:"video/mp4"}],transcriptUrl:v.a.get(r,"transcript.src")},r.caption&&(I.tracks=[r.caption])),a.a.createElement("div",{ref:function(t){e.videoContainer=t},onTouchStart:this.onContainerFocus,onTouchEnd:this.onContainerBlur,onMouseEnter:this.onContainerFocus,onMouseLeave:this.onContainerBlur,style:{height:_/1.333},className:b()("c-video-container",n,C?"showing-toolbar":null)},!r&&a.a.createElement(u.c,{id:"".concat(y,"--button-video-add"),ariaLabel:m._("Add Video"),onClick:o,enabled:!c,className:"c-video-container__add-button"},h.a.VIDEO_ADD),r&&f.a.isMediaProcessed(T)&&a.a.createElement(l.a,{id:"".concat(y,"--player"),options:I,activityId:+E,termClassId:+w,mediaId:r.dbId,usageContext:this.props.usageContext,playerId:this.props.playerId||"Activity config media #"+r.dbId}),r&&!f.a.isMediaProcessed(T)&&a.a.createElement("div",null,a.a.createElement("span",{title:m._("Media is processing")},a.a.createElement(s.a,{className:"c-video-container__wait-icon",ariaLabel:m._("Media Processing, icon")},h.a.HOURGLASS_EMPTY))),this.getDesktopSharingIcon(),r&&a.a.createElement("div",{onFocus:this.onContainerFocus,onBlur:this.onContainerBlur,className:b()("video-actions",C?"focused":null)},a.a.createElement(u.c,{id:"".concat(y,"--button-video-menu-add"),ariaLabel:m._("Add video"),onClick:function(){e.onContainerBlur(),o()},enabled:!c,className:"c-video-container__toolbar-button"},h.a.VIDEO_ADD),!r.slaveMedia&&a.a.createElement(u.c,{id:"".concat(y,"--button-video-menu-download"),ariaLabel:m._("Download"),onClick:function(){e.onContainerBlur(),e.onDownload()},enabled:f.a.isMediaProcessed(T),className:"c-video-container__toolbar-button"},h.a.DOWNLOAD),a.a.createElement(u.c,{id:"".concat(y,"--button-video-menu-remove"),ariaLabel:m._("Delete"),onClick:function(){e.onContainerBlur(),i.bind(null,null)()},enabled:!c,className:"c-video-container__toolbar-button"},h.a.DELETE)),r&&O&&a.a.createElement(d.c,{autoplay:!0,media:r,activityId:+E,termClassId:+w,usageContext:this.props.usageContext,onCancel:this.onPreviewClose}))}}])&&S(n.prototype,r),o&&S(n,o),t}(r.Component);P.defaultProps={allowDesktopSharing:!0,isLocked:!1,showControls:!1,usageContext:E.a.ACTIVITY_OVERVIEW},P.propTypes={allowDesktopSharing:i.a.bool,className:i.a.string,id:i.a.string,media:i.a.object,onAddMedia:i.a.func,onSetMedia:i.a.func,playerId:i.a.string,isLocked:i.a.bool,showControls:i.a.bool,usageContext:i.a.oneOf(Object.values(E.a))},t.a=Object(g.a)(Object(c.withI18n)()(P))},xHcp:function(e,t,n){"use strict";var r=n("NlSD"),a=n("lTCR"),o=n.n(a),i=n("wNa6"),c=n("pElA"),s=n("LvDl"),u=n.n(s),l=n("zyHd"),d=n("7n1V"),f=n("92Bf"),p=n("eDl9"),m=n("O+79"),b=n("09Br"),y=n("mxsA"),v=n("sIVs"),h=n("8DtX"),g=n("AuRu"),E=n("ul3U"),w=n("jlV6"),S=n("io3D"),O=n("ArDN"),C=n("8bCP");function _(){var e=ge(["\n    mutation createReflectAnswers($input: CreateReflectAnswersInput!) {\n        createReflectAnswers(input: $input){\n            answers {\n                ...ReflectionAnswers\n            }\n            errors {\n                path\n                messages\n            }\n        }\n    }\n    ","\n"]);return _=function(){return e},e}function T(){var e=ge(["\n    mutation setInteractiveVideoWatchingFinishedAt($input: SetInteractiveVideoWatchingFinishedAtInput!) {\n        setInteractiveVideoWatchingFinishedAt(input: $input) {\n            watchingFinishedAt\n        }\n    }\n"]);return T=function(){return e},e}function I(){var e=ge(["\n    mutation createInteractiveAnswer($input: CreateInteractiveAnswerInput!) {\n        createInteractiveAnswer(input: $input) {\n            answer {\n                ...StudentInteractiveVideoAnswerMultipleChoice\n                ...StudentInteractiveVideoAnswerVideo\n            }\n            option {\n                dbId\n                optionText\n                optionDescription\n                correct\n            }\n        }\n    }\n    ","\n    ","\n"]);return I=function(){return e},e}function P(){var e=ge(["\n    mutation  createActivityResultPartialLink($input: CreateActivityResultPartialLinkInput!) {\n        createActivityResultPartialLink(input: $input) {\n            link {\n                ...Link\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n    ","\n"]);return P=function(){return e},e}function R(){var e=ge(["\n    mutation  combineActivityResultPartial($input: CombineActivityResultPartialMediaInput!) {\n        combineActivityResultPartialMedia(input: $input) {\n            media {\n                __typename\n                dbId\n                title\n                media {\n                    dbId\n                    allowExternalPlay\n                    processingStatus\n                    srcUrl\n                    downloadUrl\n                    externalPlayUrl\n                }\n                owner {\n                    ...StudentUser\n                }\n                finalizedAt\n            }\n        }\n    }\n    ","\n"]);return R=function(){return e},e}function A(){var e=ge(["\n    mutation createActivityResultStudentReviewRubricEvaluation($input: CreateActivityResultStudentReviewRubricEvaluationInput!) {\n        createActivityResultStudentReviewRubricEvaluation(input: $input) {\n            review {\n                date\n                user {\n                    ...StudentUser\n                }\n                rubric {\n                    dbId\n                    name\n                    rows {\n                        dbId\n                        cells {\n                            dbId\n                            description\n                            points\n                        }\n                    }\n                }\n                points\n                cells {\n                    dbId\n                    description\n                    points\n                }\n            }\n            errors {\n                path\n                message\n            }\n        }\n    }\n    ","\n"]);return A=function(){return e},e}function j(){var e=ge(["\n    mutation editActivityStudentGroupTitle($input: EditActivityStudentGroupTitleInput!) {\n        editActivityStudentGroupTitle(input: $input) {\n            group {\n                name\n            }\n        }\n    }\n"]);return j=function(){return e},e}function k(){var e=ge(["\n    mutation setResultViewed($input: SetResultViewedInput!) {\n        setResultViewed(input: $input) {\n            reviewDbId\n        }\n    }\n"]);return k=function(){return e},e}function N(){var e=ge(["\n    mutation createPeerReviewFiveStar($input: CreateActivityResultStudentReviewFiveStarRatingInput!) {\n        createActivityResultStudentReviewFiveStarRating(input: $input) {\n            review {\n                value\n            }\n        }\n    }\n"]);return N=function(){return e},e}function D(){var e=ge(["\n    mutation deletePeerReviewComment($input: DeleteActivityResultCommentInput!) {\n        deleteActivityResultComment(input: $input) {\n            removedId\n        }\n    }\n"]);return D=function(){return e},e}function L(){var e=ge(["\n    mutation editPeerReviewComment($input: EditActivityResultCommentInput!) {\n        editActivityResultComment(input: $input) {\n            comment {\n                ...Comment\n                ...AnonymousComment\n            }\n        }\n    }\n    ","\n    ","\n"]);return L=function(){return e},e}function M(){var e=ge(["\n    mutation createPeerReviewComment($input: CreateActivityResultCommentInput!) {\n        createActivityResultComment(input: $input) {\n            comment {\n                ...Comment\n                ...AnonymousComment\n            }\n        }\n    }\n    ","\n    ","\n"]);return M=function(){return e},e}function x(){var e=ge(["\n    mutation createStudentGroupReviewComment($input: CreateActivityStudentGroupReviewCommentInput!) {\n        createActivityStudentGroupReviewComment(input: $input) {\n            comment\n        }\n    }\n"]);return x=function(){return e},e}function F(){var e=ge(["\n    mutation createActivityStudentGroupReviewRubricEvaluation($input: CreateActivityStudentGroupReviewRubricEvaluationInput!) {\n        createActivityStudentGroupReviewRubricEvaluation(input: $input) {\n            review {\n                ...GroupReviewRubricWithUser\n                ...GroupReviewRubricAnonymous\n            }\n        }\n    }\n    ","\n    ","\n    ","\n"]);return F=function(){return e},e}function V(){var e=ge(["\n    mutation createStudentGroupReviewFiveStar($input: CreateActivityStudentGroupReviewFiveStarRatingInput!) {\n        createActivityStudentGroupReviewFiveStarRating(input: $input) {\n            review {\n                ...FiveStarRatingWithUser\n                ...FiveStarRatingAnonymous\n            }\n        }\n    }\n    ","\n    ","\n"]);return V=function(){return e},e}function G(){var e=ge(["\n    mutation deleteActivityStudentGroupComment($input: DeleteActivityStudentGroupCommentInput!) {\n        deleteActivityStudentGroupComment(input: $input) {\n            removedId\n        }\n    }\n"]);return G=function(){return e},e}function U(){var e=ge(["\n    mutation createGroupComment($input: CreateActivityStudentGroupCommentInput!) {\n        createActivityStudentGroupComment(input: $input) {\n            comment {\n                dbId\n                text\n                isSystem\n                user {\n                    dbId\n                    firstName\n                    lastName\n                }\n                createdAt\n            }\n            errors {\n                path\n                messages\n            }\n        }\n    }\n"]);return U=function(){return e},e}function q(){var e=ge(["\n    mutation deleteSubmission($input: DeleteActivityResultInput!){\n        deleteActivityResult(input: $input) {\n            removedId\n        }\n    }\n"]);return q=function(){return e},e}function W(){var e=ge(["\n    mutation requestCreatingQaSubmit($input: RequestQaSubmitInput!){\n        requestCreatingQaSubmit(input: $input) {\n            requestedAt\n        }\n    }\n"]);return W=function(){return e},e}function B(){var e=ge(["\n    mutation submitAssignment($input: CreateActivityResultInput!){\n        createActivityResult(input: $input) {\n            result {\n                submittedAt\n            }\n        }\n    }\n"]);return B=function(){return e},e}function Q(){var e=ge(["\n    mutation editMediaTitle($input: EditActivityResultPartialMediaTitleInput!) {\n        editActivityResultPartialMediaTitle(input: $input) {\n            media {\n                __typename\n                dbId\n                title\n                media {\n                    ...MediaFull\n                }\n                owner {\n                    dbId\n                    firstName\n                    lastName\n                }\n                finalizedAt\n            }\n        }\n    }\n    ","\n"]);return Q=function(){return e},e}function Y(){var e=ge(["\n    mutation editMeetingTitle($input: EditActivityResultPartialMeetingTitleInput!) {\n        editActivityResultPartialMeetingTitle(input: $input) {\n            meeting {\n                ...MeetingPartial\n            }\n        }\n    }\n    ","\n"]);return Y=function(){return e},e}function H(){var e=ge(["\n    mutation editLinkTitle($input: EditActivityResultPartialLinkTitleInput!) {\n        editActivityResultPartialLinkTitle(input: $input) {\n            link {\n                __typename\n                dbId\n                title\n                url\n                owner {\n                    dbId\n                    firstName\n                    lastName\n                }\n                finalizedAt\n            }\n        }\n    }\n"]);return H=function(){return e},e}function z(){var e=ge(["\n    mutation editDocumentTitle($input: EditActivityResultPartialDocumentTitleInput!) {\n        editActivityResultPartialDocumentTitle(input: $input) {\n            document {\n                __typename\n                dbId\n                title\n                downloadUrl\n                previewUrl\n                owner {\n                    dbId\n                    firstName\n                    lastName\n                }\n                finalizedAt\n            }\n        }\n    }\n"]);return z=function(){return e},e}function K(){var e=ge(["\n    mutation moveMeetingToProgress($input: ChangeActivityResultPartialMeetingStatusInput!){\n        changeActivityResultPartialMeetingStatusToWorkInProgress(input: $input) {\n            meeting {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return K=function(){return e},e}function X(){var e=ge(["\n    mutation moveMediaToProgress($input: ChangeActivityResultPartialMediaStatusInput!){\n        changeActivityResultPartialMediaStatusToWorkInProgress(input: $input) {\n            media {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return X=function(){return e},e}function $(){var e=ge(["\n    mutation moveLinkToProgress($input: ChangeActivityResultPartialLinkStatusInput!){\n        changeActivityResultPartialLinkStatusToWorkInProgress(input: $input) {\n            link {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return $=function(){return e},e}function Z(){var e=ge(["\n    mutation moveDocumentToProgress($input: ChangeActivityResultPartialDocumentStatusInput!){\n        changeActivityResultPartialDocumentStatusToWorkInProgress(input: $input) {\n            document {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return Z=function(){return e},e}function J(){var e=ge(["\n    mutation moveMeetingToSubmit($input: ChangeActivityResultPartialMeetingStatusInput!){\n        changeActivityResultPartialMeetingStatusToReadyToSubmit(input: $input) {\n            meeting {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return J=function(){return e},e}function ee(){var e=ge(["\n    mutation moveMediaToSubmit($input: ChangeActivityResultPartialMediaStatusInput!){\n        changeActivityResultPartialMediaStatusToReadyToSubmit(input: $input) {\n            media {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return ee=function(){return e},e}function te(){var e=ge(["\n    mutation moveLinkToSubmit($input: ChangeActivityResultPartialLinkStatusInput!){\n        changeActivityResultPartialLinkStatusToReadyToSubmit(input: $input) {\n            link {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return te=function(){return e},e}function ne(){var e=ge(["\n    mutation moveDocumentToSubmit($input: ChangeActivityResultPartialDocumentStatusInput!){\n        changeActivityResultPartialDocumentStatusToReadyToSubmit(input: $input) {\n            document {\n                dbId\n                finalizedAt\n            }\n        }\n    }\n"]);return ne=function(){return e},e}function re(){var e=ge(["\n    mutation addFile($input: UploadActivityResultPartialDocumentInput!) {\n        uploadActivityResultPartialDocument(input: $input){\n            errors {\n                path\n                messages\n            }\n        }\n    }\n\n"]);return re=function(){return e},e}function ae(){var e=ge(["\n    mutation deleteMedia($input:  DeleteActivityResultPartialInput!) {\n        deleteActivityResultPartialLink(input: $input) {\n            removedId\n        }\n    }\n"]);return ae=function(){return e},e}function oe(){var e=ge(["\n    mutation deleteDocument($input:  DeleteActivityResultPartialInput!) {\n        deleteActivityResultPartialDocument(input: $input) {\n            removedId\n        }\n    }\n"]);return oe=function(){return e},e}function ie(){var e=ge(["\n    mutation deleteMedia($input:  DeleteActivityResultPartialInput!) {\n        deleteActivityResultPartialMedia(input: $input) {\n            removedId\n        }\n    }\n"]);return ie=function(){return e},e}function ce(){var e=ge(["\n    mutation deleteMeeting($input:  DeleteActivityResultPartialInput!) {\n        deleteActivityResultPartialMeeting(input: $input) {\n            removedId\n        }\n    }\n"]);return ce=function(){return e},e}function se(){var e=ge(["\n    mutation cancelMeeting($input:  CancelActivityResultPartialMeetingInput!) {\n        cancelActivityResultPartialMeeting(input: $input) {\n            errors {\n                path\n                messages\n            }\n            meeting {\n                dbId\n            }\n        }\n    }\n"]);return se=function(){return e},e}function ue(){var e=ge(["\n    mutation editMeeting($input: EditActivityResultPartialMeetingInput!){\n        editActivityResultPartialMeeting(input: $input){\n            errors {\n                path\n                messages\n            }\n            meeting {\n                dbId\n                title\n                recordedMedia: media {\n                    ...MediaFull\n                }\n                owner {\n                    dbId\n                    firstName\n                    lastName\n                }\n                scheduledAt\n                finalizedAt\n            }\n        }\n    }\n    ","\n"]);return ue=function(){return e},e}function le(){var e=ge(["\n    mutation createActivityResultPartialMeeting($input: CreateActivityResultPartialMeetingInput!) {\n        createActivityResultPartialMeeting(input: $input){\n            errors {\n                path\n                messages\n            }\n            meeting {\n                dbId\n                title\n                recordedMedia: media {\n                    ...MediaFull\n                }\n                owner {\n                    dbId\n                    firstName\n                    lastName\n                }\n                scheduledAt\n                finalizedAt\n            }\n        }\n    }\n    ","\n"]);return le=function(){return e},e}function de(){var e=ge(["\n    mutation editMilestone($input: EditMilestoneInput!){\n        editMilestone(input: $input){\n            errors {\n                path\n                messages\n            }\n            milestone {\n                dbId\n                description\n                assignedTo{\n                    dbId\n                    firstName\n                    lastName\n                }\n                status\n                dueDate\n            }\n        }\n    }\n"]);return de=function(){return e},e}function fe(){var e=ge(["\n    mutation createMilestone($input: CreateMilestoneInput!){\n        createMilestone(input: $input){\n            errors {\n                path\n                messages\n            }\n            milestone {\n                dbId\n                description\n                assignedTo{\n                    dbId\n                    firstName\n                    lastName\n                }\n                status\n                dueDate\n            }\n        }\n    }\n"]);return fe=function(){return e},e}function pe(){var e=ge(["\n    mutation userViewedActivityEvent($activityDbId: Int!){\n        userViewedActivityEvent(activityDbId: $activityDbId) {\n            event {\n                createdAt\n            }\n        }\n    }\n"]);return pe=function(){return e},e}function me(){var e=ge(["\n    query getActivityResults($activityId: Int!) {\n        activity(dbId:$activityId) {\n            myData {\n                resultPartials {\n                    ... on ActivityResultPartialDocument{\n                        ...Document\n                    }\n                    ... on ActivityResultPartialLink {\n                        ...Link\n                    }\n                    ... on ActivityResultPartialMedia {\n                        ...MediaPartial\n                    }\n                    ... on ActivityResultPartialMeeting {\n                        ...MeetingPartial\n                    }\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return me=function(){return e},e}function be(){var e=ge(["\n    query getActivityInfo($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            myData {\n                result {\n                    ... on ActivityResultIndividualProject {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultQa {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultGroupProject {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment\n                        }\n                    }\n                    ... on ActivityResultInteractiveVideo {\n                        comments {\n                            ...Comment\n                            ...AnonymousComment                            \n                        }\n                    }\n                }\n            }\n        }\n    }\n    ","\n    ","\n"]);return be=function(){return e},e}function ye(){var e=ge(["\n    query getActivityInfo($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            reviewedResults {\n                ...StudentQAProjectResult\n                ...StudentIndividualProjectResult\n                ...StudentGroupProjectResult\n                ...StudentInteractiveVideoProjectResult\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return ye=function(){return e},e}function ve(){var e=ge(["\n    query getActivityInfo($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            availableResults {\n                ...StudentQAProjectResult\n                ...StudentIndividualProjectResult\n                ...StudentGroupProjectResult\n                ...StudentInteractiveVideoProjectResult\n            }\n            reviewedResults {\n                ...StudentQAProjectResult\n                ...StudentIndividualProjectResult\n                ...StudentGroupProjectResult\n                ...StudentInteractiveVideoProjectResult\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return ve=function(){return e},e}function he(){var e=ge(["\n    query getActivityInfo($activityId: Int!) {\n        activity(dbId: $activityId) {\n            dbId\n            name\n            className\n            type\n            allowViewOthersResultsWithoutOwn\n            termClass {\n                dbId\n            }\n        }\n    }\n"]);return he=function(){return e},e}function ge(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),we(this,"getGroupActivityData",(function(e){return t.getActivity(e,h.d)})),we(this,"getGroupFormationData",(function(e){return t.getActivity(e,h.f)})),we(this,"getIndividualActivity",(function(e){return t.getActivity(e,v.d)})),we(this,"getQAActivity",(function(e){return t.getActivity(e,g.d)})),we(this,"getInteractiveVideoActivity",(function(e){return t.getActivity(e,E.f)})),we(this,"refreshGroupProgressActivity",(function(e){return t.refreshActivity(e,h.h)})),we(this,"refreshGroupSubmittedActivity",(function(e){return t.refreshActivity(e,h.e)})),we(this,"refreshIndividualProgressActivity",(function(e){return t.refreshActivity(e,v.e)})),we(this,"refreshIndividualSubmittedActivity",(function(e){return t.refreshActivity(e,v.g)})),we(this,"refreshInteractiveVideoProgressActivity",(function(e){return t.refreshActivity(e,E.g)})),we(this,"refreshInteractiveVideoSubmittedActivity",(function(e){return t.refreshActivity(e,E.i)})),we(this,"saveTeamEvalFiveStar",(function(e,n,a,o,s){return new Promise((function(u,l){i.a.dispatch(c.nc(!0)),r.a.mutate({mutation:nt,variables:{input:{activityDbId:e,peerDbId:n,value:a}}}).then((function(r){t.saveTeamEvalComment(e,n,o).then((function(e){var t=r.data.createActivityStudentGroupReviewFiveStarRating.review;t.comment=e.data.createActivityStudentGroupReviewComment.comment,t.peerDbId=n,i.a.dispatch(c.pb(t)),i.a.dispatch(c.nc(!1)),s&&s(),u()}))})).catch((function(e){l(e),i.a.dispatch(c.nc(!1))}))}))})),we(this,"saveTeamEvalRubricPoints",(function(e,t,n,a,o){return new Promise((function(a,s){i.a.dispatch(c.nc(!0));for(var u={rows:[]},l=0;l<n.length;l++)u.rows[l]={evaluationCell:n[l]};r.a.mutate({mutation:rt,variables:{input:{activityDbId:e,peerDbId:t,review:u}}}).then((function(e){if(e&&e.data){var n=e.data.createActivityStudentGroupReviewRubricEvaluation.review;i.a.dispatch(c.rb(n,t)),o&&o(),a(n)}else s(e);i.a.dispatch(c.nc(!1))})).catch((function(e){s(e),i.a.dispatch(c.nc(!1))}))}))}))}var t,n,a;return t=e,(n=[{key:"getBasicActivityData",value:function(e){return new Promise((function(t,n){r.a.query({query:Oe,variables:{activityId:e},errorPolicy:"ignore"}).then((function(e){e&&e.data?t(e.data.activity):n(e)})).catch((function(e){n(e)}))}))}},{key:"getActivityData",value:function(e){var t=this;return new Promise((function(n,a){i.a.dispatch(c.dc(!0)),r.a.query({query:Oe,variables:{activityId:e},errorPolicy:"ignore"}).then((function(r){r&&r.data?t.getActivityByType(r.data.activity).then((function(r){r.data&&r.data.activity?(t.sendUserViewedEvent(e),i.a.dispatch(c.Tb(r.data.activity)),n(r.data.activity),i.a.dispatch(c.dc(!1))):(a(r),i.a.dispatch(c.dc(!1)))})).catch((function(e){a(e),i.a.dispatch(c.dc(!1))})):(a(r),i.a.dispatch(c.dc(!1)))})).catch((function(e){a(e),i.a.dispatch(c.dc(!1))}))}))}},{key:"sendUserViewedEvent",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Pe,variables:{activityDbId:e}}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"getEducatorProgressActivityData",value:function(e,t){var n=this;return new Promise((function(a,o){i.a.dispatch(c.dc(!0)),i.a.dispatch(c.Tb(null)),r.a.query({query:Oe,variables:{activityId:e},errorPolicy:"ignore"}).then((function(r){r&&r.data?n.getEducatorActivityProgressByType(e,r.data.activity.type,t).then((function(e){if(e&&e.data){var t=u.a.clone(e.data.activity);t.myData=t.dataForOneStudent,i.a.dispatch(c.Tb(t)),a(t),i.a.dispatch(c.dc(!1))}else o(e),i.a.dispatch(c.dc(!1))})).catch((function(e){o(e),i.a.dispatch(c.dc(!1))})):(o(r),i.a.dispatch(c.dc(!1)))})).catch((function(e){o(e),i.a.dispatch(c.dc(!1))}))}))}},{key:"refreshEducatorProgressActivityData",value:function(e,t,n){var r=this;return new Promise((function(a,o){i.a.dispatch(c.jc(!0)),r.getEducatorActivityProgressByType(e,t,n).then((function(e){if(e&&e.data){var t=u.a.clone(e.data.activity);t.myData=t.dataForOneStudent,i.a.dispatch(c.Tb(t)),i.a.dispatch(c.jc(!1)),a(e)}else i.a.dispatch(c.jc(!1)),o(e)})).catch((function(e){o(e),i.a.dispatch(c.jc(!1))}))}))}},{key:"getActivityByType",value:function(e){var t=e.dbId;switch(e.type){case d.b.QA_ENHANCED:return this.getQAActivity(t);case d.b.INDIVIDUAL_PROJECT:return this.getIndividualActivity(t);case d.b.GROUP_PRESENTATION:return this.getGroupActivity(t);case d.b.INTERACTIVE_VIDEO:return this.getInteractiveVideoActivity(t);default:return null}}},{key:"refreshActivityData",value:function(e){var t=this,n=u.a.pick(e,["dbId","type"]);return new Promise((function(e,r){t.getActivityByType(n).then((function(t){t.data&&t.data.activity?(i.a.dispatch(c.Tb(t.data.activity)),e(t.data.activity)):r(t)})).catch((function(e){r(e)}))}))}},{key:"getEducatorActivityProgressByType",value:function(e,t,n){var r=null;switch(t){case d.b.QA_ENHANCED:r=g.b;break;case d.b.INDIVIDUAL_PROJECT:r=v.b;break;case d.b.GROUP_PRESENTATION:r=h.b;break;case d.b.INTERACTIVE_VIDEO:r=E.b;break;default:return null}return r?this.getEducatorActivityProgress(r,e,n):null}},{key:"getGroupActivity",value:function(e){var t=this;return new Promise((function(n,a){r.a.query({query:h.g,variables:{activityId:e},errorPolicy:"all"}).then((function(o){if(o&&o.data&&o.data.activity){var s=o.data.activity;if(!s.allowGroupsForming||s.myData&&s.myData.studentGroup&&s.myData.studentGroup.dbId)r.a.query({query:h.d,variables:{activityId:e},errorPolicy:"all"}).then((function(e){n(e)})).catch((function(e){a(e),i.a.dispatch(c.dc(!1))}));else switch(s.executorsType){case O.a.SYSTEM_FORMED:n(o);break;case O.a.STUDENT_FORMED:default:t.getGroupFormationData(e).then((function(e){n(e)})).catch((function(e){a(e),i.a.dispatch(c.dc(!1))}))}}else i.a.dispatch(c.dc(!1)),a(o)})).catch((function(e){a(e),i.a.dispatch(c.dc(!1))}))}))}},{key:"getActivity",value:function(e,t){return r.a.query({query:t,variables:{activityId:e},errorPolicy:"all"})}},{key:"getEducatorActivityProgress",value:function(e,t,n){return r.a.query({query:e,variables:{activityId:t,studentId:n},errorPolicy:"all"})}},{key:"refreshActivity",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.Vb(!0)),r.a.query({query:t,variables:{activityId:e},errorPolicy:"ignore"}).then((function(e){e&&e.data?(i.a.dispatch(c.Rb(e.data.activity)),n(e.data.activity)):a(e),i.a.dispatch(c.Vb(!1))})).catch((function(e){a(e),i.a.dispatch(c.Vb(!1))}))}))}},{key:"createMeeting",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.ec(!0)),r.a.mutate({mutation:je,variables:{input:{activityDbId:e,meeting:{scheduledAt:t.scheduledAt,title:t.title}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityResultPartialMeeting.errors;0===t.length?(i.a.dispatch(c.ub(e.data.createActivityResultPartialMeeting.meeting)),n(e.data.createActivityResultPartialMeeting)):a(t)}else a(e);i.a.dispatch(c.ec(!1))})).catch((function(e){a(e),i.a.dispatch(c.ec(!1))}))}))}},{key:"createLink",value:function(e,t,n){var a={activityDbId:e,link:{title:t,url:n}};return r.a.mutate({mutation:pt,variables:{input:a}}).then((function(e){var t=e.data.createActivityResultPartialLink.errors;return t&&t.length?Promise.reject(t):Promise.resolve(e.data.createActivityResultPartialLink.link)}))}},{key:"editMeeting",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.ec(!0)),r.a.mutate({mutation:ke,variables:{input:{dbId:e.dbId,meeting:{scheduledAt:e.scheduledAt,title:e.title}}}}).then((function(e){if(e&&e.data){var r=e.data.editActivityResultPartialMeeting.errors;0===r.length?(i.a.dispatch(c.Mb(e.data.editActivityResultPartialMeeting.meeting)),t(e.data.editActivityResultPartialMeeting)):n(r)}else n(e);i.a.dispatch(c.ec(!1))})).catch((function(e){n(e),i.a.dispatch(c.ec(!1))}))}))}},{key:"cancelMeeting",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.ec(!0)),r.a.mutate({mutation:Ne,variables:{input:{dbId:e}}}).then((function(e){e&&e.data?(i.a.dispatch(c.Eb(e.data.cancelActivityResultPartialMeeting.meeting.dbId)),t(e.data.cancelActivityResultPartialMeeting)):n(e),i.a.dispatch(c.ec(!1))})).catch((function(e){n(e),i.a.dispatch(c.ec(!1))}))}))}},{key:"deleteMeeting",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.ec(!0)),r.a.mutate({mutation:De,variables:{input:{dbId:e}}}).then((function(e){e&&e.data?t(e):n(e),i.a.dispatch(c.ec(!1))})).catch((function(e){n(e),i.a.dispatch(c.ec(!1))}))}))}},{key:"createMilestone",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.fc(!0)),r.a.mutate({mutation:Re,variables:{input:{groupDbId:t.groupDbId,milestone:{dueDate:t.dueDate,description:t.description,status:t.status,assignedTo:t.assignedTo}}}}).then((function(t){t&&t.data?0===t.data.createMilestone.errors.length?(i.a.dispatch(c.vb(t.data.createMilestone.milestone)),e(t.data.createMilestone)):n(t.data.createMilestone):n(t),i.a.dispatch(c.fc(!1))})).catch((function(e){n(e),i.a.dispatch(c.fc(!1))}))}))}},{key:"editMilestone",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.fc(!0)),r.a.mutate({mutation:Ae,variables:{input:{dbId:t.dbId,milestone:{dueDate:t.dueDate,description:t.description,status:t.status,assignedTo:t.assignedTo}}}}).then((function(t){t&&t.data?0===t.data.editMilestone.errors.length?(i.a.dispatch(c.Nb(t.data.editMilestone.milestone)),e(t.data.editMilestone)):n(t.data.editMilestone):n(t),i.a.dispatch(c.fc(!1))})).catch((function(e){n(e),i.a.dispatch(c.fc(!1))}))}))}},{key:"deleteMilestone",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.fc(!0)),r.a.mutate({mutation:Ae,variables:{input:{dbId:t.dbId,milestone:{dueDate:t.dueDate,description:t.description,status:t.status,assignedTo:t.assignedTo}}}}).then((function(t){t&&t.data?0===t.data.editMilestone.errors.length?(i.a.dispatch(c.Fb(t.data.editMilestone.milestone)),e(t.data.editMilestone)):n(t.data.editMilestone):n(t),i.a.dispatch(c.fc(!1))})).catch((function(e){n(e),i.a.dispatch(c.fc(!1))}))}))}},{key:"getActivityResults",value:function(e){return new Promise((function(t,n){return i.a.dispatch(c.mc(!0)),r.a.query({query:Ie,variables:{activityId:e}}).then((function(e){if(e&&e.data){var r=e.data.activity.myData.resultPartials;i.a.dispatch(c.lc(r)),t(r)}else n(e.data.activity);i.a.dispatch(c.mc(!1))})).catch((function(e){n(e),i.a.dispatch(c.mc(!1))}))}))}},{key:"parseSubmitErrors",value:function(e){var t={};return e.forEach((function(e){var n=e.path.pop();t[n]=e.messages})),t}},{key:"addPartialsToReadyForSubmit",value:function(e,t){var n=this;i.a.dispatch(c.mc(!0));var r=t.map((function(e){return l.a.isDocument(e)?n.moveDocumentToReadyToSubmit(e):l.a.isLink(e)?n.moveLinkToReadyToSubmit(e):l.a.isMedia(e)?n.moveMediaToReadyToSubmit(e):l.a.isMeeting(e)?n.moveMeetingToReadyToSubmit(e):null}));return Promise.all(r).then((function(){i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Jb())})).catch((function(){i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Jb())}))}},{key:"addPartialsToInProgress",value:function(e,t){var n=this;i.a.dispatch(c.mc(!0));var r=t.map((function(e){return l.a.isDocument(e)?n.moveDocumentToProgress(e):l.a.isLink(e)?n.moveLinkToProgress(e):l.a.isMedia(e)?n.moveMediaToProgress(e):l.a.isMeeting(e)?n.moveMeetingToProgress(e):null}));return Promise.all(r).then((function(){i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Kb())})).catch((function(){i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Kb())}))}},{key:"addFile",value:function(e,t){var n=this;return new Promise((function(a,o){r.a.mutate({mutation:Fe,variables:{input:{activityDbId:t,"document[fileInfo][file]":e}}}).then((function(e){var r=e.data.uploadActivityResultPartialDocument.errors;if(r.length){var i=n.parseSubmitErrors(r);o(i)}else a(e);n.getActivityResults(t)})).catch((function(e){o(e)}))}))}},{key:"editPartials",value:function(e){var t=this;i.a.dispatch(c.mc(!0));var n=e.map((function(e){return l.a.isDocument(e)?t.editDocumentTitle(e):l.a.isLink(e)?t.editLinkTitle(e):l.a.isMedia(e)?t.editMediaTitle(e):l.a.isMeeting(e)?t.editMeetingTitle(e):null}));return Promise.all(n).then((function(){i.a.dispatch(c.mc(!1))})).catch((function(e){return i.a.dispatch(c.mc(!1)),Promise.reject(e)}))}},{key:"deletePartials",value:function(e){var t=this;i.a.dispatch(c.mc(!0));var n=e.map((function(e){return l.a.isDocument(e)?t.deleteDocument(e):l.a.isLink(e)?t.deleteLink(e):l.a.isMedia(e)?t.deleteMedia(e):l.a.isMeeting(e)?t.deleteMeeting(e.dbId):null}));return Promise.all(n).then((function(){i.a.dispatch(c.mc(!1))})).catch((function(){i.a.dispatch(c.mc(!1))}))}},{key:"deleteDocument",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Me,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.deleteActivityResultPartialDocument.removedId;i.a.dispatch(c.Gb(r)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"deleteLink",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:xe,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.deleteActivityResultPartialLink.removedId;i.a.dispatch(c.Gb(r)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"deleteMedia",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Le,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.deleteActivityResultPartialMedia.removedId;i.a.dispatch(c.Db(r)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveDocumentToReadyToSubmit",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Ve,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialDocumentStatusToReadyToSubmit.document;i.a.dispatch(c.xb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveLinkToReadyToSubmit",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Ge,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialLinkStatusToReadyToSubmit.link;i.a.dispatch(c.xb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveMediaToReadyToSubmit",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Ue,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialMediaStatusToReadyToSubmit.media;i.a.dispatch(c.xb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveMeetingToReadyToSubmit",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:qe,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialMeetingStatusToReadyToSubmit.meeting;i.a.dispatch(c.xb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveDocumentToProgress",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:We,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialDocumentStatusToWorkInProgress.document;i.a.dispatch(c.wb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveLinkToProgress",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Be,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialLinkStatusToWorkInProgress.link;i.a.dispatch(c.wb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveMediaToProgress",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Qe,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialMediaStatusToWorkInProgress.media;i.a.dispatch(c.wb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"moveMeetingToProgress",value:function(e){return new Promise((function(t,n){r.a.mutate({mutation:Ye,variables:{input:{dbId:e.dbId}}}).then((function(e){if(e&&e.data){var r=e.data.changeActivityResultPartialMeetingStatusToWorkInProgress.meeting;i.a.dispatch(c.wb([r])),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"editDocumentTitle",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.mc(!0)),r.a.mutate({mutation:He,variables:{input:{dbId:e.dbId,title:e.title}}}).then((function(e){if(e&&e.errors&&e.errors.length)return n(e.errors);if(e&&e.data){var r=e.data.editActivityResultPartialDocumentTitle.document;i.a.dispatch(c.Ob(r)),t(r)}else n(e);i.a.dispatch(c.mc(!1))})).catch((function(e){n(e),i.a.dispatch(c.mc(!1))}))}))}},{key:"editLinkTitle",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.mc(!0)),r.a.mutate({mutation:ze,variables:{input:{dbId:e.dbId,title:e.title}}}).then((function(e){if(e&&e.errors&&e.errors.length)return n(e.errors);if(e&&e.data){var r=e.data.editActivityResultPartialLinkTitle.link;i.a.dispatch(c.Ob(r)),t(r)}else n(e);i.a.dispatch(c.mc(!1))})).catch((function(e){n(e),i.a.dispatch(c.mc(!1))}))}))}},{key:"editMediaTitle",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.mc(!0)),r.a.mutate({mutation:Xe,variables:{input:{dbId:e.dbId,title:e.title}}}).then((function(e){if(e&&e.errors&&e.errors.length)return n(e.errors);if(e&&e.data){var r=e.data.editActivityResultPartialMediaTitle.media;i.a.dispatch(c.Ob(r)),t(r)}else n(e);i.a.dispatch(c.mc(!1))})).catch((function(e){n(e),i.a.dispatch(c.mc(!1))}))}))}},{key:"editMeetingTitle",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.mc(!0)),r.a.mutate({mutation:Ke,variables:{input:{dbId:e.dbId,title:e.title}}}).then((function(e){if(e&&e.errors&&e.errors.length)return n(e.errors);if(e&&e.data){var r=e.data.editActivityResultPartialMeetingTitle.meeting;i.a.dispatch(c.Ob(r)),t(r)}else n(e);i.a.dispatch(c.mc(!1))})).catch((function(e){n(e),i.a.dispatch(c.mc(!1))}))}))}},{key:"addGroupComment",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.Yb(!0)),r.a.mutate({mutation:et,variables:{input:{groupDbId:t,comment:{body:e}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityStudentGroupComment.comment;i.a.dispatch(c.ob(t)),n(t)}else a(e);i.a.dispatch(c.Yb(!1))})).catch((function(e){a(e),i.a.dispatch(c.Yb(!1))}))}))}},{key:"deleteGroupComment",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.Yb(!0)),r.a.mutate({mutation:tt,variables:{input:{dbId:e}}}).then((function(e){if(e&&e.data){var r=e.data.deleteActivityStudentGroupComment.removedId;i.a.dispatch(c.Cb(r)),t(r)}else n(e);i.a.dispatch(c.Yb(!1))})).catch((function(e){n(e),i.a.dispatch(c.Yb(!1))}))}))}},{key:"submitAssignment",value:function(e){var t=this;return new Promise((function(n,a){i.a.dispatch(c.mc(!0)),i.a.dispatch(c.Ub(!0)),r.a.mutate({mutation:$e,variables:{input:{activityDbId:e}}}).then((function(r){n(r),i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Ub(!1)),t.getActivityData(e)})).catch((function(e){a(e),i.a.dispatch(c.mc(!1)),i.a.dispatch(c.Ub(!1))}))}))}},{key:"submitQAActivity",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.Ub(!0)),r.a.mutate({mutation:Ze,variables:{input:{activityDbId:e}}}).then((function(e){if(e&&e.data){var r=e.data.requestCreatingQaSubmit;i.a.dispatch(c.hc(r)),t(r)}else n(e);i.a.dispatch(c.Ub(!1))})).catch((function(e){n(e),i.a.dispatch(c.Ub(!1))}))}))}},{key:"deleteSubmission",value:function(e){var t=this;return new Promise((function(n,a){i.a.dispatch(c.kc(!0)),r.a.mutate({mutation:Je,variables:{input:{activityDbId:e}}}).then((function(r){if(r&&r.data){var o=r.data.deleteActivityResult.result;i.a.dispatch(c.Ib(o)),n(o),t.getActivityData(e)}else a(r);i.a.dispatch(c.kc(!1))})).catch((function(e){a(e),i.a.dispatch(c.kc(!1))}))}))}},{key:"saveRubricTeamEvalComment",value:function(e,t,n){return this.saveTeamEvalComment(e,t,n).then((function(e){i.a.dispatch(c.qb({comment:e.data.createActivityStudentGroupReviewComment.comment,peerDbId:t})),i.a.dispatch(c.nc(!1))}))}},{key:"saveTeamEvalComment",value:function(e,t,n){return new Promise((function(a,o){i.a.dispatch(c.nc(!0)),r.a.mutate({mutation:at,variables:{input:{activityDbId:e,peerDbId:t,comment:{commentText:n}}}}).then((function(e){i.a.dispatch(c.nc(!1)),a(e)})).catch((function(e){o(e),i.a.dispatch(c.nc(!1))}))}))}},{key:"addPeerReviewComment",value:function(e,t,n,a){var o=this;return new Promise((function(s,u){i.a.dispatch(c.gc(!0)),r.a.mutate({mutation:ot,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentText:n,syncTime:a}}}}).then((function(){o.getPeerReviews(e).then((function(){i.a.dispatch(c.gc(!1)),s()})).catch((function(e){u(e),i.a.dispatch(c.gc(!1))}))})).catch((function(e){u(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"addPeerReviewVideo",value:function(e,t,n,a){var o=this;return new Promise((function(s,u){i.a.dispatch(c.gc(!0)),r.a.mutate({mutation:ot,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentMedia:n,syncTime:a}}}}).then((function(){o.getPeerReviews(e).then((function(){i.a.dispatch(c.gc(!1)),s()})).catch((function(e){u(e),i.a.dispatch(c.gc(!1))}))})).catch((function(e){u(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"editPeerReviewComment",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.gc(!0)),r.a.mutate({mutation:it,variables:{input:{dbId:e,comment:{commentText:t.commentText,commentMedia:t.commentMedia,syncTime:t.syncTime}}}}).then((function(e){if(e&&e.data){var t=e.data.editActivityResultComment.comment;i.a.dispatch(c.Pb(e.data.editActivityResultComment.comment)),n(t)}else a(e);i.a.dispatch(c.gc(!1))})).catch((function(e){a(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"deletePeerReviewComment",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.gc(!0)),r.a.mutate({mutation:ct,variables:{input:{dbId:t}}}).then((function(t){if(t&&t.data){var r=t.data.deleteActivityResultComment;i.a.dispatch(c.Hb(r)),i.a.dispatch(c.gc(!1)),e(r)}else i.a.dispatch(c.gc(!1)),n(t)})).catch((function(e){n(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"createPeerReviewFiveStar",value:function(e,t,n){var a=this;return new Promise((function(o,s){i.a.dispatch(c.gc(!0)),r.a.mutate({mutation:st,variables:{input:{activityDbId:e,submitterDbId:t,value:n}}}).then((function(n){if(n&&n.data){var r=n.data.createActivityResultStudentReviewFiveStarRating;r.submitter={dbId:t},i.a.dispatch(c.zb(r)),a.getPeerReviews(e).then((function(){o(),i.a.dispatch(c.gc(!1))})).catch((function(e){s(e),i.a.dispatch(c.gc(!1))}))}else s(n)})).catch((function(e){s(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"getPeerReviews",value:function(e){return new Promise((function(t,n){r.a.query({query:Ce,variables:{activityId:e}}).then((function(e){e&&e.data?(i.a.dispatch(c.oc(e.data.activity)),t(e.data.activity)):n(e)})).catch((function(e){n(e)}))}))}},{key:"setPeerReviewViewed",value:function(e,t){var n=this;return new Promise((function(a,o){r.a.mutate({mutation:ut,variables:{input:{activityDbId:e,submitterDbId:t}}}).then((function(t){t&&t.data?n.getPeerReviews(e).then((function(){a()})).catch((function(e){o(e)})):o(t)})).catch((function(e){o(e)}))}))}},{key:"getResultComments",value:function(e){return new Promise((function(t,n){r.a.query({query:Te,variables:{activityId:e}}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(c.Sb(r.myData.result.comments)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"getReviewedPeerReviews",value:function(e){return new Promise((function(t,n){r.a.query({query:_e,variables:{activityId:e}}).then((function(e){if(e&&e.data){var r=e.data.activity;i.a.dispatch(c.oc(r)),t(r)}else n(e)})).catch((function(e){n(e)}))}))}},{key:"combineVideos",value:function(e,t){return new Promise((function(n,a){r.a.mutate({mutation:ft,variables:{input:{activityDbId:e,partialMediaDbIds:t}}}).then((function(e){if(e&&e.data){var t=e.data.combineActivityResultPartialMedia.media;i.a.dispatch(c.tb(t)),n(t)}else a(e)})).catch((function(e){a(e)}))}))}},{key:"addFeedbackComment",value:function(e,t,n,a){return new Promise((function(o,s){i.a.dispatch(c.Xb(!0)),r.a.mutate({mutation:ot,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentText:n,syncTime:a}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityResultComment.comment;i.a.dispatch(c.nb(t)),o(t)}else s(e);i.a.dispatch(c.Xb(!1))})).catch((function(e){s(e),i.a.dispatch(c.Xb(!1))}))}))}},{key:"deleteFeedbackComment",value:function(e,t){return new Promise((function(e,n){i.a.dispatch(c.Xb(!0)),r.a.mutate({mutation:ct,variables:{input:{dbId:t}}}).then((function(t){if(t&&t.data){var r=t.data.deleteActivityResultComment;i.a.dispatch(c.Bb(r)),e(r)}else n(t);i.a.dispatch(c.Xb(!1))})).catch((function(e){n(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"editFeedbackComment",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.Xb(!0)),r.a.mutate({mutation:it,variables:{input:{dbId:e,comment:{commentText:t.commentText,commentMedia:t.commentMedia,syncTime:t.syncTime}}}}).then((function(e){if(e&&e.data){var t=e.data.editActivityResultComment.comment;i.a.dispatch(c.Lb(t)),n(t)}else a(e);i.a.dispatch(c.Xb(!1))})).catch((function(e){a(e),i.a.dispatch(c.gc(!1))}))}))}},{key:"addFeedbackCommentVideo",value:function(e,t,n,a){return new Promise((function(o,s){i.a.dispatch(c.Xb(!0)),r.a.mutate({mutation:ot,variables:{input:{activityDbId:e,submitterDbId:t,comment:{commentMedia:n,syncTime:a}}}}).then((function(e){if(e&&e.data){var t=e.data.createActivityResultComment.comment;i.a.dispatch(c.nb(t)),o(t)}else s(e);i.a.dispatch(c.Xb(!1))})).catch((function(e){s(e),i.a.dispatch(c.Xb(!1))}))}))}},{key:"createRubricPeerReview",value:function(e,t,n,a){var o=this;return new Promise((function(s,u){var l={rows:n.map((function(e){return{evaluationCell:e}}))};r.a.mutate({mutation:dt,variables:{input:{activityDbId:e,submitterDbId:t,review:l}}}).then((function(n){if(n&&n.data){var r=n.data.createActivityResultStudentReviewRubricEvaluation;if(n.data.createActivityResultStudentReviewRubricEvaluation.errors.length>0)u(r);else{var l=n.data.createActivityResultStudentReviewRubricEvaluation.review;a?(i.a.dispatch(c.yb(l)),s(l)):(i.a.dispatch(c.Ab(l,t)),o.getPeerReviews(e).then((function(){s(l)})).catch((function(e){u(e)})))}}else u(n)})).catch((function(e){u(e)}))}))}},{key:"editGroupName",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.ac(!0)),r.a.mutate({mutation:lt,variables:{input:{dbId:e,name:t}}}).then((function(e){if(e&&e.data){var t=e.data.editActivityStudentGroupTitle.group;i.a.dispatch(c.Zb(t)),n(t)}else a(e);i.a.dispatch(c.ac(!1))})).catch((function(e){a(e),i.a.dispatch(c.ac(!1))}))}))}},{key:"createInteractiveAnswer",value:function(e,t){return new Promise((function(n,a){i.a.dispatch(c.bc(!0)),r.a.mutate({mutation:mt,variables:{input:{questionDbId:+e,answer:{option:+t}}}}).then((function(e){e&&e.data?n(e.data):a(e),i.a.dispatch(c.bc(!1))})).catch((function(e){a(e),i.a.dispatch(c.bc(!1))}))}))}},{key:"setInteractiveVideoFinishedWatching",value:function(e){return new Promise((function(t,n){i.a.dispatch(c.bc(!0)),r.a.mutate({mutation:bt,variables:{input:{activityDbId:e}}}).then((function(e){e&&e.data?(i.a.dispatch(c.cc(e.data.setInteractiveVideoWatchingFinishedAt)),t(e.data)):n(e),i.a.dispatch(c.bc(!1))})).catch((function(e){n(e),i.a.dispatch(c.bc(!1))}))}))}},{key:"saveReflectionQuestionAnswers",value:function(e,t){return new Promise((function(n,a){var o={activityDbId:e,answers:t};r.a.mutate({mutation:yt,variables:{input:o}}).then((function(e){try{var t=e.data.createReflectAnswers;t.errors&&t.errors.length>0?a(t.errors):(i.a.dispatch(c.ic(t)),n(t.answers))}catch(r){C.b.debug(r),a(r)}})).catch((function(e){a(e)}))}))}}])&&Ee(t.prototype,n),a&&Ee(t,a),e}();t.a=new Se;var Oe=o()(he()),Ce=o()(ve(),g.f,h.i,v.f,E.h),_e=o()(ye(),g.f,h.i,v.f,E.h),Te=o()(be(),m.b,m.a),Ie=o()(me(),p.b,p.a,p.c,p.d),Pe=o()(pe()),Re=o()(fe()),Ae=o()(de()),je=o()(le(),f.d),ke=o()(ue(),f.d),Ne=o()(se()),De=o()(ce()),Le=o()(ie()),Me=o()(oe()),xe=o()(ae()),Fe=o()(re()),Ve=o()(ne()),Ge=o()(te()),Ue=o()(ee()),qe=o()(J()),We=o()(Z()),Be=o()($()),Qe=o()(X()),Ye=o()(K()),He=o()(z()),ze=o()(H()),Ke=o()(Y(),p.d),Xe=o()(Q(),f.d),$e=o()(B()),Ze=o()(W()),Je=o()(q()),et=o()(U()),tt=o()(G()),nt=o()(V(),w.b,w.a),rt=o()(F(),b.d,b.b,b.a),at=o()(x()),ot=o()(M(),m.b,m.a),it=o()(L(),m.b,m.a),ct=o()(D()),st=o()(N()),ut=o()(k()),lt=o()(j()),dt=o()(A(),y.c),ft=o()(R(),y.c),pt=o()(P(),p.b),mt=o()(I(),E.d,E.e),bt=o()(T()),yt=o()(_(),S.b)},xWUU:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("xrVw"),s=n("TSYQ"),u=n.n(s),l=function(e){return a.a.createElement(c.j,{collapsed:!e.visible},a.a.createElement(c.m,{"aria-describedby":e.id,autopadContent:!1,className:u()("notification-dialog",e.className),containFocus:!1,id:e.id,title:e.title,titleClassName:u()("notification-dialog-title",e.titleClassName)},e.dialogContent))};l.propTypes={id:i.a.string.isRequired,className:i.a.string,dialogContent:i.a.any.isRequired,title:i.a.string,titleClassName:i.a.string,visible:i.a.bool.isRequired},t.a=l},xp71:function(e,t,n){},xyD6:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("G4qV"),a=n("hf66"),o=Object(r.a)(a.a,(function(e){return e.activity})),i=Object(r.a)(o,(function(e){return e.activityData})),c=Object(r.a)(i,(function(e){return e.myData})),s=Object(r.a)(i,(function(e){return e.interactiveVideoSettings})),u=Object(r.a)(i,(function(e){return e.interactiveQuestions}));Object(r.a)(c,(function(e){return e.interactiveVideoWatchingFinishedAt})),Object(r.a)(c,(function(e){return e.interactiveAnswers}))},y54d:function(e,t,n){},yBPd:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZD0w"),s=n("LvDl"),u=n.n(s),l=(n("NVgV"),n("TSYQ")),d=n.n(l),f=n("q8N1"),p=n("Wqtl"),m=n("jpbM"),b=n.n(m),y=n("ZmiZ"),v=n("kbsL"),h=n("LFYD"),g=n("uxn8");function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==E(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,O(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return!(JSON.stringify(this.props.rows)===JSON.stringify(e.rows)&&this.props.showClientErrors===e.showClientErrors&&this.props.errors===e.errors&&JSON.stringify(this.props.grade)===JSON.stringify(e.grade))}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.rows,r=e.renderRows;return a.a.createElement("table",{className:"c-rubric__table",ref:this.props.tableRef,summary:t._("Your rubric evaluation of this team member")},a.a.createElement("tbody",null,r(n,!0)))}}])&&w(n.prototype,r),o&&w(n,o),t}(r.Component),T=Object(c.withI18n)()(_);function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,A(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return!(JSON.stringify(this.props.rows)===JSON.stringify(e.rows)&&this.props.fixedHeaderY===e.fixedHeaderY&&this.props.showClientErrors===e.showClientErrors&&this.props.errors===e.errors&&JSON.stringify(this.props.grade)===JSON.stringify(e.grade))}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.fixedHeaderY,r=e.renderRows,o=e.rows;return a.a.createElement("table",{className:d()("c-rubric__table","c-rubric__table--fixed-header"),ref:this.props.tableRef,summary:t._("Rubric Columns"),style:{top:n}},a.a.createElement("tbody",null,r([o[0]])))}}])&&P(n.prototype,r),o&&P(n,o),t}(r.Component),N=Object(c.withI18n)()(k);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,x(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return!(JSON.stringify(this.props.rows)===JSON.stringify(e.rows)&&this.props.fixedColumnX===e.fixedColumnX&&this.props.showClientErrors===e.showClientErrors&&this.props.errors===e.errors&&JSON.stringify(this.props.grade)===JSON.stringify(e.grade))}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.fixedColumnX,r=e.renderFirstColumn;return a.a.createElement("table",{className:d()("c-rubric__table","c-rubric__table--fixed-column"),ref:this.props.tableRef,summary:t._("Rubric Rows"),style:{left:n}},a.a.createElement("tbody",null,r()))}}])&&L(n.prototype,r),o&&L(n,o),t}(r.Component),G=Object(c.withI18n)()(V),U=n("8For"),q=n("wRmV"),W=n("K32+");function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X="c-rubric__description",$=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Y(t).call(this,e),n=!o||"object"!==B(o)&&"function"!==typeof o?z(r):o,K(z(z(n)),"handleTruncate",(function(e){n.state.truncated!==e&&n.setState({truncated:e})})),K(z(z(n)),"getTextContainer",(function(){var e=n.state.truncated,t=n.props.description;return e?a.a.createElement(q.b,{label:t},n.getTruncatedText()):n.getTruncatedText()})),K(z(z(n)),"getTruncatedText",(function(){var e=n.props.description;return a.a.createElement("p",{className:X},a.a.createElement(W.a,{lines:3,onTruncate:n.handleTruncate,ellipsis:a.a.createElement("span",null,"...")},e))})),n.state={truncated:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.ariaLabel,n=e.className,r=e.clickHandler,o=e.isCorner,i=e.isHeader,c=e.isRowSelected,s=e.keyDownHandler,u=e.tabIndex,l=e.points;return a.a.createElement("td",{className:"c-rubric__cell"},a.a.createElement("div",{"aria-label":t,className:n,role:"button",tabIndex:u,onClick:r,onKeyDown:s},!o&&this.getTextContainer(),!i&&a.a.createElement("p",{className:"c-rubric__points"},l),c&&a.a.createElement(U.a,{className:"c-rubric__selected-row-icon"},h.a.DONE)))}}])&&Q(n.prototype,r),o&&Q(n,o),t}(r.Component);$.propTypes={ariaLabel:i.a.string,className:i.a.string,clickHandler:i.a.func,description:i.a.string,keyDownHandler:i.a.func,points:i.a.number,isCorner:i.a.bool,isHeader:i.a.bool,isRowSelected:i.a.bool,tabIndex:i.a.number};var Z=$;function J(e){return(J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe="c-rubric__row",ie=255,ce=1e3,se=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=te(t).call(this,e),n=!o||"object"!==J(o)&&"function"!==typeof o?re(r):o,ae(re(re(n)),"computeState",(function(e,t){n.props.mode===p.a.CREATE&&((e={}).dbId=b()(5),e.rows=n.generateRows(n.props.initialRowsCount,n.props.initialCellsCount));var r=u.a.merge([],e.rows),a=new Array(r.length-1);return t&&(r.forEach((function(e,n){0!==n&&e.cells.forEach((function(e){-1!==t.indexOf(e.dbId)&&(a[n-1]=e)}))})),r.forEach((function(e){e.cells.forEach((function(e,t){e.points||(e.points=r[0].cells[t].points)}))}))),{rubric:u.a.merge({},e),savedRubric:u.a.merge({},e),fixedHeaderY:0,fixedColumnX:0,grade:a,errors:n.state&&n.state.errors||[]}})),ae(re(re(n)),"renderRows",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e,r){var o=e.dbId,i=e.cells;return a.a.createElement("tr",{key:o,className:oe},i.map((function(e,a){return n.renderCell(e,a,r,t)})))}))})),ae(re(re(n)),"addCell",(function(e){for(var t=u.a.clone(n.state.rubric),r=0;r<t.rows.length;r++)t.rows[r].cells=g.b(t.rows[r].cells,n.generateCell(),e+1);n.setState({rubric:t},n.onRubricChange)})),ae(re(re(n)),"removeCell",(function(e){for(var t=u.a.clone(n.state.rubric),r=0;r<t.rows.length;r++)t.rows[r].cells=g.d(t.rows[r].cells,e);n.setState({rubric:t},n.onRubricChange)})),ae(re(re(n)),"addRow",(function(e){var t=u.a.clone(n.state.rubric),r=t.rows[0].cells.length;t.rows=g.b(t.rows,n.generateRow(r),e+1),n.setState({rubric:t},n.onRubricChange)})),ae(re(re(n)),"removeRow",(function(e){var t=u.a.clone(n.state.rubric);t.rows=g.d(t.rows,e),n.setState({rubric:t},n.onRubricChange)})),ae(re(re(n)),"onChangeDescription",(function(e,t,r){var a=n.state.rubric;r.length>ie&&(r=r.substring(0,ie)),a.rows[e].cells[t].description=r,n.setState({rubric:a},n.onRubricChange)})),ae(re(re(n)),"onChangePoints",(function(e,t,r){var a=n.state.rubric,o=a.rows[e].cells[t].points,i=r;if(i.match(/^\d*\.?\d{0,2}$/)){try{var c=parseFloat(i);u.a.isNaN(c)?i=null:c>ce&&(i=ce)}catch(d){i=o}var s=u.a.merge({},a),l=u.a.merge({},s.rows[e].cells[t],{points:i});s.rows[e].cells[t]=l,n.setState({rubric:s},n.onRubricChange)}})),ae(re(re(n)),"onContainerScroll",(function(){n.recalculateFixedHeader(),n.recalculateFixedColumn()})),ae(re(re(n)),"renderFirstColumn",(function(){var e=n.state.rubric.rows,t=(e=u.a.merge([],e)).map((function(e){return e.cells=[e.cells[0]],e}));return n.renderRows(t)})),ae(re(re(n)),"onRubricChange",(function(){var e=u.a.merge({},n.state.rubric),t=n.props.onRubricChange,r=0,a=!0,o=[];delete e.__typename,delete e.owner,delete e.createdAt,delete e.isUsed,delete e.cengageSettings,e.rows.forEach((function(e,t){var i=[];if(delete e.dbId,delete e.__typename,e.cells.forEach((function(e,r){delete e.dbId,delete e.__typename;var c=n.validate(t,r);if(c.length>0&&(a=!1,o=o.concat(c)),e.description||(e.description=""),0!==r){var s=parseFloat(e.points);!u.a.isNaN(s)&&u.a.isNumber(s)||(s=n.getDefaultPoints(r)),i.push(s)}})),0!==t&&0!==(i=u.a.compact(i)).length){var c=Math.max.apply(null,i);r+=c}})),e.maxValue=Math.round(100*r)/100,e.isValid=a,t(e),n.setState({errors:o})})),n.state=n.computeState(e.rubric,e.grade),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.savedRubric&&!u.a.isEqual(this.props.savedRubric,e.rubric)&&this.setState(this.computeState(e.rubric,e.grade))}},{key:"componentDidMount",value:function(){this.onRubricChange(),this.recalculateFixedHeader(),this.recalculateFixedColumn()}},{key:"componentWillUnmount",value:function(){}},{key:"getDefaultPoints",value:function(e){return+this.state.rubric.rows[0].cells[e].points}},{key:"handleCellClick",value:function(e,t){var n=this;if(this.props.mode===p.a.GRADE){var r=u.a.merge([],this.state.grade);r[t]&&r[t].dbId===e.dbId?r[t]=null:r[t]=e,this.setState({grade:r},(function(){n.onGradeChange()}))}}},{key:"onGradeChange",value:function(){var e={cellIds:[],points:0,valid:!0};this.state.grade.forEach((function(t){if(!t)return e.valid=!1,void e.cellIds.push(null);e.points+=parseFloat(t.points),e.cellIds.push(t.dbId)})),this.props.onGradeChange(e)}},{key:"isCellSelected",value:function(e){var t=!1;return this.state.grade.forEach((function(n){n&&n.dbId===e.dbId&&(t=!0)})),t}},{key:"isRowSelected",value:function(e){return!!this.state.grade[e]}},{key:"renderCell",value:function(e,t,n,r){var o,i=this;e=u.a.merge({},e);var c=this.props.i18n,s=this.getDefaultPoints(t),l=this.props.mode===p.a.CREATE||this.props.mode===p.a.EDIT,m=e,b=m.dbId,g=m.description,E=this.state.rubric.rows,w=0===n,S=0===t&&0===n,O=this.isCellSelected(e),C=0===t,_=0===n,T=!w&&!C,I=C&&this.isRowSelected(n-1),P=d()("c-rubric__cell-content",(ae(o={},"c-rubric__cell-content--head",w),ae(o,"c-rubric__cell-content--first-column",0===t),ae(o,"c-rubric__cell-content--selected",O),o));C||_||l||!u.a.isNaN(parseFloat(e.points))||(e.points=s);var R=function(){return i.handleCellClick(e,n-1)},A=E[n].cells[0].description,j=E[0].cells[t].description;if(S)return a.a.createElement("td",{key:b,className:"c-rubric__cell"},a.a.createElement("div",{className:P}));if(l){var k=!this.state.rubric.isUsed,N=this.state.rubric.rows[0].cells.length>this.props.minCellsCount&&k,D=this.state.rubric.rows.length>this.props.minRowsCount&&k,L=this.state.rubric.rows[0].cells.length<this.props.maxCellsCount&&k,M=this.state.rubric.rows.length<this.props.maxRowsCount&&k,x="",F="";this.props.showClientErrors&&(x=this.getDescriptionError(n,t),F=this.getPointsError(n,t));var V=_?c._("Default points: {0}",{0:e.points}):c._("Points: {0}",{0:e.points}),G=(_||C)&&r;return a.a.createElement("td",{key:b,className:"c-rubric__cell"},a.a.createElement("div",{className:P},a.a.createElement(y.b,{id:"description-"+e.dbId,name:"description-"+e.dbId,enabled:!G,errorText:x,value:e.description||"",onChange:this.onChangeDescription.bind(null,n,t),placeholder:c._("Description")}),!C&&k&&a.a.createElement(y.b,{id:"points-"+e.dbId,name:"description-"+e.dbId,enabled:!G,errorText:F,placeholder:c._("Points"),value:null===e.points?"":e.points,onChange:this.onChangePoints.bind(null,n,t),style:{width:65}}),!C&&!k&&a.a.createElement("p",{className:"c-rubric__points-text"},V),_&&N&&a.a.createElement(v.c,{id:"button-rubric-cell-remove["+n+"_"+t+"]",className:"c-rubric__remove-cell-button",enabled:!G,title:c._("Remove cell"),onClick:this.removeCell.bind(null,t)},h.a.DELETE),_&&k&&L&&a.a.createElement(v.c,{id:"button-rubric-cell-add["+n+"_"+t+"]",className:"c-rubric__add-cell-button",enabled:!G,title:c._("Add cell"),onClick:this.addCell.bind(null,t)},h.a.ADD),C&&k&&M&&a.a.createElement(v.c,{id:"button-rubric-row-add["+n+"_"+t+"]",className:"c-rubric__add-row-button",enabled:!G,onClick:this.addRow.bind(null,n),title:c._("Add row")},h.a.ADD),C&&D&&a.a.createElement(v.c,{id:"button-rubric-row-remove["+n+"_"+t+"]",className:"c-rubric__remove-row-button",enabled:!G,onClick:this.removeRow.bind(null,n),title:c._("Remove row")},h.a.DELETE)))}return a.a.createElement(Z,{key:b,ariaLabel:c._("Criterion: {criterion}. Level: {level}. Points: {0}",{0:e.points,criterion:A,level:j}),className:P,clickHandler:C?null:R,description:g,keyDownHandler:C?null:Object(f.b)(R),points:e.points,isCorner:S,isHeader:w,isRowSelected:I,tabIndex:T?0:-1})}},{key:"getDescriptionError",value:function(e,t){var n="";return this.state.errors.forEach((function(r){r.cellIndex===t&&r.rowIndex===e&&"description"===r.field&&(n=r.error)})),n}},{key:"getPointsError",value:function(e,t){var n="";return this.state.errors.forEach((function(r){r.cellIndex===t&&r.rowIndex===e&&"points"===r.field&&(n=r.error)})),n}},{key:"generateCell",value:function(){return{dbId:b()(3),points:null,description:null}}},{key:"generateRow",value:function(e){for(var t={dbId:b()(3),cells:[]},n=0;n<e;n++)t.cells.push(this.generateCell());return t}},{key:"generateRows",value:function(e,t){for(var n=[],r=0;r<e;r++)n.push(this.generateRow(t));return n}},{key:"recalculateFixedHeader",value:function(){this.setState({fixedHeaderY:this.container.scrollTop})}},{key:"recalculateFixedColumn",value:function(){this.setState({fixedColumnX:this.container.scrollLeft})}},{key:"validate",value:function(e,t){if(0===e&&0===t||e>0&&t>0)return[];var n=this.state.rubric.rows[e].cells[t],r=[];return n.description||r.push({cellIndex:t,rowIndex:e,field:"description",error:"Required"}),0===e&&u.a.isNaN(parseFloat(n.points))&&r.push({cellIndex:t,rowIndex:e,field:"points",error:"Required"}),r}},{key:"addError",value:function(e){var t=this.state.errors;t.push(e),this.setState({errors:t})}},{key:"resetErrors",value:function(){this.setState({errors:[]})}},{key:"render",value:function(){var e=this,t=this.state.rubric.rows,n=this.state,r=n.fixedHeaderY,o=n.fixedColumnX,i=n.grade,c=n.errors,s=this.props.showClientErrors;return this.state.rubric?(t=u.a.merge([],t),i=u.a.merge([],i),a.a.createElement("div",{className:"c-rubric",onScroll:this.onContainerScroll,ref:function(t){return e.container=t}},a.a.createElement(N,{tableRef:function(t){e.fixedHeaderTable=t},rows:t,grade:i,showClientErrors:s,errors:c,renderRows:this.renderRows,fixedHeaderY:r}),a.a.createElement(G,{tableRef:function(t){e.fixedColumnTable=t},rows:t,grade:i,showClientErrors:s,errors:c,fixedColumnX:o,renderFirstColumn:this.renderFirstColumn}),a.a.createElement(T,{tableRef:function(t){return e.mainTable=t},rows:t,grade:i,showClientErrors:s,errors:c,fixedColumnX:o,renderRows:this.renderRows}),a.a.createElement("div",{className:"c-rubric__fixed-corner",style:{left:o,top:r},ref:function(t){e.fixedCorner=t}}))):null}}])&&ee(n.prototype,r),o&&ee(n,o),t}(r.Component);se.defaultProps={onGradeChange:function(){},minCellsCount:2,minRowsCount:2,maxCellsCount:10,maxRowsCount:41,initialCellsCount:5,initialRowsCount:3,onRubricChange:function(){}},se.propTypes={rubric:i.a.shape({dbId:i.a.number,name:i.a.string,maxValue:i.a.number,isUsed:i.a.bool,rows:i.a.arrayOf(i.a.shape({dbId:i.a.number,cells:i.a.arrayOf(i.a.shape({dbId:i.a.number,description:i.a.string,points:i.a.number}))}))}),mode:i.a.oneOf([p.a.VIEW,p.a.GRADE,p.a.CREATE,p.a.EDIT]).isRequired,onGradeChange:i.a.func,minCellsCount:i.a.number,minRowsCount:i.a.number,maxCellsCount:i.a.number,maxRowsCount:i.a.number,initialCellsCount:i.a.number,initialRowsCount:i.a.number,onRubricChange:i.a.func};t.a=Object(c.withI18n)()(se)},"yG+V":function(e,t,n){"use strict";var r=n("1mi+");n.d(t,"a",(function(){return r.a}));n("kKdm"),n("7GeL")},yScL:function(e,t,n){},yWXI:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return s}));var r="[Customization] Set launchpoint settings",a="[Customization] Set capability settings",o="[Customization] Set preference settings",i=function(e){return{type:r,payload:e}},c=function(e){return{type:a,payload:e}},s=function(e){return{type:o,payload:e}}},ybFX:function(e,t,n){},yov7:function(e,t,n){},yt4I:function(e,t,n){},yxKi:function(e,t,n){"use strict";n("nOAq"),n("mTCQ");var r=n("j15M"),a=n("q1tI"),o=n.n(a),i=n("17x9"),c=n.n(i),s=n("TSYQ"),u=n.n(s),l=(n("0l2v"),function(e){return o.a.createElement("div",{className:u()("page-heading",e.className)},o.a.createElement("div",{className:"page-heading-contents"},o.a.createElement("h1",{className:"page-heading-title"},e.title),o.a.createElement("p",{className:"page-heading-description"},e.description)))});l.propTypes={className:c.a.string,description:c.a.string,title:c.a.string};var d=n("8bCP");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=2e4,g=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=this,i=(e=m(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==f(i)&&"function"!==typeof i?y(a):i,v(y(y(n)),"componentDidMount",(function(){n._ismounted=!0,n.props.pollingEnabled&&n.startPolling()})),v(y(y(n)),"componentWillUnmount",(function(){n._ismounted=!1,clearTimeout(n.pollingTimer)})),v(y(y(n)),"startPolling",(function(){clearTimeout(n.pollingTimer),n._ismounted&&(n.pollingTimer=setTimeout((function(){n.performRefresh()}),h))})),v(y(y(n)),"performRefresh",(function(){var e=n.props,t=e.serviceMethod,r=e.serviceParameters;t.apply(null,r).then((function(){n.startPolling()}),(function(e){d.b.error(e),n.startPolling()}))})),v(y(y(n)),"render",(function(){var e=n.props,t=e.children,a=e.description,i=e.title;return o.a.createElement(r.a,{title:i,description:a},t)})),n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.pollingEnabled!==this.props.pollingEnabled&&(e.pollingEnabled?this.startPolling():clearTimeout(this.pollingTimer))}}])&&p(n.prototype,a),i&&p(n,i),t}(a.Component);g.propTypes={description:c.a.node,pollingEnabled:c.a.bool,serviceMethod:c.a.func.isRequired,serviceParameters:c.a.array,title:c.a.string},g.defaultProps={pollingEnabled:!0};var E=g;n("RKRe");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return E}))},zAaz:function(e,t,n){},zFSh:function(e,t,n){},zHZz:function(e,t,n){},"zL4/":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("ZtzG"),s=(n("i5n6"),n("TSYQ")),u=n.n(s),l="column-avatar",d=16;function f(e){return a.a.createElement("div",{className:u()(l,e.className)},function(e){return e.value?"string"===typeof e.value?a.a.createElement(c.a,{tooltip:{distance:d},value:e.value}):e.value instanceof Array?e.value.map((function(e,t){return a.a.createElement(c.a,{tooltip:{distance:d},key:t,value:e})})):void 0:null}(e),e.showValue&&a.a.createElement("span",{className:"avatar-label"},e.value))}f.propTypes={className:i.a.string,value:i.a.any,showValue:i.a.bool},f.defaultProps={showValue:!1},t.a=f},zNkm:function(e,t,n){},zUuM:function(e,t,n){},zeqS:function(e,t,n){},zgE9:function(e,t,n){},zoNz:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return m}));var r="[Double player] Init",a="[Double player] Destroy",o="[Double player] Set prop",i=function(e,t){return{type:r,payload:{playerId:e,initialState:t}}},c=function(e){return{type:a,payload:e}},s=function(e,t,n){return{type:o,payload:{playerId:e,prop:t,value:n}}},u=function(e,t){return s(e,"deskshareIsActive",t)},l=function(e,t){return s(e,"secondaryVideoX",t)},d=function(e,t){return s(e,"secondaryVideoY",t)},f=function(e,t){return s(e,"secondaryVideoWidth",t)},p=function(e,t){return s(e,"inFullScreen",t)},m=function(e,t){return s(e,"isSplitView",t)}},zqO2:function(e,t,n){},zyHd:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("5ux5"),a=n("J4sO"),o=n("fcFR"),i=n("QccL");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"isMedia",value:function(e){return e.__typename===r.a.MEDIA}},{key:"isMeeting",value:function(e){return e.__typename===r.a.MEETING}},{key:"isDocument",value:function(e){return e.__typename===r.a.DOCUMENT}},{key:"isLink",value:function(e){return e.__typename===r.a.LINK}},{key:"isReflectionAnswers",value:function(e){return e.__typename===r.a.REFLECTION_ANSWERS}},{key:"isVideoPartial",value:function(t){return e.isMedia(t)||e.isMeeting(t)}},{key:"isMediaInProcessingProgress",value:function(e){var t=e.media||e.recordedMedia;return t&&t.processingStatus===a.a.PROGRESS}},{key:"isMediaProcessed",value:function(e){var t=e.media||e.recordedMedia;return t&&t.processingStatus===a.a.READY}},{key:"isSlaveMediaProcessed",value:function(e){var t=e.media||e.recordedMedia;return!!t&&(!t.slaveMedia||t.slaveMedia.processingStatus===a.a.READY)}},{key:"isMediaInProcessingError",value:function(e){var t=e.media||e.recordedMedia;return t&&t.processingStatus===a.a.ERROR}},{key:"isUnprocessedMeeting",value:function(t){return e.isMeeting(t)&&!t.recordedMedia}},{key:"getMeetingsNotFinalizedPartials",value:function(t){return t.filter((function(t){var n=!0;return t.recordedMedia&&(n=!1),e.isMeeting(t)&&n}))}},{key:"getVideosToCombine",value:function(e){return this.getInProgressPartials(e).filter(this.isMedia).filter(this.isMediaProcessed).filter(this.isSlaveMediaProcessed)}},{key:"getInProgressPartials",value:function(t){return t.filter((function(t){var n=!0;return e.isMeeting(t)&&!t.recordedMedia?n=!1:t.finalizedAt&&(n=!1),n}))}},{key:"containVideoPartial",value:function(t){var n=!1;return t.forEach((function(t){e.isVideoPartial(t)&&(n=!0)})),n}},{key:"getReadyToSubmitPartials",value:function(e){return e.filter((function(e){return e.finalizedAt}))}},{key:"createReflectionAnswersPartial",value:function(e,t,n){return t&&t.length>0?{__typename:r.a.REFLECTION_ANSWERS,title:e,owner:t[0].submitter,dbId:"",finalizedAt:"",previewFunction:n,readOnly:!0,data:t}:null}},{key:"isBbbMedia",value:function(e){return!!e.meetingAssets}},{key:"isTwoStreamsMedia",value:function(e){return!!e.slaveMedia}},{key:"downloadPartial",value:function(t){if(e.isMedia(t)){var n=t.media,r=t.title;Object(i.a)(n,r)}else{var a=t.downloadUrl,c=t.title;a&&Object(o.a)(a,c)}}},{key:"createVideoPartial",value:function(e){return{dbId:e.dbId,media:e,__typename:r.a.MEDIA}}}],(n=null)&&c(t.prototype,n),s&&c(t,s),e}()},zyUR:function(e,t,n){}}]);
//# sourceMappingURL=main.542febdc.chunk.js.map